import{d as t,r as e,p as i,bS as a,W as l,bT as c,g as s,h as r,o,c as d,w as n,b as u,x as p,H as v,y,f,e as m,E as _,G as k,F as h,v as x,i as g,a4 as C}from"./index-656dc629.js";import{_ as b}from"./u-popup.7e287da6.js";const w=t({__name:"area-select",props:{areaId:{type:Number,default:0}},emits:["complete"],setup(t,{expose:w,emit:j}){const I=t,E=e(!1),F=i({province:[],city:[],district:[]}),G=e("province"),H=i({province:null,city:null,district:null});a(0).then((({data:t})=>{F.province=t})).catch(),l((()=>I.areaId),((t,e)=>{t&&!e&&c(t).then((({data:t})=>{t.province&&(H.province=t.province),t.city&&(H.city=t.city),t.district&&(H.district=t.district)})).catch()}),{immediate:!0}),l((()=>H.province),(()=>{a(H.province.id).then((({data:t})=>{if(F.city=t,G.value="city",H.city){let e=!1;for(let i=0;i<t.length;i++)if(H.city.id==t[i].id){e=!0;break}e||(H.city=null)}})).catch()}),{deep:!0}),l((()=>H.city),(t=>{t?a(H.city.id).then((({data:t})=>{if(F.district=t,G.value="district",H.district){let e=!1;for(let i=0;i<t.length;i++)if(H.district.id==t[i].id){e=!0;break}e||(H.district=null)}})).catch():(F.district=[],H.district=null)}),{deep:!0}),l((()=>H.district),(t=>{t&&(G.value="district",j("complete",H),E.value=!1)}),{deep:!0});return w({open:()=>{E.value=!0}}),(t,e)=>{const i=g,a=C,l=s(r("u-popup"),b);return o(),d(l,{show:E.value,onClose:e[3]||(e[3]=t=>E.value=!1),mode:"bottom",round:10,closeable:!0},{default:n((()=>[u(i,{class:"text-center p-[30rpx]"},{default:n((()=>[p("请选择地区")])),_:1}),u(i,{class:"flex p-[30rpx] text-sm font-semibold"},{default:n((()=>[F.province.length?(o(),d(i,{key:0,class:v(["flex-1",{"text-[var(--primary-color)]":"province"==G.value}]),onClick:e[0]||(e[0]=t=>G.value="province")},{default:n((()=>[H.province?(o(),d(i,{key:0},{default:n((()=>[p(y(H.province.name),1)])),_:1})):(o(),d(i,{key:1},{default:n((()=>[p("请选择")])),_:1}))])),_:1},8,["class"])):f("v-if",!0),F.city.length?(o(),d(i,{key:1,class:v(["flex-1",{"text-[var(--primary-color)]":"city"==G.value}]),onClick:e[1]||(e[1]=t=>G.value="city")},{default:n((()=>[H.city?(o(),d(i,{key:0},{default:n((()=>[p(y(H.city.name),1)])),_:1})):(o(),d(i,{key:1},{default:n((()=>[p("请选择")])),_:1}))])),_:1},8,["class"])):f("v-if",!0),F.district.length?(o(),d(i,{key:2,class:v(["flex-1",{"text-[var(--primary-color)]":"district"==G.value}]),onClick:e[2]||(e[2]=t=>G.value="district")},{default:n((()=>[H.district?(o(),d(i,{key:0},{default:n((()=>[p(y(H.district.name),1)])),_:1})):(o(),d(i,{key:1},{default:n((()=>[p("请选择")])),_:1}))])),_:1},8,["class"])):f("v-if",!0)])),_:1}),u(a,{"scroll-y":"true",class:"h-[50vh]"},{default:n((()=>[u(i,{class:"flex p-[30rpx] pt-0 text-sm"},{default:n((()=>[F.province.length?m((o(),d(i,{key:0},{default:n((()=>[(o(!0),_(k,null,h(F.province,(t=>(o(),d(i,{class:v(["leading-loose",{"text-[var(--primary-color)]":H.province&&H.province.id==t.id}]),onClick:e=>H.province=t},{default:n((()=>[p(y(t.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1},512)),[[x,"province"==G.value]]):f("v-if",!0),F.city.length?m((o(),d(i,{key:1},{default:n((()=>[(o(!0),_(k,null,h(F.city,(t=>(o(),d(i,{class:v(["leading-loose",{"text-[var(--primary-color)]":H.city&&H.city.id==t.id}]),onClick:e=>H.city=t},{default:n((()=>[p(y(t.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1},512)),[[x,"city"==G.value]]):f("v-if",!0),F.district.length?m((o(),d(i,{key:2},{default:n((()=>[(o(!0),_(k,null,h(F.district,(t=>(o(),d(i,{class:v(["leading-loose",{"text-[var(--primary-color)]":H.district&&H.district.id==t.id}]),onClick:e=>H.district=t},{default:n((()=>[p(y(t.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1},512)),[[x,"district"==G.value]]):f("v-if",!0)])),_:1})])),_:1})])),_:1},8,["show"])}}});export{w as _};
