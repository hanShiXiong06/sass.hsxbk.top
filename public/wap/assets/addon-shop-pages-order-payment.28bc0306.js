import{d as e,r as t,W as l,m as a,g as r,h as s,o,c as d,w as i,b as u,_ as p,x as n,u as c,f as x,e as f,E as _,G as v,F as y,H as m,y as b,v as g,i as h,C as k,a4 as w,b8 as j,n as F,a as C,I as S,N as $,a3 as E,V as z,aE as K}from"./index-905183d4.js";import{_ as O}from"./u-icon.86a2aad0.js";import{_ as R}from"./u--image.b5d65e0e.js";import{_ as T}from"./u-alert.f12d4477.js";import{_ as A}from"./u-button.d3798ecb.js";import{_ as I}from"./u-tabbar.bedfa48a.js";import{_ as V}from"./pay.2560ca84.js";import{e as D,f as H,h as L}from"./order.f2e9a9a3.js";import{_ as N}from"./u-tabs.5a38a3b5.js";import{_ as B}from"./u-popup.e3f6594b.js";import{_ as G,a as P}from"./invoice.vue_vue_type_script_setup_true_lang.ecff82f1.js";import{_ as U}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.44c969ef.js";import"./u-transition.dbaca185.js";import"./u-loading-icon.c376267d.js";import"./u-safe-bottom.e94b03c1.js";import"./pay.01186f9d.js";import"./u-badge.82a65592.js";import"./u-empty.09c683e5.js";import"./u-form.7ae4e9da.js";import"./u-line.9e44f7cf.js";import"./u-input.07f64251.js";const W=e({__name:"select-coupon",props:{orderKey:{type:String,default:""}},emits:["confirm"],setup(e,{expose:j,emit:F}){const C=e,S=t(0),$=t([]),E=t([]),z=t(!1),K=t(null);l((()=>C.orderKey),(()=>{C.orderKey&&!$.value.length&&D({order_key:C.orderKey}).then((({data:e})=>{const t=[],l=[];e.length&&e.forEach((e=>{e.is_normal?t.push(e):l.push(e)})),E.value=l,$.value=t,t.length&&(K.value=t[0],F("confirm",K.value))})).catch()}),{immediate:!0});const O=a((()=>[{name:`可用优惠券（${$.value.length}）`,key:"normal"},{name:`不可用优惠券（${E.value.length}）`,key:"disabled"}])),R=e=>{S.value=e.index},T=()=>{F("confirm",K.value),z.value=!1};return j({open:e=>{if(z.value=!0,e)for(let t=0;t<$.value.length;t++)if($.value[t].id==e){K.value=$.value[t];break}},couponList:$}),(e,t)=>{const l=h,a=r(s("u-tabs"),N),j=k,F=w,C=r(s("u-button"),A),I=r(s("u-popup"),B);return o(),d(I,{show:z.value,onClose:t[1]||(t[1]=e=>z.value=!1),mode:"bottom",round:10,closeable:!0},{default:i((()=>[u(l,{onTouchmove:t[0]||(t[0]=p((()=>{}),["prevent","stop"]))},{default:i((()=>[u(l,{class:"text-center p-[30rpx]"},{default:i((()=>[n("请选择优惠券")])),_:1}),e.type?x("v-if",!0):(o(),d(l,{key:0,class:"border-0 !border-b !border-[#eee] border-solid"},{default:i((()=>[u(a,{list:c(O),onClick:R,current:S.value,itemStyle:"width:50%;height:88rpx;box-sizing: border-box;",lineColor:"var(--primary-color)"},null,8,["list","current"])])),_:1})),u(F,{"scroll-y":"true",class:"h-[50vh]"},{default:i((()=>[f(u(l,{class:"p-[30rpx] pt-0 text-sm"},{default:i((()=>[(o(!0),_(v,null,y($.value,(e=>(o(),d(l,{class:m(["mt-[30rpx] p-[30rpx] border-1 !border-[#eee] border-solid rounded-[20rpx]",{"!border-primary bg-primary-light":K.value&&K.value.id==e.id}]),onClick:t=>{return l=e,void(K.value?K.value=K.value.id!=l.id?l:null:K.value=l);var l}},{default:i((()=>[u(l,{class:m(["flex border-0 !border-b !border-[#eee] border-dashed pb-[20rpx]",{"!border-primary":K.value&&K.value.id==e.id}])},{default:i((()=>[u(l,{class:"flex-1 w-0"},{default:i((()=>[u(l,{class:"text-base font-bold"},{default:i((()=>[n(b(e.title),1)])),_:2},1024),e.min_condition_money>0?(o(),d(l,{key:0},{default:i((()=>[n("满"+b(e.min_condition_money)+"可用",1)])),_:2},1024)):(o(),d(l,{key:1},{default:i((()=>[n("无门槛券")])),_:1}))])),_:2},1024),u(l,{class:"font-bold text-base price-font"},{default:i((()=>[u(j,{class:"text-xs"},{default:i((()=>[n("￥")])),_:1}),n(b(e.price),1)])),_:2},1024)])),_:2},1032,["class"]),u(l,{class:"pt-[20rpx] text-xs"},{default:i((()=>[n(b(e.create_time)+" ~ "+b(e.expire_time)+"期间有效",1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),256))])),_:1},512),[[g,0==S.value]]),f(u(l,{class:"p-[30rpx] pt-0 text-sm"},{default:i((()=>[(o(!0),_(v,null,y(E.value,(e=>(o(),d(l,{class:"mt-[30rpx] p-[30rpx] border-1 !border-[#eee] border-solid rounded-[20rpx] bg-[#f5f5f5]"},{default:i((()=>[u(l,{class:"flex border-0 !border-b !border-[#ddd] border-dashed pb-[20rpx]"},{default:i((()=>[u(l,{class:"flex-1 w-0"},{default:i((()=>[u(l,{class:"text-base font-bold"},{default:i((()=>[n(b(e.title),1)])),_:2},1024),e.min_condition_money>0?(o(),d(l,{key:0},{default:i((()=>[n("满"+b(e.min_condition_money)+"可用",1)])),_:2},1024)):(o(),d(l,{key:1},{default:i((()=>[n("无门槛券")])),_:1}))])),_:2},1024),u(l,{class:"font-bold text-base price-font"},{default:i((()=>[u(j,{class:"text-xs"},{default:i((()=>[n("￥")])),_:1}),n(b(e.price),1)])),_:2},1024)])),_:2},1024),u(l,{class:"pt-[20rpx] text-xs"},{default:i((()=>[n(b(e.create_time)+" ~ "+b(e.expire_time)+"期间有效",1)])),_:2},1024),u(l,{class:"text-xs pt-[10rpx] flex"},{default:i((()=>[n(" 不可用原因："+b(e.error),1)])),_:2},1024)])),_:2},1024)))),256))])),_:1},512),[[g,1==S.value]])])),_:1}),u(l,{class:"p-[30rpx]"},{default:i((()=>[u(C,{type:"primary",shape:"circle",onClick:T},{default:i((()=>[n("确认")])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])}}}),q=U(e({__name:"payment",setup(e){const p=t({order_key:"",member_remark:"",discount:{},invoice:{},delivery:{delivery_type:""}}),f=t(null),g=t(),D=t(),N=t(),B=t(),U=t(!1),q=t(0),J=t([]);uni.getStorageSync("orderCreateData")&&Object.assign(p.value,uni.getStorageSync("orderCreateData"));const M=uni.getStorageSync("selectAddressCallback");M&&(p.value.order_key="",p.value.delivery.delivery_type=M.delivery,p.value.delivery.take_address_id=M.address_id,uni.removeStorage({key:"selectAddressCallback"}));const Q=(e,t)=>{p.value.delivery.delivery_type!=e&&(q.value=t,p.value.order_key="",p.value.delivery.delivery_type=e,p.value.delivery.take_address_id=0,X())},X=()=>{H(p.value).then((({data:e})=>{f.value=e,p.value.order_key=e.order_key,f.value.delivery.delivery_type_list&&(J.value=Object.values(f.value.delivery.delivery_type_list)),M&&(q.value=J.value.findIndex((e=>e.key===f.value.delivery.delivery_type))),!p.value.delivery.delivery_type&&e.delivery.delivery_type&&(p.value.delivery.delivery_type=e.delivery.delivery_type)})).catch()};X(),l((()=>J.value.length),((e,t)=>{J.value.length&&uni.getStorageSync("distributionType")&&J.value.forEach(((e,t)=>{e.name==uni.getStorageSync("distributionType")&&(q.value=t,Q(e.key,t))}))}));let Y=0;const Z=()=>{ee()&&!U.value&&(U.value=!0,L(p.value).then((({data:e})=>{var t;Y=e.order_id,0==f.value.basic.order_money?C({url:"/addon/shop/pages/order/detail",param:{order_id:Y},mode:"redirectTo"}):null==(t=N.value)||t.open(e.trade_type,e.order_id,`/addon/shop/pages/order/detail?order_id=${e.order_id}`)})).catch((()=>{U.value=!1})))},ee=()=>{const e=p.value;if(f.value.basic.has_goods_types.includes("real")){if(["express","local_delivery"].includes(e.delivery.delivery_type)&&!f.value.delivery.take_address)return S({title:"请选择收货地址",icon:"none"}),!1;if("store"==e.delivery.delivery_type&&!e.delivery.take_store_id)return S({title:"请选择自提点",icon:"none"}),!1}return!0},te=()=>{C({url:"/addon/shop/pages/order/detail",param:{order_id:Y},mode:"redirectTo"})},le=()=>{uni.setStorage({key:"selectAddressCallback",data:{back:"/addon/shop/pages/order/payment",delivery:p.value.delivery.delivery_type},success(){C({url:"/app/pages/member/address",param:{source:"shop_order_payment",type:"local_delivery"==p.value.delivery.delivery_type?"location_address":"address"}})}})},ae=a((()=>{var e;return(null==(e=g.value)?void 0:e.couponList)||[]})),re=e=>{p.value.discount.coupon_id=e?e.id:0,X()},se=e=>{p.value.delivery.take_store_id=e&&e.store_id?e.store_id:0,X()},oe=e=>{p.value.invoice=e};return(e,t)=>{const l=h,a=$,C=k,S=r(s("u-icon"),O),H=r(s("u--image"),R),L=r(s("u-alert"),T),U=E,M=r(s("u-button"),A),X=r(s("u-tabbar"),I),Y=r(s("pay"),V),ee=w;return o(),d(l,{style:F(e.themeColor())},{default:i((()=>[f.value?(o(),d(ee,{key:0,"scroll-y":"true",class:"bg-[#f6f6f6] h-screen"},{default:i((()=>[u(l,{class:"pt-[40rpx] pb-[20rpx] px-[24rpx]"},{default:i((()=>[x(" 配送方式 "),f.value.basic.has_goods_types.includes("real")&&J.value.length?(o(),d(l,{key:0,class:"mb-[20rpx] rounded-[16rpx] bg-white"},{default:i((()=>[J.value.length>1?(o(),d(l,{key:0,class:"rounded-tl-[16rpx] rounded-tr-[16rpx] head-tab flex items-center w-full bg-[#efefef]"},{default:i((()=>[(o(!0),_(v,null,y(J.value,((e,t)=>(o(),d(l,{key:t,class:m(["head-tab-item flex-1 relative",{active:t===q.value}])},{default:i((()=>[u(l,{class:"h-[74rpx] relative z-10 text-center leading-[74rpx] text-[28rpx]",onClick:l=>Q(e.key,t)},{default:i((()=>[n(b(e.name),1)])),_:2},1032,["onClick"]),t===q.value&&3==J.value.length?(o(),d(a,{key:0,class:"tab-image absolute bottom-[-2rpx] h-[94rpx] w-[240rpx]",src:c(z)(`addon/shop/payment/tab_${t}.png`),mode:"aspectFit"},null,8,["src"])):t===q.value&&2==J.value.length?(o(),d(a,{key:1,class:"tab-img absolute bottom-[-2rpx] h-[95rpx] w-[354rpx]",src:c(z)(`addon/shop/payment/tabstyle_${t}.png`),mode:"aspectFit"},null,8,["src"])):x("v-if",!0)])),_:2},1032,["class"])))),128))])),_:1})):x("v-if",!0),u(l,{class:"min-h-[90rpx] flex items-center px-[30rpx]"},{default:i((()=>[x(" 收货地址 "),["express","local_delivery"].includes(p.value.delivery.delivery_type)?(o(),d(l,{key:0,class:"w-full",onClick:le},{default:i((()=>[e.$u.test.isEmpty(f.value.delivery.take_address)?(o(),d(l,{key:1,class:"flex items-center"},{default:i((()=>[u(a,{class:"w-[26rpx] h-[30rpx] mr-[10rpx]",src:c(z)("addon/shop/payment/position_02.png"),mode:"aspectFit"},null,8,["src"]),u(C,{class:"text-[26rpx]"},{default:i((()=>[n("添加收货地址")])),_:1}),u(C,{class:"iconfont iconxiangyoujiantou text-[26rpx] text-gray-subtitle ml-auto"})])),_:1})):(o(),d(l,{key:0,class:"py-[30rpx]"},{default:i((()=>[u(l,{class:"flex items-center"},{default:i((()=>[u(a,{class:"w-[60rpx] h-[60rpx] mr-[20rpx] flex-shrink-0",src:c(z)("addon/shop/payment/position_01.png"),mode:"aspectFit"},null,8,["src"]),u(l,{class:"flex flex-col"},{default:i((()=>[u(C,{class:"text-[22rpx] text-[#999]"},{default:i((()=>[n(b(f.value.delivery.take_address.full_address.split(f.value.delivery.take_address.address)[0]),1)])),_:1}),u(C,{class:"text-[32rpx] text-[#303133] mt-[10rpx]"},{default:i((()=>[n(b(f.value.delivery.take_address.address),1)])),_:1})])),_:1}),u(C,{class:"ml-auto iconfont iconxiangyoujiantou text-[26rpx] text-gray-subtitle"})])),_:1}),u(l,{class:"flex items-center text-[24rpx] text-[#666] mt-[18rpx]"},{default:i((()=>[u(C,{class:"mr-[16rpx]"},{default:i((()=>[n(b(f.value.delivery.take_address.name),1)])),_:1}),u(C,null,{default:i((()=>[n(b(c(K)(f.value.delivery.take_address.mobile)),1)])),_:1})])),_:1})])),_:1}))])),_:1})):x("v-if",!0),x(" 自提点 "),"store"==p.value.delivery.delivery_type?(o(),d(l,{key:1,class:"flex items-center w-full",onClick:t[0]||(t[0]=e=>D.value.open())},{default:i((()=>[e.$u.test.isEmpty(f.value.delivery.take_store)?(o(),d(l,{key:1,class:"flex items-center w-full"},{default:i((()=>[u(a,{class:"w-[26rpx] h-[30rpx] mr-[10rpx]",src:c(z)("addon/shop/payment/position_02.png"),mode:"aspectFit"},null,8,["src"]),u(C,{class:"text-[26rpx]"},{default:i((()=>[n("请选择自提点")])),_:1}),u(C,{class:"ml-auto iconfont iconxiangyoujiantou text-[26rpx] text-gray-subtitle"})])),_:1})):(o(),d(l,{key:0,class:"py-[24rpx] w-full"},{default:i((()=>[u(l,{class:"flex items-center mb-[12rpx]"},{default:i((()=>[u(l,{class:"flex flex-col"},{default:i((()=>[u(l,{class:"text-[32rpx] text-[#303133] mb-[16rpx]"},{default:i((()=>[n(b(f.value.delivery.take_store.store_name),1)])),_:1}),u(l,{class:"text-[22rpx] text-[#666]"},{default:i((()=>[n(b(f.value.delivery.take_store.full_address),1)])),_:1})])),_:1}),u(C,{class:"ml-auto iconfont iconxiangyoujiantou text-[26rpx] text-gray-subtitle"})])),_:1}),u(l,{class:"text-[22rpx] text-[#666] mb-[12rpx]"},{default:i((()=>[n("手机号："+b(f.value.delivery.take_store.store_mobile),1)])),_:1}),u(l,{class:"text-[22rpx] text-[#666]"},{default:i((()=>[n("营业时间："+b(f.value.delivery.take_store.trade_time),1)])),_:1})])),_:1}))])),_:1})):x("v-if",!0)])),_:1})])),_:1})):x("v-if",!0),f.value.basic.has_goods_types.includes("real")&&!J.value.length?(o(),d(l,{key:1,class:"mb-[20rpx] rounded-[16rpx] bg-white p-[24rpx] py-[40rpx]"},{default:i((()=>[j("p",{class:"text-[26rpx] text-gray-subtitle"},"商家尚未配置配送方式")])),_:1})):x("v-if",!0),u(l,{class:"mb-[20rpx] p-[30rpx] rounded-[16rpx] bg-white"},{default:i((()=>[u(l,{class:"mb-[30rpx]"},{default:i((()=>[(o(!0),_(v,null,y(f.value.goods_data,((e,t,a)=>(o(),d(l,{class:m(["flex",{"pb-[40rpx]":a+1!=Object.keys(f.value.goods_data).length}]),key:a},{default:i((()=>[u(H,{class:"rounded-[10rpx] overflow-hidden",width:"170rpx",height:"170rpx",src:c(z)(e.sku_image),model:"aspectFill"},{error:i((()=>[u(S,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"]),u(l,{class:"flex flex-1 w-0 flex-col justify-between ml-[16rpx]"},{default:i((()=>[u(l,{class:"line-normal"},{default:i((()=>[u(l,{class:"truncate text-[#303133] text-[28rpx] leading-[32rpx] font-400"},{default:i((()=>[n(b(e.goods.goods_name),1)])),_:2},1024),e.sku_name?(o(),d(l,{key:0,class:"mt-[14rpx] flex"},{default:i((()=>[u(C,{class:"truncate bg-[#F2F2F2] px-[18rpx] py-[2rpx] rounded-[20rpx] text-[22rpx] text-[#666] leading-[28rpx]"},{default:i((()=>[n(b(e.sku_name),1)])),_:2},1024)])),_:2},1024)):x("v-if",!0)])),_:2},1024),u(l,{class:"alert-wrap mt-[6rpx]"},{default:i((()=>[e.not_support_delivery?(o(),d(L,{key:0,type:"error",description:"该商品不支持当前所选配送方式",class:"leading-[32rpx] !inline-block",fontSize:"12"})):x("v-if",!0)])),_:2},1024),u(l,{class:"flex justify-between items-center"},{default:i((()=>[u(l,{class:"text-[var(--price-text-color)] flex items-baseline price-font"},{default:i((()=>[u(C,{class:"text-[26rpx] font-500"},{default:i((()=>[n("￥")])),_:1}),u(C,{class:"text-[36rpx] font-500"},{default:i((()=>[n(b(parseFloat(e.price).toFixed(2).split(".")[0]),1)])),_:2},1024),u(C,{class:"text-[24rpx] font-500"},{default:i((()=>[n("."+b(parseFloat(e.price).toFixed(2).split(".")[1]),1)])),_:2},1024)])),_:2},1024),u(l,{class:"font-400 text-[28rpx] text-[#303133]"},{default:i((()=>[u(C,null,{default:i((()=>[n("x")])),_:1}),u(C,null,{default:i((()=>[n(b(e.num),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class"])))),128))])),_:1}),x(" 买家留言 "),u(l,{class:"bg-white flex items-center leading-[30rpx]"},{default:i((()=>[u(l,{class:"text-[26rpx] font-400 w-[150rpx] text-[#303133]"},{default:i((()=>[n("买家留言")])),_:1}),u(l,{class:"flex-1 text-[#303133]"},{default:i((()=>[u(U,{type:"text",modelValue:p.value.member_remark,"onUpdate:modelValue":t[1]||(t[1]=e=>p.value.member_remark=e),class:"text-right text-[26rpx]",maxlength:"50",placeholder:"请输入留言信息给卖家","placeholder-class":"text-[#999]"},null,8,["modelValue"])])),_:1}),u(C,{class:"iconfont iconxiangyoujiantou text-[26rpx] text-[#666]"})])),_:1}),x(" 发票 "),B.value&&B.value.invoiceOpen?(o(),d(l,{key:0,class:"flex items-center text-[#303133] leading-[30rpx] mt-[30rpx]",onClick:t[2]||(t[2]=e=>B.value.open())},{default:i((()=>[u(l,{class:"text-[26rpx] font-500 w-[150rpx]"},{default:i((()=>[n("发票信息")])),_:1}),u(l,{class:"flex-1 w-0 text-right truncate"},{default:i((()=>[u(C,{class:"text-[26rpx]"},{default:i((()=>[n(b(p.value.invoice.header_name||"不需要发票"),1)])),_:1})])),_:1}),u(C,{class:"iconfont iconxiangyoujiantou text-[26rpx] text-[#666]"})])),_:1})):x("v-if",!0)])),_:1}),B.value&&B.value.invoiceOpen||c(ae).length?(o(),d(l,{key:2,class:"rounded-[16rpx] bg-white mb-[20rpx] overflow-hidden"},{default:i((()=>[x(" 优惠券 "),c(ae).length?(o(),d(l,{key:0,class:"p-[30rpx] flex items-center leading-[30rpx]",onClick:t[3]||(t[3]=e=>g.value.open(p.value.discount.coupon_id))},{default:i((()=>[u(l,{class:"text-[26rpx] w-[150rpx] text-[#303133] flex-shrink-0"},{default:i((()=>[n("优惠券")])),_:1}),u(l,{class:"flex-1 flex justify-end truncate"},{default:i((()=>[f.value.discount&&f.value.discount.coupon?(o(),d(C,{key:0,class:"text-[var(--primary-color)] font-500 text-[26rpx] truncate"},{default:i((()=>[n(b(f.value.discount.coupon.title),1)])),_:1})):(o(),d(C,{key:1,class:"text-[26rpx] text-gray-subtitle"},{default:i((()=>[n("请选择优惠券")])),_:1}))])),_:1}),u(C,{class:"iconfont iconxiangyoujiantou text-[26rpx] text-[#666]"})])),_:1})):x("v-if",!0)])),_:1})):x("v-if",!0),u(l,{class:"p-[30rpx] rounded-[16rpx] bg-white"},{default:i((()=>[u(l,{class:"text-[32rpx] font-500 text-[#303133] leading-[38rpx] mb-[24rpx]"},{default:i((()=>[n("价格明细")])),_:1}),u(l,{class:"flex items-center mb-[25rpx] text-[#303133]"},{default:i((()=>[u(l,{class:"text-[26rpx] w-[150rpx] leading-[30rpx]"},{default:i((()=>[n("商品金额")])),_:1}),u(l,{class:"flex-1 w-0 text-right price-font"},{default:i((()=>[u(C,{class:"text-[24rpx]"},{default:i((()=>[n("￥")])),_:1}),u(C,{class:"text-[32rpx]"},{default:i((()=>[n(b(parseFloat(f.value.basic.goods_money).toFixed(2).split(".")[0]),1)])),_:1}),u(C,{class:"text-[22rpx]"},{default:i((()=>[n("."+b(parseFloat(f.value.basic.goods_money).toFixed(2).split(".")[1]),1)])),_:1})])),_:1})])),_:1}),f.value.basic.delivery_money?(o(),d(l,{key:0,class:"flex items-center mb-[25rpx]"},{default:i((()=>[u(l,{class:"text-[26rpx] w-[150rpx] leading-[30rpx]"},{default:i((()=>[n("运费")])),_:1}),u(l,{class:"flex-1 w-0 text-right price-font text-[26rpx]"},{default:i((()=>[u(C,{class:"text-[22rpx]"},{default:i((()=>[n("￥")])),_:1}),u(C,{class:"text-[26rpx]"},{default:i((()=>[n(b(parseFloat(f.value.basic.delivery_money).toFixed(2).split(".")[0]),1)])),_:1}),u(C,{class:"text-[20rpx]"},{default:i((()=>[n("."+b(parseFloat(f.value.basic.delivery_money).toFixed(2).split(".")[1]),1)])),_:1})])),_:1})])),_:1})):x("v-if",!0),f.value.basic.discount_money?(o(),d(l,{key:1,class:"flex items-center text-[#303133]"},{default:i((()=>[u(l,{class:"text-[26rpx] w-[150rpx] leading-[30rpx]"},{default:i((()=>[n("优惠金额")])),_:1}),u(l,{class:"flex-1 w-0 text-right text-[var(--price-text-color)] price-font"},{default:i((()=>[u(C,{class:"text-[22rpx]"},{default:i((()=>[n("-￥")])),_:1}),u(C,{class:"text-[26rpx]"},{default:i((()=>[n(b(parseFloat(f.value.basic.discount_money).toFixed(2).split(".")[0]),1)])),_:1}),u(C,{class:"text-[20rpx]"},{default:i((()=>[n("."+b(parseFloat(f.value.basic.discount_money).toFixed(2).split(".")[1]),1)])),_:1})])),_:1})])),_:1})):x("v-if",!0)])),_:1})])),_:1}),u(X,{fixed:!0,placeholder:!0,safeAreaInsetBottom:!0},{default:i((()=>[u(l,{class:"flex-1 flex items-center justify-between"},{default:i((()=>[u(l,{class:"whitespace-nowrap px-[30rpx]"},{default:i((()=>[u(C,{class:"text-[28rpx] text-[#303133] leading-[32rpx]"},{default:i((()=>[n("合计：")])),_:1}),u(C,{class:"text-[26rpx] font-500 text-[var(--price-text-color)] price-font leading-[30rpx]"},{default:i((()=>[n("￥")])),_:1}),u(C,{class:"text-[40rpx] font-500 text-[var(--price-text-color)] price-font leading-[46rpx]"},{default:i((()=>[n(b(parseFloat(f.value.basic.order_money).toFixed(2).split(".")[0]),1)])),_:1}),u(C,{class:"text-[24rpx] font-500 text-[var(--price-text-color)] price-font leading-[46rpx]"},{default:i((()=>[n("."+b(parseFloat(f.value.basic.order_money).toFixed(2).split(".")[1]),1)])),_:1})])),_:1}),u(M,{customStyle:{width:"180rpx",height:"66rpx",color:"#fff",fontSize:"28rpx",lineHeight:"66rpx",marginRight:"30rpx",background:"linear-gradient( 94deg,  var(--primary-help-color) 0%, var(--price-text-color) 69%), var(--price-text-color)"},shape:"circle",onClick:Z},{default:i((()=>[n("提交订单")])),_:1},8,["customStyle"])])),_:1})])),_:1}),x(" 选择优惠券 "),u(c(W),{"order-key":p.value.order_key,ref_key:"couponRef",ref:g,onConfirm:re},null,8,["order-key"]),x(" 选择自提点 "),u(c(G),{ref_key:"storeRef",ref:D,onConfirm:se},null,512),x(" 发票 "),u(c(P),{ref_key:"invoiceRef",ref:B,onConfirm:oe},null,512),u(Y,{ref_key:"payRef",ref:N,onClose:te},null,512)])),_:1})):x("v-if",!0)])),_:1},8,["style"])}}}),[["__scopeId","data-v-f14f899e"]]);export{q as default};
