import{d as e,r as a,p as t,F as r,K as l,s,H as d,x as o,o as i,c as u,w as p,b as c,R as x,y as n,z as f,u as _,f as m,A as v,n as g,a as y,c3 as b,k as h,D as k,i as j,B as w,g as F,h as C,C as z,bd as V,E as M,be as N}from"./index-7bf68536.js";import{_ as T}from"./u--image.b3bf1d5c.js";import{_ as A}from"./pay.d2e850e8.js";import{_ as B}from"./loading-page.vue_vue_type_script_setup_true_lang.124ad65f.js";import{b as E,o as O}from"./order.bb3e4e36.js";import{_ as R}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.e46f68ef.js";import"./u-icon.0c1c54c7.js";import"./u-transition.cdf87992.js";import"./u-popup.be4bfacd.js";import"./u-safe-bottom.908eeae4.js";import"./pay.2db06871.js";import"./u-loading-page.566c330a.js";import"./u-loading-icon.b37701e7.js";const I=R(e({__name:"order_detail",setup(e){const R=a({}),I=a(!0),L=a("");a(null),t((e=>{if(e.order_id){if(!s())return d().setLoginBack({url:"/addon/shop_giftcard/pages/order_detail",param:{order_id:e.order_id}}),!1;L.value=e.order_id,D(L.value)}else{let e={url:"/addon/shop_giftcard/pages/order_list",title:r("notOrderId")};l(e)}})),o((()=>{Object.keys(R.value).length&&D(L.value)}));const D=e=>{I.value=!0,E(e).then((e=>{R.value=e.data,I.value=!1})).catch((()=>{I.value=!1}))},H=a(null),K=(e="")=>{var a;"pay"==e?null==(a=H.value)||a.open(R.value.order_type,R.value.order_id,`/addon/shop_giftcard/pages/order_detail?order_id=${R.value.order_id}`):"myCard"==e?y({url:"/addon/shop_giftcard/pages/card_bag",param:{order_id:R.value.order_id}}):"close"==e?S():"index"==e&&y({url:"/addon/shop_giftcard/pages/index",mode:"reLaunch"})},S=()=>{b({title:r("tips"),content:r("tipsOne"),confirmColor:h().themeColor["--primary-color"],success:e=>{e.confirm&&O(R.value.order_id).then((e=>{D(R.value.order_id)}))}})};return(e,a)=>{const t=k,l=j,s=w,d=F(C("u--image"),T),o=z,b=V("logistics-tracking"),h=F(C("pay"),A),E=F(C("loading-page"),B);return i(),u(l,{style:g(e.themeColor())},{default:p((()=>[I.value?m("v-if",!0):(i(),u(l,{key:0,class:"bg-[var(--page-bg-color)] min-h-screen overflow-hidden"},{default:p((()=>[I.value?m("v-if",!0):(i(),u(l,{key:0,class:"pb-20rpx"},{default:p((()=>[c(l,{class:"sidebar-margin card-template mt-[var(--top-m)]"},{default:p((()=>[c(l,{class:"flex justify-between items-center"},{default:p((()=>[c(l,{class:"text-[#303133] text-[26rpx] font-400 leading-[36rpx]"},{default:p((()=>[c(t,{class:x(["iconfont text-[34rpx]",{"iconchuzhikaV6mm text-[#EF000C]":"balance"==R.value.card_right_type,"iconduihuankaV6mm-1 text-[#FF7700]":"goods"==R.value.card_right_type}])},null,8,["class"]),c(t,{class:"ml-[12rpx] text-[28rpx]"},{default:p((()=>[n(f(R.value.card_right_type_name),1)])),_:1})])),_:1}),c(l,{class:x(["text-[#303133] text-[26rpx] leading-[34rpx]",{"text-primary":1==R.value.status,"!text-[var(--text-color-light9)]":-1==R.value.status}])},{default:p((()=>[n(f(R.value.status_name),1)])),_:1},8,["class"])])),_:1}),c(l,{class:"order-goods-item flex justify-between flex-wrap mt-[30rpx]"},{default:p((()=>[c(l,{class:"w-[240rpx] h-[170rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",onClick:a[0]||(a[0]=e=>{return a=R.value.giftcard_id,void y({url:"/addon/shop_giftcard/pages/detail",param:{giftcard_id:a}});var a})},{default:p((()=>[c(d,{radius:"var(--goods-rounded-big)",width:"279rpx",height:"170rpx",src:_(M)(R.value.card_cover?R.value.card_cover:""),model:"aspectFill"},{error:p((()=>["balance"==R.value.card_right_type?(i(),u(s,{key:0,class:"w-[240rpx] h-[170rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:_(M)("addon/shop_giftcard/diy/index/value_card.jpg"),mode:"aspectFill"},null,8,["src"])):(i(),u(s,{key:1,class:"w-[240rpx] h-[170rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:_(M)("addon/shop_giftcard/diy/index/redemption_card.jpg"),mode:"aspectFill"},null,8,["src"]))])),_:1},8,["src"])])),_:1}),c(l,{class:"ml-[20rpx] flex flex-1 flex-col justify-between"},{default:p((()=>[c(l,null,{default:p((()=>[c(l,{class:"text-[28rpx] max-w-[402rpx] truncate leading-[40rpx] text-[#333]"},{default:p((()=>[n(f(R.value.body),1)])),_:1}),"balance"==R.value.card_right_type?(i(),u(l,{key:0,class:"text-[26rpx] text-[var(--text-color-light9)] truncate max-w-[402rpx] leading-[28rpx] mt-[14rpx]"},{default:p((()=>[n(f(R.value.balance)+f(_(r)("yuanStoredValueCard")),1)])),_:1})):m("v-if",!0)])),_:1}),c(l,{class:"flex justify-between items-baseline leading-[28rpx] text-[#333] mt-auto"},{default:p((()=>[c(l,{class:"price-font"},{default:p((()=>[c(t,{class:"text-[24rpx]"},{default:p((()=>[n("￥")])),_:1}),c(t,{class:"text-[40rpx] font-500"},{default:p((()=>[n(f(parseFloat(R.value.card_price).toFixed(2).split(".")[0]),1)])),_:1}),c(t,{class:"text-[24rpx] font-500"},{default:p((()=>[n("."+f(parseFloat(R.value.card_price).toFixed(2).split(".")[1]),1)])),_:1})])),_:1}),c(t,{class:"text-right text-[26rpx] text-[var(--text-color-light9)]"},{default:p((()=>[n("x"+f(R.value.num),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),c(l,{class:"sidebar-margin mt-[var(--top-m)] card-template"},{default:p((()=>[c(l,{class:"justify-between card-template-item"},{default:p((()=>[c(l,{class:"text-[28rpx]"},{default:p((()=>[n(f(_(r)("orderNo")),1)])),_:1}),c(l,{class:"flex items-center text-[28rpx]"},{default:p((()=>[c(t,null,{default:p((()=>[n(f(R.value.order_no),1)])),_:1}),c(t,{class:"w-[2rpx] h-[20rpx] bg-[#999] mx-[10rpx]"}),c(t,{class:"text-[#EF900A]",onClick:a[1]||(a[1]=e=>_(N)(R.value.order_no))},{default:p((()=>[n(f(_(r)("copy")),1)])),_:1})])),_:1})])),_:1}),R.value.out_trade_no?(i(),u(l,{key:0,class:"justify-between card-template-item"},{default:p((()=>[c(l,{class:"text-[28rpx]"},{default:p((()=>[n(f(_(r)("orderTradeNo")),1)])),_:1}),c(l,{class:"text-[28rpx]"},{default:p((()=>[n(f(R.value.out_trade_no),1)])),_:1})])),_:1})):m("v-if",!0),c(l,{class:"justify-between card-template-item"},{default:p((()=>[c(l,{class:"text-[28rpx]"},{default:p((()=>[n(f(_(r)("createTime")),1)])),_:1}),c(l,{class:"text-[28rpx]"},{default:p((()=>[n(f(R.value.create_time),1)])),_:1})])),_:1}),R.value.pay?(i(),u(l,{key:1,class:"card-template-item justify-between"},{default:p((()=>[c(l,{class:"text-[28rpx]"},{default:p((()=>[n(f(_(r)("payTypeName")),1)])),_:1}),c(l,{class:"text-[28rpx]"},{default:p((()=>[n(f(R.value.pay.type_name),1)])),_:1})])),_:1})):m("v-if",!0),R.value.pay?(i(),u(l,{key:2,class:"card-template-item justify-between"},{default:p((()=>[c(l,{class:"text-[28rpx]"},{default:p((()=>[n(f(_(r)("payTime")),1)])),_:1}),c(l,{class:"text-[28rpx]"},{default:p((()=>[n(f(R.value.pay.pay_time),1)])),_:1})])),_:1})):m("v-if",!0),c(l,{class:"card-template-item justify-between items-baseline"},{default:p((()=>[c(l,{class:"text-[28rpx]"},{default:p((()=>[n(f(_(r)("orderMoney")),1)])),_:1}),c(l,{class:"text-[var(--price-text-color)]"},{default:p((()=>[c(t,{class:"text-[22rpx] leading-[26rpx] price-font"},{default:p((()=>[n("￥")])),_:1}),c(t,{class:"text-[36rpx] font-500 leading-[40rpx] price-font"},{default:p((()=>[n(f(parseFloat(R.value.order_money).toFixed(2).split(".")[0]),1)])),_:1}),c(t,{class:"text-[22rpx] font-500 leading-[28rpx] price-font"},{default:p((()=>[n("."+f(parseFloat(R.value.order_money).toFixed(2).split(".")[1]),1)])),_:1})])),_:1})])),_:1})])),_:1}),m(" 订单留言 "),R.value.member_remark?(i(),u(l,{key:0,class:"sidebar-margin mt-[var(--top-m)] card-template"},{default:p((()=>[c(l,{class:"title"},{default:p((()=>[n(f(_(r)("orderMessage")),1)])),_:1}),c(l,{class:"text-[28rpx] w-full break-all"},{default:p((()=>[n(f(R.value.member_remark),1)])),_:1})])),_:1})):m("v-if",!0),1==R.value.status?(i(),u(l,{key:1,class:"flex z-2 justify-between items-center bg-[#fff] fixed left-0 right-0 bottom-0 min-h-[100rpx] pl-[30rpx] pr-[20rpx] pb-ios"},{default:p((()=>[c(l,{class:"flex mr-[34rpx] flex-col justify-center items-center",onClick:a[2]||(a[2]=e=>K("index"))},{default:p((()=>[c(l,{class:"nc-iconfont nc-icon-shouyeV6xx11 text-[36rpx]"}),c(t,{class:"text-[20rpx] mt-[10rpx]"},{default:p((()=>[n(f(_(r)("index")),1)])),_:1})])),_:1}),c(l,{class:"flex items-center"},{default:p((()=>[c(l,{class:"text-[26rpx] font-500 leading-[70rpx] h-[70rpx] w-[190rpx] text-center border-[2rpx] border-solid border-[var(--text-color-light9)] rounded-full text-[var(--text-color-light6)] box-border",onClick:a[3]||(a[3]=v((e=>K("close")),["stop"]))},{default:p((()=>[n(f(_(r)("orderClose")),1)])),_:1}),c(o,{class:"ml-[20rpx] w-[190rpx] h-[70rpx] font-500 text-[26rpx] leading-[70rpx] !text-[#fff] m-0 rounded-full primary-btn-bg remove-border","hover-class":"none",onClick:a[4]||(a[4]=e=>K("pay"))},{default:p((()=>[n(f(_(r)("topay")),1)])),_:1})])),_:1})])),_:1})):m("v-if",!0),2==R.value.status?(i(),u(l,{key:2,class:"flex z-2 justify-between items-center bg-[#fff] fixed left-0 right-0 bottom-0 min-h-[100rpx] pl-[30rpx] pr-[20rpx] pb-ios"},{default:p((()=>[R.value.have_count>0?(i(),u(l,{key:0,class:"flex-1 box-border h-[70rpx] flex-center text-center text-[#fff] primary-btn-bg rounded-full",onClick:a[5]||(a[5]=e=>K("myCard"))},{default:p((()=>[c(t,{class:"iconfont iconkabaoV6mm text-[26rpx]"}),c(t,{class:"ml-[16rpx] text-[26rpx]"},{default:p((()=>[n(f(_(r)("seeCardBag")),1)])),_:1})])),_:1})):(i(),u(l,{key:1,class:"flex-1 box-border h-[70rpx] flex-center !text-[var(--text-color-light9)] !bg-[#F7F7F7] m-0 rounded-full border-solid border-[2rpx] border-[#eee]"},{default:p((()=>[n(f(_(r)("transfergiftCard")),1)])),_:1}))])),_:1})):m("v-if",!0)])),_:1})),-1!=R.value.status?(i(),u(l,{key:1,class:"tab-bar-placeholder"})):m("v-if",!0),c(b,{ref:"materialRef"},null,512)])),_:1})),c(h,{ref_key:"payRef",ref:H},null,512),c(E,{loading:I.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-6e85aa23"]]);export{I as default};
