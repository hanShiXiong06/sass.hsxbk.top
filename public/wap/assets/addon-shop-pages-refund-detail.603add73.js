import{d as e,r as t,j as l,p as a,E as r,o as s,c as o,w as d,b as u,y as n,z as p,u as i,f as x,Q as c,A as f,n as _,a as m,i as v,B as g,g as b,h,D as y,C as j,F as w}from"./index-9317da28.js";import{_ as k}from"./u--image.5461b7b7.js";import{_ as C}from"./u--input.e94fe6ed.js";import{_ as F}from"./u-form-item.83fe1c60.js";import{_ as V}from"./u--form.920e7f9c.js";import{_ as O}from"./u-modal.42c2671a.js";import{_ as T}from"./loading-page.vue_vue_type_script_setup_true_lang.c92b07c2.js";import{t as B}from"./topTabbar.9a918190.js";import{c as z,i as S,r as L,h as R}from"./refund.b4ce060f.js";import{l as U}from"./logistics-tracking.76b259c3.js";import{_ as q}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.74ac23f6.js";import"./u-icon.5e775659.js";import"./u-transition.65be38eb.js";import"./u-input.e030155a.js";/* empty css                                                                */import"./u-line.30917996.js";/* empty css                                                               */import"./u-form.cfe692b2.js";import"./u-loading-icon.aabe3d05.js";/* empty css                                                                       */import"./u-popup.1f2ebcae.js";import"./u-safe-bottom.3546c5bb.js";/* empty css                                                                */import"./u-loading-page.de89bca9.js";import"./u-steps.28c054e9.js";import"./u-text.91b44428.js";import"./order.69407eee.js";const A=q(e({__name:"detail",setup(e){B().setTopTabbarParam({title:"退款详情"});const q=t({}),A=t(!0),E=t(""),P=t(""),D=t(!1),I=t("");t("");const M=t(""),N=t({express_number:"",express_company:"",remark:""}),Q=l((()=>({express_number:{type:"string",required:!0,message:"请输入物流单号",trigger:["blur","change"]},express_company:{type:"string",required:!0,message:"请输入物流公司",trigger:["blur","change"]}})));t(null),a((e=>{E.value=e.order_refund_no,P.value=e.type,D.value=e.is_edit_delivery,W(E.value)}));const W=e=>{A.value=!0,z(e).then((e=>{q.value=e.data,D.value&&q.value.delivery&&(N.value.express_number=q.value.delivery.express_number,N.value.express_company=q.value.delivery.express_company,N.value.remark=q.value.delivery.remark),I.value=q.value.order_goods.goods_name,M.value=r(q.value.order_goods.goods_image_thumb_small||""),A.value=!1})).catch((()=>{A.value=!1}))},Y=e=>{m({url:"/addon/shop/pages/goods/detail",param:{goods_id:e}})},G=t(),H=()=>{G.value.validate().then((e=>{let t={delivery:N.value,order_refund_no:q.value.order_refund_no};(D.value?S(t):L(t)).then((e=>{setTimeout((()=>{m({url:"/addon/shop/pages/refund/list"})}),500)})).catch((()=>{}))}))},J=e=>{"cancel"==e?(X=q.value.order_refund_no,K.value=!0):"edit"==e?m({url:"/addon/shop/pages/refund/edit_apply",param:{order_refund_no:q.value.order_refund_no}}):"logistics"==e?m({url:"/addon/shop/pages/refund/detail",param:{order_refund_no:q.value.order_refund_no,type:"logistics"}}):"editLogistics"==e&&m({url:"/addon/shop/pages/refund/detail",param:{order_refund_no:q.value.order_refund_no,type:"logistics",is_edit_delivery:!0}})},K=t(!1);let X="";const Z=()=>{R(X).then((e=>{K.value=!1,W(E.value)})).catch((()=>{K.value=!1}))},$=()=>{K.value=!1};return(e,t)=>{const l=v,a=g,B=b(h("u--image"),k),z=y,S=b(h("u--input"),C),L=b(h("u-form-item"),F),R=b(h("u--form"),V),D=j,I=b(h("u-modal"),O),M=b(h("loading-page"),T);return s(),o(l,{style:_(e.themeColor())},{default:d((()=>[A.value?x("v-if",!0):(s(),o(l,{key:0,class:"bg-[var(--page-bg-color)] min-h-screen overflow-hidden"},{default:d((()=>["logistics"!=P.value?(s(),o(l,{key:0,class:"pb-[200rpx]"},{default:d((()=>[u(l,{class:"bg-linear"},{default:d((()=>[q.value.status_name?(s(),o(l,{key:0,class:"flex justify-between items-center pl-[40rpx] pr-[50rpx] h-[280rpx] box-border pb-[90rpx]"},{default:d((()=>[u(l,{class:"text-[36rpx] font-500 leading-[42rpx] text-[#fff]"},{default:d((()=>[n(p(q.value.status_name),1)])),_:1}),u(l,{class:"flex items-center"},{default:d((()=>[-1!=["1","2","4","6","7"].indexOf(q.value.status)?(s(),o(a,{key:0,class:"w-[180rpx] h-[140rpx]",src:i(r)("addon/shop/detail/payment.png"),mode:"aspectFit"},null,8,["src"])):x("v-if",!0),-1!=["8"].indexOf(q.value.status)?(s(),o(a,{key:1,class:"w-[180rpx] h-[140rpx]",src:i(r)("addon/shop/detail/complete.png"),mode:"aspectFit"},null,8,["src"])):x("v-if",!0),-1!=["3","5","-1"].indexOf(q.value.status)?(s(),o(a,{key:2,class:"w-[180rpx] h-[140rpx]",src:i(r)("addon/shop/detail/close.png"),mode:"aspectFit"},null,8,["src"])):x("v-if",!0)])),_:1})])),_:1})):x("v-if",!0)])),_:1}),u(l,{class:"sidebar-marign card-template flex justify-between flex-wrap mt-[-76rpx]"},{default:d((()=>[u(l,{class:"w-[150rpx] h-[150rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",onClick:t[0]||(t[0]=e=>Y(q.value.order_goods.goods_id))},{default:d((()=>[u(B,{class:"rounded-[var(--goods-rounded-big)] overflow-hidden",width:"150rpx",height:"150rpx",src:i(r)(q.value.order_goods.goods_image_thumb_small?q.value.order_goods.goods_image_thumb_small:""),model:"aspectFill"},{error:d((()=>[u(a,{class:"w-[150rpx] h-[150rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:i(r)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:1},8,["src"])])),_:1}),u(l,{class:"ml-[20rpx] flex flex-1 flex-col justify-between"},{default:d((()=>[u(l,null,{default:d((()=>[u(l,{class:"text-[28rpx] max-w-[490rpx] truncate leading-[40rpx]"},{default:d((()=>[n(p(q.value.order_goods.goods_name),1)])),_:1}),q.value.order_goods.sku_name?(s(),o(l,{key:0,class:"text-[22rpx] mt-[10rpx] text-[var(--text-color-light9)] truncate max-w-[490rpx] leading-[28rpx]"},{default:d((()=>[n(p(q.value.order_goods.sku_name),1)])),_:1})):x("v-if",!0)])),_:1}),u(l,{class:"flex justify-between items-center leading-[28rpx]"},{default:d((()=>[u(l,{class:"price-font"},{default:d((()=>[u(z,{class:"text-[24rpx]"},{default:d((()=>[n("￥")])),_:1}),u(z,{class:"text-[40rpx] font-500"},{default:d((()=>[n(p(parseFloat(q.value.order_goods.price).toFixed(2).split(".")[0]),1)])),_:1}),u(z,{class:"text-[24rpx] font-500"},{default:d((()=>[n("."+p(parseFloat(q.value.order_goods.price).toFixed(2).split(".")[1]),1)])),_:1})])),_:1}),u(z,{class:"text-right text-[26rpx]"},{default:d((()=>[n("x"+p(q.value.order_goods.num),1)])),_:1})])),_:1})])),_:1})])),_:1}),u(l,{class:"sidebar-marign mt-[var(--top-m)] card-template"},{default:d((()=>[u(l,{class:"justify-between text-[28rpx] card-template-item"},{default:d((()=>[u(l,null,{default:d((()=>[n(p(i(w)("refundMoney")),1)])),_:1}),u(l,{class:"price-font text-[var(--price-text-color)]"},{default:d((()=>[u(z,{class:"text-[24rpx] mr-[4rpx]"},{default:d((()=>[n("￥")])),_:1}),u(z,{class:"text-[28rpx]"},{default:d((()=>[n(p(parseFloat(q.value.apply_money).toFixed(2)),1)])),_:1})])),_:1})])),_:1}),u(l,{class:"justify-between text-[28rpx] card-template-item"},{default:d((()=>[u(l,null,{default:d((()=>[n(p(i(w)("refundType")),1)])),_:1}),u(l,null,{default:d((()=>[n(p(q.value.refund_type_name),1)])),_:1})])),_:1}),u(l,{class:"justify-between text-[28rpx] card-template-item"},{default:d((()=>[u(l,null,{default:d((()=>[n(p(i(w)("refundCause")),1)])),_:1}),u(l,{class:"w-[400rpx] multi-hidden text-right"},{default:d((()=>[n(p(q.value.reason||"--"),1)])),_:1})])),_:1}),u(l,{class:"justify-between text-[28rpx] card-template-item"},{default:d((()=>[u(l,null,{default:d((()=>[n(p(i(w)("refundNo")),1)])),_:1}),u(l,null,{default:d((()=>[n(p(q.value.order_refund_no),1)])),_:1})])),_:1}),u(l,{class:"justify-between text-[28rpx] card-template-item"},{default:d((()=>[u(l,null,{default:d((()=>[n(p(i(w)("createTime")),1)])),_:1}),u(l,null,{default:d((()=>[n(p(q.value.create_time),1)])),_:1})])),_:1}),u(l,{class:"justify-between text-[28rpx] card-template-item !items-baseline"},{default:d((()=>[u(l,null,{default:d((()=>[n(p(i(w)("createExplain")),1)])),_:1}),u(l,{class:"flex-1 ml-[60rpx] text-right leading-[1.5] flex justify-end break-all"},{default:d((()=>[n(p(q.value.remark),1)])),_:1})])),_:1}),u(l,{class:"justify-between text-[28rpx] card-template-item !items-baseline"},{default:d((()=>[u(l,null,{default:d((()=>[n(p(i(w)("reasonRefusal")),1)])),_:1}),u(l,{class:c(["flex-1 ml-[60rpx] leading-[1.5] text-right",{"#333":q.value.shop_reason,"text-[var(--text-color-light9)]":!q.value.shop_reason}])},{default:d((()=>[n(p(q.value.shop_reason||"--"),1)])),_:1},8,["class"])])),_:1})])),_:1}),u(l,{class:"sidebar-marign mt-[var(--top-m)] card-template"},{default:d((()=>[u(l,{class:"justify-between text-[28rpx] card-template-item"},{default:d((()=>[u(l,null,{default:d((()=>[n(p(i(w)("record")),1)])),_:1}),u(l,{class:"flex items-center",onClick:t[1]||(t[1]=e=>i(m)({url:"/addon/shop/pages/refund/log",param:{order_refund_no:E.value}}))},{default:d((()=>[u(z,{class:"text-[26rpx] text-[var(--text-color-light9)]"},{default:d((()=>[n(p(i(w)("check")),1)])),_:1}),u(z,{class:"nc-iconfont nc-icon-youV6xx text-[24rpx] text-[var(--text-color-light9)] pt-[2rpx]"})])),_:1})])),_:1})])),_:1}),u(l,{class:"flex tab-bar justify-between items-center bg-[#fff] fixed left-0 right-0 bottom-0 min-h-[100rpx] pl-[30rpx] pr-[20rpx] flex-wrap"},{default:d((()=>[u(l,{class:"flex"},{default:d((()=>[u(l,{class:"flex mr-[20rpx] flex-col justify-center items-center",onClick:t[2]||(t[2]=e=>i(m)({url:"/addon/shop/pages/index",mode:"reLaunch"}))},{default:d((()=>[u(l,{class:"nc-iconfont nc-icon-shouyeV6xx text-[36rpx]"}),u(z,{class:"text-[20rpx] mt-[10rpx]"},{default:d((()=>[n(p(i(w)("index")),1)])),_:1})])),_:1})])),_:1}),u(l,{class:"flex justify-end"},{default:d((()=>[-1==["6","7","8","-1"].indexOf(q.value.status)?(s(),o(l,{key:0,class:"min-w-[180rpx] box-border text-[26rpx] h-[70rpx] flex-center border-[2rpx] border-solid border-[#ccc] text-[#333] rounded-full ml-[20rpx]",onClick:t[3]||(t[3]=e=>J("cancel"))},{default:d((()=>[n(p(i(w)("refundApply")),1)])),_:1})):x("v-if",!0),-1!=["3"].indexOf(q.value.status)?(s(),o(l,{key:1,class:"min-w-[180rpx] box-border text-[#333] text-[26rpx] h-[70rpx] flex-center border-[2rpx] border-solid border-[#ccc] rounded-full ml-[20rpx] px-[20rpx]",onClick:t[4]||(t[4]=f((e=>J("edit")),["stop"]))},{default:d((()=>[n("编辑退款信息")])),_:1})):x("v-if",!0),-1!=["2"].indexOf(q.value.status)?(s(),o(l,{key:2,class:"min-w-[180rpx] box-border text-[#333] text-[26rpx] h-[70rpx] flex-center border-[2rpx] border-solid border-[#ccc] rounded-full ml-[20rpx] px-[20rpx]",onClick:t[5]||(t[5]=f((e=>J("logistics")),["stop"]))},{default:d((()=>[n("填写发货物流")])),_:1})):x("v-if",!0),-1!=["5"].indexOf(q.value.status)?(s(),o(l,{key:3,class:"min-w-[180rpx] box-border text-[#333] text-[26rpx] h-[70rpx] flex-center border-[2rpx] border-solid border-[#ccc] rounded-full ml-[20rpx] px-[20rpx]",onClick:t[6]||(t[6]=f((e=>J("editLogistics")),["stop"]))},{default:d((()=>[n("编辑发货物流")])),_:1})):x("v-if",!0)])),_:1})])),_:1})])),_:1})):(s(),o(l,{key:1},{default:d((()=>[u(l,{class:"bg-linear"},{default:d((()=>[u(l,{class:"flex justify-between items-center pl-[40rpx] pr-[50rpx] h-[280rpx] box-border pb-[90rpx]"},{default:d((()=>[u(l,{class:"text-[36rpx] font-500 leading-[42rpx] text-[#fff]"},{default:d((()=>[n(p(q.value.status_name),1)])),_:1}),u(l,{class:"flex items-center"},{default:d((()=>[u(a,{class:"w-[180rpx] h-[140rpx]",src:i(r)("addon/shop/detail/payment.png"),mode:"aspectFit"},null,8,["src"])])),_:1})])),_:1})])),_:1}),u(l,{class:"sidebar-marign card-template mt-[-79rpx] flex justify-between flex-wrap"},{default:d((()=>[u(l,{class:"w-[150rpx] h-[150rpx] flex-2",onClick:t[7]||(t[7]=e=>Y(q.value.order_goods.goods_id))},{default:d((()=>[u(B,{radius:"var(--goods-rounded-big)",width:"150rpx",height:"150rpx",src:i(r)(q.value.order_goods.sku_image?q.value.order_goods.sku_image.split(",")[0]:""),model:"aspectFill"},{error:d((()=>[u(a,{class:"w-[150rpx] h-[150rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:i(r)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:1},8,["src"])])),_:1}),u(l,{class:"ml-[20rpx] flex flex-1 flex-col justify-between"},{default:d((()=>[u(l,null,{default:d((()=>[u(l,{class:"text-[28rpx] max-w-[490rpx] truncate leading-[40rpx]"},{default:d((()=>[n(p(q.value.order_goods.goods_name),1)])),_:1}),q.value.order_goods.sku_name?(s(),o(l,{key:0,class:"text-[24rpx] mt-[14rpx] text-[var(--text-color-light9)] truncate max-w-[490rpx] leading-[28rpx]"},{default:d((()=>[n(p(q.value.order_goods.sku_name),1)])),_:1})):x("v-if",!0)])),_:1}),u(l,{class:"flex justify-between items-center leading-[28rpx]"},{default:d((()=>[u(l,{class:"price-font"},{default:d((()=>[u(z,{class:"text-[24rpx] font-500"},{default:d((()=>[n("￥")])),_:1}),u(z,{class:"text-[40rpx] font-500"},{default:d((()=>[n(p(parseFloat(q.value.order_goods.price).toFixed(2).split(".")[0]),1)])),_:1}),u(z,{class:"text-[24rpx] font-500"},{default:d((()=>[n("."+p(parseFloat(q.value.order_goods.price).toFixed(2).split(".")[1]),1)])),_:1})])),_:1}),u(z,{class:"text-right text-[26rpx]"},{default:d((()=>[n("x"+p(q.value.order_goods.num),1)])),_:1})])),_:1})])),_:1})])),_:1}),u(l,{class:"sidebar-marign card-template top-mar"},{default:d((()=>[u(l,{class:"card-template-item justify-between text-[28rpx]"},{default:d((()=>[u(l,null,{default:d((()=>[n("联系人")])),_:1}),u(l,null,{default:d((()=>[n(p(q.value.refund_address.contact_name),1)])),_:1})])),_:1}),u(l,{class:"card-template-item justify-between text-[28rpx]"},{default:d((()=>[u(l,null,{default:d((()=>[n("手机号")])),_:1}),u(l,null,{default:d((()=>[n(p(q.value.refund_address.mobile),1)])),_:1})])),_:1}),u(l,{class:"card-template-item justify-between text-[28rpx]"},{default:d((()=>[u(l,null,{default:d((()=>[n("退货地址")])),_:1}),q.value.refund_address?(s(),o(l,{key:0,class:"w-[460rpx] text-sm text-right"},{default:d((()=>[n(p(q.value.refund_address.full_address||"--"),1)])),_:1})):x("v-if",!0)])),_:1})])),_:1}),u(l,{class:"sidebar-marign card-template top-mar py-[var(--top-m)]"},{default:d((()=>[u(l,{class:"title"},{default:d((()=>[n("物流信息")])),_:1}),u(R,{labelPosition:"left",model:N.value,rules:i(Q),errorType:"toast",ref_key:"deliveryForm",ref:G,labelWidth:"140rpx",labelStyle:{fontSize:"28rpx"}},{default:d((()=>[u(L,{label:"物流公司",prop:"express_company",borderBottom:!1},{default:d((()=>[u(S,{border:"none",modelValue:N.value.express_company,"onUpdate:modelValue":t[8]||(t[8]=e=>N.value.express_company=e),placeholder:"请输入物流公司",placeholderClass:"text-sm !text-[var(--text-color-light9)]",fontSize:"28rpx",maxlength:"50"},null,8,["modelValue"])])),_:1}),u(l,{class:"mt-[16rpx]"},{default:d((()=>[u(L,{label:"物流单号",prop:"express_number",borderBottom:!1},{default:d((()=>[u(S,{border:"none",placeholder:"请输入物流单号",modelValue:N.value.express_number,"onUpdate:modelValue":t[9]||(t[9]=e=>N.value.express_number=e),placeholderClass:"text-sm !text-[var(--text-color-light9)]",fontSize:"28rpx",maxlength:"100"},null,8,["modelValue"])])),_:1})])),_:1}),u(l,{class:"mt-[16rpx]"},{default:d((()=>[u(L,{label:"物流说明",borderBottom:!1},{default:d((()=>[u(S,{border:"none",placeholder:"选填",modelValue:N.value.remark,"onUpdate:modelValue":t[10]||(t[10]=e=>N.value.remark=e),placeholderClass:"text-sm !text-[var(--text-color-light9)]",fontSize:"28rpx",maxlength:"200"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1}),u(l,{class:"common-tab-bar-placeholder"}),u(l,{class:"common-tab-bar fixed left-[var(--sidebar-m)] right-[var(--sidebar-m)] bottom-[0]"},{default:d((()=>[u(D,{class:"mt-[80rpx] primary-btn-bg text-[#fff] h-[80rpx] leading-[80rpx] rounded-[100rpx] text-[26rpx] font-500","hover-class":"none",onClick:H},{default:d((()=>[n("提交")])),_:1})])),_:1})])),_:1})),u(U,{ref:"materialRef"},null,512),u(I,{show:K.value,confirmColor:"var(--primary-color)",content:i(w)("cancelRefundContent"),showCancelButton:!0,closeOnClickOverlay:!0,onCancel:$,onConfirm:Z},null,8,["show","content"])])),_:1})),u(M,{loading:A.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-2b079874"]]);export{A as default};
