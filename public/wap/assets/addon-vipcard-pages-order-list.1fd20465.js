import{d as e,r as a,p as l,F as t,o as s,c as r,w as o,b as u,P as n,a7 as d,Q as i,f as c,u as m,n as p,a8 as f,a9 as _,i as x,a6 as v,g as y,h,R as b,y as g,z as j,E as w,a as k,D as C,B as S}from"./index-7bf68536.js";import{_ as M}from"./u-button.359d7329.js";import{_ as U}from"./pay.d2e850e8.js";import{u as z,v as I,w as F,x as E}from"./vipcard.fb0aea23.js";import{M as R}from"./mescroll-body.b6d57b41.js";import{M as A}from"./mescroll-empty.fcefb74e.js";import{u as B}from"./useMescroll.26ccf5de.js";import{_ as D}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.b37701e7.js";import"./u-icon.0c1c54c7.js";import"./u-image.e46f68ef.js";import"./u-transition.cdf87992.js";import"./u-popup.be4bfacd.js";import"./u-safe-bottom.908eeae4.js";import"./pay.2db06871.js";import"./mescroll-i18n.14e7fe02.js";/* empty css                                                                       */const K=D(e({__name:"list",setup(e){const{mescrollInit:D,downCallback:K,getMescroll:N}=B(_,f),O=a([]),P=a(!1),Q=a(!1),Y=a(""),$=a([]);l((e=>{Y.value=e.status||"",q()}));const q=()=>{Q.value=!1,$.value=[];let e={name:t("all"),status:""};$.value.push(e),z().then((e=>{Object.values(e.data).forEach(((e,a)=>{$.value.push(e)})),Q.value=!0})).catch((()=>{Q.value=!0}))},G=e=>{P.value=!1;let a={page:e.num,limit:e.size,order_status:Y.value};I(a).then((a=>{let l=a.data.data;1==e.num&&(O.value=[]),O.value=O.value.concat(l),e.endSuccess(l.length),P.value=!0})).catch((()=>{P.value=!0,e.endErr()}))},H=a(null);return(e,a)=>{const l=x,f=v,_=C,z=S,I=y(h("u-button"),M),B=y(h("pay"),U);return s(),r(l,{class:"bg-[#f8f8f8] min-h-screen overflow-hidden",style:p(e.themeColor())},{default:o((()=>[Q.value?(s(),r(l,{key:0,class:"fixed left-0 top-0 right-0 z-10"},{default:o((()=>[u(f,{"scroll-x":"true",class:"scroll-Y box-border px-[24rpx] bg-white"},{default:o((()=>[u(l,{class:"flex whitespace-nowrap justify-around"},{default:o((()=>[(s(!0),n(i,null,d($.value,((e,a)=>(s(),r(l,{class:b(["text-sm leading-[90rpx]",{"class-select":Y.value===e.status.toString()}]),onClick:a=>{return l=e.status,Y.value=l.toString(),O.value=[],void N().resetUpScroll();var l}},{default:o((()=>[g(j(e.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1})):c("v-if",!0),u(R,{ref:"mescrollRef",top:"114rpx",onInit:m(D),down:{use:!1},onUp:G},{default:o((()=>[(s(!0),n(i,null,d(O.value,((e,a)=>(s(),r(l,{key:e.order_id,class:"mx-3 mb-3 bg-white p-3 rounded"},{default:o((()=>[u(l,{class:"flex justify-between items-center text-sm text-gray-500 mb-3 pb-3 border-0 border-b border-slate-200 border-solid"},{default:o((()=>[u(l,null,{default:o((()=>[g(j(e.order_no),1)])),_:2},1024),u(_,null,{default:o((()=>[g(j(e.order_status_info.name),1)])),_:2},1024)])),_:2},1024),(s(!0),n(i,null,d(e.item,((a,t)=>(s(),r(l,{class:"flex mb-3",onClick:a=>{k({url:"/addon/vipcard/pages/order/detail",param:{order_id:e.order_id}})}},{default:o((()=>[u(l,{class:"w-[240rpx] h-[180rpx] mr-3 overflow-hidden rounded leading-none"},{default:o((()=>[u(z,{src:m(w)(a.item_image_thumb_small),mode:"aspectFill",class:"w-[240rpx] h-[180rpx] leading-none"},null,8,["src"])])),_:2},1024),u(l,{class:"flex-1 w-0"},{default:o((()=>[u(l,{class:"font-bold truncate text-sm"},{default:o((()=>[g(j(a.item_name),1)])),_:2},1024),u(l,{class:"flex justify-between"},{default:o((()=>[u(l,{class:"text-[#FA6400] text-xs mt-2"},{default:o((()=>[u(_,{class:"ml-[2rpx]"},{default:o((()=>[g("￥")])),_:1}),u(_,{class:"text-[38rpx]"},{default:o((()=>[g(j(a.price),1)])),_:2},1024)])),_:2},1024),u(l,{class:"text-sm text-gray-400 flex items-end leading-none"},{default:o((()=>[g(" x"+j(a.num),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),256)),u(l,{class:"text-right text-sm font-bold"},{default:o((()=>[g(j(m(t)("payMoney"))+"："+j(m(t)("currency"))+j(e.pay_money),1)])),_:2},1024),u(l,{class:"flex justify-end mt-3"},{default:o((()=>[(s(!0),n(i,null,d(e.order_status_info.member_action,((a,l)=>(s(),r(I,{text:a.name,class:"!w-auto mx-0 ml-2",shape:"circle",size:"small",onClick:l=>((e,a="")=>{var l;"pay"==a?null==(l=H.value)||l.open(e.order_type,e.order_id,`/addon/vipcard/pages/order/detail?order_id=${e.order_id}`):"cancel"==a?F(e.order_id).then((e=>{N().resetUpScroll()})).catch((()=>{N().resetUpScroll()})):"delete"==a&&E(e.order_id).then((e=>{N().resetUpScroll()})).catch((()=>{N().resetUpScroll()}))})(e,a.key)},null,8,["text","onClick"])))),256))])),_:2},1024)])),_:2},1024)))),128)),!O.value.length&&P.value?(s(),r(A,{key:0,option:{icon:m(w)("static/resource/images/empty.png")}},null,8,["option"])):c("v-if",!0)])),_:1},8,["onInit"]),u(B,{ref_key:"payRef",ref:H},null,512)])),_:1},8,["style"])}}}),[["__scopeId","data-v-977bcf9e"]]);export{K as default};
