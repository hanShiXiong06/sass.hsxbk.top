import{d as e,r as t,p as a,x as s,an as o,o as l,c as r,w as n,b as c,f as i,A as u,y as x,n as d,U as h,ad as f,V as p,c0 as y,k as g,a as m,bf as v,bk as _,D as S,ab as C,i as k,z as b,_ as V}from"./index-71c7df08.js";const H=V(e({__name:"search",setup(e){const V=t(""),H=t([]),U=t(!1);a((e=>{!uni.getStorageSync("goodsSearchHistory")&&uni.setStorageSync("goodsSearchHistory",[])})),s((()=>{z(),o((()=>{j()}))}));const z=()=>{H.value=uni.getStorageSync("goodsSearchHistory").reverse()},I=()=>{y({title:"提示",content:"确认删除全部历史记录？",confirmColor:g().themeColor["--primary-color"],success:e=>{e.confirm&&(uni.setStorageSync("goodsSearchHistory",[]),z())}})},R=()=>{if(""!=V.value.trim()){let e=uni.getStorageSync("goodsSearchHistory"),t=[];e.length?(t=e.filter((e=>e!=V.value.trim())),t.push(V.value.trim())):t.push(V.value.trim()),uni.setStorageSync("goodsSearchHistory",t),m({url:"/addon/shop/pages/goods/list",param:{goods_name:encodeURIComponent(V.value)},mode:"navigateTo"})}},j=()=>{v().in(this).select("#history-list").boundingClientRect((e=>{e&&e.height>2*_(70)+2*_(35)&&(U.value=!0)})).exec()};return(e,t)=>{const a=S,s=C,o=k;return l(),r(o,{style:d(e.themeColor())},{default:n((()=>[c(o,{class:"flex items-center px-[20rpx] h-[120rpx]"},{default:n((()=>[c(o,{class:"h-[68rpx] bg-[var(--temp-bg)] px-[30rpx] flex items-center rounded-[100rpx] flex-1"},{default:n((()=>[c(a,{class:"nc-iconfont nc-icon-sousuo-duanV6xx1 text-[var(--text-color-light9)] text-[26rpx] mr-[18rpx]"}),c(s,{class:"text-[28rpx] flex-1",maxlength:"50",type:"text",modelValue:V.value,"onUpdate:modelValue":t[0]||(t[0]=e=>V.value=e),placeholder:"请搜索您想要的商品","confirm-type":"search",placeholderClass:"text-[var(--text-color-light9)] text-[28rpx]",onConfirm:R},null,8,["modelValue"]),V.value?(l(),r(a,{key:0,class:"nc-iconfont nc-icon-cuohaoV6xx1 text-[24rpx] text-[var(--text-color-light9)]",onClick:t[1]||(t[1]=e=>V.value="")})):i("v-if",!0)])),_:1}),c(a,{onClick:t[2]||(t[2]=u((e=>R()),["stop"])),class:"text-[28rpx] ml-[32rpx] -mb-[2rpx]"},{default:n((()=>[x("搜索")])),_:1})])),_:1}),c(o,{class:"search-content"},{default:n((()=>[i(" 历史搜索 "),H.value.length?(l(),r(o,{key:0,class:"history"},{default:n((()=>[c(o,{class:"history-box"},{default:n((()=>[c(o,{class:"history-top"},{default:n((()=>[c(o,{class:"title font-500"},{default:n((()=>[x("历史搜索")])),_:1}),c(o,{class:"icon nc-iconfont nc-icon-shanchu-yuangaizhiV6xx !text-[24rpx] text-[var(--text-color-light6)]",onClick:I})])),_:1}),c(o,{class:"history-bottom",id:"history-list",style:d({maxHeight:U.value?"168rpx":"100%"})},{default:n((()=>[(l(!0),h(p,null,f(H.value,((e,t)=>(l(),r(o,{class:"history-li",key:t,onClick:t=>{return a=e,V.value=a,void R();var a}},{default:n((()=>[c(o,null,{default:n((()=>[x(b(e),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),U.value?(l(),r(o,{key:0,class:"history-li history_more",onClick:t[3]||(t[3]=e=>U.value=!1)},{default:n((()=>[c(o,null,{default:n((()=>[c(a,{class:"text-[30rpx] nc-iconfont nc-icon-xiaV6xx"})])),_:1})])),_:1})):i("v-if",!0)])),_:1},8,["style"])])),_:1})])),_:1})):i("v-if",!0)])),_:1})])),_:1},8,["style"])}}}),[["__scopeId","data-v-1fdf7398"]]);export{H as default};
