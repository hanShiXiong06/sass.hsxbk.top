import{d as e,r as t,p as a,K as l,j as s,o as r,c as u,w as d,P as o,b as i,f as m,n,u as _,y as v,z as x,R as c,Q as p,a as f,D as k,i as b,B as g,g as y,h,E as w,a1 as j,F as D,G as F}from"./index-7bf68536.js";import{_ as T}from"./loading-page.vue_vue_type_script_setup_true_lang.124ad65f.js";import{b as z}from"./task.e299cd26.js";import{t as O}from"./topTabbar.f3f9eebd.js";import{_ as C}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-page.566c330a.js";import"./u-loading-icon.b37701e7.js";import"./u-transition.cdf87992.js";const E=C(e({__name:"task_detail",setup(e){O().setTopTabbarParam({title:"任务奖励详情"});const C=t({});a((e=>{if(e.id)I(Number(e.id));else{l({url:"/addon/shop_fenxiao/pages/task_rewards",title:"缺少任务奖励id"})}}));const E=t(!0),I=e=>{z(e).then((e=>{C.value=e.data,1===C.value.status?(C.value.time=new Date(C.value.start_time).getTime()-(new Date).getTime(),C.value.time=C.value.time<0?"":C.value.time):2===C.value.status&&(2!=C.value.time_type?(C.value.time=new Date(C.value.end_time).getTime()-(new Date).getTime(),C.value.time=C.value.time<0?"":C.value.time):C.value.time=""),E.value=!1})).catch((()=>{E.value=!1}))};let N={};const P=s((()=>Object.keys(N).length?F(Number(N.height))+F(N.top)+50+"rpx;":"50rpx"));t({});const R=()=>{f({url:"/addon/shop_fenxiao/pages/task_rewards_detail",param:{id:C.value.id}})};return(e,t)=>{const a=k,l=b,s=g,f=y(h("loading-page"),T);return r(),u(l,{class:"bg-[var(--page-bg-color)] min-h-[100vh] box-border",style:n(e.themeColor())},{default:d((()=>[Object.keys(C.value).length?(r(),o(p,{key:0},[i(l,{class:"w-[100%] h-[375rpx] relative background-size box-border py-[24rpx] px-[var(--sidebar-m)]",style:n({backgroundImage:"url("+_(w)("addon/shop_fenxiao/task_detail_wechat.png")+")"})},{default:d((()=>[m(" 跳转个任务奖励明细 "),i(l,{class:"side-tab",style:n({top:_(P)}),onClick:R},{default:d((()=>[i(a,{class:"iconfont iconlishijiluV6xx icon"}),i(a,{class:"desc"},{default:d((()=>[v("奖励明细")])),_:1})])),_:1},8,["style"])])),_:1},8,["style"]),i(l,{class:"px-[var(--sidebar-m)] pb-[20rpx] mt-[-75rpx]"},{default:d((()=>[m(" 活动未开始 "),1===C.value.status?(r(),u(l,{key:0,class:"bg-[#fff] rounded-[var(--rounded-big)] py-[60rpx] text-center relative mb-[var(--top-m)]"},{default:d((()=>[i(l,{class:"text-[#333] text-[30rpx] font-500 mb-[30rpx]"},{default:d((()=>[v("该任务还未开始")])),_:1}),i(l,{class:"text-[var(--text-color-light9)] text-[26rpx]"},{default:d((()=>[v("请您耐心等待...")])),_:1})])),_:1})):m("v-if",!0),1!==C.value.status?(r(),u(l,{key:1,class:"card-template relative"},{default:d((()=>[i(l,{class:"text-[30rpx] font-500 text-[#333] leading-[45rpx] multi-hidden text-center mb-[77rpx]"},{default:d((()=>[v(x(C.value.name),1)])),_:1}),m(" 进度条 "),i(l,{class:"relative pb-[58rpx] mb-[30rpx] mx-[30rpx]"},{default:d((()=>[i(l,{class:"w-full h-[24rpx] rounded-[12rpx] bg-[#FFF2D0] flex"},{default:d((()=>[m(" 进度条 "),i(l,{class:"h-[24rpx] rounded-[12rpx] bg-linear flex overflow-hidden",style:n({width:C.value.task_member&&C.value.task_member.task_data.show_progress.rate?C.value.task_member.task_data.show_progress.rate+"%":"24rpx"})},{default:d((()=>[C.value.task_member&&C.value.task_member.task_data.show_progress.rate?(r(),u(l,{key:0,class:"mr-[10rpx] h-[24rpx] flex-1 flex items-center justify-end box-border"},{default:d((()=>[i(a,{class:"w-[4rpx] h-[4rpx] rounded-full bg-[#fff] mr-[6rpx]"}),i(a,{class:"w-[6rpx] h-[6rpx] rounded-full bg-[#fff] mr-[6rpx]"}),i(a,{class:"w-[8rpx] h-[8rpx] rounded-full bg-[#fff]"})])),_:1})):m("v-if",!0)])),_:1},8,["style"]),m(" 总进度图标 "),i(s,{class:"w-[52rpx] h-[52rpx] align-middle absolute right-0 top-[12rpx] transform -translate-y-1/2",mode:"widthFix",src:_(w)("addon/shop_fenxiao/task_icon.png")},null,8,["src"]),m(" 总进度金额 "),i(l,{class:"money min-w-[60rpx] h-[36rpx] px-[12rpx] box-border bg-[var(--primary-color)] text-[#fff] absolute right-[26rpx] top-[-56rpx] transform translate-x-1/2 rounded-[18rpx] z-10 flex items-center"},{default:d((()=>[i(a,{class:"text-[24rpx]"},{default:d((()=>[v("￥")])),_:1}),i(a,{class:"text-[24rpx]"},{default:d((()=>{var e;return[v(x(null==(e=C.value.rules[0].reward)?void 0:e.commission),1)]})),_:1})])),_:1})])),_:1}),m(" 当前完成进度文字 "),C.value.task_member&&100!=C.value.task_member.task_data.show_progress.rate?(r(),u(l,{key:0,ref:"mytext",class:c(["absolute text-[26rpx] bottom-0 leading-[34rpx] text-[var(--primary-color)]",{" transform -translate-x-1/2":C.value.task_member&&C.value.task_member.task_data.show_progress.rate>0}]),style:n({left:C.value.task_member?C.value.task_member.task_data.show_progress.rate+"%":0})},{default:d((()=>[v(x(C.value.task_member.task_data.now_data+C.value.task_member.task_data.util),1)])),_:1},8,["class","style"])):m("v-if",!0),m(" 需完成的总进度完成 "),i(l,{ref:"overallText",class:"absolute text-[26rpx] leading-[34rpx] flex-center min-w-[100rpx] bottom-0 -right-[20rpx]"},{default:d((()=>[v(x(C.value.task_member?("元"==C.value.task_member.task_data.util?_(j)(C.value.task_member.task_data.end_data):C.value.task_member.task_data.end_data)+C.value.task_member.task_data.util:("元"==C.value.task_data.util?_(j)(C.value.task_data.end_data):C.value.task_data.end_data)+C.value.task_data.util),1)])),_:1},512)])),_:1}),C.value.task_member?(r(),u(l,{key:0,class:"bg-[#FFF8EF] rounded-[var(--goods-rounded-big)] px-[30rpx] py-[30rpx]"},{default:d((()=>[i(l,{class:"text-center text-[28rpx] font-500 mb-[40rpx]"},{default:d((()=>[v("完成进度")])),_:1}),i(l,{class:"text-[26rpx] flex-1 w-[615rpx] break-all flex items-center mb-[34rpx]"},{default:d((()=>[i(a,{class:"text-[#823D19]"},{default:d((()=>[v(x("元"==C.value.task_member.task_data.util?"完成金额：":"单"==C.value.task_member.task_data.util?"完成单数：":"推广人数"),1)])),_:1}),i(l,{class:"text-[26rpx] text-[#333]"},{default:d((()=>[v(x(C.value.task_member.task_data.title)+"已达",1),i(a,{class:"text-[var(--primary-color)]"},{default:d((()=>[v(x("元"==C.value.task_member.task_data.util?_(j)(C.value.task_member.task_data.now_data):C.value.task_member.task_data.now_data),1)])),_:1}),v(x(C.value.task_member.task_data.util),1)])),_:1})])),_:1}),i(l,{class:"text-[26rpx] flex-1 w-[615rpx] break-all flex items-center mb-[34rpx]"},{default:d((()=>[i(a,{class:"text-[#823D19]"},{default:d((()=>[v("完成次数：")])),_:1}),i(l,{class:"text-[26rpx] text-[#333]"},{default:d((()=>[i(a,{class:"text-[var(--primary-color)]"},{default:d((()=>[v(x(C.value.task_member.complete_num),1)])),_:1}),i(a,null,{default:d((()=>[v("/"+x(C.value.times?C.value.times+"次":"不限次"),1)])),_:1})])),_:1})])),_:1}),i(l,{class:"text-[26rpx] flex-1 w-[615rpx] break-all flex items-center"},{default:d((()=>[i(a,{class:"text-[#823D19]"},{default:d((()=>[v("领取奖励：")])),_:1}),i(a,{class:"text-[#333]"},{default:d((()=>{var e;return[v("累计领取"+x(C.value.task_member.complete_num)+"次奖励共计"+x(_(j)(C.value.task_member.complete_num*(null==(e=C.value.rules[0].reward)?void 0:e.commission)))+"元",1)]})),_:1})])),_:1})])),_:1})):m("v-if",!0)])),_:1})):m("v-if",!0),m(" 任务信息 "),i(l,{class:"overflow-hidden mt-[20rpx] card-template"},{default:d((()=>[i(l,{class:"title"},{default:d((()=>[v("任务信息")])),_:1}),i(l,{class:"text-[26rpx] flex-1 card-template-item"},{default:d((()=>[i(a,{class:"text-[var(--text-color-light9)]"},{default:d((()=>[v("任务内容：")])),_:1}),C.value.task_member?(r(),u(l,{key:1,class:"text-[26rpx] text-[#333]"},{default:d((()=>{var e,t,a,l,s;return[v(x(C.value.task_member.task_data.title)+"达"+x((null==(e=C.value.rules[0].condition)?void 0:e.type.includes("order_num"))?null==(t=C.value.rules[0].condition)?void 0:t.order_num:(null==(a=C.value.rules[0].condition)?void 0:a.type.includes("order_money"))?null==(l=C.value.rules[0].condition)?void 0:l.order_money:null==(s=C.value.rules[0].condition)?void 0:s.child_num)+x(C.value.task_member.task_data.util),1)]})),_:1})):(r(),u(l,{key:0,class:"text-[26rpx] text-[#333]"},{default:d((()=>{var e,t,a,l,s;return[v(x(C.value.task_data.title)+"达"+x((null==(e=C.value.rules[0].condition)?void 0:e.type.includes("order_num"))?null==(t=C.value.rules[0].condition)?void 0:t.order_num:(null==(a=C.value.rules[0].condition)?void 0:a.type.includes("order_money"))?null==(l=C.value.rules[0].condition)?void 0:l.order_money:null==(s=C.value.rules[0].condition)?void 0:s.child_num)+x(C.value.task_data.util),1)]})),_:1}))])),_:1}),i(l,{class:"text-[26rpx] flex-1 card-template-item"},{default:d((()=>[i(a,{class:"text-[var(--text-color-light9)]"},{default:d((()=>[v("任务奖励：")])),_:1}),i(a,{class:"text-[#333]"},{default:d((()=>{var e;return[v(x(_(j)(null==(e=C.value.rules[0].reward)?void 0:e.commission))+"元",1)]})),_:1})])),_:1}),1===C.value.type?(r(),u(l,{key:0,class:"text-[26rpx] flex-1 card-template-item"},{default:d((()=>[i(a,{class:"text-[var(--text-color-light9)]"},{default:d((()=>[v("参与次数：")])),_:1}),i(a,{class:"text-[#333]"},{default:d((()=>[v(x(C.value.times?C.value.times+"次":"不限次"),1)])),_:1})])),_:1})):m("v-if",!0),i(l,{class:"text-[26rpx] flex-1 card-template-item"},{default:d((()=>[i(a,{class:"text-[var(--text-color-light9)]"},{default:d((()=>[v("活动时间：")])),_:1}),i(l,{class:"text-[#333]"},{default:d((()=>[v(x(C.value.start_time?C.value.start_time.substring(0,10):"--")+" 至 "+x(1==C.value.time_type?C.value.end_time.substring(0,10):"长期有效")+"（"+x(1===C.value.status?"未开始":2===C.value.status?"已开始":"已结束")+"） ",1)])),_:1})])),_:1})])),_:1}),m(" 奖励规则 "),i(l,{class:"card-template overflow-hidden mt-[var(--top-m)]"},{default:d((()=>[i(l,{class:"title"},{default:d((()=>[v(x(_(D)("rewardRules")),1)])),_:1}),i(l,{class:"text-[26rpx] flex-1 card-template-item"},{default:d((()=>[i(a,{class:"text-[var(--text-color-light9)]"},{default:d((()=>[v("参与等级：")])),_:1}),i(a,{class:"text-[#333]"},{default:d((()=>[v(x(1==C.value.level_type?"全部等级":2==C.value.level_type&&Object.values(C.value.level_data).toString()),1)])),_:1})])),_:1}),i(l,{class:"text-[26rpx] flex-1 card-template-item"},{default:d((()=>[i(a,{class:"text-[var(--text-color-light9)]"},{default:d((()=>[v("奖励指标：")])),_:1}),i(a,{class:"text-[#333]"},{default:d((()=>[v(x(C.value.task_member?C.value.task_member.task_data.title:C.value.task_data.title),1)])),_:1})])),_:1}),C.value.task_member?(r(),u(l,{key:1,class:"text-[26rpx] card-template-item"},{default:d((()=>[i(a,{class:"text-[var(--text-color-light9)]"},{default:d((()=>[v("奖励说明：")])),_:1}),i(a,{class:"text-[#333]"},{default:d((()=>{var e,t,a,l,s,r;return[v(x(C.value.task_member.task_data.title)+"达"+x((null==(e=C.value.rules[0].condition)?void 0:e.type.includes("order_num"))?null==(t=C.value.rules[0].condition)?void 0:t.order_num:(null==(a=C.value.rules[0].condition)?void 0:a.type.includes("order_money"))?null==(l=C.value.rules[0].condition)?void 0:l.order_money:null==(s=C.value.rules[0].condition)?void 0:s.child_num)+x(C.value.task_member.task_data.util)+"即可获得"+x(_(j)(null==(r=C.value.rules[0].reward)?void 0:r.commission))+"元佣金 ",1)]})),_:1})])),_:1})):(r(),u(l,{key:0,class:"text-[26rpx] card-template-item"},{default:d((()=>[i(a,{class:"text-[var(--text-color-light9)]"},{default:d((()=>[v("奖励说明：")])),_:1}),i(a,{class:"text-[#333]"},{default:d((()=>{var e,t,a,l,s,r;return[v(x(C.value.task_data.title)+"达"+x((null==(e=C.value.rules[0].condition)?void 0:e.type.includes("order_num"))?null==(t=C.value.rules[0].condition)?void 0:t.order_num:(null==(a=C.value.rules[0].condition)?void 0:a.type.includes("order_money"))?null==(l=C.value.rules[0].condition)?void 0:l.order_money:null==(s=C.value.rules[0].condition)?void 0:s.child_num)+x(C.value.task_data.util)+"即可获得"+x(_(j)(null==(r=C.value.rules[0].reward)?void 0:r.commission))+"元佣金",1)]})),_:1})])),_:1}))])),_:1}),m(" 任务说明 "),C.value.remark?(r(),u(l,{key:2,class:"card-template overflow-hidden mt-[var(--top-m)]"},{default:d((()=>[i(l,{class:"title"},{default:d((()=>[v(x(_(D)("taskSpecification")),1)])),_:1}),i(l,{class:"text-[#333] text-[26rpx] leading-[1.6]"},{default:d((()=>[v(x(C.value.remark),1)])),_:1})])),_:1})):m("v-if",!0)])),_:1})],64)):m("v-if",!0),i(f,{loading:E.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-3964cdeb"]]);export{E as default};
