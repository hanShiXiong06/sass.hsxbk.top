import{d as e,r as t,p as a,J as s,F as l,o,c as r,w as n,b as u,Q as c,y as p,z as i,u as m,f as d,n as _,a as f,aT as x,D as y,i as v,C as g,g as h,h as j,a0 as b}from"./index-9317da28.js";import{_ as w}from"./u-loading-icon.aabe3d05.js";import{_ as C}from"./u-modal.42c2671a.js";import{g as T}from"./pay.25e81968.js";/* empty css                                                                       */import"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.30917996.js";/* empty css                                                               */import"./u-popup.1f2ebcae.js";import"./u-transition.65be38eb.js";import"./u-icon.5e775659.js";import"./u-safe-bottom.3546c5bb.js";/* empty css                                                                */const S=e({__name:"result",setup(e){const S=t(null),F=t(!1);let k="",z=0,L=0;a((e=>{k=e.trade_type,z=e.trade_id,P()}));const P=()=>{T(k,z).then((e=>{if(!uni.$u.test.isEmpty(e.data)){if(1==e.data.status&&L<5)return F.value=!0,L++,void setTimeout((()=>{P()}),1e3);S.value=e.data,F.value=!1,s({title:2==S.value.status?l("pay.paySuccess"):l("pay.payFail")})}}))},R=()=>{var e;const t=decodeURIComponent(uni.getStorageSync("payReturn"));f(t?{url:t,mode:"reLaunch"}:{url:x(),param:{code:null==(e=S.value)?void 0:e.out_trade_no},mode:"reLaunch"})};return(e,t)=>{const a=y,s=v,f=g,x=h(j("u-loading-icon"),w),T=h(j("u-modal"),C);return o(),r(s,{style:_(e.themeColor())},{default:n((()=>[S.value?(o(),r(s,{key:0,class:"w-screen h-screen flex flex-col items-center"},{default:n((()=>[u(s,{class:"flex-1 flex flex-col items-center w-full pt-[200rpx]"},{default:n((()=>[u(s,{class:"flex items-center"},{default:n((()=>[u(a,{class:c(["nc-iconfont -mb-[4rpx] !text-[44rpx]",2==S.value.status?"text-primary nc-icon-duihaoV6mm":"nc-icon-tanhaoV6mm text-red"])},null,8,["class"]),u(a,{class:"text-[36rpx] ml-[16rpx] font-500"},{default:n((()=>[p(i(2==S.value.status?m(l)("pay.paySuccess"):m(l)("pay.payFail")),1)])),_:1})])),_:1}),u(s,{class:"text-[56rpx] font-500 mt-[60rpx] price-font"},{default:n((()=>[u(a,{class:"text-[36rpx] mr-[6rpx]"},{default:n((()=>[p(i(m(l)("currency")),1)])),_:1}),u(a,null,{default:n((()=>[p(i(m(b)(S.value.money)),1)])),_:1})])),_:1})])),_:1}),u(s,{class:"pb-[260rpx]"},{default:n((()=>[u(f,{class:"w-[380rpx] !border-0 h-[80rpx] text-[28rpx] text-[#333] !bg-[#f2f2f2] flex-center font-500 rounded-[20rpx]",plain:!0,onClick:R},{default:n((()=>[p(i(2==S.value.status?m(l)("complete"):m(l)("close")),1)])),_:1})])),_:1})])),_:1})):d("v-if",!0),u(T,{show:F.value,showCancelButton:!0,confirmText:m(l)("pay.completePay"),cancelText:m(l)("pay.incompletePay"),onCancel:R,confirmColor:"var(--primary-color)"},{default:n((()=>[u(s,{class:"py-[20rpx]"},{default:n((()=>[u(x,{text:m(l)("pay.getting"),textSize:"16",mode:"circle",vertical:!0},null,8,["text"])])),_:1})])),_:1},8,["show","confirmText","cancelText"])])),_:1},8,["style"])}}});export{S as default};
