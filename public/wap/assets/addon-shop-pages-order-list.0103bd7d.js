import{d as e,r as t,j as a,o as r,c as l,w as s,b as o,I as p,J as i,K as d,f as n,u as x,n as u,a3 as c,a4 as f,i as m,a2 as _,g as v,h as y,L as g,y as h,z as b,Y as k,x as j,bx as F,l as C,a as w,c3 as S,F as I,D as z,Q as E}from"./index-d8a8f699.js";import{_ as M}from"./u--image.2df700b8.js";import{_ as U}from"./pay.9a75868d.js";import{d as A,e as D,o as R,b as T}from"./order.bdb02759.js";import{g as Y}from"./shop.29197c9d.js";import{M as Z}from"./mescroll-body.f9302aea.js";import{M as $}from"./mescroll-empty.2fe85dec.js";import{u as B}from"./useMescroll.26ccf5de.js";import{_ as J}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.e646392b.js";import"./u-icon.5ba98c98.js";import"./u-transition.db07fff7.js";import"./u-popup.0d48946e.js";import"./u-safe-bottom.a4431b09.js";import"./pay.974edcbe.js";import"./mescroll-i18n.49872024.js";const K=J(e({__name:"list",setup(e){const{mescrollInit:J,downCallback:K,getMescroll:L}=B(f,c),N=t([]),O=t(!1),P=t(!1),Q=t(""),V=t([]),W=t(""),X=t(""),q=t(!1);a((e=>{Q.value=e.status||"",G(),ee()}));const G=()=>{Y().then((e=>{W.value=e.data}))},H=e=>{O.value=!1;let t={page:e.num,limit:e.size,status:Q.value};D(t).then((t=>{let a=t.data.data;1==e.num&&(N.value=[]),N.value=N.value.concat(a),e.endSuccess(a.length),X.value=t.data.mch_id,q.value=t.data.is_trade_managed,O.value=!0})).catch((()=>{O.value=!0,e.endErr()}))},ee=()=>{P.value=!1,V.value=[];V.value.push({name:"全部",status:""}),A().then((e=>{Object.values(e.data).forEach(((e,t)=>{V.value.push(e)})),P.value=!0})).catch((()=>{P.value=!0}))},te=t(null),ae=(e,t="")=>{var a;"pay"==t?null==(a=te.value)||a.open(e.order_type,e.order_id,`/addon/shop/pages/order/detail?order_id=${e.order_id}`):"close"==t?re(e):"finish"==t?le(e):"evaluate"==t&&(e.is_evaluate?w({url:"/addon/shop/pages/evaluate/order_evaluate_view",param:{order_id:e.order_id}}):w({url:"/addon/shop/pages/evaluate/order_evaluate",param:{order_id:e.order_id}}))},re=e=>{S({title:"提示",content:"您确定要关闭该订单吗？",confirmColor:I().themeColor["--primary-color"],success:t=>{t.confirm&&R(e.order_id).then((e=>{L().resetUpScroll()}))}})},le=e=>{S({title:"提示",content:"您确定物品已收到吗？",confirmColor:I().themeColor["--primary-color"],success:t=>{t.confirm&&T(e.order_id).then((e=>{L().resetUpScroll()}))}})};return(e,t)=>{const a=m,c=_,f=z,S=E,I=v(y("u--image"),M),A=v(y("pay"),U);return r(),l(a,{class:"bg-[#F6F6F6] min-h-screen overflow-hidden order-list",style:u(e.themeColor())},{default:s((()=>[P.value?(r(),l(a,{key:0,class:"fixed left-0 top-0 right-0 z-10"},{default:s((()=>[o(c,{"scroll-x":!0,class:"box-border px-[30rpx] bg-white"},{default:s((()=>[o(a,{class:"flex whitespace-nowrap justify-between py-[24rpx]"},{default:s((()=>[(r(!0),p(d,null,i(V.value,((e,t)=>(r(),l(a,{class:g(["text-[28rpx] leading-[40rpx]",{"class-select":Q.value===e.status.toString()}]),onClick:t=>{return a=e.status,Q.value=a.toString(),N.value=[],void L().resetUpScroll();var a}},{default:s((()=>[h(b(e.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1})):n("v-if",!0),o(Z,{ref:"mescrollRef",top:"88rpx",onInit:x(J),down:{use:!1},onUp:H},{default:s((()=>[N.value.length?(r(),l(a,{key:0,class:"sidebar-marign mt-[20rpx]"},{default:s((()=>[(r(!0),p(d,null,i(N.value,((e,t)=>(r(),l(a,{key:t,class:"mb-[20rpx] card-template"},{default:s((()=>[o(a,{onClick:k((t=>{w({url:"/addon/shop/pages/order/detail",param:{order_id:e.order_id}})}),["stop"])},{default:s((()=>[o(a,{class:"flex justify-between items-center"},{default:s((()=>[o(a,{class:"text-[#626779] text-[24rpx] font-400 leading-[34rpx]"},{default:s((()=>[o(f,null,{default:s((()=>[h(b(x(j)("orderNo"))+"："+b(e.order_no),1)])),_:2},1024),o(f,{class:"text-[#626779] text-[24rpx] font-400 nc-iconfont nc-icon-fuzhiV6xx1 ml-[11rpx]",onClick:k((t=>x(F)(e.order_no)),["stop"])},null,8,["onClick"])])),_:2},1024),o(a,{class:g(["text-[#333] text-[24rpx] leading-[34rpx]",{"text-primary":1==e.status,"text-[#626779]":5==e.status||-1==e.status}])},{default:s((()=>[h(b(e.status_name.name),1)])),_:2},1032,["class"])])),_:2},1024),(r(!0),p(d,null,i(e.order_goods,((t,i)=>(r(),l(a,{class:"flex box-border mt-[20rpx]",key:i},{default:s((()=>[o(a,{class:"w-[150rpx] h-[150rpx]"},{default:s((()=>[o(I,{class:"rounded-[10rpx] overflow-hidden",radius:"10rpx",width:"150rpx",height:"150rpx",src:x(C)(t.goods_image_thumb_small?t.goods_image_thumb_small:""),mode:"aspectFill"},{error:s((()=>[o(S,{class:"w-[150rpx] h-[150rpx] rounded-[10rpx] overflow-hidden",src:x(C)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["src"])])),_:2},1024),o(a,{class:"ml-[20rpx] flex flex-1 flex-col box-border"},{default:s((()=>[o(a,{class:"flex justify-between items-baseline"},{default:s((()=>[o(a,{class:"max-w-[322rpx] text-[28rpx] leading-[40rpx] font-500 truncate text-[#333]"},{default:s((()=>[h(b(t.goods_name),1)])),_:2},1024),"exchange"==e.activity_type?(r(),p(d,{key:0},[parseFloat(t.price)?(r(),l(a,{key:0,class:"text-right ml-[10rpx] leading-[42rpx]"},{default:s((()=>[o(f,{class:"text-[20rpx] price-font"},{default:s((()=>[h("￥")])),_:1}),o(f,{class:"text-[32rpx] font-500 price-font"},{default:s((()=>[h(b(parseFloat(t.price).toFixed(2).split(".")[0]),1)])),_:2},1024),o(f,{class:"text-[22rpx] font-500 price-font"},{default:s((()=>[h("."+b(parseFloat(t.price).toFixed(2).split(".")[1]),1)])),_:2},1024)])),_:2},1024)):n("v-if",!0)],64)):(r(),l(a,{key:1,class:"text-right leading-[42rpx] ml-[10rpx]"},{default:s((()=>[o(f,{class:"text-[20rpx] price-font"},{default:s((()=>[h("￥")])),_:1}),o(f,{class:"text-[32rpx] font-500 price-font"},{default:s((()=>[h(b(parseFloat(t.price).toFixed(2).split(".")[0]),1)])),_:2},1024),o(f,{class:"text-[22rpx] font-500 price-font"},{default:s((()=>[h("."+b(parseFloat(t.price).toFixed(2).split(".")[1]),1)])),_:2},1024)])),_:2},1024))])),_:2},1024),o(a,{class:"flex justify-between items-center text-[#333] mt-[20rpx]"},{default:s((()=>[o(a,{class:"text-[26rpx] text-[#333] font-400 truncate leading-[36rpx] max-w-[369rpx]"},{default:s((()=>[h(b(t.sku_name),1)])),_:2},1024),o(f,{class:"text-right text-[26rpx] font-400 w-[90rpx] leading-[36rpx]"},{default:s((()=>[h("x"+b(t.num),1)])),_:2},1024)])),_:2},1024),"virtual"!=e.delivery_type?(r(),l(a,{key:0,class:"text-[26rpx] font-400 leading-[36rpx] text-[#333] mt-[10rpx]"},{default:s((()=>[h(b(x(j)("deliveryType"))+" ： "+b(e.delivery_type_name),1)])),_:2},1024)):(r(),l(a,{key:1,class:"text-[26rpx] font-400 leading-[36rpx] text-[#333] mt-[10rpx]"},{default:s((()=>[h(b(x(j)("createTime"))+" ："+b(e.create_time),1)])),_:2},1024))])),_:2},1024)])),_:2},1024)))),128))])),_:2},1032,["onClick"]),o(a,{class:"flex justify-end items-center mt-[30rpx]"},{default:s((()=>[o(a,{class:"flex items-baseline"},{default:s((()=>[parseFloat(e.delivery_money)?(r(),l(a,{key:0,class:"text-[22rpx] font-400 text-[#8288A2] leading-[30rpx] mr-[6rpx]"},{default:s((()=>[h(b(x(j)("service")),1)])),_:1})):n("v-if",!0),o(a,{class:"text-[22rpx] font-400 leading-[30rpx]"},{default:s((()=>[h(b(x(j)("actualPayment"))+"：",1)])),_:1}),o(a,{class:"leading-[1]"},{default:s((()=>["exchange"==e.activity_type?(r(),p(d,{key:0},[o(f,{class:"text-[32rpx] mr-[2rpx] leading-[40rpx] price-font"},{default:s((()=>[h(b(e.point),1)])),_:2},1024),o(f,{class:"text-[20rpx] leading-[28rpx]"},{default:s((()=>[h(b(x(j)("point")),1)])),_:1}),parseFloat(e.order_money)?(r(),p(d,{key:0},[o(f,{class:"text-[20rpx] mx-[4rpx] leading-[28rpx]"},{default:s((()=>[h("+")])),_:1}),o(f,{class:"text-[32rpx] font-500 leading-[40rpx] price-font"},{default:s((()=>[h(b(parseFloat(e.order_money).toFixed(2).split(".")[0]),1)])),_:2},1024),o(f,{class:"text-[22rpx] font-500 leading-[28rpx] price-font"},{default:s((()=>[h("."+b(parseFloat(e.order_money).toFixed(2).split(".")[1]),1)])),_:2},1024),o(f,{class:"text-[20rpx] font-500 leading-[28rpx] ml-[2rpx]"},{default:s((()=>[h(b(x(j)("money")),1)])),_:1})],64)):n("v-if",!0)],64)):(r(),p(d,{key:1},[o(f,{class:"text-[20rpx] leading-[26rpx] price-font"},{default:s((()=>[h("￥")])),_:1}),o(f,{class:"text-[32rpx] font-500 leading-[40rpx] price-font"},{default:s((()=>[h(b(parseFloat(e.order_money).toFixed(2).split(".")[0]),1)])),_:2},1024),o(f,{class:"text-[22rpx] font-500 leading-[28rpx] price-font"},{default:s((()=>[h("."+b(parseFloat(e.order_money).toFixed(2).split(".")[1]),1)])),_:2},1024)],64))])),_:2},1024)])),_:2},1024)])),_:2},1024),1==e.status||3==e.status||5==e.status&&1==W.value.is_evaluate?(r(),l(a,{key:0,class:"flex justify-end text-[28rpx] mt-[20rpx] items-center"},{default:s((()=>[1==e.status?(r(),l(a,{key:0,class:"text-[26rpx] font-400 leading-[56rpx] h-[56rpx] min-w-[150rpx] text-center border-[2rpx] border-solid border-[#8288A2] rounded-full text-[#626779] box-border",onClick:k((t=>ae(e,"close")),["stop"])},{default:s((()=>[h(b(x(j)("orderClose")),1)])),_:2},1032,["onClick"])):n("v-if",!0),1==e.status?(r(),l(a,{key:1,class:"text-[26rpx] font-400 leading-[56rpx] h-[56rpx] min-w-[150rpx] text-center border-[2rpx] border-solid text-[#fff] border-primary bg-primary rounded-full ml-[20rpx] box-border",onClick:k((t=>ae(e,"pay")),["stop"])},{default:s((()=>[h(b(x(j)("topay")),1)])),_:2},1032,["onClick"])):n("v-if",!0),3==e.status?(r(),l(a,{key:2,class:"text-[26rpx] font-400 leading-[56rpx] h-[56rpx] min-w-[150rpx] text-center border-[2rpx] border-solid text-[#fff] border-primary bg-primary rounded-full ml-[20rpx] box-border",onClick:k((t=>ae(e,"finish")),["stop"])},{default:s((()=>[h(b(x(j)("orderFinish")),1)])),_:2},1032,["onClick"])):n("v-if",!0),5==e.status&&1==W.value.is_evaluate?(r(),l(a,{key:3,class:"text-[26rpx] font-400 leading-[56rpx] h-[56rpx] min-w-[150rpx] text-center border-[2rpx] border-solid border-[#8288A2] rounded-full ml-[20rpx] text-[#626779] box-border",onClick:k((t=>ae(e,"evaluate")),["stop"])},{default:s((()=>[h(b(1==e.is_evaluate?x(j)("selectedEvaluate"):x(j)("evaluate")),1)])),_:2},1032,["onClick"])):n("v-if",!0)])),_:2},1024)):n("v-if",!0)])),_:2},1024)))),128))])),_:1})):n("v-if",!0),!N.value.length&&O.value?(r(),l(a,{key:1,class:"mx-[30rpx] mt-[20rpx] rounded-[16rpx] flex items-center justify-center noData"},{default:s((()=>[o($,{option:{tip:"暂无订单"}})])),_:1})):n("v-if",!0)])),_:1},8,["onInit"]),o(A,{ref_key:"payRef",ref:te,onClose:e.payClose},null,8,["onClose"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-b4c26ed5"]]);export{K as default};
