import{d as e,r as a,j as l,p as t,E as r,o as s,c as d,w as o,b as u,y as n,z as p,u as x,f as i,W as c,A as f,n as _,a as m,i as v,B as g,g as b,h,D as y,C as w,F as k,bl as j,bm as C,R as F,ca as V,aM as O,_ as T}from"./index-71c7df08.js";import{_ as z}from"./loading-page.vue_vue_type_script_setup_true_lang.c7dc2256.js";import{t as B}from"./topTabbar.cb42d19f.js";import{c as S,i as R,r as L,h as U}from"./refund.155c76db.js";import{l as q}from"./logistics-tracking.3f43a28e.js";import"./order.c5841498.js";const A=T(e({__name:"detail",setup(e){B().setTopTabbarParam({title:"退款详情"});const T=a({}),A=a(!0),E=a(""),M=a(""),P=a(!1),W=a("");a("");const D=a(""),I=a({express_number:"",express_company:"",remark:""}),N=l((()=>({express_number:{type:"string",required:!0,message:"请输入物流单号",trigger:["blur","change"]},express_company:{type:"string",required:!0,message:"请输入物流公司",trigger:["blur","change"]}})));a(null),t((e=>{E.value=e.order_refund_no,M.value=e.type,P.value=e.is_edit_delivery,Z(E.value)}));const Z=e=>{A.value=!0,S(e).then((e=>{T.value=e.data,P.value&&T.value.delivery&&(I.value.express_number=T.value.delivery.express_number,I.value.express_company=T.value.delivery.express_company,I.value.remark=T.value.delivery.remark),W.value=T.value.order_goods.goods_name,D.value=r(T.value.order_goods.goods_image_thumb_small||""),A.value=!1})).catch((()=>{A.value=!1}))},G=e=>{m({url:"/addon/shop/pages/goods/detail",param:{goods_id:e}})},H=a(),J=()=>{H.value.validate().then((e=>{let a={delivery:I.value,order_refund_no:T.value.order_refund_no};(P.value?R(a):L(a)).then((e=>{setTimeout((()=>{m({url:"/addon/shop/pages/refund/list"})}),500)})).catch((()=>{}))}))},K=e=>{"cancel"==e?(X=T.value.order_refund_no,Q.value=!0):"edit"==e?m({url:"/addon/shop/pages/refund/edit_apply",param:{order_refund_no:T.value.order_refund_no}}):"logistics"==e?m({url:"/addon/shop/pages/refund/detail",param:{order_refund_no:T.value.order_refund_no,type:"logistics"}}):"editLogistics"==e&&m({url:"/addon/shop/pages/refund/detail",param:{order_refund_no:T.value.order_refund_no,type:"logistics",is_edit_delivery:!0}})},Q=a(!1);let X="";const Y=()=>{U(X).then((e=>{Q.value=!1,Z(E.value)})).catch((()=>{Q.value=!1}))},$=()=>{Q.value=!1};return(e,a)=>{const l=v,t=g,B=b(h("u--image"),j),S=y,R=b(h("u--input"),C),L=b(h("u-form-item"),F),U=b(h("u--form"),V),P=w,W=b(h("u-modal"),O),D=b(h("loading-page"),z);return s(),d(l,{style:_(e.themeColor())},{default:o((()=>[A.value?i("v-if",!0):(s(),d(l,{key:0,class:"bg-[var(--page-bg-color)] min-h-screen overflow-hidden"},{default:o((()=>["logistics"!=M.value?(s(),d(l,{key:0,class:"pb-[200rpx]"},{default:o((()=>[u(l,{class:"bg-linear"},{default:o((()=>[T.value.status_name?(s(),d(l,{key:0,class:"flex justify-between items-center pl-[40rpx] pr-[50rpx] h-[280rpx] box-border pb-[90rpx]"},{default:o((()=>[u(l,{class:"text-[36rpx] font-500 leading-[42rpx] text-[#fff]"},{default:o((()=>[n(p(T.value.status_name),1)])),_:1}),u(l,{class:"flex items-center"},{default:o((()=>[-1!=["1","2","4","6","7"].indexOf(T.value.status)?(s(),d(t,{key:0,class:"w-[180rpx] h-[140rpx]",src:x(r)("addon/shop/detail/payment.png"),mode:"aspectFit"},null,8,["src"])):i("v-if",!0),-1!=["8"].indexOf(T.value.status)?(s(),d(t,{key:1,class:"w-[180rpx] h-[140rpx]",src:x(r)("addon/shop/detail/complete.png"),mode:"aspectFit"},null,8,["src"])):i("v-if",!0),-1!=["3","5","-1"].indexOf(T.value.status)?(s(),d(t,{key:2,class:"w-[180rpx] h-[140rpx]",src:x(r)("addon/shop/detail/close.png"),mode:"aspectFit"},null,8,["src"])):i("v-if",!0)])),_:1})])),_:1})):i("v-if",!0)])),_:1}),u(l,{class:"sidebar-margin card-template flex justify-between flex-wrap mt-[-76rpx]"},{default:o((()=>[u(l,{class:"w-[150rpx] h-[150rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",onClick:a[0]||(a[0]=e=>G(T.value.order_goods.goods_id))},{default:o((()=>[u(B,{radius:"var(--goods-rounded-big)",width:"150rpx",height:"150rpx",src:x(r)(T.value.order_goods.goods_image_thumb_small?T.value.order_goods.goods_image_thumb_small:""),model:"aspectFill"},{error:o((()=>[u(t,{class:"w-[150rpx] h-[150rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:x(r)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:1},8,["src"])])),_:1}),u(l,{class:"ml-[20rpx] flex flex-1 flex-col justify-between"},{default:o((()=>[u(l,null,{default:o((()=>[u(l,{class:"text-[28rpx] max-w-[490rpx] truncate leading-[40rpx]"},{default:o((()=>[n(p(T.value.order_goods.goods_name),1)])),_:1}),T.value.order_goods.sku_name?(s(),d(l,{key:0,class:"text-[22rpx] mt-[10rpx] text-[var(--text-color-light9)] truncate max-w-[490rpx] leading-[28rpx]"},{default:o((()=>[n(p(T.value.order_goods.sku_name),1)])),_:1})):i("v-if",!0)])),_:1}),u(l,{class:"flex justify-between items-center leading-[28rpx]"},{default:o((()=>[u(l,{class:"price-font"},{default:o((()=>[u(S,{class:"text-[24rpx]"},{default:o((()=>[n("￥")])),_:1}),u(S,{class:"text-[40rpx] font-500"},{default:o((()=>[n(p(parseFloat(T.value.order_goods.price).toFixed(2).split(".")[0]),1)])),_:1}),u(S,{class:"text-[24rpx] font-500"},{default:o((()=>[n("."+p(parseFloat(T.value.order_goods.price).toFixed(2).split(".")[1]),1)])),_:1})])),_:1}),u(S,{class:"text-right text-[26rpx]"},{default:o((()=>[n("x"+p(T.value.order_goods.num),1)])),_:1})])),_:1})])),_:1})])),_:1}),u(l,{class:"sidebar-margin mt-[var(--top-m)] card-template"},{default:o((()=>[u(l,{class:"justify-between text-[28rpx] card-template-item"},{default:o((()=>[u(l,null,{default:o((()=>[n(p(x(k)("refundMoney")),1)])),_:1}),u(l,{class:"price-font text-[var(--price-text-color)]"},{default:o((()=>[u(S,{class:"text-[24rpx] mr-[4rpx]"},{default:o((()=>[n("￥")])),_:1}),u(S,{class:"text-[28rpx]"},{default:o((()=>[n(p(parseFloat(T.value.apply_money).toFixed(2)),1)])),_:1})])),_:1})])),_:1}),u(l,{class:"justify-between text-[28rpx] card-template-item"},{default:o((()=>[u(l,null,{default:o((()=>[n(p(x(k)("refundType")),1)])),_:1}),u(l,null,{default:o((()=>[n(p(T.value.refund_type_name),1)])),_:1})])),_:1}),u(l,{class:"justify-between text-[28rpx] card-template-item"},{default:o((()=>[u(l,null,{default:o((()=>[n(p(x(k)("refundCause")),1)])),_:1}),u(l,{class:"w-[400rpx] multi-hidden text-right"},{default:o((()=>[n(p(T.value.reason||"--"),1)])),_:1})])),_:1}),u(l,{class:"justify-between text-[28rpx] card-template-item"},{default:o((()=>[u(l,null,{default:o((()=>[n(p(x(k)("refundNo")),1)])),_:1}),u(l,null,{default:o((()=>[n(p(T.value.order_refund_no),1)])),_:1})])),_:1}),u(l,{class:"justify-between text-[28rpx] card-template-item"},{default:o((()=>[u(l,null,{default:o((()=>[n(p(x(k)("createTime")),1)])),_:1}),u(l,null,{default:o((()=>[n(p(T.value.create_time),1)])),_:1})])),_:1}),u(l,{class:"justify-between text-[28rpx] card-template-item !items-baseline"},{default:o((()=>[u(l,null,{default:o((()=>[n(p(x(k)("createExplain")),1)])),_:1}),u(l,{class:"flex-1 ml-[60rpx] text-right leading-[1.5] flex justify-end break-all"},{default:o((()=>[n(p(T.value.remark),1)])),_:1})])),_:1}),u(l,{class:"justify-between text-[28rpx] card-template-item !items-baseline"},{default:o((()=>[u(l,null,{default:o((()=>[n(p(x(k)("reasonRefusal")),1)])),_:1}),u(l,{class:c(["flex-1 ml-[60rpx] leading-[1.5] text-right",{"#333":T.value.shop_reason,"text-[var(--text-color-light9)]":!T.value.shop_reason}])},{default:o((()=>[n(p(T.value.shop_reason||"--"),1)])),_:1},8,["class"])])),_:1})])),_:1}),u(l,{class:"sidebar-margin mt-[var(--top-m)] card-template"},{default:o((()=>[u(l,{class:"justify-between text-[28rpx] card-template-item"},{default:o((()=>[u(l,null,{default:o((()=>[n(p(x(k)("record")),1)])),_:1}),u(l,{class:"flex items-center",onClick:a[1]||(a[1]=e=>x(m)({url:"/addon/shop/pages/refund/log",param:{order_refund_no:E.value}}))},{default:o((()=>[u(S,{class:"text-[26rpx] text-[var(--text-color-light9)]"},{default:o((()=>[n(p(x(k)("check")),1)])),_:1}),u(S,{class:"nc-iconfont nc-icon-youV6xx text-[24rpx] text-[var(--text-color-light9)] pt-[2rpx]"})])),_:1})])),_:1})])),_:1}),u(l,{class:"flex tab-bar justify-between items-center bg-[#fff] fixed left-0 right-0 bottom-0 min-h-[100rpx] pl-[30rpx] pr-[20rpx] flex-wrap"},{default:o((()=>[u(l,{class:"flex"},{default:o((()=>[u(l,{class:"flex mr-[20rpx] flex-col justify-center items-center",onClick:a[2]||(a[2]=e=>x(m)({url:"/addon/shop/pages/index",mode:"reLaunch"}))},{default:o((()=>[u(l,{class:"nc-iconfont nc-icon-shouyeV6xx11 text-[36rpx]"}),u(S,{class:"text-[20rpx] mt-[10rpx]"},{default:o((()=>[n(p(x(k)("index")),1)])),_:1})])),_:1})])),_:1}),u(l,{class:"flex justify-end"},{default:o((()=>[-1==["6","7","8","-1"].indexOf(T.value.status)?(s(),d(l,{key:0,class:"min-w-[180rpx] box-border text-[26rpx] h-[70rpx] flex-center border-[2rpx] border-solid border-[#ccc] text-[#333] rounded-full ml-[20rpx]",onClick:a[3]||(a[3]=e=>K("cancel"))},{default:o((()=>[n(p(x(k)("refundApply")),1)])),_:1})):i("v-if",!0),-1!=["3"].indexOf(T.value.status)?(s(),d(l,{key:1,class:"min-w-[180rpx] box-border text-[#333] text-[26rpx] h-[70rpx] flex-center border-[2rpx] border-solid border-[#ccc] rounded-full ml-[20rpx] px-[20rpx]",onClick:a[4]||(a[4]=f((e=>K("edit")),["stop"]))},{default:o((()=>[n("编辑退款信息")])),_:1})):i("v-if",!0),-1!=["2"].indexOf(T.value.status)?(s(),d(l,{key:2,class:"min-w-[180rpx] box-border text-[#333] text-[26rpx] h-[70rpx] flex-center border-[2rpx] border-solid border-[#ccc] rounded-full ml-[20rpx] px-[20rpx]",onClick:a[5]||(a[5]=f((e=>K("logistics")),["stop"]))},{default:o((()=>[n("填写发货物流")])),_:1})):i("v-if",!0),-1!=["5"].indexOf(T.value.status)?(s(),d(l,{key:3,class:"min-w-[180rpx] box-border text-[#333] text-[26rpx] h-[70rpx] flex-center border-[2rpx] border-solid border-[#ccc] rounded-full ml-[20rpx] px-[20rpx]",onClick:a[6]||(a[6]=f((e=>K("editLogistics")),["stop"]))},{default:o((()=>[n("编辑发货物流")])),_:1})):i("v-if",!0)])),_:1})])),_:1})])),_:1})):(s(),d(l,{key:1},{default:o((()=>[u(l,{class:"bg-linear"},{default:o((()=>[u(l,{class:"flex justify-between items-center pl-[40rpx] pr-[50rpx] h-[280rpx] box-border pb-[90rpx]"},{default:o((()=>[u(l,{class:"text-[36rpx] font-500 leading-[42rpx] text-[#fff]"},{default:o((()=>[n(p(T.value.status_name),1)])),_:1}),u(l,{class:"flex items-center"},{default:o((()=>[u(t,{class:"w-[180rpx] h-[140rpx]",src:x(r)("addon/shop/detail/payment.png"),mode:"aspectFit"},null,8,["src"])])),_:1})])),_:1})])),_:1}),u(l,{class:"sidebar-margin card-template mt-[-79rpx] flex justify-between flex-wrap"},{default:o((()=>[u(l,{class:"w-[150rpx] h-[150rpx] flex-2",onClick:a[7]||(a[7]=e=>G(T.value.order_goods.goods_id))},{default:o((()=>[u(B,{radius:"var(--goods-rounded-big)",width:"150rpx",height:"150rpx",src:x(r)(T.value.order_goods.sku_image?T.value.order_goods.sku_image.split(",")[0]:""),model:"aspectFill"},{error:o((()=>[u(t,{class:"w-[150rpx] h-[150rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:x(r)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:1},8,["src"])])),_:1}),u(l,{class:"ml-[20rpx] flex flex-1 flex-col justify-between"},{default:o((()=>[u(l,null,{default:o((()=>[u(l,{class:"text-[28rpx] max-w-[490rpx] truncate leading-[40rpx]"},{default:o((()=>[n(p(T.value.order_goods.goods_name),1)])),_:1}),T.value.order_goods.sku_name?(s(),d(l,{key:0,class:"text-[24rpx] mt-[14rpx] text-[var(--text-color-light9)] truncate max-w-[490rpx] leading-[28rpx]"},{default:o((()=>[n(p(T.value.order_goods.sku_name),1)])),_:1})):i("v-if",!0)])),_:1}),u(l,{class:"flex justify-between items-center leading-[28rpx]"},{default:o((()=>[u(l,{class:"price-font"},{default:o((()=>[u(S,{class:"text-[24rpx] font-500"},{default:o((()=>[n("￥")])),_:1}),u(S,{class:"text-[40rpx] font-500"},{default:o((()=>[n(p(parseFloat(T.value.order_goods.price).toFixed(2).split(".")[0]),1)])),_:1}),u(S,{class:"text-[24rpx] font-500"},{default:o((()=>[n("."+p(parseFloat(T.value.order_goods.price).toFixed(2).split(".")[1]),1)])),_:1})])),_:1}),u(S,{class:"text-right text-[26rpx]"},{default:o((()=>[n("x"+p(T.value.order_goods.num),1)])),_:1})])),_:1})])),_:1})])),_:1}),u(l,{class:"sidebar-margin card-template top-mar"},{default:o((()=>[u(l,{class:"card-template-item justify-between text-[28rpx]"},{default:o((()=>[u(l,null,{default:o((()=>[n("联系人")])),_:1}),u(l,null,{default:o((()=>[n(p(T.value.refund_address.contact_name),1)])),_:1})])),_:1}),u(l,{class:"card-template-item justify-between text-[28rpx]"},{default:o((()=>[u(l,null,{default:o((()=>[n("手机号")])),_:1}),u(l,null,{default:o((()=>[n(p(T.value.refund_address.mobile),1)])),_:1})])),_:1}),u(l,{class:"card-template-item justify-between text-[28rpx]"},{default:o((()=>[u(l,null,{default:o((()=>[n("退货地址")])),_:1}),T.value.refund_address?(s(),d(l,{key:0,class:"w-[460rpx] text-sm text-right"},{default:o((()=>[n(p(T.value.refund_address.full_address||"--"),1)])),_:1})):i("v-if",!0)])),_:1})])),_:1}),u(l,{class:"sidebar-margin card-template top-mar py-[var(--top-m)]"},{default:o((()=>[u(l,{class:"title"},{default:o((()=>[n("物流信息")])),_:1}),u(U,{labelPosition:"left",model:I.value,rules:x(N),errorType:"toast",ref_key:"deliveryForm",ref:H,labelWidth:"140rpx",labelStyle:{fontSize:"28rpx"}},{default:o((()=>[u(L,{label:"物流公司",prop:"express_company",borderBottom:!1},{default:o((()=>[u(R,{border:"none",modelValue:I.value.express_company,"onUpdate:modelValue":a[8]||(a[8]=e=>I.value.express_company=e),placeholder:"请输入物流公司",placeholderClass:"text-sm !text-[var(--text-color-light9)]",fontSize:"28rpx",maxlength:"50"},null,8,["modelValue"])])),_:1}),u(l,{class:"mt-[16rpx]"},{default:o((()=>[u(L,{label:"物流单号",prop:"express_number",borderBottom:!1},{default:o((()=>[u(R,{border:"none",placeholder:"请输入物流单号",modelValue:I.value.express_number,"onUpdate:modelValue":a[9]||(a[9]=e=>I.value.express_number=e),placeholderClass:"text-sm !text-[var(--text-color-light9)]",fontSize:"28rpx",maxlength:"100"},null,8,["modelValue"])])),_:1})])),_:1}),u(l,{class:"mt-[16rpx]"},{default:o((()=>[u(L,{label:"物流说明",borderBottom:!1},{default:o((()=>[u(R,{border:"none",placeholder:"选填",modelValue:I.value.remark,"onUpdate:modelValue":a[10]||(a[10]=e=>I.value.remark=e),placeholderClass:"text-sm !text-[var(--text-color-light9)]",fontSize:"28rpx",maxlength:"100"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1}),u(l,{class:"common-tab-bar-placeholder"}),u(l,{class:"common-tab-bar fixed left-[var(--sidebar-m)] right-[var(--sidebar-m)] bottom-[0]"},{default:o((()=>[u(P,{class:"mt-[80rpx] primary-btn-bg text-[#fff] h-[80rpx] leading-[80rpx] rounded-[100rpx] text-[26rpx] font-500","hover-class":"none",onClick:J},{default:o((()=>[n("提交")])),_:1})])),_:1})])),_:1})),u(q,{ref:"materialRef"},null,512),u(W,{show:Q.value,confirmColor:"var(--primary-color)",content:x(k)("cancelRefundContent"),showCancelButton:!0,closeOnClickOverlay:!0,onCancel:$,onConfirm:Y},null,8,["show","content"])])),_:1})),u(D,{loading:A.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-93726234"]]);export{A as default};
