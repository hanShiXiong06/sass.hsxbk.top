import{d as e,r as t,p as s,j as a,o as r,E as o,b as d,w as l,x as f,y as u,c as n,f as i,G as c,F as _,e as m,v as x,u as p,bB as k,i as v,C as y,g as I,h as g,N as b,V as h}from"./index-905183d4.js";import{_ as j}from"./u-icon.86a2aad0.js";import{_ as w}from"./u-code-input.4e0da751.js";import{_ as N,a as C}from"./u-steps.454f3fcd.js";import{_ as O}from"./tabbar.f4383367.js";import{_ as J}from"./pay.2560ca84.js";import{e as S,c as P,d as z,b as U,f as q}from"./order.cee37b40.js";import{g as B}from"./goto.721ffbf7.js";import{_ as E}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-text.86301043.js";import"./u-badge.82a65592.js";import"./u-tabbar.bedfa48a.js";import"./u-safe-bottom.e94b03c1.js";import"./u-image.44c969ef.js";import"./u-transition.dbaca185.js";import"./u-button.d3798ecb.js";import"./u-loading-icon.c376267d.js";import"./u-popup.e3f6594b.js";import"./pay.01186f9d.js";const F=E(e({__name:"orderdetail",setup(e){const E=t(null),F=t(!1),G=s({}),R=t(),T=t(),V=e=>{k({phoneNumber:e})},$=async()=>{await P(G.id),B("/addon/tk_jhkd/pages/orderlist")},A=async()=>{await z(G.id),B("/addon/tk_jhkd/pages/orderlist")},D=async()=>{let e={id:G.id,close_reason:"用户主动退款"};await U(e),B("/addon/tk_jhkd/pages/orderlist")},H=()=>{var e;F.value=!0,null==(e=E.value)||e.open(G.payInfo.trade_type,G.payInfo.trade_id,"/tk_jhkd/pages/orderdetail?id="+G.id)},K=async e=>{const t=await S(e);null==t.data.order_status_arr&&(uni.$u.toast("订单不存在或删除"),setTimeout((function(){B("/addon/tk_jhkd/pages/orderlist")}),1e3)),Object.assign(G,t.data),G.orderInfo.delivery_id&&(async e=>{const t=await q(e);R.value=t.data})(G.orderInfo.delivery_id),G.orderInfo.courier_context&&(T.value=JSON.parse(G.orderInfo.courier_context),console.log(T.value))};return a((e=>{e.id&&K(e.id)})),(e,t)=>{const s=v,a=y,k=I(g("u-icon"),j),S=I(g("u-code-input"),w),P=b,z=I(g("u-steps-item"),N),U=I(g("u-steps"),C),q=I(g("tabbar"),O),B=I(g("pay"),J);return r(),o(c,null,[d(s,{class:""},{default:l((()=>[d(s,{class:"tk-card"},{default:l((()=>[d(s,{class:"order-num-card"},{default:l((()=>[d(s,{class:"text-xs font-weight text-slate-600"},{default:l((()=>[f("订单号:"+u(G.order_id),1)])),_:1}),d(s,{class:"fb mt-1"},{default:l((()=>[d(s,{class:"text-xs font-weight text-slate-500"},{default:l((()=>[f(u(G.create_time),1)])),_:1}),G.order_status_arr?(r(),n(s,{key:0,class:"mr-4 tk-tag"},{default:l((()=>[f(u(G.order_status_arr.name),1)])),_:1})):i("v-if",!0)])),_:1})])),_:1}),d(s,{class:"flex mt-1 items-center"},{default:l((()=>[d(s,{class:"mr-4"},{default:l((()=>[d(a,{class:"qu-tag text-xs"},{default:l((()=>[f("取")])),_:1})])),_:1}),G.orderInfo?(r(),n(s,{key:0,class:""},{default:l((()=>[d(s,{class:"tk-sltext text-xs text-[#4b4b4b] font-bold"},{default:l((()=>[f(u(JSON.parse(G.orderInfo.start_address).address),1)])),_:1}),d(s,{class:"text-xs flex"},{default:l((()=>[d(s,{class:"tk-sltext"},{default:l((()=>[f(u(JSON.parse(G.orderInfo.start_address).full_address),1)])),_:1})])),_:1}),d(s,{class:"text-xs flex"},{default:l((()=>[d(s,{class:"tk-sltext"},{default:l((()=>[f(u(JSON.parse(G.orderInfo.start_address).mobile),1)])),_:1})])),_:1})])),_:1})):i("v-if",!0)])),_:1}),d(s,{class:"flex mt-2 items-center"},{default:l((()=>[d(s,{class:"mr-4"},{default:l((()=>[d(a,{class:"song-tag text-xs"},{default:l((()=>[f("送")])),_:1})])),_:1}),G.orderInfo?(r(),n(s,{key:0,class:""},{default:l((()=>[d(s,{class:"tk-sltext text-xs text-[#4b4b4b] font-bold"},{default:l((()=>[f(u(JSON.parse(G.orderInfo.end_address).address),1)])),_:1}),d(s,{class:"text-xs flex"},{default:l((()=>[d(s,{class:"tk-sltext w-3/4"},{default:l((()=>[f(u(JSON.parse(G.orderInfo.end_address).full_address),1)])),_:1})])),_:1}),d(s,{class:"text-xs flex"},{default:l((()=>[d(s,{class:"tk-sltext w-3/4"},{default:l((()=>[f(u(JSON.parse(G.orderInfo.end_address).mobile),1)])),_:1})])),_:1})])),_:1})):i("v-if",!0)])),_:1}),G.orderInfo?(r(),n(s,{key:0,class:"detail-tag mt-2 text-xs font-weight p-4 text-[#878787]"},{default:l((()=>[f(" 物品:"+u(G.orderInfo.goods)+"重量:"+u(G.orderInfo.weight)+"kg "+u(G.orderInfo.goods)+" "+u(G.orderInfo.long)+"x"+u(G.orderInfo.width)+"x"+u(G.orderInfo.height)+"cm ",1)])),_:1})):i("v-if",!0),d(s,{class:"detail-tag font-weight p-4 text-[#313131]"},{default:l((()=>[f("备注:"+u(G.remark),1)])),_:1}),d(s,{class:"flex justify-end mt-2"},{default:l((()=>[G.order_status_arr?(r(!0),o(c,{key:0},_(G.order_status_arr.member_action,((e,t)=>(r(),n(s,{class:"tk-tag mr-4",onClick:t=>{return"gopay"==(s=e.class)&&H(),"del"==s&&A(),"refund"==s&&D(),void("close"==s&&$());var s}},{default:l((()=>[f(u(e.name),1)])),_:2},1032,["onClick"])))),256)):i("v-if",!0)])),_:1})])),_:1}),d(s,{class:"tk-card"},{default:l((()=>[G.orderInfo&&T.value&&1==G.orderInfo.order_status?(r(),n(s,{key:0,class:"mb-2 font-weight text-xs text-slate-600"},{default:l((()=>[d(s,{class:"fl items-center"},{default:l((()=>[d(s,{class:""},{default:l((()=>[f("揽件员："+u(T.value.courierName),1)])),_:1}),d(s,{class:"ml-4 mr-1",onClick:t[0]||(t[0]=e=>V(T.value.courierPhone))},{default:l((()=>[f("联系电话："+u(T.value.courierPhone),1)])),_:1}),d(k,{name:"phone",color:"#676767",size:"18",onClick:t[1]||(t[1]=e=>V(T.value.courierPhone))})])),_:1}),T.value&&T.value.pickUpCode?(r(),n(s,{key:0,class:"mt-2"},{default:l((()=>[d(S,{size:"24",bold:"",color:"#2931cc",value:T.value.pickUpCode},null,8,["value"])])),_:1})):i("v-if",!0)])),_:1})):i("v-if",!0),m(d(s,{class:"mt-2 flex items-center"},{default:l((()=>[d(P,{src:p(h)(G.orderInfo&&G.orderInfo.delivery_arry?G.orderInfo.delivery_arry.logo:""),mode:"",style:{width:"34px",height:"34px","border-radius":"100%"}},null,8,["src"]),d(s,{class:""},{default:l((()=>[d(s,{class:"ml-2 text-sm"},{default:l((()=>[f(u(G.orderInfo&&G.orderInfo.delivery_arry?G.orderInfo.delivery_arry.name:""),1)])),_:1}),G.orderInfo&&1!=G.orderInfo.order_status?(r(),n(s,{key:0,class:"ml-2 font-weight text-xs text-slate-600"},{default:l((()=>[f(u(G.orderInfo&&G.orderInfo.delivery_id?G.orderInfo.delivery_id:"暂无单号"),1)])),_:1})):i("v-if",!0)])),_:1}),d(s,{class:"tk-tag ml-2 font-weight text-xs text-slate-600"},{default:l((()=>[f(u(G.orderInfo&&G.orderInfo.order_status_desc?G.orderInfo.order_status_desc:"暂无状态"),1)])),_:1})])),_:1},512),[[x,G.orderInfo&&G.orderInfo.delivery_arry]])])),_:1}),d(s,{class:"tk-card"},{default:l((()=>[R.value&&R.value.length>0?(r(),n(s,{key:0,class:"p-2"},{default:l((()=>[d(U,{dot:"true",direction:"column"},{default:l((()=>[(r(!0),o(c,null,_(R.value,((e,t)=>(r(),n(z,{key:"index",title:e.desc,desc:e.time},null,8,["title","desc"])))),128))])),_:1})])),_:1})):(r(),n(s,{key:1,class:"text-xs text-slate-400"},{default:l((()=>[f("暂无运单动态")])),_:1}))])),_:1})])),_:1}),d(q,{addon:"tk_jhkd"}),d(B,{ref_key:"payRef",ref:E,onClose:t[2]||(t[2]=e=>F.value=!1)},null,512)],64)}}}),[["__scopeId","data-v-4069dea9"]]);export{F as default};
