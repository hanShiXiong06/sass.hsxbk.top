import{d as e,r as t,p as r,o as a,c as l,w as s,b as o,P as d,a7 as i,Q as n,f as p,u,n as x,a8 as c,a9 as m,i as f,a6 as _,g as v,h as y,R as g,y as h,z as b,F as k,A as j,be as C,E as w,a as F,c3 as E,k as S,D as z,B as M}from"./index-7bf68536.js";import{_ as I}from"./pay.d2e850e8.js";import{d as U,e as R,o as A,b as N}from"./order.3552570e.js";import{g as P}from"./shop.23520c6c.js";import{M as T}from"./mescroll-body.b6d57b41.js";import{M as B}from"./mescroll-empty.fcefb74e.js";import{u as D}from"./useMescroll.26ccf5de.js";import{_ as O}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.e46f68ef.js";import"./u-icon.0c1c54c7.js";import"./u-transition.cdf87992.js";import"./u-popup.be4bfacd.js";import"./u-safe-bottom.908eeae4.js";import"./pay.2db06871.js";import"./mescroll-i18n.14e7fe02.js";/* empty css                                                                       */const Q=O(e({__name:"order_list",setup(e){const{mescrollInit:O,downCallback:Q,getMescroll:V}=D(m,c),$=t([]),q=t(!1),G=t(!1),H=t(""),J=t([]),K=t(""),L=t(""),W=t(!1);r((e=>{H.value=e.status||"",X(),Z()}));const X=()=>{P().then((e=>{K.value=e.data}))},Y=e=>{q.value=!1;let t={page:e.num,limit:e.size,status:H.value,activity_type:"exchange"};R(t).then((t=>{let r=t.data.data;1==e.num&&($.value=[]),$.value=$.value.concat(r),e.endSuccess(r.length),L.value=t.data.mch_id,W.value=t.data.is_trade_managed,q.value=!0})).catch((()=>{q.value=!0,e.endErr()}))},Z=()=>{G.value=!1,J.value=[];J.value.push({name:"全部",status:""}),U().then((e=>{Object.values(e.data).forEach(((e,t)=>{J.value.push(e)})),G.value=!0})).catch((()=>{G.value=!0}))},ee=t(null),te=(e,t="")=>{var r;"pay"==t?null==(r=ee.value)||r.open(e.order_type,e.order_id,`/addon/shop/pages/order/detail?order_id=${e.order_id}`):"close"==t?re(e):"finish"==t?ae(e):"evaluate"==t&&(e.is_evaluate?F({url:"/addon/shop/pages/evaluate/order_evaluate_view",param:{order_id:e.order_id}}):F({url:"/addon/shop/pages/evaluate/order_evaluate",param:{order_id:e.order_id}}))},re=e=>{E({title:"提示",content:"您确定要关闭该订单吗？",confirmColor:S().themeColor["--primary-color"],success:t=>{t.confirm&&A(e.order_id).then((e=>{V().resetUpScroll()}))}})},ae=e=>{E({title:"提示",content:"您确定物品已收到吗？",confirmColor:S().themeColor["--primary-color"],success:t=>{t.confirm&&N(e.order_id).then((e=>{V().resetUpScroll()}))}})};return(e,t)=>{const r=f,c=_,m=z,E=M,S=v(y("pay"),I);return a(),l(r,{class:"bg-[var(--page-bg-color)] min-h-screen overflow-hidden order-list",style:x(e.themeColor())},{default:s((()=>[G.value?(a(),l(r,{key:0,class:"fixed left-0 top-0 right-0 z-10"},{default:s((()=>[o(c,{"scroll-x":!0,class:"tab-style-2"},{default:s((()=>[o(r,{class:"tab-content"},{default:s((()=>[(a(!0),d(n,null,i(J.value,((e,t)=>(a(),l(r,{class:g(["tab-items",{"class-select":H.value===e.status.toString()}]),onClick:t=>{return r=e.status,H.value=r.toString(),$.value=[],void V().resetUpScroll();var r}},{default:s((()=>[h(b(e.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1})):p("v-if",!0),o(T,{ref:"mescrollRef",top:"88rpx",onInit:u(O),down:{use:!1},onUp:Y},{default:s((()=>[$.value.length?(a(),l(r,{key:0,class:"sidebar-margin pt-[var(--top-m)]"},{default:s((()=>[(a(!0),d(n,null,i($.value,((e,t)=>(a(),l(r,{key:t,class:"mb-[var(--top-m)] card-template"},{default:s((()=>[o(r,{onClick:t=>{F({url:"/addon/shop/pages/order/detail",param:{order_id:e.order_id}})}},{default:s((()=>[o(r,{class:"flex justify-between items-center"},{default:s((()=>[o(r,{class:"text-[#303133] text-[26rpx] font-400 leading-[30rpx]"},{default:s((()=>[o(m,null,{default:s((()=>[h(b(u(k)("orderNo"))+":",1)])),_:1}),o(m,{class:"ml-[10rpx]"},{default:s((()=>[h(b(e.order_no),1)])),_:2},1024),o(m,{class:"text-[303133] text-[26rpx] font-400 nc-iconfont nc-icon-fuzhiV6xx1 ml-[11rpx]",onClick:j((t=>u(C)(e.order_no)),["stop"])},null,8,["onClick"])])),_:2},1024),o(r,{class:g(["text-[#303133] text-[26rpx] leading-[34rpx]",{"text-primary":1==e.status,"!text-[var(--text-color-light9)]":5==e.status||-1==e.status}])},{default:s((()=>[h(b(e.status_name.name),1)])),_:2},1032,["class"])])),_:2},1024),(a(!0),d(n,null,i(e.order_goods,((t,d)=>(a(),l(r,{class:"flex box-border mt-[20rpx]",key:d},{default:s((()=>[t.goods_image_thumb_small?(a(),l(E,{key:0,class:"w-[150rpx] h-[150rpx] rounded-[var(--rounded-mid)]",src:u(w)(t.goods_image_thumb_small),mode:"aspectFill",onError:e=>t.goods_image_thumb_small="static/resource/images/diy/shop_default.jpg"},null,8,["src","onError"])):(a(),l(E,{key:1,class:"w-[150rpx h-[150rpx] rounded-[var(--rounded-mid)]",src:u(w)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])),o(r,{class:"ml-[20rpx] flex flex-1 flex-col box-border"},{default:s((()=>[o(r,{class:"max-w-[490rpx] text-[28rpx] leading-[40rpx] font-400 truncate text-[#303133]"},{default:s((()=>[h(b(t.goods_name),1)])),_:2},1024),o(r,{class:"flex justify-between items-baseline text-[#303133] mt-[14rpx]"},{default:s((()=>[o(r,null,{default:s((()=>[t.sku_name?(a(),l(r,{key:0,class:"text-[24rpx] text-[var(--text-color-light6)] font-400 truncate leading-[34rpx] max-w-[369rpx] mb-[10rpx]"},{default:s((()=>[h(b(t.sku_name),1)])),_:2},1024)):p("v-if",!0),"virtual"!=e.delivery_type?(a(),l(r,{key:1,class:"text-[24rpx] font-400 leading-[34rpx] text-[var(--text-color-light6)]"},{default:s((()=>[h(b(u(k)("deliveryType"))+" ： "+b(e.delivery_type_name),1)])),_:2},1024)):(a(),l(r,{key:2,class:"text-[24rpx] font-400 leading-[34rpx] text-[var(--text-color-light6)]"},{default:s((()=>[h(b(u(k)("createTime"))+" ："+b(e.create_time),1)])),_:2},1024))])),_:2},1024),o(m,{class:"text-right text-[26rpx] font-400 w-[90rpx] leading-[36rpx]"},{default:s((()=>[h("x"+b(t.num),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1032,["onClick"]),o(r,{class:"flex justify-end items-center mt-[20rpx]"},{default:s((()=>[parseFloat(e.delivery_money)?(a(),l(r,{key:0,class:"text-[22rpx] text-[var(--text-color-light9)] leading-[30rpx] mr-[6rpx]"},{default:s((()=>[h(b(u(k)("service")),1)])),_:1})):p("v-if",!0),o(r,{class:"flex items-center"},{default:s((()=>[o(r,{class:"text-[22rpx] font-400 leading-[30rpx] text-[#303133]"},{default:s((()=>[h(b(u(k)("actualPayment"))+"：",1)])),_:1}),o(r,{class:"text-[var(--price-text-color)] price-font"},{default:s((()=>[o(m,{class:"text-[36rpx] mr-[2rpx]"},{default:s((()=>[h(b(e.point),1)])),_:2},1024),o(m,{class:"text-[30rpx]"},{default:s((()=>[h(b(u(k)("point")),1)])),_:1}),parseFloat(e.order_money)?(a(),d(n,{key:0},[o(m,{class:"text-[30rpx] mx-[4rpx]"},{default:s((()=>[h("+")])),_:1}),o(m,{class:"text-[36rpx] price-font"},{default:s((()=>[h(b(parseFloat(e.order_money)),1)])),_:2},1024),o(m,{class:"text-[30rpx] price-font ml-[2rpx]"},{default:s((()=>[h(b(u(k)("money")),1)])),_:1})],64)):p("v-if",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024),1==e.status||3==e.status||5==e.status&&1==K.value.is_evaluate?(a(),l(r,{key:0,class:"flex justify-end text-[28rpx] mt-[20rpx] items-center"},{default:s((()=>[1==e.status?(a(),l(r,{key:0,class:"text-[24rpx] font-500 leading-[52rpx] h-[56rpx] min-w-[150rpx] text-center border-[2rpx] border-solid border-[var(--text-color-light9)] rounded-full text-[var(--text-color-light6)] box-bordertext-[24rpx] font-500 leading-[52rpx] h-[56rpx] min-w-[150rpx] text-center border-[2rpx] border-solid border-[var(--text-color-light9)] rounded-full text-[var(--text-color-light6)] box-border",onClick:j((t=>te(e,"close")),["stop"])},{default:s((()=>[h(b(u(k)("orderClose")),1)])),_:2},1032,["onClick"])):p("v-if",!0),1==e.status?(a(),l(r,{key:1,class:"text-[24rpx] font-500 leading-[52rpx] h-[56rpx] min-w-[150rpx] text-center border-[2rpx] border-solid text-[#fff] border-primary bg-primary rounded-full ml-[20rpx] box-border",onClick:j((t=>te(e,"pay")),["stop"])},{default:s((()=>[h(b(u(k)("topay")),1)])),_:2},1032,["onClick"])):p("v-if",!0),3==e.status?(a(),l(r,{key:2,class:"text-[24rpx] font-500 leading-[52rpx] h-[56rpx] min-w-[150rpx] text-center border-[2rpx] border-solid text-[#fff] border-primary bg-primary rounded-full ml-[20rpx] box-border",onClick:j((t=>te(e,"finish")),["stop"])},{default:s((()=>[h(b(u(k)("orderFinish")),1)])),_:2},1032,["onClick"])):p("v-if",!0),5==e.status&&1==K.value.is_evaluate?(a(),l(r,{key:3,class:"text-[24rpx] font-500 leading-[52rpx] h-[56rpx] min-w-[150rpx] text-center border-[2rpx] border-solid border-[var(--text-color-light9)] rounded-full ml-[20rpx] text-[var(--text-color-light6)] box-border",onClick:j((t=>te(e,"evaluate")),["stop"])},{default:s((()=>[h(b(1==e.is_evaluate?u(k)("selectedEvaluate"):u(k)("evaluate")),1)])),_:2},1032,["onClick"])):p("v-if",!0)])),_:2},1024)):p("v-if",!0)])),_:2},1024)))),128))])),_:1})):p("v-if",!0),!$.value.length&&q.value?(a(),l(B,{key:1,option:{tip:"暂无订单"}})):p("v-if",!0)])),_:1},8,["onInit"]),o(S,{ref_key:"payRef",ref:ee,onClose:e.payClose},null,8,["onClose"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-b8105ab8"]]);export{Q as default};
