import{d as e,r,j as l,o as t,c as a,w as s,u as o,b as d,x as u,y as p,f as n,_ as x,n as f,a as i,i as _,N as c,g as m,h as g,C as b,V as y,t as h}from"./index-e6ce9fbf.js";import{_ as v}from"./u-icon.c5d9cd81.js";import{_ as j}from"./u--image.2a363e1d.js";import{_ as k}from"./u--input.be1d3c0a.js";import{_ as w}from"./u-form.f2229701.js";import{_ as C}from"./u--form.134798dd.js";import{_ as F}from"./u-button.7a41d301.js";import{_ as V}from"./u-modal.a2c072b7.js";import{_ as O}from"./u-loading-page.76c2d95f.js";import{c as z,i as S,r as T,h as B}from"./refund.fceecc42.js";import{l as L}from"./logistics-tracking.a0513bd9.js";import{_ as R}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.c9386d77.js";import"./u-transition.6919b33f.js";import"./u-input.b98e66b2.js";import"./u-line.ebbd60c6.js";import"./u-loading-icon.39fd4711.js";import"./u-popup.b16d6e1d.js";import"./u-safe-bottom.1ba5bfba.js";import"./u-tabs.57a1bffd.js";import"./u-badge.7d0ca9d8.js";import"./u-steps.fa645337.js";import"./u-text.9aefeac5.js";import"./order.22cff883.js";import"./mescroll-uni-option.2f7b06f4.js";/* empty css                                                                       */const U=R(e({__name:"detail",setup(e){let R=r({}),U=r(!0),q=r(""),E=r(""),I=r(!1);const N=r({express_number:"",express_company:"",remark:""}),P={express_number:{type:"string",required:!0,message:"请输入物流单号",trigger:["blur","change"]},express_company:{type:"string",required:!0,message:"请输入物流公司",trigger:["blur","change"]}};l((e=>{q.value=e.order_refund_no,E.value=e.type,I.value=e.is_edit_delivery,A(q.value)}));const A=e=>{U.value=!0,z(e).then((e=>{R.value=e.data,I.value&&R.value.delivery&&(N.value.express_number=R.value.delivery.express_number,N.value.express_company=R.value.delivery.express_company,N.value.remark=R.value.delivery.remark),U.value=!1})).catch((()=>{U.value=!1}))},W=e=>{i({url:"/addon/shop/pages/goods/detail",param:{goods_id:e}})};let D=r();const G=()=>{D.value.validate().then((e=>{let r={delivery:N.value,order_refund_no:R.value.order_refund_no};(I.value?S(r):T(r)).then((e=>{setTimeout((()=>{i({url:"/addon/shop/pages/refund/list"})}),500)})).catch((()=>{}))}))},H=e=>{"cancel"==e?(K=R.value.order_refund_no,J.value=!0):"edit"==e?i({url:"/addon/shop/pages/refund/edit_apply",param:{order_refund_no:R.value.order_refund_no}}):"logistics"==e?i({url:"/addon/shop/pages/refund/detail",param:{order_refund_no:R.value.order_refund_no,type:"logistics"}}):"editLogistics"==e&&i({url:"/addon/shop/pages/refund/detail",param:{order_refund_no:R.value.order_refund_no,type:"logistics",is_edit_delivery:!0}})};let J=r(!1),K="";const M=()=>{B(K).then((e=>{J.value=!1,A(q.value)})).catch((()=>{J.value=!1}))},Q=()=>{J.value=!1};return(e,r)=>{const l=_,z=c,S=m(g("u-icon"),v),T=m(g("u--image"),j),B=b,I=m(g("u--input"),k),A=m(g("u-form-item"),w),K=m(g("u--form"),C),X=m(g("u-button"),F),Y=m(g("u-modal"),V),Z=m(g("u-loading-page"),O);return t(),a(l,{style:f(e.themeColor())},{default:s((()=>[o(U)?n("v-if",!0):(t(),a(l,{key:0,class:"bg-[#f8f8f8] min-h-screen overflow-hidden"},{default:s((()=>["logistics"!=o(E)?(t(),a(l,{key:0,class:"pb-[200rpx]"},{default:s((()=>[o(R).status_name?(t(),a(l,{key:0,class:"flex justify-between items-center pl-[40rpx] pr-[50rpx] bg-linear h-[170rpx]"},{default:s((()=>[d(l,{class:"text-[36rpx] font-500 leading-[42rpx] text-[#fff]"},{default:s((()=>[u(p(o(R).status_name),1)])),_:1}),d(l,null,{default:s((()=>[-1!=["1","2","4","6","7"].indexOf(o(R).status)?(t(),a(z,{key:0,class:"w-[110rpx] h-[110rpx]",src:o(y)("addon/shop/detail/payment.png")},null,8,["src"])):n("v-if",!0),-1!=["8"].indexOf(o(R).status)?(t(),a(z,{key:1,class:"w-[110rpx] h-[110rpx]",src:o(y)("addon/shop/detail/complete.png")},null,8,["src"])):n("v-if",!0),-1!=["3","5","-1"].indexOf(o(R).status)?(t(),a(z,{key:2,class:"w-[110rpx] h-[110rpx]",src:o(y)("addon/shop/detail/close.png")},null,8,["src"])):n("v-if",!0)])),_:1})])),_:1})):n("v-if",!0),d(l,{class:"bg-[#fff] mx-[30rpx] p-[20rpx] rounded-[16rpx] flex justify-between flex-wrap mt-[20rpx]"},{default:s((()=>[d(l,{class:"w-[150rpx] h-[150rpx] flex-2",onClick:r[0]||(r[0]=e=>W(o(R).order_goods.goods_id))},{default:s((()=>[d(T,{class:"rounded-[10rpx] overflow-hidden",width:"150rpx",height:"150rpx",src:o(y)(o(R).order_goods.goods_image_thumb_small?o(R).order_goods.goods_image_thumb_small:""),model:"aspectFill"},{error:s((()=>[d(S,{name:"photo",color:"#999",size:"50"})])),_:1},8,["src"])])),_:1}),d(l,{class:"ml-[20rpx] flex flex-1 flex-col justify-between text-[#303133]"},{default:s((()=>[d(l,null,{default:s((()=>[d(B,{class:"text-[28rpx] text-item leading-[40rpx]"},{default:s((()=>[u(p(o(R).order_goods.goods_name),1)])),_:1}),o(R).order_goods.sku_name?(t(),a(l,{key:0,class:"flex"},{default:s((()=>[d(l,{class:"text-[24rpx] mt-[10rpx] text-[#999] truncate max-w-[450rpx] leading-[28rpx]"},{default:s((()=>[u(p(o(R).order_goods.sku_name),1)])),_:1})])),_:1})):n("v-if",!0)])),_:1}),d(l,{class:"flex justify-between items-center leading-[28rpx]"},{default:s((()=>[d(l,{class:"price-font"},{default:s((()=>[d(B,{class:"text-[24rpx]"},{default:s((()=>[u("￥")])),_:1}),d(B,{class:"text-[32rpx] font-500"},{default:s((()=>[u(p(parseFloat(o(R).order_goods.price).toFixed(2).split(".")[0]),1)])),_:1}),d(B,{class:"text-[22rpx] font-500"},{default:s((()=>[u("."+p(parseFloat(o(R).order_goods.price).toFixed(2).split(".")[1]),1)])),_:1})])),_:1}),d(B,{class:"text-right text-[26rpx]"},{default:s((()=>[u("x"+p(o(R).order_goods.num),1)])),_:1})])),_:1})])),_:1})])),_:1}),d(l,{class:"bg-[#fff] mx-[30rpx] p-[20rpx] mt-[20rpx] rounded-[16rpx]"},{default:s((()=>[d(l,{class:"flex justify-between text-[28rpx] leading-[32rpx]"},{default:s((()=>[d(l,null,{default:s((()=>[u(p(o(h)("refundType")),1)])),_:1}),d(l,null,{default:s((()=>[u(p(o(R).refund_type_name),1)])),_:1})])),_:1}),d(l,{class:"flex justify-between text-[28rpx] leading-[32rpx] mt-[30rpx]"},{default:s((()=>[d(l,null,{default:s((()=>[u(p(o(h)("refundCause")),1)])),_:1}),d(l,{class:"w-[400rpx] multi-hidden text-right"},{default:s((()=>[u(p(o(R).reason||"--"),1)])),_:1})])),_:1}),d(l,{class:"flex justify-between text-[28rpx] leading-[32rpx] mt-[30rpx]"},{default:s((()=>[d(l,null,{default:s((()=>[u(p(o(h)("refundNo")),1)])),_:1}),d(l,null,{default:s((()=>[u(p(o(R).order_refund_no),1)])),_:1})])),_:1}),d(l,{class:"flex justify-between text-[28rpx] leading-[32rpx] mt-[30rpx]"},{default:s((()=>[d(l,null,{default:s((()=>[u(p(o(h)("createTime")),1)])),_:1}),d(l,null,{default:s((()=>[u(p(o(R).create_time),1)])),_:1})])),_:1}),d(l,{class:"flex justify-between text-[28rpx] leading-[32rpx] mt-[30rpx]"},{default:s((()=>[d(l,null,{default:s((()=>[u(p(o(h)("createExplain")),1)])),_:1}),d(l,{class:"flex-1 ml-[20rpx] flex justify-end break-all"},{default:s((()=>[u(p(o(R).remark),1)])),_:1})])),_:1}),d(l,{class:"flex justify-between text-[28rpx] leading-[32rpx] mt-[30rpx]"},{default:s((()=>[d(l,null,{default:s((()=>[u(p(o(h)("reasonRefusal")),1)])),_:1}),d(l,{class:"w-[400rpx] text-right"},{default:s((()=>[u(p(o(R).shop_reason||"--"),1)])),_:1})])),_:1})])),_:1}),d(l,{class:"bg-[#fff] mx-[30rpx] p-[20rpx] mt-[20rpx] rounded-[16rpx]"},{default:s((()=>[d(l,{class:"flex justify-between text-[28rpx] leading-[32rpx]"},{default:s((()=>[d(l,null,{default:s((()=>[u(p(o(h)("record")),1)])),_:1}),d(l,{class:"flex items-center",onClick:r[1]||(r[1]=e=>o(i)({url:"/addon/shop/pages/refund/log",param:{order_refund_no:o(q)}}))},{default:s((()=>[d(B,null,{default:s((()=>[u(p(o(h)("check")),1)])),_:1}),d(B,{class:"nc-iconfont nc-icon-youV6xx text-[30rpx] text-[#999]"})])),_:1})])),_:1})])),_:1}),d(l,{class:"flex tab-bar justify-end items-center bg-[#fff] fixed left-0 right-0 bottom-0 min-h-[100rpx] px-1 flex-wrap"},{default:s((()=>[d(l,{class:"flex w-[70rpx] flex-col justify-center items-center",onClick:r[2]||(r[2]=e=>o(i)({url:"/addon/shop/pages/index",mode:"reLaunch"}))},{default:s((()=>[d(B,{class:"iconfont iconshouye text-[32rpx]"}),n(" <text class=\"text-xs mt-1\">{{t('index')}}</text> ")])),_:1}),d(l,{class:"flex justify-end mr-[30rpx]"},{default:s((()=>[-1==["6","7","8","-1"].indexOf(o(R).status)?(t(),a(l,{key:0,class:"text-[26rpx] leading-[52rpx] px-[23rpx] border-[2rpx] border-solid border-[#999] rounded-full ml-[20rpx] text-[#303133]",onClick:r[3]||(r[3]=e=>H("cancel"))},{default:s((()=>[u(p(o(h)("refundApply")),1)])),_:1})):n("v-if",!0),-1!=["3"].indexOf(o(R).status)?(t(),a(l,{key:1,class:"text-[24rpx] text-[#303133] leading-[52rpx] px-[23rpx] border-[2rpx] border-solid border-[#999] rounded-full ml-[20rpx]",onClick:r[4]||(r[4]=x((e=>H("edit")),["stop"]))},{default:s((()=>[u("编辑退款信息")])),_:1})):n("v-if",!0),-1!=["2"].indexOf(o(R).status)?(t(),a(l,{key:2,class:"text-[24rpx] text-[#303133] leading-[52rpx] px-[23rpx] border-[2rpx] border-solid border-[#999] rounded-full ml-[20rpx]",onClick:r[5]||(r[5]=x((e=>H("logistics")),["stop"]))},{default:s((()=>[u("填写发货物流")])),_:1})):n("v-if",!0),-1!=["5"].indexOf(o(R).status)?(t(),a(l,{key:3,class:"text-[24rpx] text-[#303133] leading-[52rpx] px-[23rpx] border-[2rpx] border-solid border-[#999] rounded-full ml-[20rpx]",onClick:r[6]||(r[6]=x((e=>H("editLogistics")),["stop"]))},{default:s((()=>[u("编辑发货物流")])),_:1})):n("v-if",!0)])),_:1})])),_:1})])),_:1})):(t(),a(l,{key:1},{default:s((()=>[d(l,{class:"bg-[#fff] mx-[30rpx] p-[20rpx] rounded-[16rpx] flex justify-between flex-wrap mt-[20rpx]"},{default:s((()=>[d(l,{class:"w-[150rpx] h-[150rpx] flex-2",onClick:r[7]||(r[7]=e=>W(o(R).order_goods.goods_id))},{default:s((()=>[d(T,{class:"rounded-[10rpx] overflow-hidden",width:"150rpx",height:"150rpx",src:o(y)(o(R).order_goods.sku_image?o(R).order_goods.sku_image:""),model:"aspectFill"},{error:s((()=>[d(S,{name:"photo",color:"#999",size:"50"})])),_:1},8,["src"])])),_:1}),d(l,{class:"ml-[20rpx] flex flex-1 flex-col justify-between"},{default:s((()=>[d(l,null,{default:s((()=>[d(B,{class:"text-[28rpx] text-item leading-[40rpx]"},{default:s((()=>[u(p(o(R).order_goods.goods_name),1)])),_:1}),o(R).order_goods.sku_name?(t(),a(l,{key:0,class:"flex"},{default:s((()=>[d(B,{class:"text-[24rpx] mt-[10rpx] text-[#999] truncate max-w-[450rpx] leading-[28rpx]"},{default:s((()=>[u(p(o(R).order_goods.sku_name),1)])),_:1})])),_:1})):n("v-if",!0)])),_:1}),d(l,{class:"flex justify-between items-center leading-[28rpx]"},{default:s((()=>[d(l,{class:"price-font"},{default:s((()=>[d(B,{class:"text-[24rpx]"},{default:s((()=>[u("￥")])),_:1}),d(B,{class:"text-[32rpx] font-500"},{default:s((()=>[u(p(parseFloat(o(R).order_goods.price).toFixed(2).split(".")[0]),1)])),_:1}),d(B,{class:"text-[22rpx] font-500"},{default:s((()=>[u("."+p(parseFloat(o(R).order_goods.price).toFixed(2).split(".")[1]),1)])),_:1})])),_:1}),d(B,{class:"text-right text-[26rpx]"},{default:s((()=>[u("x"+p(o(R).order_goods.num),1)])),_:1})])),_:1})])),_:1})])),_:1}),d(l,{class:"bg-[#fff] mx-[30rpx] p-[20rpx] rounded-[16rpx] mt-[20rpx]"},{default:s((()=>[d(l,{class:"flex justify-between text-[28rpx] leading-[32rpx]"},{default:s((()=>[d(l,null,{default:s((()=>[u("联系人")])),_:1}),d(l,null,{default:s((()=>[u(p(o(R).refund_address.contact_name),1)])),_:1})])),_:1}),d(l,{class:"flex justify-between text-[28rpx] leading-[32rpx] mt-[30rpx]"},{default:s((()=>[d(l,null,{default:s((()=>[u("手机号")])),_:1}),d(l,null,{default:s((()=>[u(p(o(R).refund_address.mobile),1)])),_:1})])),_:1}),d(l,{class:"flex justify-between text-[28rpx] leading-[32rpx] mt-[30rpx]"},{default:s((()=>[d(l,null,{default:s((()=>[u("退货地址")])),_:1}),o(R).refund_address?(t(),a(l,{key:0,class:"w-[460rpx] text-sm text-right"},{default:s((()=>[u(p(o(R).refund_address.full_address||"--"),1)])),_:1})):n("v-if",!0)])),_:1})])),_:1}),d(l,{class:"bg-[#fff] mx-[30rpx] p-[20rpx] rounded-[16rpx] mt-[20rpx]"},{default:s((()=>[d(K,{labelPosition:"left",model:N.value,rules:P,ref_key:"deliveryForm",ref:D,labelWidth:"140rpx",labelStyle:{fontSize:"28rpx"}},{default:s((()=>[d(A,{label:"物流公司",prop:"express_company",borderBottom:"true",ref:"item1"},{default:s((()=>[d(I,{pl:"",border:"none",modelValue:N.value.express_company,"onUpdate:modelValue":r[8]||(r[8]=e=>N.value.express_company=e),placeholder:"请输入物流公司",placeholderClass:"text-sm",fontSize:"28rpx"},null,8,["modelValue"])])),_:1},512),d(A,{label:"物流单号",prop:"express_number",borderBottom:"true",ref:"item1"},{default:s((()=>[d(I,{border:"none",placeholder:"请输入物流单号",modelValue:N.value.express_number,"onUpdate:modelValue":r[9]||(r[9]=e=>N.value.express_number=e),placeholderClass:"text-sm",fontSize:"28rpx"},null,8,["modelValue"])])),_:1},512),d(A,{label:"物流说明",borderBottom:"",ref:"item1"},{default:s((()=>[d(I,{border:"none",placeholder:"选填",modelValue:N.value.remark,"onUpdate:modelValue":r[10]||(r[10]=e=>N.value.remark=e),placeholderClass:"text-sm",fontSize:"28rpx"},null,8,["modelValue"])])),_:1},512)])),_:1},8,["model"])])),_:1}),d(l,{class:"mx-[30rpx]"},{default:s((()=>[d(X,{class:"mt-[20rpx]",text:"提交",type:"primary",shape:"circle",onClick:G})])),_:1})])),_:1})),d(L,{ref:"materialRef"},null,512),d(Y,{show:o(J),content:o(h)("cancelRefundContent"),showCancelButton:!0,closeOnClickOverlay:!0,onCancel:Q,onConfirm:M},null,8,["show","content"])])),_:1})),d(Z,{"bg-color":"rgb(248,248,248)",loading:o(U),loadingText:"",fontSize:"16",color:"#303133"},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-fbb9aed2"]]);export{U as default};
