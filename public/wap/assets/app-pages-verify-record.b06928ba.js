import{d as e,r as t,p as a,o as l,c as s,w as r,b as o,A as c,f as n,O as p,a6 as i,P as x,u,n as d,a7 as m,a8 as f,D as v,a4 as _,i as g,g as h,h as y,y as b,z as j,bv as k,E as w,a as C,B as V}from"./index-2882a2d8.js";import{_ as U}from"./u--image.d52c0594.js";import{M as z}from"./mescroll-body.e69cb222.js";import{M as I}from"./mescroll-empty.7f392528.js";import{u as M}from"./useMescroll.26ccf5de.js";import{c as S}from"./verify.5647ae06.js";import{s as R}from"./select-date.53f9e875.js";import{_ as D}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.46ebbbc1.js";import"./u-icon.1104ad2f.js";import"./u-transition.4448d2e5.js";import"./mescroll-i18n.c2747603.js";/* empty css                                                                       */import"./u-popup.2abbe959.js";import"./u-overlay.1a317a4e.js";import"./u-safe-bottom.f13b01b8.js";const E=D(e({__name:"record",setup(e){const D=t(""),E=t([]),F=t([]),A=t(!1),{mescrollInit:B,downCallback:O,getMescroll:P}=M(f,m);t(null),a((()=>{}));const Q=e=>{A.value=!1;let t={page:e.num,limit:e.size,keyword:D.value,create_time:E.value};S(t).then((t=>{let a=t.data.data;1==e.num&&(F.value=[]),F.value=F.value.concat(a),e.endSuccess(a.length),A.value=!0})).catch((()=>{A.value=!0,e.endErr()}))},T=()=>{P().resetUpScroll()},$=t(),q=()=>{$.value.show=!0},G=e=>{E.value=e,F.value=[],P().resetUpScroll()};return(e,t)=>{const a=v,m=_,f=g,M=V,S=h(y("u--image"),U);return l(),s(f,{class:"bg-[var(--page-bg-color)] min-h-screen overflow-hidden",style:d(e.themeColor())},{default:r((()=>[o(f,{class:"fixed left-0 right-0 top-0 z-99 bg-[#fff]"},{default:r((()=>[o(f,{class:"py-[14rpx] flex items-center justify-between px-[20rpx]"},{default:r((()=>[o(f,{class:"flex-1 search-input mr-[20rpx]"},{default:r((()=>[o(a,{onClick:t[0]||(t[0]=c((e=>T()),["stop"])),class:"nc-iconfont nc-icon-sousuo-duanV6xx1 btn"}),o(m,{class:"input",maxlength:"50",type:"text",modelValue:D.value,"onUpdate:modelValue":t[1]||(t[1]=e=>D.value=e),placeholder:"请输入搜索关键词",placeholderClass:"text-[var(--text-color-light9)]","confirm-type":"search",onConfirm:t[2]||(t[2]=e=>T())},null,8,["modelValue"]),D.value?(l(),s(a,{key:0,class:"nc-iconfont nc-icon-cuohaoV6xx1 clear",onClick:t[3]||(t[3]=e=>D.value="")})):n("v-if",!0)])),_:1}),o(f,{class:"nc-iconfont nc-icon-a-riliV6xx-36 !text-[30rpx] leading-[36rpx] text-[var(--text-color-light6)]",onClick:q})])),_:1})])),_:1}),o(z,{ref:"mescrollRef",top:"88rpx",onInit:u(B),down:{use:!1},onUp:Q},{default:r((()=>[F.value.length?(l(),s(f,{key:0,class:"sidebar-marign pt-[var(--top-m)]"},{default:r((()=>[(l(!0),p(x,null,i(F.value,((e,t)=>(l(),s(f,{key:e.id,class:"w-full flex flex-col mb-[var(--top-m)] card-template",onClick:t=>{C({url:"/app/pages/verify/detail",param:{code:e.code}})}},{default:r((()=>[o(f,{class:"flex items-center mb-[30rpx] leading-[1] text-[26rpx]"},{default:r((()=>[o(f,{class:"nc-iconfont nc-icon-hexiaotaiV6xx !text-[26rpx] pr-[10rpx]"}),o(a,{class:"truncate text-[#303133] text-[26rpx]"},{default:r((()=>[b("核销码:")])),_:1}),o(a,{class:"ml-[10rpx] max-w-[494rpx]"},{default:r((()=>[b(j(e.code),1)])),_:2},1024),o(a,{class:"text-[#303133] text-[26rpx] font-400 nc-iconfont nc-icon-fuzhiV6xx1 ml-[11rpx]",onClick:c((t=>u(k)(e.code)),["stop"])},null,8,["onClick"])])),_:2},1024),(l(!0),p(x,null,i(e.value.list,((t,a)=>(l(),s(f,{class:"flex flex-1",key:a},{default:r((()=>[o(S,{width:"130rpx",height:"130rpx",radius:"var(--goods-rounded-big)",src:u(w)(t.cover?t.cover:""),mode:"aspectFill"},{error:r((()=>[o(M,{class:"w-[130rpx] h-[130rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:u(w)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["radius","src"]),o(f,{class:"flex flex-col flex-1 ml-[20rpx] py-[4rpx]"},{default:r((()=>[o(f,{class:"max-w-[490rpx] leading-[1.3] truncate text-[28rpx] text-[#303133]"},{default:r((()=>[b(j(t.name),1)])),_:2},1024),e.sub_name?(l(),s(f,{key:0,class:"mt-[14rpx] truncate text-[24rpx] text-[var(--text-color-light9)] max-w-[490rpx]"},{default:r((()=>[b(j(e.sub_name),1)])),_:2},1024)):n("v-if",!0),o(f,{class:"text-[24rpx] mt-[10rpx] text-[var(--text-color-light9)]"},{default:r((()=>[b("x1")])),_:1})])),_:2},1024)])),_:2},1024)))),128)),o(f,{class:"flex bg-[var(--temp-bg)] py-[20rpx] px-[20rpx] rounded-[12rpx] mt-[20rpx]"},{default:r((()=>[o(f,{class:"flex-1"},{default:r((()=>[o(f,{class:"text-[22rpx] text-[var(--text-color-light9)] mb-[10rpx] leading-[30rpx]"},{default:r((()=>[b("核销时间")])),_:1}),o(f,{class:"text-[26rpx] text-[#303133] leading-[36rpx]"},{default:r((()=>[b(j(e.create_time),1)])),_:2},1024)])),_:2},1024),o(f,{class:"flex-1"},{default:r((()=>[o(f,{class:"text-[22rpx] text-[var(--text-color-light9)] mb-[10rpx] leading-[30rpx]"},{default:r((()=>[b("核销员")])),_:1}),o(f,{class:"text-[26rpx] text-[#303133] leading-[36rpx]"},{default:r((()=>[b(j(e.member?e.member.nickname:"--"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):n("v-if",!0),!F.value.length&&A.value?(l(),s(I,{key:1,option:{tip:"暂无核销记录"}})):n("v-if",!0)])),_:1},8,["onInit"]),n(" 时间选择 "),o(R,{ref_key:"selectDateRef",ref:$,onConfirm:G},null,512)])),_:1},8,["style"])}}}),[["__scopeId","data-v-91ef5b88"]]);export{E as default};
