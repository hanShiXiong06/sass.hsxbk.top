import{d as e,r,o as t,c as l,w as a,b as s,E as o,F as p,u as x,G as d,f as n,n as u,a5 as i,a6 as c,i as f,a4 as m,g as _,h as b,H as g,x as y,y as v,V as h,a as k,C as w,ab as j}from"./index-905183d4.js";import{_ as F}from"./u-button.d3798ecb.js";import{_ as C}from"./pay.2560ca84.js";import{e as D}from"./coupon.a8cf1167.js";import{M as z}from"./mescroll-body.b8d008ed.js";import{M as I}from"./mescroll-empty.f9bce990.js";import{u as B}from"./useMescroll.26ccf5de.js";import{_ as S}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.c376267d.js";import"./u-icon.86a2aad0.js";import"./u-image.44c969ef.js";import"./u-transition.dbaca185.js";import"./u-popup.e3f6594b.js";import"./u-safe-bottom.e94b03c1.js";import"./pay.01186f9d.js";import"./mescroll-uni-option.0af4878d.js";import"./mescroll-i18n.6025c811.js";/* empty css                                                                       */const M=S(e({__name:"my_coupon",setup(e){const{mescrollInit:S,downCallback:M,getMescroll:E}=B(c,i),H=r([]),R=r(!1),U=[{status:1,name:"待使用"},{status:2,name:"已使用"},{status:3,name:"已过期"}],A=r(1),G=e=>{R.value=!1;let r={page:e.num,limit:e.size,status:A.value};D(r).then((r=>{let t=r.data.data;1==e.num&&(H.value=[]),H.value=H.value.concat(t),e.endSuccess(t.length),R.value=!0})).catch((()=>{R.value=!0,e.endErr()}))};return(e,r)=>{const i=f,c=m,D=w,B=j,N=_(b("u-button"),F),V=_(b("pay"),C);return t(),l(i,{class:"bg-[#f8f8f8] min-h-screen overflow-hidden",style:u(e.themeColor())},{default:a((()=>[s(i,{class:"fixed left-0 top-0 right-0 z-10"},{default:a((()=>[s(c,{"scroll-x":"true",class:"scroll-Y box-border px-[24rpx] bg-white"},{default:a((()=>[s(i,{class:"flex whitespace-nowrap justify-around"},{default:a((()=>[(t(!0),o(d,null,p(x(U),((e,r)=>(t(),l(i,{class:g(["text-[27rpx] leading-[90rpx]",{"class-select":A.value===e.status}]),onClick:r=>{return t=e.status,A.value=t,H.value=[],void E().resetUpScroll();var t}},{default:a((()=>[y(v(e.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1}),s(z,{ref:"mescrollRef",top:"90rpx",onInit:x(S),onDown:x(M),onUp:G},{default:a((()=>[H.value.length?(t(),l(i,{key:0,class:"py-[20rpx] px-[24rpx]"},{default:a((()=>[(t(!0),o(d,null,p(H.value,((e,r)=>(t(),o(d,null,[1!=A.value?(t(),l(i,{key:0,class:g(["flex items-center relative w-[100%] rounded-[20rpx] overflow-hidden bg-[#fff] py-[10rpx] background-size",{"mt-[20rpx]":r}]),style:u({backgroundImage:3==A.value?"url("+x(h)("addon/shop/coupon/coupn_expired.png")+")":"none"})},{default:a((()=>[s(i,{class:"relative box-border flex-1 border-0 border-r-[1px] border-[#FFBDBD] border-dashed flex items-center"},{default:a((()=>[s(i,{class:"pl-[40rpx] w-[200rpx] box-border"},{default:a((()=>[s(i,{class:"price-font flex items-center text-[var(--primary-color)]"},{default:a((()=>[s(D,{class:"text-[38rpx] leading-[45rpx] text-center font-500"},{default:a((()=>[y("￥")])),_:1}),s(D,{class:"text-[56rpx] font-semibold text-left leading-[70rpx] truncate"},{default:a((()=>[y(v(e.coupon_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),s(i,{class:"flex-1 box-border ml-[10rpx]"},{default:a((()=>[s(i,{class:"text-[30rpx] leading-[35rpx] text-left font-500"},{default:a((()=>["0.00"===e.min_condition_money?(t(),l(D,{key:0},{default:a((()=>[y("无门槛")])),_:1})):(t(),l(D,{key:1},{default:a((()=>[y("满"+v(e.coupon_min_price)+"元可用",1)])),_:2},1024))])),_:2},1024),s(i,{class:"text-[20rpx] leading-[23rpx] mt-[4px] text-left flex items-center"},{default:a((()=>[s(D,{class:"bg-[var(--primary-color)] text-[#fff] text-[20rpx] h-[28rpx] leading-[28rpx] px-[10rpx] rounded-[16rpx] mr-[6rpx] shrink-0"},{default:a((()=>[y(v(e.type_name),1)])),_:2},1024),s(D,{class:"truncate max-w-[190rpx]"},{default:a((()=>[y(v(e.title),1)])),_:2},1024)])),_:2},1024),s(i,{class:"w-[100%] mt-[4px] mb-[11px] text-[20rpx] leading-[23rpx]"},{default:a((()=>[1==e.valid_type?(t(),l(D,{key:0},{default:a((()=>[y("领取之日起"+v(e.length||"")+"天内有效",1)])),_:2},1024)):(t(),l(D,{key:1},{default:a((()=>[y(" 有效期至"+v(e.expire_time?e.expire_time.slice(0,10):""),1)])),_:2},1024))])),_:2},1024)])),_:2},1024)])),_:2},1024),s(i,{class:"pr-[20rpx] pl-[30rpx]"},{default:a((()=>[2==A.value?(t(),l(B,{key:0,class:"w-[150rpx] h-[60rpx] text-[24rpx] !border-0 !bg-[#cccccc] rounded-full !text-[#fff] leading-[60rpx] remove-border",disabled:""},{default:a((()=>[y(v(x(U)[A.value-1].name),1)])),_:1})):n("v-if",!0),3==A.value?(t(),l(B,{key:1,class:"w-[150rpx] h-[60rpx] text-[24rpx] !bg-[#f6f6f6] !opacity-80 rounded-full !text-[#999] leading-[60rpx] border-[2rpx] border-solid border-[#999]",disabled:""},{default:a((()=>[y(v(x(U)[A.value-1].name),1)])),_:1})):n("v-if",!0)])),_:1}),s(i,{class:"absolute top-0 right-[190rpx] h-[10rpx] w-[20rpx] rounded-br-[20rpx] rounded-bl-[20rpx] bg-[#F6F6F6]"}),s(i,{class:"absolute bottom-0 right-[190rpx] h-[10rpx] w-[20rpx] rounded-tr-[20rpx] rounded-tl-[20rpx] bg-[#F6F6F6]"})])),_:2},1032,["class","style"])):(t(),l(i,{key:1,class:g(["flex items-center relative w-[100%] rounded-[20rpx] overflow-hidden bg-[#fff] py-[10rpx] background-size",{"mt-[20rpx]":r}]),style:u({backgroundImage:"url("+x(h)("addon/shop/coupon/coupn_bg.png")+")"})},{default:a((()=>[s(i,{class:"relative box-border flex-1 border-0 border-r-[1px] border-[#FFBDBD] border-dashed flex items-center"},{default:a((()=>[s(i,{class:"pl-[40rpx] w-[200rpx] box-border"},{default:a((()=>[s(i,{class:"price-font flex items-center text-[var(--primary-color)]"},{default:a((()=>[s(D,{class:"text-[38rpx] leading-[45rpx] text-center font-500"},{default:a((()=>[y("￥")])),_:1}),s(D,{class:"text-[56rpx] font-semibold text-left leading-[70rpx] truncate"},{default:a((()=>[y(v(e.coupon_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),s(i,{class:"flex-1 box-border ml-[10rpx]"},{default:a((()=>[s(i,{class:"text-[30rpx] leading-[35rpx] text-left font-500"},{default:a((()=>["0.00"===e.min_condition_money?(t(),l(D,{key:0},{default:a((()=>[y("无门槛")])),_:1})):(t(),l(D,{key:1},{default:a((()=>[y("满"+v(e.coupon_min_price)+"元可用",1)])),_:2},1024))])),_:2},1024),s(i,{class:"text-[20rpx] leading-[23rpx] mt-[4px] text-left flex items-center"},{default:a((()=>[s(D,{class:"bg-[var(--primary-color)] text-[#fff] text-[20rpx] h-[28rpx] leading-[28rpx] px-[10rpx] rounded-[16rpx] mr-[6rpx] shrink-0"},{default:a((()=>[y(v(e.type_name),1)])),_:2},1024),s(D,{class:"truncate max-w-[190rpx]"},{default:a((()=>[y(v(e.title),1)])),_:2},1024)])),_:2},1024),s(i,{class:"w-[100%] mt-[4px] mb-[11px] text-[20rpx] leading-[23rpx]"},{default:a((()=>[s(D,null,{default:a((()=>[y("有效期至"),s(D,null,{default:a((()=>[y(v(e.expire_time?e.expire_time.slice(0,10):""),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),1===A.value?(t(),l(i,{key:0,class:"pr-[20rpx] pl-[30rpx]"},{default:a((()=>[s(N,{customStyle:{width:"150rpx",height:"60rpx",color:"var(--primary-color)",fontSize:"24rpx",lineHeight:"60rpx",padding:"0",backgroundColor:"transparent",border:"2rpx solid var(--primary-color)"},shape:"circle",onClick:r=>{return t=e.coupon_id,void k({url:"/addon/shop/pages/goods/list",param:{coupon_id:t}});var t}},{default:a((()=>[y("去使用")])),_:2},1032,["customStyle","onClick"])])),_:2},1024)):n("v-if",!0),s(i,{class:"absolute top-0 right-[190rpx] h-[10rpx] w-[20rpx] rounded-br-[20rpx] rounded-bl-[20rpx] bg-[#F6F6F6]"}),s(i,{class:"absolute bottom-0 right-[190rpx] h-[10rpx] w-[20rpx] rounded-tr-[20rpx] rounded-tl-[20rpx] bg-[#F6F6F6]"})])),_:2},1032,["class","style"]))],64)))),256))])),_:1})):n("v-if",!0),!H.value.length&&R.value?(t(),l(i,{key:1,class:"noData my-[20rpx] mx-[24rpx] bg-[#fff] rounded-[20rpx] flex items-center justify-center"},{default:a((()=>[s(I,{option:{tip:"暂无优惠券"}})])),_:1})):n("v-if",!0)])),_:1},8,["onInit","onDown"]),s(V,{ref:"payRef"},null,512)])),_:1},8,["style"])}}}),[["__scopeId","data-v-f1cb6833"]]);export{M as default};
