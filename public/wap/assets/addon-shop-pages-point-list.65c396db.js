import{_ as e}from"./u-input.b98e66b2.js";import{d as t,r as a,q as l,t as s,o as r,c as o,w as n,b as c,u as x,aN as i,f as p,H as u,x as f,E as d,F as m,G as _,n as v,a5 as g,a6 as h,g as b,h as y,C as j,i as w,V as k,y as V,a as C,N as F}from"./index-e6ce9fbf.js";import{_ as z}from"./u-icon.c5d9cd81.js";import{_ as I}from"./u--image.2a363e1d.js";import{_ as M}from"./tabbar.2cc8e58f.js";import{b as D}from"./point.6f048c3e.js";import{M as N}from"./mescroll-body.dc3de07c.js";import{M as U}from"./mescroll-empty.b423055b.js";import{u as E}from"./useMescroll.26ccf5de.js";import{_ as S}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.c9386d77.js";import"./u-transition.6919b33f.js";import"./u-badge.7d0ca9d8.js";import"./u-tabbar.2615c204.js";import"./u-safe-bottom.1ba5bfba.js";import"./mescroll-uni-option.2f7b06f4.js";import"./mescroll-i18n.6025c811.js";/* empty css                                                                       */const T=S(t({__name:"list",setup(t){const{mescrollInit:S,downCallback:T,getMescroll:G}=E(h,g);let H=a([]),q=a(""),B=a(""),R=a(null),A=a(!1),J=a(""),K=a(""),L=a(""),O=a("total_order_num");const P=e=>{A.value=!1;let t={goods_category:B.value,page:e.num,limit:e.size,names:J.value,coupon_id:q.value,order:"total_order_num"===O.value?"":O.value,sort:"price"==O.value?K.value:L.value};D(t).then((t=>{let a=t.data.data;1===Number(e.num)&&(H.value=[]),H.value=H.value.concat(a),e.endSuccess(a.length),A.value=!0})).catch((()=>{A.value=!0,e.endErr()}))},Q=e=>{O.value=e,"total_order_num"==e&&(L.value="",K.value=""),"price"==e&&(L.value="",K.value?K.value="asc"==K.value?"desc":"asc":K.value="asc"),"total_exchange_num"==e&&(K.value="",L.value?L.value="asc"==L.value?"desc":"asc":L.value="asc"),H.value=[],G().resetUpScroll()};return l((()=>{setTimeout((()=>{G().optUp.textNoMore=s("end")}),500)})),(t,a)=>{const l=b(y("u-input"),e),s=j,g=w,h=b(y("u-icon"),z),D=b(y("u--image"),I),E=F,G=b(y("tabbar"),M);return r(),o(g,{class:"bg-gray-100 min-h-[100vh]",style:v(t.themeColor())},{default:n((()=>[c(g,{class:"fixed left-0 right-0 top-0 product-warp bg-[#fff] px-[30rpx] z-10"},{default:n((()=>[c(g,{class:"h-[88rpx] box-border py-[14rpx] flex items-center justify-between"},{default:n((()=>[c(g,{class:"flex-1 flex items-center h-[60rpx] bg-[#F6F8F8] rounded-[33rpx] pl-[32rpx] pr-[20rpx]"},{default:n((()=>[c(l,{class:"flex-1",maxlength:"50",modelValue:x(J),"onUpdate:modelValue":a[0]||(a[0]=e=>i(J)?J.value=e:J=e),onConfirm:a[1]||(a[1]=e=>Q("total_order_num")),placeholder:"请搜索您想要的商品",placeholderClass:"text-[#a5a6a6] text-[26rpx]",fontSize:"26rpx",clearable:"",border:"none"},null,8,["modelValue"]),c(s,{class:"nc-iconfont nc-icon-sousuoV6xx text-[30rpx] ml-[18rpx] font-bold !text-[#999]",onClick:a[2]||(a[2]=e=>Q("total_order_num"))})])),_:1}),p(" <view :class=\"['nc-iconfont  text-[44rpx]', listType ? 'nc-icon-yingyongzhongxinV6xx' : 'nc-icon-yingyongliebiaoV6xx']\" @click=\"listIconBtn\"></view> ")])),_:1}),c(g,{class:"flex justify-between tems-center py-[22rpx] px-[20rpx]"},{default:n((()=>[c(g,{class:"flex items-center justify-between text-[24rpx] text-[#666] flex-1"},{default:n((()=>[c(s,{class:u({"text-[#303133] ":"total_order_num"==x(O)}),onClick:a[3]||(a[3]=e=>Q("total_order_num"))},{default:n((()=>[f("综合排序")])),_:1},8,["class"]),c(g,{class:u(["flex items-center",{"text-[#303133]":"total_exchange_num"==x(O)}]),onClick:a[4]||(a[4]=e=>Q("total_exchange_num"))},{default:n((()=>[c(s,{class:"mr-[4rpx]"},{default:n((()=>[f("销量")])),_:1}),"asc"!=x(L)&&"desc"!=x(L)?(r(),o(s,{key:0,class:"text-[30rpx] text-[#666] nc-iconfont nc-icon-shangxiaxuanzeV6xx"})):"asc"==x(L)?(r(),o(s,{key:1,class:"text-[18rpx] w-[30rpx] h-[30rpx] flex items-center justify-center text-[#666] nc-iconfont font-bold nc-icon-shangV6xx-1 font-bold"})):"desc"==x(L)?(r(),o(s,{key:2,class:"text-[18rpx] w-[30rpx] h-[30rpx] flex items-center justify-center text-[#666] font-bold nc-iconfont nc-icon-xiaV6xx"})):p("v-if",!0)])),_:1},8,["class"]),c(g,{class:u(["flex items-center",{"text-[#303133]":"price"==x(O)}]),onClick:a[5]||(a[5]=e=>Q("price"))},{default:n((()=>[c(s,{class:"mr-[4rpx]"},{default:n((()=>[f("价格")])),_:1}),"asc"!=x(K)&&"desc"!=x(K)?(r(),o(s,{key:0,class:"text-[30rpx] text-[#666] nc-iconfont nc-icon-shangxiaxuanzeV6xx"})):"asc"==x(K)?(r(),o(s,{key:1,class:"text-[18rpx] w-[30rpx] h-[30rpx] flex items-center justify-center font-bold text-[#666] nc-iconfont nc-icon-shangV6xx-1 font-bold"})):"desc"==x(K)?(r(),o(s,{key:2,class:"text-[18rpx] w-[30rpx] h-[30rpx] flex items-center justify-center font-bold text-[#666] nc-iconfont nc-icon-xiaV6xx"})):p("v-if",!0)])),_:1},8,["class"])])),_:1})])),_:1})])),_:1}),c(N,{ref_key:"mescrollRef",ref:R,top:"160rpx",bottom:"50px",onInit:x(S),onDown:x(T),onUp:P},{default:n((()=>[x(H).length?(r(),o(g,{key:0,class:"px-[30rpx] flex justify-between flex-wrap"},{default:n((()=>[(r(!0),d(_,null,m(x(H),((e,t)=>(r(),o(g,{class:"w-[334rpx] flex flex-col bg-[#fff] box-border rounded-[16rpx] overflow-hidden mt-[20rpx]",onClick:t=>{return a=e.id,void C({url:"/addon/shop/pages/point/detail",param:{id:a},mode:"navigateTo"});var a}},{default:n((()=>[c(D,{width:"334rpx",height:"334rpx",src:x(k)(e.goods_cover_thumb_mid?e.goods_cover_thumb_mid:""),model:"aspectFill"},{error:n((()=>[c(h,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"]),c(g,{class:"px-[16rpx] flex-1 pt-[10rpx] pb-[20rpx] flex flex-col justify-between"},{default:n((()=>[c(g,{class:"text-[#333] leading-[40rpx] text-[28rpx] multi-hidden"},{default:n((()=>[f(V(e.names),1)])),_:2},1024),c(g,{class:"text-[24rpx] font-400 leading-[34rpx] mt-[10rpx] text-[#999]"},{default:n((()=>[f("已兑"+V(e.total_exchange_num)+"人",1)])),_:2},1024),c(g,{class:"flex justify-between flex-wrap items-center mt-[16rpx]"},{default:n((()=>[c(g,{class:"flex"},{default:n((()=>[c(E,{class:"h-[28rpx]",src:x(k)("addon/shop/exchange/point-icon.png"),mode:"heightFix"},null,8,["src"]),c(s,{class:"text-[var(--price-text-color)] price-font text-[32rpx] ml-[2rpx]"},{default:n((()=>[f(V(e.point),1)])),_:2},1024),e.price&&e.price>0?(r(),o(s,{key:0,class:"text-[#333] font-400 text-[24rpx] mt-[7rpx]"},{default:n((()=>[f("+")])),_:1})):p("v-if",!0),e.price&&e.price>0?(r(),o(s,{key:1,class:"text-[var(--price-text-color)] font-400 text-[22rpx] mt-[10rpx]"},{default:n((()=>[f("￥"+V(parseFloat(e.price).toFixed(2)),1)])),_:2},1024)):p("v-if",!0)])),_:2},1024),c(g,{class:"w-[80rpx] h-[46rpx] text-[28rpx] leading-[46rpx] !text-[#fff] m-0 rounded-full !bg-[var(--primary-color)] font-400 remove-border text-center",shape:"circle"},{default:n((()=>[f("兑换")])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})):p("v-if",!0),!x(H).length&&x(A)?(r(),o(g,{key:1,class:"mx-[30rpx] mt-[20rpx] bg-[#fff] rounded-[16rpx] noData flex items-center justify-center"},{default:n((()=>[c(U,{option:{tip:"暂无商品"}})])),_:1})):p("v-if",!0)])),_:1},8,["onInit","onDown"]),c(G)])),_:1},8,["style"])}}}),[["__scopeId","data-v-c0a3a441"]]);export{T as default};
