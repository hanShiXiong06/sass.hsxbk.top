import{d as e,r as t,j as l,l as a,o as s,c as o,w as r,b as u,u as i,A as d,R as c,y as n,z as p,f as x,P as v,a7 as m,Q as _,s as f,t as g,H as h,aM as y,a as b,E as k,bo as w,B as j,g as F,h as C,i as O,D as S,a5 as V,a6 as T,C as D,Z as I,p as L,x as z,K as E,a0 as N,bn as A,J as M,ah as B,bj as P,a9 as $,b2 as R,b$ as U,n as H,b5 as J,U as G,V as K,b6 as Z}from"./index-7bf68536.js";import{_ as Q}from"./u-swiper.f792d47e.js";import{_ as W}from"./u-count-down.05562681.js";import{_ as X}from"./u-avatar.0bc202a4.js";import{_ as Y}from"./u-icon.0c1c54c7.js";import{_ as q}from"./u--image.b3bf1d5c.js";import{_ as ee}from"./u-parse.525658f5.js";import{_ as te,a as le}from"./u-popup.be4bfacd.js";import{_ as ae}from"./loading-page.vue_vue_type_script_setup_true_lang.124ad65f.js";import{d as se,e as oe,f as re,h as ue}from"./goods.ac47f924.js";import{c as ie,a as de}from"./coupon.1cc52b06.js";import{_ as ce}from"./u-number-box.30c0ab2e.js";import{u as ne}from"./cart.6bce9836.js";import{b as pe}from"./bind-mobile.37d1c6df.js";import{f as xe}from"./cloneDeep.77735539.js";import{_ as ve}from"./_plugin-vue_export-helper.1b428a4d.js";import{s as me}from"./share-poster.5efeffe7.js";import{u as _e}from"./useGoods.e187513d.js";import"./u-loading-icon.b37701e7.js";import"./u-text.df478cbc.js";import"./u-image.e46f68ef.js";import"./u-transition.cdf87992.js";import"./u-safe-bottom.908eeae4.js";import"./u-loading-page.566c330a.js";import"./u-form.78a4f7c2.js";import"./u-line.463a2a45.js";import"./sms-code.vue_vue_type_script_setup_true_lang.eace8f61.js";import"./u-input.09a5cedd.js";import"./u-modal.b47eb877.js";import"./u-checkbox-group.b2a485bf.js";/* empty css                                                                     */const fe=ve(e({__name:"ns-goods-sku",props:["goodsDetail"],emits:["change"],setup(e,{expose:I,emit:L}){const z=e,E=t(!1),N=t(null),A=t({skuId:"",name:[]}),M=t(""),B=t(1),P=t(0),$=t(0),R=t(0),U=t(0),H=l((()=>{let e="0.00";return e=Object.keys(ae.value).length&&"newcomer_discount"==ae.value.type&&ae.value.is_newcomer&&ae.value.newcomer_price!=ae.value.price&&(Object.keys(Q.value).length?parseInt(Q.value.num)+B.value:B.value)<2?ae.value.newcomer_price?ae.value.newcomer_price:ae.value.price:Object.keys(ae.value).length&&"discount"==ae.value.type&&Object.keys(ae.value.goods).length&&ae.value.goods.is_discount&&ae.value.sale_price!=ae.value.price?ae.value.sale_price:Object.keys(ae.value).length&&Object.keys(ae.value.goods).length&&ae.value.goods.member_discount&&f()&&ae.value.member_price!=ae.value.price?ae.value.member_price:ae.value.price,e})),J=()=>{let e="";return"newcomer_discount"==ae.value.type&&Object.keys(ae.value).length&&ae.value.is_newcomer&&ae.value.newcomer_price!=ae.value.price&&f()?e="newcomer_price":"discount"==ae.value.type&&Object.keys(ae.value).length&&Object.keys(ae.value.goods).length&&ae.value.goods.is_discount&&ae.value.sale_price!=ae.value.price?e="discount_price":Object.keys(ae.value).length&&Object.keys(ae.value.goods).length&&ae.value.goods.member_discount&&f()&&ae.value.member_price!=ae.value.price&&(e="member_price"),e},G=a(),K=l((()=>G.info)),Z=ne();Z.getList();const Q=l((()=>ae.value&&Z.cartList["goods_"+ae.value.goods_id]&&Z.cartList["goods_"+ae.value.goods_id]["sku_"+ae.value.sku_id]?Z.cartList["goods_"+ae.value.goods_id]["sku_"+ae.value.sku_id]:{})),W=l((()=>Z.cartList)),X=()=>{setTimeout((()=>{(!B.value||B.value<=$.value)&&(B.value=$.value||1),B.value>=P.value&&(B.value=P.value),$.value>ae.value.detail.stock&&(B.value=0)}),0)},Y=()=>{setTimeout((()=>{(!B.value||B.value<=$.value)&&(B.value=$.value||1),B.value>=P.value&&(B.value=P.value),$.value>ae.value.detail.stock&&(B.value=0,g({title:"商品库存小于起购数量",icon:"none"}))}),0)},ee=()=>{E.value=!1},ae=l((()=>{let e=xe(z.goodsDetail);if(Object.keys(e).length&&(Object.keys(A.value.name).length||(A.value.name=e.sku_spec_format.split(",")),e.goodsSpec.forEach(((e,t)=>{let l=e.spec_values.split(",");e.values=[],l.forEach(((l,a)=>{e.values[a]={},e.values[a].name=l,e.values[a].selected=!1,e.values[a].disabled=!1,A.value.name.forEach(((s,o)=>{o==t&&s==l&&(e.values[a].selected=!0)}))}))})),se(),e.skuList&&Object.keys(e.skuList).length&&e.skuList.forEach(((t,l)=>{t.sku_id==A.value.skuId&&(e.detail=t)}))),e.goods.is_limit){if(e.goods.max_buy){let t=0;if(1==e.goods.limit_type)t=e.goods.max_buy;else{let l=e.goods.max_buy-(e.goods.has_buy||0);t=l>0?l:0}t>e.detail.stock?P.value=e.detail.stock:t<=e.detail.stock&&(P.value=t),0==P.value&&(B.value=0)}R.value=e.goods.max_buy}else P.value=e.detail.stock;return $.value=e.goods.min_buy>0?e.goods.min_buy:1,$.value>e.detail.stock?B.value=0:B.value=$.value,U.value=e.goods.min_buy,e})),se=()=>{z.goodsDetail.skuList.forEach(((e,t)=>{e.sku_spec_format==A.value.name.toString()&&(A.value.skuId=e.sku_id,L("change",e.sku_id))}))},oe=()=>{if($.value&&$.value>ae.value.detail.stock)g({title:"商品库存小于起购数量",icon:"none"});else if(ae.value.goods.is_limit){let e=`该商品单次限购${ae.value.goods.max_buy}件`;1!=ae.value.goods.limit_type&&(e=`该商品每人限购${ae.value.goods.max_buy}件`,ae.value.goods.max_buy-P.value&&(e+=`,已购${ae.value.goods.max_buy-P.value}件`)),B.value>=P.value&&g({title:e,icon:"none"})}},re=()=>{if($.value>1){let e=`该商品起购${$.value}件`;B.value<=$.value&&g({title:e,icon:"none"})}},ue=t(null);t(uni.getStorageSync("isbindmobile"));const ie=()=>{if(!(B.value<1)){if(!K.value)return h().setLoginBack({url:"/addon/shop/pages/goods/detail",param:{sku_id:ae.value.sku_id,type:ae.value.type}}),!1;if(uni.getStorageSync("isbindmobile"))return ue.value.open(),!1;if("join_cart"==M.value){let e=0,t=0,l="";if(W.value["goods_"+ae.value.goods_id]&&W.value["goods_"+ae.value.goods_id]["sku_"+ae.value.sku_id]&&(e=y(W.value["goods_"+ae.value.goods_id]["sku_"+ae.value.sku_id].num),l=y(W.value["goods_"+ae.value.goods_id]["sku_"+ae.value.sku_id].id)),W.value["goods_"+ae.value.goods_id]&&W.value["goods_"+ae.value.goods_id]&&(t=y(W.value["goods_"+ae.value.goods_id].totalNum)),e+=Number(B.value),t+=Number(B.value),ae.value.goods.is_limit){let e=`该商品单次限购${ae.value.goods.max_buy}件`;if(1!=ae.value.goods.limit_type&&(e=`该商品每人限购${ae.value.goods.max_buy}件`,ae.value.goods.max_buy-P.value&&(e+=`,已购${ae.value.goods.max_buy-P.value}件`)),t>P.value)return g({title:e,icon:"none"}),!1}Z.increase({id:l||"",goods_id:ae.value.goods_id,sku_id:ae.value.sku_id,stock:ae.value.stock,sale_price:ae.value.sale_price,num:e},0,(()=>{g({title:"加入购物车成功",icon:"none"})}))}else if("buy_now"==M.value){var e={sku_id:ae.value.sku_id,num:B.value};uni.setStorage({key:"orderCreateData",data:{sku_data:[e],extend_data:{relate_id:"",activity_type:ae.value.type}},success:()=>{b({url:"/addon/shop/pages/order/payment"})}})}ee()}};return I({open:(e="",t="")=>{M.value=e,E.value=!0,N.value=t}}),(e,t)=>{const l=j,a=F(C("u--image"),q),f=O,g=S,h=V,y=F(C("u-number-box"),ce),b=T,I=D,L=F(C("u-popup"),te),z=F(C("u-overlay"),le);return s(),o(f,{onTouchmove:t[4]||(t[4]=d((()=>{}),["prevent","stop"]))},{default:r((()=>[u(z,{show:E.value,onClick:ee,zIndex:"490"},{default:r((()=>[u(L,{class:"popup-type",show:E.value,onClose:ee,mode:"bottom",overlay:!1,zIndex:"500"},{default:r((()=>[i(ae).detail?(s(),o(f,{key:0,class:"py-[32rpx] relative",onTouchmove:t[3]||(t[3]=d((()=>{}),["prevent","stop"]))},{default:r((()=>[u(f,{class:c(["flex px-[32rpx]",{"mb-[58rpx]":!(i(ae).is_newcomer&&i(ae).newcomer_price!=i(ae).price&&(Object.keys(i(Q)).length?parseInt(i(Q).num)+B.value:B.value)>1)}])},{default:r((()=>[u(f,{class:"rounded-[var(--goods-rounded-big)] overflow-hidden w-[180rpx] h-[180rpx]"},{default:r((()=>[u(a,{width:"180rpx",height:"180rpx",src:i(k)(i(ae).detail.sku_image),onClick:t[0]||(t[0]=e=>(e=>{if(""===e)return!1;var t=[];t.push(k(e)),w({indicator:"number",loop:!0,urls:t})})(i(ae).detail.sku_image)),model:"aspectFill"},{error:r((()=>[u(l,{class:"w-[180rpx] h-[180rpx]",src:i(k)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:1},8,["src"])])),_:1}),u(f,{class:"flex flex-1 flex-col justify-between ml-[24rpx] py-[10rpx]"},{default:r((()=>[u(f,{class:"w-[100%]"},{default:r((()=>[u(f,{class:"text-[var(--price-text-color)] flex items-baseline"},{default:r((()=>[u(g,{class:"text-[32rpx] font-bold price-font"},{default:r((()=>[n("￥")])),_:1}),u(g,{class:"text-[48rpx] price-font"},{default:r((()=>[n(p(parseFloat(i(H)).toFixed(2).split(".")[0]),1)])),_:1}),u(g,{class:"text-[32rpx] mr-[6rpx] price-font"},{default:r((()=>[n("."+p(parseFloat(i(H)).toFixed(2).split(".")[1]),1)])),_:1}),"newcomer_price"==J()?(s(),o(l,{key:0,class:"h-[24rpx] ml-[6rpx] max-w-[60rpx]",src:i(k)("addon/shop/newcomer.png"),mode:"heightFix"},null,8,["src"])):x("v-if",!0),"member_price"==J()?(s(),o(l,{key:1,class:"h-[24rpx] ml-[6rpx] max-w-[44rpx]",src:i(k)("addon/shop/VIP.png"),mode:"heightFix"},null,8,["src"])):x("v-if",!0),"discount_price"==J()?(s(),o(l,{key:2,class:"h-[24rpx] ml-[6rpx] max-w-[72rpx]",src:i(k)("addon/shop/discount.png"),mode:"heightFix"},null,8,["src"])):x("v-if",!0)])),_:1}),u(f,{class:"text-[26rpx] leading-[32rpx] text-[var(--text-color-light6)] mt-[12rpx]"},{default:r((()=>[n("库存"+p(i(ae).detail.stock)+p(i(ae).goods.unit),1)])),_:1})])),_:1}),i(ae).goodsSpec&&i(ae).goodsSpec.length?(s(),o(f,{key:0,class:"text-[26rpx] leading-[30rpx] text-[var(--text-color-light6)] w-[100%] max-h-[60rpx] multi-hidden"},{default:r((()=>[n("已选规格："+p(i(ae).detail.sku_spec_format),1)])),_:1})):x("v-if",!0),x(' \t\t\t\t\t\t<view v-if="goodsDetail.goodsSpec && goodsDetail.goodsSpec.length">\r\n\t\t\t\t\t\t\t\t<text>已选规格：{{goodsDetail.detail.sku_spec_format}}</text>\r\n\t\t\t\t\t\t\t</view> ')])),_:1})])),_:1},8,["class"]),i(ae).is_newcomer&&i(ae).newcomer_price!=i(ae).price&&(Object.keys(i(Q)).length?parseInt(i(Q).num)+B.value:B.value)>1?(s(),o(f,{key:0,class:"flex items-center px-[32rpx] pt-[8rpx] pb-[16rpx] h-[58rpx] box-border"},{default:r((()=>[u(l,{class:"h-[24rpx] w-[56rpx]",src:i(k)("addon/shop/newcomer.png"),mode:"aspectFit"},null,8,["src"]),u(f,{class:"text-[24rpx] text-[#FFB000] leading-[34rpx] ml-[8rpx]"},{default:r((()=>[n("第1"+p(i(ae).goods.unit)+"，￥"+p(parseFloat(i(ae).newcomer_price).toFixed(2))+"/"+p(i(ae).goods.unit)+"；第"+p(parseInt(i(Q).num||0)+B.value>2?"2~"+(parseInt(i(Q).num||0)+B.value):"2")+p(i(ae).goods.unit)+"，￥"+p(parseFloat(parseFloat(i(H))).toFixed(2))+"/"+p(i(ae).goods.unit),1)])),_:1})])),_:1})):x("v-if",!0),u(b,{class:"h-[500rpx] px-[32rpx] box-border mb-[60rpx]","scroll-y":"true"},{default:r((()=>[(s(!0),v(_,null,m(i(ae).goodsSpec,((e,t)=>(s(),o(f,{class:c({"mt-[20rpx]":0!=t}),key:t},{default:r((()=>[u(f,{class:"text-[28rpx] leading-[36rpx] mb-[24rpx]"},{default:r((()=>[n(p(e.spec_name),1)])),_:2},1024),u(f,{class:"flex flex-wrap"},{default:r((()=>[(s(!0),v(_,null,m(e.values,((e,l)=>(s(),o(f,{class:c(["box-border bg-[var(--temp-bg)] text-[24rpx] px-[44rpx] text-center h-[56rpx] flex-center mr-[20rpx] mb-[20rpx] border-1 border-solid rounded-[50rpx] border-[var(--temp-bg)]",{"!border-[var(--primary-color)] text-[var(--primary-color)] !bg-[var(--primary-color-light)]":e.selected}]),key:l,onClick:l=>((e,t)=>{A.value.name[t]=e.name,se()})(e,t)},{default:r((()=>[n(p(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:2},1024)])),_:2},1032,["class"])))),128)),u(f,{class:"flex justify-between items-center mt-[20rpx]"},{default:r((()=>[u(f,{class:"text-[28rpx]"},{default:r((()=>[n("购买数量")])),_:1}),R.value>0&&U.value>1?(s(),o(g,{key:0,class:"ml-[20rpx] mr-[auto] text-[24rpx] text-[var(--primary-color)]"},{default:r((()=>[n(" ("+p(U.value)+p(i(ae).goods.unit)+"起售，限购"+p(R.value)+p(i(ae).goods.unit)+") ",1)])),_:1})):R.value>0?(s(),o(g,{key:1,class:"ml-[20rpx] mr-[auto] text-[24rpx] text-[var(--primary-color)]"},{default:r((()=>[n("(限购"+p(R.value)+p(i(ae).goods.unit)+")",1)])),_:1})):U.value>1?(s(),o(g,{key:2,class:"ml-[20rpx] mr-[auto] text-[24rpx] text-[var(--primary-color)]"},{default:r((()=>[n("("+p(U.value)+p(i(ae).goods.unit)+"起售)",1)])),_:1})):x("v-if",!0),u(y,{min:$.value,max:P.value,integer:"",step:1,"input-width":"68rpx",modelValue:B.value,"onUpdate:modelValue":t[2]||(t[2]=e=>B.value=e),"input-height":"52rpx"},{minus:r((()=>[u(f,{class:"relative w-[30rpx] h-[30rpx]",onClick:re},{default:r((()=>[u(g,{class:c(["text-[30rpx] nc-iconfont nc-icon-jianV6xx font-500 absolute flex items-center justify-center -left-[8rpx] -bottom-[8rpx] -right-[8rpx] -top-[8rpx]",{"!text-[var(--text-color-light9)]":B.value<=$.value}])},null,8,["class"])])),_:1})])),input:r((()=>[u(h,{class:"text-[#303133] text-[28rpx] mx-[10rpx] w-[80rpx] h-[44rpx] bg-[var(--temp-bg)] leading-[44rpx] text-center rounded-[6rpx]",type:"number",onInput:X,onBlur:Y,modelValue:B.value,"onUpdate:modelValue":t[1]||(t[1]=e=>B.value=e)},null,8,["modelValue"])])),plus:r((()=>[u(f,{class:"relative w-[30rpx] h-[30rpx]",onClick:oe},{default:r((()=>[u(g,{class:c(["text-[30rpx] nc-iconfont nc-icon-jiahaoV6xx font-500 absolute flex items-center justify-center -left-[8rpx] -bottom-[8rpx] -right-[8rpx] -top-[8rpx]",{"!text-[var(--text-color-light9)]":B.value>=P.value}])},null,8,["class"])])),_:1})])),_:1},8,["min","max","modelValue"])])),_:1})])),_:1}),u(f,{class:"px-[20rpx]"},{default:r((()=>[i(ae).detail.stock>0?(s(),o(I,{key:0,"hover-class":"none",class:"!h-[80rpx] leading-[80rpx] text-[26rpx] font-500 rounded-[50rpx] primary-btn-bg",type:"primary",onClick:ie},{default:r((()=>[n("确定")])),_:1})):(s(),o(I,{key:1,"hover-class":"none",class:"!h-[80rpx] leading-[80rpx] text-[26rpx] font-500 text-[#fff] bg-[#ccc] rounded-[50rpx]"},{default:r((()=>[n("已售罄")])),_:1}))])),_:1})])),_:1})):x("v-if",!0)])),_:1},8,["show"])])),_:1},8,["show"]),x(" 强制绑定手机号 "),u(pe,{ref_key:"bindMobileRef",ref:ue},null,512)])),_:1})}}}),[["__scopeId","data-v-d04e79d2"]]),ge=ve(e({__name:"detail",setup(e){const y=_e(),V=t({}),le=e=>{V.value=e},{setShare:ce}=I(),pe=a(),xe=l((()=>pe.info)),ve=ne();l((()=>ve.totalNum));const ge=t(null),he=t({}),ye=t("img"),be=t(!1),ke=t(!1),we=t(!1),je=t(!1),Fe=t(!1),Ce=t(0),Oe=t(""),Se=t(""),Ve=t("");t(null);const Te=t(null);let De={};L((e=>{De=e})),z((()=>{Ie(),uni.removeStorageSync("distributionType"),ve.getList()}));const Ie=()=>{se({goods_id:De.goods_id||"",sku_id:De.sku_id||"",type:De.type||""}).then((e=>{if(!e.data.goods||"[]"===JSON.stringify(e.data)){return E({url:"/addon/shop/pages/index",title:"找不到该商品",mode:"reLaunch"}),!1}he.value=N(e.data),Be.value=he.value.goods.is_collect,he.value.delivery_type_list=he.value.goods.delivery_type_list?Object.values(he.value.goods.delivery_type_list):[],he.value.goods.goods_image=he.value.goods.goods_image_thumb_big,he.value.goods.goods_image.forEach(((e,t)=>{he.value.goods.goods_image[t]=k(e)}));let t=N(e.data);if(he.value.goods.attr_format=[],t.goods&&t.goods.attr_format){N(JSON.parse(t.goods.attr_format)).forEach(((e,t)=>{(e.attr_child_value_name&&!(e.attr_child_value_name instanceof Array)||e.attr_child_value_name instanceof Array&&e.attr_child_value_name.length)&&he.value.goods.attr_format.push(e)}))}""!=he.value.goods.goods_video&&(Te.value=A("goodsVideo")),Oe.value=he.value.goods.goods_name,Se.value="/addon/shop/pages/goods/detail?sku_id="+he.value.sku_id,he.value.type&&(Se.value+="&type="+he.value.type),Ve.value=k(he.value.goods.goods_cover_thumb_mid);let l={title:he.value.goods.goods_name,desc:he.value.goods.sub_title,url:he.value.goods.goods_cover_thumb_mid};if(M({title:he.value.goods.goods_name}),ce({wechat:{...l},weapp:{...l}}),Object.keys(he.value.goods).length&&"discount"==he.value.type&&he.value.goods.is_discount&&Object.keys(he.value.discount_info).length){let e=(new Date).getTime();Ce.value=1e3*he.value.discount_info.active.end_time-e.toFixed(0)}ze(he.value),Re(),He(),ot(),B((()=>{setTimeout((()=>{const e=J().in(Xe);e.select(".swiper-box").boundingClientRect((e=>{Ye=e?e.height:0})).exec(),e.select(".detail-head").boundingClientRect((e=>{e&&(qe=e.height?e.height:0)})).exec()}),400)}))}))},Le=t(-1),ze=(e={})=>{if(e.goods.is_limit&&e.goods.max_buy){let t=0;if(1==e.goods.limit_type)t=e.goods.max_buy;else{let l=e.goods.max_buy-(e.goods.has_buy||0);t=l>0?l:0}t>e.goods.stock?Le.value=e.goods.stock:t<=e.goods.stock&&(Le.value=t)}},Ee=e=>{he.value.skuList.forEach(((t,l)=>{t.sku_id==e&&Object.assign(he.value,t)}))},Ne=l((()=>{let e=!1;return he.value.skuList.forEach(((t,l)=>{t.sku_spec_format&&(e=!0)})),!(!e&&he.value.stock<=0)&&(!e&&he.value.stock,!0)})),Ae=l((()=>{let e=!1;return(he.value.service&&he.value.service.length||he.value.goodsSpec&&he.value.goodsSpec.length||"real"==he.value.goods.goods_type&&he.value.delivery_type_list&&he.value.delivery_type_list.length||$e.value.length)&&(e=!0),e})),Me=e=>{ge.value.open(e)},Be=t(0),Pe=()=>{if(!xe.value)return g({title:"未登录，请先登录后再收藏商品",icon:"none"}),!1;(Be.value?re(he.value.goods_id):ue(he.value.goods_id)).then((e=>{Be.value=!Be.value,Be.value?g({title:"收藏成功",icon:"none"}):g({title:"取消收藏",icon:"none"})}))},$e=t([]),Re=()=>{ie({category_id:he.value.goods.goods_category||"",goods_id:he.value.goods_id||""}).then((e=>{$e.value=e.data.data.map((e=>(-1!=e.sum_count&&e.receive_count===e.sum_count&&(e.btnType="collected"),xe.value&&e.is_receive&&e.limit_count===e.member_receive_count?e.btnType="using":e.btnType="collecting",e)))}))},Ue=t({count:0}),He=()=>{oe(he.value.goods_id).then((e=>{Ue.value=e.data}))},Je=(e,t)=>{if(Array.isArray(e)){if(!e.length)return!1;w({indicator:"number",current:t,loop:!0,urls:l=e})}else{if(""===e)return!1;var l;(l=[]).push(k(e)),w({indicator:"number",loop:!0,urls:l})}},Ge=t(0),Ke=()=>{je.value=!0};let Ze=P().platform;const Qe=l((()=>{let e="";return e+="height: 100rpx;",e+="padding-right: 30rpx;",e+="padding-left: 30rpx;",e+="font-size: 32rpx;","ios"===Ze?e+="font-weight: 500;":"android"===Ze&&(e+="font-size: 36rpx;"),e})),We=l((()=>{let e="";return e+="font-size: 26px;","font-size: 26px;"})),Xe=Z();let Ye=0,qe=0;const et=t(!1);$((e=>{if(0==Ye||0==qe)return;let t=Ye-qe-20;et.value=!1,e.scrollTop>=t&&(et.value=!0)}));const tt=e=>{"number"==typeof e&&Je(he.value.goods.goods_image,e)},lt=t(null),at=t("");let st={};const ot=()=>{at.value="?sku_id="+he.value.sku_id,he.value.type&&(at.value+="&type="+he.value.type),xe.value&&xe.value.member_id&&(at.value+="&mid="+xe.value.member_id)},rt=()=>{st.sku_id=he.value.sku_id,xe.value&&xe.value.member_id&&(st.member_id=xe.value.member_id),lt.value.openShare()},ut=t(""),it=l((()=>{let e="0.00";return Object.keys(he.value).length&&"newcomer_discount"==he.value.type&&he.value.is_newcomer&&he.value.newcomer_price!=he.value.price?(e=he.value.newcomer_price?he.value.newcomer_price:he.value.price,ut.value="newcomer_price"):Object.keys(he.value).length&&"discount"==he.value.type&&Object.keys(he.value.goods).length&&he.value.goods.is_discount&&he.value.sale_price!=he.value.price?(e=he.value.sale_price?he.value.sale_price:he.value.price,ut.value="discount_price"):Object.keys(he.value).length&&Object.keys(he.value.goods).length&&he.value.goods.member_discount&&f()&&he.value.member_price!=he.value.price?(e=he.value.member_price?he.value.member_price:he.value.price,ut.value="member_price"):(e=he.value.price,ut.value=""),e}));return R((()=>{U()})),(e,t)=>{const l=S,a=O,f=F(C("u-swiper"),Q),g=j,w=F(C("up-count-down"),W),I=F(C("u-avatar"),X),L=F(C("u-icon"),Y),z=F(C("u--image"),q),E=F(C("u-parse"),ee),N=D,A=T,M=F(C("u-popup"),te),B=F(C("loading-page"),ae);return s(),o(a,{style:H(e.themeColor())},{default:r((()=>[Object.keys(he.value).length?(s(),o(a,{key:0,class:"bg-[var(--page-bg-color)] min-h-[100vh] relative"},{default:r((()=>[x(" 自定义头部 "),u(a,{class:c(["flex items-center fixed left-0 right-0 z-10 bg-transparent detail-head",{"!bg-[#fff]":et.value}]),style:H(i(Qe))},{default:r((()=>[u(l,{class:"nc-iconfont nc-icon-zuoV6xx",style:H(i(We)),onClick:t[0]||(t[0]=e=>{G().length>1?K({delta:1}):b({url:"/addon/shop/pages/index",mode:"reLaunch"})})},null,8,["style"]),u(a,{class:c(["ml-auto !pt-[12rpx] !pb-[8rpx] p-[10rpx] bg-[rgba(255,255,255,.4)] rounded-full border-[2rpx] border-solid border-transparent box-border nc-iconfont nc-icon-fenxiangV6xx font-bold text-[#303133] text-[36rpx]",{"border-[#d8d8d8]":et.value}]),onClick:rt},null,8,["class"])])),_:1},8,["class","style"]),u(a,{class:"w-full h-[100vw] relative overflow-hidden"},{default:r((()=>[u(a,{class:c(["absolute top-0 left-0 w-full h-full transition-transform duration-300 ease-linear transform",{"translate-x-0":"img"===ye.value,"translate-x-full":"img"!=ye.value}])},{default:r((()=>[u(f,{list:he.value.goods.goods_image,indicator:he.value.goods.goods_image.length,indicatorStyle:{bottom:"70rpx"},autoplay:"img"===ye.value,height:"100vw",radius:"0",onClick:tt},null,8,["list","indicator","autoplay"])])),_:1},8,["class"]),x(' <view class="media-mode absolute top-0 left-0 w-full h-full transition-transform duration-300 ease-linear transform"\r\n\t\t\t\t\t:class="{\'translate-x-0\':switchMedia === \'video\',\'-translate-x-full\':switchMedia != \'video\'}">\r\n\t\t\t\t\t<video id="goodsVideo" class="w-full h-full" :src="img(goodsDetail.goods.goods_video)" :poster="img(goodsDetail.goods.goods_cover_thumb_big)" objectFit="cover"></video>\r\n\t\t\t\t</view> '),x(" 切换视频、图片 "),x(" <view class=\"media-mode absolute bottom-[74rpx] w-full text-center leading-[50rpx] \" v-if=\"goodsDetail.goods.goods_video != ''\">\r\n\t\t\t\t    <text :class=\"{ '!bg-[var(--primary-color)]': switchMedia == 'video' }\" @click=\"switchMedia = 'video'\">视频</text>\r\n\t\t\t\t    <text :class=\"{ '!bg-[var(--primary-color)]': switchMedia == 'img' }\" @click=\"(switchMedia = 'img'), videoContext.pause()\">图片</text>\r\n\t\t\t\t</view> ")])),_:1}),""!=ut.value?(s(),o(a,{key:0,class:"rounded-t-[40rpx] -mt-[44rpx] relative flex items-center justify-between !bg-cover box-border pb-[26rpx] h-[136rpx] px-[30rpx]",style:H({background:"url("+i(k)("addon/shop/detail/discount_price_bg.png")+") no-repeat"})},{default:r((()=>[u(a,{class:"text-[#fff]"},{default:r((()=>["newcomer_price"==ut.value?(s(),o(l,{key:0,class:"text-[26rpx] mr-[10rpx] font-500 leading-[36rpx]"},{default:r((()=>[n("新人价")])),_:1})):"discount_price"==ut.value?(s(),o(l,{key:1,class:"text-[26rpx] mr-[10rpx] font-500 leading-[36rpx]"},{default:r((()=>[n("折扣价")])),_:1})):"member_price"==ut.value?(s(),o(l,{key:2,class:"text-[26rpx] mr-[10rpx] font-500 leading-[36rpx]"},{default:r((()=>[n("会员价")])),_:1})):x("v-if",!0),u(a,{class:"inline-block mr-[14rpx]"},{default:r((()=>[u(l,{class:"text-[32rpx] price-font mr-[4rpx]"},{default:r((()=>[n("￥")])),_:1}),u(l,{class:"text-[48rpx] -mb-[4rpx] price-font"},{default:r((()=>[n(p(parseFloat(i(it)).toFixed(2).split(".")[0]),1)])),_:1}),u(l,{class:"text-[32rpx] price-font"},{default:r((()=>[n("."+p(parseFloat(i(it)).toFixed(2).split(".")[1]),1)])),_:1})])),_:1}),u(a,{class:"inline-block"},{default:r((()=>[he.value.price?(s(),o(l,{key:0,class:"text-[26rpx] mr-[6rpx]"},{default:r((()=>[n("售价:")])),_:1})):x("v-if",!0),u(l,{class:"text-[26rpx] price-font leading-[36rpx]"},{default:r((()=>[n("￥"+p(he.value.price),1)])),_:1})])),_:1})])),_:1}),"discount_price"==ut.value?(s(),o(a,{key:0,class:"flex flex-col text-[#fff] items-end h-[59rpx] justify-between"},{default:r((()=>[u(g,{class:"h-[28rpx] w-[auto] mr-[2rpx]",src:i(k)("addon/shop/detail/discount_price.png"),mode:"heightFix"},null,8,["src"]),u(a,{class:"flex items-center text-[24rpx] -mb-[10rpx] overflow-hidden h-[28rpx]"},{default:r((()=>[u(l,{class:"mr-[4rpx] whitespace-nowrap"},{default:r((()=>[n("距结束")])),_:1}),u(w,{class:"text-[#fff] text-[28rpx]",time:Ce.value,format:"DD:HH:mm:ss",onChange:le},{default:r((()=>[u(a,{class:"flex"},{default:r((()=>[V.value.days>0?(s(),o(a,{key:0,class:"text-[24rpx] flex items-center"},{default:r((()=>[u(l,null,{default:r((()=>[n(p(V.value.days),1)])),_:1}),u(l,{class:"ml-[4rpx] text-[20rpx]"},{default:r((()=>[n("天")])),_:1})])),_:1})):x("v-if",!0),u(a,{class:"text-[24rpx] flex items-center"},{default:r((()=>[V.value.hours?(s(),o(l,{key:0,class:"min-w-[30rpx] text-center"},{default:r((()=>[n(p(V.value.hours>=10?V.value.hours:"0"+V.value.hours),1)])),_:1})):(s(),o(l,{key:1,class:"min-w-[30rpx] text-center"},{default:r((()=>[n("00")])),_:1})),u(l,{class:"text-[20rpx]"},{default:r((()=>[n("时")])),_:1})])),_:1}),u(a,{class:"text-[24rpx] flex items-center"},{default:r((()=>[u(l,{class:"min-w-[30rpx] text-center"},{default:r((()=>[n(p(V.value.minutes>=10?V.value.minutes:"0"+V.value.minutes),1)])),_:1}),u(l,{class:"text-[20rpx]"},{default:r((()=>[n("分")])),_:1})])),_:1}),u(a,{class:"text-[24rpx] flex items-center"},{default:r((()=>[u(l,{class:"min-w-[30rpx] text-center"},{default:r((()=>[n(p(V.value.seconds<10?"0"+V.value.seconds:V.value.seconds),1)])),_:1}),u(l,{class:"text-[20rpx]"},{default:r((()=>[n("秒")])),_:1})])),_:1})])),_:1})])),_:1},8,["time"])])),_:1})])),_:1})):x("v-if",!0)])),_:1},8,["style"])):x("v-if",!0),u(a,{class:"bg-[var(--page-bg-color)] rounded-[40rpx] overflow-hidden -mt-[34rpx] relative"},{default:r((()=>[u(a,{class:c(["datail-title relative px-[30rpx]",{"pt-[40rpx]":""!=ut.value,"pt-[30rpx]":""==ut.value}])},{default:r((()=>[""===ut.value?(s(),o(a,{key:0,class:"text-[var(--price-text-color)] flex items-baseline mb-[12rpx]"},{default:r((()=>[u(a,{class:"inline-block goods-price-time"},{default:r((()=>[u(l,{class:"price-font text-[32rpx]"},{default:r((()=>[n("￥")])),_:1}),u(l,{class:"price-font text-[48rpx]"},{default:r((()=>[n(p(parseFloat(i(it)).toFixed(2).split(".")[0]),1)])),_:1}),u(l,{class:"price-font text-[32rpx] mr-[10rpx]"},{default:r((()=>[n("."+p(parseFloat(i(it)).toFixed(2).split(".")[1]),1)])),_:1})])),_:1}),x(' <text class="text-[26rpx] text-[var(--text-color-light9)] line-through price-font" v-if="goodsDetail.market_price && parseFloat(goodsDetail.market_price)">\r\n\t\t\t\t\t\t\t￥{{ goodsDetail.market_price }}\r\n\t\t\t\t\t\t</text> ')])),_:1})):x("v-if",!0),u(a,{class:"text-[#333] font-medium text-[30rpx] multi-hidden leading-[40rpx]"},{default:r((()=>[he.value.goods.goods_brand?(s(),o(a,{key:0,class:"brand-tag middle"},{default:r((()=>[n(p(he.value.goods.goods_brand.brand_name),1)])),_:1})):x("v-if",!0),n(" "+p(he.value.goods.goods_name),1)])),_:1}),u(a,{class:"flex justify-between items-start mt-[24rpx]"},{default:r((()=>[he.value.market_price&&parseFloat(he.value.market_price)?(s(),o(a,{key:0,class:"text-[24rpx] leading-[34rpx] text-[var(--text-color-light6)]"},{default:r((()=>[u(l,{class:"whitespace-nowrap mr-[4rpx]"},{default:r((()=>[n("划线价:")])),_:1}),u(l,{class:"line-through"},{default:r((()=>[n("￥"+p(he.value.market_price),1)])),_:1})])),_:1})):x("v-if",!0),he.value.stock&&parseFloat(he.value.stock)?(s(),o(a,{key:1,class:"text-[24rpx] leading-[34rpx] text-[var(--text-color-light6)]"},{default:r((()=>[u(l,{class:"whitespace-nowrap mr-[4rpx]"},{default:r((()=>[n("库存:")])),_:1}),u(l,{class:""},{default:r((()=>[n(p(he.value.stock),1)])),_:1}),u(l,{class:""},{default:r((()=>[n(p(he.value.goods.unit),1)])),_:1})])),_:1})):x("v-if",!0),u(a,{class:"text-[24rpx] leading-[34rpx] text-[var(--text-color-light6)] flex items-baseline"},{default:r((()=>[u(l,{class:"whitespace-nowrap mr-[4rpx]"},{default:r((()=>[n("销量:")])),_:1}),u(l,{class:"mx-[2rpx]"},{default:r((()=>[n(p(he.value.goods.sale_num),1)])),_:1}),u(l,{class:""},{default:r((()=>[n(p(he.value.goods.unit),1)])),_:1})])),_:1})])),_:1}),he.value.label_info&&he.value.label_info.length?(s(),o(a,{key:1,class:"flex flex-wrap mt-[16rpx]"},{default:r((()=>[(s(!0),v(_,null,m(he.value.label_info,(e=>(s(),v(_,{key:e.label_id},["icon"==e.style_type&&e.icon?(s(),o(g,{key:0,class:"img-tag middle",src:i(k)(e.icon),mode:"heightFix",onError:t=>i(y).error(e,"icon")},null,8,["src","onError"])):"diy"!=e.style_type&&e.icon?x("v-if",!0):(s(),o(a,{key:1,class:"base-tag middle",style:H(i(y).baseTagStyle(e))},{default:r((()=>[n(p(e.label_name),1)])),_:2},1032,["style"]))],64)))),128))])),_:1})):x("v-if",!0)])),_:1},8,["class"]),i(Ae)?(s(),o(a,{key:0,class:"mt-[24rpx] sidebar-margin card-template"},{default:r((()=>[he.value.service&&he.value.service.length?(s(),o(a,{key:0,onClick:t[1]||(t[1]=e=>we.value=!we.value),class:"card-template-item"},{default:r((()=>[u(l,{class:"text-[#333] text-[26rpx] leading-[30rpx] font-400 shrink-0"},{default:r((()=>[n("服务")])),_:1}),u(a,{class:"text-[#343434] text-[26rpx] leading-[30rpx] font-400 truncate ml-auto"},{default:r((()=>[n(p(he.value.service[0].service_name),1)])),_:1}),u(l,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light6)] ml-[8rpx]"})])),_:1})):x("v-if",!0),he.value.goodsSpec&&he.value.goodsSpec.length?(s(),o(a,{key:1,onClick:Me,class:"card-template-item"},{default:r((()=>[u(l,{class:"text-[#333] text-[26rpx] leading-[30rpx] font-400 shrink-0 mr-[20rpx]"},{default:r((()=>[n("已选")])),_:1}),u(a,{class:"ml-auto text-right truncate flex-1 text-[#343434] text-[26rpx] leading-[30rpx] font-400"},{default:r((()=>[n(p(he.value.sku_spec_format),1)])),_:1}),u(l,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light6)] ml-[8rpx]"})])),_:1})):x("v-if",!0),"real"==he.value.goods.goods_type&&he.value.delivery_type_list&&he.value.delivery_type_list.length?(s(),o(a,{key:2,class:"card-template-item",onClick:Ke},{default:r((()=>[u(l,{class:"text-[#333] text-[26rpx] leading-[30rpx] font-400 shrink-0"},{default:r((()=>[n("配送")])),_:1}),u(a,{class:"ml-auto flex items-center text-[#343434] text-[26rpx] leading-[30rpx] font-400"},{default:r((()=>[n(p(he.value.delivery_type_list[Ge.value].name),1)])),_:1}),u(l,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light6)] ml-[8rpx]"})])),_:1})):x("v-if",!0),$e.value.length?(s(),o(a,{key:3,onClick:t[2]||(t[2]=e=>Fe.value=!0),class:"card-template-item"},{default:r((()=>[u(l,{class:"text-[#333] text-[26rpx] leading-[30rpx] font-400 shrink-0 mr-[20rpx]"},{default:r((()=>[n("领券")])),_:1}),u(a,{class:"ml-auto flex-1 flex-nowrap flex items-center overflow-hidden h-[44rpx] content-between"},{default:r((()=>[(s(!0),v(_,null,m($e.value,((e,t)=>(s(),v(_,{key:t},[t<3?(s(),o(l,{key:0,class:c(["tag-item whitespace-nowrap border-[2rpx] px-[6rpx] h-[40rpx] border-solid border-[var(--primary-color)] text-[var(--primary-color)] mt-[4rpx]",{"mr-[12rpx]":$e.value.length!=t+1&&t<2,"ml-auto":0==t}])},{default:r((()=>[n(p(e.title),1)])),_:2},1032,["class"])):x("v-if",!0)],64)))),128))])),_:1}),u(l,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light6)] ml-[8rpx]"})])),_:1})):x("v-if",!0)])),_:1})):x("v-if",!0),he.value.evaluate_is_show?(s(),o(a,{key:1,class:"mt-[var(--top-m)] sidebar-margin card-template"},{default:r((()=>[u(a,{class:c(["flex items-center justify-between min-h-[40rpx]",{"mb-[30rpx]":Ue.value&&Ue.value.list&&Ue.value.list.length}])},{default:r((()=>[u(l,{class:"title !mb-[0]"},{default:r((()=>[n("宝贝评价("+p(Ue.value.count)+")",1)])),_:1}),Ue.value.count?(s(),o(a,{key:0,class:"h-[40rpx] flex items-center",onClick:t[3]||(t[3]=e=>(he.value.goods_id,void b({url:"/addon/shop/pages/evaluate/list",param:{goods_id:he.value.goods_id}})))},{default:r((()=>[u(l,{class:"text-[24rpx] text-[var(--text-color-light9)]"},{default:r((()=>[n("查看全部")])),_:1}),u(l,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light9)]"})])),_:1})):x("v-if",!0),Ue.value.count?x("v-if",!0):(s(),o(l,{key:1,class:"text-[24rpx] text-[var(--text-color-light6)]"},{default:r((()=>[n("暂无评价")])),_:1}))])),_:1},8,["class"]),u(a,null,{default:r((()=>[(s(!0),v(_,null,m(Ue.value.list,((e,t)=>(s(),o(a,{class:c({"pb-[34rpx]":t!=Ue.value.list.length-1}),key:t},{default:r((()=>[u(a,{class:"flex items-center w-full"},{default:r((()=>[u(I,{"default-url":i(k)("static/resource/images/default_headimg.png"),src:i(k)(e.member_head),size:"50rpx",leftIcon:"none"},null,8,["default-url","src"]),u(l,{class:"ml-[10rpx] text-[28rpx] text-[#333]"},{default:r((()=>[n(p(e.member_name),1)])),_:2},1024)])),_:2},1024),u(a,{class:"flex justify-between w-full mt-[16rpx]"},{default:r((()=>[u(a,{class:"flex-1 w-[540rpx] text-[26rpx] text-[#333] max-h-[72rpx] leading-[36rpx] multi-hidden mr-[50rpx]"},{default:r((()=>[n(p(e.content),1)])),_:2},1024),u(a,{class:"w-[80rpx] shrink-0"},{default:r((()=>[e.image_mid&&e.image_mid.length?(s(),o(z,{key:0,width:"80rpx",height:"80rpx",radius:"var(--goods-rounded-mid)",src:i(k)(e.image_mid[0]),model:"aspectFill",onClick:t=>Je(e.images[0])},{error:r((()=>[u(L,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src","onClick"])):x("v-if",!0)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class"])))),128))])),_:1})])),_:1})):x("v-if",!0),he.value.goods&&he.value.goods.attr_format&&Object.keys(he.value.goods.attr_format).length?(s(),o(a,{key:2,class:"my-[var(--top-m)] goods-sku sidebar-margin card-template"},{default:r((()=>[u(a,{class:"title mb-[30rpx]"},{default:r((()=>[n("商品属性")])),_:1}),u(a,null,{default:r((()=>[(s(!0),v(_,null,m(he.value.goods.attr_format,((e,t)=>(s(),v(_,{key:t},[t<4||be.value?(s(),o(a,{key:0,class:"card-template-item"},{default:r((()=>[u(l,{class:"text-[26rpx] leading-[30rpx] w-[160rpx] font-400 shrink-0 text-[var(--text-color-light9)]"},{default:r((()=>[n(p(e.attr_value_name),1)])),_:2},1024),u(a,{class:"text-[#333] box-border value-wid text-[26rpx] leading-[30rpx] font-400 truncate pl-[20rpx]"},{default:r((()=>[n(p(Array.isArray(e.attr_child_value_name)?e.attr_child_value_name.join(","):e.attr_child_value_name),1)])),_:2},1024),x(' <text class="nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light6)] ml-[8rpx]"></text> ')])),_:2},1024)):x("v-if",!0)],64)))),128)),he.value.goods.attr_format.length>4?(s(),o(a,{key:0,class:"flex-center",onClick:t[4]||(t[4]=e=>be.value=!be.value)},{default:r((()=>[u(l,{class:"text-[24rpx] mr-[10rpx]"},{default:r((()=>[n(p(be.value?"收起":"展开"),1)])),_:1}),u(l,{class:c(["nc-iconfont !text-[22rpx]",{"nc-icon-xiaV6xx":!be.value,"nc-icon-shangV6xx-1":be.value}])},null,8,["class"])])),_:1})):x("v-if",!0)])),_:1})])),_:1})):x("v-if",!0),u(a,{class:"my-[var(--top-m)] sidebar-margin card-template px-[var(--pad-sidebar-m)]"},{default:r((()=>[u(a,{class:"title"},{default:r((()=>[n("商品详情")])),_:1}),u(a,{class:"u-content"},{default:r((()=>[u(E,{content:he.value.goods.goods_desc,tagStyle:{img:"vertical-align: top;",p:"overflow: hidden;word-break:break-word;"}},null,8,["content"])])),_:1})])),_:1}),u(a,{class:"tab-bar-placeholder"}),u(a,{class:"border-[0] border-t-[2rpx] border-solid border-[#f5f5f5] w-[100%] flex justify-between pl-[32rpx] pr-[4rpx] bg-[#fff] box-border fixed left-0 bottom-0 tab-bar z-1 items-center"},{default:r((()=>[u(a,{class:"flex items-center"},{default:r((()=>[u(a,{class:"flex flex-col justify-center items-center mr-[38rpx]",onClick:t[5]||(t[5]=e=>i(b)({url:"/addon/shop/pages/index",mode:"reLaunch"}))},{default:r((()=>[u(a,{class:"nc-iconfont nc-icon-shouyeV6xx11 text-[36rpx]"}),u(l,{class:"text-[20rpx] mt-[10rpx]"},{default:r((()=>[n("首页")])),_:1})])),_:1}),u(a,{class:"flex flex-col justify-center items-center mr-[38rpx]",onClick:t[6]||(t[6]=e=>i(b)({url:"/addon/shop/pages/goods/cart"}))},{default:r((()=>[u(a,{class:"iconfont icongouwuche2 text-[38rpx]"}),u(l,{class:"text-[20rpx] mt-[10rpx]"},{default:r((()=>[n("购物车")])),_:1})])),_:1}),u(a,{class:"flex flex-col justify-center items-center mr-[38rpx]",onClick:Pe},{default:r((()=>[u(l,{class:c(["nc-iconfont text-[36rpx]",{"text-[#ff0000] nc-icon-xihuanV6mm":Be.value,"text-[#303133] nc-icon-guanzhuV6xx":!Be.value}])},null,8,["class"]),u(l,{class:"text-[20rpx] mt-[10rpx]"},{default:r((()=>[n("收藏")])),_:1})])),_:1})])),_:1}),1==he.value.goods.status?(s(),o(a,{key:0,class:"flex flex-1"},{default:r((()=>[Le.value>0||-1==Le.value?(s(),v(_,{key:0},[""==he.value.type&&("real"==he.value.goods.goods_type||"virtual"==he.value.goods.goods_type&&"verify"!=he.value.goods.virtual_receive_type)?(s(),o(N,{key:0,class:"flex-1 !h-[70rpx] font-500 text-[26rpx] !text-[#fff] !m-0 !mr-[16rpx] leading-[70rpx] rounded-full remove-border",style:{background:"linear-gradient(127deg, #FFB000 0%, #FFA029 100%)"},onClick:t[7]||(t[7]=e=>Me("join_cart"))},{default:r((()=>[n(" 加入购物车")])),_:1})):x("v-if",!0),i(Ne)?(s(),o(N,{key:1,style:H({width:"real"==he.value.goods.goods_type||"virtual"==he.value.goods.goods_type&&"verify"!=he.value.goods.virtual_receive_type?"200rpx":"420rpx!important"}),class:"flex-1 !h-[70rpx] font-500 text-[26rpx] !text-[#fff] primary-btn-bg !m-0 !mr-[16rpx] leading-[70rpx] rounded-full remove-border",onClick:t[8]||(t[8]=e=>Me("buy_now"))},{default:r((()=>[n("立即购买")])),_:1},8,["style"])):(s(),o(N,{key:2,style:H({width:"real"==he.value.goods.goods_type||"virtual"==he.value.goods.goods_type&&"verify"!=he.value.goods.virtual_receive_type?"200rpx":"420rpx!important"}),class:"flex-1 !h-[70rpx] font-500 text-[26rpx] !text-[#fff] !bg-[#ccc] !m-0 !mr-[16rpx] leading-[70rpx] rounded-full remove-border"},{default:r((()=>[n("已售罄")])),_:1},8,["style"]))],64)):i(Ne)&&0==Le.value?(s(),o(N,{key:1,style:{width:"420rpx!important"},class:"flex-1 !h-[70rpx] font-500 text-[26rpx] !text-[#fff] !bg-[#ccc] !m-0 leading-[70rpx] rounded-full remove-border"},{default:r((()=>[n("超出限购数量")])),_:1})):x("v-if",!0)])),_:1})):(s(),o(a,{key:1,class:"flex flex-1"},{default:r((()=>[u(N,{class:"w-[100%] !h-[70rpx] font-500 text-[26rpx] !text-[#fff] !bg-[#ccc] !m-0 leading-[70rpx] rounded-full remove-border"},{default:r((()=>[n("该商品已下架")])),_:1})])),_:1}))])),_:1})])),_:1}),x(" 服务 "),u(a,{onTouchmove:t[11]||(t[11]=d((()=>{}),["prevent","stop"]))},{default:r((()=>[u(M,{class:"popup-type",show:we.value,onClose:t[10]||(t[10]=e=>we.value=!1)},{default:r((()=>[u(a,{class:"min-h-[480rpx] popup-common",onTouchmove:t[9]||(t[9]=d((()=>{}),["prevent","stop"]))},{default:r((()=>[u(a,{class:"title"},{default:r((()=>[n("商品服务")])),_:1}),u(A,{class:"h-[520rpx]","scroll-y":"true"},{default:r((()=>[u(a,{class:"pl-[22rpx] pb-[28rpx] pr-[37rpx]"},{default:r((()=>[(s(!0),v(_,null,m(he.value.service,((e,t)=>(s(),o(a,{class:"flex mb-[28rpx]"},{default:r((()=>[u(g,{class:"mt-[4rpx] w-[32rpx] h-[32rpx] mr-[14rpx]",src:i(k)(e.image||"addon/shop/icon_service.png"),mode:"aspectFit"},null,8,["src"]),u(a,{class:"flex-1"},{default:r((()=>[u(a,{class:"text-[30rpx] leading-[36rpx] text-[#333] mb-[8rpx]"},{default:r((()=>[n(p(e.service_name),1)])),_:2},1024),u(a,{class:"text-[24rpx] leading-[36rpx] text-[var(--text-color-light9)]"},{default:r((()=>[n(p(e.desc),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256))])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1}),x(" 配送 "),u(a,{onTouchmove:t[14]||(t[14]=d((()=>{}),["prevent","stop"]))},{default:r((()=>[u(M,{class:"popup-type",show:je.value,onClose:t[13]||(t[13]=e=>je.value=!1)},{default:r((()=>[u(a,{class:"min-h-[360rpx] popup-common",onTouchmove:t[12]||(t[12]=d((()=>{}),["prevent","stop"]))},{default:r((()=>[u(a,{class:"title"},{default:r((()=>[n("配送方式")])),_:1}),u(A,{class:"h-[520rpx]","scroll-y":"true"},{default:r((()=>[u(a,{class:"px-[var(--popup-sidebar-m)]"},{default:r((()=>[(s(!0),v(_,null,m(he.value.delivery_type_list,((e,t)=>(s(),o(a,{class:"flex mb-[40rpx]",onClick:l=>((e,t)=>{Ge.value=t,je.value=!1,uni.setStorageSync("distributionType",e.name)})(e,t)},{default:r((()=>[u(g,{class:"mt-[4rpx] w-[32rpx] h-[32rpx] mr-[14rpx]",src:i(k)("addon/shop/icon_service.png"),mode:"aspectFit"},null,8,["src"]),u(a,{class:"flex-1"},{default:r((()=>[u(a,{class:"text-[30rpx] leading-[36rpx] text-[#333] mb-[8rpx]"},{default:r((()=>[n(p(e.name),1)])),_:2},1024),u(a,{class:"text-[24rpx] leading-[36rpx] text-[var(--text-color-light9)]"},{default:r((()=>[n(p(e.desc),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1}),x(" 优惠券 "),u(a,{onTouchmove:t[18]||(t[18]=d((()=>{}),["prevent","stop"]))},{default:r((()=>[u(M,{class:"popup-type",show:Fe.value,onClose:t[17]||(t[17]=e=>Fe.value=!1)},{default:r((()=>[u(a,{class:"min-h-[480rpx] popup-common",onTouchmove:t[16]||(t[16]=d((()=>{}),["prevent","stop"]))},{default:r((()=>[u(a,{class:"title"},{default:r((()=>[n("优惠券")])),_:1}),u(A,{class:"h-[520rpx]","scroll-y":"true"},{default:r((()=>[u(a,{class:"px-[32rpx]"},{default:r((()=>[(s(!0),v(_,null,m($e.value,((e,t)=>(s(),o(a,{class:"mb-[30rpx] flex items-center border-[2rpx] border-solid border-[rgba(0,0,0,.1)] rounded-[var(--rounded-small)]",key:t},{default:r((()=>[u(a,{class:"flex flex-col items-center my-[20rpx] w-[200rpx] border-0 border-r-[2rpx] border-dashed border-[rgba(0,0,0,.1)]"},{default:r((()=>[u(a,{class:"text-xs price-font"},{default:r((()=>[u(l,{class:"text-[28rpx]"},{default:r((()=>[n("￥")])),_:1}),u(l,{class:"text-[48rpx]"},{default:r((()=>[n(p(Number(e.price)),1)])),_:2},1024)])),_:2},1024),u(l,{class:"text-xs mt-[12rpx]"},{default:r((()=>[n(p(Number(e.min_condition_money)?"满"+Number(e.min_condition_money)+"元可用":"无门槛"),1)])),_:2},1024)])),_:2},1024),u(a,{class:"ml-[20rpx] flex-1 flex flex-col py-[20rpx]"},{default:r((()=>[u(l,{class:"text-xs font-500"},{default:r((()=>[n(p(e.title),1)])),_:2},1024),u(l,{class:"text-xs text-[var(--text-color-light6)] mt-[12rpx]"},{default:r((()=>[n(p(1==e.valid_type&&"领取之日起"+e.length+"天内有效"||2==e.valid_type&&"领取之日起至"+e.valid_end_time),1)])),_:2},1024)])),_:2},1024),"collecting"===e.btnType?(s(),o(l,{key:0,class:"bg-[var(--primary-color)] mr-[20rpx] w-[106rpx] box-border text-center text-[#fff] h-[50rpx] text-[22rpx] px-[20rpx] leading-[50rpx] rounded-[100rpx]",onClick:t=>((e,t)=>{if(!xe.value)return h().setLoginBack({url:"/addon/shop/pages/goods/detail",param:{sku_id:he.value.sku_id,type:he.value.type}}),!1;de({coupon_id:e.id||"",number:1}).then((e=>{Re()}))})(e)},{default:r((()=>[n("领取")])),_:2},1032,["onClick"])):(s(),o(l,{key:1,class:"!bg-[#FFB4B1] mr-[20rpx] text-[#fff] mr-[20rpx] h-[50rpx] text-[22rpx] px-[20rpx] leading-[50rpx] rounded-[100rpx]"},{default:r((()=>[n(p("collected"===e.btnType?"已领完":"已领取"),1)])),_:2},1024))])),_:2},1024)))),128))])),_:1})])),_:1}),u(a,{class:"btn-wrap"},{default:r((()=>[u(N,{class:"primary-btn-bg btn",onClick:t[15]||(t[15]=e=>Fe.value=!1)},{default:r((()=>[n("确定")])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1}),u(fe,{ref_key:"goodsSkuRef",ref:ge,"goods-detail":he.value,onChange:Ee},null,8,["goods-detail"]),u(me,{ref_key:"sharePosterRef",ref:lt,posterType:"shop_goods",posterId:he.value.goods.poster_id,posterParam:i(st),copyUrlParam:at.value},null,8,["posterId","posterParam","copyUrlParam"])])),_:1})):x("v-if",!0),u(B,{loading:ke.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-b99463de"]]);export{ge as default};
