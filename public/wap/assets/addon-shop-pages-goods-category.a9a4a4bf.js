import{d as e,r as t,q as l,o,c as r,w as a,u as s,b as i,H as c,aN as d,f as u,_ as n,E as p,F as x,G as f,a as _,a3 as g,g as v,h as m,C as h,i as b,a4 as k,x as y,y as w,V as C,m as F,W as j,I as S,ab as I,aK as V,l as N,e as E,v as z,n as A,a5 as L,a6 as B,B as O,X as R,N as D,j as M,a9 as T,s as U}from"./index-e6ce9fbf.js";import{_ as $}from"./u-icon.c5d9cd81.js";import{_ as P}from"./u--image.2a363e1d.js";import{_ as G}from"./tabbar.2cc8e58f.js";import{_ as H}from"./u-loading-page.76c2d95f.js";import{b as J,i as q,c as K,j as W}from"./goods.9785a1d4.js";import{M as X}from"./mescroll-empty.b423055b.js";import{_ as Y}from"./_plugin-vue_export-helper.1b428a4d.js";import{M as Q}from"./mescroll-body.dc3de07c.js";import{u as Z}from"./useMescroll.26ccf5de.js";import{_ as ee}from"./u-number-box.4270f2af.js";import{_ as te}from"./u-popup.b16d6e1d.js";import{u as le}from"./cart.3bd34579.js";import{c as oe}from"./cloneDeep.bf3082f0.js";import"./u-image.c9386d77.js";import"./u-transition.6919b33f.js";import"./u-badge.7d0ca9d8.js";import"./u-tabbar.2615c204.js";import"./u-safe-bottom.1ba5bfba.js";import"./u-loading-icon.39fd4711.js";import"./mescroll-uni-option.2f7b06f4.js";import"./mescroll-i18n.6025c811.js";/* empty css                                                                       */import"./isArrayLike.512b2e7f.js";const re=Y(e({__name:"category-template-two-one",props:{config:{type:Object,default:()=>({})},categoryId:{type:[String,Number],default:0}},setup(e){const F=e;let j=F.config,S=F.categoryId,I=t(""),V=t(!0);l((()=>{E()}));const N=t([]),E=()=>{V.value=!0,J().then((e=>{if(N.value=e.data,S)for(let t=0;t<N.value.length;t++){if(N.value[t].category_id==S){z.value=t;break}if(N.value[t].child_list)for(let e=0;e<N.value[t].child_list.length;e++)if(N.value[t].child_list[e].category_id==S){z.value=t;break}}V.value=!1})).catch((()=>{V.value=!1}))},z=t(0),A=()=>{I.value&&_({url:"/addon/shop/pages/goods/list",param:{goods_name:I.value}})};return(e,t)=>{const l=g,F=v(m("u-icon"),$),S=h,E=b,L=k,B=v(m("u--image"),P),O=v(m("tabbar"),G),R=v(m("u-loading-page"),H);return o(),r(E,{class:"bg-[#F4F6F8] min-h-screen"},{default:a((()=>[N.value.length?(o(),r(E,{key:0,class:"mescroll-box"},{default:a((()=>[s(j).search.control?(o(),r(E,{key:0,class:"search-box z-10 bg-[#fff] fixed top-0 left-0 right-0 h-[106rpx] box-border"},{default:a((()=>[i(l,{class:c(["search-ipt pl-[20rpx] text-[24rpx]",{"pr-[96rpx]":s(I),"pr-[60rpx]":!s(I)}]),type:"text",modelValue:s(I),"onUpdate:modelValue":t[0]||(t[0]=e=>d(I)?I.value=e:I=e),placeholder:s(j).search.title,onConfirm:A},null,8,["class","modelValue","placeholder"]),i(E,{class:"flex items-center h-[70rpx] absolute right-[48rpx] top-[18rpx] z-2"},{default:a((()=>[s(I)?(o(),r(F,{key:0,name:"close-circle-fill",color:"#A5A6A6",size:"28rpx",onClick:t[1]||(t[1]=e=>d(I)?I.value="":I="")})):u("v-if",!0),i(E,{class:"h-[70rpx] w-[40rpx] text-center leading-[70rpx]",onClick:n(A,["stop"])},{default:a((()=>[i(S,{class:"nc-iconfont nc-icon-sousuoV6xx text-[28rpx]"})])),_:1},8,["onClick"])])),_:1})])),_:1})):u("v-if",!0),i(E,{class:c(["tabs-box z-2 fixed left-0 bg-[#fff] bottom-[50px] top-0",{"!top-[106rpx]":s(j).search.control}])},{default:a((()=>[i(L,{"scroll-y":!0,class:"scroll-height"},{default:a((()=>[i(E,{class:"bg-[#F4F6F8]"},{default:a((()=>[(o(!0),p(f,null,x(N.value,((e,t)=>(o(),r(E,{class:c(["tab-item truncate",{"tab-item-active":t==z.value,"rounded-br-[12rpx]":z.value-1===t,"rounded-tr-[12rpx]":z.value+1===t}]),key:e.site_id,onClick:e=>((e,t)=>{z.value=e})(t)},{default:a((()=>[i(E,{class:"text-box px-[16rpx] truncate"},{default:a((()=>[y(w(e.category_name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1},8,["class"]),i(L,{class:"h-[100vh]","scroll-y":!0},{default:a((()=>[i(E,{class:c(["pl-[202rpx] scroll-ios pt-[20rpx] pr-[20rpx]",{"!pt-[126rpx]":s(j).search.control}])},{default:a((()=>{var e,t;return[(null==(e=N.value[z.value])?void 0:e.child_list)&&!s(V)?(o(),r(E,{key:0,class:"bg-[#fff] grid grid-cols-3 gap-x-[50rpx] gap-y-[32rpx] py-[33rpx] px-[23rpx] rounded-[16rpx]"},{default:a((()=>{var e;return[(o(!0),p(f,null,x(null==(e=N.value[z.value])?void 0:e.child_list,((e,t)=>(o(),r(E,{key:e.category_id,class:"",onClick:t=>{return l=e.category_id,void _({url:"/addon/shop/pages/goods/list",param:{curr_goods_category:l}});var l}},{default:a((()=>[i(B,{radius:"12rpx",width:"129rpx",height:"129rpx",src:s(C)(e.image?e.image:""),model:"aspectFill"},{error:a((()=>[i(F,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"]),i(E,{class:"text-[24rpx] text-center mt-[12rpx] leading-[34rpx]"},{default:a((()=>[y(w(e.category_name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))]})),_:1})):u("v-if",!0),(null==(t=N.value[z.value])?void 0:t.child_list)||s(V)?u("v-if",!0):(o(),r(E,{key:1,class:c(["flex justify-center w-[100%] bg-[#fff] rounded-[16rpx] flex items-center",{noData1:s(j).search.control,noData2:!s(j).search.control}])},{default:a((()=>[i(X,{option:{tip:"暂无商品分类"}})])),_:1},8,["class"]))]})),_:1},8,["class"])])),_:1})])),_:1})):u("v-if",!0),i(O),N.value.length||s(V)?u("v-if",!0):(o(),r(E,{key:1,class:"flex justify-center w-[100%] items-center justify-center h-[100vh] bg-[#fff]"},{default:a((()=>[i(X,{option:{tip:"暂无商品分类"}})])),_:1})),i(R,{"bg-color":"rgb(248,248,248)",loading:s(V),loadingText:"",fontSize:"16",color:"#303133"},null,8,["loading"])])),_:1})}}}),[["__scopeId","data-v-5d980d9f"]]),ae=e({__name:"add-cart-popup",setup(e,{expose:l}){const d=le(),_=F((()=>d.cartList));let g=t(!1),N=t({skuId:"",name:[]}),E=t({}),z=t({});const A=t(1),L=()=>{g.value=!1},B=F((()=>{let e=JSON.parse(JSON.stringify(E.value));return Object.keys(e).length&&(Object.keys(N.value.name).length||(N.value.name=e.sku_spec_format.split(",")),e.goodsSpec.forEach(((e,t)=>{let l=e.spec_values.split(",");e.values=[],l.forEach(((l,o)=>{e.values[o]={},e.values[o].name=l,e.values[o].selected=!1,e.values[o].disabled=!1,N.value.name.forEach(((r,a)=>{a==t&&r==l&&(e.values[o].selected=!0)}))}))})),O(),e.skuList&&Object.keys(e.skuList).length&&e.skuList.forEach((e=>{e.sku_id==N.value.skuId&&(z.value=e)}))),e}));j((()=>z.value),((e,t)=>{_.value["goods_"+z.value.goods_id]&&_.value["goods_"+z.value.goods_id]["sku_"+z.value.sku_id]?(A.value=V(_.value["goods_"+z.value.goods_id]["sku_"+z.value.sku_id].num),z.value.cart_id=V(_.value["goods_"+z.value.goods_id]["sku_"+z.value.sku_id].id)):(A.value=1,z.value.cart_id="")}));const O=()=>{E.value.skuList.forEach(((e,t)=>{let l=e.sku_spec_format.split(",");N.value.name.every((e=>l.includes(e)))&&(N.value.skuId=e.sku_id)}))},R=()=>{0==A.value?d.reduce({id:z.value.cart_id||"",goods_id:z.value.goods_id,sale_price:z.value.sale_price,sku_id:z.value.sku_id}):d.increase({id:z.value.cart_id||"",goods_id:z.value.goods_id,sku_id:z.value.sku_id,stock:z.value.stock,sale_price:z.value.sale_price,num:A.value},0,(()=>{S({title:"加入购物车成功",icon:"none"})})),g.value=!1};return l({open:e=>{(e=>{q(e).then((t=>{E.value=t.data,N.value.sku_id=e,E.value.skuList&&Object.keys(E.value.skuList).length&&E.value.skuList.forEach((t=>{t.sku_id==e&&(z.value=t,N.value.name=t.sku_spec_format.split(","))})),g.value=!0}))})(e)}}),(e,t)=>{const l=v(m("u-icon"),$),d=v(m("u--image"),P),F=b,j=h,S=v(m("u-number-box"),ee),V=k,E=I,O=v(m("u-popup"),te);return o(),r(F,{onTouchmove:t[3]||(t[3]=n((()=>{}),["prevent","stop"]))},{default:a((()=>[i(O,{show:s(g),onClose:L,mode:"bottom"},{default:a((()=>[Object.keys(s(B)).length?(o(),r(F,{key:0,onTouchmove:t[2]||(t[2]=n((()=>{}),["prevent","stop"])),class:"rounded-t-[20rpx] overflow-hidden bg-[#fff] p-[32rpx] relative"},{default:a((()=>[i(F,{class:"flex mb-[58rpx]"},{default:a((()=>[i(F,{class:"rounded-[8rpx] overflow-hidden"},{default:a((()=>[i(d,{width:"180rpx",height:"180rpx",src:s(C)(s(z).sku_image),model:"aspectFill"},{error:a((()=>[i(l,{name:"photo",color:"#999",size:"50"})])),_:1},8,["src"])])),_:1}),i(F,{class:"flex flex-1 flex-col ml-[20rpx] py-[10rpx]"},{default:a((()=>[i(F,{class:"w-[100%]"},{default:a((()=>[i(F,{class:"text-[var(--price-text-color)] flex items-baseline"},{default:a((()=>[i(j,{class:"text-[28rpx] font-bold price-font"},{default:a((()=>[y("￥")])),_:1}),i(j,{class:"text-[42rpx] font-bold price-font"},{default:a((()=>[y(w(parseFloat(s(z).sale_price).toFixed(2).split(".")[0]),1)])),_:1}),i(j,{class:"text-[28rpx] font-bold price-font"},{default:a((()=>[y("."+w(parseFloat(s(z).sale_price).toFixed(2).split(".")[1]),1)])),_:1})])),_:1}),i(F,{class:"text-[24rpx] leading-[32rpx] text-[#303133] mt-[12rpx]"},{default:a((()=>[y("库存"+w(s(z).stock)+w(s(B).goods.unit),1)])),_:1})])),_:1}),s(B).goodsSpec&&s(B).goodsSpec.length?(o(),r(F,{key:0,class:"w-[100%] mt-auto",style:{"max-height":"calc(204rpx - 126rpx)",overflow:"hidden"}},{default:a((()=>[i(j,{class:"text-[24rpx] leading-[30rpx] text-[#666]"},{default:a((()=>[y("已选规格："+w(s(z).sku_spec_format),1)])),_:1})])),_:1})):u("v-if",!0)])),_:1})])),_:1}),i(V,{class:"h-[500rpx] mb-[30rpx]","scroll-y":"true"},{default:a((()=>[(o(!0),p(f,null,x(s(B).goodsSpec,((e,t)=>(o(),r(F,{class:c({"mt-[36rpx]":0!=t}),key:t},{default:a((()=>[i(F,{class:"text-[26rpx] leading-[36rpx] mb-[24rpx]"},{default:a((()=>[y(w(e.spec_name),1)])),_:2},1024),i(F,{class:"flex flex-wrap"},{default:a((()=>[(o(!0),p(f,null,x(e.values,((e,l)=>(o(),r(F,{class:c(["box-border bg-[#f2f2f2] text-[24rpx] px-[44rpx] text-center h-[56rpx] leading-[56rpx] mr-[20rpx] mb-[20rpx] border-1 border-solid rounded-[50rpx] border-[#f2f2f2]",{"!border-[var(--primary-color)] text-[var(--primary-color)] !bg-[var(--primary-color-light)]":e.selected}]),key:l,onClick:l=>((e,t)=>{N.value.name[t]=e.name,A.value=1})(e,t)},{default:a((()=>[y(w(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:2},1024)])),_:2},1032,["class"])))),128)),i(F,{class:"flex justify-between items-center mt-[30rpx]"},{default:a((()=>[i(F,{class:"text-[26rpx]"},{default:a((()=>[y("购买数量")])),_:1}),s(_)["goods_"+s(z).goods_id]&&s(_)["goods_"+s(z).goods_id]["sku_"+s(z).sku_id]?(o(),r(S,{key:0,modelValue:A.value,"onUpdate:modelValue":t[0]||(t[0]=e=>A.value=e),min:0,max:s(z).stock,integer:"",step:1,"input-width":"98rpx","input-height":"54rpx"},{minus:a((()=>[i(j,{class:c(["text-[44rpx] nc-iconfont nc-icon-jianV6xx",{"!text-[#c8c9cc]":0===A.value}])},null,8,["class"])])),input:a((()=>[i(j,{class:"number-input text-[#303133] text-center bg-[#f2f2f2] w-[82rpx] fext-[23rpx] mx-[16rpx]"},{default:a((()=>[y(w(A.value),1)])),_:1})])),plus:a((()=>[i(j,{class:c(["text-[44rpx] nc-iconfont nc-icon-jiahaoV6xx",{"!text-[#c8c9cc]":A.value===s(z).stock}])},null,8,["class"])])),_:1},8,["modelValue","max"])):(o(),r(S,{key:1,modelValue:A.value,"onUpdate:modelValue":t[1]||(t[1]=e=>A.value=e),min:1,max:s(z).stock,integer:"",step:1,"input-width":"98rpx","input-height":"54rpx"},{minus:a((()=>[i(j,{class:c(["text-[44rpx] nc-iconfont nc-icon-jianV6xx",{"!text-[#c8c9cc]":1===A.value}])},null,8,["class"])])),input:a((()=>[i(j,{class:"number-input text-[#303133] text-center bg-[#f2f2f2] w-[82rpx] fext-[23rpx] mx-[16rpx]"},{default:a((()=>[y(w(A.value),1)])),_:1})])),plus:a((()=>[i(j,{class:c(["text-[44rpx] nc-iconfont nc-icon-jiahaoV6xx",{"!text-[#c8c9cc]":A.value===s(z).stock}])},null,8,["class"])])),_:1},8,["modelValue","max"]))])),_:1})])),_:1}),s(B).stock>0?(o(),r(E,{key:0,class:"!h-[72rpx] leading-[72rpx] text-[26rpx] rounded-[50rpx]",type:"primary",onClick:R},{default:a((()=>[y("确定")])),_:1})):(o(),r(E,{key:1,class:"!h-[72rpx] leading-[72rpx] text-[26rpx] text-[#fff] bg-[#ccc] rounded-[50rpx]"},{default:a((()=>[y("已售罄")])),_:1}))])),_:1})):u("v-if",!0)])),_:1},8,["show"])])),_:1})}}}),se=Y(e({__name:"category-template-one-one",props:{config:{type:Object,default:()=>({})},categoryId:{type:[String,Number],default:0}},setup(e){const j=e,V=le();V.getList();const M=F((()=>V.cartList)),T=F((()=>V.totalNum)),U=F((()=>V.totalMoney)),q=N(),W=F((()=>q.info)),{mescrollInit:Y,getMescroll:ee}=Z(B,L);let te=j.config,re=j.categoryId,se=t([]),ie=t(""),ce=t(!0),de=t(!1);t([]).value=uni.getStorageSync("shopCart")||[];const ue=e=>{de.value=!1,K({page:e.num,limit:e.size,keyword:"",goods_category:re,brand_id:"",label_ids:"",start_price:"",end_price:"",order:"price",sort:"desc"}).then((t=>{let l=t.data.data;1==e.num&&(se.value=[]),se.value=se.value.concat(l),ce.value=!1,e.endSuccess(l.length),se.value.length||(de.value=!0)})).catch((()=>{ce.value=!1,de.value=!0,e.endErr()}))},ne=e=>{_({url:"/addon/shop/pages/goods/detail",param:{goods_id:e}})};l((()=>{ve()}));const pe=t(""),xe=t(!1),fe=t(!1),_e=(e,t)=>{if(xe.value||fe.value)return!1;xe.value=!0,fe.value=!0;let l={goods_id:e.goodsSku.goods_id,sku_id:e.goodsSku.sku_id,sale_price:Fe(e),stock:e.goodsSku.stock};e.id&&(l.num=e.num,l.id=e.id),V.increase(l,1,(()=>{fe.value=!1}));const o=window.document.getElementById("animation-end"),r=o.getBoundingClientRect().left,a=o.getBoundingClientRect().top,s=window.document.getElementById(t),i=s.getBoundingClientRect().left,c=s.getBoundingClientRect().top;pe.value=`top: ${c}px; left: ${i}px;`,setTimeout((()=>{pe.value=`top: ${a}px; left: ${r}px; transition: all 0.8s; transform: rotate(-720deg);`}),20),setTimeout((()=>{pe.value="",xe.value=!1}),1020)},ge=t([]),ve=()=>{ce.value=!0,J().then((e=>{if(ge.value=e.data,re)for(let t=0;t<ge.value.length;t++){if(ge.value[t].category_id==re){me.value=t;break}if(ge.value[t].child_list)for(let e=0;e<ge.value[t].child_list.length;e++)if(ge.value[t].child_list[e].category_id==re){me.value=t;break}}else re=e.data[0].category_id;ce.value=!1})).catch((()=>{ce.value=!1}))},me=t(0),he=()=>{ie.value&&_({url:"/addon/shop/pages/goods/list",param:{goods_name:ie.value}})};let be=t();const ke=(e,t)=>{if("virtual"==e.goods_type&&"verify"==e.virtual_receive_type)return ne(e.goodsSku.goods_id);if("cart"!==te.cart.event)return ne(e.goodsSku.goods_id);if(!W.value)return O().setLoginBack({url:"/addon/shop/pages/goods/category"}),!1;if(e.goodsSku.sku_spec_format)be.value.open(e.goodsSku.sku_id);else{if(parseInt(e.goodsSku.num||0)>=parseInt(e.goodsSku.stock))return void S({title:"商品库存不足",icon:"none"});_e(e,t)}},ye=()=>{_({url:"/addon/shop/pages/goods/cart"})},we=()=>{if(!T.value)return void S({title:"还没有选择商品",icon:"none"});const e=[];Object.values(M.value).forEach((t=>{Object.keys(t).forEach((l=>{"totalNum"!=l&&"totalMoney"!=l&&e.push(t[l].id)}))})),uni.setStorage({key:"orderCreateData",data:{cart_ids:e},success(){_({url:"/addon/shop/pages/order/payment"})}})};let Ce=e=>{let t="";return t=e.is_discount?"discount_price":e.member_discount&&R()?"member_price":"",t},Fe=e=>{let t="0.00";return t=e.is_discount?e.goodsSku.sale_price?e.goodsSku.sale_price:e.goodsSku.price:e.member_discount&&R()&&e.goodsSku.member_price?e.goodsSku.member_price:e.goodsSku.price,t};return(e,t)=>{const l=g,_=v(m("u-icon"),$),F=h,j=b,N=k,L=v(m("u--image"),P),B=D,O=I,R=v(m("u-loading-page"),H),J=v(m("tabbar"),G);return o(),r(j,{class:"min-h-screen"},{default:a((()=>[ge.value.length?(o(),r(j,{key:0,class:c(["mescroll-box bg-[#F4F6F8]",{cart:s(te).cart.control&&"cart"===s(te).cart.event,detail:!(s(te).cart.control&&"cart"===s(te).cart.event)}])},{default:a((()=>[i(Q,{ref:"mescrollRef",down:{use:!1},onInit:s(Y),onUp:ue},{default:a((()=>[s(te).search.control?(o(),r(j,{key:0,class:"search-box z-10 bg-[#fff] fixed top-0 left-0 right-0 h-[106rpx] box-border"},{default:a((()=>[i(l,{class:c(["search-ipt pl-[20rpx] text-[24rpx]",{"pr-[96rpx]":s(ie),"pr-[60rpx]":!s(ie)}]),type:"text",modelValue:s(ie),"onUpdate:modelValue":t[0]||(t[0]=e=>d(ie)?ie.value=e:ie=e),placeholder:s(te).search.title,onConfirm:he},null,8,["class","modelValue","placeholder"]),i(j,{class:"flex items-center h-[70rpx] absolute right-[48rpx] top-[18rpx] z-2"},{default:a((()=>[s(ie)?(o(),r(_,{key:0,name:"close-circle-fill",color:"#A5A6A6",size:"28rpx",onClick:t[1]||(t[1]=e=>d(ie)?ie.value="":ie="")})):u("v-if",!0),i(j,{class:"h-[70rpx] w-[40rpx] text-center leading-[70rpx]",onClick:n(he,["stop"])},{default:a((()=>[i(F,{class:"nc-iconfont nc-icon-sousuoV6xx text-[28rpx]"})])),_:1},8,["onClick"])])),_:1})])),_:1})):u("v-if",!0),i(j,{class:c(["tabs-box z-2 fixed left-0 bg-[#fff] bottom-[50px] top-0",{"!top-[106rpx]":s(te).search.control,"pb-[98rpx]":s(te).cart.control&&"cart"===s(te).cart.event}])},{default:a((()=>[i(N,{"scroll-y":!0,class:"scroll-height"},{default:a((()=>[i(j,{class:"bg-[#F4F6F8]"},{default:a((()=>[(o(!0),p(f,null,x(ge.value,((e,t)=>(o(),r(j,{class:c(["tab-item truncate",{"tab-item-active":t==me.value,"rounded-br-[12rpx]":me.value-1===t,"rounded-tr-[12rpx]":me.value+1===t}]),key:e.site_id,onClick:l=>((e,t)=>{me.value=e,re=t.category_id,se.value=[],ee().resetUpScroll()})(t,e)},{default:a((()=>[i(j,{class:"text-box px-[16rpx] truncate"},{default:a((()=>[y(w(e.category_name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1},8,["class"]),i(j,{class:c(["flex justify-center flex-wrap pl-[182rpx] pb-[20rpx]",{" pt-[126rpx]":s(te).search.control," pt-[20rpx]":!s(te).search.control}])},{default:a((()=>[(o(!0),p(f,null,x(s(se),((e,t)=>(o(),r(j,{key:e.goods_id,class:c(["w-[536rpx] box-border bg-white w-full flex mx-[16rpx] px-[24rpx] py-[20rpx] rounded-[12rpx]",{"mt-[16rpx]":t}]),onClick:n((t=>ne(e.goods_id)),["stop"])},{default:a((()=>[i(j,{class:"mr-[8rpx]"},{default:a((()=>[i(L,{width:"168rpx",height:"168rpx",radius:"12rpx",src:s(C)(e.goods_cover_thumb_mid?e.goods_cover_thumb_mid:""),model:"aspectFill"},{error:a((()=>[i(_,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"])])),_:2},1024),i(j,{class:"flex flex-1 ml-[8rpx] flex-wrap"},{default:a((()=>[i(j,{class:"w-[316rpx] max-h-[80rpx] text-[28rpx] leading-[40rpx] multi-hidden"},{default:a((()=>[y(w(e.goods_name),1)])),_:2},1024),i(j,{class:"w-[316rpx] flex self-end items-end justify-between"},{default:a((()=>[i(F,{class:"text-[var(--price-text-color)] price-font"},{default:a((()=>[i(F,{class:"text-[26rpx] font-500"},{default:a((()=>[y("￥")])),_:1}),i(F,{class:"text-[36rpx] font-500"},{default:a((()=>[y(w(parseFloat(s(Fe)(e)).toFixed(2).split(".")[0]),1)])),_:2},1024),i(F,{class:"text-[24rpx] font-500"},{default:a((()=>[y("."+w(parseFloat(s(Fe)(e)).toFixed(2).split(".")[1]),1)])),_:2},1024),"member_price"==s(Ce)(e)?(o(),r(B,{key:0,class:"h-[24rpx] ml-[6rpx]",src:s(C)("addon/shop/VIP.png"),mode:"heightFix"},null,8,["src"])):u("v-if",!0),"discount_price"==s(Ce)(e)?(o(),r(B,{key:1,class:"h-[24rpx] ml-[6rpx]",src:s(C)("addon/shop/discount.png"),mode:"heightFix"},null,8,["src"])):u("v-if",!0)])),_:2},1024),("real"==e.goods_type||"virtual"==e.goods_type&&"verify"!=e.virtual_receive_type)&&""===e.goodsSku.sku_spec_format&&s(M)["goods_"+e.goods_id]&&s(M)["goods_"+e.goods_id]["sku_"+e.goodsSku.sku_id]&&s(te).cart.control&&"cart"===s(te).cart.event?(o(),r(j,{key:0,class:"flex items-center"},{default:a((()=>[i(F,{class:"text-[44rpx] text-color nc-iconfont nc-icon-jianshaoV6xx",onClick:n((t=>(e=>{if(fe.value)return!1;fe.value=!0,V.reduce({id:e.id,goods_id:e.goods_id,sku_id:e.sku_id,stock:e.stock,sale_price:e.sale_price,num:e.num},1,(()=>{fe.value=!1}))})(s(M)["goods_"+e.goods_id]["sku_"+e.goodsSku.sku_id])),["stop"])},null,8,["onClick"]),i(F,{class:"text-[#333] text-[24rpx] mx-[16rpx]"},{default:a((()=>[y(w(s(M)["goods_"+e.goods_id]["sku_"+e.goodsSku.sku_id].num),1)])),_:2},1024),i(F,{class:"text-[44rpx] text-color iconfont iconjiahao2fill",id:"itemCart"+t,onClick:n((l=>((e,t,l)=>{if(parseInt(t.num)>=parseInt(t.stock))return void S({title:"商品库存不足",icon:"none"});let o=oe(e);o.num=t.num,o.id=t.id,_e(o,l)})(e,s(M)["goods_"+e.goods_id]["sku_"+e.goodsSku.sku_id],"itemCart"+t)),["stop"])},null,8,["id","onClick"])])),_:2},1024)):(o(),p(f,{key:1},[s(te).cart.control&&"style-1"===s(te).cart.style?(o(),r(j,{key:0,class:"h-[44rpx] relative"},{default:a((()=>[i(j,{id:"itemCart"+t,class:"text-[#fff] bg-color h-[44rpx] text-[24rpx] px-[10px] leading-[44rpx] rounded-[22rpx]",onClick:n((l=>ke(e,"itemCart"+t)),["stop"])},{default:a((()=>[y(w(s(te).cart.text),1)])),_:2},1032,["id","onClick"]),s(M)["goods_"+e.goods_id]&&s(M)["goods_"+e.goods_id].totalNum?(o(),r(j,{key:0,class:c(["absolute right-[-16rpx] top-[-16rpx] rounded-[30rpx] h-[30rpx] min-w-[30rpx] text-center leading-[30rpx] bg-[#FF4646] text-[#fff] text-[20rpx] font-500 box-border box-border border-[2rpx] border-solid border-[#fff]",s(M)["goods_"+e.goods_id].totalNum>9?"px-[10rpx]":""])},{default:a((()=>[y(w(s(M)["goods_"+e.goods_id].totalNum),1)])),_:2},1032,["class"])):u("v-if",!0)])),_:2},1024)):u("v-if",!0),s(te).cart.control&&"style-2"===s(te).cart.style?(o(),r(j,{key:1,class:"w-[44rpx] h-[44rpx] relative"},{default:a((()=>[i(F,{id:"itemCart"+t,class:"text-color nc-iconfont nc-icon-tianjiaV6xx text-[44rpx]",onClick:n((l=>ke(e,"itemCart"+t)),["stop"])},null,8,["id","onClick"]),s(M)["goods_"+e.goods_id]&&s(M)["goods_"+e.goods_id].totalNum?(o(),r(j,{key:0,class:c(["absolute right-[-16rpx] top-[-16rpx] rounded-[30rpx] h-[30rpx] min-w-[30rpx] text-center leading-[30rpx] bg-[#FF4646] text-[#fff] text-[20rpx] font-500 box-border box-border border-[2rpx] border-solid border-[#fff]",s(M)["goods_"+e.goods_id].totalNum>9?"px-[10rpx]":""])},{default:a((()=>[y(w(s(M)["goods_"+e.goods_id].totalNum),1)])),_:2},1032,["class"])):u("v-if",!0)])),_:2},1024)):u("v-if",!0),s(te).cart.control&&"style-3"===s(te).cart.style?(o(),r(j,{key:2,class:"w-[44rpx] h-[44rpx] relative"},{default:a((()=>[i(F,{id:"itemCart"+t,class:"text-color nc-iconfont nc-icon-gouwucheV6xx-2 !text-[44rpx]",onClick:n((l=>ke(e,"itemCart"+t)),["stop"])},null,8,["id","onClick"]),s(M)["goods_"+e.goods_id]&&s(M)["goods_"+e.goods_id].totalNum?(o(),r(j,{key:0,class:c(["absolute right-[-16rpx] top-[-16rpx] rounded-[30rpx] h-[30rpx] min-w-[30rpx] text-center leading-[30rpx] bg-[#FF4646] text-[#fff] text-[20rpx] font-500 box-border box-border border-[2rpx] border-solid border-[#fff]",s(M)["goods_"+e.goods_id].totalNum>9?"px-[10rpx]":""])},{default:a((()=>[y(w(s(M)["goods_"+e.goods_id].totalNum),1)])),_:2},1032,["class"])):u("v-if",!0)])),_:2},1024)):u("v-if",!0),s(te).cart.control&&"style-4"===s(te).cart.style?(o(),r(j,{key:3,class:"w-[44rpx] h-[44rpx] relative"},{default:a((()=>[i(j,{id:"itemCart"+t,class:"flex items-center justify-center text-[#fff] bg-color h-[44rpx] w-[44rpx] rounded-[22rpx] text-center",onClick:n((l=>ke(e,"itemCart"+t)),["stop"])},{default:a((()=>[i(F,{class:"nc-iconfont nc-icon-gouwucheV6xx-2 !text-[26rpx]"})])),_:2},1032,["id","onClick"]),s(M)["goods_"+e.goods_id]&&s(M)["goods_"+e.goods_id].totalNum?(o(),r(j,{key:0,class:c(["absolute right-[-16rpx] top-[-16rpx] rounded-[30rpx] h-[30rpx] min-w-[30rpx] text-center leading-[30rpx] bg-[#FF4646] text-[#fff] text-[20rpx] font-500 box-border border-[2rpx] border-solid border-[#fff]",s(M)["goods_"+e.goods_id].totalNum>9?"px-[10rpx]":""])},{default:a((()=>[y(w(s(M)["goods_"+e.goods_id].totalNum),1)])),_:2},1032,["class"])):u("v-if",!0)])),_:2},1024)):u("v-if",!0)],64))])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128)),s(se).length||s(ce)||!s(de)?u("v-if",!0):(o(),r(j,{key:0,class:c(["mx-[24rpx] bg-[#fff] w-[536rpx] rounded-[12rpx] flex items-center justify-center",{noData1:s(te).search.control,noData2:!s(te).search.control}])},{default:a((()=>[i(X,{option:{tip:"暂无商品"}})])),_:1},8,["class"]))])),_:1},8,["class"]),i(ae,{ref_key:"cartRef",ref:be},null,512)])),_:1},8,["onInit"]),s(te).cart.control&&"cart"===s(te).cart.event?(o(),r(j,{key:0,class:"bg-[#fff] z-10 flex justify-between items-center fixed left-0 right-0 bottom-[50px] box-solid px-[24rpx] py-[17rpx] mb-ios"},{default:a((()=>[i(j,{class:"flex items-center"},{default:a((()=>[i(j,{class:"w-[66rpx] h-[66rpx] mr-[27rpx] relative"},{default:a((()=>[i(j,{id:"animation-end",class:"w-[66rpx] h-[66rpx] rounded-[35rpx] bg-[var(--primary-color)] text-center leading-[70rpx]",onClick:n(ye,["stop"])},{default:a((()=>[i(F,{class:"nc-iconfont nc-icon-gouwucheV6mm1 text-[#fff] text-[32rpx]"})])),_:1},8,["onClick"]),s(T)?(o(),r(j,{key:0,class:c(["absolute left-[50rpx] top-[-10rpx] rounded-[28rpx] h-[28rpx] min-w-[28rpx] text-center leading-[30rpx] bg-[#FF4646] text-[#fff] text-[20rpx] font-500 box-border",s(T)>9?"px-[10rpx]":""])},{default:a((()=>[y(w(s(T)>99?"99+":s(T)),1)])),_:1},8,["class"])):u("v-if",!0)])),_:1}),i(F,{class:"text-[32rpx] font-500 text-[#333]"},{default:a((()=>[y("总计：")])),_:1}),i(F,{class:"text-[var(--price-text-color)] price-font"},{default:a((()=>[i(F,{class:"text-[26rpx] font-500"},{default:a((()=>[y("￥")])),_:1}),i(F,{class:"text-[36rpx] font-500"},{default:a((()=>[y(w(parseFloat(s(U)).toFixed(2).split(".")[0]),1)])),_:1}),i(F,{class:"text-[24rpx] font-500"},{default:a((()=>[y("."+w(parseFloat(s(U)).toFixed(2).split(".")[1]),1)])),_:1})])),_:1})])),_:1}),i(O,{class:"w-[180rpx] h-[66rpx] text-[28rpx] leading-[66rpx] !text-[#fff] m-0 rounded-full bg-color remove-border",shape:"circle",onClick:we},{default:a((()=>[y("去结算")])),_:1})])),_:1})):u("v-if",!0)])),_:1},8,["class"])):u("v-if",!0),E(i(j,{style:A(pe.value),class:"fixed z-999 flex items-center justify-center text-[#fff] bg-color h-[44rpx] w-[44rpx] rounded-[22rpx] text-center"},{default:a((()=>[i(F,{class:"nc-iconfont nc-icon-gouwucheV6xx-2 !text-[30rpx]"})])),_:1},8,["style"]),[[z,pe.value]]),ge.value.length||s(ce)?u("v-if",!0):(o(),r(j,{key:1,class:"flex justify-center items-center w-[100%] h-[100vh]"},{default:a((()=>[i(X,{option:{tip:"暂无商品分类"}})])),_:1})),i(R,{"bg-color":"rgb(248,248,248)",loading:s(ce),loadingText:"",fontSize:"16",color:"#303133"},null,8,["loading"]),i(J)])),_:1})}}}),[["__scopeId","data-v-ed4044f2"]]),ie=Y(e({__name:"category-template-two-two",props:{config:{type:Object,default:()=>({})},categoryId:{type:[String,Number],default:0}},setup(e){const j=e,V=le();V.getList();const M=F((()=>V.cartList)),T=F((()=>V.totalNum)),U=F((()=>V.totalMoney)),q=N(),W=F((()=>q.info)),{mescrollInit:Y,getMescroll:ee}=Z(B,L);let re=j.config,se=j.categoryId,ie=t([]),ce=t(""),de=t(!0),ue=t(!1),ne=t(!1);t([]).value=uni.getStorageSync("shopCart")||[];const pe=e=>{ue.value=!1,K({page:e.num,limit:e.size,keyword:"",goods_category:se,brand_id:"",label_ids:"",start_price:"",end_price:"",order:"price",sort:"desc"}).then((t=>{let l=t.data.data;1==e.num&&(ie.value=[]),ie.value=ie.value.concat(l),de.value=!1,e.endSuccess(l.length),ie.value.length||(ue.value=!0)})).catch((()=>{de.value=!1,ue.value=!0,e.endErr()}))},xe=e=>{_({url:"/addon/shop/pages/goods/detail",param:{goods_id:e}})};l((()=>{he()}));const fe=t(""),_e=t(!1),ge=t(!1),ve=(e,t)=>{if(_e.value||ge.value)return!1;_e.value=!0,ge.value=!0;let l={goods_id:e.goodsSku.goods_id,sku_id:e.goodsSku.sku_id,sale_price:Ve(e),stock:e.goodsSku.stock};e.id&&(l.num=e.num,l.id=e.id),V.increase(l,1,(()=>{ge.value=!1}));const o=window.document.getElementById("animation-end"),r=o.getBoundingClientRect().left,a=o.getBoundingClientRect().top,s=window.document.getElementById(t),i=s.getBoundingClientRect().left,c=s.getBoundingClientRect().top;fe.value=`top: ${c}px; left: ${i}px;`,setTimeout((()=>{fe.value=`top: ${a}px; left: ${r}px; transition: all 0.8s; transform: rotate(-720deg);`}),20),setTimeout((()=>{fe.value="",_e.value=!1}),1020)};t({allActive:-1,data:{category_name:"全部",category_id:""}});const me=t([]),he=()=>{de.value=!0,J().then((e=>{me.value=e.data;for(let t=0;t<me.value.length;t++)if(me.value[t].child_list){let e={category_name:"全部",category_id:me.value[t].category_id};me.value[t].child_list.unshift(e)}if(se)for(let t=0;t<me.value.length;t++){if(me.value[t].category_id==se){be.value=t;break}if(me.value[t].child_list)for(let e=0;e<me.value[t].child_list.length;e++)if(me.value[t].child_list[e].category_id==se){be.value=t,ke.value=e;break}}else se=e.data[0].category_id;de.value=!1})).catch((()=>{de.value=!1}))},be=t(0),ke=t(0),ye=(e,t)=>{ke.value=e,se=t.category_id,ne.value=!1,ie.value=[],ee().resetUpScroll()},we=()=>{ce.value&&_({url:"/addon/shop/pages/goods/list",param:{goods_name:ce.value}})};let Ce=t();const Fe=(e,t)=>{if("virtual"==e.goods_type&&"verify"==e.virtual_receive_type)return xe(e.goodsSku.goods_id);if("cart"!==re.cart.event)return xe(e.goods_id);if(!W.value)return O().setLoginBack({url:"/addon/shop/pages/goods/category"}),!1;if(e.goodsSku.sku_spec_format)Ce.value.open(e.goodsSku.sku_id);else{if(parseInt(e.goodsSku.num||0)>=parseInt(e.goodsSku.stock))return void S({title:"商品库存不足",icon:"none"});ve(e,t)}},je=()=>{_({url:"/addon/shop/pages/goods/cart"})},Se=()=>{if(!T.value)return void S({title:"还没有选择商品",icon:"none"});const e=[];Object.values(M.value).forEach((t=>{Object.keys(t).forEach((l=>{"totalNum"!=l&&"totalMoney"!=l&&e.push(t[l].id)}))})),uni.setStorage({key:"orderCreateData",data:{cart_ids:e},success(){_({url:"/addon/shop/pages/order/payment"})}})};let Ie=e=>{let t="";return t=e.is_discount?"discount_price":e.member_discount&&R()?"member_price":"",t},Ve=e=>{let t="0.00";return t=e.is_discount?e.goodsSku.sale_price?e.goodsSku.sale_price:e.goodsSku.price:e.member_discount&&R()&&e.goodsSku.member_price?e.goodsSku.member_price:e.goodsSku.price,t};return(e,t)=>{const l=g,_=v(m("u-icon"),$),F=h,j=b,N=k,L=v(m("u-popup"),te),B=v(m("u--image"),P),O=D,R=I,J=v(m("u-loading-page"),H),q=v(m("tabbar"),G);return o(),r(j,{class:"min-h-screen"},{default:a((()=>[me.value.length?(o(),r(j,{key:0,class:c(["mescroll-box bg-[#F4F6F8]",{cart:s(re).cart.control&&"cart"===s(re).cart.event,detail:!(s(re).cart.control&&"cart"===s(re).cart.event)}])},{default:a((()=>[i(Q,{ref:"mescrollRef",down:{use:!1},onInit:s(Y),onUp:pe},{default:a((()=>{var e,g,v,m,h,b;return[s(re).search.control?(o(),r(j,{key:0,class:"search-box z-10 bg-[#fff] fixed top-0 left-0 right-0 h-[106rpx] box-border"},{default:a((()=>[i(l,{class:c(["search-ipt pl-[20rpx] text-[24rpx]",{"pr-[96rpx]":s(ce),"pr-[60rpx]":!s(ce)}]),type:"text",modelValue:s(ce),"onUpdate:modelValue":t[0]||(t[0]=e=>d(ce)?ce.value=e:ce=e),placeholder:s(re).search.title,onConfirm:we},null,8,["class","modelValue","placeholder"]),i(j,{class:"flex items-center h-[70rpx] absolute right-[48rpx] top-[18rpx] z-2"},{default:a((()=>[s(ce)?(o(),r(_,{key:0,name:"close-circle-fill",color:"#A5A6A6",size:"28rpx",onClick:t[1]||(t[1]=e=>d(ce)?ce.value="":ce="")})):u("v-if",!0),i(j,{class:"h-[70rpx] w-[40rpx] text-center leading-[70rpx]",onClick:n(we,["stop"])},{default:a((()=>[i(F,{class:"nc-iconfont nc-icon-sousuo-duanV6xx1 text-[28rpx]"})])),_:1},8,["onClick"])])),_:1})])),_:1})):u("v-if",!0),i(j,{class:c(["tabs-box z-2 fixed left-0 bg-[#fff] bottom-[50px] top-0",{"!top-[106rpx]":s(re).search.control,"pb-[98rpx]":s(re).cart.control&&"cart"===s(re).cart.event}])},{default:a((()=>[i(N,{"scroll-y":!0,class:"scroll-height"},{default:a((()=>[i(j,{class:"bg-[#F4F6F8]"},{default:a((()=>[(o(!0),p(f,null,x(me.value,((e,t)=>(o(),r(j,{class:c(["tab-item truncate",{"tab-item-active ":t==be.value,"rounded-br-[12rpx]":!(be.value-1!==t||me.value[be.value].child_list&&me.value[be.value].child_list.length),"rounded-tr-[12rpx]":!(be.value+1!==t||me.value[be.value].child_list&&me.value[be.value].child_list.length)}]),key:e.site_id,onClick:l=>((e,t)=>{be.value=e,t.child_list&&t.child_list.length?ye(0,t.child_list[0]):(se=t.category_id,ie.value=[],ee().resetUpScroll())})(t,e)},{default:a((()=>[i(j,{class:"text-box truncate px-[24rpx]"},{default:a((()=>[y(w(e.category_name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1},8,["class"]),(null==(e=me.value[be.value])?void 0:e.child_list)&&(null==(g=me.value[be.value])?void 0:g.child_list.length)?(o(),r(j,{key:1,class:c(["flex justify-center items-center h-[92rpx] px-[24rpx] py-[20rpx] z-10 bg-white fixed left-[182rpx] right-0 box-border top-0",{"!top-[106rpx]":s(re).search.control}])},{default:a((()=>[s(ne)?(o(),p(f,{key:1},[i(j,{class:"flex-1 h-[48rpx] text-[22rpx] text-[#A5A6A6] pr-[24rpx] leading-[48rpx]"},{default:a((()=>[y("全部分类")])),_:1}),i(F,{class:"nc-iconfont nc-icon-shangV6xx-1 text-[30rpx]",onClick:t[3]||(t[3]=e=>d(ne)?ne.value=!1:ne=!1)})],64)):(o(),p(f,{key:0},[i(N,{"scroll-x":!0,"scroll-with-animation":"","scroll-into-view":"id"+(ke.value?ke.value-1:0),class:"flex-1 h-[49rpx] scroll-Y box-border pr-[24rpx] bg-white"},{default:a((()=>[i(j,{class:"flex items-center h-[48rpx] box-border"},{default:a((()=>{var e;return[(o(!0),p(f,null,x(null==(e=me.value[be.value])?void 0:e.child_list,((e,t)=>(o(),r(F,{class:c(["flex-shrink-0 ml-[24rpx] px-[24rpx] h-[48rpx] text-[22rpx] leading-[48rpx] border-[2rpx] border-solid rounded-[24rpx] box-border",{"sub-tab-active text-color border-color":t===ke.value,"border-[#E2E2E2]":t!=ke.value}]),key:me.value[be.value].category_id,id:"id"+t,onClick:l=>ye(t,e)},{default:a((()=>[y(w(e.category_name),1)])),_:2},1032,["class","id","onClick"])))),128))]})),_:1})])),_:1},8,["scroll-into-view"]),i(j,{class:"nc-iconfont nc-icon-xiaV6xx text-[30rpx] w-[30rpx] h-[30rpx] text-center transform",onClick:t[2]||(t[2]=e=>d(ne)?ne.value=!0:ne=!0)})],64))])),_:1},8,["class"])):u("v-if",!0),i(j,{class:c(["labelPopup",{active:s(re).search.control}])},{default:a((()=>[i(L,{show:s(ne),mode:"top",onClose:t[5]||(t[5]=e=>d(ne)?ne.value=!1:ne=!1)},{default:a((()=>[i(j,{class:"flex flex-wrap py-[24rpx]",onTouchmove:t[4]||(t[4]=n((()=>{}),["prevent","stop"]))},{default:a((()=>{var e;return[u(' <text\r\n\t\t\t\t\t\t\t\tclass="flex-shrink-0 w-[160rpx] ml-[22rpx] mb-[24rpx] text-center h-[48rpx] text-[22rpx] leading-[48rpx] border-[2rpx] border-solid rounded-[24rpx] box-border"\r\n\t\t\t\t\t\t\t\t:class="{ \'sub-tab-active text-color border-color\': initAll.allActive === subActive, \'border-[#E2E2E2]\': initAll.allActive != subActive }"\r\n\t\t\t\t\t\t\t\t @click="subMenuClick(initAll.allActive,initAll.data)">全部</text> '),(o(!0),p(f,null,x(null==(e=me.value[be.value])?void 0:e.child_list,((e,t)=>(o(),r(F,{class:c(["flex-shrink-0 w-[160rpx] ml-[22rpx] mb-[24rpx] text-center h-[48rpx] text-[22rpx] leading-[48rpx] border-[2rpx] border-solid rounded-[24rpx] box-border",{"sub-tab-active text-color border-color":t===ke.value,"border-[#E2E2E2]":t!=ke.value}]),key:me.value[be.value].category_id,onClick:l=>ye(t,e)},{default:a((()=>[y(w(e.category_name),1)])),_:2},1032,["class","onClick"])))),128))]})),_:1})])),_:1},8,["show"])])),_:1},8,["class"]),i(j,{class:c(["flex justify-center flex-wrap pl-[182rpx] pt-[20rpx] pb-[20rpx]",{"!pt-[218rpx]":s(re).search.control&&(null==(v=me.value[be.value])?void 0:v.child_list)&&(null==(m=me.value[be.value])?void 0:m.child_list.length),"pt-[126rpx]":s(re).search.control&&(!me.value[be.value].child_list||!me.value[be.value].child_list.length),"pt-[112rpx]":(null==(h=me.value[be.value])?void 0:h.child_list)&&(null==(b=me.value[be.value])?void 0:b.child_list.length)&&!s(re).search.control}])},{default:a((()=>{var e,t,l,d;return[(o(!0),p(f,null,x(s(ie),((e,t)=>(o(),r(j,{key:e.goods_id,class:c(["w-[536rpx] box-border bg-white w-full flex mx-[16rpx] px-[24rpx] py-[20rpx] rounded-[12rpx]",{"mt-[16rpx]":t}]),onClick:n((t=>xe(e.goods_id)),["stop"])},{default:a((()=>[i(j,{class:"mr-[8rpx]"},{default:a((()=>[i(B,{width:"168rpx",height:"168rpx",radius:"12rpx",src:s(C)(e.goods_cover_thumb_mid?e.goods_cover_thumb_mid:""),model:"aspectFill"},{error:a((()=>[i(_,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"])])),_:2},1024),i(j,{class:"flex flex-1 flex-wrap"},{default:a((()=>[i(j,{class:"w-[316rpx] max-h-[80rpx] text-[28rpx] leading-[40rpx] multi-hidden"},{default:a((()=>[y(w(e.goods_name),1)])),_:2},1024),i(j,{class:"w-[316rpx] flex self-end items-end justify-between"},{default:a((()=>[i(F,{class:"text-[var(--price-text-color)] price-font"},{default:a((()=>[i(F,{class:"text-[26rpx] font-500"},{default:a((()=>[y("￥")])),_:1}),i(F,{class:"text-[36rpx] font-500"},{default:a((()=>[y(w(parseFloat(s(Ve)(e)).toFixed(2).split(".")[0]),1)])),_:2},1024),i(F,{class:"text-[24rpx] font-500"},{default:a((()=>[y("."+w(parseFloat(s(Ve)(e)).toFixed(2).split(".")[1]),1)])),_:2},1024),"member_price"==s(Ie)(e)?(o(),r(O,{key:0,class:"h-[24rpx] ml-[6rpx]",src:s(C)("addon/shop/VIP.png"),mode:"heightFix"},null,8,["src"])):u("v-if",!0),"discount_price"==s(Ie)(e)?(o(),r(O,{key:1,class:"h-[24rpx] ml-[6rpx]",src:s(C)("addon/shop/discount.png"),mode:"heightFix"},null,8,["src"])):u("v-if",!0)])),_:2},1024),("real"==e.goods_type||"virtual"==e.goods_type&&"verify"!=e.virtual_receive_type)&&""===e.goodsSku.sku_spec_format&&s(M)["goods_"+e.goods_id]&&s(M)["goods_"+e.goods_id]["sku_"+e.goodsSku.sku_id]&&s(re).cart.control&&"cart"===s(re).cart.event?(o(),r(j,{key:0,class:"flex items-center"},{default:a((()=>[i(F,{class:"text-[44rpx] text-color nc-iconfont nc-icon-jianshaoV6xx",onClick:n((t=>(e=>{if(ge.value)return!1;ge.value=!0,V.reduce({id:e.id,goods_id:e.goods_id,sku_id:e.sku_id,stock:e.stock,sale_price:e.sale_price,num:e.num},1,(()=>{ge.value=!1}))})(s(M)["goods_"+e.goods_id]["sku_"+e.goodsSku.sku_id])),["stop"])},null,8,["onClick"]),i(F,{class:"text-[#333] text-[24rpx] mx-[16rpx]"},{default:a((()=>[y(w(s(M)["goods_"+e.goods_id]["sku_"+e.goodsSku.sku_id].num),1)])),_:2},1024),i(F,{class:"text-[44rpx] text-color iconfont iconjiahao2fill",id:"itemCart"+t,onClick:n((l=>((e,t,l)=>{if(parseInt(t.num)>=parseInt(t.stock))return void S({title:"商品库存不足",icon:"none"});let o=oe(e);o.num=t.num,o.id=t.id,ve(o,l)})(e,s(M)["goods_"+e.goods_id]["sku_"+e.goodsSku.sku_id],"itemCart"+t)),["stop"])},null,8,["id","onClick"])])),_:2},1024)):(o(),p(f,{key:1},[s(re).cart.control&&"style-1"===s(re).cart.style?(o(),r(j,{key:0,class:"h-[44rpx] relative pl-[20rpx]"},{default:a((()=>[i(j,{id:"itemCart"+t,class:"text-[#fff] bg-color h-[44rpx] text-[24rpx] px-[10px] leading-[44rpx] rounded-[22rpx]",onClick:n((l=>Fe(e,"itemCart"+t)),["stop"])},{default:a((()=>[y(w(s(re).cart.text),1)])),_:2},1032,["id","onClick"]),s(M)["goods_"+e.goods_id]&&s(M)["goods_"+e.goods_id].totalNum?(o(),r(j,{key:0,class:c(["absolute right-[-16rpx] top-[-16rpx] rounded-[30rpx] h-[30rpx] min-w-[30rpx] text-center leading-[30rpx] bg-[#FF4646] text-[#fff] text-[20rpx] font-500 box-border box-border border-[2rpx] border-solid border-[#fff]",s(M)["goods_"+e.goods_id].totalNum>9?"px-[10rpx]":""])},{default:a((()=>[y(w(s(M)["goods_"+e.goods_id].totalNum),1)])),_:2},1032,["class"])):u("v-if",!0)])),_:2},1024)):u("v-if",!0),s(re).cart.control&&"style-2"===s(re).cart.style?(o(),r(j,{key:1,class:"w-[44rpx] h-[44rpx] relative"},{default:a((()=>[i(F,{id:"itemCart"+t,class:"text-color nc-iconfont nc-icon-tianjiaV6xx text-[44rpx]",onClick:n((l=>Fe(e,"itemCart"+t)),["stop"])},null,8,["id","onClick"]),s(M)["goods_"+e.goods_id]&&s(M)["goods_"+e.goods_id].totalNum?(o(),r(j,{key:0,class:c(["absolute right-[-16rpx] top-[-16rpx] rounded-[30rpx] h-[30rpx] min-w-[30rpx] text-center leading-[30rpx] bg-[#FF4646] text-[#fff] text-[20rpx] font-500 box-border box-border border-[2rpx] border-solid border-[#fff]",s(M)["goods_"+e.goods_id].totalNum>9?"px-[10rpx]":""])},{default:a((()=>[y(w(s(M)["goods_"+e.goods_id].totalNum),1)])),_:2},1032,["class"])):u("v-if",!0)])),_:2},1024)):u("v-if",!0),s(re).cart.control&&"style-3"===s(re).cart.style?(o(),r(j,{key:2,class:"w-[44rpx] h-[44rpx] relative"},{default:a((()=>[i(F,{id:"itemCart"+t,class:"text-color nc-iconfont nc-icon-gouwucheV6xx-2 !text-[44rpx]",onClick:n((l=>Fe(e,"itemCart"+t)),["stop"])},null,8,["id","onClick"]),s(M)["goods_"+e.goods_id]&&s(M)["goods_"+e.goods_id].totalNum?(o(),r(j,{key:0,class:c(["absolute right-[-16rpx] top-[-16rpx] rounded-[30rpx] h-[30rpx] min-w-[30rpx] text-center leading-[30rpx] bg-[#FF4646] text-[#fff] text-[20rpx] font-500 box-border box-border border-[2rpx] border-solid border-[#fff]",s(M)["goods_"+e.goods_id].totalNum>9?"px-[10rpx]":""])},{default:a((()=>[y(w(s(M)["goods_"+e.goods_id].totalNum),1)])),_:2},1032,["class"])):u("v-if",!0)])),_:2},1024)):u("v-if",!0),s(re).cart.control&&"style-4"===s(re).cart.style?(o(),r(j,{key:3,class:"w-[44rpx] h-[44rpx] relative"},{default:a((()=>[i(j,{id:"itemCart"+t,class:"flex items-center justify-center text-[#fff] bg-color h-[44rpx] w-[44rpx] rounded-[22rpx] text-center",onClick:n((l=>Fe(e,"itemCart"+t)),["stop"])},{default:a((()=>[i(F,{class:"nc-iconfont nc-icon-gouwucheV6xx-2 !text-[26rpx]"})])),_:2},1032,["id","onClick"]),s(M)["goods_"+e.goods_id]&&s(M)["goods_"+e.goods_id].totalNum?(o(),r(j,{key:0,class:c(["absolute right-[-16rpx] top-[-16rpx] rounded-[30rpx] h-[30rpx] min-w-[30rpx] text-center leading-[30rpx] bg-[#FF4646] text-[#fff] text-[20rpx] font-500 box-border border-[2rpx] border-solid border-[#fff]",s(M)["goods_"+e.goods_id].totalNum>9?"px-[10rpx]":""])},{default:a((()=>[y(w(s(M)["goods_"+e.goods_id].totalNum),1)])),_:2},1032,["class"])):u("v-if",!0)])),_:2},1024)):u("v-if",!0)],64))])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128)),s(ie).length||s(de)||!s(ue)?u("v-if",!0):(o(),r(j,{key:0,class:c(["w-[536rpx] bg-[#fff] mx-[16rpx] rounded-[12rpx] flex items-center justify-center",{noData1:s(re).search.control,noData2:!s(re).search.control,child:(null==(e=me.value[be.value])?void 0:e.child_list)&&(null==(t=me.value[be.value])?void 0:t.child_list.length),noChild:!(null==(l=me.value[be.value])?void 0:l.child_list)||!(null==(d=me.value[be.value])?void 0:d.child_list.length)}])},{default:a((()=>[i(X,{option:{tip:"暂无商品"}})])),_:1},8,["class"]))]})),_:1},8,["class"]),i(ae,{ref_key:"cartRef",ref:Ce},null,512)]})),_:1},8,["onInit"]),s(re).cart.control&&"cart"===s(re).cart.event?(o(),r(j,{key:0,class:"bg-[#fff] z-10 flex justify-between items-center fixed left-0 right-0 bottom-[50px] box-solid px-[24rpx] py-[17rpx] mb-ios"},{default:a((()=>[i(j,{class:"flex items-center"},{default:a((()=>[i(j,{class:"w-[66rpx] h-[66rpx] mr-[27rpx] relative"},{default:a((()=>[i(j,{id:"animation-end",class:"w-[66rpx] h-[66rpx] rounded-[35rpx] bg-[var(--primary-color)] text-center leading-[70rpx]",onClick:n(je,["stop"])},{default:a((()=>[i(F,{class:"nc-iconfont nc-icon-gouwucheV6mm1 text-[#fff] text-[32rpx]"})])),_:1},8,["onClick"]),s(T)?(o(),r(j,{key:0,class:c(["absolute left-[50rpx] top-[-10rpx] rounded-[28rpx] h-[28rpx] min-w-[28rpx] text-center leading-[30rpx] bg-[#FF4646] text-[#fff] text-[20rpx] font-500 box-border",s(T)>9?"px-[10rpx]":""])},{default:a((()=>[y(w(s(T)>99?"99+":s(T)),1)])),_:1},8,["class"])):u("v-if",!0)])),_:1}),i(F,{class:"text-[32rpx] font-500 text-[#333]"},{default:a((()=>[y("总计：")])),_:1}),i(F,{class:"text-[var(--price-text-color)] price-font"},{default:a((()=>[i(F,{class:"text-[26rpx] font-500"},{default:a((()=>[y("￥")])),_:1}),i(F,{class:"text-[36rpx] font-500"},{default:a((()=>[y(w(parseFloat(s(U)).toFixed(2).split(".")[0]),1)])),_:1}),i(F,{class:"text-[24rpx] font-500"},{default:a((()=>[y("."+w(parseFloat(s(U)).toFixed(2).split(".")[1]),1)])),_:1})])),_:1})])),_:1}),i(R,{class:"w-[180rpx] h-[66rpx] text-[28rpx] leading-[66rpx] !text-[#fff] m-0 rounded-full bg-color remove-border",shape:"circle",onClick:Se},{default:a((()=>[y("去结算")])),_:1})])),_:1})):u("v-if",!0)])),_:1},8,["class"])):u("v-if",!0),E(i(j,{style:A(fe.value),class:"fixed z-999 flex items-center justify-center text-[#fff] bg-color h-[44rpx] w-[44rpx] rounded-[22rpx] text-center"},{default:a((()=>[i(F,{class:"nc-iconfont nc-icon-gouwucheV6xx-2 !text-[30rpx]"})])),_:1},8,["style"]),[[z,fe.value]]),me.value.length||s(de)?u("v-if",!0):(o(),r(j,{key:1,class:"flex justify-center items-center w-[100%] bg-[#fff]"},{default:a((()=>[i(X,{option:{tip:"暂无商品分类"}})])),_:1})),i(J,{"bg-color":"rgb(248,248,248)",loading:s(de),loadingText:"",fontSize:"16",color:"#303133"},null,8,["loading"]),i(q)])),_:1})}}}),[["__scopeId","data-v-db6adcaa"]]),ce=Y(e({__name:"category",setup(e){const l=le(),s=t({}),i=t(0);return M((e=>{i.value=e.category_id||0,W().then((e=>{s.value=e.data,U({title:s.value.page_title})}))})),T((()=>{l.getList()})),(e,t)=>{const l=b;return o(),r(l,{style:A(e.themeColor())},{default:a((()=>[1===s.value.level&&"style-1"===s.value.template?(o(),r(se,{key:0,class:"category",categoryId:i.value,config:s.value},null,8,["categoryId","config"])):u("v-if",!0),2===s.value.level&&"style-1"===s.value.template?(o(),r(re,{key:1,categoryId:i.value,config:s.value},null,8,["categoryId","config"])):u("v-if",!0),2===s.value.level&&"style-2"===s.value.template?(o(),r(ie,{key:2,class:"category",categoryId:i.value,config:s.value},null,8,["categoryId","config"])):u("v-if",!0)])),_:1},8,["style"])}}}),[["__scopeId","data-v-40f04a9c"]]);export{ce as default};
