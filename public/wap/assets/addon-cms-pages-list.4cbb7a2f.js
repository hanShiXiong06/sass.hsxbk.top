import{d as e,r as a,p as l,F as t,T as s,o as r,c as o,w as c,b as n,A as i,u,f as d,U as p,ad as m,V as f,n as x,ae as v,af as _,D as g,ab as h,i as y,ac as b,g as k,h as j,W as C,y as w,z as I,E as U,a as V,b7 as M,bl as z,_ as S}from"./index-71c7df08.js";import{_ as D}from"./tabbar.a37cc2d9.js";import{a as E,b as F}from"./article.62947818.js";import{M as N}from"./mescroll-body.49de0f6f.js";import{M as P}from"./mescroll-empty.95b8c17e.js";import{u as R}from"./useMescroll.26ccf5de.js";import"./cloneDeep.77735539.js";import"./mescroll-i18n.00218d15.js";/* empty css                                                                       */const T=S(e({__name:"list",setup(e){const{mescrollInit:S,downCallback:T,getMescroll:A}=R(_,v),O=a([]),Q=a([]),W=a(""),q=a(""),B=a(null),G=a(!1);l((async e=>{W.value=e.category_id||"",await E().then((e=>{const a={name:t("all"),category_id:""};O.value.push(a),O.value=O.value.concat(e.data.data)}))}));const H=e=>{G.value=!1;let a={category_id:W.value,title:q.value,page:e.num,limit:e.size};F(a).then((a=>{let l=a.data.data;1==e.num&&(Q.value=[]),Q.value=Q.value.concat(l),e.endSuccess(l.length),G.value=!0})).catch((()=>{G.value=!0,e.endErr()}))},J=()=>{A().resetUpScroll()};return s((()=>{setTimeout((()=>{A().optUp.textNoMore=t("end")}),500)})),(e,a)=>{const l=g,s=h,v=y,_=b,E=k(j("u-icon"),M),F=k(j("u--image"),z),R=k(j("tabbar"),D);return r(),o(v,{class:"bg-[var(--page-bg-color)] min-h-[100vh]",style:x(e.themeColor())},{default:c((()=>[n(v,{class:"fixed top-0 inset-x-0 z-10"},{default:c((()=>[n(v,{class:"px-[30rpx] bg-[#fff] h-[100rpx] flex items-center"},{default:c((()=>[n(v,{class:"flex-1 search-input"},{default:c((()=>[n(l,{onClick:i(J,["stop"]),class:"nc-iconfont nc-icon-sousuo-duanV6xx1 btn"},null,8,["onClick"]),n(s,{class:"input",maxlength:"50",type:"text",modelValue:q.value,"onUpdate:modelValue":a[0]||(a[0]=e=>q.value=e),placeholder:u(t)("searchPlaceholder"),placeholderClass:"text-[var(--text-color-light9)] text-[24rpx]","confirm-type":"search",onConfirm:J},null,8,["modelValue","placeholder"]),q.value?(r(),o(l,{key:0,class:"nc-iconfont nc-icon-cuohaoV6xx1 clear",onClick:a[1]||(a[1]=e=>q.value="")})):d("v-if",!0)])),_:1})])),_:1}),n(_,{"scroll-x":!0,"enable-flex":!0,class:"tab-style-2 -mt-[14rpx]"},{default:c((()=>[n(v,{class:"tab-content !justify-start scroll-view-wrap"},{default:c((()=>[(r(!0),p(f,null,m(O.value,((e,a)=>(r(),o(v,{class:C(["tab-items text-[28rpx] h-[90rpx] leading-[90rpx]",{"class-select":W.value==e.category_id," mr-[50rpx]":a!=O.value.lengt-1}]),onClick:a=>{return l=e.category_id,W.value=l,void A().resetUpScroll();var l},key:e.category_id},{default:c((()=>[w(I(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1}),n(N,{ref_key:"mescrollRef",ref:B,onInit:u(S),top:"176rpx",down:{use:!1},onUp:H},{default:c((()=>[(r(!0),p(f,null,m(Q.value,((e,a)=>(r(),o(v,{key:e.id,class:"flex align-center px-[var(--pad-sidebar-m)] py-[var(--pad-top-m)] bg-[#fff] mx-[var(--sidebar-m)] my-[var(--top-m)] rounded-[var(--rounded-big)]",onClick:a=>{return l=e.id,void V({url:"/addon/cms/pages/detail",param:{id:l}});var l}},{default:c((()=>[n(F,{width:"210rpx",height:"160rpx",radius:"var(--goods-rounded-big)",class:"overflow-hidden",src:u(U)(e.image),model:"aspectFill"},{error:c((()=>[n(E,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"]),n(v,{class:"flex-1 flex flex-col my-[4rpx] ml-[20rpx]"},{default:c((()=>[n(v,{class:"text-[30rpx] leading-[1.3] multi-hidden"},{default:c((()=>[w(I(e.title),1)])),_:2},1024),n(v,{class:"text-[var(--text-color-light9)] text-[24rpx] mt-auto flex items-center justify-between"},{default:c((()=>[n(l,null,{default:c((()=>[w(I(e.create_time.replace(/\-/g,".")),1)])),_:2},1024),n(v,{class:"inline-block"},{default:c((()=>[n(l,{class:"!text-[24rpx] -mb-[4rpx] iconfont iconyanjing mr-[6rpx]"}),n(l,null,{default:c((()=>[w(I(parseInt(e.visit)+parseInt(e.visit_virtual)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),!Q.value.length&&G.value?(r(),o(P,{key:0})):d("v-if",!0)])),_:1},8,["onInit"]),n(R)])),_:1},8,["style"])}}}),[["__scopeId","data-v-d778d4b0"]]);export{T as default};
