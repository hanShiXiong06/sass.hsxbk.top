import{d as e,r,p as l,E as t,o as a,c as s,w as o,u as d,b as u,y as p,z as n,f as i,A as f,n as x,a as _,i as c,B as m,g,h as b,D as y,C as h,F as v}from"./index-2882a2d8.js";import{_ as j}from"./u--image.d52c0594.js";import{_ as w}from"./u--input.e0cc8d22.js";import{_ as k}from"./u-form-item.03ed7ff5.js";import{_ as C}from"./u--form.b2bc768e.js";import{_ as F}from"./u-modal.c146ecea.js";import{_ as V}from"./u-loading-page.8280c7ab.js";import{t as O}from"./topTabbar.ab70b119.js";import{c as T,i as z,r as B,h as S}from"./refund.a9e0d367.js";import{l as L}from"./logistics-tracking.b2027333.js";import{_ as R}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.46ebbbc1.js";import"./u-icon.1104ad2f.js";import"./u-transition.4448d2e5.js";import"./u-input.6410b5d0.js";/* empty css                                                                */import"./u-line.d7ff94e2.js";/* empty css                                                               */import"./u-form.54744837.js";import"./u-loading-icon.a37f7e61.js";/* empty css                                                                       */import"./u-popup.2abbe959.js";import"./u-overlay.1a317a4e.js";import"./u-safe-bottom.f13b01b8.js";/* empty css                                                                */import"./u-steps.efe1398b.js";import"./u-text.1d25de27.js";import"./order.35117c90.js";const U=R(e({__name:"detail",setup(e){O().setTopTabbarParam({title:"退款详情"});let R=r({}),U=r(!0),q=r(""),A=r(""),E=r(!1);const J=r("");r("");const P=r(""),D=r({express_number:"",express_company:"",remark:""}),H={express_number:{type:"string",required:!0,message:"请输入物流单号",trigger:["blur","change"]},express_company:{type:"string",required:!0,message:"请输入物流公司",trigger:["blur","change"]}};l((e=>{q.value=e.order_refund_no,A.value=e.type,E.value=e.is_edit_delivery,I(q.value)}));const I=e=>{U.value=!0,T(e).then((e=>{R.value=e.data,E.value&&R.value.delivery&&(D.value.express_number=R.value.delivery.express_number,D.value.express_company=R.value.delivery.express_company,D.value.remark=R.value.delivery.remark),J.value=R.value.order_goods.goods_name,P.value=t(R.value.order_goods.goods_image_thumb_small||""),U.value=!1})).catch((()=>{U.value=!1}))},M=e=>{_({url:"/addon/phone_shop/pages/goods/detail",param:{goods_id:e}})},N=r(),W=()=>{N.value.validate().then((e=>{let r={delivery:D.value,order_refund_no:R.value.order_refund_no};(E.value?z(r):B(r)).then((e=>{setTimeout((()=>{_({url:"/addon/phone_shop/pages/refund/list"})}),500)})).catch((()=>{}))}))},Z=e=>{"cancel"==e?(G=R.value.order_refund_no,$.value=!0):"edit"==e?_({url:"/addon/phone_shop/pages/refund/edit_apply",param:{order_refund_no:R.value.order_refund_no}}):"logistics"==e?_({url:"/addon/phone_shop/pages/refund/detail",param:{order_refund_no:R.value.order_refund_no,type:"logistics"}}):"editLogistics"==e&&_({url:"/addon/phone_shop/pages/refund/detail",param:{order_refund_no:R.value.order_refund_no,type:"logistics",is_edit_delivery:!0}})},$=r(!1);let G="";const K=()=>{S(G).then((e=>{$.value=!1,I(q.value)})).catch((()=>{$.value=!1}))},Q=()=>{$.value=!1};return(e,r)=>{const l=c,O=m,T=g(b("u--image"),j),z=y,B=g(b("u--input"),w),S=g(b("u-form-item"),k),E=g(b("u--form"),C),J=h,P=g(b("u-modal"),F),I=g(b("u-loading-page"),V);return a(),s(l,{style:x(e.themeColor())},{default:o((()=>[d(U)?i("v-if",!0):(a(),s(l,{key:0,class:"bg-[#f8f8f8] min-h-screen overflow-hidden"},{default:o((()=>["logistics"!=d(A)?(a(),s(l,{key:0,class:"pb-[200rpx]"},{default:o((()=>[u(l,{class:"bg-linear"},{default:o((()=>[d(R).status_name?(a(),s(l,{key:0,class:"flex justify-between items-center pl-[40rpx] pr-[50rpx] h-[170rpx]"},{default:o((()=>[u(l,{class:"text-[36rpx] font-500 leading-[42rpx] text-[#fff]"},{default:o((()=>[p(n(d(R).status_name),1)])),_:1}),u(l,null,{default:o((()=>[-1!=["1","2","4","6","7"].indexOf(d(R).status)?(a(),s(O,{key:0,class:"w-[180rpx] h-[140rpx]",src:d(t)("addon/phone_shop/detail/payment.png"),mode:"aspectFit"},null,8,["src"])):i("v-if",!0),-1!=["8"].indexOf(d(R).status)?(a(),s(O,{key:1,class:"w-[180rpx] h-[140rpx]",src:d(t)("addon/phone_shop/detail/complete.png"),mode:"aspectFit"},null,8,["src"])):i("v-if",!0),-1!=["3","5","-1"].indexOf(d(R).status)?(a(),s(O,{key:2,class:"w-[180rpx] h-[140rpx]",src:d(t)("addon/phone_shop/detail/close.png"),mode:"aspectFit"},null,8,["src"])):i("v-if",!0)])),_:1})])),_:1})):i("v-if",!0)])),_:1}),u(l,{class:"bg-[#fff] sidebar-marign p-[20rpx] rounded-[16rpx] flex justify-between flex-wrap mt-[20rpx]"},{default:o((()=>[u(l,{class:"w-[150rpx] h-[150rpx] flex-2",onClick:r[0]||(r[0]=e=>M(d(R).order_goods.goods_id))},{default:o((()=>[u(T,{class:"rounded-[10rpx] overflow-hidden",width:"150rpx",height:"150rpx",src:d(t)(d(R).order_goods.goods_image_thumb_small?d(R).order_goods.goods_image_thumb_small:""),model:"aspectFill"},{error:o((()=>[u(O,{class:"w-[150rpx] h-[150rpx] rounded-[10rpx] overflow-hidden",src:d(t)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:1},8,["src"])])),_:1}),u(l,{class:"ml-[20rpx] flex flex-1 flex-col justify-between text-[#303133]"},{default:o((()=>[u(l,null,{default:o((()=>[u(z,{class:"text-[28rpx] text-item leading-[40rpx]"},{default:o((()=>[p(n(d(R).order_goods.goods_name),1)])),_:1}),d(R).order_goods.sku_name?(a(),s(l,{key:0,class:"flex"},{default:o((()=>[u(l,{class:"text-[24rpx] mt-[10rpx] text-[#999] truncate max-w-[450rpx] leading-[28rpx]"},{default:o((()=>[p(n(d(R).order_goods.sku_name),1)])),_:1})])),_:1})):i("v-if",!0)])),_:1}),u(l,{class:"flex justify-between items-center leading-[28rpx]"},{default:o((()=>[u(l,{class:"price-font"},{default:o((()=>[u(z,{class:"text-[24rpx]"},{default:o((()=>[p("￥")])),_:1}),u(z,{class:"text-[32rpx] font-500"},{default:o((()=>[p(n(parseFloat(d(R).order_goods.price).toFixed(2).split(".")[0]),1)])),_:1}),u(z,{class:"text-[22rpx] font-500"},{default:o((()=>[p("."+n(parseFloat(d(R).order_goods.price).toFixed(2).split(".")[1]),1)])),_:1})])),_:1}),u(z,{class:"text-right text-[26rpx]"},{default:o((()=>[p("x"+n(d(R).order_goods.num),1)])),_:1})])),_:1})])),_:1})])),_:1}),u(l,{class:"bg-[#fff] sidebar-marign p-[20rpx] mt-[20rpx] rounded-[16rpx]"},{default:o((()=>[u(l,{class:"flex justify-between text-[28rpx] leading-[32rpx]"},{default:o((()=>[u(l,null,{default:o((()=>[p(n(d(v)("refundMoney")),1)])),_:1}),u(l,{class:"price-font"},{default:o((()=>[u(z,{class:"text-[24rpx]"},{default:o((()=>[p("￥")])),_:1}),u(z,{class:"text-[32rpx] font-500"},{default:o((()=>[p(n(parseFloat(d(R).apply_money).toFixed(2).split(".")[0]),1)])),_:1}),u(z,{class:"text-[24rpx] font-500"},{default:o((()=>[p("."+n(parseFloat(d(R).apply_money).toFixed(2).split(".")[1]),1)])),_:1})])),_:1})])),_:1}),u(l,{class:"flex justify-between text-[28rpx] leading-[32rpx] mt-[30rpx]"},{default:o((()=>[u(l,null,{default:o((()=>[p(n(d(v)("refundType")),1)])),_:1}),u(l,null,{default:o((()=>[p(n(d(R).refund_type_name),1)])),_:1})])),_:1}),u(l,{class:"flex justify-between text-[28rpx] leading-[32rpx] mt-[30rpx]"},{default:o((()=>[u(l,null,{default:o((()=>[p(n(d(v)("refundCause")),1)])),_:1}),u(l,{class:"w-[400rpx] multi-hidden text-right"},{default:o((()=>[p(n(d(R).reason||"--"),1)])),_:1})])),_:1}),u(l,{class:"flex justify-between text-[28rpx] leading-[32rpx] mt-[30rpx]"},{default:o((()=>[u(l,null,{default:o((()=>[p(n(d(v)("refundNo")),1)])),_:1}),u(l,null,{default:o((()=>[p(n(d(R).order_refund_no),1)])),_:1})])),_:1}),u(l,{class:"flex justify-between text-[28rpx] leading-[32rpx] mt-[30rpx]"},{default:o((()=>[u(l,null,{default:o((()=>[p(n(d(v)("createTime")),1)])),_:1}),u(l,null,{default:o((()=>[p(n(d(R).create_time),1)])),_:1})])),_:1}),u(l,{class:"flex justify-between text-[28rpx] leading-[32rpx] mt-[30rpx]"},{default:o((()=>[u(l,null,{default:o((()=>[p(n(d(v)("createExplain")),1)])),_:1}),u(l,{class:"flex-1 ml-[20rpx] flex justify-end break-all"},{default:o((()=>[p(n(d(R).remark),1)])),_:1})])),_:1}),u(l,{class:"flex justify-between text-[28rpx] leading-[32rpx] mt-[30rpx]"},{default:o((()=>[u(l,null,{default:o((()=>[p(n(d(v)("reasonRefusal")),1)])),_:1}),u(l,{class:"w-[400rpx] text-right"},{default:o((()=>[p(n(d(R).shop_reason||"--"),1)])),_:1})])),_:1})])),_:1}),u(l,{class:"bg-[#fff] sidebar-marign p-[20rpx] mt-[20rpx] rounded-[16rpx]"},{default:o((()=>[u(l,{class:"flex justify-between text-[28rpx] leading-[32rpx]"},{default:o((()=>[u(l,null,{default:o((()=>[p(n(d(v)("record")),1)])),_:1}),u(l,{class:"flex items-center",onClick:r[1]||(r[1]=e=>d(_)({url:"/addon/phone_shop/pages/refund/log",param:{order_refund_no:d(q)}}))},{default:o((()=>[u(z,null,{default:o((()=>[p(n(d(v)("check")),1)])),_:1}),u(z,{class:"nc-iconfont nc-icon-youV6xx text-[30rpx] text-[#999]"})])),_:1})])),_:1})])),_:1}),u(l,{class:"flex tab-bar justify-between items-center bg-[#fff] fixed left-0 right-0 bottom-0 min-h-[100rpx] px-1 flex-wrap"},{default:o((()=>[u(l,{class:"flex"},{default:o((()=>[u(l,{class:"flex w-[70rpx] mr-[20rpx] flex-col justify-center items-center",onClick:r[2]||(r[2]=e=>d(_)({url:"/addon/phone_shop/pages/index",mode:"reLaunch"}))},{default:o((()=>[u(l,{class:"nc-iconfont nc-icon-shouyeV6xx text-[36rpx]"}),u(z,{class:"text-[20rpx] mt-[10rpx]"},{default:o((()=>[p(n(d(v)("index")),1)])),_:1})])),_:1})])),_:1}),u(l,{class:"flex justify-end mr-[30rpx]"},{default:o((()=>[-1==["6","7","8","-1"].indexOf(d(R).status)?(a(),s(l,{key:0,class:"text-[26rpx] leading-[52rpx] px-[23rpx] border-[2rpx] border-solid border-[#999] rounded-full ml-[20rpx] text-[#303133]",onClick:r[3]||(r[3]=e=>Z("cancel"))},{default:o((()=>[p(n(d(v)("refundApply")),1)])),_:1})):i("v-if",!0),-1!=["3"].indexOf(d(R).status)?(a(),s(l,{key:1,class:"text-[24rpx] text-[#303133] leading-[52rpx] px-[23rpx] border-[2rpx] border-solid border-[#999] rounded-full ml-[20rpx]",onClick:r[4]||(r[4]=f((e=>Z("edit")),["stop"]))},{default:o((()=>[p("编辑退款信息")])),_:1})):i("v-if",!0),-1!=["2"].indexOf(d(R).status)?(a(),s(l,{key:2,class:"text-[24rpx] text-[#303133] leading-[52rpx] px-[23rpx] border-[2rpx] border-solid border-[#999] rounded-full ml-[20rpx]",onClick:r[5]||(r[5]=f((e=>Z("logistics")),["stop"]))},{default:o((()=>[p("填写发货物流")])),_:1})):i("v-if",!0),-1!=["5"].indexOf(d(R).status)?(a(),s(l,{key:3,class:"text-[24rpx] text-[#303133] leading-[52rpx] px-[23rpx] border-[2rpx] border-solid border-[#999] rounded-full ml-[20rpx]",onClick:r[6]||(r[6]=f((e=>Z("editLogistics")),["stop"]))},{default:o((()=>[p("编辑发货物流")])),_:1})):i("v-if",!0)])),_:1})])),_:1})])),_:1})):(a(),s(l,{key:1},{default:o((()=>[u(l,{class:"bg-[#fff] sidebar-marign p-[20rpx] rounded-[16rpx] flex justify-between flex-wrap mt-[20rpx]"},{default:o((()=>[u(l,{class:"w-[150rpx] h-[150rpx] flex-2",onClick:r[7]||(r[7]=e=>M(d(R).order_goods.goods_id))},{default:o((()=>[u(T,{class:"rounded-[10rpx] overflow-hidden",width:"150rpx",height:"150rpx",src:d(t)(d(R).order_goods.sku_image?d(R).order_goods.sku_image:""),model:"aspectFill"},{error:o((()=>[u(O,{class:"w-[150rpx] h-[150rpx] rounded-[10rpx] overflow-hidden",src:d(t)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:1},8,["src"])])),_:1}),u(l,{class:"ml-[20rpx] flex flex-1 flex-col justify-between"},{default:o((()=>[u(l,null,{default:o((()=>[u(z,{class:"text-[28rpx] text-item leading-[40rpx]"},{default:o((()=>[p(n(d(R).order_goods.goods_name),1)])),_:1}),d(R).order_goods.sku_name?(a(),s(l,{key:0,class:"flex"},{default:o((()=>[u(z,{class:"text-[24rpx] mt-[10rpx] text-[#999] truncate max-w-[450rpx] leading-[28rpx]"},{default:o((()=>[p(n(d(R).order_goods.sku_name),1)])),_:1})])),_:1})):i("v-if",!0)])),_:1}),u(l,{class:"flex justify-between items-center leading-[28rpx]"},{default:o((()=>[u(l,{class:"price-font"},{default:o((()=>[u(z,{class:"text-[24rpx]"},{default:o((()=>[p("￥")])),_:1}),u(z,{class:"text-[32rpx] font-500"},{default:o((()=>[p(n(parseFloat(d(R).order_goods.price).toFixed(2).split(".")[0]),1)])),_:1}),u(z,{class:"text-[22rpx] font-500"},{default:o((()=>[p("."+n(parseFloat(d(R).order_goods.price).toFixed(2).split(".")[1]),1)])),_:1})])),_:1}),u(z,{class:"text-right text-[26rpx]"},{default:o((()=>[p("x"+n(d(R).order_goods.num),1)])),_:1})])),_:1})])),_:1})])),_:1}),u(l,{class:"bg-[#fff] sidebar-marign p-[20rpx] rounded-[16rpx] mt-[20rpx]"},{default:o((()=>[u(l,{class:"flex justify-between text-[28rpx] leading-[32rpx]"},{default:o((()=>[u(l,null,{default:o((()=>[p("联系人")])),_:1}),u(l,null,{default:o((()=>[p(n(d(R).refund_address.contact_name),1)])),_:1})])),_:1}),u(l,{class:"flex justify-between text-[28rpx] leading-[32rpx] mt-[30rpx]"},{default:o((()=>[u(l,null,{default:o((()=>[p("手机号")])),_:1}),u(l,null,{default:o((()=>[p(n(d(R).refund_address.mobile),1)])),_:1})])),_:1}),u(l,{class:"flex justify-between text-[28rpx] leading-[32rpx] mt-[30rpx]"},{default:o((()=>[u(l,null,{default:o((()=>[p("退货地址")])),_:1}),d(R).refund_address?(a(),s(l,{key:0,class:"w-[460rpx] text-sm text-right"},{default:o((()=>[p(n(d(R).refund_address.full_address||"--"),1)])),_:1})):i("v-if",!0)])),_:1})])),_:1}),u(l,{class:"bg-[#fff] sidebar-marign p-[20rpx] rounded-[16rpx] mt-[20rpx]"},{default:o((()=>[u(E,{labelPosition:"left",model:D.value,rules:H,ref_key:"deliveryForm",ref:N,labelWidth:"140rpx",labelStyle:{fontSize:"28rpx"}},{default:o((()=>[u(S,{label:"物流公司",prop:"express_company",borderBottom:"true",ref:"item1"},{default:o((()=>[u(B,{pl:"",border:"none",modelValue:D.value.express_company,"onUpdate:modelValue":r[8]||(r[8]=e=>D.value.express_company=e),placeholder:"请输入物流公司",placeholderClass:"text-sm",fontSize:"28rpx"},null,8,["modelValue"])])),_:1},512),u(S,{label:"物流单号",prop:"express_number",borderBottom:"true",ref:"item1"},{default:o((()=>[u(B,{border:"none",placeholder:"请输入物流单号",modelValue:D.value.express_number,"onUpdate:modelValue":r[9]||(r[9]=e=>D.value.express_number=e),placeholderClass:"text-sm",fontSize:"28rpx"},null,8,["modelValue"])])),_:1},512),u(S,{label:"物流说明",borderBottom:"",ref:"item1"},{default:o((()=>[u(B,{border:"none",placeholder:"选填",modelValue:D.value.remark,"onUpdate:modelValue":r[10]||(r[10]=e=>D.value.remark=e),placeholderClass:"text-sm",fontSize:"28rpx"},null,8,["modelValue"])])),_:1},512)])),_:1},8,["model"])])),_:1}),u(l,{class:"sidebar-marign"},{default:o((()=>[u(J,{class:"mt-[20rpx] bg-[var(--primary-color)] text-[#fff] h-[80rpx] leading-[80rpx] rounded-[100rpx] text-[28rpx]",onClick:W},{default:o((()=>[p("提交")])),_:1})])),_:1})])),_:1})),u(L,{ref:"materialRef"},null,512),u(P,{show:$.value,confirmColor:"var(--primary-color)",content:d(v)("cancelRefundContent"),showCancelButton:!0,closeOnClickOverlay:!0,onCancel:Q,onConfirm:K},null,8,["show","content"])])),_:1})),u(I,{"bg-color":"rgb(248,248,248)",loading:d(U),loadingText:"",fontSize:"16",color:"#303133"},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-229af0e5"]]);export{U as default};
