import{d as a,r as e,Z as s,p as t,K as o,s as l,H as i,bu as n,E as u,o as d,c as r,w as p,P as c,b as m,f as _,y as f,Q as v,n as g,B as h,i as y,C as w,g as j,h as x}from"./index-7bf68536.js";import{_ as b}from"./u-popup.be4bfacd.js";import{_ as k}from"./loading-page.vue_vue_type_script_setup_true_lang.124ad65f.js";import{_ as C}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-transition.cdf87992.js";import"./u-icon.0c1c54c7.js";import"./u-safe-bottom.908eeae4.js";import"./u-loading-page.566c330a.js";import"./u-loading-icon.b37701e7.js";const S=C(a({__name:"promote_code",setup(a){const C=e(!1),S=e(!0),z=()=>{C.value=!1};e(null);const{setShare:B}=s();t((a=>{if(!a.id){return void o({url:"/addon/shop/pages/index",title:"缺少会员id",mode:"reLaunch"})}if(!l())return void i().setLoginBack({url:"/addon/shop_fenxiao/pages/promote_code",param:{id:a.id,mid:a.mid}});A(a.id);let e={title:"分销推广",desc:"分销推广"};B({wechat:{...e},weapp:{...e}})}));const L=e(""),A=a=>{S.value=!0,n({type:"fenxiao",param:{member_id:a}}).then((a=>{L.value=a.data&&u(a.data)||"",S.value=!1}))};return(a,e)=>{const s=h,t=y,o=w,l=j(x("u-popup"),b),i=j(x("loading-page"),k);return d(),r(t,{class:"container",style:g(a.themeColor())},{default:p((()=>[S.value?_("v-if",!0):(d(),c(v,{key:0},[m(t,{class:"poster-wrap"},{default:p((()=>[L.value?(d(),r(s,{key:0,src:L.value,mode:"widthFix","show-menu-by-longpress":!0},null,8,["src"])):_("v-if",!0)])),_:1}),m(t,{class:"tips"},{default:p((()=>[f("长按识别图中二维码")])),_:1}),m(l,{show:C.value,onClose:e[0]||(e[0]=a=>C.value=!1),mode:"center",round:"var(--rounded-big)","safe-area-inset-bottom":!1,customStyle:{overflow:"hidden"}},{default:p((()=>[m(t,{class:"dialog-popup"},{default:p((()=>[m(t,{class:"title"},{default:p((()=>[f("提示")])),_:1}),m(t,{class:"message"},{default:p((()=>[f("您拒绝了保存图片到相册的授权请求，无法保存图片到相册，如需正常使用，请授权之后再进行操作。")])),_:1}),m(t,{class:"action-wrap"},{default:p((()=>[m(t,{onClick:z},{default:p((()=>[f("取消")])),_:1}),m(t,{class:"flex items-end"},{default:p((()=>[m(o,{type:"default",class:"authorization-btn","open-type":"openSetting",onOpensetting:z,"hover-class":"none"},{default:p((()=>[f("立即授权")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["show","round"])],64)),m(i,{loading:S.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-6c973d3f"]]);export{S as default};
