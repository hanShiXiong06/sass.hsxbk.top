import{d as e,r as t,j as a,l,o as s,c as r,w as o,b as u,u as i,A as n,y as p,z as d,f as c,P as x,Q as f,a7 as m,R as _,H as v,a as g,E as h,bo as b,B as y,g as k,h as w,i as j,D as C,a5 as S,a6 as F,C as V,F as T,s as E,Z as O,p as z,K as I,a0 as L,J as A,ah as D,x as P,bj as U,a9 as R,b2 as B,b$ as J,n as N,b5 as G,U as H,V as K,b6 as M}from"./index-7bf68536.js";import{_ as Z}from"./u-swiper.f792d47e.js";import{_ as Q}from"./u-avatar.0bc202a4.js";import{_ as W}from"./u-icon.0c1c54c7.js";import{_ as X}from"./u--image.b3bf1d5c.js";import{_ as Y}from"./u-parse.525658f5.js";import{_ as $}from"./u-popup.be4bfacd.js";import{_ as q}from"./loading-page.vue_vue_type_script_setup_true_lang.124ad65f.js";import{e as ee}from"./goods.ac47f924.js";import{c as te}from"./point.8ad0430b.js";import{_ as ae}from"./u-number-box.30c0ab2e.js";import{b as le}from"./bind-mobile.37d1c6df.js";import{f as se}from"./cloneDeep.77735539.js";import{_ as re}from"./_plugin-vue_export-helper.1b428a4d.js";import{s as oe}from"./share-poster.5efeffe7.js";import{u as ue}from"./useGoods.e187513d.js";import"./u-loading-icon.b37701e7.js";import"./u-text.df478cbc.js";import"./u-image.e46f68ef.js";import"./u-transition.cdf87992.js";import"./u-safe-bottom.908eeae4.js";import"./u-loading-page.566c330a.js";import"./u-form.78a4f7c2.js";import"./u-line.463a2a45.js";import"./sms-code.vue_vue_type_script_setup_true_lang.eace8f61.js";import"./u-input.09a5cedd.js";import"./u-modal.b47eb877.js";import"./u-checkbox-group.b2a485bf.js";/* empty css                                                                     */const ie=re(e({__name:"goods-sku",props:["goodsDetail"],emits:["change"],setup(e,{expose:O,emit:z}){const I=e,L=t(!1),A=t(null),D=t({skuId:"",name:[]}),P=t(""),U=t(1),R=a((()=>{let e="0.00";return e=Object.keys(K.value).length&&Object.keys(K.value.goods).length&&K.value.goods.member_discount&&E()&&K.value.member_price!=K.value.price&&K.value.member_price?K.value.member_price:K.value.price,e})),B=()=>{setTimeout((()=>{U.value>=K.value.stock&&(U.value=K.value.stock)}),0)},J=()=>{setTimeout((()=>{(!U.value||U.value<=0)&&(U.value=1),U.value>=K.value.stock&&(U.value=K.value.stock)}),0)},N=l(),G=a((()=>N.info)),H=()=>{L.value=!1},K=a((()=>{let e=se(I.goodsDetail);return Object.keys(e).length&&(Object.keys(D.value.name).length||(D.value.name=e.sku_spec_format.split(",")),e.goodsSpec.forEach(((e,t)=>{let a=e.spec_values.split(",");e.values=[],a.forEach(((a,l)=>{e.values[l]={},e.values[l].name=a,e.values[l].selected=!1,e.values[l].disabled=!1,D.value.name.forEach(((s,r)=>{r==t&&s==a&&(e.values[l].selected=!0)}))}))})),M(),e.skuList&&Object.keys(e.skuList).length&&e.skuList.forEach(((t,a)=>{t.sku_id==D.value.skuId&&(e.detail=t)}))),e})),M=()=>{I.goodsDetail.skuList.forEach(((e,t)=>{e.sku_spec_format==D.value.name.toString()&&(D.value.skuId=e.sku_id,z("change",e.sku_id))}))},Z=t(null);t(uni.getStorageSync("isbindmobile"));const Q=()=>{if(!G.value)return v().setLoginBack({url:"/addon/shop/pages/point/detail",param:{id:K.value.exchange_id}}),!1;if(uni.getStorageSync("isbindmobile"))return Z.value.open(),!1;var e={sku_id:K.value.sku_id,num:U.value};uni.setStorage({key:"orderCreateData",data:{sku_data:[e]},success:()=>{g({url:"/addon/shop/pages/point/payment"})}}),H()};return O({open:(e="",t="")=>{P.value=e,L.value=!0,A.value=t}}),(e,t)=>{const a=y,l=k(w("u--image"),X),v=j,g=C,E=S,O=k(w("u-number-box"),ae),z=F,I=V,A=k(w("u-popup"),$);return s(),r(v,{onTouchmove:t[4]||(t[4]=n((()=>{}),["prevent","stop"]))},{default:o((()=>[u(A,{class:"popup-type",show:L.value,onClose:H,mode:"bottom"},{default:o((()=>[i(K).detail?(s(),r(v,{key:0,class:"py-[32rpx] relative",onTouchmove:t[3]||(t[3]=n((()=>{}),["prevent","stop"]))},{default:o((()=>[u(v,{class:"flex px-[32rpx] mb-[40rpx]"},{default:o((()=>[u(v,{class:"w-[180rpx] h-[180rpx]"},{default:o((()=>[u(l,{width:"180rpx",height:"180rpx",radius:"var(--goods-rounded-big)",src:i(h)(i(K).detail.sku_image),onClick:t[0]||(t[0]=e=>(e=>{if(""===e)return!1;var t=[];t.push(h(e)),b({indicator:"number",loop:!0,urls:t})})(i(K).detail.sku_image)),model:"aspectFill"},{error:o((()=>[u(a,{class:"w-[180rpx] h-[180rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:i(h)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:1},8,["radius","src"])])),_:1}),u(v,{class:"flex flex-1 flex-col justify-between ml-[20rpx] py-[10rpx]"},{default:o((()=>[u(v,{class:"w-[100%]"},{default:o((()=>[u(v,{class:"text-[var(--price-text-color)] flex items-baseline"},{default:o((()=>[i(K).point?(s(),r(g,{key:0,class:"price-font"},{default:o((()=>[u(g,{class:"text-[44rpx]"},{default:o((()=>[p(d(i(K).point),1)])),_:1}),u(g,{class:"text-[38rpx]"},{default:o((()=>[p(d(i(T)("point")),1)])),_:1})])),_:1})):c("v-if",!0),i(K).point&&parseFloat(i(K).price)?(s(),r(g,{key:1,class:"text-[38rpx]"},{default:o((()=>[p("+")])),_:1})):c("v-if",!0),i(K).point&&parseFloat(i(K).price)?(s(),x(f,{key:2},[u(g,{class:"text-[44rpx] price-font"},{default:o((()=>[p(d(parseFloat(i(K).price).toFixed(2)),1)])),_:1}),u(g,{class:"text-[38rpx] price-font"},{default:o((()=>[p("元")])),_:1})],64)):c("v-if",!0),i(K).point||parseFloat(i(K).price)?c("v-if",!0):(s(),x(f,{key:3},[u(g,{class:"text-[26rpx] price-font"},{default:o((()=>[p("￥")])),_:1}),u(g,{class:"text-[44rpx] price-font"},{default:o((()=>[p(d(parseFloat(i(K).price).toFixed(2).split(".")[0]),1)])),_:1}),u(g,{class:"text-[26rpx] mr-[6rpx] price-font"},{default:o((()=>[p("."+d(parseFloat(i(R)).toFixed(2).split(".")[1]),1)])),_:1})],64))])),_:1}),u(v,{class:"text-[26rpx] leading-[32rpx] text-[var(--text-color-light6)] mt-[10rpx]"},{default:o((()=>[p("库存"+d(i(K).detail.stock)+d(i(K).goods.unit),1)])),_:1})])),_:1}),i(K).goodsSpec&&i(K).goodsSpec.length?(s(),r(v,{key:0,class:"text-[26rpx] leading-[30rpx] text-[var(--text-color-light6)] w-[100%] max-h-[60rpx] multi-hidden"},{default:o((()=>[p("已选规格："+d(i(K).detail.sku_spec_format),1)])),_:1})):c("v-if",!0)])),_:1})])),_:1}),u(z,{class:"h-[500rpx] px-[32rpx] box-border mb-[60rpx]","scroll-y":"true"},{default:o((()=>[(s(!0),x(f,null,m(i(K).goodsSpec,((e,t)=>(s(),r(v,{class:_({"mt-[20rpx]":0!=t}),key:t},{default:o((()=>[u(v,{class:"text-[28rpx] leading-[36rpx] mb-[24rpx]"},{default:o((()=>[p(d(e.spec_name),1)])),_:2},1024),u(v,{class:"flex flex-wrap"},{default:o((()=>[(s(!0),x(f,null,m(e.values,((e,a)=>(s(),r(v,{class:_(["box-border bg-[var(--temp-bg)] text-[24rpx] px-[44rpx] text-center h-[56rpx] flex-center mr-[20rpx] mb-[20rpx] border-1 border-solid rounded-[50rpx] border-[var(--temp-bg)]",{"!border-[var(--primary-color)] text-[var(--primary-color)] !bg-[var(--primary-color-light)]":e.selected}]),key:a,onClick:a=>((e,t)=>{D.value.name[t]=e.name,U.value=1,M()})(e,t)},{default:o((()=>[p(d(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:2},1024)])),_:2},1032,["class"])))),128)),u(v,{class:"flex justify-between items-center mt-[8rpx]"},{default:o((()=>[u(v,{class:"text-[28rpx]"},{default:o((()=>[p("购买数量")])),_:1}),u(O,{min:1,max:parseInt(i(K).detail.limit_num)<i(K).stock?parseInt(i(K).detail.limit_num):i(K).stock,integer:"",step:1,"input-width":"68rpx",modelValue:U.value,"onUpdate:modelValue":t[2]||(t[2]=e=>U.value=e),"input-height":"52rpx"},{minus:o((()=>[u(g,{class:_(["text-[30rpx] nc-iconfont nc-icon-jianV6xx font-500",{"!text-[var(--text-color-light9)]":U.value<=1}])},null,8,["class"])])),input:o((()=>[u(E,{class:"text-[#303133] text-[28rpx] mx-[10rpx] w-[80rpx] h-[44rpx] bg-[var(--temp-bg)] leading-[44rpx] text-center rounded-[6rpx]",type:"number",onInput:B,onBlur:J,modelValue:U.value,"onUpdate:modelValue":t[1]||(t[1]=e=>U.value=e)},null,8,["modelValue"])])),plus:o((()=>[u(g,{class:_(["text-[30rpx] nc-iconfont nc-icon-jiahaoV6xx font-500",{"!text-[var(--text-color-light9)]":U.value>=i(K).stock||U.value==parseInt(i(K).detail.limit_num)}])},null,8,["class"])])),_:1},8,["max","modelValue"])])),_:1})])),_:1}),u(v,{class:"px-[20rpx]"},{default:o((()=>[i(K).detail.stock>0?(s(),r(I,{key:0,"hover-class":"none",class:"!h-[80rpx] primary-btn-bg leading-[80rpx] text-[26rpx] rounded-[50rpx] font-500",type:"primary",onClick:Q},{default:o((()=>[p("确定")])),_:1})):(s(),r(I,{key:1,"hover-class":"none",class:"!h-[80rpx] leading-[80rpx] text-[26rpx] text-[#fff] bg-[#ccc] rounded-[50rpx] font-500"},{default:o((()=>[p("已售罄")])),_:1}))])),_:1})])),_:1})):c("v-if",!0)])),_:1},8,["show"]),c(" 强制绑定手机号 "),u(le,{ref_key:"bindMobileRef",ref:Z},null,512)])),_:1})}}}),[["__scopeId","data-v-43402919"]]),ne=re(e({__name:"detail",setup(e){const v=ue(),{setShare:S}=O(),E=l(),ae=a((()=>E.info)),le=t(""),se=t(""),re=t(""),ne=t(null),pe=t({}),de=t(!1),ce=t(!1),xe=t(!1),fe=t(!1);t(null),z((e=>{te(e.id||"").then((e=>{if("[]"===JSON.stringify(e.data)){return I({url:"/addon/shop/pages/index",title:"找不到该商品",mode:"reLaunch"}),!1}pe.value=L(e.data),pe.value.delivery_type_list=pe.value.goods.delivery_type_list?Object.values(pe.value.goods.delivery_type_list):[],pe.value.goods.goods_image=pe.value.goods.goods_image_thumb_big,pe.value.goods.goods_image.forEach(((e,t)=>{pe.value.goods.goods_image[t]=h(e)}));let t=L(e.data);if(pe.value.goods.attr_format=[],t.goods&&t.goods.attr_format){L(JSON.parse(t.goods.attr_format)).forEach(((e,t)=>{(e.attr_child_value_name&&!(e.attr_child_value_name instanceof Array)||e.attr_child_value_name instanceof Array&&e.attr_child_value_name.length)&&pe.value.goods.attr_format.push(e)}))}le.value=pe.value.goods.goods_name,se.value="/addon/shop/pages/point/detail?sku_id="+pe.value.sku_id,re.value=h(pe.value.goods.goods_cover_thumb_mid);let a={title:pe.value.goods.goods_name,desc:pe.value.goods.sub_title,url:pe.value.goods.goods_cover_thumb_mid};A({title:pe.value.goods.goods_name}),S({wechat:{...a},weapp:{...a}}),be(),Ae(),D((()=>{setTimeout((()=>{const e=G().in(Fe);e.select(".swiper-box").boundingClientRect((e=>{Ve=e?e.height:0})).exec(),e.select(".detail-head").boundingClientRect((e=>{e&&(Te=e.height?e.height:0)})).exec()}),400)}))}))})),P((()=>{uni.removeStorageSync("distributionType")}));const me=e=>{pe.value.skuList.forEach(((t,a)=>{t.sku_id==e&&Object.assign(pe.value,t)}))},_e=a((()=>{let e=!1;return pe.value.skuList.forEach(((t,a)=>{t.sku_spec_format&&(e=!0)})),!(!e&&pe.value.stock<=0)&&(!e&&pe.value.stock,!0)})),ve=a((()=>{let e=!1;return(pe.value.service&&pe.value.service.length||pe.value.goodsSpec&&pe.value.goodsSpec.length||"real"==pe.value.goods.goods_type&&pe.value.delivery_type_list&&pe.value.delivery_type_list.length)&&(e=!0),e})),ge=e=>{ne.value.open(e)},he=t({count:0}),be=()=>{ee(pe.value.goods_id).then((e=>{he.value=e.data}))},ye=(e,t)=>{if(Array.isArray(e)){var a=e;if(!e.length)return!1;b({indicator:"number",current:t,loop:!0,urls:a})}else{if(""===e)return!1;(a=[]).push(h(e)),b({indicator:"number",loop:!0,urls:a})}},ke=t(0),we=()=>{fe.value=!0};let je=U().platform;const Ce=a((()=>{let e="";return e+="height: 100rpx;",e+="padding-right: 30rpx;",e+="padding-left: 30rpx;",e+="font-size: 32rpx;","ios"===je?e+="font-weight: 500;":"android"===je&&(e+="font-size: 36rpx;"),e})),Se=a((()=>{let e="";return e+="font-size: 26px;","font-size: 26px;"})),Fe=M();let Ve=0,Te=0;const Ee=t(!1);R((e=>{let t=Ve-Te-20;Ee.value=!1,e.scrollTop>=t&&(Ee.value=!0)}));const Oe=e=>{"number"==typeof e&&ye(pe.value.goods.goods_image,e)},ze=t(null),Ie=t("");let Le={};const Ae=()=>{Ie.value="?id="+pe.value.exchange_id,ae.value&&ae.value.member_id&&(Ie.value+="&mid="+ae.value.member_id)},De=()=>{Le.id=pe.value.exchange_id,ae.value&&ae.value.member_id&&(Le.member_id=ae.value.member_id),ze.value.openShare()};return B((()=>{J()})),(e,t)=>{const a=C,l=j,b=k(w("u-swiper"),Z),S=y,E=k(w("u-avatar"),Q),O=k(w("u-icon"),W),z=k(w("u--image"),X),I=k(w("u-parse"),Y),L=V,A=F,D=k(w("u-popup"),$),P=k(w("loading-page"),q);return s(),r(l,{style:N(e.themeColor())},{default:o((()=>[u(A,{"scroll-y":"true",class:"h-[100vh] w-full"},{default:o((()=>[Object.keys(pe.value).length?(s(),r(l,{key:0,class:"bg-[var(--page-bg-color)] min-h-[100vh] relative"},{default:o((()=>[c(" 自定义头部 "),u(l,{class:_(["flex items-center fixed left-0 right-0 z-10 bg-transparent detail-head",{"!bg-[#fff]":Ee.value}]),style:N(i(Ce))},{default:o((()=>[u(a,{class:"nc-iconfont nc-icon-zuoV6xx",style:N(i(Se)),onClick:t[0]||(t[0]=e=>{H().length>1?K({delta:1}):g({url:"/addon/shop/pages/index",mode:"reLaunch"})})},null,8,["style"]),u(l,{class:_(["ml-auto !pt-[12rpx] !pb-[8rpx] p-[10rpx] bg-[rgba(255,255,255,.4)] rounded-full border-[2rpx] border-solid border-transparent box-border nc-iconfont nc-icon-fenxiangV6xx font-bold text-[#303133] text-[36rpx]",{"border-[#d8d8d8]":Ee.value}]),onClick:De},null,8,["class"])])),_:1},8,["class","style"]),u(l,{class:"swiper-box"},{default:o((()=>[u(b,{list:pe.value.goods.goods_image,indicator:pe.value.goods.goods_image.length,indicatorStyle:{bottom:"68rpx"},autoplay:!0,height:"100vw",onClick:Oe},null,8,["list","indicator"])])),_:1}),u(l,{class:"rounded-t-[40rpx] -mt-[40rpx] relative flex items-center justify-between !bg-cover box-border pb-[26rpx] h-[136rpx] px-[30rpx]",style:N({background:"url("+i(h)("addon/shop/detail/discount_price_bg.png")+") no-repeat"})},{default:o((()=>[u(l,{class:"flex items-baseline text-[#fff]"},{default:o((()=>[u(l,{class:"flex items-center"},{default:o((()=>[pe.value.point?(s(),r(l,{key:0,class:"inline-block price-font"},{default:o((()=>[u(a,{class:"text-[44rpx]"},{default:o((()=>[p(d(pe.value.point),1)])),_:1}),u(a,{class:"text-[38rpx]"},{default:o((()=>[p(d(i(T)("point")),1)])),_:1})])),_:1})):c("v-if",!0),pe.value.point&&parseFloat(pe.value.price)?(s(),r(a,{key:1,class:"text-[38rpx]"},{default:o((()=>[p("+")])),_:1})):c("v-if",!0),parseFloat(pe.value.price)?(s(),r(l,{key:2,class:"inline-block price-font"},{default:o((()=>[u(a,{class:"text-[44rpx]"},{default:o((()=>[p(d(parseFloat(pe.value.price).toFixed(2)),1)])),_:1}),u(a,{class:"text-[38rpx]"},{default:o((()=>[p(d(i(T)("priceUnit")),1)])),_:1})])),_:1})):c("v-if",!0)])),_:1})])),_:1})])),_:1},8,["style"]),u(l,{class:"bg-[var(--page-bg-color)] overflow-hidden rounded-[40rpx] -mt-[28rpx] relative"},{default:o((()=>[u(l,{class:"datail-title relative px-[30rpx] pt-[40rpx]"},{default:o((()=>[u(l,{class:"text-[#333] font-medium text-[30rpx] multi-hidden leading-[40rpx]"},{default:o((()=>[pe.value.goods.goods_brand?(s(),r(l,{key:0,class:"brand-tag middle"},{default:o((()=>[p(d(pe.value.goods.goods_brand.brand_name),1)])),_:1})):c("v-if",!0),p(" "+d(pe.value.goods.goods_name),1)])),_:1}),u(l,{class:"flex justify-between items-start mt-[24rpx]"},{default:o((()=>[pe.value.market_price&&parseFloat(pe.value.market_price)?(s(),r(l,{key:0,class:"text-[24rpx] leading-[34rpx] text-[var(--text-color-light6)]"},{default:o((()=>[u(a,{class:"whitespace-nowrap mr-[4rpx]"},{default:o((()=>[p("划线价:")])),_:1}),u(a,{class:"line-through"},{default:o((()=>[p("￥"+d(pe.value.market_price),1)])),_:1})])),_:1})):c("v-if",!0),pe.value.stock&&parseFloat(pe.value.stock)?(s(),r(l,{key:1,class:"text-[24rpx] leading-[34rpx] text-[var(--text-color-light6)]"},{default:o((()=>[u(a,{class:"whitespace-nowrap mr-[4rpx]"},{default:o((()=>[p("库存:")])),_:1}),u(a,{class:""},{default:o((()=>[p(d(pe.value.stock),1)])),_:1}),u(a,{class:""},{default:o((()=>[p(d(pe.value.goods.unit),1)])),_:1})])),_:1})):c("v-if",!0),u(l,{class:"text-[24rpx] leading-[34rpx] text-[var(--text-color-light6)] flex items-baseline"},{default:o((()=>[u(a,{class:"whitespace-nowrap mr-[4rpx]"},{default:o((()=>[p("销量:")])),_:1}),u(a,{class:"mx-[2rpx]"},{default:o((()=>[p(d(pe.value.goods.sale_num),1)])),_:1}),u(a,{class:""},{default:o((()=>[p(d(pe.value.goods.unit),1)])),_:1})])),_:1})])),_:1}),pe.value.label_info&&pe.value.label_info.length?(s(),r(l,{key:0,class:"flex flex-wrap mt-[16rpx]"},{default:o((()=>[(s(!0),x(f,null,m(pe.value.label_info,(e=>(s(),x(f,{key:e.label_id},["icon"==e.style_type&&e.icon?(s(),r(S,{key:0,class:"img-tag middle",src:i(h)(e.icon),mode:"heightFix",onError:t=>i(v).error(e,"icon")},null,8,["src","onError"])):"diy"!=e.style_type&&e.icon?c("v-if",!0):(s(),r(l,{key:1,class:"base-tag middle",style:N(i(v).baseTagStyle(e))},{default:o((()=>[p(d(e.label_name),1)])),_:2},1032,["style"]))],64)))),128))])),_:1})):c("v-if",!0)])),_:1}),i(ve)?(s(),r(l,{key:0,class:"mt-[24rpx] sidebar-margin card-template"},{default:o((()=>[pe.value.service&&pe.value.service.length?(s(),r(l,{key:0,onClick:t[1]||(t[1]=e=>xe.value=!xe.value),class:"card-template-item"},{default:o((()=>[u(a,{class:"text-[#333] text-[26rpx] leading-[30rpx] font-400 shrink-0"},{default:o((()=>[p("服务")])),_:1}),u(l,{class:"text-[#343434] text-[26rpx] leading-[30rpx] font-400 truncate ml-auto"},{default:o((()=>[p(d(pe.value.service[0].service_name),1)])),_:1}),u(a,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light6)] ml-[8rpx]"})])),_:1})):c("v-if",!0),pe.value.goodsSpec&&pe.value.goodsSpec.length?(s(),r(l,{key:1,onClick:ge,class:"card-template-item"},{default:o((()=>[u(a,{class:"text-[#333] text-[26rpx] leading-[30rpx] font-400 shrink-0 mr-[20rpx]"},{default:o((()=>[p("已选")])),_:1}),u(l,{class:"ml-auto text-right truncate flex-1 text-[#343434] text-[26rpx] leading-[30rpx] font-400"},{default:o((()=>[p(d(pe.value.sku_spec_format),1)])),_:1}),u(a,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light6)] ml-[8rpx]"})])),_:1})):c("v-if",!0),"real"==pe.value.goods.goods_type&&pe.value.delivery_type_list&&pe.value.delivery_type_list.length?(s(),r(l,{key:2,class:"card-template-item",onClick:we},{default:o((()=>[u(a,{class:"text-[#333] text-[26rpx] leading-[30rpx] font-400 shrink-0"},{default:o((()=>[p("配送")])),_:1}),u(l,{class:"ml-auto flex items-center text-[#343434] text-[26rpx] leading-[30rpx] font-400"},{default:o((()=>[p(d(pe.value.delivery_type_list[ke.value].name),1)])),_:1}),u(a,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light6)] ml-[8rpx]"})])),_:1})):c("v-if",!0)])),_:1})):c("v-if",!0),u(l,{class:"mt-[var(--top-m)] sidebar-margin card-template"},{default:o((()=>[u(l,{class:_(["flex items-center justify-between min-h-[40rpx]",{"mb-[30rpx]":he.value&&he.value.list&&he.value.list.length}])},{default:o((()=>[u(a,{class:"title !mb-[0]"},{default:o((()=>[p("宝贝评价("+d(he.value.count)+")",1)])),_:1}),he.value.count?(s(),r(l,{key:0,class:"h-[40rpx] flex items-center",onClick:t[2]||(t[2]=e=>(pe.value.goods_id,void g({url:"/addon/shop/pages/evaluate/list",param:{goods_id:pe.value.goods_id}})))},{default:o((()=>[u(a,{class:"text-[24rpx] text-[var(--text-color-light9)]"},{default:o((()=>[p("查看全部")])),_:1}),u(a,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light9)]"})])),_:1})):c("v-if",!0),he.value.count?c("v-if",!0):(s(),r(a,{key:1,class:"text-[24rpx] text-[var(--text-color-light6)]"},{default:o((()=>[p("暂无评价")])),_:1}))])),_:1},8,["class"]),u(l,null,{default:o((()=>[(s(!0),x(f,null,m(he.value.list,((e,t)=>(s(),r(l,{class:_({"pb-[34rpx]":t!=he.value.list.length-1}),key:t},{default:o((()=>[u(l,{class:"flex items-center w-full"},{default:o((()=>[u(E,{"default-url":i(h)("static/resource/images/default_headimg.png"),src:i(h)(e.member_head),size:"50rpx",leftIcon:"none"},null,8,["default-url","src"]),u(a,{class:"ml-[10rpx] text-[28rpx] text-[#333]"},{default:o((()=>[p(d(e.member_name),1)])),_:2},1024)])),_:2},1024),u(l,{class:"flex justify-between w-full mt-[16rpx]"},{default:o((()=>[u(l,{class:"flex-1 w-[540rpx] text-[26rpx] text-[#333] max-h-[72rpx] leading-[36rpx] multi-hidden mr-[50rpx]"},{default:o((()=>[p(d(e.content),1)])),_:2},1024),u(l,{class:"w-[80rpx] shrink-0"},{default:o((()=>[e.image_mid&&e.image_mid.length?(s(),r(z,{key:0,width:"80rpx",height:"80rpx",radius:"16rpx",src:i(h)(e.image_mid[0]),model:"aspectFill",onClick:t=>ye(e.images[0])},{error:o((()=>[u(O,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src","onClick"])):c("v-if",!0)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class"])))),128))])),_:1})])),_:1}),pe.value.goods&&pe.value.goods.attr_format&&Object.keys(pe.value.goods.attr_format).length?(s(),r(l,{key:1,class:"my-[var(--top-m)] goods-sku sidebar-margin card-template"},{default:o((()=>[u(l,{class:"title mb-[30rpx]"},{default:o((()=>[p("商品属性")])),_:1}),u(l,null,{default:o((()=>[(s(!0),x(f,null,m(pe.value.goods.attr_format,((e,t)=>(s(),x(f,{key:t},[t<4||de.value?(s(),r(l,{key:0,class:"card-template-item"},{default:o((()=>[u(l,{class:"text-[26rpx] leading-[30rpx] w-[160rpx] font-400 shrink-0 text-[var(--text-color-light9)]"},{default:o((()=>[p(d(e.attr_value_name),1)])),_:2},1024),u(l,{class:"text-[#333] box-border value-wid text-[26rpx] leading-[30rpx] font-400 truncate pl-[20rpx]"},{default:o((()=>[p(d(Array.isArray(e.attr_child_value_name)?e.attr_child_value_name.join(","):e.attr_child_value_name),1)])),_:2},1024)])),_:2},1024)):c("v-if",!0)],64)))),128)),pe.value.goods.attr_format.length>4?(s(),r(l,{key:0,class:"flex-center",onClick:t[3]||(t[3]=e=>de.value=!de.value)},{default:o((()=>[u(a,{class:"text-[24rpx] mr-[10rpx]"},{default:o((()=>[p(d(de.value?"展开":"收起"),1)])),_:1}),u(a,{class:_(["nc-iconfont !text-[22rpx]",{"nc-icon-xiaV6xx":de.value,"nc-icon-shangV6xx-1":!de.value}])},null,8,["class"])])),_:1})):c("v-if",!0)])),_:1})])),_:1})):c("v-if",!0),u(l,{class:"my-[var(--top-m)] sidebar-margin card-template px-[var(--pad-sidebar-m)]"},{default:o((()=>[u(l,{class:"title"},{default:o((()=>[p("商品详情")])),_:1}),u(l,{class:"u-content"},{default:o((()=>[u(I,{content:pe.value.goods.goods_desc,tagStyle:{img:"vertical-align: top;",p:"overflow: hidden;word-break:break-word;"}},null,8,["content"])])),_:1})])),_:1}),u(l,{class:"tab-bar-placeholder"}),u(l,{class:"border-[0] border-t-[2rpx] border-solid border-[#f5f5f5] w-[100%] flex justify-between pl-[32rpx] pr-[4rpx] bg-[#fff] box-border fixed left-0 bottom-0 tab-bar z-1 items-center"},{default:o((()=>[u(l,{class:"flex items-center"},{default:o((()=>[u(l,{class:"flex flex-col justify-center items-center mr-[38rpx]",onClick:t[4]||(t[4]=e=>i(g)({url:"/addon/shop/pages/index",mode:"reLaunch"}))},{default:o((()=>[u(l,{class:"nc-iconfont nc-icon-shouyeV6xx text-[36rpx]"}),u(a,{class:"text-[20rpx] mt-[10rpx]"},{default:o((()=>[p("首页")])),_:1})])),_:1}),u(l,{class:"flex flex-col justify-center items-center mr-[38rpx]",onClick:De},{default:o((()=>[u(l,{class:"nc-iconfont nc-icon-fenxiangV6xx text-[36rpx]"}),u(a,{class:"text-[20rpx] mt-[10rpx]"},{default:o((()=>[p("分享")])),_:1})])),_:1})])),_:1}),1==pe.value.goods.status?(s(),r(l,{key:0,class:"flex flex-1"},{default:o((()=>[i(_e)?(s(),r(L,{key:0,class:"primary-btn-bg flex-1 !h-[70rpx] font-500 text-[26rpx] !text-[#fff] !m-0 !mr-[16rpx] leading-[70rpx] rounded-full remove-border",onClick:t[5]||(t[5]=e=>ge("buy_now"))},{default:o((()=>[p("立即兑换")])),_:1})):(s(),r(L,{key:1,class:"flex-1 !h-[70rpx] font-500 text-[26rpx] !text-[#fff] !bg-[#ccc] !m-0 !mr-[16rpx] leading-[70rpx] rounded-full remove-border"},{default:o((()=>[p("已售罄")])),_:1}))])),_:1})):(s(),r(l,{key:1,class:"flex flex-1"},{default:o((()=>[u(L,{class:"w-[100%] !h-[70rpx] font-500 text-[26rpx] !text-[#fff] !bg-[#ccc] !m-0 leading-[70rpx] rounded-full remove-border"},{default:o((()=>[p("该商品已下架")])),_:1})])),_:1}))])),_:1})])),_:1}),c(" 服务 "),u(l,{onTouchmove:t[8]||(t[8]=n((()=>{}),["prevent","stop"]))},{default:o((()=>[u(D,{class:"popup-type",show:xe.value,onClose:t[7]||(t[7]=e=>xe.value=!1)},{default:o((()=>[u(l,{class:"popup-common min-h-[480rpx]",onTouchmove:t[6]||(t[6]=n((()=>{}),["prevent","stop"]))},{default:o((()=>[u(l,{class:"title"},{default:o((()=>[p("商品服务")])),_:1}),u(A,{class:"h-[520rpx]","scroll-y":"true"},{default:o((()=>[u(l,{class:"pl-[22rpx] pb-[28rpx] pr-[37rpx]"},{default:o((()=>[(s(!0),x(f,null,m(pe.value.service,((e,t)=>(s(),r(l,{class:"flex mb-[28rpx]"},{default:o((()=>[u(S,{class:"mt-[4rpx] w-[32rpx] h-[32rpx] mr-[14rpx]",src:i(h)(e.image||"addon/shop/icon_service.png"),mode:"aspectFit"},null,8,["src"]),u(l,{class:"flex-1"},{default:o((()=>[u(l,{class:"text-[30rpx] leading-[36rpx] text-[#333] mb-[8rpx]"},{default:o((()=>[p(d(e.service_name),1)])),_:2},1024),u(l,{class:"text-[24rpx] leading-[36rpx] text-[var(--text-color-light9)]"},{default:o((()=>[p(d(e.desc),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256))])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1}),c(" 配送 "),u(l,{onTouchmove:t[11]||(t[11]=n((()=>{}),["prevent","stop"]))},{default:o((()=>[u(D,{class:"popup-type",show:fe.value,onClose:t[10]||(t[10]=e=>fe.value=!1)},{default:o((()=>[u(l,{class:"min-h-[360rpx] popup-common",onTouchmove:t[9]||(t[9]=n((()=>{}),["prevent","stop"]))},{default:o((()=>[u(l,{class:"title"},{default:o((()=>[p("配送方式")])),_:1}),u(A,{class:"h-[520rpx]","scroll-y":"true"},{default:o((()=>[u(l,{class:"px-[var(--popup-sidebar-m)]"},{default:o((()=>[(s(!0),x(f,null,m(pe.value.delivery_type_list,((e,t)=>(s(),r(l,{class:"flex mb-[40rpx]",onClick:a=>((e,t)=>{ke.value=t,fe.value=!1,uni.setStorageSync("distributionType",e.name)})(e,t)},{default:o((()=>[u(S,{class:"mt-[4rpx] w-[32rpx] h-[32rpx] mr-[14rpx]",src:i(h)("addon/shop/icon_service.png"),mode:"aspectFit"},null,8,["src"]),u(l,{class:"flex-1"},{default:o((()=>[u(l,{class:"text-[30rpx] leading-[36rpx] text-[#333] mb-[8rpx]"},{default:o((()=>[p(d(e.name),1)])),_:2},1024),u(l,{class:"text-[24rpx] leading-[36rpx] text-[var(--text-color-light9)]"},{default:o((()=>[p(d(e.desc),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1}),u(ie,{ref_key:"goodsSkuRef",ref:ne,"goods-detail":pe.value,onChange:me},null,8,["goods-detail"]),u(oe,{ref_key:"sharePosterRef",ref:ze,posterType:"shop_point_goods",posterParam:i(Le),copyUrlParam:Ie.value},null,8,["posterParam","copyUrlParam"])])),_:1})):c("v-if",!0)])),_:1}),u(P,{loading:ce.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-32e6c143"]]);export{ne as default};
