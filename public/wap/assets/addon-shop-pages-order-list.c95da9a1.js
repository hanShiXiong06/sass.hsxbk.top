import{d as e,r as t,p as a,o as l,c as r,w as s,b as o,U as i,ad as d,V as n,f as p,u as x,n as c,ae as u,af as f,i as _,ac as m,g as v,h as g,W as y,y as h,z as b,A as k,F as C,bx as F,E as w,a as j,c0 as S,k as U,D as z,B as E,bl as I,_ as M}from"./index-71c7df08.js";import{_ as R}from"./pay.6aa36878.js";import{d as N,e as O,o as P,b as T}from"./order.c5841498.js";import{g as V}from"./shop.d1d455bf.js";import{M as A}from"./mescroll-body.49de0f6f.js";import{M as B}from"./mescroll-empty.95b8c17e.js";import{u as D}from"./useMescroll.26ccf5de.js";import"./pay.4cfa8889.js";import"./mescroll-i18n.00218d15.js";/* empty css                                                                       */const Q=M(e({__name:"list",setup(e){const{mescrollInit:M,downCallback:Q,getMescroll:W}=D(f,u),Z=t([]),$=t(!1),q=t(!1),G=t(""),H=t([]),J=t(""),K=t(""),L=t(!1);t(null),a((e=>{G.value=e.status||"",X(),ee()}));const X=()=>{V().then((e=>{J.value=e.data}))},Y=e=>{$.value=!1;let t={page:e.num,limit:e.size,status:G.value};O(t).then((t=>{let a=t.data.data;1==e.num&&(Z.value=[]),Z.value=Z.value.concat(a),e.endSuccess(a.length),K.value=t.data.mch_id,L.value=t.data.is_trade_managed,$.value=!0})).catch((()=>{$.value=!0,e.endErr()}))},ee=()=>{q.value=!1,H.value=[];H.value.push({name:"全部",status:""}),N().then((e=>{Object.values(e.data).forEach(((e,t)=>{H.value.push(e)})),q.value=!0})).catch((()=>{q.value=!0}))},te=t(null),ae=(e,t="")=>{var a;"pay"==t?null==(a=te.value)||a.open(e.order_type,e.order_id,`/addon/shop/pages/order/detail?order_id=${e.order_id}`):"close"==t?le(e):"finish"==t?re(e):"evaluate"==t&&(e.is_evaluate?j({url:"/addon/shop/pages/evaluate/order_evaluate_view",param:{order_id:e.order_id}}):j({url:"/addon/shop/pages/evaluate/order_evaluate",param:{order_id:e.order_id}}))},le=e=>{S({title:"提示",content:"您确定要关闭该订单吗？",confirmColor:U().themeColor["--primary-color"],success:t=>{t.confirm&&P(e.order_id).then((e=>{W().resetUpScroll()}))}})},re=e=>{S({title:"提示",content:"您确定物品已收到吗？",confirmColor:U().themeColor["--primary-color"],success:t=>{t.confirm&&T(e.order_id).then((e=>{W().resetUpScroll()}))}})};return(e,t)=>{const a=_,u=m,f=z,S=E,U=v(g("u--image"),I),N=v(g("pay"),R);return l(),r(a,{class:"bg-[var(--page-bg-color)] min-h-screen overflow-hidden order-list",style:c(e.themeColor())},{default:s((()=>[q.value?(l(),r(a,{key:0,class:"fixed left-0 top-0 right-0 z-10"},{default:s((()=>[o(u,{"scroll-x":!0,class:"tab-style-2"},{default:s((()=>[o(a,{class:"tab-content"},{default:s((()=>[(l(!0),i(n,null,d(H.value,((e,t)=>(l(),r(a,{class:y(["tab-items",{"class-select":G.value===e.status.toString()}]),onClick:t=>{return a=e.status,G.value=a.toString(),Z.value=[],void W().resetUpScroll();var a}},{default:s((()=>[h(b(e.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1})):p("v-if",!0),o(A,{ref:"mescrollRef",top:"88rpx",onInit:x(M),down:{use:!1},onUp:Y},{default:s((()=>[Z.value.length?(l(),r(a,{key:0,class:"sidebar-margin pt-[var(--top-m)]"},{default:s((()=>[(l(!0),i(n,null,d(Z.value,((e,t)=>(l(),r(a,{key:t,class:"mb-[var(--top-m)] card-template"},{default:s((()=>[o(a,{onClick:k((t=>{j({url:"/addon/shop/pages/order/detail",param:{order_id:e.order_id}})}),["stop"])},{default:s((()=>[o(a,{class:"flex justify-between items-center"},{default:s((()=>[o(a,{class:"text-[#303133] text-[26rpx] font-400 leading-[36rpx]"},{default:s((()=>[o(f,null,{default:s((()=>[h(b(x(C)("orderNo"))+":",1)])),_:1}),o(f,{class:"ml-[10rpx]"},{default:s((()=>[h(b(e.order_no),1)])),_:2},1024),o(f,{class:"text-[#303133] text-[26rpx] font-400 nc-iconfont nc-icon-fuzhiV6xx1 ml-[11rpx]",onClick:k((t=>x(F)(e.order_no)),["stop"])},null,8,["onClick"])])),_:2},1024),o(a,{class:y(["text-[#303133] text-[26rpx] leading-[34rpx]",{"text-primary":1==e.status,"!text-[var(--text-color-light9)]":5==e.status||-1==e.status}])},{default:s((()=>[h(b(e.status_name.name),1)])),_:2},1032,["class"])])),_:2},1024),(l(!0),i(n,null,d(e.order_goods,((t,d)=>(l(),r(a,{class:"flex box-border mt-[20rpx]",key:d},{default:s((()=>[o(U,{width:"150rpx",height:"150rpx",radius:"var(--goods-rounded-big)",src:x(w)(t.goods_image_thumb_small?t.goods_image_thumb_small:""),mode:"aspectFill"},{error:s((()=>[o(S,{class:"w-[150rpx] h-[150rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:x(w)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["radius","src"]),o(a,{class:"ml-[20rpx] flex flex-1 flex-col box-border"},{default:s((()=>[o(a,{class:"flex justify-between items-baseline"},{default:s((()=>[o(a,{class:"max-w-[322rpx] text-[28rpx] leading-[40rpx] font-400 truncate text-[#303133]"},{default:s((()=>[h(b(t.goods_name),1)])),_:2},1024),"exchange"==e.activity_type?(l(),i(n,{key:0},[parseFloat(t.price)?(l(),r(a,{key:0,class:"text-right ml-[10rpx] leading-[42rpx]"},{default:s((()=>[o(f,{class:"text-[22rpx] font-400 price-font"},{default:s((()=>[h("￥")])),_:1}),o(f,{class:"text-[36rpx] font-500 price-font"},{default:s((()=>[h(b(parseFloat(t.price).toFixed(2).split(".")[0]),1)])),_:2},1024),o(f,{class:"text-[22rpx] font-500 price-font"},{default:s((()=>[h("."+b(parseFloat(t.price).toFixed(2).split(".")[1]),1)])),_:2},1024)])),_:2},1024)):p("v-if",!0)],64)):(l(),r(a,{key:1,class:"text-right leading-[42rpx] ml-[10rpx]"},{default:s((()=>[o(f,{class:"text-[22rpx] price-font"},{default:s((()=>[h("￥")])),_:1}),o(f,{class:"text-[36rpx] font-500 price-font"},{default:s((()=>[h(b(parseFloat(t.price).toFixed(2).split(".")[0]),1)])),_:2},1024),o(f,{class:"text-[22rpx] font-500 price-font"},{default:s((()=>[h("."+b(parseFloat(t.price).toFixed(2).split(".")[1]),1)])),_:2},1024)])),_:2},1024))])),_:2},1024),o(a,{class:"flex justify-between items-baseline text-[#303133] mt-[14rpx]"},{default:s((()=>[o(a,null,{default:s((()=>[t.sku_name?(l(),r(a,{key:0,class:"text-[24rpx] text-[var(--text-color-light6)] font-400 truncate leading-[34rpx] max-w-[369rpx] mb-[10rpx]"},{default:s((()=>[h(b(t.sku_name),1)])),_:2},1024)):p("v-if",!0),"virtual"!=e.delivery_type?(l(),r(a,{key:1,class:"text-[24rpx] font-400 leading-[34rpx] text-[var(--text-color-light6)]"},{default:s((()=>[h(b(x(C)("deliveryType"))+" ： "+b(e.delivery_type_name),1)])),_:2},1024)):(l(),r(a,{key:2,class:"text-[24rpx] font-400 leading-[34rpx] text-[var(--text-color-light6)]"},{default:s((()=>[h(b(x(C)("createTime"))+" ："+b(e.create_time),1)])),_:2},1024))])),_:2},1024),o(f,{class:"text-right text-[26rpx] font-400 w-[90rpx] leading-[36rpx]"},{default:s((()=>[h("x"+b(t.num),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1032,["onClick"]),o(a,{class:"flex justify-end items-center mt-[20rpx]"},{default:s((()=>[o(a,{class:"flex items-baseline"},{default:s((()=>[parseFloat(e.delivery_money)?(l(),r(a,{key:0,class:"text-[22rpx] text-[var(--text-color-light9)] leading-[30rpx] mr-[6rpx]"},{default:s((()=>[h(b(x(C)("service")),1)])),_:1})):p("v-if",!0),o(a,{class:"text-[22rpx] font-400 leading-[30rpx] text-[#303133]"},{default:s((()=>[h(b(x(C)("actualPayment"))+"：",1)])),_:1}),o(a,{class:"leading-[1] text-[var(--price-text-color)]"},{default:s((()=>["exchange"==e.activity_type?(l(),i(n,{key:0},[o(f,{class:"text-[36rpx] mr-[2rpx] leading-[40rpx] price-font font-500"},{default:s((()=>[h(b(e.point),1)])),_:2},1024),o(f,{class:"text-[20rpx] leading-[28rpx] font-500"},{default:s((()=>[h(b(x(C)("point")),1)])),_:1}),parseFloat(e.order_money)?(l(),i(n,{key:0},[o(f,{class:"text-[20rpx] mx-[4rpx] font-500 leading-[28rpx]"},{default:s((()=>[h("+")])),_:1}),o(f,{class:"text-[36rpx] font-500 leading-[40rpx] price-font"},{default:s((()=>[h(b(parseFloat(e.order_money).toFixed(2)),1)])),_:2},1024),o(f,{class:"text-[20rpx] font-500 leading-[28rpx] ml-[2rpx]"},{default:s((()=>[h(b(x(C)("money")),1)])),_:1})],64)):p("v-if",!0)],64)):(l(),i(n,{key:1},[o(f,{class:"text-[22rpx] leading-[26rpx] price-font"},{default:s((()=>[h("￥")])),_:1}),o(f,{class:"text-[36rpx] font-500 leading-[40rpx] price-font"},{default:s((()=>[h(b(parseFloat(e.order_money).toFixed(2).split(".")[0]),1)])),_:2},1024),o(f,{class:"text-[22rpx] font-500 leading-[28rpx] price-font"},{default:s((()=>[h("."+b(parseFloat(e.order_money).toFixed(2).split(".")[1]),1)])),_:2},1024)],64))])),_:2},1024)])),_:2},1024)])),_:2},1024),1==e.status||3==e.status||5==e.status&&1==J.value.is_evaluate?(l(),r(a,{key:0,class:"flex justify-end text-[28rpx] mt-[20rpx] items-center"},{default:s((()=>[1==e.status?(l(),r(a,{key:0,class:"text-[24rpx] font-500 leading-[52rpx] h-[56rpx] min-w-[150rpx] text-center border-[2rpx] border-solid border-[var(--text-color-light9)] rounded-full text-[var(--text-color-light6)] box-border",onClick:k((t=>ae(e,"close")),["stop"])},{default:s((()=>[h(b(x(C)("orderClose")),1)])),_:2},1032,["onClick"])):p("v-if",!0),1==e.status?(l(),r(a,{key:1,class:"text-[24rpx] font-500 flex-center h-[56rpx] min-w-[150rpx] text-center border-[0] text-[#fff] primary-btn-bg rounded-full ml-[20rpx] box-border",onClick:k((t=>ae(e,"pay")),["stop"])},{default:s((()=>[h(b(x(C)("topay")),1)])),_:2},1032,["onClick"])):p("v-if",!0),3==e.status?(l(),r(a,{key:2,class:"text-[24rpx] font-500 flex-center h-[56rpx] min-w-[150rpx] text-center border-[0] text-[#fff] primary-btn-bg rounded-full ml-[20rpx] box-border",onClick:k((t=>ae(e,"finish")),["stop"])},{default:s((()=>[h(b(x(C)("orderFinish")),1)])),_:2},1032,["onClick"])):p("v-if",!0),5==e.status&&1==J.value.is_evaluate?(l(),r(a,{key:3,class:"text-[24rpx] font-500 leading-[52rpx] h-[56rpx] min-w-[150rpx] text-center border-[2rpx] border-solid border-[var(--text-color-light9)] rounded-full ml-[20rpx] text-[var(--text-color-light6)] box-border",onClick:k((t=>ae(e,"evaluate")),["stop"])},{default:s((()=>[h(b(1==e.is_evaluate?x(C)("selectedEvaluate"):x(C)("evaluate")),1)])),_:2},1032,["onClick"])):p("v-if",!0)])),_:2},1024)):p("v-if",!0)])),_:2},1024)))),128))])),_:1})):p("v-if",!0),!Z.value.length&&$.value?(l(),r(B,{key:1,option:{tip:"暂无订单"}})):p("v-if",!0)])),_:1},8,["onInit"]),o(N,{ref_key:"payRef",ref:te,onClose:e.payClose},null,8,["onClose"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-9f738e63"]]);export{Q as default};
