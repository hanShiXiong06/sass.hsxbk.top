import{d as e,r as t,p as a,o as l,c as s,w as r,b as o,O as i,a6 as n,P as u,f as c,u as d,n as p,a7 as m,a8 as f,i as _,a5 as x,g as v,h as y,Q as b,y as g,z as h,E as j,F as w,a as k,c5 as S,D as C}from"./index-2882a2d8.js";import{_ as M}from"./u-icon.1104ad2f.js";import{_ as U}from"./u--image.d52c0594.js";import{_ as z}from"./u-button.0ab7ff00.js";import{_ as I}from"./pay.d604a92e.js";import{_ as R}from"./tabbar.f422f3d5.js";import{g as D,b as E,c as F,d as O}from"./order.e7549699.js";import{M as P}from"./mescroll-body.e69cb222.js";import{M as Q}from"./mescroll-empty.7f392528.js";import{u as $}from"./useMescroll.26ccf5de.js";import{_ as L}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.46ebbbc1.js";import"./u-transition.4448d2e5.js";import"./u-loading-icon.a37f7e61.js";/* empty css                                                                       */import"./u-popup.2abbe959.js";import"./u-overlay.1a317a4e.js";import"./u-safe-bottom.f13b01b8.js";import"./pay.a752545f.js";import"./u-badge.e8ba7dff.js";import"./u-tabbar.b113c065.js";import"./mescroll-i18n.c2747603.js";/* empty css                                                                       */const T=L(e({__name:"list",setup(e){const{mescrollInit:L,downCallback:T,getMescroll:Y}=$(f,m),q=t([]),A=t(!1),B=t(!1),G=t(""),H=t([]);a((e=>{G.value=e.order_status||"",J()}));const J=()=>{B.value=!1,H.value=[];H.value.push({name:"全部",status:""}),D().then((e=>{Object.values(e.data).forEach(((e,t)=>{H.value.push(e)})),B.value=!0})).catch((()=>{B.value=!0}))},K=e=>{A.value=!1;let t={page:e.num,limit:e.size,order_status:G.value};E(t).then((t=>{let a=t.data.data;1==e.num&&(q.value=[]),q.value=q.value.concat(a),e.endSuccess(a.length),A.value=!0})).catch((()=>{A.value=!0,e.endErr()}))},N=t(null),V=e=>{S({title:"提示",content:"您确定要删除该订单吗？",success:t=>{t.confirm&&F(e.order_id).then((e=>{Y().resetUpScroll()})).catch((()=>{Y().resetUpScroll()}))}})},W=e=>{S({title:"提示",content:"您确定要删除该订单吗？",success:t=>{t.confirm&&O(e.order_id).then((e=>{Y().resetUpScroll()})).catch((()=>{Y().resetUpScroll()}))}})};return(e,t)=>{const a=_,m=x,f=C,S=v(y("u-icon"),M),D=v(y("u--image"),U),E=v(y("u-button"),z),F=v(y("pay"),I),O=v(y("tabbar"),R);return l(),s(a,{class:"bg-[#f8f8f8] min-h-screen overflow-hidden",style:p(e.themeColor())},{default:r((()=>[B.value?(l(),s(a,{key:0,class:"fixed left-0 top-0 right-0 z-10"},{default:r((()=>[o(m,{"scroll-x":"true",class:"scroll-Y box-border px-[24rpx] bg-white"},{default:r((()=>[o(a,{class:"flex whitespace-nowrap justify-around"},{default:r((()=>[(l(!0),i(u,null,n(H.value,((e,t)=>(l(),s(a,{class:b(["text-sm leading-[90rpx]",{"class-select":G.value===e.status.toString()}]),onClick:t=>{return a=e.status,G.value=a.toString(),q.value=[],void Y().resetUpScroll();var a}},{default:r((()=>[g(h(e.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1})):c("v-if",!0),o(P,{ref:"mescrollRef",top:"114rpx",onInit:d(L),onDown:d(T),onUp:K},{default:r((()=>[(l(!0),i(u,null,n(q.value,((e,t)=>(l(),s(a,{key:e.order_id,class:"mx-3 mb-3 bg-white p-3 rounded"},{default:r((()=>[o(a,{class:"flex justify-between items-center text-sm text-gray-500 pb-3 border-0 border-b border-slate-200 border-solid"},{default:r((()=>[o(a,null,{default:r((()=>[g(h(e.order_no),1)])),_:2},1024),o(f,null,{default:r((()=>[g(h(e.order_status_info.name),1)])),_:2},1024)])),_:2},1024),o(a,null,{default:r((()=>[(l(!0),i(u,null,n(e.item,((t,i)=>(l(),s(a,{class:"order-goods-item flex mt-[30rpx]",key:i,onClick:t=>{k({url:"/addon/o2o/pages/order/detail",param:{order_id:e.order_id}})}},{default:r((()=>[o(a,{class:"w-[160rpx] h-[160rpx] flex-2"},{default:r((()=>[o(D,{class:"rounded-[10rpx] overflow-hidden",width:"160rpx",height:"160rpx",src:d(j)(t.item_image_thumb_small?t.item_image_thumb_small:""),model:"aspectFill"},{error:r((()=>[o(S,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"])])),_:2},1024),o(a,{class:"ml-[20rpx] flex flex-1 flex-col justify-between"},{default:r((()=>[o(a,{class:"flex justify-between items-center"},{default:r((()=>[o(f,{class:"text-[28rpx] text-item leading-[40rpx] max-h-[80rpx] w-[360rpx] multi-hidden"},{default:r((()=>[g(h(t.item_name),1)])),_:2},1024),o(f,{class:"shrink-0 text-[24rpx] text-[var(--primary-color)] ml-[10rpx] leading-[40rpx]"},{default:r((()=>[g(h(t.pay_time?"":d(w)("notPaid")),1)])),_:2},1024)])),_:2},1024),o(a,{class:"flex justify-between"},{default:r((()=>[o(f,{class:"text-right text-[28rpx] text-[var(--price-text-color)] price-font"},{default:r((()=>[g("￥"+h(t.price),1)])),_:2},1024),o(f,{class:"text-right text-[24rpx]"},{default:r((()=>[g("x"+h(t.num),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024),c(' <view class="flex items-center justify-between  text-[28rpx]  mt-[40rpx]">\r\n                        <text class="text-[#999]">{{ item.create_time }}</text>\r\n\t\t\t\t\t</view> '),o(a,{class:"flex items-center justify-end mt-[30rpx]"},{default:r((()=>[o(a,null,{default:r((()=>[o(f,null,{default:r((()=>[g(h(d(w)("orderMoney")),1)])),_:1}),o(f,{class:"text-[var(--price-text-color)] price-font"},{default:r((()=>[g("￥"+h(e.total_money),1)])),_:2},1024)])),_:2},1024),o(a,{class:"ml-3"},{default:r((()=>[o(f,null,{default:r((()=>[g(h(d(w)("payMoney")),1)])),_:1}),o(f,{class:"text-[var(--price-text-color)] price-font"},{default:r((()=>[g("￥"+h(e.total_pay_money),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),o(a,{class:"flex justify-end mt-3"},{default:r((()=>[(l(!0),i(u,null,n(e.order_status_info.member_action,((t,a)=>(l(),s(E,{text:t.name,customStyle:{marginRight:"0px",marginLeft:"8rpx",width:"auto"},shape:"circle",size:"small",onClick:a=>((e,t="")=>{var a;"pay"==t?null==(a=N.value)||a.open(e.order_type,e.order_id,`/addon/o2o/pages/order/detail?order_id=${e.order_id}`):"cancel"==t?V(e):"delete"==t&&W(e)})(e,t.key),key:a},null,8,["text","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128)),!q.value.length&&A.value?(l(),s(Q,{key:0,option:{icon:d(j)("static/resource/images/empty.png"),tip:d(w)("nothingMore")}},null,8,["option"])):c("v-if",!0)])),_:1},8,["onInit","onDown"]),o(F,{ref_key:"payRef",ref:N},null,512),o(O)])),_:1},8,["style"])}}}),[["__scopeId","data-v-cbb362e8"]]);export{T as default};
