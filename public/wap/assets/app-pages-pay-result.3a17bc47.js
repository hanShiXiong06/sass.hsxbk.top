import{d as e,r as t,p as a,J as s,F as l,o,c as r,w as u,b as n,Q as p,y as c,z as i,u as m,f as d,n as _,a as f,aT as x,D as y,i as v,C as g,g as j,h,a0 as b}from"./index-2882a2d8.js";import{_ as w}from"./u-loading-icon.a37f7e61.js";import{_ as C}from"./u-modal.c146ecea.js";import{g as T}from"./pay.a752545f.js";/* empty css                                                                       */import"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.d7ff94e2.js";/* empty css                                                               */import"./u-popup.2abbe959.js";import"./u-overlay.1a317a4e.js";import"./u-transition.4448d2e5.js";import"./u-icon.1104ad2f.js";import"./u-safe-bottom.f13b01b8.js";/* empty css                                                                */const S=e({__name:"result",setup(e){const S=t(null),F=t(!1);let k="",z=0,L=0;a((e=>{k=e.trade_type,z=e.trade_id,P()}));const P=()=>{T(k,z).then((e=>{if(!uni.$u.test.isEmpty(e.data)){if(1==e.data.status&&L<5)return F.value=!0,L++,void setTimeout((()=>{P()}),1e3);S.value=e.data,F.value=!1,s({title:2==S.value.status?l("pay.paySuccess"):l("pay.payFail")})}}))},R=()=>{var e;const t=decodeURIComponent(uni.getStorageSync("payReturn"));f(t?{url:t,mode:"reLaunch"}:{url:x(),param:{code:null==(e=S.value)?void 0:e.out_trade_no},mode:"reLaunch"})};return(e,t)=>{const a=y,s=v,f=g,x=j(h("u-loading-icon"),w),T=j(h("u-modal"),C);return o(),r(s,{style:_(e.themeColor())},{default:u((()=>[S.value?(o(),r(s,{key:0,class:"w-screen h-screen flex flex-col items-center"},{default:u((()=>[n(s,{class:"flex-1 flex flex-col items-center w-full pt-[200rpx]"},{default:u((()=>[n(s,{class:"flex items-center"},{default:u((()=>[n(a,{class:p(["nc-iconfont -mb-[4rpx] !text-[44rpx]",2==S.value.status?"text-primary nc-icon-duihaoV6mm":"nc-icon-tanhaoV6mm text-red"])},null,8,["class"]),n(a,{class:"text-[36rpx] ml-[16rpx] font-500"},{default:u((()=>[c(i(2==S.value.status?m(l)("pay.paySuccess"):m(l)("pay.payFail")),1)])),_:1})])),_:1}),n(s,{class:"text-[56rpx] font-500 mt-[60rpx] price-font"},{default:u((()=>[n(a,{class:"text-[36rpx] mr-[6rpx]"},{default:u((()=>[c(i(m(l)("currency")),1)])),_:1}),n(a,null,{default:u((()=>[c(i(m(b)(S.value.money)),1)])),_:1})])),_:1})])),_:1}),n(s,{class:"pb-[260rpx]"},{default:u((()=>[n(f,{class:"w-[380rpx] !border-0 h-[80rpx] text-[28rpx] text-[#333] !bg-[#f2f2f2] flex-center font-500 rounded-[20rpx]",plain:!0,onClick:R},{default:u((()=>[c(i(2==S.value.status?m(l)("complete"):m(l)("close")),1)])),_:1})])),_:1})])),_:1})):d("v-if",!0),n(T,{show:F.value,showCancelButton:!0,confirmText:m(l)("pay.completePay"),cancelText:m(l)("pay.incompletePay"),onCancel:R,confirmColor:"var(--primary-color)"},{default:u((()=>[n(s,{class:"py-[20rpx]"},{default:u((()=>[n(x,{text:m(l)("pay.getting"),textSize:"16",mode:"circle",vertical:!0},null,8,["text"])])),_:1})])),_:1},8,["show","confirmText","cancelText"])])),_:1},8,["style"])}}});export{S as default};
