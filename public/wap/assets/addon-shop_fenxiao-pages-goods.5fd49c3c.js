import{d as e,l as o,m as s,r as a,o as t,c as r,w as l,b as i,n as p,u as d,E as n,F as m,G as u,f as c,a5 as x,a6 as f,i as _,g,h as v,V as h,H as b,x as y,y as j,_ as k,a as w,C}from"./index-905183d4.js";import{_ as F}from"./u-icon.86a2aad0.js";import{_ as z}from"./u--image.b5d65e0e.js";import{M as I}from"./mescroll-body.b8d008ed.js";import{M as P}from"./mescroll-empty.f9bce990.js";import{u as S}from"./useMescroll.26ccf5de.js";import{e as U}from"./fenxiao.dacba751.js";import{_ as M}from"./share-poster.cfed5f32.js";import{_ as E}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.44c969ef.js";import"./u-transition.dbaca185.js";import"./mescroll-uni-option.0af4878d.js";import"./mescroll-i18n.6025c811.js";/* empty css                                                                       */import"./u-popup.e3f6594b.js";import"./u-safe-bottom.e94b03c1.js";const R=E(e({__name:"goods",setup(e){const{mescrollInit:E,downCallback:R,getMescroll:q}=S(f,x),A=o(),B=s((()=>A.info));let D=a([]),G=a(!0);const H=e=>{let o={page:e.num,limit:e.size};G.value=!0,U(o).then((o=>{let s=o.data.data;1==e.num&&(D.value=[]),D.value=D.value.concat(s),G.value=!1,e.endSuccess(s.length)})).catch((()=>{G.value=!1,e.endErr()}))};let T=a(null),V=a(""),J=a(""),K={};const L=e=>{K.sku_id=e.goodsSku.sku_id,B.value&&B.value.member_id&&(K.member_id=B.value.member_id),(e=>{J.value="/wap/addon/shop/pages/goods/detail",V.value="?goods_id="+e.goods_id,B.value&&B.value.member_id&&(V.value+="&mid="+B.value.member_id)})(e),T.value.openShare()};return(e,o)=>{const s=_,a=g(v("u-icon"),F),x=g(v("u--image"),z),f=C;return t(),r(s,{class:"bg-[#f8f8f8] min-h-[100vh]",style:p(e.themeColor())},{default:l((()=>[i(I,{ref:"mescrollRef",top:"350rpx",onInit:d(E),onUp:H,down:{use:!1}},{default:l((()=>[i(s,{class:"fixed top-0 left-0 right-0 z-10"},{default:l((()=>[i(s,{class:"w-[100%] h-[340rpx]",style:p({backgroundImage:"url("+d(h)("addon/shop_fenxiao/fenxiao_goods_bg.png")+")","background-size":"cover"})},null,8,["style"])])),_:1}),(t(!0),n(u,null,m(d(D),((e,o)=>(t(),r(s,{class:b(["bg-white flex p-[20rpx] mx-[30rpx] rounded-[16rpx] overflow-hidden mt-[20rpx]",{"mb-[20rpx]":o+1==d(D).length}]),key:o,onClick:o=>{w({url:"/addon/shop/pages/goods/detail",param:{goods_id:e.goods_id}})}},{default:l((()=>[i(x,{class:"rounded-[10rpx] overflow-hidden",width:"190rpx",height:"190rpx",src:d(h)(e.goods_cover_thumb_mid?e.goods_cover_thumb_mid:""),model:"aspectFill"},{error:l((()=>[i(a,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"]),i(s,{class:"flex-1 flex flex-col ml-[20rpx] py-[6rpx]"},{default:l((()=>[i(s,{class:"text-[28rpx] text-[#303133] leading-[40rpx] multi-hidden mb-[10rpx]"},{default:l((()=>[y(j(e.goods_name),1)])),_:2},1024),i(s,{class:"mt-auto flex justify-between items-baseline"},{default:l((()=>[i(s,{class:"text-[var(--price-text-color)] price-font flex items-baseline"},{default:l((()=>[i(f,{class:"text-[26rpx] font-500"},{default:l((()=>[y("￥")])),_:1}),i(f,{class:"text-[36rpx] font-500"},{default:l((()=>[y(j(parseFloat(e.goodsSku.price).toFixed(2).split(".")[0]),1)])),_:2},1024),i(f,{class:"text-[24rpx] font-500"},{default:l((()=>[y("."+j(parseFloat(e.goodsSku.price).toFixed(2).split(".")[1]),1)])),_:2},1024)])),_:2},1024),i(s,{onClick:k((o=>L(e)),["stop"]),class:"text-[22rpx] flex items-center border-[2rpx] border-solid border-[var(--price-text-color)] px-[12rpx] py-[8rpx] rounded-[50rpx] text-[var(--price-text-color)]"},{default:l((()=>[i(f,{class:"iconfont iconfenxiang1 mr-[4rpx] !text-[28rpx]"}),i(f,null,{default:l((()=>[y("赚"+j(e.commission)+"元",1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128)),d(D).length||d(G)?c("v-if",!0):(t(),r(P,{key:0,option:{icon:d(h)("static/resource/images/empty.png")}},null,8,["option"]))])),_:1},8,["onInit"]),i(M,{ref_key:"sharePosterRef",ref:T,posterType:"fenxiao_goods",posterParam:d(K),copyUrlParam:d(V),copyUrl:d(J)},null,8,["posterParam","copyUrlParam","copyUrl"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-39934eb2"]]);export{R as default};
