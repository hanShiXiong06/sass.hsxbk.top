import{_ as e}from"./u-input.cf99fb96.js";import{d as t,r as l,j as s,q as a,t as o,o as r,c,w as n,b as x,u as i,aN as p,H as u,x as d,f,_ as m,E as _,F as g,G as v,n as b,a5 as h,a6 as y,g as k,h as j,C as w,i as C,y as F,V,a as S,X as z,N as I}from"./index-656dc629.js";import{_ as M}from"./u-popup.7e287da6.js";import{_ as U}from"./u-icon.286409fc.js";import{_ as N}from"./u--image.8451ef47.js";import{_ as D}from"./tabbar.d997a979.js";import{b as E,c as T}from"./goods.14ff652f.js";import{M as P}from"./mescroll-body.cb3f7eec.js";import{M as q}from"./mescroll-empty.966dc165.js";import{u as A}from"./useMescroll.26ccf5de.js";import{_ as G}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-transition.825c0e35.js";import"./u-safe-bottom.d9fa806b.js";import"./u-image.38c45e12.js";import"./u-badge.973492be.js";import"./u-tabbar.8ee28cae.js";import"./mescroll-uni-option.de83ded3.js";import"./mescroll-i18n.6025c811.js";/* empty css                                                                       */const H=G(t({__name:"list",setup(t){const{mescrollInit:G,downCallback:H,getMescroll:R}=A(y,h);let X=l([]),B=l([]),J=l(""),K=l(""),L=l(null),O=l(!1),Q=l(!1),W=l(""),Y=l(""),Z=l(""),$=l("all");l(!1);let ee=l(!0);s((async e=>{K.value=e.curr_goods_category||"",W.value=e.goods_name||"",J.value=e.coupon_id||"",await E().then((e=>{X.value.push({category_name:"全部",category_id:""}),X.value=X.value.concat(e.data)}))}));const te=e=>{O.value=!1;let t={goods_category:K.value,page:e.num,limit:e.size,keyword:W.value,coupon_id:J.value,order:"all"===$.value?"":$.value,sort:"price"==$.value?Y.value:Z.value};T(t).then((t=>{let l=t.data.data;1===Number(e.num)&&(B.value=[]),B.value=B.value.concat(l),e.endSuccess(l.length),O.value=!0})).catch((()=>{O.value=!0,e.endErr()}))},le=e=>{$.value=e,"all"==e&&(Z.value="",Y.value=""),"price"==e&&(Z.value="",Y.value?Y.value="asc"==Y.value?"desc":"asc":Y.value="asc"),"sale_num"==e&&(Y.value="",Z.value?Z.value="asc"==Z.value?"desc":"asc":Z.value="asc"),"label"==e?(Z.value="asc",Y.value="asc",Q.value=!0):(Q.value=!1,B.value=[],R().resetUpScroll())},se=()=>{ee.value=!ee.value},ae=e=>{S({url:"/addon/shop/pages/goods/detail",param:{goods_id:e},mode:"navigateTo"})};a((()=>{setTimeout((()=>{R().optUp.textNoMore=o("end")}),500)}));let oe=e=>{let t="";return t=e.is_discount?"discount_price":e.member_discount&&z()?"member_price":"",t},re=e=>{let t="0.00";return t=e.is_discount?e.goodsSku.sale_price?e.goodsSku.sale_price:e.goodsSku.price:e.member_discount&&z()&&e.goodsSku.member_price?e.goodsSku.member_price:e.goodsSku.price,parseFloat(t)};return(t,l)=>{const s=k(j("u-input"),e),a=w,o=C,h=k(j("u-popup"),M),y=k(j("u-icon"),U),S=k(j("u--image"),N),z=I,E=k(j("tabbar"),D);return r(),c(o,{class:"bg-gray-100 min-h-[100vh]",style:b(t.themeColor())},{default:n((()=>[x(o,{class:"fixed left-0 right-0 top-0 product-warp bg-[#fff] px-[30rpx]"},{default:n((()=>[x(o,{class:"h-[88rpx] box-border py-[14rpx] flex items-center justify-between"},{default:n((()=>[x(o,{class:"flex-1 flex items-center h-[60rpx] bg-[#F6F8F8] rounded-[33rpx] pl-[32rpx] pr-[20rpx] mr-[30rpx]"},{default:n((()=>[x(s,{class:"flex-1",maxlength:"50",modelValue:i(W),"onUpdate:modelValue":l[0]||(l[0]=e=>p(W)?W.value=e:W=e),onConfirm:l[1]||(l[1]=e=>le("all")),placeholder:"请搜索您想要的商品",placeholderClass:"text-[#a5a6a6] text-[26rpx]",fontSize:"26rpx",clearable:"",border:"none"},null,8,["modelValue"]),x(a,{class:"nc-iconfont nc-icon-sousuoV6xx text-[26rpx] ml-[18rpx] !text-[#999]",onClick:l[2]||(l[2]=e=>le("all"))})])),_:1}),x(o,{class:u(["nc-iconfont text-[34rpx] text-[#666]",i(ee)?"nc-icon-erweimaV6xx":"nc-icon-yingyongliebiaoV6xx"]),onClick:se},null,8,["class"])])),_:1}),x(o,{class:"flex justify-between tems-center py-[22rpx] px-[20rpx]"},{default:n((()=>[x(o,{class:"flex items-center justify-between text-[24rpx] text-[#666] flex-1"},{default:n((()=>[x(a,{class:u({"text-[#303133] ":"all"==i($)}),onClick:l[3]||(l[3]=e=>le("all"))},{default:n((()=>[d("综合排序")])),_:1},8,["class"]),x(o,{class:u(["flex items-center",{"text-[#303133]":"sale_num"==i($)}]),onClick:l[4]||(l[4]=e=>le("sale_num"))},{default:n((()=>[x(a,{class:"mr-[4rpx]"},{default:n((()=>[d("销量")])),_:1}),"asc"!=i(Z)&&"desc"!=i(Z)?(r(),c(a,{key:0,class:"text-[30rpx] text-[#666] nc-iconfont nc-icon-shangxiaxuanzeV6xx"})):"asc"==i(Z)?(r(),c(a,{key:1,class:"text-[18rpx] w-[30rpx] h-[30rpx] flex items-center justify-center text-[#666] nc-iconfont font-bold nc-icon-shangV6xx-1 font-bold"})):"desc"==i(Z)?(r(),c(a,{key:2,class:"text-[18rpx] w-[30rpx] h-[30rpx] flex items-center justify-center text-[#666] font-bold nc-iconfont nc-icon-xiaV6xx"})):f("v-if",!0)])),_:1},8,["class"]),x(o,{class:u(["flex items-center",{"text-[#303133]":"price"==i($)}]),onClick:l[5]||(l[5]=e=>le("price"))},{default:n((()=>[x(a,{class:"mr-[4rpx]"},{default:n((()=>[d("价格")])),_:1}),"asc"!=i(Y)&&"desc"!=i(Y)?(r(),c(a,{key:0,class:"text-[30rpx] text-[#666] nc-iconfont nc-icon-shangxiaxuanzeV6xx"})):"asc"==i(Y)?(r(),c(a,{key:1,class:"text-[18rpx] w-[30rpx] h-[30rpx] flex items-center justify-center font-bold text-[#666] nc-iconfont nc-icon-shangV6xx-1 font-bold"})):"desc"==i(Y)?(r(),c(a,{key:2,class:"text-[18rpx] w-[30rpx] h-[30rpx] flex items-center justify-center font-bold text-[#666] nc-iconfont nc-icon-xiaV6xx"})):f("v-if",!0)])),_:1},8,["class"]),x(o,{class:u(["flex items-center",{"text-[#303133]":"label"==i($)}]),onClick:l[6]||(l[6]=e=>le("label"))},{default:n((()=>[x(a,{class:"mr-[2rpx]"},{default:n((()=>[d("筛选")])),_:1}),x(a,{class:"nc-iconfont color-[#666] nc-icon-shaixuanV6xx text-[28rpx]"})])),_:1},8,["class"])])),_:1})])),_:1})])),_:1}),x(h,{show:i(Q),mode:"top",onClose:l[8]||(l[8]=e=>p(Q)?Q.value=!1:Q=!1)},{default:n((()=>[x(o,{onTouchmove:l[7]||(l[7]=m((()=>{}),["prevent","stop"]))},{default:n((()=>[x(o,{class:"text-sm font-bold px-[30rpx] mt-3"},{default:n((()=>[d("全部分类")])),_:1}),x(o,{class:"flex flex-wrap pl-[30rpx] pt-[30rpx]"},{default:n((()=>[(r(!0),_(v,null,g(i(X),((e,t)=>(r(),c(a,{onClick:t=>{return l=e.category_id,K.value=l,B.value=[],R().resetUpScroll(),void(Q.value=!1);var l},key:e.category_id,class:u(["px-[26rpx] border-[2rpx] border-solid border-transparent h-[60rpx] mr-[30rpx] mb-[30rpx] flex items-center justify-center bg-[#F4F4F4] rounded-[8rpx] text-xs",{"label-select":i(K)==e.category_id}])},{default:n((()=>[d(F(e.category_name),1)])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1})])),_:1},8,["show"]),x(P,{ref_key:"mescrollRef",ref:L,top:"160rpx",bottom:"50px",onInit:i(G),onDown:i(H),onUp:te},{default:n((()=>[i(B).length?(r(),c(o,{key:0,class:u(["px-[30rpx]",i(ee)?"":"flex justify-between flex-wrap"])},{default:n((()=>[(r(!0),_(v,null,g(i(B),((e,t)=>(r(),_(v,null,[i(ee)?(r(),c(o,{key:0,class:u(["bg-white flex p-[20rpx] rounded-[16rpx] overflow-hidden mt-[20rpx]",{"mb-[20rpx]":t+1==i(B).length}]),onClick:t=>ae(e.goods_id)},{default:n((()=>[x(S,{class:"rounded-[10rpx] overflow-hidden",width:"190rpx",height:"190rpx",src:i(V)(e.goods_cover_thumb_mid?e.goods_cover_thumb_mid:""),model:"aspectFill"},{error:n((()=>[x(y,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"]),x(o,{class:"flex-1 flex flex-col ml-[20rpx] py-[6rpx]"},{default:n((()=>[x(o,{class:"text-[28rpx] text-[#303133] leading-[40rpx] multi-hidden mb-[10rpx]"},{default:n((()=>[d(F(e.goods_name),1)])),_:2},1024),x(o,{class:"mt-auto flex justify-between items-baseline"},{default:n((()=>[x(o,{class:"text-[var(--price-text-color)] price-font flex items-baseline"},{default:n((()=>[x(a,{class:"text-[26rpx] font-500"},{default:n((()=>[d("￥")])),_:1}),x(a,{class:"text-[36rpx] font-500"},{default:n((()=>[d(F(i(re)(e).toFixed(2).split(".")[0]),1)])),_:2},1024),x(a,{class:"text-[24rpx] font-500"},{default:n((()=>[d("."+F(i(re)(e).toFixed(2).split(".")[1]),1)])),_:2},1024),"member_price"==i(oe)(e)?(r(),c(z,{key:0,class:"h-[24rpx] ml-[6rpx]",src:i(V)("addon/shop/VIP.png"),mode:"heightFix"},null,8,["src"])):f("v-if",!0),"discount_price"==i(oe)(e)?(r(),c(z,{key:1,class:"h-[24rpx] ml-[6rpx]",src:i(V)("addon/shop/discount.png"),mode:"heightFix"},null,8,["src"])):f("v-if",!0)])),_:2},1024),x(a,{class:"text-[22rpx] text-[#999]"},{default:n((()=>[d("已售"+F(e.sale_num)+F(e.unit),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])):(r(),c(o,{key:1,class:"w-[334rpx] flex flex-col bg-[#fff] box-border rounded-[12rpx] overflow-hidden mt-[20rpx]",onClick:t=>ae(e.goods_id)},{default:n((()=>[x(S,{width:"334rpx",height:"334rpx",src:i(V)(e.goods_cover_thumb_mid?e.goods_cover_thumb_mid:""),model:"aspectFill"},{error:n((()=>[x(y,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"]),x(o,{class:"px-[16rpx] flex-1 pt-[16rpx] pb-[20rpx] flex flex-col justify-between"},{default:n((()=>[x(o,{class:"text-[#303133] leading-[40rpx] text-[28rpx] multi-hidden"},{default:n((()=>[d(F(e.goods_name),1)])),_:2},1024),x(o,{class:"flex justify-between flex-wrap items-baseline mt-[16rpx]"},{default:n((()=>[x(o,{class:"text-[var(--price-text-color)] price-font flex items-baseline"},{default:n((()=>[f('\t\t\t\t\t\t\t\t\t\t<text class="text-[20rpx]  mr-[4rpx]">￥</text>'),f('\t\t\t\t\t\t\t\t\t\t<text class="text-[36rpx] font-500">{{ item.goodsSku.price }}</text>'),x(a,{class:"text-[26rpx] font-500"},{default:n((()=>[d("￥")])),_:1}),x(a,{class:"text-[36rpx] font-500"},{default:n((()=>[d(F(i(re)(e).toFixed(2).split(".")[0]),1)])),_:2},1024),x(a,{class:"text-[24rpx] font-500"},{default:n((()=>[d("."+F(i(re)(e).toFixed(2).split(".")[1]),1)])),_:2},1024),"member_price"==i(oe)(e)?(r(),c(z,{key:0,class:"h-[24rpx] ml-[6rpx]",src:i(V)("addon/shop/VIP.png"),mode:"heightFix"},null,8,["src"])):f("v-if",!0),"discount_price"==i(oe)(e)?(r(),c(z,{key:1,class:"h-[24rpx] ml-[6rpx]",src:i(V)("addon/shop/discount.png"),mode:"heightFix"},null,8,["src"])):f("v-if",!0)])),_:2},1024),x(a,{class:"text-[22rpx] text-[#999]"},{default:n((()=>[d("已售"+F(e.sale_num)+F(e.unit),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]))],64)))),256))])),_:1},8,["class"])):f("v-if",!0),!i(B).length&&i(O)?(r(),c(o,{key:1,class:"mx-[30rpx] mt-[20rpx] bg-[#fff] rounded-[16rpx] noData flex items-center justify-center"},{default:n((()=>[x(q,{option:{tip:"暂无商品"}})])),_:1})):f("v-if",!0)])),_:1},8,["onInit","onDown"]),x(E)])),_:1},8,["style"])}}}),[["__scopeId","data-v-f7712b5e"]]);export{H as default};
