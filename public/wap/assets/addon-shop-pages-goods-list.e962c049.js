import{d as e,r as a,p as l,N as t,F as s,o,c as r,w as c,b as u,A as n,f as i,Q as d,y as p,O as x,a6 as m,P as f,u as _,n as v,a7 as g,a8 as b,D as h,a4 as y,i as k,g as w,h as j,z as C,E as S,a as F,s as V,B as I}from"./index-2882a2d8.js";import{_ as U}from"./u-popup.2abbe959.js";import{_ as E}from"./tabbar.f422f3d5.js";import{b as M,c as T}from"./goods.dfc5187b.js";import{M as z}from"./mescroll-body.e69cb222.js";import{M as N}from"./mescroll-empty.7f392528.js";import{u as P}from"./useMescroll.26ccf5de.js";import{_ as R}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-overlay.1a317a4e.js";import"./u-transition.4448d2e5.js";import"./u-icon.1104ad2f.js";import"./u-safe-bottom.f13b01b8.js";import"./u-badge.e8ba7dff.js";import"./u-tabbar.b113c065.js";import"./mescroll-i18n.c2747603.js";/* empty css                                                                       */const Q=R(e({__name:"list",setup(e){const{mescrollInit:R,downCallback:Q,getMescroll:A}=P(b,g),B=a([]),D=a([]),O=a(""),$=a(""),q=a(null),G=a(!1),H=a(!1),J=a(""),K=a(""),L=a(""),W=a("all");a(!1);const X=a(!0);l((async e=>{$.value=e.curr_goods_category||"",J.value=e.goods_name?decodeURIComponent(e.goods_name):"",O.value=e.coupon_id||"",await M().then((e=>{B.value.push({category_name:"全部",category_id:""}),B.value=B.value.concat(e.data)}))}));const Y=e=>{G.value=!1;let a={goods_category:$.value,page:e.num,limit:e.size,keyword:J.value,coupon_id:O.value,order:"all"===W.value?"":W.value,sort:"price"==W.value?K.value:L.value};T(a).then((a=>{let l=a.data.data;1===Number(e.num)&&(D.value=[]),D.value=D.value.concat(l),e.endSuccess(l.length),G.value=!0})).catch((()=>{G.value=!0,e.endErr()}))},Z=e=>{W.value=e,"all"==e&&(L.value="",K.value=""),"price"==e&&(L.value="",K.value?K.value="asc"==K.value?"desc":"asc":K.value="asc"),"sale_num"==e&&(K.value="",L.value?L.value="asc"==L.value?"desc":"asc":L.value="asc"),"label"==e?(L.value="asc",K.value="asc",H.value=!0):(H.value=!1,D.value=[],A().resetUpScroll())},ee=()=>{X.value=!X.value},ae=e=>{F({url:"/addon/shop/pages/goods/detail",param:{goods_id:e},mode:"navigateTo"})};t((()=>{setTimeout((()=>{A().optUp.textNoMore=s("end")}),500)}));const le=e=>{let a="";return a=e.is_discount&&e.goodsSku.sale_price!=e.goodsSku.price?"discount_price":e.member_discount&&V()&&e.goodsSku.member_price!=e.goodsSku.price?"member_price":"",a},te=e=>{let a="0.00";return a=e.is_discount&&e.goodsSku.sale_price!=e.goodsSku.price?e.goodsSku.sale_price?e.goodsSku.sale_price:e.goodsSku.price:e.member_discount&&V()&&e.goodsSku.member_price!=e.goodsSku.price&&e.goodsSku.member_price?e.goodsSku.member_price:e.goodsSku.price,parseFloat(a)};return(e,a)=>{const l=h,t=y,s=k,g=w(j("u-popup"),U),b=I,F=w(j("tabbar"),E);return o(),r(s,{class:"bg-gray-100 min-h-[100vh]",style:v(e.themeColor())},{default:c((()=>[u(s,{class:"fixed left-0 right-0 top-0 product-warp bg-[#fff]"},{default:c((()=>[u(s,{class:"py-[14rpx] flex items-center justify-between px-[20rpx]"},{default:c((()=>[u(s,{class:"flex-1 search-input mr-[20rpx]"},{default:c((()=>[u(l,{onClick:a[0]||(a[0]=n((e=>Z("all")),["stop"])),class:"nc-iconfont nc-icon-sousuo-duanV6xx1 btn"}),u(t,{class:"input",maxlength:"50",type:"text",modelValue:J.value,"onUpdate:modelValue":a[1]||(a[1]=e=>J.value=e),placeholder:"请搜索您想要的商品",placeholderClass:"text-[var(--text-color-light9)]","confirm-type":"search",onConfirm:a[2]||(a[2]=e=>Z("all"))},null,8,["modelValue"]),J.value?(o(),r(l,{key:0,class:"nc-iconfont nc-icon-cuohaoV6xx1 clear",onClick:a[3]||(a[3]=e=>J.value="")})):i("v-if",!0)])),_:1}),u(s,{class:d(["nc-iconfont text-[32rpx] text-[#333] -mb-[2rpx]",X.value?"nc-icon-a-yingyongzhongxinV6xx-36":"nc-icon-a-yingyongliebiaoV6xx-36"]),onClick:ee},null,8,["class"])])),_:1}),u(s,{class:"flex justify-between tems-center h-[88rpx] px-[30rpx]"},{default:c((()=>[u(s,{class:"flex items-center justify-between text-[26rpx] flex-1"},{default:c((()=>[u(l,{class:d(["text-[#333]",{"text-[var(--primary-color)] font-500":"all"==W.value}]),onClick:a[4]||(a[4]=e=>Z("all"))},{default:c((()=>[p("综合排序")])),_:1},8,["class"]),u(s,{class:d(["flex items-center text-[#333]",{"text-[var(--primary-color)] font-500":"sale_num"==W.value}]),onClick:a[5]||(a[5]=e=>Z("sale_num"))},{default:c((()=>[u(l,{class:"mr-[4rpx]"},{default:c((()=>[p("销量")])),_:1}),"asc"==L.value?(o(),r(l,{key:0,class:d(["text-[16rpx] nc-iconfont nc-icon-a-xiangshangV6xx1",{"text-[var(--primary-color)]":"sale_num"==W.value}])},null,8,["class"])):(o(),r(l,{key:1,class:d(["text-[16rpx] nc-iconfont nc-icon-a-xiangxiaV6xx1",{"text-[var(--primary-color)]":"sale_num"==W.value}])},null,8,["class"]))])),_:1},8,["class"]),u(s,{class:d(["flex items-center text-[#333]",{"text-[var(--primary-color)] font-500":"price"==W.value}]),onClick:a[6]||(a[6]=e=>Z("price"))},{default:c((()=>[u(l,{class:"mr-[4rpx]"},{default:c((()=>[p("价格")])),_:1}),"asc"==K.value?(o(),r(l,{key:0,class:d(["text-[16rpx] nc-iconfont nc-icon-a-xiangshangV6xx1",{"text-[var(--primary-color)]":"price"==W.value}])},null,8,["class"])):(o(),r(l,{key:1,class:d(["text-[16rpx] nc-iconfont nc-icon-a-xiangxiaV6xx1",{"text-[var(--primary-color)]":"price"==W.value}])},null,8,["class"]))])),_:1},8,["class"]),u(s,{class:d(["flex items-center",{"text-[var(--primary-color)] font-500":"label"==W.value,"text-[#333]":"label"!=W.value}]),onClick:a[7]||(a[7]=e=>Z("label"))},{default:c((()=>[u(l,{class:"mr-[8rpx]"},{default:c((()=>[p("筛选")])),_:1}),u(l,{class:"iconfont font-500 icona-shaixuanV6xx-34 -mb-[4rpx] !text-[26rpx]"})])),_:1},8,["class"])])),_:1})])),_:1})])),_:1}),u(g,{show:H.value,mode:"top",onClose:a[9]||(a[9]=e=>H.value=!1)},{default:c((()=>[u(s,{onTouchmove:a[8]||(a[8]=n((()=>{}),["prevent","stop"]))},{default:c((()=>[u(s,{class:"text-[28rpx] px-[30rpx] mt-[40rpx]"},{default:c((()=>[p("全部分类")])),_:1}),u(s,{class:"flex flex-wrap pl-[30rpx] pt-[30rpx]"},{default:c((()=>[(o(!0),x(f,null,m(B.value,((e,a)=>(o(),r(l,{onClick:a=>{return l=e.category_id,$.value=l,D.value=[],A().resetUpScroll(),void(H.value=!1);var l},key:e.category_id,class:d([{"label-select":$.value==e.category_id},"truncate text-[#333] px-[10rpx] border-[2rpx] border-solid border-transparent w-[184rpx] h-[56rpx] flex items-center justify-center mr-[30rpx] mb-[30rpx] box-border bg-[var(--temp-bg)] rounded-[50rpx] text-[24rpx]"])},{default:c((()=>[p(C(e.category_name),1)])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1})])),_:1},8,["show"]),u(z,{ref_key:"mescrollRef",ref:q,top:"176rpx",bottom:"60px",onInit:_(R),down:{use:!1},onUp:Y},{default:c((()=>[D.value.length?(o(),r(s,{key:0,class:d(["sidebar-marign",X.value?"":"flex justify-between flex-wrap"])},{default:c((()=>[(o(!0),x(f,null,m(D.value,((e,a)=>(o(),x(f,null,[X.value?(o(),r(s,{key:0,class:d(["bg-white flex px-[20rpx] py-[24rpx] rounded-[var(--rounded-small)] overflow-hidden top-mar",{"mb-[20rpx]":a+1==D.value.length}]),onClick:a=>ae(e.goods_id)},{default:c((()=>[e.goods_cover_thumb_mid?(o(),r(b,{key:0,class:"w-[190rpx] h-[190rpx] rounded-[var(--rounded-mid)]",src:_(S)(e.goods_cover_thumb_mid),mode:"aspectFill",onError:a=>e.goods_cover_thumb_mid="static/resource/images/diy/shop_default.jpg"},null,8,["src","onError"])):(o(),r(b,{key:1,class:"w-[190rpx] h-[190rpx] rounded-[var(--rounded-mid)]",src:_(S)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])),u(s,{class:"flex-1 flex flex-col ml-[20rpx] py-[6rpx]"},{default:c((()=>[u(s,{class:"text-[28rpx] text-[#333] leading-[40rpx] multi-hidden mb-[10rpx]"},{default:c((()=>[p(C(e.goods_name),1)])),_:2},1024),u(s,{class:"mt-auto flex justify-between items-baseline"},{default:c((()=>[u(s,{class:"text-[var(--price-text-color)] price-font flex items-baseline"},{default:c((()=>[u(l,{class:"text-[24rpx] font-500 mr-[4rpx]"},{default:c((()=>[p("￥")])),_:1}),u(l,{class:"text-[40rpx] font-500"},{default:c((()=>[p(C(te(e).toFixed(2).split(".")[0]),1)])),_:2},1024),u(l,{class:"text-[24rpx] font-500"},{default:c((()=>[p("."+C(te(e).toFixed(2).split(".")[1]),1)])),_:2},1024),"member_price"==le(e)?(o(),r(b,{key:0,class:"h-[24rpx] w-[72rpx] ml-[6rpx]",src:_(S)("addon/shop/VIP.png"),mode:"heightFix"},null,8,["src"])):i("v-if",!0),"discount_price"==le(e)?(o(),r(b,{key:1,class:"h-[24rpx] w-[72rpx] ml-[6rpx]",src:_(S)("addon/shop/discount.png"),mode:"heightFix"},null,8,["src"])):i("v-if",!0)])),_:2},1024),u(l,{class:"text-[22rpx] text-[var(--text-color-light9)]"},{default:c((()=>[p("已售"+C(e.sale_num)+C(e.unit),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])):(o(),r(s,{key:1,class:"goods-item-style-two flex flex-col bg-[#fff] box-border rounded-[var(--rounded-mid)] overflow-hidden mt-[var(--top-m)]",onClick:a=>ae(e.goods_id)},{default:c((()=>[e.goods_cover_thumb_mid?(o(),r(b,{key:0,class:"w-[100%] h-[344rpx] rounded-tl-[var(--rounded-mid)] rounded-tr-[var(--rounded-mid)]",src:_(S)(e.goods_cover_thumb_mid),mode:"aspectFill",onError:a=>e.goods_cover_thumb_mid="static/resource/images/diy/shop_default.jpg"},null,8,["src","onError"])):(o(),r(b,{key:1,class:"w-[100%] h-[344rpx] rounded-tl-[var(--rounded-mid)] rounded-tr-[var(--rounded-mid)]",src:_(S)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])),u(s,{class:"px-[20rpx] flex-1 pt-[16rpx] pb-[24rpx] flex flex-col justify-between"},{default:c((()=>[u(s,{class:"text-[#303133] leading-[40rpx] text-[28rpx] multi-hidden"},{default:c((()=>[p(C(e.goods_name),1)])),_:2},1024),u(s,{class:"flex justify-between flex-wrap items-baseline mt-[28rpx]"},{default:c((()=>[u(s,{class:"text-[var(--price-text-color)] price-font flex items-baseline"},{default:c((()=>[i('\t\t\t\t\t\t\t\t\t\t<text class="text-[20rpx]  mr-[4rpx]">￥</text>'),i('\t\t\t\t\t\t\t\t\t\t<text class="text-[36rpx] font-500">{{ item.goodsSku.price }}</text>'),u(l,{class:"text-[24rpx] font-500"},{default:c((()=>[p("￥")])),_:1}),u(l,{class:"text-[40rpx] font-500"},{default:c((()=>[p(C(te(e).toFixed(2).split(".")[0]),1)])),_:2},1024),u(l,{class:"text-[24rpx] font-500"},{default:c((()=>[p("."+C(te(e).toFixed(2).split(".")[1]),1)])),_:2},1024),"member_price"==le(e)?(o(),r(b,{key:0,class:"h-[24rpx] ml-[6rpx]",src:_(S)("addon/shop/VIP.png"),mode:"heightFix"},null,8,["src"])):i("v-if",!0),"discount_price"==le(e)?(o(),r(b,{key:1,class:"h-[24rpx] ml-[6rpx]",src:_(S)("addon/shop/discount.png"),mode:"heightFix"},null,8,["src"])):i("v-if",!0)])),_:2},1024),u(l,{class:"text-[22rpx] text-[var(--text-color-light9)]"},{default:c((()=>[p("已售"+C(e.sale_num)+C(e.unit),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]))],64)))),256))])),_:1},8,["class"])):i("v-if",!0),!D.value.length&&G.value?(o(),r(N,{key:1,option:{tip:"暂无商品",btnText:"去逛逛"}})):i("v-if",!0)])),_:1},8,["onInit"]),u(F)])),_:1},8,["style"])}}}),[["__scopeId","data-v-862a5d4f"]]);export{Q as default};
