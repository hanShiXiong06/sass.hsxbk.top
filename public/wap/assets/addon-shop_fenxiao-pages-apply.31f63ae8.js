import{d as e,r as a,x as l,o as t,c as s,w as o,b as r,u as n,y as i,z as p,U as u,V as d,W as c,f as x,ad as f,n as _,a as v,t as m,B as g,i as b,D as h,g as y,h as k,C as w,E as j,F,A as I,a7 as C,bl as O,I as N,J as z,_ as M}from"./index-71c7df08.js";import{j as B,k as E,b as S,l as V,m as T}from"./fenxiao.04341d50.js";const A=M(e({__name:"apply",setup(e){const M=a({}),A=a({}),D=a(!1),H=a({memberInfo:!1,applyInfo:!1,config:!1,check:!1}),J=()=>{B().then((e=>{A.value=Object.assign(A.value,e.data),A.value.is_fenxiao&&v({url:"/addon/shop_fenxiao/pages/index",mode:"redirectTo",param:{}}),H.value.memberInfo=!0})).catch((()=>{H.value.memberInfo=!0}))},U=()=>{E().then((e=>{A.value.status=e.data.status||0,3===A.value.status&&(A.value.refuse_reason=e.data.refuse_reason||""),H.value.applyInfo=!0})).catch((()=>{H.value.applyInfo=!0}))},W=()=>{S().then((e=>{M.value=Object.assign(M.value,e.data.fenxiao_config),"1"!=M.value.is_show_apply&&(D.value=!0),H.value.config=!0})).catch((()=>{H.value.config=!0}))},q=()=>{V().then((e=>{if(M.value=Object.assign(M.value,e.data.condition_data),"3"===M.value.fenxiao_condition){let e=0;Object.values(M.value.goods_list).forEach(((a,l)=>{a.is_buy&&(e+=1)})),M.value.goods_sum=e}M.value.is_allow_apply=e.data.is_allow_apply,H.value.check=!0})).catch((()=>{H.value.check=!0}))};l((()=>{H.value={memberInfo:!1,applyInfo:!1,config:!1,check:!1},M.value={},A.value={},J(),U(),W(),q()}));const G=()=>{D.value=!D.value},K=a(!1),L=()=>D.value?!K.value&&(K.value=!0,void T().then((e=>{K.value=!1,H.value={memberInfo:!1,applyInfo:!1,config:!1,check:!1},M.value={},A.value={},J(),U(),W(),q()})).catch((()=>{K.value=!1}))):(m({title:"请阅读并同意《分销申请协议》",icon:"none"}),!1);return(e,a)=>{const l=g,m=b,B=h,E=y(k("u--image"),O),S=y(k("u-checkbox"),N),V=y(k("u-checkbox-group"),z),T=w;return Object.values(H.value).every((e=>e))?(t(),s(m,{key:0,class:"bg-[var(--page-bg-color)] overflow-hidden min-h-[100vh]",style:_(e.themeColor())},{default:o((()=>["0"==M.value.is_fenxiao?(t(),s(m,{key:0,class:"empty-page"},{default:o((()=>[r(l,{class:"img",mode:"aspectFit",src:n(j)("addon/shop_fenxiao/unopened-fenxiao.png")},null,8,["src"]),r(m,{class:"desc"},{default:o((()=>[i(p(n(F)("fenxiaoNotOpen")),1)])),_:1})])),_:1})):3==M.value.apply_type?(t(),s(m,{key:1,class:"empty-page"},{default:o((()=>[r(l,{class:"img",mode:"aspectFit",src:n(j)("addon/shop_fenxiao/unopened-fenxiao.png")},null,8,["src"]),r(m,{class:"desc"},{default:o((()=>[i("请联系客服成为分销商")])),_:1})])),_:1})):(t(),u(d,{key:2},[0===A.value.status&&Object.keys(M.value).length&&"3"!=M.value.apply_type?(t(),u(d,{key:0},[r(l,{class:"w-[100vw] min-h-[100%] h-[100%]",mode:"widthFix",src:n(j)(M.value.apply_head||"")},null,8,["src"]),r(m,{class:"bg-[#fff] relative sidebar-margin mt-[-60rpx] rounded-[var(--rounded-big)] h-[100rpx] flex justify-between items-center px-[30rpx]"},{default:o((()=>[r(B,{class:"text-[30rpx] font-500 text-[#333]"},{default:o((()=>[i(p(n(F)("referrer")),1)])),_:1}),r(B,{class:c(["text-[28rpx]",{"text-[var(--text-color-light6)]":A.value.bindFenxiaoMember,"text-[var(--text-color-light9)]":!A.value.bindFenxiaoMember}])},{default:o((()=>[i(p(A.value.bindFenxiaoMember?A.value.bindFenxiaoMember.nickname:n(F)("notHave")),1)])),_:1},8,["class"])])),_:1}),["1","2","3"].indexOf(M.value.fenxiao_condition)>-1?(t(),s(m,{key:0,class:"apply-condition z-10 rounded-[var(--rounded-big)] mt-[var(--top-m)] box-border sidebar-margin"},{default:o((()=>[r(m,{class:"apply-condition-wrap z-10 rounded-[var(--rounded-big)] px-[10rpx] pb-[10rpx] box-border"},{default:o((()=>[r(m,{class:"flex items-center justify-between h-[40rpx] px-[20rpx] pt-[26rpx] pb-[14rpx]"},{default:o((()=>[r(m,{class:"text-[30rpx] font-500 text-[#fff]"},{default:o((()=>[i("申请条件")])),_:1}),"1"===M.value.fenxiao_condition?(t(),s(m,{key:0,class:"flex items-baseline text-[26rpx] text-[#fff]"},{default:o((()=>[r(B,null,{default:o((()=>[i("累计消费")])),_:1}),r(B,{class:"text-[30rpx] price-font mx-[6rpx]"},{default:o((()=>[i(p(M.value.order_count),1)])),_:1}),r(B,null,{default:o((()=>[i("次")])),_:1})])),_:1})):x("v-if",!0),"2"===M.value.fenxiao_condition?(t(),s(m,{key:1,class:"flex items-baseline text-[26rpx] text-[#fff]"},{default:o((()=>[r(B,null,{default:o((()=>[i("累计消费")])),_:1}),r(B,{class:"text-[30rpx] price-font mx-[6rpx]"},{default:o((()=>[i(p(M.value.order_sum),1)])),_:1}),r(B,null,{default:o((()=>[i("元")])),_:1})])),_:1})):x("v-if",!0),"3"===M.value.fenxiao_condition?(t(),s(m,{key:2,class:"flex items-baseline text-[24rpx] text-[#fff]"},{default:o((()=>[r(B,null,{default:o((()=>[i("已购买")])),_:1}),r(B,{class:"text-[30rpx] price-font mx-[6rpx]"},{default:o((()=>[i(p(M.value.goods_sum?M.value.goods_sum:0),1)])),_:1}),r(B,null,{default:o((()=>[i("个商品")])),_:1})])),_:1})):x("v-if",!0)])),_:1}),r(m,{class:"bg-[#fff] px-[var(--pad-sidebar-m)] py-[var(--pad-top-m)] rounded-[var(--rounded-mid)]"},{default:o((()=>["1"===M.value.fenxiao_condition?(t(),s(m,{key:0,class:"flex items-center"},{default:o((()=>[r(l,{class:"w-[32rpx] h-[32rpx] mr-[20rpx]",src:n(j)("addon/shop/apply/tiaojian.png")},null,8,["src"]),r(m,{class:"text-[26rpx] text-[#333]"},{default:o((()=>[i(" 累计消费"),r(B,{class:"price-font text-[28rpx] mx-[5rpx]"},{default:o((()=>[i(p(M.value.consume_count),1)])),_:1}),i("次可申请分销商 ")])),_:1})])),_:1})):x("v-if",!0),"2"===M.value.fenxiao_condition?(t(),s(m,{key:1,class:"flex items-center"},{default:o((()=>[r(l,{class:"w-[32rpx] h-[32rpx] mr-[20rpx]",src:n(j)("addon/shop/apply/tiaojian.png")},null,8,["src"]),r(m,{class:"text-[26rpx] text-[#333]"},{default:o((()=>[i(" 累计消费"),r(B,{class:"price-font text-[28rpx] mx-[5rpx]"},{default:o((()=>[i(p(M.value.consume_money),1)])),_:1}),i("元可申请分销商 ")])),_:1})])),_:1})):x("v-if",!0),"3"===M.value.fenxiao_condition?(t(),u(d,{key:2},[r(m,{class:"flex items-center pb-[10rpx]"},{default:o((()=>[r(l,{class:"w-[32rpx] h-[32rpx] mr-[20rpx]",src:n(j)("addon/shop/apply/tiaojian.png")},null,8,["src"]),r(B,{class:"text-[28rpx]"},{default:o((()=>[i("商品任选其一购买即可成为分销商")])),_:1})])),_:1}),(t(!0),u(d,null,f(M.value.goods_list,((e,a,u)=>(t(),s(m,{class:"flex py-[30rpx] relative fenxiao-goods-item",key:u,onClick:I((a=>{return l=e.goods_id,void v({url:"/addon/shop/pages/goods/detail",param:{goods_id:l}});var l}),["stop"])},{default:o((()=>[r(E,{width:"200rpx",height:"200rpx",radius:"var(--goods-rounded-big)",class:"overflow-hidden",src:n(j)(e.goods_cover_thumb_mid?e.goods_cover_thumb_mid:""),model:"aspectFill"},{error:o((()=>[r(l,{class:"w-[200rpx] h-[200rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:n(j)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["src"]),r(m,{class:"flex flex-1 flex-col justify-between py-[6rpx] ml-[20rpx] goods-item-content"},{default:o((()=>[r(m,{class:"multi-hidden text-[26rpx] font-500 leading-[1.4]"},{default:o((()=>[i(p(e.goods_name),1)])),_:2},1024),r(m,{class:"flex items-end justify-between"},{default:o((()=>[r(m,{class:"text-[var(--price-text-color)] inline-block price-font leading-[1]"},{default:o((()=>[r(B,{class:"text-[24rpx]"},{default:o((()=>[i("￥")])),_:1}),r(B,{class:"text-[40rpx]"},{default:o((()=>[i(p(parseFloat(n(C)(e.goods_sku.price)).toFixed(2).toString().split(".")[0]),1)])),_:2},1024),r(B,{class:"text-[24rpx]"},{default:o((()=>[i("."+p(parseFloat(n(C)(e.goods_sku.price)).toFixed(2).toString().split(".")[1]),1)])),_:2},1024)])),_:2},1024),r(B,{class:"nc-iconfont nc-icon-gouwucheV6xx-2 text-[#fff] text-[28rpx] bg-[#FE4C19] h-[48rpx] w-[48rpx] text-center leading-[48rpx] rounded-[50rpx]"})])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))],64)):x("v-if",!0)])),_:1})])),_:1})])),_:1})):x("v-if",!0),r(m,{class:"fixed btn-wrap flex justify-center flex-col bottom-[0] left-[0] right-[0] items-center bg-[#fff] py-[30rpx]"},{default:o((()=>[r(m,{class:c(["w-[690rpx] h-[80rpx] text-[26rpx] rounded-[100rpx] text-center leading-[80rpx]",{"bg-[#FFB4B1] text-[#fff]":!Number(M.value.is_allow_apply),"primary-btn-bg text-[#fff]":Number(M.value.is_allow_apply)}]),disabled:!Number(M.value.is_allow_apply),onClick:L},{default:o((()=>[i(p(Number(M.value.is_allow_apply)?"申请成为分销商":"尚未达到申请条件"),1)])),_:1},8,["class","disabled"]),"1"===M.value.is_show_apply?(t(),s(m,{key:0,class:"flex justify-center items-baseline mt-[20rpx] -mb-[10rpx]"},{default:o((()=>[r(V,null,{default:o((()=>[r(S,{activeColor:"var(--primary-color)",checked:D.value,shape:"circle",size:"14",onChange:G,customStyle:{marginTop:"4rpx"}},null,8,["checked"])])),_:1}),r(m,{class:"text-xs text-gray-400 flex items-center flex-wrap"},{default:o((()=>[r(B,null,{default:o((()=>[i("我已阅读并了解")])),_:1}),r(B,{onClick:a[0]||(a[0]=e=>n(v)({url:"/app/pages/auth/agreement?key=fenxiao_service"})),class:"text-primary"},{default:o((()=>[i("《分销申请协议》")])),_:1})])),_:1})])),_:1})):x("v-if",!0)])),_:1}),r(m,{class:c(["pt-[170rpx]",{"h-[50rpx]":"1"===M.value.is_show_apply}])},null,8,["class"])],64)):x("v-if",!0),1===A.value.status?(t(),s(m,{key:1,class:"empty-page"},{default:o((()=>[r(E,{class:"img",width:"400rpx",height:"300rpx",src:n(j)("addon/shop_fenxiao/fenxiao.png"),model:"aspectFill"},null,8,["src"]),r(m,{class:"desc"},{default:o((()=>[i("您已提交分销商申请，等待平台审核")])),_:1})])),_:1})):x("v-if",!0),3===A.value.status?(t(),s(m,{key:2,class:"empty-page h-[auto] min-h-[710rpx] pt-[100rpx] pb-[80rpx]"},{default:o((()=>[r(B,{class:"iconfont icona-guanbi-34V6mm !text-[120rpx] text-[red] mb-[60rpx]"}),r(m,{class:"desc !text-[34rpx] !text-[#333]"},{default:o((()=>[i("您提交的分销商申请已被拒绝")])),_:1}),r(m,{class:"text-[28rpx] px-[40rpx] mt-[40rpx] leading-[1.3] text-[var(--text-color-light6)]"},{default:o((()=>[i("拒绝原因："+p(A.value.refuse_reason),1)])),_:1}),r(T,{class:"primary-btn-bg mt-[140rpx] h-[80rpx] flex-center text-[26rpx] rounded-[100rpx] w-[420rpx] text-[#fff]","hover-class":"none",onClick:a[1]||(a[1]=e=>A.value.status=0)},{default:o((()=>[i("重新申请")])),_:1})])),_:1})):x("v-if",!0)],64)),x(' <loading-page :loading="loading"></loading-page> ')])),_:1},8,["style"])):x("v-if",!0)}}}),[["__scopeId","data-v-9946cf82"]]);export{A as default};
