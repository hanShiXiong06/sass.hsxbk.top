import{am as t,an as e,ao as s,bX as i,aW as o,by as a,bh as l,bY as n,bm as r,bz as c,bZ as u,bx as p,o as d,c as m,w as h,b as f,n as y,aR as g,i as b,b_ as _,b$ as v,bG as x,g as k,h as C,Q as S,f as j,y as w,z as T,D as I,bt as z,d as N,r as F,l as O,j as $,p as R,O as H,u as U,P as V,a6 as Z,t as q,a5 as E}from"./index-2882a2d8.js";import{_ as G}from"./u-tabs.fdd28cbd.js";import{_ as Q}from"./u-text.1d25de27.js";import{_ as Y}from"./u-textarea.6361767e.js";import{_ as B}from"./u-button.0ab7ff00.js";import{_ as D}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as M}from"./u-icon.1104ad2f.js";import{_ as P}from"./u-cell.b0c66245.js";import{a as W,_ as X}from"./u-gap.13fde593.js";import{_ as A}from"./u-loading-icon.a37f7e61.js";import{_ as J}from"./tabbar.f422f3d5.js";import{_ as K}from"./u-overlay.1a317a4e.js";import"./mescroll-i18n.c2747603.js";/* empty css                                                                       */import"./mescroll-body.e69cb222.js";import"./cart.5f692c63.js";import"./u-badge.e8ba7dff.js";import"./u-line.d7ff94e2.js";/* empty css                                                               *//* empty css                                                                       */import"./u-tabbar.b113c065.js";import"./u-safe-bottom.f13b01b8.js";import"./u-transition.4448d2e5.js";const L=D({name:"u-sticky",mixins:[e,s,{props:{offsetTop:{type:[String,Number],default:()=>t.sticky.offsetTop},customNavHeight:{type:[String,Number],default:44},disabled:{type:Boolean,default:()=>t.sticky.disabled},bgColor:{type:String,default:()=>t.sticky.bgColor},zIndex:{type:[String,Number],default:()=>t.sticky.zIndex},index:{type:[String,Number],default:()=>t.sticky.index}}}],data:()=>({cssSticky:!1,stickyTop:0,elId:i(),left:0,width:"auto",height:"auto",fixed:!1}),computed:{style(){const t={};return this.disabled?t.position="static":this.cssSticky?(t.position="sticky",t.zIndex=this.uZindex,t.top=o(this.stickyTop)):t.height=this.fixed?this.height+"px":"auto",t.backgroundColor=this.bgColor,a(l(this.customStyle),t)},stickyContent(){const t={};return this.cssSticky||(t.position=this.fixed?"fixed":"static",t.top=this.stickyTop+"px",t.left=this.left+"px",t.width="auto"==this.width?"auto":this.width+"px",t.zIndex=this.uZindex),t},uZindex(){return this.zIndex?this.zIndex:n.sticky}},mounted(){this.init()},methods:{init(){this.getStickyTop(),this.checkSupportCssSticky(),this.cssSticky||!this.disabled&&this.initObserveContent()},initObserveContent(){this.$uGetRect("#"+this.elId).then((t=>{this.height=t.height,this.left=t.left,this.width=t.width,this.$nextTick((()=>{this.observeContent()}))}))},observeContent(){this.disconnectObserver("contentObserver");const t=r({thresholds:[.95,.98,1]});t.relativeToViewport({top:-this.stickyTop}),t.observe(`#${this.elId}`,(t=>{this.setFixed(t.boundingClientRect.top)})),this.contentObserver=t},setFixed(t){const e=t<=this.stickyTop;this.fixed=e},disconnectObserver(t){const e=this[t];e&&e.disconnect()},getStickyTop(){this.stickyTop=c(this.offsetTop)+c(this.customNavHeight)},async checkSupportCssSticky(){this.checkCssStickyForH5()&&(this.cssSticky=!0),"android"===u()&&Number(p().system)>8&&(this.cssSticky=!0),"ios"===u()&&(this.cssSticky=!0)},checkComputedStyle(){},checkCssStickyForH5(){const t=["","-webkit-","-ms-","-moz-","-o-"],e=t.length,s=document.createElement("div");for(let i=0;i<e;i++)if(s.style.position=t[i]+"sticky",""!==s.style.position)return!0;return!1}},beforeUnmount(){this.disconnectObserver("contentObserver")}},[["render",function(t,e,s,i,o,a){const l=b;return d(),m(l,{class:"u-sticky",id:o.elId,style:y([a.style])},{default:h((()=>[f(l,{style:y([a.stickyContent]),class:"u-sticky__content"},{default:h((()=>[g(t.$slots,"default",{},void 0,!0)])),_:3},8,["style"])])),_:3},8,["id","style"])}],["__scopeId","data-v-dbb1d77f"]]);const tt=D({name:"u-toast",mixins:[e,s],data:()=>({isShow:!1,timer:null,config:{message:"",type:"",duration:2e3,icon:!0,position:"center",complete:null,overlay:!1,loading:!1},tmpConfig:{}}),computed:{iconName(){return this.tmpConfig.icon&&"none"!=this.tmpConfig.icon&&["error","warning","success","primary"].includes(this.tmpConfig.type)?_(this.tmpConfig.type):""},overlayStyle(){const t={justifyContent:"center",alignItems:"center",display:"flex",backgroundColor:"rgba(0, 0, 0, 0)"};return t},iconStyle(){const t={marginRight:"4px"};return t},loadingIconColor(){let t="rgb(255, 255, 255)";return["error","warning","success","primary"].includes(this.tmpConfig.type)&&(t=v(x[this.tmpConfig.type])),t},contentStyle(){const t=p().windowHeight,e={};let s=0;return"top"===this.tmpConfig.position?s=.25*-t:"bottom"===this.tmpConfig.position&&(s=.25*t),e.transform=`translateY(${s}px)`,e}},created(){["primary","success","error","warning","default","loading"].map((t=>{this[t]=e=>this.show({type:t,message:e})}))},methods:{show(t){this.tmpConfig=a(this.config,t),this.clearTimer(),this.isShow=!0,this.timer=setTimeout((()=>{this.clearTimer(),"function"==typeof this.tmpConfig.complete&&this.tmpConfig.complete()}),this.tmpConfig.duration)},hide(){this.clearTimer()},clearTimer(){this.isShow=!1,clearTimeout(this.timer),this.timer=null}},beforeUnmount(){this.clearTimer()}},[["render",function(t,e,s,i,o,a){const l=k(C("u-loading-icon"),A),n=k(C("u-icon"),M),r=k(C("u-gap"),W),c=I,u=b,p=k(C("u-overlay"),K);return d(),m(u,{class:"u-toast"},{default:h((()=>[f(p,{show:o.isShow,"custom-style":a.overlayStyle},{default:h((()=>[f(u,{class:S(["u-toast__content",["u-type-"+o.tmpConfig.type,"loading"===o.tmpConfig.type||o.tmpConfig.loading?"u-toast__content--loading":""]]),style:y([a.contentStyle])},{default:h((()=>["loading"===o.tmpConfig.type?(d(),m(l,{key:0,mode:"circle",color:"rgb(255, 255, 255)",inactiveColor:"rgb(120, 120, 120)",size:"25"})):"defalut"!==o.tmpConfig.type&&a.iconName?(d(),m(n,{key:1,name:a.iconName,size:"17",color:o.tmpConfig.type,customStyle:a.iconStyle},null,8,["name","color","customStyle"])):j("v-if",!0),"loading"===o.tmpConfig.type||o.tmpConfig.loading?(d(),m(r,{key:2,height:"12",bgColor:"transparent"})):j("v-if",!0),f(c,{class:S(["u-toast__content__text",["u-toast__content__text--"+o.tmpConfig.type]]),style:{"max-width":"400rpx"}},{default:h((()=>[w(T(o.tmpConfig.message),1)])),_:1},8,["class"])])),_:1},8,["style","class"])])),_:1},8,["show","custom-style"])])),_:1})}],["__scopeId","data-v-58bbdac0"]]);const et=D(N({__name:"index",props:{config:{type:Object,default:()=>({})},categoryId:{type:[String,Number],default:0}},setup(t){let e={level:1,template:"style-1",page_title:"商品分类",search:{control:1,title:"请输入搜索型号"},goods:{style:"single-cols"},sort:"default",cart:{control:0,event:"detail",style:"style-1",text:"购买"}};t.categoryId,F("");const s=F(!0),i=F(""),o=F([]),a=F(0),l=O();$((()=>l.info)),F("");const n=F([]),r=F(0);R((async()=>{await z.get("hsx_phone_query/category").then((t=>{n.value=t.data,s.value=!1}))}));const c=(t,e)=>{r.value=t.index,o.value=[],i.value=""},u=F(null),p=async t=>{var e;(s.value=!0,i.value)?(await(e={imeis:i.value,id:t},z.get("hsx_phone_query/query",e)).then((t=>{1==t.code&&(o.value=t.data)})).catch((t=>{q({title:t.msg,icon:"none",duration:2e3})})),i.value="",s.value=!1):q({title:"请输入手机SN",icon:"error",duration:2e3})};return(t,l)=>{const y=k(C("up-tabs"),G),g=b,_=E,v=k(C("up-text"),Q),x=k(C("up-textarea"),Y),z=k(C("up-button"),B),N=k(C("up-sticky"),L),F=k(C("u-icon"),M),O=I,$=k(C("up-cell"),P),R=k(C("up-cell-group"),X),q=k(C("u-loading-icon"),A),D=k(C("tabbar"),J),W=k(C("up-toast"),tt);return d(),H(V,null,[f(g,{class:"bg-[#F4F6F8] min-h-screen"},{default:h((()=>[n.value.length?(d(),m(g,{key:0,class:"mescroll-box"},{default:h((()=>[U(e).search.control?(d(),m(g,{key:0,class:"search-box z-10 bg-[#fff] fixed top-0 left-0 right-0 h-[106rpx] box-border"},{default:h((()=>[f(y,{list:n.value,onClick:c},null,8,["list"])])),_:1})):j("v-if",!0),f(g,{class:S(["tabs-box z-2 fixed left-0 bg-[#fff] bottom-[50px] top-0",{"!top-[106rpx]":U(e).search.control}])},{default:h((()=>[f(_,{"scroll-y":!0,class:"scroll-height"},{default:h((()=>[f(g,{class:"bg-[#F4F6F8]"},{default:h((()=>[(d(!0),H(V,null,Z(n.value[r.value].child,((t,e)=>(d(),m(g,{class:S(["tab-item flex",{"tab-item-active":e==a.value,"rounded-br-[12rpx]":a.value-1===e,"rounded-tr-[12rpx]":a.value+1===e}]),key:e,onClick:t=>((t,e)=>{a.value=t})(e)},{default:h((()=>[f(g,{class:"text-box px-[10rpx] text-[24rpx]"},{default:h((()=>[w(T(t.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1},8,["class"]),f(_,{class:"h-[100vh]","scroll-y":!0},{default:h((()=>[f(g,{class:S(["pl-[212rpx] scroll-ios pt-[20rpx] pr-[20rpx]",{"!pt-[126rpx]":U(e).search.control}])},{default:h((()=>[f(N,null,{default:h((()=>[f(g,{class:"bg-[#fff] rounded p-2"},{default:h((()=>[f(v,{type:"primary",text:n.value[r.value].child[a.value].name},null,8,["text"]),f(g,{class:"flex justify-between items-center"},{default:h((()=>[w(" 价格: "),f(v,{type:"error",text:n.value[r.value].child[a.value].price},null,8,["text"]),w(" 积分: "),f(v,{type:"error",text:(100*n.value[r.value].child[a.value].price).toFixed(0)},null,8,["text"])])),_:1}),f(x,{class:"m-2",modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=t=>i.value=t),placeholder:"请输入手机SN目前仅支持单条串号查询 , 不支持IMEI及多条查询"},null,8,["modelValue"]),f(g,{class:"flex m-2"},{default:h((()=>[f(z,{class:"m-2",type:"primary",onClick:l[1]||(l[1]=t=>p(n.value[r.value].child[a.value].id)),text:"积分查询"}),f(z,{class:"m-2",type:"primary",disabled:"",onClick:l[2]||(l[2]=t=>p(n.value[r.value].child[a.value].id)),text:"余额查询"})])),_:1})])),_:1})])),_:1}),0!==o.value.length?(d(),m(g,{key:0,class:"mt-2 bg-[#fff] rounded p-2"},{default:h((()=>[f(R,null,{default:h((()=>[(d(!0),H(V,null,Z(o.value,((t,e)=>(d(),m($,{key:e,title:e},{value:h((()=>[j(" 如果 value中有http 则使用 图标标签显示 "),t.indexOf("http")>-1?(d(),m(F,{key:0,name:t,size:"40",color:"#303133"},null,8,["name"])):(d(),m(O,{key:1,class:"u-slot-value"},{default:h((()=>[w(T(t),1)])),_:2},1024))])),_:2},1032,["title"])))),128))])),_:1}),s.value?(d(),m(q,{key:0,"bg-color":"rgb(248,248,248)",loadingText:"",fontSize:"16",color:"#303133"})):j("v-if",!0)])),_:1})):j("v-if",!0)])),_:1},8,["class"])])),_:1})])),_:1})):j("v-if",!0),f(D)])),_:1}),f(W,{ref_key:"uToastRef",ref:u},null,512)],64)}}}),[["__scopeId","data-v-e1846703"]]);export{et as default};
