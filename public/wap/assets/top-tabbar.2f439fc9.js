import{d as t,ac as e,a_ as l,m as a,r as s,bh as o,a8 as n,W as i,q as r,o as c,E as u,f as d,u as y,c as p,w as f,b as x,n as g,H as v,x as h,y as k,G as m,Y as C,aj as b,b2 as w,bl as _,bf as B,i as S,N as V,C as j,V as z,b3 as H,aH as q}from"./index-e6ce9fbf.js";import{m as R}from"./manifest.78a5c925.js";import{_ as T}from"./_plugin-vue_export-helper.1b428a4d.js";const $=T(t({__name:"top-tabbar",props:{data:{type:Object,default:{}},titleColor:{type:String,default:"#606266"},customBack:{type:Function,default:null},scrollTop:{type:[String,Number],default:"0"},isBack:{type:Boolean,default:!0}},setup(t,{expose:T}){const $=t;let L=e();L.platform;let W={};const F=l(),N=a((()=>$.data)),U=a((()=>{if($.data&&$.data.topStatusBar)return $.data.topStatusBar})),A=a((()=>{let t="";return $.isBack&&O.value?(t+="padding-left: 30rpx;","style-1"==U.value.style&&(t+="padding-right:80rpx;")):("style-1"==U.value.style&&(t+="padding-right: 30rpx;"),t+="padding-left: 30rpx;"),t})),D=a((()=>{let t="";return t+="font-size: 28rpx;",t+=`color: ${U.value.textColor};`,"style-1"==U.value.style&&(t+=`text-align: ${U.value.textAlign};`),t})),I=a((()=>{var t="";if(U.value.isTransparent){t="transparent";let e=1;t=$.scrollTop>e?U.value.bgColor:"transparent"}else t=U.value.bgColor;return t}));let O=s(!1),E=o();const G=()=>{"function"==typeof $.customBack?$.customBack():C()},P=a((()=>`calc(100vw - ${W.right}px + ${W.width}px + 10px)`));let Y=s(0);const J=H(),K=n();let M=s("定位中..."),Q=uni.getStorageSync("mapConfig");const X=()=>{if(et("latng")){M.value="定位中...";let e=K.location;var t=et("latng").split(",");e.latitude=t[0],e.longitude=t[1],K.setLocation(e)}M.value="定位中...",uni.getStorageSync("addressByLatlng")&&(M.value=uni.getStorageSync("addressByLatlng").formatted_addresses.recommend),1==Q.is_open&&_()&&_().is_expired&&B({fail:t=>{M.value="定位中..."}})};i((()=>K.location),((t,e)=>{t.latitude&&t.longitude?Z():M.value="定位中..."}),{deep:!0});const Z=()=>{let t={latlng:""};t.latlng=K.location.latitude+","+K.location.longitude,q(t).then((t=>{t.data&&Object.keys(t.data).length?(M.value=t.data.formatted_addresses.recommend,uni.setStorageSync("addressByLatlng",t.data)):M.value="定位中..."}))},tt=()=>{let t=location.origin+location.pathname;window.location.href="https://apis.map.qq.com/tools/locpicker?search=1&type=0&backurl="+encodeURIComponent(t)+"&key="+R.h5.sdkConfigs.maps.qqmap.key+"&referer=myapp"},et=t=>{for(var e=window.location.search.substring(1).split("&"),l=0;l<e.length;l++){var a=e[l].split("=");if(a[0]==t)return a[1]}return!1};let lt=s("");i((()=>U.value.style),((t,e)=>{if("style-5"==U.value.style&&(lt.value="",N.value.imgWidth&&N.value.imgHeight)){let t=L.windowWidth/N.value.imgWidth*N.value.imgHeight;lt.value+="width:100%;",t-=88,lt.value+=`padding-top:${t}px;`,lt.value+="height:0;"}}),{immediate:!0,deep:!0}),r((()=>{b((()=>{w().in(J).select(".ns-navbar-wrap .u-navbar .content-wrap").boundingClientRect((t=>{Y.value=t?t.height:0,F.topTabarHeight=Y.value})).exec()})),E.length>1&&(O.value=!0),U.value&&"style-4"==U.value.style&&X()}));return T({refresh:()=>{U.value&&"style-4"==U.value.style&&X()}}),(e,l)=>{const a=S,s=V,o=j;return c(),u(m,null,[d(" diyStore.mode !='decorate' && topStatusBarData topStatusBarData.style == 'style-5 为了兼容风格五 "),"decorate"!=y(F).mode&&y(U)||"decorate"==y(F).mode&&y(U)&&"style-5"==y(U).style?(c(),p(a,{key:0,class:v(["ns-navbar-wrap",y(U).style])},{default:f((()=>[x(a,{class:"u-navbar",style:g({backgroundColor:y(I)})},{default:f((()=>[x(a,{class:"navbar-inner",style:g({width:"100%",height:y(Y)+"px"})},{default:f((()=>["style-1"==y(U).style?(c(),p(a,{key:0,class:v(["content-wrap",[y(U).textAlign]]),style:g(y(A))},{default:f((()=>[t.isBack&&y(O)?(c(),p(a,{key:0,class:"back-wrap text-[26px] nc-iconfont nc-icon-zuoV6xx",style:g({color:y(U).textColor||t.titleColor}),onClick:G},null,8,["style"])):d("v-if",!0),x(a,{class:"title-wrap",style:g(y(D))},{default:f((()=>[h(k(y(N).title),1)])),_:1},8,["style"])])),_:1},8,["class","style"])):d("v-if",!0),"style-2"==y(U).style?(c(),p(a,{key:1,class:"content-wrap",style:g(y(A)),onClick:l[0]||(l[0]=t=>y(F).toRedirect(y(U).link))},{default:f((()=>[t.isBack&&y(O)?(c(),p(a,{key:0,class:"back-wrap text-[26px] nc-iconfont nc-icon-zuoV6xx",style:g({color:y(U).textColor||t.titleColor}),onClick:G},null,8,["style"])):d("v-if",!0),x(a,{class:"title-wrap",style:g({color:y(U).textColor})},{default:f((()=>[x(a,null,{default:f((()=>[x(s,{src:y(z)(y(U).imgUrl),mode:"heightFix"},null,8,["src"])])),_:1}),x(a,{style:g({color:y(U).textColor})},{default:f((()=>[h(k(y(N).title),1)])),_:1},8,["style"])])),_:1},8,["style"])])),_:1},8,["style"])):d("v-if",!0),"style-3"==y(U).style?(c(),p(a,{key:2,style:g(y(A)),class:"content-wrap"},{default:f((()=>[t.isBack&&y(O)?(c(),p(a,{key:0,class:"back-wrap text-[26px] nc-iconfont nc-icon-zuoV6xx",style:g({color:y(U).textColor||t.titleColor}),onClick:G},null,8,["style"])):d("v-if",!0),x(a,{class:"title-wrap",onClick:l[1]||(l[1]=t=>y(F).toRedirect(y(U).link))},{default:f((()=>[x(s,{src:y(z)(y(U).imgUrl),mode:"heightFix"},null,8,["src"])])),_:1}),x(a,{class:"search",onClick:l[2]||(l[2]=t=>y(F).toRedirect(y(U).link)),style:g({height:y(W).height-2+"px",lineHeight:y(W).height-2+"px"})},{default:f((()=>[x(o,{class:"nc-iconfont nc-icon-sousuoV6xx absolute left-[20rpx]"}),x(o,{class:"text-[28rpx]"},{default:f((()=>[h(k(y(U).inputPlaceholder),1)])),_:1})])),_:1},8,["style"]),x(a,{style:g({width:y(P)})},null,8,["style"])])),_:1},8,["style"])):d("v-if",!0),"style-4"==y(U).style?(c(),p(a,{key:3,style:g(y(A)),class:"content-wrap"},{default:f((()=>[t.isBack&&y(O)?(c(),p(a,{key:0,class:"back-wrap text-[26px] nc-iconfont nc-icon-zuoV6xx",style:g({color:y(U).textColor||t.titleColor}),onClick:G},null,8,["style"])):d("v-if",!0),x(o,{class:"nc-iconfont nc-icon-dizhiguanliV6xx text-[28rpx]",style:g({color:y(U).textColor})},null,8,["style"]),x(a,{class:"title-wrap",onClick:l[3]||(l[3]=t=>tt()),style:g({color:y(U).textColor})},{default:f((()=>[h(k(y(M)),1)])),_:1},8,["style"]),x(o,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx]",onClick:l[4]||(l[4]=t=>tt()),style:g({color:y(U).textColor})},null,8,["style"])])),_:1},8,["style"])):d("v-if",!0)])),_:1},8,["style"])])),_:1},8,["style"]),d(" 风格5，填充 "),"style-5"==y(U).style?(c(),p(a,{key:0,style:g(y(lt))},null,8,["style"])):d("v-if",!0),d(" 解决fixed定位后导航栏塌陷的问题 "),x(a,{class:"u-navbar-placeholder",style:g({width:"100%",paddingTop:y(Y)+"px"})},null,8,["style"])])),_:1},8,["class"])):d("v-if",!0)],2112)}}}),[["__scopeId","data-v-9bc91117"]]);export{$ as _};
