import{d as e,r as t,o as a,c as l,w as s,U as r,b as o,u as c,y as n,z as d,f as u,W as x,V as i,ad as m,n as p,ae as f,af as _,B as v,D as g,i as y,g as h,h as b,E as k,a7 as w,F as j,_ as C}from"./index-71c7df08.js";import{_ as F}from"./loading-page.vue_vue_type_script_setup_true_lang.c7dc2256.js";import{M as I}from"./mescroll-body.49de0f6f.js";import{M}from"./mescroll-empty.95b8c17e.js";import{u as S}from"./useMescroll.26ccf5de.js";import{h as U,i as z,f as E}from"./fenxiao.04341d50.js";import"./mescroll-i18n.00218d15.js";/* empty css                                                                       */const N=C(e({__name:"order",setup(e){const{mescrollInit:C,downCallback:N,getMescroll:R}=S(_,f),B=t([]),D=t(!0),O=t(!0),P=e=>{let t={is_settlement:q.value,page:e.num,limit:e.size};O.value=!0,U(t).then((t=>{let a=t.data.data;1==e.num&&(B.value=[]),B.value=B.value.concat(a),O.value=!1,e.endSuccess(a.length)})).catch((()=>{O.value=!1,e.endErr()}))},Q=t({}),V=()=>{z().then((e=>{Q.value=e.data}))};V();const W=t({});D.value=!0,E().then((e=>{W.value=e.data,D.value=!1}));const q=t(1),A=e=>{q.value=e,B.value=[],R().resetUpScroll(),V()};return(e,t)=>{const f=v,_=g,S=y,U=h(b("loading-page"),F);return a(),l(S,{class:"bg-[#f8f8f8] min-h-[100vh]",style:p(e.themeColor())},{default:s((()=>[D.value?u("v-if",!0):(a(),r(i,{key:0},[o(S,{class:"flex items-center order-bg-wrap p-[40rpx]"},{default:s((()=>[W.value.member&&W.value.member.headimg?(a(),l(f,{key:0,class:"w-[80rpx] h-[80rpx] rounded-full mr-[20rpx]",src:c(k)(W.value.member.headimg),mode:"aspectFill"},null,8,["src"])):(a(),l(f,{key:1,class:"w-[80rpx] h-[80rpx] rounded-full mr-[20rpx]",src:c(k)("addon/shop_fenxiao/index/head.png"),mode:"aspectFill"},null,8,["src"])),o(S,{class:"flex flex-col"},{default:s((()=>[o(S,{class:"flex items-center"},{default:s((()=>[o(_,{class:"truncate max-w-[380rpx] text-[#fff] font-500 mr-[10rpx] text-[30rpx]"},{default:s((()=>[n(d(W.value.member.nickname||W.value.member.username),1)])),_:1}),W.value.fenxiao_level?(a(),l(_,{key:0,class:"bg-primary-light !text-[var(--primary-color)] !text-[22rpx] px-[10rpx] h-[34rpx] ml-[10rpx] tag-item"},{default:s((()=>[n(d(W.value.fenxiao_level.level_name),1)])),_:1})):u("v-if",!0)])),_:1})])),_:1})])),_:1}),o(S,{class:"tab-style-3"},{default:s((()=>[o(S,{class:x(["tab-items",{"class-select":1==q.value}]),onClick:t[0]||(t[0]=e=>A(1))},{default:s((()=>[o(_,{class:"text-[28rpx]"},{default:s((()=>[n("已结算")])),_:1}),o(_,{class:"text-[28rpx]"},{default:s((()=>[n("("+d(c(w)(Q.value.fenxiao_commission))+")",1)])),_:1})])),_:1},8,["class"]),o(S,{class:x(["tab-items",{"class-select":0==q.value}]),onClick:t[1]||(t[1]=e=>A(0))},{default:s((()=>[o(_,{class:"text-[28rpx]"},{default:s((()=>[n("待结算")])),_:1}),o(_,{class:"text-[28rpx]"},{default:s((()=>[n("("+d(c(w)(Q.value.unsettlement))+")",1)])),_:1})])),_:1},8,["class"])])),_:1}),o(I,{ref:"mescrollRef",bottom:"100rpx",onInit:c(C),down:{use:!1},onUp:P},{default:s((()=>[B.value.length?(a(),l(S,{key:0,class:"sidebar-margin pt-[var(--top-m)]"},{default:s((()=>[(a(!0),r(i,null,m(B.value,((e,t)=>(a(),l(S,{class:"card-template mb-[var(--top-m)]",key:t},{default:s((()=>[o(S,{class:"flex items-center justify-between text-[26rpx] leading-[36rpx] text-[#333]"},{default:s((()=>[o(S,null,{default:s((()=>[o(_,null,{default:s((()=>[n(d(c(j)("orderNo"))+":",1)])),_:1}),o(_,{class:"ml-[10rpx]"},{default:s((()=>[n(d(e.order_no),1)])),_:2},1024)])),_:2},1024),o(_,{class:"text-[var(--text-color-light6)]"},{default:s((()=>[n(d(e.is_settlement?"已结算":"未结算"),1)])),_:2},1024)])),_:2},1024),o(S,{class:"flex pt-[20rpx]"},{default:s((()=>[e.order_goods&&e.order_goods.goods_image_thumb_mid?(a(),l(f,{key:0,class:"w-[180rpx] h-[180rpx] rounded-[var(--goods-rounded-big)] shrink-0",src:c(k)(e.order_goods.goods_image_thumb_mid),mode:"aspectFill"},null,8,["src"])):(a(),l(f,{key:1,class:"w-[180rpx] h-[180rpx] rounded-[var(--goods-rounded-big)] shrink-0",src:c(k)("addon/shop_fenxiao/index/commission_rank.png"),mode:"aspectFill"},null,8,["src"])),o(S,{class:"flex flex-1 flex-col ml-[20rpx] w-[470rpx] pb-[6rpx]"},{default:s((()=>[o(S,{class:"w-[462rpx] text-[28rpx] truncate leading-[1.5]"},{default:s((()=>[n(d(e.order_goods.goods_name),1)])),_:2},1024),o(S,{class:"text-[var(--text-color-light6)] flex items-center whitespace-nowrap mt-[20rpx] text-[24rpx]"},{default:s((()=>[o(S,{class:"flex items-center"},{default:s((()=>[o(_,null,{default:s((()=>[n("购买人：")])),_:1}),o(S,{class:"max-w-[120rpx] truncate"},{default:s((()=>[n(d(e.shop_order.member.nickname||"-"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),o(S,{class:"flex items-center justify-between mt-[auto]"},{default:s((()=>[o(S,{class:"inline-block leading-[1]"},{default:s((()=>[o(_,{class:"text-[var(--price-text-color)] text-[22rpx] price-font font-500 mr-[4rpx]"},{default:s((()=>[n("￥")])),_:1}),o(_,{class:"text-[var(--price-text-color)] text-[36rpx] price-font font-500"},{default:s((()=>[n(d(c(w)(e.order_goods.goods_money).split(".")[0]),1)])),_:2},1024),o(_,{class:"text-[var(--price-text-color)] text-[22rpx] price-font font-500"},{default:s((()=>[n("."+d(c(w)(e.order_goods.goods_money).split(".")[1]),1)])),_:2},1024)])),_:2},1024),e.order_goods&&1!=e.order_goods.status&&e.order_goods.status_name?(a(),l(S,{key:0,class:"text-[24rpx] text-[var(--text-color-light9)]"},{default:s((()=>[n(d(c(j)("refundStatus"))+d(e.order_goods.status_name),1)])),_:2},1024)):u("v-if",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024),o(S,{class:"flex items-center justify-between mt-[20rpx] flex-wrap"},{default:s((()=>[u(' <view class="text-[24rpx] flex items-center leading-[35rpx]">\r\n\t\t\t\t\t\t\t\t<text>购买人：</text>\r\n\t\t\t\t\t\t\t\t<text class="text-[var(--primary-color)]">{{ item.shop_order.member.nickname||\'-\' }}</text>\r\n\t\t\t\t\t\t\t</view> '),o(S,{class:"text-[24rpx] flex items-center leading-[35rpx]"},{default:s((()=>[o(_,{class:"mr-[4rpx]"},{default:s((()=>[n("计算价:")])),_:1}),o(_,{class:"text-[var(--price-text-color)]"},{default:s((()=>[n("￥"+d(c(w)(e.order_goods_money)),1)])),_:2},1024)])),_:2},1024),e.calculate_type?(a(),l(S,{key:0,class:"flex items-center text-[24rpx] leading-[35rpx]"},{default:s((()=>[o(_,{class:"mr-[4rpx]"},{default:s((()=>[n(d(e.calculate_type_name)+":",1)])),_:2},1024),o(_,{class:"text-[var(--price-text-color)]"},{default:s((()=>[n(d(1!=e.calculate_type?"￥"+c(w)(e.commission):e.commission_rate+"%"),1)])),_:2},1024)])),_:2},1024)):u("v-if",!0),o(S,{class:"flex items-center text-[24rpx]"},{default:s((()=>[o(_,{class:"mr-[4rpx]"},{default:s((()=>[n("佣金:")])),_:1}),o(S,{class:"text-[var(--primary-color)]"},{default:s((()=>[n(d(c(w)(e.commission)||"0.00"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):u("v-if",!0),B.value.length||O.value?u("v-if",!0):(a(),l(M,{key:1,option:{icon:c(k)("static/resource/images/empty.png")}},null,8,["option"]))])),_:1},8,["onInit"])],64)),o(U,{loading:D.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-39d895c5"]]);export{N as default};
