import{bu as e,d as t,r as a,j as r,o as s,c as l,w as o,u as n,I as d,b as i,y as c,z as f,f as m,L as x,K as p,J as u,n as _,a3 as g,a4 as v,Q as y,D as h,i as b,g as w,h as k,l as j,Z as C,x as I}from"./index-d8a8f699.js";import{_ as z}from"./u-empty.41eb000a.js";import{_ as F}from"./u-loading-page.c740ef13.js";import{M}from"./mescroll-body.f9302aea.js";import{M as S}from"./mescroll-empty.2fe85dec.js";import{u as U}from"./useMescroll.26ccf5de.js";import{f as D}from"./fenxiao.966b2ea4.js";import{_ as E}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.5ba98c98.js";import"./u-loading-icon.6808ae8c.js";import"./u-transition.db07fff7.js";import"./mescroll-i18n.49872024.js";const J=E(t({__name:"team_dividend",setup(t){const{mescrollInit:E,downCallback:J,getMescroll:Z}=U(v,g);let B=a("");r((async()=>{await e.get("shop_fenxiao/order/team/config").then((e=>{B.value=e.data.is_open}))}));let K=a([]),L=a(!0),Q=a(!0);const R=t=>{let a={is_settlement:Y.value,page:t.num,limit:t.size};var r;Q.value=!0,(r=a,e.get("shop_fenxiao/order/team",r)).then((e=>{let a=e.data.data;1==t.num&&(K.value=[]),K.value=K.value.concat(a),Q.value=!1,t.endSuccess(a.length)})).catch((()=>{Q.value=!1,t.endErr()}))};let T=a({});const W=()=>{e.get("shop_fenxiao/order/team/stat").then((e=>{T.value=e.data}))};W();let X=a({});L.value=!0,D().then((e=>{X.value=e.data,L.value=!1}));let Y=a(1);const q=e=>{Y.value=e,K.value=[],Z().resetUpScroll(),W()};return(e,t)=>{const a=y,r=h,g=b,v=w(k("u-empty"),z),U=w(k("u-loading-page"),F);return s(),l(g,{class:"bg-[#f8f8f8] min-h-[100vh] team-dividend",style:_(e.themeColor())},{default:o((()=>[n(L)||1!=n(B)?m("v-if",!0):(s(),d(p,{key:0},[i(g,{class:"flex items-center wrap-bg p-[40rpx]"},{default:o((()=>[n(X).member&&n(X).member.headimg?(s(),l(a,{key:0,class:"w-[90rpx] h-[90rpx] rounded-full mr-[20rpx]",src:n(j)(n(X).member.headimg),mode:"aspectFill"},null,8,["src"])):(s(),l(a,{key:1,class:"w-[90rpx] h-[90rpx] rounded-full mr-[20rpx]",src:n(j)("addon/shop_fenxiao/index/head.png"),mode:"aspectFill"},null,8,["src"])),i(g,{class:"flex flex-col"},{default:o((()=>[i(g,{class:"flex items-center"},{default:o((()=>[i(r,{class:"truncate max-w-[380rpx] mr-[10rpx] text-[28rpx] text-[#fff]"},{default:o((()=>[c(f(n(X).member.nickname||n(X).member.username),1)])),_:1}),n(X).fenxiao_level?(s(),l(r,{key:0,class:"text-[#fff] text-[24rpx] border-[2rpx] border-solid border-[#fff] px-[6rpx] py-[8rpx] whitespace-nowrap"},{default:o((()=>[c(f(n(X).fenxiao_level.level_name),1)])),_:1})):m("v-if",!0)])),_:1}),n(X).fenxiao_level?(s(),l(r,{key:0,class:"text-[#fff] text-[24rpx] mt-[14rpx]"},{default:o((()=>[c("团队分红比率 "+f(n(X).fenxiao_level.team_rate)+"%",1)])),_:1})):m("v-if",!0)])),_:1})])),_:1}),i(g,{class:"bg-[#fff] sticky top-[0] z-10"},{default:o((()=>[i(g,{class:"flex whitespace-nowrap justify-around overflow-hidden"},{default:o((()=>[i(g,{class:x(["text-center justify-center flex flex-1 h-[90rpx] mx-[60rpx] items-center border-0 border-b-[2rpx] border-solid border-[transparent]",{"!border-[var(--primary-color)] text-[var(--primary-color)]":1==n(Y)}]),onClick:t[0]||(t[0]=e=>q(1))},{default:o((()=>[i(r,{class:"text-[28rpx]"},{default:o((()=>[c("已结算")])),_:1}),i(r,{class:"text-[28rpx]"},{default:o((()=>[c("("+f(n(C)(n(T).team_commission))+")",1)])),_:1})])),_:1},8,["class"]),i(g,{class:x(["text-sm text-center justify-center flex flex-1 h-[90rpx] mx-[60rpx] items-center border-0 border-b-[2rpx] border-solid border-[transparent]",{"!border-[var(--primary-color)] text-[var(--primary-color)]":0==n(Y)}]),onClick:t[1]||(t[1]=e=>q(0))},{default:o((()=>[i(r,{class:"text-[28rpx]"},{default:o((()=>[c("待结算")])),_:1}),i(r,{class:"text-[28rpx]"},{default:o((()=>[c("("+f(n(C)(n(T).unsettlement))+")",1)])),_:1})])),_:1},8,["class"])])),_:1})])),_:1}),i(M,{ref:"mescrollRef",onInit:n(E),down:{use:!1},onUp:R},{default:o((()=>[(s(!0),d(p,null,u(n(K),((e,t)=>(s(),l(g,{class:"bg-[#fff] rounded-[16rpx] p-[30rpx] sidebar-marign mt-[24rpx]",key:t},{default:o((()=>[i(g,{class:"flex items-center justify-between text-[28rpx]"},{default:o((()=>[i(r,null,{default:o((()=>[c("订单："+f(e.order_no),1)])),_:2},1024),i(r,{class:"text-[var(--primary-color)]"},{default:o((()=>[c(f(e.is_settlement?"已结算":"未结算"),1)])),_:2},1024)])),_:2},1024),i(g,{class:"flex pt-[40rpx]"},{default:o((()=>[e.order_goods&&e.order_goods.goods_image_thumb_mid?(s(),l(a,{key:0,class:"w-[160rpx] h-[160rpx] rounded-[10rpx]",src:n(j)(e.order_goods.goods_image_thumb_mid),mode:"aspectFill"},null,8,["src"])):(s(),l(a,{key:1,class:"w-[160rpx] h-[160rpx] rounded-[10rpx]",src:n(j)("addon/shop_fenxiao/index/commission_rank.png"),mode:"aspectFill"},null,8,["src"])),i(g,{class:"flex flex-1 flex-col ml-[20rpx]"},{default:o((()=>[i(g,{class:"text-[28rpx] leading-[1.5]"},{default:o((()=>[i(r,null,{default:o((()=>[c(f(e.order_goods.goods_name.length>21?e.order_goods.goods_name.substr(0,21)+"...":e.order_goods.goods_name),1)])),_:2},1024),i(g,{class:"text-[#999] ml-[10rpx] inline-block whitespace-nowrap"},{default:o((()=>[i(g,{class:"flex items-center"},{default:o((()=>[i(r,null,{default:o((()=>[c("(购买人：")])),_:1}),i(g,{class:"max-w-[120rpx] truncate"},{default:o((()=>[c(f(e.shop_order.member.nickname||"-"),1)])),_:2},1024),i(r,null,{default:o((()=>[c(")")])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1024),i(g,{class:"text-[var(--primary-color)] mt-[20rpx] text-[28rpx] font-bold"},{default:o((()=>[c(" ￥"+f(n(C)(e.order_goods.goods_money)),1)])),_:2},1024),e.order_goods&&1!=e.order_goods.status&&e.order_goods.status_name?(s(),l(g,{key:0,class:"mt-[20rpx] text-[24rpx] text-[#999]"},{default:o((()=>[c(f(n(I)("refundStatus"))+f(e.order_goods.status_name),1)])),_:2},1024)):m("v-if",!0)])),_:2},1024)])),_:2},1024),i(g,{class:"flex items-center justify-between mt-[40rpx] flex-wrap"},{default:o((()=>[i(g,{class:"flex items-center text-[24rpx]"},{default:o((()=>[i(r,null,{default:o((()=>[c("分红比率：")])),_:1}),e.commission_rate||e.team_flat_rate?(s(),l(g,{key:0,class:"text-[var(--primary-color)]"},{default:o((()=>[c(f(e.team_flat_rate>0?e.team_flat_rate+"%(平级分红比率)":e.commission_rate+"%"),1)])),_:2},1024)):(s(),l(g,{key:1,class:"flex items-center"},{default:o((()=>[c("--")])),_:1}))])),_:2},1024),i(g,{class:"text-[24rpx] flex items-center"},{default:o((()=>[i(r,null,{default:o((()=>[c("佣金：")])),_:1}),i(r,{class:"text-[var(--primary-color)]"},{default:o((()=>[c(f(n(C)(e.commission)||"0.00"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),n(K).length||n(Q)?m("v-if",!0):(s(),l(g,{key:0,class:"w-full h-[calc(100vh-262rpx)] flex justify-center items-center"},{default:o((()=>[i(S,{option:{icon:n(j)("static/resource/images/empty.png")}},null,8,["option"])])),_:1}))])),_:1},8,["onInit"])],64)),0!=n(B)||n(L)?m("v-if",!0):(s(),l(g,{key:1,class:"h-[100vh] w-[100vw] flex justify-center items-center"},{default:o((()=>[i(v,{text:"团队分红设置未开启",width:"347rpx",height:"265rpx",icon:n(j)("static/resource/images/system/empty.png")},null,8,["icon"])])),_:1})),i(U,{"bg-color":"rgb(248,248,248)",loading:n(L),loadingText:"",fontSize:"16",color:"#333"},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-113a1f1e"]]);export{J as default};
