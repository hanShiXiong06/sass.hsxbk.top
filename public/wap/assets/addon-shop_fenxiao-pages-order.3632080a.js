import{d as e,r as t,o as a,c as l,w as s,O as r,b as o,u as c,y as n,z as d,f as i,Q as u,P as p,a6 as m,n as x,a7 as _,a8 as f,B as v,D as g,i as y,g as h,h as b,E as k,a0 as w,F as j}from"./index-2882a2d8.js";import{_ as F}from"./loading-page.vue_vue_type_script_setup_true_lang.cb99ee23.js";import{M as C}from"./mescroll-body.e69cb222.js";import{M as I}from"./mescroll-empty.7f392528.js";import{u as M}from"./useMescroll.26ccf5de.js";import{h as S,i as U,f as z}from"./fenxiao.cc7bcc27.js";import{_ as D}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-page.8280c7ab.js";import"./u-loading-icon.a37f7e61.js";/* empty css                                                                       */import"./u-transition.4448d2e5.js";import"./mescroll-i18n.c2747603.js";/* empty css                                                                       */const E=D(e({__name:"order",setup(e){const{mescrollInit:D,downCallback:E,getMescroll:Q}=M(f,_),R=t([]),B=t(!0),N=t(!0),O=e=>{let t={is_settlement:$.value,page:e.num,limit:e.size};N.value=!0,S(t).then((t=>{let a=t.data.data;1==e.num&&(R.value=[]),R.value=R.value.concat(a),N.value=!1,e.endSuccess(a.length)})).catch((()=>{N.value=!1,e.endErr()}))},P=t({}),T=()=>{U().then((e=>{P.value=e.data}))};T();const Z=t({});B.value=!0,z().then((e=>{Z.value=e.data,B.value=!1}));const $=t(1),q=e=>{$.value=e,R.value=[],Q().resetUpScroll(),T()};return(e,t)=>{const _=v,f=g,M=y,S=h(b("loading-page"),F);return a(),l(M,{class:"bg-[#f8f8f8] min-h-[100vh]",style:x(e.themeColor())},{default:s((()=>[B.value?i("v-if",!0):(a(),r(p,{key:0},[o(M,{class:"flex items-center order-bg-wrap p-[40rpx]"},{default:s((()=>[Z.value.member&&Z.value.member.headimg?(a(),l(_,{key:0,class:"w-[80rpx] h-[80rpx] rounded-full mr-[20rpx]",src:c(k)(Z.value.member.headimg),mode:"aspectFill"},null,8,["src"])):(a(),l(_,{key:1,class:"w-[80rpx] h-[80rpx] rounded-full mr-[20rpx]",src:c(k)("addon/shop_fenxiao/index/head.png"),mode:"aspectFill"},null,8,["src"])),o(M,{class:"flex flex-col"},{default:s((()=>[o(M,{class:"flex items-center"},{default:s((()=>[o(f,{class:"truncate max-w-[380rpx] text-[#fff] font-500 mr-[10rpx] text-[30rpx]"},{default:s((()=>[n(d(Z.value.member.nickname||Z.value.member.username),1)])),_:1}),Z.value.fenxiao_level?(a(),l(f,{key:0,class:"bg-primary-light !text-[var(--primary-color)] !text-[22rpx] px-[10rpx] h-[34rpx] ml-[10rpx] tag-item"},{default:s((()=>[n(d(Z.value.fenxiao_level.level_name),1)])),_:1})):i("v-if",!0)])),_:1})])),_:1})])),_:1}),o(M,{class:"tab-style-3"},{default:s((()=>[o(M,{class:u(["tab-items",{"class-select":1==$.value}]),onClick:t[0]||(t[0]=e=>q(1))},{default:s((()=>[o(f,{class:"text-[28rpx]"},{default:s((()=>[n("已结算")])),_:1}),o(f,{class:"text-[28rpx]"},{default:s((()=>[n("("+d(c(w)(P.value.fenxiao_commission))+")",1)])),_:1})])),_:1},8,["class"]),o(M,{class:u(["tab-items",{"class-select":0==$.value}]),onClick:t[1]||(t[1]=e=>q(0))},{default:s((()=>[o(f,{class:"text-[28rpx]"},{default:s((()=>[n("待结算")])),_:1}),o(f,{class:"text-[28rpx]"},{default:s((()=>[n("("+d(c(w)(P.value.unsettlement))+")",1)])),_:1})])),_:1},8,["class"])])),_:1}),o(C,{ref:"mescrollRef",bottom:"100rpx",onInit:c(D),down:{use:!1},onUp:O},{default:s((()=>[R.value.length?(a(),l(M,{key:0,class:"sidebar-marign pt-[var(--top-m)]"},{default:s((()=>[(a(!0),r(p,null,m(R.value,((e,t)=>(a(),l(M,{class:"card-template mb-[var(--top-m)]",key:t},{default:s((()=>[o(M,{class:"flex items-center justify-between text-[26rpx] leading-[36rpx] text-[#333]"},{default:s((()=>[o(M,null,{default:s((()=>[o(f,null,{default:s((()=>[n(d(c(j)("orderNo"))+":",1)])),_:1}),o(f,{class:"ml-[10rpx]"},{default:s((()=>[n(d(e.order_no),1)])),_:2},1024)])),_:2},1024),o(f,{class:"text-[var(--text-color-light6)]"},{default:s((()=>[n(d(e.is_settlement?"已结算":"未结算"),1)])),_:2},1024)])),_:2},1024),o(M,{class:"flex pt-[20rpx]"},{default:s((()=>[e.order_goods&&e.order_goods.goods_image_thumb_mid?(a(),l(_,{key:0,class:"w-[180rpx] h-[180rpx] rounded-[var(--goods-rounded-big)] shrink-0",src:c(k)(e.order_goods.goods_image_thumb_mid),mode:"aspectFill"},null,8,["src"])):(a(),l(_,{key:1,class:"w-[180rpx] h-[180rpx] rounded-[var(--goods-rounded-big)] shrink-0",src:c(k)("addon/shop_fenxiao/index/commission_rank.png"),mode:"aspectFill"},null,8,["src"])),o(M,{class:"flex flex-1 flex-col ml-[20rpx] w-[470rpx] pb-[6rpx]"},{default:s((()=>[o(M,{class:"w-[462rpx] text-[28rpx] truncate leading-[1.5]"},{default:s((()=>[n(d(e.order_goods.goods_name),1)])),_:2},1024),o(M,{class:"text-[var(--text-color-light6)] flex items-center whitespace-nowrap mt-[20rpx] text-[24rpx]"},{default:s((()=>[o(M,{class:"flex items-center"},{default:s((()=>[o(f,null,{default:s((()=>[n("购买人：")])),_:1}),o(M,{class:"max-w-[120rpx] truncate"},{default:s((()=>[n(d(e.shop_order.member.nickname||"-"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),o(M,{class:"flex items-center justify-between mt-[auto]"},{default:s((()=>[o(M,{class:"inline-block leading-[1]"},{default:s((()=>[o(f,{class:"text-[var(--price-text-color)] text-[22rpx] price-font font-500 mr-[4rpx]"},{default:s((()=>[n("￥")])),_:1}),o(f,{class:"text-[var(--price-text-color)] text-[36rpx] price-font font-500"},{default:s((()=>[n(d(c(w)(e.order_goods.goods_money).split(".")[0]),1)])),_:2},1024),o(f,{class:"text-[var(--price-text-color)] text-[22rpx] price-font font-500"},{default:s((()=>[n("."+d(c(w)(e.order_goods.goods_money).split(".")[1]),1)])),_:2},1024)])),_:2},1024),e.order_goods&&1!=e.order_goods.status&&e.order_goods.status_name?(a(),l(M,{key:0,class:"text-[24rpx] text-[var(--text-color-light9)]"},{default:s((()=>[n(d(c(j)("refundStatus"))+d(e.order_goods.status_name),1)])),_:2},1024)):i("v-if",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024),o(M,{class:"flex items-center justify-between mt-[20rpx] flex-wrap"},{default:s((()=>[i(' <view class="text-[24rpx] flex items-center leading-[35rpx]">\r\n\t\t\t\t\t\t\t\t<text>购买人：</text>\r\n\t\t\t\t\t\t\t\t<text class="text-[var(--primary-color)]">{{ item.shop_order.member.nickname||\'-\' }}</text>\r\n\t\t\t\t\t\t\t</view> '),o(M,{class:"text-[24rpx] flex items-center leading-[35rpx]"},{default:s((()=>[o(f,{class:"mr-[4rpx]"},{default:s((()=>[n("计算价:")])),_:1}),o(f,{class:"text-[var(--price-text-color)]"},{default:s((()=>[n("￥"+d(c(w)(e.order_goods_money)),1)])),_:2},1024)])),_:2},1024),e.calculate_type?(a(),l(M,{key:0,class:"flex items-center text-[24rpx] leading-[35rpx]"},{default:s((()=>[o(f,{class:"mr-[4rpx]"},{default:s((()=>[n(d(e.calculate_type_name)+":",1)])),_:2},1024),o(f,{class:"text-[var(--price-text-color)]"},{default:s((()=>[n(d(1!=e.calculate_type?"￥"+c(w)(e.commission):e.commission_rate+"%"),1)])),_:2},1024)])),_:2},1024)):i("v-if",!0),o(M,{class:"flex items-center text-[24rpx]"},{default:s((()=>[o(f,{class:"mr-[4rpx]"},{default:s((()=>[n("佣金:")])),_:1}),o(M,{class:"text-[var(--primary-color)]"},{default:s((()=>[n(d(c(w)(e.commission)||"0.00"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):i("v-if",!0),R.value.length||N.value?i("v-if",!0):(a(),l(I,{key:1,option:{icon:c(k)("static/resource/images/empty.png")}},null,8,["option"]))])),_:1},8,["onInit"])],64)),o(S,{loading:B.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-fac1d9e7"]]);export{E as default};
