import{_ as e}from"./u--image.b3bf1d5c.js";import{d as a,r as t,p as l,K as s,o as r,c as d,w as o,P as i,b as n,u as f,y as p,n as u,z as x,f as _,Q as c,a7 as m,a as g,g as v,h as b,i as h,D as y,C as w,E as j,a1 as k,R as N}from"./index-7bf68536.js";import{_ as C}from"./loading-page.vue_vue_type_script_setup_true_lang.124ad65f.js";import{d as z}from"./sale.cd84b764.js";import{b as I}from"./fenxiao.745a840a.js";import{_ as D}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.e46f68ef.js";import"./u-icon.0c1c54c7.js";import"./u-transition.cdf87992.js";import"./u-loading-page.566c330a.js";import"./u-loading-icon.b37701e7.js";const E=D(a({__name:"sale_detail",setup(a){const D=t({}),E=t([]);l((e=>{if(e.id)K(Number(e.id));else{s({url:"/addon/shop_fenxiao/pages/sale",title:"缺少销售奖励id"})}}));const F=t(!0),K=e=>{z(e).then((a=>{D.value.id=e,D.value.is_settlement=a.data.is_settlement,D.value.order_money=a.data.order_money,D.value.reward_money=D.value.is_settlement?a.data.reward_money:a.data.diff_data.now_reward,D.value.sale_start_time=a.data.sale_start_time,D.value.sale_end_time=a.data.sale_end_time,D.value.is_settlement||(D.value.diff_data=a.data.diff_data),L()})).catch((()=>{F.value=!1}))},L=()=>{I().then((e=>{D.value.condition_order_money=e.data.sale_config.condition.order_money,E.value=e.data.sale_config.reward.map(((a,t)=>(a.title=t?Number(e.data.sale_config.reward[t-1].end)+1!=Number(a.end)?"第 "+(Number(e.data.sale_config.reward[t-1].end)+1)+"-"+a.end:"第 "+a.end:a.end>1?"前 "+a.end:"第 "+a.end,a))),F.value=!1})).catch((e=>{F.value=!1}))},M=()=>{g({url:"/addon/shop_fenxiao/pages/sale_ranking",param:{id:D.value.id}})},P=()=>{g({url:"/addon/shop/pages/index",mode:"reLaunch"})};return(a,t)=>{const l=v(b("u--image"),e),s=h,g=y,z=w,I=v(b("loading-page"),C);return r(),d(s,{class:"bg-[var(--page-bg-color)] min-h-[100vh]",style:u(a.themeColor())},{default:o((()=>[F.value?_("v-if",!0):(r(),i(c,{key:0},[n(s,{class:"w-[100%] h-[960rpx] relative background-size box-border",style:u({backgroundImage:"url("+f(j)("addon/shop_fenxiao/sale-detail-header.png")+")"})},{default:o((()=>[n(s,{class:"absolute top-[105rpx] left-0 right-0 flex justify-center"},{default:o((()=>[n(l,{width:"341rpx",height:"63rpx",src:f(j)("addon/shop_fenxiao/sale-detail-title.png"),model:"aspectFill"},null,8,["src"])])),_:1}),n(s,{class:"side-tab",onClick:M},{default:o((()=>[n(g,{class:"iconfont iconpaihangbangV6xx1 icon"}),n(g,{class:"desc"},{default:o((()=>[p("排行榜")])),_:1})])),_:1})])),_:1},8,["style"]),n(s,{class:"py-[24rpx] px-[var(--sidebar-m)] relative mt-[-560rpx] box-border"},{default:o((()=>[n(s,{class:"w-full box-border bg-[#fff] rounded-[var(--rounded-big)] overflow-hidden"},{default:o((()=>[n(s,{class:"bg-[#fdf6ec] px-[var(--pad-sidebar-m)] py-[30rpx]"},{default:o((()=>[n(s,{class:"text-[30rpx] font-500 text-[#b88230] mb-[20rpx]"},{default:o((()=>[p("当前业绩")])),_:1}),n(s,{class:"flex items-center mb-[10rpx]"},{default:o((()=>[n(s,{class:"text-[24rpx] text-[#b88230]"},{default:o((()=>[p("奖励周期：")])),_:1}),n(s,{class:"flex"},{default:o((()=>[n(s,{class:"text-[24rpx] text-[#b88230] leading-[32rpx]"},{default:o((()=>[p(x(D.value.sale_start_time.split(" ")[0].replace(/-/g,".")),1)])),_:1}),n(s,{class:"text-[24rpx] text-[#b88230] leading-[32rpx]"},{default:o((()=>[p("-"+x(D.value.sale_end_time.split(" ")[0].replace(/-/g,".")),1)])),_:1})])),_:1})])),_:1}),!D.value.is_settlement&&D.value.diff_data.diff_order_money?(r(),d(s,{key:0,class:"text-[24rpx] leading-[32rpx] text-[#b88230]"},{default:o((()=>[p(" 再卖"+x(D.value.diff_data.diff_order_money)+"元可获得"+x(f(k)(D.value.diff_data.prev_reward))+"元 ",1)])),_:1})):_("v-if",!0)])),_:1}),n(s,{class:"w-full pt-[70rpx] flex justify-between box-border"},{default:o((()=>[n(s,{class:"w-[50%] flex-shrink-0 box-border pl-[30rpx] pr-[24rpx]"},{default:o((()=>[n(s,{class:"text-[28rpx] text-[#333]"},{default:o((()=>[p("个人奖金（元）")])),_:1}),n(s,{class:"text-[50rpx] font-500 text-left mt-[20rpx] price-font"},{default:o((()=>[p(x(f(k)(D.value.reward_money)),1)])),_:1})])),_:1}),n(s,{class:"w-[50%] flex-shrink-0 box-border pr-[30rpx] pl-[24rpx]"},{default:o((()=>[n(s,{class:"text-[28rpx] text-[#333]"},{default:o((()=>[p("团队销售（元）")])),_:1}),n(s,{class:"text-[50rpx] font-500 text-left mt-[20rpx] price-font"},{default:o((()=>[p(x(f(k)(D.value.order_money)),1)])),_:1})])),_:1})])),_:1}),n(s,{class:"w-full pt-[90rpx] pb-[40rpx] flex justify-center"},{default:o((()=>[n(z,{class:"w-[460rpx] h-[76rpx] text-[26rpx] flex-center rounded-[100rpx] !text-[#fff] m-0 primary-btn-bg remove-border font-500",shape:"circle",onClick:P},{default:o((()=>[p("去推广商品")])),_:1})])),_:1})])),_:1}),n(s,{class:"w-full card-template overflow-hidden top-mar"},{default:o((()=>[n(s,{class:"text-[30rpx] leading-[42rpx] flex items-center"},{default:o((()=>[n(g,{class:"font-500"},{default:o((()=>[p("排名奖励规则")])),_:1}),n(g,{class:"text-[24rpx] text-[var(--text-color-light6)] ml-[10rpx]"},{default:o((()=>[p("参与门槛: 团队销售额"+x(f(k)(D.value.condition_order_money))+"元",1)])),_:1})])),_:1}),(r(!0),i(c,null,m(E.value,((e,a)=>(r(),d(s,{class:N(["text-[26rpx] mt-[30rpx]",{"mb-[34rpx]":a!=E.value.length}])},{default:o((()=>[p("团队销售"+x(e.title)+" 名，奖金 "+x(f(k)(e.reward.commission))+" 元",1)])),_:2},1032,["class"])))),256))])),_:1})])),_:1})],64)),n(I,{loading:F.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-f4afbc71"]]);export{E as default};
