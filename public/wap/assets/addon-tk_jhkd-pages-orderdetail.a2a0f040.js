import{d as e,r as a,L as t,p as s,o as r,P as l,b as o,w as d,y as f,z as n,c as u,f as i,Q as c,a7 as _,e as m,v as p,u as x,aT as v,i as y,D as k,g as I,h as g,B as h,E as b}from"./index-7bf68536.js";import{_ as j,a as w}from"./u-collapse.5482a779.js";import{_ as C}from"./u-icon.0c1c54c7.js";import{_ as N}from"./u-code-input.0bb27fda.js";import{_ as O,a as R}from"./u-steps.9fc55f35.js";import{_ as J}from"./tabbar.e049672c.js";import{_ as S}from"./pay.d2e850e8.js";import{e as z,c as D,d as P,b as L,f as F}from"./order.4cc1c605.js";import{g as T}from"./goto.c2c6ac48.js";import{_ as U}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-cell.1557b609.js";import"./u-line.463a2a45.js";import"./u-text.df478cbc.js";import"./u-badge.d8d91719.js";import"./u-tabbar.d98653fa.js";import"./u-safe-bottom.908eeae4.js";import"./cloneDeep.77735539.js";import"./u-image.e46f68ef.js";import"./u-transition.cdf87992.js";import"./u-popup.be4bfacd.js";import"./pay.2db06871.js";const q=U(e({__name:"orderdetail",setup(e){const U=a(null),q=a(!1),A=t({}),B=a(),E=a(),H=e=>{v({phoneNumber:e})},M=async()=>{await D(A.id),T("/addon/tk_jhkd/pages/orderlist")},Q=async()=>{await P(A.id),T("/addon/tk_jhkd/pages/orderlist")},V=async()=>{let e={id:A.id,close_reason:"用户主动退款"};await L(e),T("/addon/tk_jhkd/pages/orderlist")},$=()=>{var e;q.value=!0,null==(e=U.value)||e.open(A.payInfo.trade_type,A.payInfo.trade_id,"/tk_jhkd/pages/orderdetail?id="+A.id)},G=async e=>{const a=await z(e);null==a.data.order_status_arr&&(uni.$u.toast("订单不存在或删除"),setTimeout((function(){T("/addon/tk_jhkd/pages/orderlist")}),1e3)),Object.assign(A,a.data),A.orderInfo.delivery_id&&(async e=>{const a=await F(e);B.value=a.data})(A.orderInfo.delivery_id),A.orderInfo.courier_context&&(E.value=JSON.parse(A.orderInfo.courier_context),console.log(E.value))};return s((e=>{e.id&&G(e.id)})),(e,a)=>{const t=y,s=k,v=I(g("up-collapse-item"),j),z=I(g("up-collapse"),w),D=I(g("u-icon"),C),P=I(g("u-code-input"),N),L=h,F=I(g("u-steps-item"),O),T=I(g("u-steps"),R),G=I(g("tabbar"),J),K=I(g("pay"),S);return r(),l(c,null,[o(t,{class:""},{default:d((()=>[o(t,{class:"tk-card"},{default:d((()=>[o(t,{class:"order-num-card"},{default:d((()=>[o(t,{class:"text-xs font-weight text-slate-600"},{default:d((()=>[f("订单号:"+n(A.order_id),1)])),_:1}),o(t,{class:"fb mt-1"},{default:d((()=>[o(t,{class:"text-xs font-weight text-slate-500"},{default:d((()=>[f(n(A.create_time),1)])),_:1}),A.order_status_arr?(r(),u(t,{key:0,class:"mr-4 tk-tag"},{default:d((()=>[f(n(A.order_status_arr.name),1)])),_:1})):i("v-if",!0)])),_:1})])),_:1}),o(t,{class:"flex mt-1 items-center"},{default:d((()=>[o(t,{class:"mr-4"},{default:d((()=>[o(s,{class:"qu-tag text-xs"},{default:d((()=>[f("取")])),_:1})])),_:1}),A.orderInfo?(r(),u(t,{key:0,class:""},{default:d((()=>[o(t,{class:"tk-sltext text-xs text-[#4b4b4b] font-bold"},{default:d((()=>[f(n(JSON.parse(A.orderInfo.start_address).address),1)])),_:1}),o(t,{class:"text-xs flex"},{default:d((()=>[o(t,{class:"tk-sltext"},{default:d((()=>[f(n(JSON.parse(A.orderInfo.start_address).full_address),1)])),_:1})])),_:1}),o(t,{class:"text-xs flex"},{default:d((()=>[o(t,{class:"tk-sltext"},{default:d((()=>[f(n(JSON.parse(A.orderInfo.start_address).mobile),1)])),_:1})])),_:1})])),_:1})):i("v-if",!0)])),_:1}),o(t,{class:"flex mt-2 items-center"},{default:d((()=>[o(t,{class:"mr-4"},{default:d((()=>[o(s,{class:"song-tag text-xs"},{default:d((()=>[f("送")])),_:1})])),_:1}),A.orderInfo?(r(),u(t,{key:0,class:""},{default:d((()=>[o(t,{class:"tk-sltext text-xs text-[#4b4b4b] font-bold"},{default:d((()=>[f(n(JSON.parse(A.orderInfo.end_address).address),1)])),_:1}),o(t,{class:"text-xs flex"},{default:d((()=>[o(t,{class:"tk-sltext w-3/4"},{default:d((()=>[f(n(JSON.parse(A.orderInfo.end_address).full_address),1)])),_:1})])),_:1}),o(t,{class:"text-xs flex"},{default:d((()=>[o(t,{class:"tk-sltext w-3/4"},{default:d((()=>[f(n(JSON.parse(A.orderInfo.end_address).mobile),1)])),_:1})])),_:1})])),_:1})):i("v-if",!0)])),_:1}),A.orderInfo?(r(),u(t,{key:0,class:"detail-tag text-xs font-weight p-4 text-[#878787]"},{default:d((()=>[f(" 物品:"+n(A.orderInfo.goods)+"下单重量:"+n(A.orderInfo.weight)+"kg "+n(A.orderInfo.goods)+" "+n(A.orderInfo.long)+"x"+n(A.orderInfo.width)+"x"+n(A.orderInfo.height)+"cm ",1)])),_:1})):i("v-if",!0),o(t,{class:"detail-tag font-weight p-4 text-[#313131]"},{default:d((()=>[f("备注:"+n(A.remark),1)])),_:1}),o(t,{class:"flex justify-end mt-2"},{default:d((()=>[A.order_status_arr?(r(!0),l(c,{key:0},_(A.order_status_arr.member_action,((e,a)=>(r(),u(t,{class:"tk-tag mr-4",onClick:a=>{return"gopay"==(t=e.class)&&$(),"del"==t&&Q(),"refund"==t&&V(),void("close"==t&&M());var t}},{default:d((()=>[f(n(e.name),1)])),_:2},1032,["onClick"])))),256)):i("v-if",!0)])),_:1})])),_:1}),o(t,null,{default:d((()=>[o(z,{onChange:e.change001,onClose:e.close001,onOpen:e.open001},{default:d((()=>[o(v,{title:"计费信息",name:"Docs guide"},{default:d((()=>[o(t,{class:"p-2 !bg-[#f7f7f7] font-bold"},{default:d((()=>[A.orderInfo?(r(),u(t,{key:0,class:"flex"},{default:d((()=>[o(t,{class:""},{default:d((()=>[f("首重:"+n(A.orderInfo.price_rule.first)+"元/"+n(A.orderInfo.price_rule.start)+"kg ",1)])),_:1}),o(t,{class:"ml-6"},{default:d((()=>[f("续重:"+n(A.orderInfo.price_rule.add)+"元/kg",1)])),_:1})])),_:1})):i("v-if",!0),A.deliveryRealInfo?(r(),u(t,{key:1,class:""},{default:d((()=>[o(t,{class:"flex"},{default:d((()=>[A.deliveryRealInfo.fee_weight>0?(r(),u(t,{key:0},{default:d((()=>[f(" 计费重量:"+n(A.deliveryRealInfo.fee_weight)+"kg ",1)])),_:1})):i("v-if",!0),A.deliveryRealInfo.volume>0?(r(),u(t,{key:1,class:"ml-8"},{default:d((()=>[f("体积:"+n(A.deliveryRealInfo.volume)+"cm³ ",1)])),_:1})):i("v-if",!0)])),_:1}),A.deliveryRealInfo&&A.deliveryRealInfo.fee_blockList.length>0?(r(!0),l(c,{key:0},_(A.deliveryRealInfo.fee_blockList,((e,a)=>(r(),u(t,{class:"flex"},{default:d((()=>[o(t,null,{default:d((()=>[f(n(e.name),1)])),_:2},1024),o(t,null,{default:d((()=>[f(n(e.fee)+"元",1)])),_:2},1024)])),_:2},1024)))),256)):i("v-if",!0)])),_:1})):i("v-if",!0)])),_:1})])),_:1})])),_:1},8,["onChange","onClose","onOpen"])])),_:1}),o(t,{class:"tk-card"},{default:d((()=>[A.orderInfo&&E.value&&1==A.orderInfo.order_status?(r(),u(t,{key:0,class:"mb-2 font-weight text-xs text-slate-600"},{default:d((()=>[o(t,{class:"fl items-center"},{default:d((()=>[o(t,{class:""},{default:d((()=>[f("揽件员："+n(E.value.courierName),1)])),_:1}),o(t,{class:"ml-4 mr-1",onClick:a[0]||(a[0]=e=>H(E.value.courierPhone))},{default:d((()=>[f("联系电话："+n(E.value.courierPhone),1)])),_:1}),o(D,{name:"phone",color:"#676767",size:"18",onClick:a[1]||(a[1]=e=>H(E.value.courierPhone))})])),_:1}),E.value&&E.value.pickUpCode?(r(),u(t,{key:0,class:"mt-2"},{default:d((()=>[o(P,{size:"24",bold:"",color:"#2931cc",value:E.value.pickUpCode},null,8,["value"])])),_:1})):i("v-if",!0)])),_:1})):i("v-if",!0),m(o(t,{class:"mt-2 flex items-center"},{default:d((()=>[o(L,{src:x(b)(A.orderInfo&&A.orderInfo.delivery_arry?A.orderInfo.delivery_arry.logo:""),mode:"",style:{width:"34px",height:"34px","border-radius":"100%"}},null,8,["src"]),o(t,{class:""},{default:d((()=>[o(t,{class:"ml-2 text-sm"},{default:d((()=>[f(n(A.orderInfo&&A.orderInfo.delivery_arry?A.orderInfo.delivery_arry.name:""),1)])),_:1}),A.orderInfo&&1!=A.orderInfo.order_status?(r(),u(t,{key:0,class:"ml-2 font-weight text-xs text-slate-600"},{default:d((()=>[f(n(A.orderInfo&&A.orderInfo.delivery_id?A.orderInfo.delivery_id:"暂无单号"),1)])),_:1})):i("v-if",!0)])),_:1}),o(t,{class:"tk-tag ml-2 font-weight text-xs text-slate-600"},{default:d((()=>[f(n(A.orderInfo&&A.orderInfo.order_status_desc?A.orderInfo.order_status_desc:"暂无状态"),1)])),_:1})])),_:1},512),[[p,A.orderInfo&&A.orderInfo.delivery_arry]])])),_:1}),o(t,{class:"tk-card"},{default:d((()=>[B.value&&B.value.length>0?(r(),u(t,{key:0,class:"p-2"},{default:d((()=>[o(T,{dot:"true",direction:"column"},{default:d((()=>[(r(!0),l(c,null,_(B.value,((e,a)=>(r(),u(F,{key:"index",title:e.desc,desc:e.time},null,8,["title","desc"])))),128))])),_:1})])),_:1})):(r(),u(t,{key:1,class:"text-xs text-slate-400"},{default:d((()=>[f("暂无运单动态")])),_:1}))])),_:1})])),_:1}),o(G,{addon:"tk_jhkd"}),o(K,{ref_key:"payRef",ref:U,onClose:a[2]||(a[2]=e=>q.value=!1)},null,512)],64)}}}),[["__scopeId","data-v-7c26cccc"]]);export{q as default};
