import{d as e,r as t,m as l,l as a,o as s,c as r,w as o,b as d,u as i,_ as p,x as u,y as n,f as x,E as c,F as f,G as _,aN as m,H as g,B as v,aK as b,I as h,a as y,V as k,bp as w,g as j,h as C,i as F,C as S,a4 as O,ab as T,X as V,j as z,s as L,aj as A,a9 as B,ac as I,a6 as E,bY as D,bZ as N,n as P,U as J,b2 as R,bh as U,Y as H,ba as Y,b3 as G,N as K}from"./index-e6ce9fbf.js";import{_ as X}from"./u-swiper.c3f444d2.js";import{_ as Z}from"./u-count-down.3d2f8c99.js";import{_ as q}from"./u-avatar.d1f888c3.js";import{_ as M}from"./u-icon.c5d9cd81.js";import{_ as Q}from"./u--image.2a363e1d.js";import{_ as W}from"./u-parse.eafe216c.js";import{_ as $}from"./u-popup.b16d6e1d.js";import{_ as ee}from"./u-loading-page.76c2d95f.js";import{d as te,e as le,f as ae,h as se}from"./goods.9785a1d4.js";import{b as re,c as oe}from"./coupon.fd366af9.js";import{_ as de}from"./u-number-box.4270f2af.js";import{u as ie}from"./cart.3bd34579.js";import{_ as pe}from"./share-poster.88ccab8c.js";import{_ as ue}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.39fd4711.js";import"./u-text.9aefeac5.js";import"./u-image.c9386d77.js";import"./u-transition.6919b33f.js";import"./u-safe-bottom.1ba5bfba.js";const ne=e({__name:"ns-goods-sku",props:["goodsDetail"],emits:["change"],setup(e,{expose:z,emit:L}){const A=e;let B=t(!1),I=t(null),E=t({skuId:"",name:[]}),D=t(""),N=t(1),P=l((()=>{let e="0.00";return e=Object.keys(G.value).length&&Object.keys(G.value.goods).length&&G.value.goods.is_discount?G.value.sale_price:Object.keys(G.value).length&&Object.keys(G.value.goods).length&&G.value.goods.member_discount&&V()?G.value.member_price:G.value.price,e}));const J=a(),R=l((()=>J.info)),U=ie();U.getList();const H=l((()=>U.cartList)),Y=()=>{B.value=!1},G=l((()=>{let e=JSON.parse(JSON.stringify(A.goodsDetail));return Object.keys(e).length&&(Object.keys(E.value.name).length||(E.value.name=e.sku_spec_format.split(",")),e.goodsSpec.forEach(((e,t)=>{let l=e.spec_values.split(",");e.values=[],l.forEach(((l,a)=>{e.values[a]={},e.values[a].name=l,e.values[a].selected=!1,e.values[a].disabled=!1,E.value.name.forEach(((s,r)=>{r==t&&s==l&&(e.values[a].selected=!0)}))}))})),K(),e.skuList&&Object.keys(e.skuList).length&&e.skuList.forEach(((t,l)=>{t.sku_id==E.value.skuId&&(e.detail=t)}))),e})),K=()=>{A.goodsDetail.skuList.forEach(((e,t)=>{e.sku_spec_format==E.value.name.toString()&&(E.value.skuId=e.sku_id,L("change",e.sku_id))}))},X=()=>{if(!R.value)return v().setLoginBack({url:"/addon/shop/pages/goods/detail",param:{sku_id:G.value.sku_id}}),!1;if("join_cart"==D.value){let e=0,t="";H.value["goods_"+G.value.goods_id]&&H.value["goods_"+G.value.goods_id]["sku_"+G.value.sku_id]&&(e=b(H.value["goods_"+G.value.goods_id]["sku_"+G.value.sku_id].num),t=b(H.value["goods_"+G.value.goods_id]["sku_"+G.value.sku_id].id)),e+=N.value,U.increase({id:t||"",goods_id:G.value.goods_id,sku_id:G.value.sku_id,stock:G.value.stock,sale_price:G.value.sale_price,num:e},0,(()=>{h({title:"加入购物车成功",icon:"none"})}))}else if("buy_now"==D.value){var e={sku_id:G.value.sku_id,num:N.value};uni.setStorage({key:"orderCreateData",data:{sku_data:[e]},success:()=>{y({url:"/addon/shop/pages/order/payment"})}})}Y()};return z({open:(e="",t="")=>{D.value=e,B.value=!0,I.value=t}}),(e,t)=>{const l=j(C("u-icon"),M),a=j(C("u--image"),Q),v=F,b=S,h=j(C("u-number-box"),de),y=O,V=T,z=j(C("u-popup"),$);return s(),r(v,{onTouchmove:t[3]||(t[3]=p((()=>{}),["prevent","stop"]))},{default:o((()=>[d(z,{class:"popup-type",show:i(B),onClose:Y,mode:"bottom",zIndex:"500"},{default:o((()=>[i(G).detail?(s(),r(v,{key:0,class:"p-[32rpx] relative",onTouchmove:t[2]||(t[2]=p((()=>{}),["prevent","stop"]))},{default:o((()=>[d(v,{class:"flex mb-[58rpx]"},{default:o((()=>[d(v,{class:"rounded-[8rpx] overflow-hidden"},{default:o((()=>[d(a,{width:"180rpx",height:"180rpx",src:i(k)(i(G).detail.sku_image),onClick:t[0]||(t[0]=e=>(e=>{if(""===e)return!1;var t=[];t.push(k(e)),w({indicator:"number",loop:!0,urls:t})})(i(G).detail.sku_image)),model:"aspectFill"},{error:o((()=>[d(l,{name:"photo",color:"#999",size:"50"})])),_:1},8,["src"])])),_:1}),d(v,{class:"flex flex-1 flex-col ml-[20rpx] py-[10rpx]"},{default:o((()=>[d(v,{class:"w-[100%]"},{default:o((()=>[d(v,{class:"text-[var(--price-text-color)] flex items-baseline"},{default:o((()=>[d(b,{class:"text-[28rpx] font-bold price-font"},{default:o((()=>[u("￥")])),_:1}),d(b,{class:"text-[48rpx] price-font"},{default:o((()=>[u(n(parseFloat(i(P)).toFixed(2).split(".")[0]),1)])),_:1}),d(b,{class:"text-[32rpx] mr-[6rpx] price-font"},{default:o((()=>[u("."+n(parseFloat(i(P)).toFixed(2).split(".")[1]),1)])),_:1})])),_:1}),d(v,{class:"text-[24rpx] leading-[32rpx] text-[#303133] mt-[12rpx]"},{default:o((()=>[u("库存"+n(i(G).detail.stock)+n(i(G).goods.unit),1)])),_:1})])),_:1}),i(G).goodsSpec&&i(G).goodsSpec.length?(s(),r(v,{key:0,class:"w-[100%] mt-auto",style:{"max-height":"calc(204rpx - 98rpx)",overflow:"hidden","box-sizing":"border-box"}},{default:o((()=>[d(b,{class:"text-[24rpx] leading-[30rpx] text-[#666] flex items-center h-[60rpx] mt-[10rpx]"},{default:o((()=>[u("已选规格："+n(i(G).detail.sku_spec_format),1)])),_:1})])),_:1})):x("v-if",!0),x(' \t\t\t\t\t\t<view v-if="goodsDetail.goodsSpec && goodsDetail.goodsSpec.length">\r\n\t\t\t\t\t\t\t<text>已选规格：{{goodsDetail.detail.sku_spec_format}}</text>\r\n\t\t\t\t\t\t</view> ')])),_:1})])),_:1}),d(y,{class:"h-[500rpx] mb-[30rpx]","scroll-y":"true"},{default:o((()=>[(s(!0),c(_,null,f(i(G).goodsSpec,((e,t)=>(s(),r(v,{class:g({"mt-[36rpx]":0!=t}),key:t},{default:o((()=>[d(v,{class:"text-[26rpx] leading-[36rpx] mb-[24rpx]"},{default:o((()=>[u(n(e.spec_name),1)])),_:2},1024),d(v,{class:"flex flex-wrap"},{default:o((()=>[(s(!0),c(_,null,f(e.values,((e,l)=>(s(),r(v,{class:g(["box-border bg-[#f2f2f2] text-[24rpx] px-[44rpx] text-center h-[56rpx] leading-[56rpx] mr-[20rpx] mb-[20rpx] border-1 border-solid rounded-[50rpx] border-[#f2f2f2]",{"!border-[var(--primary-color)] text-[var(--primary-color)] !bg-[var(--primary-color-light)]":e.selected}]),key:l,onClick:l=>((e,t)=>{E.value.name[t]=e.name,N.value=1,K()})(e,t)},{default:o((()=>[u(n(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:2},1024)])),_:2},1032,["class"])))),128)),d(v,{class:"flex justify-between items-center mt-[30rpx]"},{default:o((()=>[d(v,{class:"text-[26rpx]"},{default:o((()=>[u("购买数量")])),_:1}),d(h,{min:1,max:i(G).stock,integer:"",step:1,"input-width":"98rpx",modelValue:i(N),"onUpdate:modelValue":t[1]||(t[1]=e=>m(N)?N.value=e:N=e),"input-height":"54rpx"},{minus:o((()=>[d(b,{class:g(["text-[44rpx] nc-iconfont nc-icon-jianV6xx",{"!text-[#c8c9cc]":1===i(N)}])},null,8,["class"])])),input:o((()=>[d(b,{class:"number-input text-[#303133] text-center bg-[#f2f2f2] w-[82rpx] fext-[23rpx] mx-[16rpx]"},{default:o((()=>[u(n(i(N)),1)])),_:1})])),plus:o((()=>[d(b,{class:g(["text-[44rpx] nc-iconfont nc-icon-jiahaoV6xx",{"!text-[#c8c9cc]":i(N)===i(G).stock}])},null,8,["class"])])),_:1},8,["max","modelValue"])])),_:1})])),_:1}),i(G).detail.stock>0?(s(),r(V,{key:0,class:"!h-[72rpx] leading-[72rpx] text-[26rpx] rounded-[50rpx]",type:"primary",onClick:X},{default:o((()=>[u("确定")])),_:1})):(s(),r(V,{key:1,class:"!h-[72rpx] leading-[72rpx] text-[26rpx] text-[#fff] bg-[#ccc] rounded-[50rpx]"},{default:o((()=>[u("已售罄")])),_:1}))])),_:1})):x("v-if",!0)])),_:1},8,["show"])])),_:1})}}}),xe=ue(e({__name:"detail",setup(e){const{setShare:b}=J(),de=a(),ue=l((()=>de.info)),xe=ie();l((()=>xe.totalNum));let ce=t(null),fe=t({}),_e=t(!1),me=t(!1),ge=t(!1),ve=t(!1),be=t(!1),he=t(0);z((e=>{te({goods_id:e.goods_id||"",sku_id:e.sku_id||""}).then((e=>{if(!e.data.goods||"[]"===JSON.stringify(e.data))return h({title:"找不到该商品",icon:"none"}),setTimeout((()=>{y({url:"/addon/shop/pages/index",mode:"reLaunch"})}),600),!1;fe.value=e.data,Ce.value=fe.value.goods.is_collect,fe.value.delivery_type_list=fe.value.goods.delivery_type_list?Object.values(fe.value.goods.delivery_type_list).map((e=>e.name)):[],fe.value.goods.goods_image=fe.value.goods.goods_image_thumb_big,fe.value.goods.goods_image.forEach(((e,t)=>{fe.value.goods.goods_image[t]=k(e)})),fe.value.goods.attr_format=fe.value.goods&&fe.value.goods.attr_format?JSON.parse(fe.value.goods.attr_format):[];let t={title:fe.value.goods.goods_name,desc:fe.value.goods.sub_title,url:fe.value.goods.goods_cover_thumb_mid};if(L({title:fe.value.goods.goods_name}),b({wechat:{...t},weapp:{...t}}),Object.keys(fe.value.goods).length&&fe.value.goods.is_discount&&Object.keys(fe.value.discount_info).length){let e=(new Date).getTime();he.value=1e3*fe.value.discount_info.active.end_time-e.toFixed(0)}Oe(),Ve(),Ge(),A((()=>{setTimeout((()=>{const e=R().in(De);e.select(".swiper-box").boundingClientRect((e=>{Ne=e?e.height:0})).exec(),e.select(".detail-head").boundingClientRect((e=>{e&&(Pe=e.height?e.height:0)})).exec()}),400)}))}))})),B((()=>{uni.removeStorageSync("distributionType"),xe.getList()}));const ye=e=>{fe.value.skuList.forEach(((t,l)=>{t.sku_id==e&&Object.assign(fe.value,t)}))},ke=l((()=>{let e=!1;return fe.value.skuList.forEach(((t,l)=>{t.sku_spec_format&&(e=!0)})),!(!e&&fe.value.stock<=0)&&(!e&&fe.value.stock,!0)})),we=l((()=>{let e=!1;return(fe.value.service&&fe.value.service.length||fe.value.goodsSpec&&fe.value.goodsSpec.length||"real"==fe.value.goods.goods_type&&fe.value.delivery_type_list&&fe.value.delivery_type_list.length||Se.value.length)&&(e=!0),e})),je=e=>{ce.value.open(e)};let Ce=t(0);const Fe=()=>{if(!ue.value)return v().setLoginBack({url:"/addon/shop/pages/goods/detail",param:{sku_id:fe.value.sku_id}}),!1;(Ce.value?ae(fe.value.goods_id):se(fe.value.goods_id)).then((e=>{Ce.value=!Ce.value,Ce.value?h({title:"收藏成功",icon:"none"}):h({title:"取消收藏",icon:"none"})}))};let Se=t([]);const Oe=()=>{re({category_id:fe.value.goods.goods_category||"",goods_id:fe.value.goods_id||""}).then((e=>{Se.value=e.data.data.map((e=>(-1!=e.sum_count&&e.receive_count===e.sum_count&&(e.btnType="collected"),ue.value&&e.is_receive&&e.limit_count===e.member_receive_count?e.btnType="using":e.btnType="collecting",e)))}))},Te=t({count:0}),Ve=()=>{le(fe.value.goods_id).then((e=>{Te.value=e.data}))},ze=(e,t)=>{if(Array.isArray(e)){if(!e.length)return!1;w({indicator:"number",current:t,loop:!0,urls:l=e})}else{if(""===e)return!1;var l;(l=[]).push(k(e)),w({indicator:"number",loop:!0,urls:l})}},Le=t(0),Ae=()=>{ve.value=!0};let Be=I().platform;const Ie=l((()=>{let e="";return e+="height: 100rpx;",e+="padding-right: 30rpx;",e+="padding-left: 30rpx;",e+="font-size: 32rpx;","ios"===Be?e+="font-weight: 500;":"android"===Be&&(e+="font-size: 36rpx;"),e})),Ee=l((()=>{let e="";return e+="font-size: 26px;","font-size: 26px;"})),De=G();let Ne=0,Pe=0,Je=t(!1);E((e=>{if(0==Ne||0==Pe)return;let t=Ne-Pe-20;Je.value=!1,e.scrollTop>=t&&(Je.value=!0)}));const Re=e=>{"number"==typeof e&&ze(fe.value.goods.goods_image,e)};let Ue=t(null),He=t(""),Ye={};const Ge=()=>{He.value="?sku_id="+fe.value.sku_id,ue.value&&ue.value.member_id&&(He.value+="&mid="+ue.value.member_id)},Ke=()=>{Ye.sku_id=fe.value.sku_id,ue.value&&ue.value.member_id&&(Ye.member_id=ue.value.member_id),Ue.value.openShare()};let Xe=t(""),Ze=l((()=>{let e="0.00";return Object.keys(fe.value).length&&Object.keys(fe.value.goods).length&&fe.value.goods.is_discount?(e=fe.value.sale_price?fe.value.sale_price:fe.value.price,Xe.value="discount_price"):Object.keys(fe.value).length&&Object.keys(fe.value.goods).length&&fe.value.goods.member_discount&&V()?(e=fe.value.member_price?fe.value.member_price:fe.value.price,Xe.value="member_price"):(e=fe.value.price,Xe.value=""),e}));return D((()=>{N()})),(e,t)=>{const l=S,a=F,b=j(C("u-swiper"),X),h=K,w=j(C("up-count-down"),Z),V=j(C("u-avatar"),q),z=j(C("u-icon"),M),L=j(C("u--image"),Q),A=j(C("u-parse"),W),B=T,I=O,E=j(C("u-popup"),$),D=j(C("u-loading-page"),ee);return s(),r(a,{style:P(e.themeColor())},{default:o((()=>[Object.keys(i(fe)).length?(s(),r(a,{key:0,class:"bg-[#f7f7f7] min-h-[100vh] relative"},{default:o((()=>[x(" 自定义头部 "),d(a,{class:g(["flex items-center fixed left-0 right-0 z-10 bg-transparent detail-head",{"!bg-[#fff]":i(Je)}]),style:P(i(Ie))},{default:o((()=>[d(l,{class:"nc-iconfont nc-icon-zuoV6xx",style:P(i(Ee)),onClick:t[0]||(t[0]=e=>{U().length>1?H({delta:1}):Y({url:"/addon/shop/pages/index"})})},null,8,["style"]),d(a,{class:g(["ml-auto !pt-[12rpx] !pb-[8rpx] p-[10rpx] bg-[rgba(255,255,255,.4)] rounded-full border-[2rpx] border-solid border-transparent box-border nc-iconfont nc-icon-fenxiangV6xx font-bold text-[#303133] text-[36rpx]",{"border-[#d8d8d8]":i(Je)}]),onClick:Ke},null,8,["class"])])),_:1},8,["class","style"]),d(a,{class:"swiper-box"},{default:o((()=>[d(b,{list:i(fe).goods.goods_image,indicator:!0,indicatorStyle:{bottom:"50rpx"},autoplay:!0,height:"100vw",onClick:Re},null,8,["list"])])),_:1}),"discount_price"==i(Xe)?(s(),r(a,{key:0,class:"-mt-[26rpx] relative flex items-center justify-between !bg-cover box-border pb-[26rpx] h-[136rpx] px-[30rpx]",style:P({background:"url("+i(k)("addon/shop/detail/discount_price_bg.png")+") no-repeat"})},{default:o((()=>[d(a,{class:"flex text-[#fff]"},{default:o((()=>[d(l,{class:"text-[26rpx] mt-[18rpx] mr-[8rpx]"},{default:o((()=>[u("折扣价")])),_:1}),d(a,{class:"flex"},{default:o((()=>[d(l,{class:"text-[26rpx] mt-[18rpx] font-medium price-font"},{default:o((()=>[u("￥")])),_:1}),d(l,{class:"text-[50rpx] price-font"},{default:o((()=>[u(n(parseFloat(i(Ze)).toFixed(2).split(".")[0]),1)])),_:1}),d(l,{class:"text-[50rpx] price-font"},{default:o((()=>[u("."+n(parseFloat(i(Ze)).toFixed(2).split(".")[1]),1)])),_:1}),i(fe).market_price&&parseFloat(i(fe).market_price)?(s(),r(l,{key:0,class:"text-[26rpx] mt-[18rpx] ml-[10rpx] line-through price-font"},{default:o((()=>[u(" ￥"+n(i(fe).market_price),1)])),_:1})):x("v-if",!0)])),_:1})])),_:1}),d(a,{class:"flex flex-col text-[#fff] items-end"},{default:o((()=>[d(h,{class:"h-[28rpx] mr-[2rpx]",src:i(k)("addon/shop/detail/discount_price.png"),mode:"heightFix"},null,8,["src"]),d(a,{class:"flex items-center text-[24rpx] -mb-[10rpx]"},{default:o((()=>[d(l,{class:"mr-[4rpx]"},{default:o((()=>[u("距结束")])),_:1}),d(w,{class:"text-[#fff] text-[28rpx]",time:i(he),format:"HH:mm:ss"},null,8,["time"])])),_:1})])),_:1})])),_:1},8,["style"])):x("v-if",!0),d(a,{class:"bg-[#f6f6f6] rounded-[16rpx] -mt-[26rpx] relative"},{default:o((()=>[d(a,{class:g(["relative mx-[30rpx] rounded-[16rpx]",{"pt-[30rpx]":"discount_price"==i(Xe),"pt-[20rpx]":"discount_price"!=i(Xe)}])},{default:o((()=>["discount_price"!=i(Xe)?(s(),r(a,{key:0,class:"text-[var(--price-text-color)] flex items-baseline mb-[16rpx]"},{default:o((()=>[d(l,{class:"text-[32rpx] font-medium price-font"},{default:o((()=>[u("￥")])),_:1}),d(l,{class:"text-[48rpx] price-font"},{default:o((()=>[u(n(parseFloat(i(Ze)).toFixed(2).split(".")[0]),1)])),_:1}),d(l,{class:"text-[32rpx] mr-[10rpx] price-font"},{default:o((()=>[u("."+n(parseFloat(i(Ze)).toFixed(2).split(".")[1]),1)])),_:1}),"member_price"==i(Xe)?(s(),r(h,{key:0,class:"h-[34rpx] mr-[12rpx] w-[80rpx]",src:i(k)("addon/shop/VIP.png"),mode:"heightFix"},null,8,["src"])):x("v-if",!0),i(fe).market_price&&parseFloat(i(fe).market_price)?(s(),r(l,{key:1,class:"text-[26rpx] text-[#999] line-through price-font"},{default:o((()=>[u(" ￥"+n(i(fe).market_price),1)])),_:1})):x("v-if",!0)])),_:1})):x("v-if",!0),d(a,{class:"font-medium text-[32rpx] multi-hidden leading-[40rpx]"},{default:o((()=>[u(n(i(fe).goods.goods_name),1)])),_:1}),d(a,{class:"flex items-start mt-[12rpx] pb-[10rpx]"},{default:o((()=>[i(fe).label_info&&i(fe).label_info.length?(s(),r(a,{key:0,class:"flex flex-wrap"},{default:o((()=>[(s(!0),c(_,null,f(i(fe).label_info,(e=>(s(),r(a,{key:e.label_id,class:"text-[#FA6400] mb-[10rpx] leading-[36rpx] text-[22rpx] h-[40rpx] px-[10rpx] border-[2rpx] border-solid border-[#FA6400] rounded-[4rpx] mr-[15rpx] box-border truncate"},{default:o((()=>[u(n(e.label_name),1)])),_:2},1024)))),128))])),_:1})):x("v-if",!0),d(a,{class:"text-[26rpx] mt-[6rpx] text-[#666] flex items-baseline ml-auto"},{default:o((()=>[d(l,{class:"whitespace-nowrap"},{default:o((()=>[u("销量")])),_:1}),d(l,{class:"mx-[2rpx]"},{default:o((()=>[u(n(i(fe).goods.sale_num),1)])),_:1}),d(l,null,{default:o((()=>[u(n(i(fe).goods.unit),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["class"]),i(we)?(s(),r(a,{key:0,class:"mt-[20rpx] bg-white mx-[20rpx] rounded-[16rpx] px-[20rpx] py-[16rpx]"},{default:o((()=>[i(fe).service&&i(fe).service.length?(s(),r(a,{key:0,onClick:t[1]||(t[1]=e=>m(ge)?ge.value=!i(ge):ge=!i(ge)),class:"flex items-center h-[64rpx]"},{default:o((()=>[d(l,{class:"text-[#666] text-[26rpx] leading-[30rpx] font-400 shrink-0"},{default:o((()=>[u("服务")])),_:1}),d(a,{class:"text-[#343434] text-[26rpx] leading-[30rpx] font-400 truncate ml-auto"},{default:o((()=>[u(n(i(fe).service[0].service_name),1)])),_:1}),d(l,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[#666]"})])),_:1})):x("v-if",!0),i(fe).goodsSpec&&i(fe).goodsSpec.length?(s(),r(a,{key:1,onClick:je,class:"flex items-center h-[64rpx]"},{default:o((()=>[d(l,{class:"text-[#666] text-[26rpx] leading-[30rpx] font-400 shrink-0 mr-[20rpx]"},{default:o((()=>[u("已选")])),_:1}),d(a,{class:"ml-auto text-right truncate flex-1 text-[#343434] text-[26rpx] leading-[30rpx] font-400"},{default:o((()=>[u(n(i(fe).sku_spec_format),1)])),_:1}),d(l,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[#666]"})])),_:1})):x("v-if",!0),"real"==i(fe).goods.goods_type&&i(fe).delivery_type_list&&i(fe).delivery_type_list.length?(s(),r(a,{key:2,class:"flex items-center h-[64rpx]",onClick:Ae},{default:o((()=>[d(l,{class:"text-[#666] text-[26rpx] leading-[30rpx] font-400 shrink-0"},{default:o((()=>[u("配送")])),_:1}),d(a,{class:"ml-auto flex items-center text-[#343434] text-[26rpx] leading-[30rpx] font-400"},{default:o((()=>[u(n(i(fe).delivery_type_list[Le.value]),1)])),_:1}),d(l,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[#666]"})])),_:1})):x("v-if",!0),i(Se).length?(s(),r(a,{key:3,onClick:t[2]||(t[2]=e=>m(be)?be.value=!0:be=!0),class:"flex items-center h-[64rpx]"},{default:o((()=>[d(l,{class:"text-[#666] text-[26rpx] leading-[30rpx] font-400 shrink-0 mr-[20rpx]"},{default:o((()=>[u("领券")])),_:1}),d(a,{class:"ml-auto flex-1 flex-nowrap flex items-center overflow-hidden h-[44rpx] content-between"},{default:o((()=>[(s(!0),c(_,null,f(i(Se),((e,t)=>(s(),c(_,{key:t},[t<3?(s(),r(l,{key:0,class:g(["text-xs whitespace-nowrap rounded-sm border-[2rpx] px-[6rpx] py-[2rpx] border-solid border-[var(--primary-color)] text-[var(--primary-color)] mt-[4rpx]",{"mr-[8rpx]":i(Se).length!=t+1&&t<2,"ml-auto":0==t}])},{default:o((()=>[u(n(e.title),1)])),_:2},1032,["class"])):x("v-if",!0)],64)))),128))])),_:1}),d(l,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[#666]"})])),_:1})):x("v-if",!0)])),_:1})):x("v-if",!0),d(a,{class:"mt-[20rpx] bg-white mx-[20rpx] rounded-[16rpx] px-[20rpx]"},{default:o((()=>[d(a,{class:"flex items-center justify-between h-[80rpx]"},{default:o((()=>[d(l,{class:"text-[28rpx] text-[#303133] font-bold"},{default:o((()=>[u("宝贝评价("+n(Te.value.count)+")",1)])),_:1}),Te.value.count?(s(),r(a,{key:0,class:"h-[80rpx] flex items-center",onClick:t[3]||(t[3]=e=>(i(fe).goods_id,void y({url:"/addon/shop/pages/evaluate/list",param:{goods_id:fe.value.goods_id}})))},{default:o((()=>[d(l,{class:"text-[24rpx] text-[#666]"},{default:o((()=>[u("查看全部")])),_:1}),d(l,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[#666]"})])),_:1})):x("v-if",!0),Te.value.count?x("v-if",!0):(s(),r(l,{key:1,class:"text-[24rpx] text-[#666]"},{default:o((()=>[u("暂无评价")])),_:1}))])),_:1}),d(a,null,{default:o((()=>[(s(!0),c(_,null,f(Te.value.list,((e,t)=>(s(),r(a,{class:"pb-[20rpx] flex justify-between",key:t},{default:o((()=>[d(a,{class:"flex flex-col"},{default:o((()=>[d(a,{class:"flex items-center"},{default:o((()=>[d(V,{src:i(k)(e.member_head),size:"30rpx",leftIcon:"none"},null,8,["src"]),d(l,{class:"ml-[10rpx] text-[22rpx] text-[#999]"},{default:o((()=>[u(n(e.member_name),1)])),_:2},1024)])),_:2},1024),d(a,{class:"text-[26rpx] text-[#303133] leading-[36rpx] mt-[10rpx] multi-hidden"},{default:o((()=>[u(n(e.content),1)])),_:2},1024)])),_:2},1024),e.image_mid&&e.image_mid.length?(s(),r(L,{key:0,class:"rounded-[8rpx] ml-[50rpx] overflow-hidden",width:"80rpx",height:"80rpx",src:i(k)(e.image_mid[0]),model:"aspectFill",onClick:t=>ze(e.images[0])},{error:o((()=>[d(z,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src","onClick"])):x("v-if",!0)])),_:2},1024)))),128))])),_:1})])),_:1}),i(fe).goods&&i(fe).goods.attr_format&&Object.keys(i(fe).goods.attr_format).length?(s(),r(a,{key:1,class:"my-[20rpx] bg-white mx-[20rpx] rounded-[16rpx] px-[20rpx] pb-[20rpx]"},{default:o((()=>[d(a,{class:"text-[28rpx] h-[80rpx] leading-[80rpx] font-bold"},{default:o((()=>[u("商品属性")])),_:1}),d(a,{class:"border-[2rpx] border-solid border-[#f1f1f1] border-b-0"},{default:o((()=>[(s(!0),c(_,null,f(i(fe).goods.attr_format,((e,t)=>(s(),c(_,{key:t},[t<4||i(_e)?(s(),r(a,{key:0,class:"flex border-0 border-solid border-[#f1f1f1] border-b-[2rpx]"},{default:o((()=>[d(a,{class:"w-[30%] px-[18rpx] py-[8rpx] text-[24rpx] min-h-[70rpx] break-all box-border flex items-center border-0 border-solid border-[#f1f1f1] border-r-[2rpx] bg-[#fbfafa]"},{default:o((()=>[u(n(e.attr_value_name),1)])),_:2},1024),d(a,{class:"w-[70%] px-[18rpx] py-[8rpx] text-[24rpx] min-h-[70rpx] break-all flex items-center box-border"},{default:o((()=>[u(n(Array.isArray(e.attr_child_value_name)?e.attr_child_value_name.join(","):e.attr_child_value_name),1)])),_:2},1024)])),_:2},1024)):x("v-if",!0)],64)))),128)),i(fe).goods.attr_format.length>4?(s(),r(a,{key:0,class:"flex items-center justify-center h-[70rpx] border-0 border-solid border-[#f1f1f1] border-b-[2rpx]",onClick:t[4]||(t[4]=e=>m(_e)?_e.value=!i(_e):_e=!i(_e))},{default:o((()=>[d(l,{class:"text-[24rpx] mr-[10rpx]"},{default:o((()=>[u(n(i(_e)?"收起":"展开"),1)])),_:1}),d(l,{class:g(["nc-iconfont !text-[22rpx]",{"nc-icon-xiaV6xx":!i(_e),"nc-icon-shangV6xx-1":i(_e)}])},null,8,["class"])])),_:1})):x("v-if",!0)])),_:1})])),_:1})):x("v-if",!0),d(a,{class:"my-[20rpx] bg-white mx-[20rpx] rounded-[16rpx] px-[20rpx] pd-[10px]"},{default:o((()=>[d(a,{class:"text-[28rpx] h-[80rpx] leading-[80rpx] font-bold"},{default:o((()=>[u("商品详情")])),_:1}),d(a,{class:"u-content"},{default:o((()=>[d(A,{content:i(fe).goods.goods_desc,tagStyle:{img:"vertical-align: top;",p:"overflow: hidden;word-break:break-word;"}},null,8,["content"])])),_:1})])),_:1}),d(a,{class:"tab-bar-placeholder"}),d(a,{class:"w-[100%] flex justify-between px-[27rpx] bg-[#fff] box-border fixed left-0 bottom-0 tab-bar z-1 items-center"},{default:o((()=>[d(a,{class:"flex items-center ml-[10rpx]"},{default:o((()=>[d(a,{class:"flex flex-col justify-center items-center mr-[39rpx]",onClick:t[5]||(t[5]=e=>i(y)({url:"/addon/shop/pages/index",mode:"reLaunch"}))},{default:o((()=>[d(a,{class:"nc-iconfont nc-icon-shouyeV6xx text-[36rpx]"}),d(l,{class:"text-[20rpx] mt-[10rpx]"},{default:o((()=>[u("首页")])),_:1})])),_:1}),d(a,{class:"flex flex-col justify-center items-center mr-[39rpx]",onClick:Ke},{default:o((()=>[d(a,{class:"nc-iconfont nc-icon-fenxiangV6xx text-[36rpx]"}),d(l,{class:"text-[20rpx] mt-[10rpx]"},{default:o((()=>[u("分享")])),_:1})])),_:1}),d(a,{class:"flex flex-col justify-center items-center",onClick:Fe},{default:o((()=>[d(l,{class:g(["nc-iconfont text-[36rpx]",{"text-[#ff0000] nc-icon-xihuanV6mm":i(Ce),"text-[#303133] nc-icon-guanzhuV6xx":!i(Ce)}])},null,8,["class"]),d(l,{class:"text-[20rpx] mt-[10rpx]"},{default:o((()=>[u("收藏")])),_:1})])),_:1})])),_:1}),1==i(fe).goods.status?(s(),r(a,{key:0,class:"flex"},{default:o((()=>["real"==i(fe).goods.goods_type||"virtual"==i(fe).goods.goods_type&&"verify"!=i(fe).goods.virtual_receive_type?(s(),r(B,{key:0,class:"!w-[200rpx] !h-[72rpx] text-[26rpx] !text-[#fff] !m-0 !mr-[20rpx] leading-[72rpx] rounded-full remove-border",style:{background:"linear-gradient(127deg, #FFB000 0%, #FFA029 100%)"},onClick:t[6]||(t[6]=e=>je("join_cart"))},{default:o((()=>[u(" 加入购物车")])),_:1})):x("v-if",!0),i(ke)?(s(),r(B,{key:1,style:P({width:"real"==i(fe).goods.goods_type||"virtual"==i(fe).goods.goods_type&&"verify"!=i(fe).goods.virtual_receive_type?"200rpx":"420rpx!important"}),class:"!h-[72rpx] text-[26rpx] !text-[#fff] !bg-[#FF4646] !m-0 leading-[72rpx] rounded-full remove-border",onClick:t[7]||(t[7]=e=>je("buy_now"))},{default:o((()=>[u("立即购买")])),_:1},8,["style"])):(s(),r(B,{key:2,style:P({width:"real"==i(fe).goods.goods_type||"virtual"==i(fe).goods.goods_type&&"verify"!=i(fe).goods.virtual_receive_type?"200rpx":"420rpx!important"}),class:"!h-[72rpx] text-[26rpx] !text-[#fff] !bg-[#ccc] !m-0 leading-[72rpx] rounded-full remove-border"},{default:o((()=>[u("已售罄")])),_:1},8,["style"]))])),_:1})):(s(),r(a,{key:1,class:"flex flex-1 ml-[40rpx]"},{default:o((()=>[d(B,{class:"w-[100%] !h-[72rpx] text-[26rpx] !text-[#fff] !bg-[#ccc] !m-0 leading-[72rpx] rounded-full remove-border"},{default:o((()=>[u("该商品已下架")])),_:1})])),_:1}))])),_:1})])),_:1}),x(" 服务 "),d(a,{onTouchmove:t[10]||(t[10]=p((()=>{}),["prevent","stop"]))},{default:o((()=>[d(E,{class:"popup-type",show:i(ge),onClose:t[9]||(t[9]=e=>m(ge)?ge.value=!1:ge=!1)},{default:o((()=>[d(a,{class:"min-h-[480rpx]",onTouchmove:t[8]||(t[8]=p((()=>{}),["prevent","stop"]))},{default:o((()=>[d(a,{class:"flex items-center justify-center py-[34rpx] relative"},{default:o((()=>[d(l,{class:"text-[32rpx] leading-[36rpx] font-500"},{default:o((()=>[u("商品服务")])),_:1})])),_:1}),d(I,{class:"h-[520rpx]","scroll-y":"true"},{default:o((()=>[d(a,{class:"pl-[22rpx] py-[28rpx] pr-[37rpx]"},{default:o((()=>[(s(!0),c(_,null,f(i(fe).service,((e,t)=>(s(),r(a,{class:"flex mb-[28rpx]"},{default:o((()=>[d(h,{class:"max-w-[34rpx] max-h-[34rpx] mr-[14rpx]",src:i(k)(e.image||"addon/shop/icon_service.png"),mode:"aspectFit"},null,8,["src"]),d(a,{class:"flex-1"},{default:o((()=>[d(a,{class:"text-[26rpx] leading-[36rpx] text-[#222] mb-[4rpx] w-[643rpx]"},{default:o((()=>[u(n(e.service_name),1)])),_:2},1024),d(a,{class:"text-[22rpx] leading-[36rpx] text-[#888] w-[643rpx]"},{default:o((()=>[u(n(e.desc),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256))])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1}),x(" 配送 "),d(a,{onTouchmove:t[13]||(t[13]=p((()=>{}),["prevent","stop"]))},{default:o((()=>[d(E,{class:"popup-type",show:i(ve),onClose:t[12]||(t[12]=e=>m(ve)?ve.value=!1:ve=!1)},{default:o((()=>[d(a,{class:"min-h-[360rpx]",onTouchmove:t[11]||(t[11]=p((()=>{}),["prevent","stop"]))},{default:o((()=>[d(a,{class:"flex items-center justify-center py-[34rpx] relative"},{default:o((()=>[d(l,{class:"text-[32rpx] leading-[36rpx] font-500"},{default:o((()=>[u("配送方式")])),_:1})])),_:1}),d(I,{class:"h-[520rpx]","scroll-y":"true"},{default:o((()=>[d(a,{class:"pl-[22rpx] pt-[28rpx] pr-[37rpx]"},{default:o((()=>[(s(!0),c(_,null,f(i(fe).delivery_type_list,((e,t)=>(s(),r(a,{class:"flex mb-[28rpx]",onClick:l=>((e,t)=>{Le.value=t,ve.value=!1,uni.setStorageSync("distributionType",e)})(e,t)},{default:o((()=>[d(h,{class:"w-[34rpx] h-[34rpx] mr-[14rpx]",src:i(k)("addon/shop/icon_service.png"),mode:"aspectFit"},null,8,["src"]),d(a,{class:"flex-1"},{default:o((()=>[d(a,{class:"text-[26rpx] leading-[36rpx] text-[#222] mb-[4rpx]"},{default:o((()=>[u(n(e),1)])),_:2},1024),d(a,{class:"text-[22rpx] leading-[36rpx] text-[#888]"},{default:o((()=>[u(n(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1}),x(" 优惠券 "),d(a,{onTouchmove:t[17]||(t[17]=p((()=>{}),["prevent","stop"]))},{default:o((()=>[d(E,{class:"popup-type",show:i(be),onClose:t[16]||(t[16]=e=>m(be)?be.value=!1:be=!1)},{default:o((()=>[d(a,{class:"min-h-[480rpx]",onTouchmove:t[15]||(t[15]=p((()=>{}),["prevent","stop"]))},{default:o((()=>[d(a,{class:"flex items-center justify-center py-[34rpx] relative"},{default:o((()=>[d(l,{class:"text-[32rpx] leading-[36rpx] font-500"},{default:o((()=>[u("优惠券")])),_:1})])),_:1}),d(I,{class:"h-[520rpx]","scroll-y":"true"},{default:o((()=>[d(a,{class:"px-[20rpx]"},{default:o((()=>[(s(!0),c(_,null,f(i(Se),((e,t)=>(s(),r(a,{class:"mb-[30rpx] flex items-center border-[2rpx] border-solid border-[rgba(0,0,0,.1)] rounded",key:t},{default:o((()=>[d(a,{class:"flex flex-col items-center py-[20rpx] w-[240rpx] border-0 border-r-[2rpx] border-dashed border-[rgba(0,0,0,.1)]"},{default:o((()=>[d(a,{class:"text-xs price-font"},{default:o((()=>[d(l,{class:"text-[28rpx]"},{default:o((()=>[u("￥")])),_:1}),d(l,{class:"text-[48rpx]"},{default:o((()=>[u(n(e.price),1)])),_:2},1024)])),_:2},1024),d(l,{class:"text-xs mt-[12rpx]"},{default:o((()=>[u(n(Number(e.min_condition_money)?"满"+e.min_condition_money+"元可以使用":"无门槛优惠券"),1)])),_:2},1024)])),_:2},1024),d(a,{class:"ml-[20rpx] flex-1 flex flex-col py-[20rpx]"},{default:o((()=>[d(l,{class:"text-xs"},{default:o((()=>[u(n(e.title),1)])),_:2},1024),d(l,{class:"text-xs text-[#ABABAB] mt-[12rpx]"},{default:o((()=>[u(n(1==e.valid_type&&"领取之日起"+e.length+"天内有效"||2==e.valid_type&&"领取之日起至"+e.valid_end_time),1)])),_:2},1024)])),_:2},1024),"collecting"===e.btnType?(s(),r(l,{key:0,class:"bg-[var(--primary-color)] rounded-2xl text-[#fff] text-xs mr-[20rpx] py-[8rpx] px-[16rpx]",onClick:t=>((e,t)=>{if(!ue.value)return v().setLoginBack({url:"/addon/shop/pages/goods/detail",param:{sku_id:fe.value.sku_id}}),!1;oe({coupon_id:e.id||"",number:1}).then((e=>{Oe()}))})(e)},{default:o((()=>[u("领取")])),_:2},1032,["onClick"])):(s(),r(l,{key:1,class:"!bg-[#fff] rounded-2xl text-[#ABABAB] text-xs mr-[20rpx] py-[8rpx] px-[16rpx]"},{default:o((()=>[u(n("collected"===e.btnType?"已领完":"已领取"),1)])),_:2},1024))])),_:2},1024)))),128))])),_:1})])),_:1}),d(a,{class:"px-[32rpx] pb-[67rpx] pt-[42rpx]"},{default:o((()=>[d(B,{class:"!w-[100%] !h-[72rpx] text-[26rpx] !bg-[var(--primary-color)] !text-[#fff] !m-0 rounded-full leading-[72rpx]",onClick:t[14]||(t[14]=e=>m(be)?be.value=!1:be=!1)},{default:o((()=>[u("确定")])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1}),d(ne,{ref_key:"goodsSkuRef",ref:ce,"goods-detail":i(fe),onChange:ye},null,8,["goods-detail"]),d(pe,{ref_key:"sharePosterRef",ref:Ue,posterType:"shop_goods",posterId:i(fe).goods.poster_id,posterParam:i(Ye),copyUrlParam:i(He)},null,8,["posterId","posterParam","copyUrlParam"])])),_:1})):x("v-if",!0),d(D,{"bg-color":"rgb(248,248,248)",loading:i(me),loadingText:"",fontSize:"16",color:"#303133"},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-af23b574"]]);export{xe as default};
