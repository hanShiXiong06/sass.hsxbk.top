import{d as a,r as e,j as s,H as o,a as t,G as l,C as i,by as n,l as r,o as d,c as u,w as p,u as c,I as m,b as f,f as _,y as g,bw as h,K as v,n as b,S as w,Q as y,i as j,E as x,g as k,h as C}from"./index-d8a8f699.js";import{_ as S}from"./u-popup.0d48946e.js";import{_ as z}from"./u-loading-page.c740ef13.js";import{_ as I}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-transition.db07fff7.js";import"./u-icon.5ba98c98.js";import"./u-safe-bottom.a4431b09.js";import"./u-loading-icon.6808ae8c.js";const L=I(a({__name:"promote_code",setup(a){let I=e(!1),L=e(!0);const T=()=>{I.value=!1},B=e(null),E=()=>{B.value.proactive()},{setShare:F}=w();s((a=>{if(!a.id)return o({title:"缺少参数id",icon:"none"}),void setTimeout((()=>{t({url:"/addon/shop/pages/index",mode:"reLaunch"})}),1e3);if(!l())return void i().setLoginBack({url:"/addon/shop_fenxiao/pages/promote_code",param:{id:a.id,mid:a.mid}});H(a.id);let e={title:"分销推广",desc:"分销推广"};F({wechat:{...e},weapp:{...e}})}));let G=e("");const H=a=>{L.value=!0,n({type:"fenxiao",param:{member_id:a}}).then((a=>{G.value=a.data&&r(a.data)||"",L.value=!1}))};return(a,e)=>{const s=y,o=j,t=x,l=k(C("u-popup"),S),i=k(C("u-loading-page"),z);return d(),u(o,{class:"container",style:b(a.themeColor())},{default:p((()=>[c(L)?_("v-if",!0):(d(),m(v,{key:0},[f(o,{class:"poster-wrap"},{default:p((()=>[c(G)?(d(),u(s,{key:0,src:c(G),mode:"widthFix","show-menu-by-longpress":!0},null,8,["src"])):_("v-if",!0)])),_:1}),f(o,{class:"tips"},{default:p((()=>[g("长按识别图中二维码")])),_:1}),f(l,{show:c(I),onClose:e[0]||(e[0]=a=>h(I)?I.value=!1:I=!1),mode:"center",round:10,closeable:!0,"safe-area-inset-bottom":!1},{default:p((()=>[f(o,{class:"dialog-popup"},{default:p((()=>[f(o,{class:"title"},{default:p((()=>[g("提示")])),_:1}),f(o,{class:"message"},{default:p((()=>[g("您拒绝了保存图片到相册的授权请求，无法保存图片到相册，如需正常使用，请授权之后再进行操作。")])),_:1}),f(o,{class:"action-wrap"},{default:p((()=>[f(o,{onClick:T},{default:p((()=>[g("取消")])),_:1}),f(o,null,{default:p((()=>[f(t,{type:"default",class:"authorization-btn","open-type":"openSetting",onOpensetting:T,"hover-class":"none",onClick:E},{default:p((()=>[g("立即授权")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])],64)),f(i,{"bg-color":"rgb(248,248,248)",loading:c(L),loadingText:"",fontSize:"16",color:"#333"},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-7ad57e30"]]);export{L as default};
