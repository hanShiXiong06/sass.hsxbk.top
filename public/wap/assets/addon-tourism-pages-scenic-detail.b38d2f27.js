import{_ as e}from"./u-swiper.efc69b22.js";import{d as t,r as l,m as a,p as s,j as n,l as r,o as c,c as u,w as o,u as i,b as d,y as x,z as f,f as p,bw as _,I as m,J as g,K as b,n as v,g as h,h as y,i as k,D as w,c9 as F,a2 as j,G as C,C as D,a as P,Q as S,E as V}from"./index-d8a8f699.js";import{_ as I}from"./u-popup.0d48946e.js";import{_ as E}from"./u-parse.8b113dfe.js";import{_ as z}from"./u-loading-page.c740ef13.js";import{r as U}from"./tourism.93d35d7c.js";import{_ as A}from"./share-poster.b1e17ebe.js";import{_ as Y}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.6808ae8c.js";import"./u-transition.db07fff7.js";import"./u-icon.5ba98c98.js";import"./u-safe-bottom.a4431b09.js";const $=Y(t({__name:"detail",setup(t){let Y=l([]),$=l([]),q=l(!0),B=l(""),G=l(!1),J=l([]),K=l(!1),L=l("");const M=a(),Q=s((()=>M.info));n((e=>{q.value=!0,U(e.scenic_id).then((t=>{B.value=e.scenic_id,$.value=t.data,J.value.push({id:1,latitude:$.value.latitude,longitude:$.value.longitude,iconPath:r("addon/tourism/tourism/map_icon.png"),height:25}),Y.value=[],$.value.image_thumb_big&&$.value.image_thumb_big.length?$.value.image_thumb_big.forEach(((e,t)=>{Y.value.push(r(e))})):Y.value.push(r($.value.cover_thumb_big)),Z(),q.value=!1})).catch((()=>{q.value=!1}))}));let R=l({ticket_id:"",reserve_time:(e=>{let t=e.getFullYear(),l=e.getMonth()+1,a=e.getDate();return""+(t+"-"+(l<10?"0"+l:l)+"-"+(a<10?"0"+a:a))})(((e,t="")=>{var l=864e5*e;return t?new Date(t+l):new Date(Date.now()+l)})(0)),num:1,scenic_id:B});let T=l(null),W=l(""),X={};const Z=()=>{W.value="?scenic_id="+$.value.scenic_id,Q.value&&Q.value.member_id&&(W.value+="&mid="+Q.value.member_id)},H=()=>{X.scenic_id=$.value.scenic_id,Q.value&&Q.value.member_id&&(X.member_id=Q.value.member_id),T.value.openShare()};let N=e=>{let t="";return t=e.member_discount&&C()?"member_price":"",t},O=e=>{let t="0.00";return t=e.member_discount&&C()&&e.member_price||e.price,parseFloat(t).toFixed(2)};return(t,l)=>{const a=h(y("u-swiper"),e),s=k,n=w,U=F,M=h(y("u-popup"),I),Q=S,Z=V,ee=h(y("u-parse"),E),te=j,le=h(y("u-loading-page"),z);return c(),u(s,{class:"bg-[#f7f7f7] min-h-screen overflow-hidden",style:v(t.themeColor())},{default:o((()=>[i(q)?p("v-if",!0):(c(),u(s,{key:0},{default:o((()=>[d(a,{list:i(Y),height:"380rpx",radius:"0"},null,8,["list"]),d(s,{class:"chunk-wrap pt-4 pb-3 rounded-t-2xl relative -mt-[30rpx]"},{default:o((()=>[d(s,{class:"flex justify-between items-center"},{default:o((()=>[d(s,{class:"flex-1"},{default:o((()=>[d(s,{class:"text-[34rpx] font-bold multi-hidden leading-6"},{default:o((()=>[x(f(i($).scenic_name),1)])),_:1}),d(s,{class:"text-xs mt-2"},{default:o((()=>[x("景点级别「"+f(i($).scenic_level)+"星」",1)])),_:1})])),_:1}),d(s,{class:"flex flex-col items-center text-[#6D7278] ml-[40rpx] pl-[50rpx] pr-[30rpx] border-0 border-l border-solid border-[#F0F0F0]",onClick:H},{default:o((()=>[d(n,{class:"nc-iconfont nc-icon-fenxiangV6xx-1 text-lg"}),d(n,{class:"mt-1 text-xs"},{default:o((()=>[x("分享")])),_:1})])),_:1})])),_:1}),p(' <view class="flex justify-between text-[#543E3E] items-baseline mt-3">\r\n\t\t\t\t\t<view class="text-xs member-price pl-2 py-1 rounded-l-lg">\r\n\t\t\t\t\t\t<text>5.0评分</text>\r\n\t\t\t\t\t\t<text class="ml-3">风景很好</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class="text-xs flex items-center">\r\n\t\t\t\t\t\t<text>39条评论</text>\r\n\t\t\t\t\t\t<text class="nc-iconfont nc-icon-youV6xx text-[26rpx]"></text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view> '),d(s,{class:"flex mt-3"},{default:o((()=>[d(s,{class:"bg-[#F2F4F9] mr-2 py-2 px-3 rounded-md w-[240rpx] box-border"},{default:o((()=>[d(n,{class:"text-[26rpx] font-bold"},{default:o((()=>[x("营业中")])),_:1}),d(s,{class:"text-xs mt-1"},{default:o((()=>[d(n,null,{default:o((()=>[x(f(i($).open_time),1)])),_:1}),d(n,{class:"text-[26rpx] nc-iconfont nc-icon-youV6xx"})])),_:1})])),_:1}),d(s,{class:"bg-[#F2F4F9] py-2 px-3 rounded-md flex flex-1 items-center",onClick:l[0]||(l[0]=e=>_(G)?G.value=!0:G=!0)},{default:o((()=>[d(s,{class:"flex-1"},{default:o((()=>[p(' <text class="text-[26rpx] font-bold">距您直线12.3km</text> '),d(n,{class:"text-[26rpx] font-bold"},{default:o((()=>[x("景点地址")])),_:1}),d(s,{class:"text-xs mt-1"},{default:o((()=>[d(n,null,{default:o((()=>[x(f(i($).address),1)])),_:1}),d(n,{class:"text-[26rpx] nc-iconfont nc-icon-youV6xx"})])),_:1})])),_:1}),d(s,{class:"flex flex-col ml-3"},{default:o((()=>[d(n,{class:"nc-iconfont nc-icon-dizhiV6mm leading-[1] p-[8rpx] text-center bg-[#fff] text-[32rpx] rounded-full"}),d(n,{class:"text-xs mt-[4rpx]"},{default:o((()=>[x("地图")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),d(M,{show:i(G),onClose:l[1]||(l[1]=e=>_(G)?G.value=!1:G=!1),closeable:!0},{default:o((()=>[d(s,{class:"text-center py-[30rpx] font-bold leading-none"},{default:o((()=>[d(n,null,{default:o((()=>[x("地图")])),_:1})])),_:1}),d(s,null,{default:o((()=>[d(U,{class:"map-body w-full h-[600rpx]",latitude:i($).latitude,longitude:i($).longitude,markers:i(J)},null,8,["latitude","longitude","markers"])])),_:1})])),_:1},8,["show"]),i($).ticket_list&&i($).ticket_list.length?(c(),u(s,{key:0,class:"chunk-wrap"},{default:o((()=>[d(s,{class:"chunk-head"},{default:o((()=>[d(n,null,{default:o((()=>[x("门票")])),_:1})])),_:1}),(c(!0),m(b,null,g(i($).ticket_list,((e,t)=>(c(),u(s,{key:e.goods_id},{default:o((()=>[d(s,{class:"flex border-0 border-b border-solid border-[#F2F2F2] py-[30rpx] justify-between"},{default:o((()=>[d(s,{class:"flex flex-col"},{default:o((()=>[d(n,{class:"text-sm font-bold"},{default:o((()=>[x(f(e.goods_name),1)])),_:2},1024),p(' <text class="text-xs text-color mt-1">票数: {{item.stock}}</text> '),d(s,{class:"flex text-xs text-[#646464] mt-1"},{default:o((()=>[d(n,{class:"class-select"},{default:o((()=>[x("官方")])),_:1}),d(n,{class:"class-select"},{default:o((()=>[x("有条件退")])),_:1}),d(n,{class:"text-color"},{default:o((()=>[x("无需换票")])),_:1})])),_:1}),d(s,{class:"flex text-xs text-[#646464] mt-1",onClick:t=>{return l=e.goods_content,K.value=!0,void(L.value=l);var l}},{default:o((()=>[d(n,null,{default:o((()=>[x("门票说明"),d(n,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx]"})])),_:1})])),_:2},1032,["onClick"])])),_:2},1024),d(s,{class:"flex flex-col justify-center"},{default:o((()=>[d(s,{class:"text-xs text-[#626262]"},{default:o((()=>[d(n,{class:"text-[#FA6400] price-font"},{default:o((()=>[x("￥")])),_:1}),d(n,{class:"text-lg font-bold text-[#FA6400] price-font"},{default:o((()=>[x(f(i(O)(e)),1)])),_:2},1024),"member_price"==i(N)(e)?(c(),u(Q,{key:0,class:"h-[22rpx] ml-[6rpx] w-[55rpx]",src:i(r)("addon/tourism/VIP.png"),mode:"widthFix"},null,8,["src"])):p("v-if",!0),x(" 起 ")])),_:2},1024),d(Z,{class:"w-[128rpx] h-[60rpx] leading-[60rpx] text-sm text-white bg-color rounded-2xl mt-[20rpx]",onClick:t=>(e=>{if(!C())return D().setLoginBack({url:"/addon/tourism/pages/scenic/detail",param:{scenic_id:B.value}}),!1;R.value.ticket_id=e.goods_id,uni.setStorageSync("scenicCreateData",R.value),P({url:"/addon/tourism/pages/scenic/order"})})(e)},{default:o((()=>[x("预订")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):p("v-if",!0),p(" 门票说明 "),d(M,{show:i(K),onClose:l[2]||(l[2]=e=>_(K)?K.value=!1:K=!1),closeable:!0},{default:o((()=>[d(s,{class:"text-center py-[30rpx] font-bold leading-none"},{default:o((()=>[d(n,null,{default:o((()=>[x("门票说明")])),_:1})])),_:1}),d(s,{class:"pt-[28rpx] pb-[40rpx] px-[28rpx]"},{default:o((()=>[d(te,{class:"max-h-[60vh]","scroll-y":!0},{default:o((()=>[i(L)?(c(),u(ee,{key:0,content:i(L),tagStyle:{img:"vertical-align: top;"}},null,8,["content"])):(c(),u(n,{key:1,class:"block px-5"},{default:o((()=>[x("暂无购买须知")])),_:1}))])),_:1})])),_:1})])),_:1},8,["show"]),i($).telephone?(c(),u(s,{key:1,class:"chunk-wrap"},{default:o((()=>[d(s,{class:"chunk-head"},{default:o((()=>[d(n,null,{default:o((()=>[x("联系电话")])),_:1})])),_:1}),d(s,{class:"text-sm py-3 px-1 text-[#666] flex items-center"},{default:o((()=>[d(n,{class:"iconfont icondianhua-xianxingyuankuang font-bold mr-2 text-lg"}),d(n,null,{default:o((()=>[x(f(i($).telephone),1)])),_:1})])),_:1})])),_:1})):p("v-if",!0),d(s,{class:"chunk-wrap"},{default:o((()=>[d(s,{class:"chunk-head"},{default:o((()=>[d(n,null,{default:o((()=>[x("景区介绍")])),_:1})])),_:1}),d(s,{class:"pt-[28rpx] pb-[40rpx] scheduling-content"},{default:o((()=>[i($).scenic_desc?(c(),u(ee,{key:0,content:i($).scenic_desc,tagStyle:{img:"vertical-align: top;"}},null,8,["content"])):(c(),u(n,{key:1},{default:o((()=>[x("暂无景区介绍")])),_:1}))])),_:1})])),_:1}),d(s,{class:"chunk-wrap"},{default:o((()=>[d(s,{class:"chunk-head"},{default:o((()=>[d(n,null,{default:o((()=>[x("景区周边")])),_:1})])),_:1}),d(s,{class:"pt-[28rpx] pb-[40rpx] scheduling-content"},{default:o((()=>[i($).surround?(c(),u(ee,{key:0,content:i($).surround,tagStyle:{img:"vertical-align: top;"}},null,8,["content"])):(c(),u(n,{key:1},{default:o((()=>[x("暂无景区周边")])),_:1}))])),_:1})])),_:1})])),_:1})),d(le,{"bg-color":"rgb(248,248,248)",loading:i(q),fontSize:"16",color:"#333"},null,8,["loading"]),d(A,{ref_key:"sharePosterRef",ref:T,posterType:"tourism_scenic",posterId:i($).poster_id,posterParam:i(X),copyUrlParam:i(W)},null,8,["posterId","posterParam","copyUrlParam"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-5341025f"]]);export{$ as default};
