import{d as t,r as e,K as i,bT as a,Z as c,bU as l,g as r,h as s,o,c as d,w as n,b as p,A as u,y as v,Q as f,z as y,f as m,e as x,O as _,P as h,a6 as k,v as C,i as g,a5 as b}from"./index-2882a2d8.js";import{_ as w}from"./u-popup.2abbe959.js";const j=t({__name:"area-select",props:{areaId:{type:Number,default:0}},emits:["complete"],setup(t,{expose:j,emit:I}){const T=t,z=e(!1),A=i({province:[],city:[],district:[]}),K=e("province"),N=i({province:null,city:null,district:null});a(0).then((({data:t})=>{A.province=t})).catch(),c((()=>T.areaId),((t,e)=>{t&&!e&&l(t).then((({data:t})=>{t.province&&(N.province=t.province),t.city&&(N.city=t.city),t.district&&(N.district=t.district)}))}),{immediate:!0}),c((()=>N.province),(()=>{a(N.province.id).then((({data:t})=>{if(A.city=t,K.value="city",N.city){let e=!1;for(let i=0;i<t.length;i++)if(N.city.id==t[i].id){e=!0;break}e||(N.city=null)}})).catch()}),{deep:!0}),c((()=>N.city),(t=>{t?a(N.city.id).then((({data:t})=>{if(A.district=t,K.value="district",N.district){let e=!1;for(let i=0;i<t.length;i++)if(N.district.id==t[i].id){e=!0;break}e||(N.district=null)}})).catch():(A.district=[],N.district=null)}),{deep:!0}),c((()=>N.district),(t=>{t&&(K.value="district",I("complete",N),z.value=!1)}),{deep:!0});return j({open:()=>{z.value=!0}}),(t,e)=>{const i=g,a=b,c=r(s("u-popup"),w);return o(),d(c,{show:z.value,onClose:e[4]||(e[4]=t=>z.value=!1),mode:"bottom",round:10},{default:n((()=>[p(i,{onTouchmove:e[3]||(e[3]=u((()=>{}),["prevent","stop"])),class:"popup-common"},{default:n((()=>[p(i,{class:"title"},{default:n((()=>[v("请选择地区")])),_:1}),p(i,{class:"flex p-[30rpx] pt-[0] text-sm font-500"},{default:n((()=>[A.province.length?(o(),d(i,{key:0,class:f(["flex-1 pr-[10rpx]",{"text-[var(--primary-color)]":"province"==K.value}]),onClick:e[0]||(e[0]=t=>K.value="province")},{default:n((()=>[N.province?(o(),d(i,{key:0},{default:n((()=>[v(y(N.province.name),1)])),_:1})):(o(),d(i,{key:1},{default:n((()=>[v("请选择")])),_:1}))])),_:1},8,["class"])):m("v-if",!0),A.city.length?(o(),d(i,{key:1,class:f(["flex-1 pr-[10rpx]",{"text-[var(--primary-color)]":"city"==K.value}]),onClick:e[1]||(e[1]=t=>K.value="city")},{default:n((()=>[N.city?(o(),d(i,{key:0},{default:n((()=>[v(y(N.city.name),1)])),_:1})):(o(),d(i,{key:1},{default:n((()=>[v("请选择")])),_:1}))])),_:1},8,["class"])):m("v-if",!0),A.district.length?(o(),d(i,{key:2,class:f(["flex-1 pr-[10rpx]",{"text-[var(--primary-color)]":"district"==K.value}]),onClick:e[2]||(e[2]=t=>K.value="district")},{default:n((()=>[N.district?(o(),d(i,{key:0},{default:n((()=>[v(y(N.district.name),1)])),_:1})):(o(),d(i,{key:1},{default:n((()=>[v("请选择")])),_:1}))])),_:1},8,["class"])):m("v-if",!0)])),_:1}),p(a,{"scroll-y":"true",class:"h-[50vh]"},{default:n((()=>[p(i,{class:"flex p-[30rpx] pt-0 text-sm"},{default:n((()=>[A.province.length?x((o(),d(i,{key:0},{default:n((()=>[(o(!0),_(h,null,k(A.province,(t=>(o(),d(i,{class:f(["h-[80rpx] flex items-center",{"text-[var(--primary-color)]":N.province&&N.province.id==t.id}]),onClick:e=>N.province=t},{default:n((()=>[v(y(t.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1},512)),[[C,"province"==K.value]]):m("v-if",!0),A.city.length?x((o(),d(i,{key:1},{default:n((()=>[(o(!0),_(h,null,k(A.city,(t=>(o(),d(i,{class:f(["h-[80rpx] flex items-center",{"text-[var(--primary-color)]":N.city&&N.city.id==t.id}]),onClick:e=>N.city=t},{default:n((()=>[v(y(t.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1},512)),[[C,"city"==K.value]]):m("v-if",!0),A.district.length?x((o(),d(i,{key:2},{default:n((()=>[(o(!0),_(h,null,k(A.district,(t=>(o(),d(i,{class:f(["h-[80rpx] flex items-center",{"text-[var(--primary-color)]":N.district&&N.district.id==t.id}]),onClick:e=>N.district=t},{default:n((()=>[v(y(t.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1},512)),[[C,"district"==K.value]]):m("v-if",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])}}});export{j as _};
