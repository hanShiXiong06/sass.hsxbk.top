import{d as e,r as a,a7 as l,o as t,c as s,w as r,b as o,u as p,y as x,z as n,I as u,K as i,f as c,J as f,L as d,n as _,a as m,H as v,Q as h,i as g,D as y,g as b,h as k,E as w,l as j,x as F,Y as I,Z as C}from"./index-d8a8f699.js";import{_ as O}from"./u--image.2df700b8.js";import{_ as E,a as z}from"./u-checkbox-group.00090a01.js";import{j as N,k as S,b as D,l as H,m as M}from"./fenxiao.966b2ea4.js";import{_ as T}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.e646392b.js";import"./u-icon.5ba98c98.js";import"./u-transition.db07fff7.js";const Y=T(e({__name:"apply",setup(e){const T=a({}),Y=a({}),Z=a(!1),J=a({memberInfo:!1,applyInfo:!1,config:!1,check:!1}),K=()=>{N().then((e=>{Y.value=Object.assign(Y.value,e.data),Y.value.is_fenxiao&&m({url:"/addon/shop_fenxiao/pages/index",mode:"redirectTo",param:{}}),J.value.memberInfo=!0})).catch((()=>{J.value.memberInfo=!0}))},L=()=>{S().then((e=>{Y.value.status=e.data.status||0,3===Y.value.status&&(Y.value.refuse_reason=e.data.refuse_reason||""),J.value.applyInfo=!0})).catch((()=>{J.value.applyInfo=!0}))},Q=()=>{D().then((e=>{T.value=Object.assign(T.value,e.data.fenxiao_config),"1"!=T.value.is_show_apply&&(Z.value=!0),J.value.config=!0})).catch((()=>{J.value.config=!0}))},V=()=>{H().then((e=>{if(T.value=Object.assign(T.value,e.data.condition_data),"3"===T.value.fenxiao_condition){let e=0;Object.values(T.value.goods_list).forEach(((a,l)=>{a.is_buy&&(e+=1)})),T.value.goods_sum=e}T.value.is_allow_apply=e.data.is_allow_apply,J.value.check=!0})).catch((()=>{J.value.check=!0}))};l((()=>{J.value={memberInfo:!1,applyInfo:!1,config:!1,check:!1},T.value={},Y.value={},K(),L(),Q(),V()}));const W=()=>{Z.value=!Z.value},q=a(!1),A=()=>Z.value?!q.value&&(q.value=!0,void M().then((e=>{q.value=!1,J.value={memberInfo:!1,applyInfo:!1,config:!1,check:!1},T.value={},Y.value={},K(),L(),Q(),V()})).catch((()=>{q.value=!1}))):(v({title:"请阅读并同意《分销申请协议》",icon:"none"}),!1);return(e,a)=>{const l=h,v=g,N=y,S=b(k("u--image"),O),D=b(k("u-checkbox"),E),H=b(k("u-checkbox-group"),z),M=w;return Object.values(J.value).every((e=>e))?(t(),s(v,{key:0,class:"bg-[#f6f6f6] min-h-[100vh]",style:_(e.themeColor())},{default:r((()=>["0"==T.value.is_fenxiao?(t(),s(v,{key:0,class:"flex flex-col items-center pt-[100rpx]"},{default:r((()=>[o(v,{class:"w-[300rpx] h-[200rpx]"},{default:r((()=>[o(l,{class:"w-[300rpx] h-[200rpx]",mode:"aspectFit",src:p(j)("addon/shop_fenxiao/unopened-fenxiao.png")},null,8,["src"])])),_:1}),o(v,{class:"mt-[40rpx] text-[24rpx]"},{default:r((()=>[x(n(p(F)("fenxiaoNotOpen")),1)])),_:1})])),_:1})):3==T.value.apply_type?(t(),s(v,{key:1,class:"flex flex-col items-center pt-[100rpx]"},{default:r((()=>[o(v,{class:"w-[300rpx] h-[200rpx]"},{default:r((()=>[o(l,{class:"w-[300rpx] h-[200rpx]",mode:"aspectFit",src:p(j)("addon/shop_fenxiao/unopened-fenxiao.png")},null,8,["src"])])),_:1}),o(v,{class:"mt-[40rpx] text-[24rpx]"},{default:r((()=>[x("请联系客服成为分销商")])),_:1})])),_:1})):(t(),u(i,{key:2},[0===Y.value.status&&Object.keys(T.value).length&&"3"!=T.value.apply_type?(t(),u(i,{key:0},[o(l,{class:"w-[100vw] min-h-[100%] h-[100%]",mode:"widthFix",src:p(j)(T.value.apply_head||"")},null,8,["src"]),o(v,{class:"bg-[#fff] relative sidebar-marign mt-[-68rpx] rounded-[16rpx] h-[100rpx] flex justify-between items-center px-[30rpx]"},{default:r((()=>[o(N,{class:"text-[30rpx]"},{default:r((()=>[x(n(p(F)("referrer")),1)])),_:1}),o(N,{class:"text-[26rpx] text-[#666]"},{default:r((()=>[x(n(Y.value.bindFenxiaoMember?Y.value.bindFenxiaoMember.nickname:p(F)("notHave")),1)])),_:1})])),_:1}),["1","2","3"].indexOf(T.value.fenxiao_condition)>-1?(t(),s(v,{key:0,class:"apply-condition z-10 rounded-[16rpx] mt-[20rpx] pr-[10rpx] box-border sidebar-marign"},{default:r((()=>[o(v,{class:"apply-condition-wrap z-10 rounded-[16rpx] pl-[10rpx] pb-[10rpx] box-border"},{default:r((()=>[o(v,{class:"flex items-center justify-between h-[40rpx] px-[20rpx] pt-[26rpx] pb-[14rpx]"},{default:r((()=>[o(v,{class:"text-[30rpx] text-[#fff]"},{default:r((()=>[x("申请条件")])),_:1}),"1"===T.value.fenxiao_condition?(t(),s(v,{key:0,class:"flex items-baseline text-[26rpx] text-[#fff]"},{default:r((()=>[o(N,null,{default:r((()=>[x("累计消费")])),_:1}),o(N,{class:"text-[30rpx] price-font mx-[6rpx]"},{default:r((()=>[x(n(T.value.order_count),1)])),_:1}),o(N,null,{default:r((()=>[x("次")])),_:1})])),_:1})):c("v-if",!0),"2"===T.value.fenxiao_condition?(t(),s(v,{key:1,class:"flex items-baseline text-[26rpx] text-[#fff]"},{default:r((()=>[o(N,null,{default:r((()=>[x("累计消费")])),_:1}),o(N,{class:"text-[30rpx] price-font mx-[6rpx]"},{default:r((()=>[x(n(T.value.order_sum),1)])),_:1}),o(N,null,{default:r((()=>[x("元")])),_:1})])),_:1})):c("v-if",!0),"3"===T.value.fenxiao_condition?(t(),s(v,{key:2,class:"flex items-baseline text-[24rpx] text-[#fff]"},{default:r((()=>[o(N,null,{default:r((()=>[x("已购买")])),_:1}),o(N,{class:"text-[30rpx] price-font mx-[6rpx]"},{default:r((()=>[x(n(T.value.goods_sum?T.value.goods_sum:0),1)])),_:1}),o(N,null,{default:r((()=>[x("个商品")])),_:1})])),_:1})):c("v-if",!0)])),_:1}),o(v,{class:"bg-[#fff] px-[20rpx] py-[30rpx] rounded-[12rpx]"},{default:r((()=>["1"===T.value.fenxiao_condition?(t(),s(v,{key:0,class:"flex items-center"},{default:r((()=>[o(l,{class:"w-[32rpx] h-[32rpx] mr-[20rpx]",src:p(j)("addon/shop/apply/tiaojian.png")},null,8,["src"]),o(v,{class:"text-[26rpx] text-[#666] font-light"},{default:r((()=>[x(" 累计消费"),o(N,{class:"price-font mx-[5rpx]"},{default:r((()=>[x(n(T.value.consume_count),1)])),_:1}),x("次 ")])),_:1})])),_:1})):c("v-if",!0),"2"===T.value.fenxiao_condition?(t(),s(v,{key:1,class:"flex items-center"},{default:r((()=>[o(l,{class:"w-[32rpx] h-[32rpx] mr-[20rpx]",src:p(j)("addon/shop/apply/tiaojian.png")},null,8,["src"]),o(v,{class:"text-[26rpx] text-[#666]"},{default:r((()=>[x(" 累计消费"),o(N,{class:"price-font mx-[5rpx]"},{default:r((()=>[x(n(T.value.consume_money),1)])),_:1}),x("元 ")])),_:1})])),_:1})):c("v-if",!0),"3"===T.value.fenxiao_condition?(t(),u(i,{key:2},[o(v,{class:"flex items-center ml-[22rpx] pb-[10rpx]"},{default:r((()=>[o(l,{class:"w-[32rpx] h-[32rpx] mr-[20rpx]",src:p(j)("addon/shop/apply/tiaojian.png")},null,8,["src"]),o(N,{class:"text-[28rpx] text-[#EF000C]"},{default:r((()=>[x("商品任选其一购买即可成为分销商")])),_:1})])),_:1}),(t(!0),u(i,null,f(T.value.goods_list,((e,a,u)=>(t(),s(v,{class:"flex py-[30rpx] relative fenxiao-goods-item",key:u,onClick:I((a=>{return l=e.goods_id,void m({url:"/addon/shop/pages/goods/detail",param:{goods_id:l}});var l}),["stop"])},{default:r((()=>[o(S,{width:"200rpx",height:"200rpx",class:"overflow-hidden rounded-[12rpx]",src:p(j)(e.goods_cover_thumb_mid?e.goods_cover_thumb_mid:""),model:"aspectFill"},{error:r((()=>[o(l,{class:"w-[200rpx] h-[200rpx]",src:p(j)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["src"]),o(v,{class:"flex flex-1 flex-col justify-between py-[6rpx] ml-[20rpx] goods-item-content"},{default:r((()=>[o(v,{class:"multi-hidden text-[26rpx] leading-[1.3]"},{default:r((()=>[x(n(e.goods_name),1)])),_:2},1024),o(v,{class:"flex items-end justify-between"},{default:r((()=>[o(v,{class:"text-[var(--price-text-color)] price-font"},{default:r((()=>[o(N,{class:"text-[24rpx] ml-[20rpx]"},{default:r((()=>[x("￥")])),_:1}),o(N,{class:"text-[38rpx]"},{default:r((()=>[x(n(parseFloat(p(C)(e.goods_sku.price)).toFixed(2).toString().split(".")[0]),1)])),_:2},1024),o(N,{class:"text-[26rpx] mr-[10rpx]"},{default:r((()=>[x("."+n(parseFloat(p(C)(e.goods_sku.price)).toFixed(2).toString().split(".")[1]),1)])),_:2},1024)])),_:2},1024),o(N,{class:"nc-iconfont nc-icon-gouwucheV6xx-2 text-[#fff] text-[28rpx] bg-[#FE4C19] h-[48rpx] w-[48rpx] text-center leading-[48rpx] rounded-[50rpx]"})])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))],64)):c("v-if",!0)])),_:1})])),_:1})])),_:1})):c("v-if",!0),o(v,{class:"fixed btn-wrap flex justify-center flex-col bottom-[0] left-[0] right-[0] items-center bg-[#fff] py-[30rpx]"},{default:r((()=>[o(v,{class:d(["w-[690rpx] h-[88rpx] text-[28rpx] rounded-[44rpx] text-center leading-[88rpx]",{"bg-[#EE9D99] text-[#fff]":!Number(T.value.is_allow_apply),"primary-btn-bg text-[#fff]":Number(T.value.is_allow_apply)}]),disabled:!Number(T.value.is_allow_apply),onClick:A},{default:r((()=>[x(n(Number(T.value.is_allow_apply)?"申请成为分销商":"尚未达到申请条件"),1)])),_:1},8,["class","disabled"]),"1"===T.value.is_show_apply?(t(),s(v,{key:0,class:"flex justify-center items-baseline mt-[20rpx] -mb-[10rpx]"},{default:r((()=>[o(H,null,{default:r((()=>[o(D,{activeColor:"var(--primary-color)",checked:Z.value,shape:"shape",size:"14",onChange:W,customStyle:{marginTop:"4rpx"}},null,8,["checked"])])),_:1}),o(v,{class:"text-xs text-gray-400 flex items-center flex-wrap"},{default:r((()=>[o(N,null,{default:r((()=>[x("我已阅读并了解")])),_:1}),o(N,{onClick:a[0]||(a[0]=e=>p(m)({url:"/app/pages/auth/agreement?key=fenxiao_service"})),class:"text-primary"},{default:r((()=>[x("《分销申请协议》")])),_:1})])),_:1})])),_:1})):c("v-if",!0)])),_:1}),o(v,{class:d(["pt-[170rpx]",{"h-[50rpx]":"1"===T.value.is_show_apply}])},null,8,["class"])],64)):c("v-if",!0),1===Y.value.status?(t(),s(v,{key:1,class:"flex flex-col items-center"},{default:r((()=>[o(v,{class:"w-[500rpx] h-[500rpx]"},{default:r((()=>[o(S,{width:"500rpx",height:"500rpx",src:p(j)("addon/shop_fenxiao/fenxiao.png"),model:"aspectFill"},null,8,["src"])])),_:1}),o(v,{class:"text-[24rpx]"},{default:r((()=>[x("您已提交分销商申请，等待平台审核")])),_:1})])),_:1})):c("v-if",!0),3===Y.value.status?(t(),s(v,{key:2,class:"flex flex-col items-center"},{default:r((()=>[o(v,{class:"w-[500rpx] h-[500rpx]"},{default:r((()=>[o(S,{width:"500rpx",height:"500rpx",src:p(j)("addon/shop_fenxiao/no-fenxiao.png"),model:"aspectFill"},null,8,["src"])])),_:1}),o(v,{class:"mt-[40rpx] text-[24rpx] mb-[24rpx] text-[#999]"},{default:r((()=>[x("您提交的分销商申请已被拒绝")])),_:1}),o(v,{class:"text-[24rpx] mb-[24rpx] text-[#666]"},{default:r((()=>[x("拒绝原因："+n(Y.value.refuse_reason),1)])),_:1}),o(M,{class:"w-[500rpx] h-[70rpx] text-[28rpx] leading-[68rpx] rounded-[44rpx] !p-0 text-[#fff] m-0 primary-btn-bg remove-border",shape:"circle","hover-class":"none",onClick:a[1]||(a[1]=e=>Y.value.status=0)},{default:r((()=>[x("重新申请")])),_:1})])),_:1})):c("v-if",!0)],64)),c(' <u-loading-page bg-color="rgb(248,248,248)" :loading="loading" fontSize="16" color="#303133"></u-loading-page> ')])),_:1},8,["style"])):c("v-if",!0)}}}),[["__scopeId","data-v-7c9f7a97"]]);export{Y as default};
