import{d as e,r as a,p as t,t as l,a as s,o as r,c as d,w as o,U as n,b as i,u as f,y as p,n as u,z as x,f as _,V as c,ad as m,g as v,h as b,i as g,D as h,C as y,E as w,a7 as k,W as j,bl as C,_ as N}from"./index-71c7df08.js";import{_ as z}from"./loading-page.vue_vue_type_script_setup_true_lang.c7dc2256.js";import{d as I}from"./sale.3ca960a4.js";import{b as T}from"./fenxiao.04341d50.js";const V=N(e({__name:"sale_detail",setup(e){const N=a({}),V=a([]);t((e=>{e.id?E(Number(e.id)):(l({title:"缺少销售奖励id",icon:"none"}),setTimeout((()=>{s({url:"/addon/shop_fenxiao/pages/sale",mode:"redirectTo"})}),1e3))}));const D=a(!0),E=e=>{I(e).then((a=>{N.value.id=e,N.value.is_settlement=a.data.is_settlement,N.value.order_money=a.data.order_money,N.value.reward_money=N.value.is_settlement?a.data.reward_money:a.data.diff_data.now_reward,N.value.sale_start_time=a.data.sale_start_time,N.value.sale_end_time=a.data.sale_end_time,N.value.is_settlement||(N.value.diff_data=a.data.diff_data),F()})).catch((()=>{D.value=!1}))},F=()=>{T().then((e=>{N.value.condition_order_money=e.data.sale_config.condition.order_money,V.value=e.data.sale_config.reward.map(((a,t)=>(a.title=t?Number(e.data.sale_config.reward[t-1].end)+1!=Number(a.end)?"第 "+(Number(e.data.sale_config.reward[t-1].end)+1)+"-"+a.end:"第 "+a.end:a.end>1?"前 "+a.end:"第 "+a.end,a))),D.value=!1})).catch((e=>{D.value=!1}))},L=()=>{s({url:"/addon/shop_fenxiao/pages/sale_ranking",param:{id:N.value.id}})},U=()=>{s({url:"/addon/shop/pages/index",mode:"reLaunch"})};return(e,a)=>{const t=v(b("u--image"),C),l=g,s=h,I=y,T=v(b("loading-page"),z);return r(),d(l,{class:"bg-[var(--page-bg-color)] min-h-[100vh]",style:u(e.themeColor())},{default:o((()=>[D.value?_("v-if",!0):(r(),n(c,{key:0},[i(l,{class:"w-[100%] h-[960rpx] relative background-size box-border",style:u({backgroundImage:"url("+f(w)("addon/shop_fenxiao/sale-detail-header.png")+")"})},{default:o((()=>[i(l,{class:"absolute top-[105rpx] left-0 right-0 flex justify-center"},{default:o((()=>[i(t,{width:"341rpx",height:"63rpx",src:f(w)("addon/shop_fenxiao/sale-detail-title.png"),model:"aspectFill"},null,8,["src"])])),_:1}),i(l,{class:"side-tab",onClick:L},{default:o((()=>[i(s,{class:"iconfont iconpaihangbangV6xx1 icon"}),i(s,{class:"desc"},{default:o((()=>[p("排行榜")])),_:1})])),_:1})])),_:1},8,["style"]),i(l,{class:"py-[24rpx] px-[var(--sidebar-m)] relative mt-[-560rpx] box-border"},{default:o((()=>[i(l,{class:"w-full box-border bg-[#fff] rounded-[var(--rounded-big)] overflow-hidden"},{default:o((()=>[i(l,{class:"bg-[#fdf6ec] px-[var(--pad-sidebar-m)] py-[30rpx]"},{default:o((()=>[i(l,{class:"text-[30rpx] font-500 text-[#b88230] mb-[20rpx]"},{default:o((()=>[p("当前业绩")])),_:1}),i(l,{class:"flex items-center mb-[10rpx]"},{default:o((()=>[i(l,{class:"text-[24rpx] text-[#b88230]"},{default:o((()=>[p("奖励周期：")])),_:1}),i(l,{class:"flex"},{default:o((()=>[i(l,{class:"text-[24rpx] text-[#b88230] leading-[32rpx]"},{default:o((()=>[p(x(N.value.sale_start_time.split(" ")[0].replace(/-/g,".")),1)])),_:1}),i(l,{class:"text-[24rpx] text-[#b88230] leading-[32rpx]"},{default:o((()=>[p("-"+x(N.value.sale_end_time.split(" ")[0].replace(/-/g,".")),1)])),_:1})])),_:1})])),_:1}),!N.value.is_settlement&&N.value.diff_data.diff_order_money?(r(),d(l,{key:0,class:"text-[24rpx] leading-[32rpx] text-[#b88230]"},{default:o((()=>[p(" 再卖"+x(N.value.diff_data.diff_order_money)+"元可获得"+x(f(k)(N.value.diff_data.prev_reward))+"元 ",1)])),_:1})):_("v-if",!0)])),_:1}),i(l,{class:"w-full pt-[70rpx] flex justify-between box-border"},{default:o((()=>[i(l,{class:"w-[50%] flex-shrink-0 box-border pl-[30rpx] pr-[24rpx]"},{default:o((()=>[i(l,{class:"text-[28rpx] text-[#333]"},{default:o((()=>[p("个人奖金（元）")])),_:1}),i(l,{class:"text-[50rpx] font-500 text-left mt-[20rpx] price-font"},{default:o((()=>[p(x(f(k)(N.value.reward_money)),1)])),_:1})])),_:1}),i(l,{class:"w-[50%] flex-shrink-0 box-border pr-[30rpx] pl-[24rpx]"},{default:o((()=>[i(l,{class:"text-[28rpx] text-[#333]"},{default:o((()=>[p("团队销售（元）")])),_:1}),i(l,{class:"text-[50rpx] font-500 text-left mt-[20rpx] price-font"},{default:o((()=>[p(x(f(k)(N.value.order_money)),1)])),_:1})])),_:1})])),_:1}),i(l,{class:"w-full pt-[90rpx] pb-[40rpx] flex justify-center"},{default:o((()=>[i(I,{class:"w-[460rpx] h-[76rpx] text-[26rpx] flex-center rounded-[100rpx] !text-[#fff] m-0 primary-btn-bg remove-border font-500",shape:"circle",onClick:U},{default:o((()=>[p("去推广商品")])),_:1})])),_:1})])),_:1}),i(l,{class:"w-full card-template overflow-hidden top-mar"},{default:o((()=>[i(l,{class:"text-[30rpx] leading-[42rpx] flex items-center"},{default:o((()=>[i(s,{class:"font-500"},{default:o((()=>[p("排名奖励规则")])),_:1}),i(s,{class:"text-[24rpx] text-[var(--text-color-light6)] ml-[10rpx]"},{default:o((()=>[p("参与门槛: 团队销售额"+x(f(k)(N.value.condition_order_money))+"元",1)])),_:1})])),_:1}),(r(!0),n(c,null,m(V.value,((e,a)=>(r(),d(l,{class:j(["text-[26rpx] mt-[30rpx]",{"mb-[34rpx]":a!=V.value.length}])},{default:o((()=>[p("团队销售"+x(e.title)+" 名，奖金 "+x(f(k)(e.reward.commission))+" 元",1)])),_:2},1032,["class"])))),256))])),_:1})])),_:1})],64)),i(T,{loading:D.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-68213d4e"]]);export{V as default};
