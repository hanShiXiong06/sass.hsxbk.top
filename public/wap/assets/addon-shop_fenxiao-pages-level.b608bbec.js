import{bt as e,d as a,j as t,r as l,x as o,o as r,c as s,w as n,b as i,u,y as d,z as p,f as x,P as _,a7 as c,Q as f,n as m,B as v,D as g,i as h,a6 as F,g as b,h as y,E as k,F as j,R as w,a1 as D,af as C}from"./index-7bf68536.js";import{_ as E}from"./loading-page.vue_vue_type_script_setup_true_lang.124ad65f.js";import{b as S,a as N}from"./fenxiao.745a840a.js";import{t as z}from"./topTabbar.f3f9eebd.js";import{d as A}from"./index.53f380a3.js";import{_ as P}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-page.566c330a.js";import"./u-loading-icon.b37701e7.js";import"./u-transition.cdf87992.js";import"./u--image.b3bf1d5c.js";import"./u-image.e46f68ef.js";import"./u-icon.0c1c54c7.js";import"./goods.ac47f924.js";import"./useGoods.e187513d.js";const T=P(a({__name:"level",setup(a){z().setTopTabbarParam({title:"分销商等级",topStatusBar:{textColor:"#333"}});const P=t((()=>({backgroundImage:"url("+k("addon/shop_fenxiao/level/level_top_bg.png")+") ",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat"}))),T=l({style:"style-2",num:4,source:"all",margin:{both:10,bottom:0,top:0},priceStyle:{mainColor:"#ff4142",mainControl:!0},goodsNameStyle:{color:"#303133",control:!0,fontWeight:"normal"},saleStyle:{color:"#999",control:!0}});o((()=>{W(),G()}));const B=l(!0),I=l([]),L=l({}),O=()=>{e.get("shop_fenxiao/level").then((e=>{I.value=e.data,I.value.forEach(((e,a)=>{e.level_id==M.value.level_id&&(Q.value=a,L.value=e)})),B.value=!1}))},R=l({}),G=()=>{S().then((e=>{R.value=e.data}))},M=l({}),Q=l(0),W=()=>{N().then((e=>{M.value=e.data,O()}))},q=t((()=>{if(I.value.length&&I.value[Q.value+1]){let e=I.value[Q.value+1];if(e.task=[],e.complete=0,e.fenxiao_order_num>0){let a={title:"订单总数",desc:"一级分销订单总数满"+e.fenxiao_order_num+"个",condition:e.fenxiao_order_num,value:M.value.fenxiao_order_num,progress:parseFloat(M.value.fenxiao_order_num)>parseFloat(e.fenxiao_order_num)?100:(parseFloat(M.value.fenxiao_order_num)/parseFloat(e.fenxiao_order_num)*100).toFixed(2)};100==a.progress&&(e.complete+=1),e.task.push(a)}if(e.fenxiao_commission>0){let a={title:"佣金总额",desc:"一级分销订单佣金总额满"+D(e.fenxiao_commission)+"元",condition:D(e.fenxiao_commission),value:D(M.value.fenxiao_commission),progress:parseFloat(M.value.fenxiao_commission)>parseFloat(e.fenxiao_commission)?100:(parseFloat(M.value.fenxiao_commission)/parseFloat(e.fenxiao_commission)*100).toFixed(2)};100==a.progress&&(e.complete+=1),e.task.push(a)}if(e.fenxiao_order_money>0){let a={title:"订单总额",desc:"分销订单总额满"+D(e.fenxiao_order_money)+"元",condition:D(e.fenxiao_order_money),value:D(M.value.fenxiao_total_order),progress:parseFloat(M.value.fenxiao_total_order)>parseFloat(e.fenxiao_order_money)?100:(parseFloat(M.value.fenxiao_total_order)/parseFloat(e.fenxiao_order_money)*100).toFixed(2)};100==a.progress&&(e.complete+=1),e.task.push(a)}if(e.order_num>0){let a={title:"自购订单总数",desc:"自购订单总数满"+e.order_num+"个",condition:e.order_num,value:M.value.add_up_data.order_num,progress:parseFloat(M.value.add_up_data.order_num)>parseFloat(e.order_num)?100:(parseFloat(M.value.add_up_data.order_num)/parseFloat(e.order_num)*100).toFixed(2)};100==a.progress&&(e.complete+=1),e.task.push(a)}if(e.order_money>0){let a={title:"自购订单总额",desc:"自购订单总额满"+D(e.order_money)+"元",condition:D(e.order_money),value:D(M.value.add_up_data.order_sum),progress:parseFloat(M.value.add_up_data.order_sum)>parseFloat(e.order_money)?100:(parseFloat(M.value.add_up_data.order_sum)/parseFloat(e.order_money)*100).toFixed(2)};100==a.progress&&(e.complete+=1),e.task.push(a)}if(e.child_num>0){let a={title:"下线人数",desc:"下线人数达到"+e.child_num+"人",condition:e.child_num,value:M.value.add_up_data.child_count,progress:parseFloat(M.value.add_up_data.child_count)>parseFloat(e.child_num)?100:(parseFloat(M.value.add_up_data.child_count)/parseFloat(e.child_num)*100).toFixed(2)};100==a.progress&&(e.complete+=1),e.task.push(a)}if(e.child_fenxiao_num>0){let a={title:"下线分销商",desc:"下线分销商人数达到"+e.child_fenxiao_num+"人",condition:e.child_fenxiao_num,value:M.value.add_up_data.child_fenxiao_count,progress:parseFloat(M.value.add_up_data.child_fenxiao_count)>parseFloat(e.child_fenxiao_num)?100:(parseFloat(M.value.add_up_data.child_fenxiao_count)/parseFloat(e.child_fenxiao_num)*100).toFixed(2)};100==a.progress&&(e.complete+=1),e.task.push(a)}return e.task_num=1==e.upgrade_type?1:e.task.length,e}})),H=l(),J=e=>{H.value=e||{}};return(e,a)=>{const t=v,l=g,o=h,D=C,S=F,N=b(y("loading-page"),E);return r(),s(o,{style:m(e.themeColor())},{default:n((()=>[B.value?x("v-if",!0):(r(),s(o,{key:0,class:"bg-[var(--page-bg-color)] min-h-[100vh]"},{default:n((()=>[i(o,{class:"pt-[40rpx] text-[#fff] w-full",style:m(u(P))},{default:n((()=>[i(o,{class:"flex items-center relative z-[20] mx-[30rpx] mb-[36rpx]"},{default:n((()=>[M.value.member.headimg?(r(),s(t,{key:0,class:"w-[90rpx] h-[90rpx] rounded-[50%]",src:u(k)(M.value.member.headimg),mode:"aspectFill"},null,8,["src"])):(r(),s(t,{key:1,class:"w-[90rpx] h-[90rpx] rounded-[50%]",src:u(k)("addon/shop_fenxiao/index/head.png"),mode:"aspectFill"},null,8,["src"])),i(l,{class:"ml-[20rpx] text-[30rpx] truncate w-[300rpx] text-[#333] font-500"},{default:n((()=>[d(p(M.value.member.nickname),1)])),_:1})])),_:1}),i(o,{class:"relative level-content sidebar-margin"},{default:n((()=>[i(o,{class:"flex items-center ml-[10rpx]"},{default:n((()=>[i(o,{class:"flex items-baseline mr-[10rpx]"},{default:n((()=>[i(t,{class:"w-[30rpx] h-[24rpx]",src:u(k)("addon/shop_fenxiao/level/level_key.png"),mode:"widthFix"},null,8,["src"]),i(l,{class:"text-[#333] font-500 text-[24rpx] -ml-[7rpx]"},{default:n((()=>[d(p(Q.value+1),1)])),_:1})])),_:1}),i(l,{class:"ml-[6rpx] mr-[10rpx] text-[#333] font-500 text-[30rpx] truncate max-w-[200rpx]"},{default:n((()=>[d(p(L.value.level_name),1)])),_:1}),i(l,{class:"rounded-[50rpx] h-[36rpx] flex-center px-[16rpx] text-[20rpx] text-[#F7D6A7] bg-[#38311F]"},{default:n((()=>[d("已解锁")])),_:1}),i(t,{class:"w-[230rpx] h-[200rpx] right-[40rpx] -top-[100rpx] absolute",src:u(k)("addon/shop_fenxiao/level/level_icon.png"),mode:"aspectFill"},null,8,["src"])])),_:1}),I.value[Q.value+1]?(r(),s(o,{key:0,class:"text-[var(--text-color-light9)] mt-[20rpx] flex items-center ml-[10rpx]"},{default:n((()=>[i(l,{class:"text-[var(--text-color-light9)] text-[24rpx]"},{default:n((()=>[d(p(1==I.value[Q.value+1].upgrade_type?u(j)("arbitraryCondition"):u(j)("allConditions"))+p(u(j)("upgradable")),1)])),_:1}),i(l,{class:"text-[var(--text-color-light9)] text-[24rpx]"},{default:n((()=>[d("为"+p(I.value[Q.value+1].level_name),1)])),_:1}),i(o,{class:"flex items-center text-[24rpx] ml-[16rpx] price-font"},{default:n((()=>[i(l,{class:"text-[#CD6C00]"},{default:n((()=>[d(p(u(q).complete>u(q).task_num?u(q).task_num:u(q).complete),1)])),_:1}),i(l,{class:"text-[var(--text-color-light9)]"},{default:n((()=>[d("/"+p(u(q).task_num),1)])),_:1})])),_:1})])),_:1})):x("v-if",!0),i(o,{class:"flex my-[50rpx] ml-[10rpx]"},{default:n((()=>[R.value.fenxiao_config&&R.value.fenxiao_config.level>=1?(r(),s(o,{key:0,class:"flex-1 text-left"},{default:n((()=>[i(o,{class:"text-[var(--text-color-light9)] text-[24rpx]"},{default:n((()=>[d("一级分佣比率")])),_:1}),i(o,{class:"mt-[16rpx] price-font font-500 text-[#D97E1D] text-[36rpx]"},{default:n((()=>[d(p(L.value.one_rate),1),i(l,{class:"text-[24rpx] ml-[4rpx]"},{default:n((()=>[d("%")])),_:1})])),_:1})])),_:1})):x("v-if",!0),R.value.fenxiao_config&&R.value.fenxiao_config.level>=2?(r(),s(o,{key:1,class:"flex-1 text-left"},{default:n((()=>[i(o,{class:"text-[var(--text-color-light9)] text-[24rpx]"},{default:n((()=>[d("二级分佣比率")])),_:1}),i(o,{class:"mt-[16rpx] price-font font-500 text-[#D97E1D] text-[36rpx]"},{default:n((()=>[d(p(L.value.two_rate),1),i(l,{class:"text-[24rpx] ml-[4rpx]"},{default:n((()=>[d("%")])),_:1})])),_:1})])),_:1})):x("v-if",!0),R.value.team_config&&1==R.value.team_config.is_open?(r(),s(o,{key:2,class:"flex-1 text-left"},{default:n((()=>[i(o,{class:"text-[var(--text-color-light9)] text-[24rpx]"},{default:n((()=>[d("团队分佣比率")])),_:1}),i(o,{class:"mt-[16rpx] price-font font-500 text-[#D97E1D] text-[36rpx]"},{default:n((()=>[d(p(L.value.team_rate),1),i(l,{class:"text-[24rpx] ml-[4rpx]"},{default:n((()=>[d("%")])),_:1})])),_:1})])),_:1})):x("v-if",!0)])),_:1}),u(q)&&u(q).task?(r(),s(S,{key:1,"scroll-y":"true",class:"flex flex-col upgrade-content bg-[#fff] rounded-[var(--rounded-mid)] px-[20rpx] py-[30rpx] box-border"},{default:n((()=>[(r(!0),_(f,null,c(u(q).task,((e,a)=>(r(),s(o,{class:w(["flex items-center justify-between",{"pb-[40rpx]":a!=u(q).task.length-1}]),key:a},{default:n((()=>[i(o,{class:"flex flex-col flex-1"},{default:n((()=>[i(l,{class:"text-[28rpx] text-[#333] font-500"},{default:n((()=>[d(p(e.title),1)])),_:2},1024),i(o,{class:"mt-[10rpx] mb-[12rpx] rounded-[12rpx] overflow-hidden"},{default:n((()=>[i(D,{percent:e.progress,activeColor:"#D97E1D",backgroundColor:"#FAF0E5","stroke-width":"4"},null,8,["percent"])])),_:2},1024),i(o,{class:"flex items-center justify-between min-h-[34rpx]"},{default:n((()=>[i(l,{class:"text-[22rpx] text-[var(--text-color-light9)] price-font"},{default:n((()=>[d(p(e.desc),1)])),_:2},1024),i(o,{class:"flex items-center text-[28rpx] price-font"},{default:n((()=>[i(l,{class:"text-[#D97E1D]"},{default:n((()=>[d(p(Number(e.value)),1)])),_:2},1024),i(l,{class:"text-[#bbb]"},{default:n((()=>[d("/"+p(Number(e.condition)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),i(l,{class:"rounded-[50rpx] ml-[30rpx] w-[130rpx] h-[60rpx] flex-center text-[24rpx] text-[#F7D6A7] bg-[#38311F]"},{default:n((()=>[d("去邀请")])),_:1})])),_:2},1032,["class"])))),128))])),_:1})):x("v-if",!0)])),_:1})])),_:1},8,["style"]),i(o,{class:"mt-[60rpx] flex flex-col items-center sidebar-margin pb-[30rpx]"},{default:n((()=>[H.value&&Object.keys(H.value).length?(r(),s(o,{key:0,class:"flex items-center mb-[30rpx]"},{default:n((()=>[i(t,{class:"w-[38rpx] h-[22rpx]",src:u(k)("addon/shop_fenxiao/level/title_left.png"),mode:"aspectFill"},null,8,["src"]),i(l,{class:"text-[30rpx] mx-[18rpx] font-500 text-[#EF000C]"},{default:n((()=>[d("猜你喜欢")])),_:1}),i(t,{class:"w-[38rpx] h-[22rpx]",src:u(k)("addon/shop_fenxiao/level/title_right.png"),mode:"aspectFill"},null,8,["src"])])),_:1})):x("v-if",!0),i(A,{onLoadingFn:J,component:T.value},null,8,["component"])])),_:1})])),_:1})),i(N,{loading:B.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-36c1787a"]]);export{T as default};
