import{d as e,r as t,Z as l,j as a,g as r,h as s,o as d,c as o,w as i,b as u,A as n,y as p,u as x,f as c,e as _,O as f,P as v,a6 as y,Q as m,z as b,v as g,i as h,D as k,a5 as w,C as j,aE as F,F as C,a as S,ba as V,n as A,t as T,B as $,a4 as E,E as z,aF as O}from"./index-9317da28.js";import{_ as R}from"./u--image.5461b7b7.js";import{_ as I}from"./u-alert.9575a35d.js";import{_ as K}from"./u-tabbar.c8394bc9.js";import{_ as D}from"./pay.b34fbbeb.js";import{f as B,h as L,i as J}from"./order.57205b50.js";import{_ as M}from"./u-tabs.180504a4.js";import{_ as P}from"./u-popup.1f2ebcae.js";import{_ as Q,a as U}from"./invoice.vue_vue_type_script_setup_true_lang.6ffc95b1.js";import{_ as Z}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.74ac23f6.js";import"./u-icon.5e775659.js";import"./u-transition.65be38eb.js";import"./u-safe-bottom.3546c5bb.js";import"./pay.25e81968.js";import"./u-badge.4fd7810d.js";import"./u-loading-icon.aabe3d05.js";/* empty css                                                                       */import"./u-empty.5c066343.js";import"./u-form-item.83fe1c60.js";import"./u-line.30917996.js";/* empty css                                                               */import"./u-form.cfe692b2.js";import"./u-input.e030155a.js";/* empty css                                                                */const q=e({__name:"select-coupon",props:{orderKey:{type:String,default:""}},emits:["confirm"],setup(e,{expose:F,emit:C}){const S=e,V=t(0),A=t([]),T=t([]),$=t(!1),E=t(null);l((()=>S.orderKey),(()=>{S.orderKey&&!A.value.length&&B({order_key:S.orderKey}).then((({data:e})=>{const t=[],l=[];e.length&&e.forEach((e=>{e.is_normal?t.push(e):l.push(e)})),T.value=l,A.value=t,t.length&&(E.value=t[0],C("confirm",E.value))})).catch()}),{immediate:!0});const z=a((()=>[{name:`可用优惠券(${A.value.length})`,key:"normal"},{name:`不可用优惠券(${T.value.length})`,key:"disabled"}])),O=e=>{V.value=e.index},R=()=>{C("confirm",E.value),$.value=!1};return F({open:e=>{if($.value=!0,e)for(let t=0;t<A.value.length;t++)if(A.value[t].id==e){E.value=A.value[t];break}},couponList:A}),(e,t)=>{const l=h,a=r(s("u-tabs"),M),F=k,C=w,S=j,I=r(s("u-popup"),P);return d(),o(I,{show:$.value,onClose:t[1]||(t[1]=e=>$.value=!1),mode:"bottom",round:10,closeable:!0},{default:i((()=>[u(l,{onTouchmove:t[0]||(t[0]=n((()=>{}),["prevent","stop"]))},{default:i((()=>[u(l,{class:"text-center p-[30rpx]"},{default:i((()=>[p("请选择优惠券")])),_:1}),e.type?c("v-if",!0):(d(),o(l,{key:0,class:"border-0 !border-b !border-[#eee] border-solid"},{default:i((()=>[u(a,{list:x(z),onClick:O,current:V.value,itemStyle:"width:50%;height:88rpx;box-sizing: border-box;",lineColor:"var(--primary-color)"},null,8,["list","current"])])),_:1})),u(C,{"scroll-y":"true",class:"h-[50vh]"},{default:i((()=>[_(u(l,{class:"p-[30rpx] pt-0 text-sm"},{default:i((()=>[(d(!0),f(v,null,y(A.value,(e=>(d(),o(l,{class:m(["mt-[30rpx] px-[30rpx] py-[20rpx] border-1 !border-[#eee] border-solid rounded-[20rpx]",{"!border-primary bg-primary-light":E.value&&E.value.id==e.id}]),onClick:t=>{return l=e,void(E.value?E.value=E.value.id!=l.id?l:null:E.value=l);var l}},{default:i((()=>[u(l,{class:m(["flex border-0 !border-b !border-[#eee] border-dashed pb-[20rpx]",{"!border-primary":E.value&&E.value.id==e.id}])},{default:i((()=>[u(l,{class:"flex-1 w-0"},{default:i((()=>[u(l,{class:"text-base font-bold"},{default:i((()=>[p(b(e.title),1)])),_:2},1024),e.min_condition_money>0?(d(),o(l,{key:0},{default:i((()=>[p("满"+b(e.min_condition_money)+"可用",1)])),_:2},1024)):(d(),o(l,{key:1},{default:i((()=>[p("无门槛券")])),_:1}))])),_:2},1024),u(l,{class:"font-bold text-base price-font"},{default:i((()=>[u(F,{class:"text-xs"},{default:i((()=>[p("￥")])),_:1}),p(b(e.price),1)])),_:2},1024)])),_:2},1032,["class"]),u(l,{class:"pt-[20rpx] text-xs"},{default:i((()=>[p(b(e.create_time)+" ~ "+b(e.expire_time)+"期间有效",1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),256))])),_:1},512),[[g,0==V.value]]),_(u(l,{class:"p-[30rpx] pt-0 text-sm"},{default:i((()=>[(d(!0),f(v,null,y(T.value,(e=>(d(),o(l,{class:"mt-[30rpx] px-[30rpx] py-[20rpx] border-1 !border-[#eee] border-solid rounded-[20rpx] bg-[#f5f5f5]"},{default:i((()=>[u(l,{class:"flex border-0 !border-b !border-[#ddd] border-dashed pb-[20rpx]"},{default:i((()=>[u(l,{class:"flex-1 w-0"},{default:i((()=>[u(l,{class:"text-base font-bold"},{default:i((()=>[p(b(e.title),1)])),_:2},1024),e.min_condition_money>0?(d(),o(l,{key:0},{default:i((()=>[p("满"+b(e.min_condition_money)+"可用",1)])),_:2},1024)):(d(),o(l,{key:1},{default:i((()=>[p("无门槛券")])),_:1}))])),_:2},1024),u(l,{class:"font-bold text-base price-font"},{default:i((()=>[u(F,{class:"text-xs"},{default:i((()=>[p("￥")])),_:1}),p(b(e.price),1)])),_:2},1024)])),_:2},1024),u(l,{class:"pt-[20rpx] text-xs"},{default:i((()=>[p(b(e.create_time)+" ~ "+b(e.expire_time)+"期间有效",1)])),_:2},1024),u(l,{class:"text-xs pt-[10rpx] flex"},{default:i((()=>[p(" 不可用原因："+b(e.error),1)])),_:2},1024)])),_:2},1024)))),256))])),_:1},512),[[g,1==V.value]])])),_:1}),u(l,{class:"p-[30rpx]"},{default:i((()=>[u(S,{class:"bg-[var(--primary-color)] text-[#fff] h-[80rpx] leading-[80rpx] rounded-[100rpx] text-[28rpx]",onClick:R},{default:i((()=>[p("确认")])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])}}}),G=e({__name:"address-list",emits:["confirm"],setup(e,{expose:l,emit:a}){const _=t(!1),g=t(!1),V=t(""),A=t({}),T=t([]);F({}).then((({data:e})=>{T.value=e,g.value=!1}));const $=(e,t=2)=>{uni.setStorage({key:"selectAddressCallback",data:{back:"/addon/phone_shop/pages/order/payment",delivery:A.value.delivery},success(){S({url:"/app/pages/member/address_edit",param:{id:e.id,source:"shop_order_payment",isSelectMap:t}})}})},E=()=>{uni.setStorage({key:"selectAddressCallback",data:{back:"/addon/phone_shop/pages/order/payment",delivery:A.value.delivery},success(){S({url:"/app/pages/member/address_edit",param:{source:"shop_order_payment"}})}})};return l({open:e=>{_.value=!0,A.value=e,V.value=e.id}}),(e,t)=>{const l=h,g=k,F=w,S=j,z=r(s("u-popup"),P);return d(),o(z,{show:_.value,onClose:t[1]||(t[1]=e=>_.value=!1),mode:"bottom",round:10,closeable:!0},{default:i((()=>[u(l,{onTouchmove:t[0]||(t[0]=n((()=>{}),["prevent","stop"]))},{default:i((()=>[u(l,{class:"text-center p-[30rpx]"},{default:i((()=>[p(b(x(C)("selectAddress")),1)])),_:1}),u(F,{"scroll-y":"true",class:"max-h-[50vh]"},{default:i((()=>[(d(!0),f(v,null,y(T.value,((e,t)=>(d(),o(l,{key:e.id,class:m(["flex items-center px-[30rpx]",{"mb-[30rpx]":T.value.length-1!=t,"text-[var(--primary-color)]":e.id==V.value}]),onClick:e=>(e=>{let t=T.value[e];if("local_delivery"!=A.value.delivery||t.lat||t.lng){let t={};t.address_id=T.value[e].id,t.delivery=A.value.delivery,a("confirm",t)}else $(t,1);_.value=!1})(t)},{default:i((()=>[u(g,{class:"nc-iconfont nc-icon-dingweiV6xx-1 text-[36rpx]"}),u(l,{class:"flex flex-col mx-[30rpx] w-[480rpx]"},{default:i((()=>[u(l,{class:"flex items-center truncate leading-[1.5]"},{default:i((()=>[u(g,{class:"mr-[8rpx] text-[28rpx] truncate max-w-[300rpx]"},{default:i((()=>[p(b(e.name),1)])),_:2},1024),u(g,{class:"text-[28rpx]"},{default:i((()=>[p(b(e.mobile),1)])),_:2},1024)])),_:2},1024),u(l,{class:"truncate text-[28rpx] leading-[1.5]"},{default:i((()=>[p(b(e.full_address),1)])),_:2},1024)])),_:2},1024),u(g,{class:"nc-iconfont nc-icon-xiugaiV6xx text-[32rpx] ml-auto",onClick:t=>$(e)},null,8,["onClick"])])),_:2},1032,["class","onClick"])))),128)),!T.value||T.value&&!T.value.length?(d(),o(l,{key:0,class:"text-[#666] text-[28rpx] text-center"},{default:i((()=>[p(b(x(C)("emptyAddress")),1)])),_:1})):c("v-if",!0)])),_:1}),u(l,{class:"p-[30rpx] pt-[40rpx]"},{default:i((()=>[u(S,{class:"bg-[var(--primary-color)] text-[#fff] h-[80rpx] leading-[80rpx] rounded-[100rpx] text-[28rpx]",onClick:E},{default:i((()=>[p(b(x(C)("addAddress")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])}}}),H=Z(e({__name:"payment",setup(e){const n=t({order_key:"",member_remark:"",discount:{},invoice:{},delivery:{delivery_type:""}}),_=t(null),g=t(),w=t(),F=t(),C=t(),B=t(),M=t(!1),P=t(0),Z=t([]);uni.getStorageSync("orderCreateData")&&Object.assign(n.value,uni.getStorageSync("orderCreateData"));const H=uni.getStorageSync("selectAddressCallback");H&&(n.value.order_key="",n.value.delivery.delivery_type=H.delivery,n.value.delivery.take_address_id=H.address_id,uni.removeStorage({key:"selectAddressCallback"}));const N=(e,t)=>{n.value.delivery.delivery_type!=e&&(P.value=t,n.value.order_key="",n.value.delivery.delivery_type=e,n.value.delivery.take_address_id=0,W())},W=()=>{L(n.value).then((({data:e})=>{_.value=e,n.value.order_key=e.order_key,_.value.delivery.delivery_type_list&&(Z.value=Object.values(_.value.delivery.delivery_type_list)),H&&(P.value=Z.value.findIndex((e=>e.key===_.value.delivery.delivery_type))),!n.value.delivery.delivery_type&&e.delivery.delivery_type&&(n.value.delivery.delivery_type=e.delivery.delivery_type)})).catch()};W(),l((()=>Z.value.length),((e,t)=>{Z.value.length&&uni.getStorageSync("distributionType")&&(Z.value.forEach(((e,t)=>{e.name==uni.getStorageSync("distributionType")&&(P.value=t,N(e.key,t))})),uni.removeStorage({key:"distributionType"}))}));let X=0;const Y=()=>{ee()&&!M.value&&(M.value=!0,J(n.value).then((({data:e})=>{var t;X=e.order_id,0==_.value.basic.order_money?S({url:"/addon/phone_shop/pages/order/detail",param:{order_id:X},mode:"redirectTo"}):null==(t=F.value)||t.open(e.trade_type,e.order_id,`/addon/phone_shop/pages/order/detail?order_id=${e.order_id}`)})).catch((()=>{M.value=!1})))},ee=()=>{const e=n.value;if(_.value.basic.has_goods_types.includes("real")){if(["express","local_delivery"].includes(e.delivery.delivery_type)&&!_.value.delivery.take_address)return T({title:"请选择收货地址",icon:"none"}),!1;if("store"==e.delivery.delivery_type&&!e.delivery.take_store_id)return T({title:"请选择自提点",icon:"none"}),!1}return!0},te=()=>{S({url:"/addon/phone_shop/pages/order/detail",param:{order_id:X},mode:"redirectTo"})},le=()=>{let e={};e.delivery=n.value.delivery.delivery_type,e.type="local_delivery"==n.value.delivery.delivery_type?"location_address":"address",e.id=_.value.delivery.take_address.id,C.value.open(e)},ae=a((()=>{var e;return(null==(e=g.value)?void 0:e.couponList)||[]})),re=e=>{n.value.discount.coupon_id=e?e.id:0,W()},se=e=>{n.value.delivery.take_store_id=e&&e.store_id?e.store_id:0,W()},de=e=>{n.value.invoice=e},oe=e=>{n.value.order_key="",n.value.delivery.delivery_type=e.delivery,n.value.delivery.take_address_id=e.address_id,W()};return(e,t)=>{const l=h,a=$,S=k,T=r(s("u--image"),R),L=r(s("u-alert"),I),J=E,M=j,H=r(s("u-tabbar"),K),W=r(s("pay"),D);return d(),o(l,{style:A(e.themeColor())},{default:i((()=>[_.value?(d(),o(l,{key:0,class:"bg-[#f6f6f6] min-h-[100vh]"},{default:i((()=>[u(l,{class:"pt-[30rpx] sidebar-marign payment-bottom"},{default:i((()=>[c(" 配送方式 "),_.value.basic.has_goods_types.includes("real")&&Z.value.length?(d(),o(l,{key:0,class:"mb-[20rpx] rounded-[16rpx] bg-white"},{default:i((()=>[Z.value.length>1?(d(),o(l,{key:0,class:"rounded-tl-[16rpx] rounded-tr-[16rpx] head-tab flex items-center w-full bg-[#efefef]"},{default:i((()=>[(d(!0),f(v,null,y(Z.value,((e,t)=>(d(),o(l,{key:t,class:m(["head-tab-item flex-1 relative",{active:t===P.value}])},{default:i((()=>[u(l,{class:"h-[74rpx] relative z-10 text-center leading-[74rpx] text-[28rpx]",onClick:l=>N(e.key,t)},{default:i((()=>[p(b(e.name),1)])),_:2},1032,["onClick"]),t===P.value&&3==Z.value.length?(d(),o(a,{key:0,class:"tab-image absolute bottom-[-2rpx] h-[94rpx] w-[240rpx]",src:x(z)(`addon/phone_shop/payment/tab_${t}.png`),mode:"aspectFit"},null,8,["src"])):t===P.value&&2==Z.value.length?(d(),o(a,{key:1,class:"tab-img absolute bottom-[-2rpx] h-[95rpx] w-[354rpx]",src:x(z)(`addon/phone_shop/payment/tabstyle_${t}.png`),mode:"aspectFit"},null,8,["src"])):c("v-if",!0)])),_:2},1032,["class"])))),128))])),_:1})):c("v-if",!0),u(l,{class:"min-h-[140rpx] flex items-center px-[30rpx]"},{default:i((()=>[c(" 收货地址 "),["express","local_delivery"].includes(n.value.delivery.delivery_type)?(d(),o(l,{key:0,class:"w-full",onClick:le},{default:i((()=>[e.$u.test.isEmpty(_.value.delivery.take_address)?(d(),o(l,{key:1,class:"flex items-center"},{default:i((()=>[u(a,{class:"w-[26rpx] h-[30rpx] mr-[10rpx]",src:x(z)("addon/phone_shop/payment/position_02.png"),mode:"aspectFit"},null,8,["src"]),u(S,{class:"text-[26rpx]"},{default:i((()=>[p("添加收货地址")])),_:1}),u(S,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[#999] ml-auto"})])),_:1})):(d(),o(l,{key:0,class:"py-[30rpx]"},{default:i((()=>[u(l,{class:"flex items-center"},{default:i((()=>[u(a,{class:"w-[60rpx] h-[60rpx] mr-[20rpx] flex-shrink-0",src:x(z)("addon/phone_shop/payment/position_01.png"),mode:"aspectFit"},null,8,["src"]),u(l,{class:"flex flex-col overflow-hidden"},{default:i((()=>[u(S,{class:"text-[22rpx] text-[#999] truncate max-w-[536rpx]"},{default:i((()=>[p(b(_.value.delivery.take_address.full_address.split(_.value.delivery.take_address.address)[0]),1)])),_:1}),u(S,{class:"text-[32rpx] text-[#303133] mt-[16rpx] truncate max-w-[536rpx]"},{default:i((()=>[p(b(_.value.delivery.take_address.address),1)])),_:1})])),_:1}),u(S,{class:"ml-auto nc-iconfont nc-icon-youV6xx text-[26rpx] text-[#999]"})])),_:1}),u(l,{class:"flex items-center text-[24rpx] text-[#666] mt-[20rpx]"},{default:i((()=>[u(S,{class:"mr-[16rpx]"},{default:i((()=>[p(b(_.value.delivery.take_address.name),1)])),_:1}),u(S,null,{default:i((()=>[p(b(x(O)(_.value.delivery.take_address.mobile)),1)])),_:1})])),_:1})])),_:1}))])),_:1})):c("v-if",!0),c(" 自提点 "),"store"==n.value.delivery.delivery_type?(d(),o(l,{key:1,class:"flex items-center w-full",onClick:t[0]||(t[0]=e=>w.value.open())},{default:i((()=>[e.$u.test.isEmpty(_.value.delivery.take_store)?(d(),o(l,{key:1,class:"flex items-center w-full"},{default:i((()=>[u(a,{class:"w-[26rpx] h-[30rpx] mr-[10rpx]",src:x(z)("addon/phone_shop/payment/position_02.png"),mode:"aspectFit"},null,8,["src"]),u(S,{class:"text-[26rpx]"},{default:i((()=>[p("请选择自提点")])),_:1}),u(S,{class:"ml-auto nc-iconfont nc-icon-youV6xx text-[26rpx] text-gray-subtitle"})])),_:1})):(d(),o(l,{key:0,class:"py-[24rpx] w-full"},{default:i((()=>[u(l,{class:"flex items-center mb-[12rpx]"},{default:i((()=>[u(l,{class:"flex flex-col"},{default:i((()=>[u(l,{class:"text-[32rpx] text-[#303133] mb-[16rpx]"},{default:i((()=>[p(b(_.value.delivery.take_store.store_name),1)])),_:1}),u(l,{class:"text-[22rpx] text-[#666]"},{default:i((()=>[p(b(_.value.delivery.take_store.full_address),1)])),_:1})])),_:1}),u(S,{class:"ml-auto nc-iconfont nc-icon-youV6xx text-[26rpx] text-gray-subtitle"})])),_:1}),u(l,{class:"text-[22rpx] text-[#666] mb-[12rpx]"},{default:i((()=>[p("手机号："+b(_.value.delivery.take_store.store_mobile),1)])),_:1}),u(l,{class:"text-[22rpx] text-[#666]"},{default:i((()=>[p("营业时间："+b(_.value.delivery.take_store.trade_time),1)])),_:1})])),_:1}))])),_:1})):c("v-if",!0)])),_:1})])),_:1})):c("v-if",!0),_.value.basic.has_goods_types.includes("real")&&!Z.value.length?(d(),o(l,{key:1,class:"mb-[20rpx] rounded-[16rpx] bg-white p-[24rpx] py-[40rpx]"},{default:i((()=>[V("p",{class:"text-[26rpx] text-gray-subtitle"},"商家尚未配置配送方式")])),_:1})):c("v-if",!0),u(l,{class:"mb-[20rpx] p-[30rpx] rounded-[16rpx] bg-white"},{default:i((()=>[u(l,{class:"mb-[30rpx]"},{default:i((()=>[(d(!0),f(v,null,y(_.value.goods_data,((e,t,r)=>(d(),o(l,{class:m(["flex",{"pb-[40rpx]":r+1!=Object.keys(_.value.goods_data).length}]),key:r},{default:i((()=>[u(T,{class:"overflow-hidden",width:"170rpx",height:"170rpx",radius:"10rpx",src:x(z)(e.sku_image),model:"aspectFill"},{error:i((()=>[u(a,{class:"w-[170rpx] h-[170rpx] rounded-[10rpx] overflow-hidden",src:x(z)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["src"]),u(l,{class:"flex flex-1 w-0 flex-col justify-between ml-[16rpx]"},{default:i((()=>[u(l,{class:"line-normal"},{default:i((()=>[u(l,{class:"truncate text-[#303133] text-[28rpx] leading-[32rpx] font-400"},{default:i((()=>[p(b(e.goods.goods_name),1)])),_:2},1024),e.sku_no?(d(),o(l,{key:0,class:"truncate text-[#303133] text-[22rpx] leading-[32rpx] font-400"},{default:i((()=>[p(" sn:"+b(e.sku_no),1)])),_:2},1024)):c("v-if",!0),e.sku_name?(d(),o(l,{key:1,class:"mt-[14rpx] flex"},{default:i((()=>[u(S,{class:"truncate bg-[#F2F2F2] px-[18rpx] py-[2rpx] rounded-[20rpx] text-[22rpx] text-[#666] leading-[28rpx]"},{default:i((()=>[p(b(e.sku_name),1)])),_:2},1024)])),_:2},1024)):c("v-if",!0)])),_:2},1024),u(l,{class:"alert-wrap mt-[6rpx]"},{default:i((()=>[e.not_support_delivery?(d(),o(L,{key:0,type:"error",description:"该商品不支持当前所选配送方式",class:"leading-[32rpx] !inline-block",fontSize:"12"})):c("v-if",!0)])),_:2},1024),u(l,{class:"flex justify-between items-center"},{default:i((()=>[u(l,{class:"text-[var(--price-text-color)] flex items-baseline price-font"},{default:i((()=>[u(S,{class:"text-[26rpx] font-500"},{default:i((()=>[p("￥")])),_:1}),u(S,{class:"text-[36rpx] font-500"},{default:i((()=>[p(b(parseFloat(e.price).toFixed(2).split(".")[0]),1)])),_:2},1024),u(S,{class:"text-[24rpx] font-500"},{default:i((()=>[p("."+b(parseFloat(e.price).toFixed(2).split(".")[1]),1)])),_:2},1024)])),_:2},1024),u(l,{class:"font-400 text-[28rpx] text-[#303133]"},{default:i((()=>[u(S,null,{default:i((()=>[p("x")])),_:1}),u(S,null,{default:i((()=>[p(b(e.num),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class"])))),128))])),_:1}),c(" 买家留言 "),u(l,{class:"bg-white flex items-center leading-[30rpx]"},{default:i((()=>[u(l,{class:"text-[26rpx] font-400 w-[150rpx] text-[#303133]"},{default:i((()=>[p("买家留言")])),_:1}),u(l,{class:"flex-1 text-[#303133]"},{default:i((()=>[u(J,{type:"text",modelValue:n.value.member_remark,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value.member_remark=e),class:"text-right text-[26rpx]",maxlength:"50",placeholder:"请输入留言信息给卖家","placeholder-class":"text-[#999]"},null,8,["modelValue"])])),_:1}),u(S,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[#999]"})])),_:1}),c(" 发票 "),B.value&&B.value.invoiceOpen?(d(),o(l,{key:0,class:"flex items-center text-[#303133] leading-[30rpx] mt-[30rpx]",onClick:t[2]||(t[2]=e=>B.value.open())},{default:i((()=>[u(l,{class:"text-[26rpx] font-400 w-[150rpx] text-[#303133]"},{default:i((()=>[p("发票信息")])),_:1}),u(l,{class:"flex-1 w-0 text-right truncate"},{default:i((()=>[u(S,{class:"text-[26rpx]"},{default:i((()=>[p(b(n.value.invoice.header_name||"不需要发票"),1)])),_:1})])),_:1}),u(S,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[#999]"})])),_:1})):c("v-if",!0)])),_:1}),g.value&&x(ae).length?(d(),o(l,{key:2,class:"rounded-[16rpx] bg-white mb-[20rpx] overflow-hidden"},{default:i((()=>[c(" 优惠券 "),x(ae).length?(d(),o(l,{key:0,class:"p-[30rpx] flex items-center leading-[30rpx]",onClick:t[3]||(t[3]=e=>g.value.open(n.value.discount.coupon_id))},{default:i((()=>[u(l,{class:"text-[26rpx] w-[150rpx] text-[#303133] flex-shrink-0"},{default:i((()=>[p("优惠券")])),_:1}),u(l,{class:"flex-1 flex justify-end truncate"},{default:i((()=>[_.value.discount&&_.value.discount.coupon?(d(),o(S,{key:0,class:"text-[var(--primary-color)] font-500 text-[26rpx] truncate"},{default:i((()=>[p(b(_.value.discount.coupon.title),1)])),_:1})):(d(),o(S,{key:1,class:"text-[26rpx] text-gray-subtitle"},{default:i((()=>[p("请选择优惠券")])),_:1}))])),_:1}),u(S,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[#999]"})])),_:1})):c("v-if",!0)])),_:1})):c("v-if",!0),u(l,{class:"p-[30rpx] rounded-[16rpx] bg-white"},{default:i((()=>[u(l,{class:"text-[32rpx] font-500 text-[#303133] leading-[38rpx]"},{default:i((()=>[p("价格明细")])),_:1}),u(l,{class:"flex items-center mt-[25rpx] text-[#303133]"},{default:i((()=>[u(l,{class:"text-[26rpx] w-[150rpx] leading-[30rpx] text-[#303133] font-400"},{default:i((()=>[p("商品金额")])),_:1}),u(l,{class:"flex-1 w-0 text-right price-font"},{default:i((()=>[u(S,{class:"text-[32rpx]"},{default:i((()=>[p("￥")])),_:1}),u(S,{class:"text-[32rpx]"},{default:i((()=>[p(b(parseFloat(_.value.basic.goods_money).toFixed(2).split(".")[0]),1)])),_:1}),u(S,{class:"text-[32rpx]"},{default:i((()=>[p("."+b(parseFloat(_.value.basic.goods_money).toFixed(2).split(".")[1]),1)])),_:1})])),_:1})])),_:1}),_.value.basic.delivery_money?(d(),o(l,{key:0,class:"flex items-center mt-[25rpx]"},{default:i((()=>[u(l,{class:"text-[26rpx] w-[150rpx] leading-[30rpx] text-[#303133] font-400"},{default:i((()=>[p("配送费用")])),_:1}),u(l,{class:"flex-1 w-0 text-right price-font text-[26rpx]"},{default:i((()=>[u(S,{class:"text-[26rpx]"},{default:i((()=>[p("￥")])),_:1}),u(S,{class:"text-[26rpx]"},{default:i((()=>[p(b(parseFloat(_.value.basic.delivery_money).toFixed(2).split(".")[0]),1)])),_:1}),u(S,{class:"text-[26rpx]"},{default:i((()=>[p("."+b(parseFloat(_.value.basic.delivery_money).toFixed(2).split(".")[1]),1)])),_:1})])),_:1})])),_:1})):c("v-if",!0),_.value.basic.discount_money?(d(),o(l,{key:1,class:"flex items-center mt-[25rpx] text-[#303133]"},{default:i((()=>[u(l,{class:"text-[26rpx] w-[150rpx] leading-[30rpx] text-[#303133] font-400"},{default:i((()=>[p("优惠金额")])),_:1}),u(l,{class:"flex-1 w-0 text-right text-[var(--price-text-color)] price-font"},{default:i((()=>[u(S,{class:"text-[26rpx]"},{default:i((()=>[p("-￥")])),_:1}),u(S,{class:"text-[26rpx]"},{default:i((()=>[p(b(parseFloat(_.value.basic.discount_money).toFixed(2).split(".")[0]),1)])),_:1}),u(S,{class:"text-[26rpx]"},{default:i((()=>[p("."+b(parseFloat(_.value.basic.discount_money).toFixed(2).split(".")[1]),1)])),_:1})])),_:1})])),_:1})):c("v-if",!0)])),_:1})])),_:1}),u(H,{fixed:!0,placeholder:!0,safeAreaInsetBottom:!0,zIndex:"10"},{default:i((()=>[u(l,{class:"flex-1 flex items-center justify-between"},{default:i((()=>[u(l,{class:"whitespace-nowrap px-[30rpx]"},{default:i((()=>[u(S,{class:"text-[28rpx] text-[#303133] leading-[32rpx]"},{default:i((()=>[p("合计：")])),_:1}),u(S,{class:"text-[26rpx] font-500 text-[var(--price-text-color)] price-font leading-[30rpx]"},{default:i((()=>[p("￥")])),_:1}),u(S,{class:"text-[40rpx] font-500 text-[var(--price-text-color)] price-font leading-[46rpx]"},{default:i((()=>[p(b(parseFloat(_.value.basic.order_money).toFixed(2).split(".")[0]),1)])),_:1}),u(S,{class:"text-[24rpx] font-500 text-[var(--price-text-color)] price-font leading-[46rpx]"},{default:i((()=>[p("."+b(parseFloat(_.value.basic.order_money).toFixed(2).split(".")[1]),1)])),_:1})])),_:1}),u(M,{class:"primary-btn-bg !border-[0] rounded-[33rpx] text-[#fff] w-[180rpx] h-[66rpx] text-[28rpx] leading-[66rpx] m-0 mr-[30rpx]","hover-class":"none",onClick:Y},{default:i((()=>[p("提交订单")])),_:1})])),_:1})])),_:1}),c(" 选择优惠券 "),u(x(q),{"order-key":n.value.order_key,ref_key:"couponRef",ref:g,onConfirm:re},null,8,["order-key"]),c(" 选择自提点 "),u(x(Q),{ref_key:"storeRef",ref:w,onConfirm:se},null,512),c(" 发票 "),u(x(U),{ref_key:"invoiceRef",ref:B,onConfirm:de},null,512),c(" 地址 "),u(x(G),{ref_key:"addressRef",ref:C,onConfirm:oe},null,512),u(W,{ref_key:"payRef",ref:F,onClose:te},null,512)])),_:1})):c("v-if",!0)])),_:1},8,["style"])}}}),[["__scopeId","data-v-61133838"]]);export{H as default};
