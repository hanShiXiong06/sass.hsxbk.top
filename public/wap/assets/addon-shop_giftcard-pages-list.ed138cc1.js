import{bG as e,d as a,r as t,p as s,x as l,o as r,c as o,w as d,b as c,U as n,ad as i,V as u,f as p,u as f,n as m,ae as v,af as _,i as g,ac as h,g as x,h as b,W as y,y as j,z as k,A as w,E as F,a as C,B as E,D as z,_ as I}from"./index-71c7df08.js";import{_ as M}from"./tabbar.a37cc2d9.js";import{a as U}from"./giftcard.48be66f9.js";import{M as S}from"./mescroll-body.49de0f6f.js";import{M as V}from"./mescroll-empty.95b8c17e.js";import{u as D}from"./useMescroll.26ccf5de.js";import"./cloneDeep.77735539.js";import"./mescroll-i18n.00218d15.js";/* empty css                                                                       */const O=I(a({__name:"list",setup(a){const{mescrollInit:I,downCallback:O,getMescroll:R}=D(_,v),W=t([]),A=t(!0),B=t(!1),G=t(""),N=t([]);s((e=>{Q()})),l((()=>{R()&&R().resetUpScroll()}));const P=e=>{A.value=!0;let a={page:e.num,limit:e.size,category_id:G.value};U(a).then((a=>{let t=a.data.data;1==e.num&&(W.value=[]),W.value=W.value.concat(t),e.endSuccess(t.length),A.value=!1})).catch((()=>{A.value=!1,e.endErr()}))},Q=()=>{B.value=!1,N.value=[];N.value.push({category_name:"全部",category_id:""}),e.get("shop_giftcard/category").then((e=>{Object.values(e.data).forEach(((e,a)=>{N.value.push(e)})),B.value=!0})).catch((()=>{B.value=!0}))},q=e=>{let a="";return a="balance"==e.card_right_type?"addon/shop_giftcard/diy/index/value_card.jpg":"addon/shop_giftcard/diy/index/redemption_card.jpg",a};return(e,a)=>{const t=g,s=h,l=E,v=z,_=x(b("tabbar"),M);return r(),o(t,{class:"bg-[#f8f8f8] min-h-[100vh] giftcard-list",style:m(e.themeColor())},{default:d((()=>[B.value?(r(),o(t,{key:0,class:"fixed left-0 top-0 right-0 z-10"},{default:d((()=>[c(s,{"scroll-x":!0,class:"tab-style-2"},{default:d((()=>[c(t,{class:"tab-content"},{default:d((()=>[(r(!0),n(u,null,i(N.value,((e,a)=>(r(),o(t,{class:y(["tab-items mx-[20rpx]",{"class-select":G.value===e.category_id}]),onClick:a=>{return t=e.category_id,G.value=t,W.value=[],void R().resetUpScroll();var t}},{default:d((()=>[j(k(e.category_name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1})):p("v-if",!0),c(S,{ref:"mescrollRef",top:"88rpx",onInit:f(I),down:{use:!1},onUp:P},{default:d((()=>[W.value.length?(r(),o(t,{key:0,class:"sidebar-margin pt-[var(--top-m)] flex justify-between flex-wrap"},{default:d((()=>[(r(!0),n(u,null,i(W.value,((e,a)=>(r(),o(t,{class:"flex flex-col template-item rounded-[var(--goods-rounded-big)] overflow-hidden bg-[#fff] box-border border-[2rpx] border-solid border-[#F8F8F8] mb-[var(--top-m)]",key:a,onClick:w((a=>{C({url:"/addon/shop_giftcard/pages/detail",param:{giftcard_id:e.giftcard_id}})}),["stop"])},{default:d((()=>[e.cover?(r(),o(l,{key:0,class:"w-[100%] h-[210rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:f(F)(e.cover?e.cover.split(",")[0]:""),onError:a=>e.cover=q(e),mode:"aspectFill"},null,8,["src","onError"])):(r(),o(l,{key:1,class:"w-[100%] h-[210rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:f(F)(q(e)),mode:"aspectFill"},null,8,["src"])),c(t,{class:"flex justify-between h-[80rpx] items-center px-[var(--pad-sidebar-m)]"},{default:d((()=>[c(t,{class:"max-w-[250rpx] text-[28rpx] font-400 truncate text-[#303133]"},{default:d((()=>[j(k(e.card_name),1)])),_:2},1024),c(v,{class:y(["text-[30rpx] iconfont",{"iconchuzhikaV6mm text-[#EF000C]":"balance"==e.card_right_type,"iconduihuankaV6mm-1 text-[#FF7700]":"goods"==e.card_right_type}])},null,8,["class"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):p("v-if",!0),W.value.length||A.value?p("v-if",!0):(r(),o(V,{key:1,option:{tip:"暂无礼品卡",icon:f(F)("addon/shop_giftcard/empty.png")}},null,8,["option"]))])),_:1},8,["onInit"]),c(_)])),_:1},8,["style"])}}}),[["__scopeId","data-v-1465efb0"]]);export{O as default};
