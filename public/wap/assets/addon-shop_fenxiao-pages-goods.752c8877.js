import{d as e,l as a,j as o,r as s,p as r,o as l,c as t,w as i,b as d,n as p,u as n,O as u,a6 as c,P as m,f as x,a7 as f,a8 as g,i as _,g as v,h,E as b,Q as y,y as j,z as k,A as w,a as P,B as C,D as F}from"./index-9317da28.js";import{_ as I}from"./u--image.5461b7b7.js";import{M as S}from"./mescroll-body.c2f6fcce.js";import{M as U}from"./mescroll-empty.82e9c349.js";import{u as M}from"./useMescroll.26ccf5de.js";import{e as z}from"./fenxiao.4ded0069.js";import{_ as E}from"./share-poster.025b3e61.js";import{_ as D}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.74ac23f6.js";import"./u-icon.5e775659.js";import"./u-transition.65be38eb.js";import"./mescroll-i18n.f3c5a2b0.js";import"./u-popup.1f2ebcae.js";import"./u-safe-bottom.3546c5bb.js";const O=D(e({__name:"goods",setup(e){const{mescrollInit:D,downCallback:O,getMescroll:Q}=M(g,f),R=a(),A=o((()=>R.info)),B=s([]),N=s(!0);s(null),r((()=>{}));const T=e=>{let a={page:e.num,limit:e.size};N.value=!0,z(a).then((a=>{let o=a.data.data;1==e.num&&(B.value=[]),B.value=B.value.concat(o),N.value=!1,e.endSuccess(o.length)})).catch((()=>{N.value=!1,e.endErr()}))},V=s(null),q=s(""),G=s("");let H={};const J=e=>{H.sku_id=e.goodsSku.sku_id,A.value&&A.value.member_id&&(H.member_id=A.value.member_id),(e=>{G.value="/wap/addon/shop/pages/goods/detail",q.value="?goods_id="+e.goods_id,A.value&&A.value.member_id&&(q.value+="&mid="+A.value.member_id)})(e),V.value.openShare()};return(e,a)=>{const o=_,s=C,r=v(h("u--image"),I),f=F;return l(),t(o,{class:"bg-[var(--page-bg-color)] min-h-[100vh]",style:p(e.themeColor())},{default:i((()=>[d(S,{ref:"mescrollRef",onInit:n(D),onUp:T,down:{use:!1}},{default:i((()=>[d(o,{class:"w-[100%] h-[340rpx]",style:p({backgroundImage:"url("+n(b)("addon/shop_fenxiao/fenxiao_goods_bg.png")+")","background-size":"cover"})},null,8,["style"]),(l(!0),u(m,null,c(B.value,((e,a)=>(l(),t(o,{class:y(["bg-white flex card-template sidebar-marign rounded-[var(--rounded-big)] overflow-hidden mt-[var(--top-m)]",{"mb-[20rpx]":a+1==B.value.length}]),key:a,onClick:a=>{P({url:"/addon/shop/pages/goods/detail",param:{goods_id:e.goods_id}})}},{default:i((()=>[d(o,{class:"w-[190rpx] h-[190rpx] rounded-[var(--goods-rounded-big)] overflow-hidden"},{default:i((()=>[d(r,{width:"190rpx",height:"190rpx",src:n(b)(e.goods_cover_thumb_mid?e.goods_cover_thumb_mid:""),model:"aspectFill"},{error:i((()=>[d(s,{class:"w-[190rpx] h-[190rpx]",src:n(b)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["src"])])),_:2},1024),d(o,{class:"flex-1 flex flex-col ml-[20rpx] py-[4rpx]"},{default:i((()=>[d(o,{class:"text-[28rpx] text-[#333] leading-[40rpx] multi-hidden mb-[10rpx]"},{default:i((()=>[j(k(e.goods_name),1)])),_:2},1024),d(o,{class:"mt-auto flex justify-between items-end"},{default:i((()=>[d(o,{class:"text-[var(--price-text-color)] price-font flex items-baseline"},{default:i((()=>[d(f,{class:"text-[24rpx] font-500"},{default:i((()=>[j("￥")])),_:1}),d(f,{class:"text-[40rpx] font-500"},{default:i((()=>[j(k(parseFloat(e.goodsSku.price).toFixed(2).split(".")[0]),1)])),_:2},1024),d(f,{class:"text-[24rpx] font-500"},{default:i((()=>[j("."+k(parseFloat(e.goodsSku.price).toFixed(2).split(".")[1]),1)])),_:2},1024)])),_:2},1024),d(o,{onClick:w((a=>J(e)),["stop"]),class:"text-[24rpx] box-border border-[2rpx] border-solid border-[var(--price-text-color)] px-[16rpx] h-[54rpx] flex-center rounded-[50rpx] text-[var(--price-text-color)]"},{default:i((()=>[d(f,{class:"nc-iconfont nc-icon-fenxiangV6xx-1 mr-[6rpx] !text-[26rpx]"}),d(f,null,{default:i((()=>[j("赚"+k(e.commission)+"元",1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128)),B.value.length||N.value?x("v-if",!0):(l(),t(U,{key:0,option:{icon:n(b)("static/resource/images/empty.png")}},null,8,["option"]))])),_:1},8,["onInit"]),d(E,{ref_key:"sharePosterRef",ref:V,posterType:"fenxiao_goods",posterParam:n(H),copyUrlParam:q.value,copyUrl:G.value},null,8,["posterParam","copyUrlParam","copyUrl"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-573ea620"]]);export{O as default};
