import{d as e,r as a,p as t,t as r,a as l,s,H as d,o,c as i,w as u,b as c,W as p,y as x,z as n,u as f,f as _,A as m,n as v,c0 as g,k as y,D as b,i as h,B as k,g as w,h as j,C as F,bt as C,E as T,F as z,bx as V,bl as E,_ as L}from"./index-71c7df08.js";import{_ as N}from"./pay.6aa36878.js";import{_ as A}from"./loading-page.vue_vue_type_script_setup_true_lang.c7dc2256.js";import{b as B,o as R}from"./order.9eeece48.js";import"./pay.4cfa8889.js";const D=L(e({__name:"order_detail",setup(e){const L=a({}),D=a(!0),H=a("");a(null),t((e=>{if(e.order_id){if(!s())return d().setLoginBack({url:"/addon/shop_giftcard/pages/order_detail",param:{order_id:e.order_id}}),!1;H.value=e.order_id,I(H.value)}else r({title:"礼品卡订单不存在",icon:"none"}),setTimeout((()=>{l({url:"/addon/shop_giftcard/pages/index",mode:"reLaunch"})}),600)}));const I=e=>{D.value=!0,B(e).then((e=>{L.value=e.data,D.value=!1})).catch((()=>{D.value=!1}))},M=a(null),W=(e="")=>{var a;"pay"==e?null==(a=M.value)||a.open(L.value.order_type,L.value.order_id,`/addon/shop_giftcard/pages/order_detail?order_id=${L.value.order_id}`):"myCard"==e?l({url:"/addon/shop_giftcard/pages/my_card_list",param:{order_id:L.value.order_id}}):"close"==e?$():"index"==e&&l({url:"/addon/shop_giftcard/pages/index",mode:"reLaunch"})},$=()=>{g({title:"提示",content:"您确定要关闭该订单吗？",confirmColor:y().themeColor["--primary-color"],success:e=>{e.confirm&&R(L.value.order_id).then((e=>{I(L.value.order_id)}))}})};return(e,a)=>{const t=b,r=h,s=k,d=w(j("u--image"),E),g=F,y=C("logistics-tracking"),B=w(j("pay"),N),R=w(j("loading-page"),A);return o(),i(r,{style:v(e.themeColor())},{default:u((()=>[D.value?_("v-if",!0):(o(),i(r,{key:0,class:"bg-[var(--page-bg-color)] min-h-screen overflow-hidden"},{default:u((()=>[D.value?_("v-if",!0):(o(),i(r,{key:0,class:"pb-20rpx"},{default:u((()=>[c(r,{class:"sidebar-margin card-template mt-[var(--top-m)]"},{default:u((()=>[c(r,{class:"flex justify-between items-center"},{default:u((()=>[c(r,{class:"text-[#303133] text-[26rpx] font-400 leading-[36rpx]"},{default:u((()=>[c(t,{class:p(["iconfont text-[34rpx]",{"iconchuzhikaV6mm text-[#EF000C]":"balance"==L.value.card_right_type,"iconduihuankaV6mm-1 text-[#FF7700]":"goods"==L.value.card_right_type}])},null,8,["class"]),c(t,{class:"ml-[12rpx] text-[28rpx]"},{default:u((()=>[x(n(L.value.card_right_type_name),1)])),_:1})])),_:1}),c(r,{class:p(["text-[#303133] text-[26rpx] leading-[34rpx]",{"text-primary":1==L.value.status,"!text-[var(--text-color-light9)]":-1==L.value.status}])},{default:u((()=>[x(n(L.value.status_name),1)])),_:1},8,["class"])])),_:1}),c(r,{class:"order-goods-item flex justify-between flex-wrap mt-[30rpx]"},{default:u((()=>[c(r,{class:"w-[240rpx] h-[170rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",onClick:a[0]||(a[0]=e=>{return a=L.value.giftcard_id,void l({url:"/addon/shop_giftcard/pages/detail",param:{giftcard_id:a}});var a})},{default:u((()=>[c(d,{radius:"var(--goods-rounded-big)",width:"279rpx",height:"170rpx",src:f(T)(L.value.card_cover?L.value.card_cover:""),model:"aspectFill"},{error:u((()=>["balance"==L.value.card_right_type?(o(),i(s,{key:0,class:"w-[240rpx] h-[170rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:f(T)("addon/shop_giftcard/diy/index/value_card.jpg"),mode:"aspectFill"},null,8,["src"])):(o(),i(s,{key:1,class:"w-[240rpx] h-[170rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:f(T)("addon/shop_giftcard/diy/index/redemption_card.jpg"),mode:"aspectFill"},null,8,["src"]))])),_:1},8,["src"])])),_:1}),c(r,{class:"ml-[20rpx] flex flex-1 flex-col justify-between"},{default:u((()=>[c(r,null,{default:u((()=>[c(r,{class:"text-[28rpx] max-w-[402rpx] truncate leading-[40rpx] text-[#333]"},{default:u((()=>[x(n(L.value.body),1)])),_:1}),"balance"==L.value.card_right_type?(o(),i(r,{key:0,class:"text-[26rpx] text-[var(--text-color-light9)] truncate max-w-[402rpx] leading-[28rpx] mt-[14rpx]"},{default:u((()=>[x(n(L.value.balance)+"元储值卡",1)])),_:1})):_("v-if",!0)])),_:1}),c(r,{class:"flex justify-between items-baseline leading-[28rpx] text-[#333] mt-auto"},{default:u((()=>[c(r,{class:"price-font"},{default:u((()=>[c(t,{class:"text-[24rpx]"},{default:u((()=>[x("￥")])),_:1}),c(t,{class:"text-[40rpx] font-500"},{default:u((()=>[x(n(parseFloat(L.value.card_price).toFixed(2).split(".")[0]),1)])),_:1}),c(t,{class:"text-[24rpx] font-500"},{default:u((()=>[x("."+n(parseFloat(L.value.card_price).toFixed(2).split(".")[1]),1)])),_:1})])),_:1}),c(t,{class:"text-right text-[26rpx] text-[var(--text-color-light9)]"},{default:u((()=>[x("x"+n(L.value.num),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),c(r,{class:"sidebar-margin mt-[var(--top-m)] card-template"},{default:u((()=>[c(r,{class:"justify-between card-template-item"},{default:u((()=>[c(r,{class:"text-[28rpx]"},{default:u((()=>[x(n(f(z)("orderNo")),1)])),_:1}),c(r,{class:"flex items-center text-[28rpx]"},{default:u((()=>[c(t,null,{default:u((()=>[x(n(L.value.order_no),1)])),_:1}),c(t,{class:"w-[2rpx] h-[20rpx] bg-[#999] mx-[10rpx]"}),c(t,{class:"text-[#EF900A]",onClick:a[1]||(a[1]=e=>f(V)(L.value.order_no))},{default:u((()=>[x("复制")])),_:1})])),_:1})])),_:1}),L.value.out_trade_no?(o(),i(r,{key:0,class:"justify-between card-template-item"},{default:u((()=>[c(r,{class:"text-[28rpx]"},{default:u((()=>[x(n(f(z)("orderTradeNo")),1)])),_:1}),c(r,{class:"text-[28rpx]"},{default:u((()=>[x(n(L.value.out_trade_no),1)])),_:1})])),_:1})):_("v-if",!0),c(r,{class:"justify-between card-template-item"},{default:u((()=>[c(r,{class:"text-[28rpx]"},{default:u((()=>[x(n(f(z)("createTime")),1)])),_:1}),c(r,{class:"text-[28rpx]"},{default:u((()=>[x(n(L.value.create_time),1)])),_:1})])),_:1}),L.value.pay?(o(),i(r,{key:1,class:"card-template-item justify-between"},{default:u((()=>[c(r,{class:"text-[28rpx]"},{default:u((()=>[x(n(f(z)("payTypeName")),1)])),_:1}),c(r,{class:"text-[28rpx]"},{default:u((()=>[x(n(L.value.pay.type_name),1)])),_:1})])),_:1})):_("v-if",!0),L.value.pay?(o(),i(r,{key:2,class:"card-template-item justify-between"},{default:u((()=>[c(r,{class:"text-[28rpx]"},{default:u((()=>[x(n(f(z)("payTime")),1)])),_:1}),c(r,{class:"text-[28rpx]"},{default:u((()=>[x(n(L.value.pay.pay_time),1)])),_:1})])),_:1})):_("v-if",!0),c(r,{class:"card-template-item justify-between items-baseline"},{default:u((()=>[c(r,{class:"text-[28rpx]"},{default:u((()=>[x(n(f(z)("orderMoney")),1)])),_:1}),c(r,{class:"text-[var(--price-text-color)]"},{default:u((()=>[c(t,{class:"text-[22rpx] leading-[26rpx] price-font"},{default:u((()=>[x("￥")])),_:1}),c(t,{class:"text-[36rpx] font-500 leading-[40rpx] price-font"},{default:u((()=>[x(n(parseFloat(L.value.order_money).toFixed(2).split(".")[0]),1)])),_:1}),c(t,{class:"text-[22rpx] font-500 leading-[28rpx] price-font"},{default:u((()=>[x("."+n(parseFloat(L.value.order_money).toFixed(2).split(".")[1]),1)])),_:1})])),_:1})])),_:1})])),_:1}),_(" 订单留言 "),L.value.member_remark?(o(),i(r,{key:0,class:"sidebar-margin mt-[var(--top-m)] card-template"},{default:u((()=>[c(r,{class:"title"},{default:u((()=>[x("订单留言")])),_:1}),c(r,{class:"text-[28rpx] w-full break-all"},{default:u((()=>[x(n(L.value.member_remark),1)])),_:1})])),_:1})):_("v-if",!0),1==L.value.status?(o(),i(r,{key:1,class:"flex z-2 justify-between items-center bg-[#fff] fixed left-0 right-0 bottom-0 min-h-[100rpx] pl-[30rpx] pr-[20rpx] pb-ios"},{default:u((()=>[c(r,{class:"flex mr-[34rpx] flex-col justify-center items-center",onClick:a[2]||(a[2]=e=>W("index"))},{default:u((()=>[c(r,{class:"nc-iconfont nc-icon-shouyeV6xx11 text-[36rpx]"}),c(t,{class:"text-[20rpx] mt-[10rpx]"},{default:u((()=>[x(n(f(z)("index")),1)])),_:1})])),_:1}),c(r,{class:"flex items-center"},{default:u((()=>[c(r,{class:"text-[26rpx] font-500 leading-[70rpx] h-[70rpx] w-[190rpx] text-center border-[2rpx] border-solid border-[var(--text-color-light9)] rounded-full text-[var(--text-color-light6)] box-border",onClick:a[3]||(a[3]=m((e=>W("close")),["stop"]))},{default:u((()=>[x(n(f(z)("orderClose")),1)])),_:1}),c(g,{class:"ml-[20rpx] w-[190rpx] h-[70rpx] font-500 text-[26rpx] leading-[70rpx] !text-[#fff] m-0 rounded-full primary-btn-bg remove-border","hover-class":"none",onClick:a[4]||(a[4]=e=>W("pay"))},{default:u((()=>[x(n(f(z)("topay")),1)])),_:1})])),_:1})])),_:1})):_("v-if",!0),2==L.value.status?(o(),i(r,{key:2,class:"flex z-2 justify-between items-center bg-[#fff] fixed left-0 right-0 bottom-0 min-h-[100rpx] pl-[30rpx] pr-[20rpx] pb-ios"},{default:u((()=>[L.value.have_count>0?(o(),i(r,{key:0,class:"flex-1 box-border h-[70rpx] flex-center text-center text-[#fff] primary-btn-bg rounded-full",onClick:a[5]||(a[5]=e=>W("myCard"))},{default:u((()=>[c(t,{class:"iconfont iconkabaoV6mm text-[26rpx]"}),c(t,{class:"ml-[16rpx] text-[26rpx]"},{default:u((()=>[x("查看卡包")])),_:1})])),_:1})):(o(),i(r,{key:1,class:"flex-1 box-border h-[70rpx] flex-center !text-[var(--text-color-light9)] !bg-[#F7F7F7] m-0 rounded-full border-solid border-[2rpx] border-[#eee]"},{default:u((()=>[x(" 该卡已转赠 ")])),_:1}))])),_:1})):_("v-if",!0)])),_:1})),-1!=L.value.status?(o(),i(r,{key:1,class:"tab-bar-placeholder"})):_("v-if",!0),c(y,{ref:"materialRef"},null,512)])),_:1})),c(B,{ref_key:"payRef",ref:M},null,512),c(R,{loading:D.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-54f6d8d5"]]);export{D as default};
