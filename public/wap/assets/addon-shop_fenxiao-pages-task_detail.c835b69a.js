import{d as e,r as t,p as a,j as l,o as s,c as r,w as u,U as d,b as o,f as i,n as m,u as n,y as _,z as v,W as x,V as c,a as p,D as f,i as k,B as b,g,h as y,E as h,a7 as w,F as j,G as D,_ as F}from"./index-71c7df08.js";import{_ as T}from"./loading-page.vue_vue_type_script_setup_true_lang.c7dc2256.js";import{b as z}from"./task.9ca4bdcd.js";import{t as O}from"./topTabbar.cb42d19f.js";const C=F(e({__name:"task_detail",setup(e){O().setTopTabbarParam({title:"任务奖励详情"});const F=t({});a((e=>{E(Number(e.id))}));const C=t(!0),E=e=>{z(e).then((e=>{F.value=e.data,1===F.value.status?(F.value.time=new Date(F.value.start_time).getTime()-(new Date).getTime(),F.value.time=F.value.time<0?"":F.value.time):2===F.value.status&&(2!=F.value.time_type?(F.value.time=new Date(F.value.end_time).getTime()-(new Date).getTime(),F.value.time=F.value.time<0?"":F.value.time):F.value.time=""),C.value=!1})).catch((()=>{C.value=!1}))};let I={};const N=l((()=>Object.keys(I).length?D(Number(I.height))+D(I.top)+50+"rpx;":"50rpx"));t({});const S=()=>{p({url:"/addon/shop_fenxiao/pages/task_rewards_detail",param:{id:F.value.id}})};return(e,t)=>{const a=f,l=k,p=b,D=g(y("loading-page"),T);return s(),r(l,{class:"bg-[var(--page-bg-color)] min-h-[100vh] box-border",style:m(e.themeColor())},{default:u((()=>[Object.keys(F.value).length?(s(),d(c,{key:0},[o(l,{class:"w-[100%] h-[375rpx] relative background-size box-border py-[24rpx] px-[var(--sidebar-m)]",style:m({backgroundImage:"url("+n(h)("addon/shop_fenxiao/task_detail_wechat.png")+")"})},{default:u((()=>[i(" 跳转个任务奖励明细 "),o(l,{class:"side-tab",style:m({top:n(N)}),onClick:S},{default:u((()=>[o(a,{class:"iconfont iconlishijiluV6xx icon"}),o(a,{class:"desc"},{default:u((()=>[_("奖励明细")])),_:1})])),_:1},8,["style"])])),_:1},8,["style"]),o(l,{class:"px-[var(--sidebar-m)] pb-[20rpx] mt-[-75rpx]"},{default:u((()=>[i(" 活动未开始 "),1===F.value.status?(s(),r(l,{key:0,class:"bg-[#fff] rounded-[var(--rounded-big)] py-[60rpx] text-center relative mb-[var(--top-m)]"},{default:u((()=>[o(l,{class:"text-[#333] text-[30rpx] font-500 mb-[30rpx]"},{default:u((()=>[_("该任务还未开始")])),_:1}),o(l,{class:"text-[var(--text-color-light9)] text-[26rpx]"},{default:u((()=>[_("请您耐心等待...")])),_:1})])),_:1})):i("v-if",!0),1!==F.value.status?(s(),r(l,{key:1,class:"card-template relative"},{default:u((()=>[o(l,{class:"text-[30rpx] font-500 text-[#333] leading-[45rpx] multi-hidden text-center mb-[77rpx]"},{default:u((()=>[_(v(F.value.name),1)])),_:1}),i(" 进度条 "),o(l,{class:"relative pb-[58rpx] mb-[30rpx] mx-[30rpx]"},{default:u((()=>[o(l,{class:"w-full h-[24rpx] rounded-[12rpx] bg-[#FFF2D0] flex"},{default:u((()=>[i(" 进度条 "),o(l,{class:"h-[24rpx] rounded-[12rpx] bg-linear flex overflow-hidden",style:m({width:F.value.task_member&&F.value.task_member.task_data.show_progress.rate?F.value.task_member.task_data.show_progress.rate+"%":"24rpx"})},{default:u((()=>[F.value.task_member&&F.value.task_member.task_data.show_progress.rate?(s(),r(l,{key:0,class:"mr-[10rpx] h-[24rpx] flex-1 flex items-center justify-end box-border"},{default:u((()=>[o(a,{class:"w-[4rpx] h-[4rpx] rounded-full bg-[#fff] mr-[6rpx]"}),o(a,{class:"w-[6rpx] h-[6rpx] rounded-full bg-[#fff] mr-[6rpx]"}),o(a,{class:"w-[8rpx] h-[8rpx] rounded-full bg-[#fff]"})])),_:1})):i("v-if",!0)])),_:1},8,["style"]),i(" 总进度图标 "),o(p,{class:"w-[52rpx] h-[52rpx] align-middle absolute right-0 top-[12rpx] transform -translate-y-1/2",mode:"widthFix",src:n(h)("addon/shop_fenxiao/task_icon.png")},null,8,["src"]),i(" 总进度金额 "),o(l,{class:"money min-w-[60rpx] h-[36rpx] px-[12rpx] box-border bg-[var(--primary-color)] text-[#fff] absolute right-[26rpx] top-[-56rpx] transform translate-x-1/2 rounded-[18rpx] z-10 flex items-center"},{default:u((()=>[o(a,{class:"text-[24rpx]"},{default:u((()=>[_("￥")])),_:1}),o(a,{class:"text-[24rpx]"},{default:u((()=>{var e;return[_(v(null==(e=F.value.rules[0].reward)?void 0:e.commission),1)]})),_:1})])),_:1})])),_:1}),i(" 当前完成进度文字 "),F.value.task_member&&100!=F.value.task_member.task_data.show_progress.rate?(s(),r(l,{key:0,ref:"mytext",class:x(["absolute text-[26rpx] bottom-0 leading-[34rpx] text-[var(--primary-color)]",{" transform -translate-x-1/2":F.value.task_member&&F.value.task_member.task_data.show_progress.rate>0}]),style:m({left:F.value.task_member?F.value.task_member.task_data.show_progress.rate+"%":0})},{default:u((()=>[_(v(F.value.task_member.task_data.now_data+F.value.task_member.task_data.util),1)])),_:1},8,["class","style"])):i("v-if",!0),i(" 需完成的总进度完成 "),o(l,{ref:"overallText",class:"absolute text-[26rpx] leading-[34rpx] flex-center min-w-[100rpx] bottom-0 -right-[20rpx]"},{default:u((()=>[_(v(F.value.task_member?("元"==F.value.task_member.task_data.util?n(w)(F.value.task_member.task_data.end_data):F.value.task_member.task_data.end_data)+F.value.task_member.task_data.util:("元"==F.value.task_data.util?n(w)(F.value.task_data.end_data):F.value.task_data.end_data)+F.value.task_data.util),1)])),_:1},512)])),_:1}),F.value.task_member?(s(),r(l,{key:0,class:"bg-[#FFF8EF] rounded-[var(--goods-rounded-big)] px-[30rpx] py-[30rpx]"},{default:u((()=>[o(l,{class:"text-center text-[28rpx] font-500 mb-[40rpx]"},{default:u((()=>[_("完成进度")])),_:1}),o(l,{class:"text-[26rpx] flex-1 w-[615rpx] break-all flex items-center mb-[34rpx]"},{default:u((()=>[o(a,{class:"text-[#823D19]"},{default:u((()=>[_(v("元"==F.value.task_member.task_data.util?"完成金额：":"单"==F.value.task_member.task_data.util?"完成单数：":"推广人数"),1)])),_:1}),o(l,{class:"text-[26rpx] text-[#333]"},{default:u((()=>[_(v(F.value.task_member.task_data.title)+"已达",1),o(a,{class:"text-[var(--primary-color)]"},{default:u((()=>[_(v("元"==F.value.task_member.task_data.util?n(w)(F.value.task_member.task_data.now_data):F.value.task_member.task_data.now_data),1)])),_:1}),_(v(F.value.task_member.task_data.util),1)])),_:1})])),_:1}),o(l,{class:"text-[26rpx] flex-1 w-[615rpx] break-all flex items-center mb-[34rpx]"},{default:u((()=>[o(a,{class:"text-[#823D19]"},{default:u((()=>[_("完成次数：")])),_:1}),o(l,{class:"text-[26rpx] text-[#333]"},{default:u((()=>[o(a,{class:"text-[var(--primary-color)]"},{default:u((()=>[_(v(F.value.task_member.complete_num),1)])),_:1}),o(a,null,{default:u((()=>[_("/"+v(F.value.times?F.value.times+"次":"不限次"),1)])),_:1})])),_:1})])),_:1}),o(l,{class:"text-[26rpx] flex-1 w-[615rpx] break-all flex items-center"},{default:u((()=>[o(a,{class:"text-[#823D19]"},{default:u((()=>[_("领取奖励：")])),_:1}),o(a,{class:"text-[#333]"},{default:u((()=>{var e;return[_("累计领取"+v(F.value.task_member.complete_num)+"次奖励共计"+v(n(w)(F.value.task_member.complete_num*(null==(e=F.value.rules[0].reward)?void 0:e.commission)))+"元",1)]})),_:1})])),_:1})])),_:1})):i("v-if",!0)])),_:1})):i("v-if",!0),i(" 任务信息 "),o(l,{class:"overflow-hidden mt-[20rpx] card-template"},{default:u((()=>[o(l,{class:"title"},{default:u((()=>[_("任务信息")])),_:1}),o(l,{class:"text-[26rpx] flex-1 card-template-item"},{default:u((()=>[o(a,{class:"text-[var(--text-color-light9)]"},{default:u((()=>[_("任务内容：")])),_:1}),F.value.task_member?(s(),r(l,{key:1,class:"text-[26rpx] text-[#333]"},{default:u((()=>{var e,t,a,l,s;return[_(v(F.value.task_member.task_data.title)+"达"+v((null==(e=F.value.rules[0].condition)?void 0:e.type.includes("order_num"))?null==(t=F.value.rules[0].condition)?void 0:t.order_num:(null==(a=F.value.rules[0].condition)?void 0:a.type.includes("order_money"))?null==(l=F.value.rules[0].condition)?void 0:l.order_money:null==(s=F.value.rules[0].condition)?void 0:s.child_num)+v(F.value.task_member.task_data.util),1)]})),_:1})):(s(),r(l,{key:0,class:"text-[26rpx] text-[#333]"},{default:u((()=>{var e,t,a,l,s;return[_(v(F.value.task_data.title)+"达"+v((null==(e=F.value.rules[0].condition)?void 0:e.type.includes("order_num"))?null==(t=F.value.rules[0].condition)?void 0:t.order_num:(null==(a=F.value.rules[0].condition)?void 0:a.type.includes("order_money"))?null==(l=F.value.rules[0].condition)?void 0:l.order_money:null==(s=F.value.rules[0].condition)?void 0:s.child_num)+v(F.value.task_data.util),1)]})),_:1}))])),_:1}),o(l,{class:"text-[26rpx] flex-1 card-template-item"},{default:u((()=>[o(a,{class:"text-[var(--text-color-light9)]"},{default:u((()=>[_("任务奖励：")])),_:1}),o(a,{class:"text-[#333]"},{default:u((()=>{var e;return[_(v(n(w)(null==(e=F.value.rules[0].reward)?void 0:e.commission))+"元",1)]})),_:1})])),_:1}),1===F.value.type?(s(),r(l,{key:0,class:"text-[26rpx] flex-1 card-template-item"},{default:u((()=>[o(a,{class:"text-[var(--text-color-light9)]"},{default:u((()=>[_("参与次数：")])),_:1}),o(a,{class:"text-[#333]"},{default:u((()=>[_(v(F.value.times?F.value.times+"次":"不限次"),1)])),_:1})])),_:1})):i("v-if",!0),o(l,{class:"text-[26rpx] flex-1 card-template-item"},{default:u((()=>[o(a,{class:"text-[var(--text-color-light9)]"},{default:u((()=>[_("活动时间：")])),_:1}),o(l,{class:"text-[#333]"},{default:u((()=>[_(v(F.value.start_time?F.value.start_time.substring(0,10):"--")+" 至 "+v(1==F.value.time_type?F.value.end_time.substring(0,10):"长期有效")+"（"+v(1===F.value.status?"未开始":2===F.value.status?"已开始":"已结束")+"） ",1)])),_:1})])),_:1})])),_:1}),i(" 奖励规则 "),o(l,{class:"card-template overflow-hidden mt-[var(--top-m)]"},{default:u((()=>[o(l,{class:"title"},{default:u((()=>[_(v(n(j)("rewardRules")),1)])),_:1}),o(l,{class:"text-[26rpx] flex-1 card-template-item"},{default:u((()=>[o(a,{class:"text-[var(--text-color-light9)]"},{default:u((()=>[_("参与等级：")])),_:1}),o(a,{class:"text-[#333]"},{default:u((()=>[_(v(1==F.value.level_type?"全部等级":2==F.value.level_type&&Object.values(F.value.level_data).toString()),1)])),_:1})])),_:1}),o(l,{class:"text-[26rpx] flex-1 card-template-item"},{default:u((()=>[o(a,{class:"text-[var(--text-color-light9)]"},{default:u((()=>[_("奖励指标：")])),_:1}),o(a,{class:"text-[#333]"},{default:u((()=>[_(v(F.value.task_member?F.value.task_member.task_data.title:F.value.task_data.title),1)])),_:1})])),_:1}),F.value.task_member?(s(),r(l,{key:1,class:"text-[26rpx] card-template-item"},{default:u((()=>[o(a,{class:"text-[var(--text-color-light9)]"},{default:u((()=>[_("奖励说明：")])),_:1}),o(a,{class:"text-[#333]"},{default:u((()=>{var e,t,a,l,s,r;return[_(v(F.value.task_member.task_data.title)+"达"+v((null==(e=F.value.rules[0].condition)?void 0:e.type.includes("order_num"))?null==(t=F.value.rules[0].condition)?void 0:t.order_num:(null==(a=F.value.rules[0].condition)?void 0:a.type.includes("order_money"))?null==(l=F.value.rules[0].condition)?void 0:l.order_money:null==(s=F.value.rules[0].condition)?void 0:s.child_num)+v(F.value.task_member.task_data.util)+"即可获得"+v(n(w)(null==(r=F.value.rules[0].reward)?void 0:r.commission))+"元佣金 ",1)]})),_:1})])),_:1})):(s(),r(l,{key:0,class:"text-[26rpx] card-template-item"},{default:u((()=>[o(a,{class:"text-[var(--text-color-light9)]"},{default:u((()=>[_("奖励说明：")])),_:1}),o(a,{class:"text-[#333]"},{default:u((()=>{var e,t,a,l,s,r;return[_(v(F.value.task_data.title)+"达"+v((null==(e=F.value.rules[0].condition)?void 0:e.type.includes("order_num"))?null==(t=F.value.rules[0].condition)?void 0:t.order_num:(null==(a=F.value.rules[0].condition)?void 0:a.type.includes("order_money"))?null==(l=F.value.rules[0].condition)?void 0:l.order_money:null==(s=F.value.rules[0].condition)?void 0:s.child_num)+v(F.value.task_data.util)+"即可获得"+v(n(w)(null==(r=F.value.rules[0].reward)?void 0:r.commission))+"元佣金",1)]})),_:1})])),_:1}))])),_:1}),i(" 任务说明 "),F.value.remark?(s(),r(l,{key:2,class:"card-template overflow-hidden mt-[var(--top-m)]"},{default:u((()=>[o(l,{class:"title"},{default:u((()=>[_(v(n(j)("taskSpecification")),1)])),_:1}),o(l,{class:"text-[#333] text-[26rpx] leading-[1.6]"},{default:u((()=>[_(v(F.value.remark),1)])),_:1})])),_:1})):i("v-if",!0)])),_:1})],64)):i("v-if",!0),o(D,{loading:C.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-64aea957"]]);export{C as default};
