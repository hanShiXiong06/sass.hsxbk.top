import{d as e,r as a,p as l,F as t,O as s,o as r,c as o,w as i,b as n,A as c,u,f as p,P as d,a7 as m,Q as f,n as x,a8 as v,a9 as _,D as g,a5 as h,i as y,a6 as b,g as j,h as k,R as C,y as w,z as I,E as M,a as U}from"./index-7bf68536.js";import{_ as V}from"./u-icon.0c1c54c7.js";import{_ as z}from"./u--image.b3bf1d5c.js";import{_ as D}from"./tabbar.e049672c.js";import{a as S,b as A}from"./article.ecd97d7e.js";import{M as E}from"./mescroll-body.b6d57b41.js";import{M as F}from"./mescroll-empty.fcefb74e.js";import{u as N}from"./useMescroll.26ccf5de.js";import{_ as P}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.e46f68ef.js";import"./u-transition.cdf87992.js";import"./u-badge.d8d91719.js";import"./u-tabbar.d98653fa.js";import"./u-safe-bottom.908eeae4.js";import"./cloneDeep.77735539.js";import"./mescroll-i18n.14e7fe02.js";/* empty css                                                                       */const R=P(e({__name:"list",setup(e){const{mescrollInit:P,downCallback:R,getMescroll:H}=N(_,v),J=a([]),O=a([]),Q=a(""),T=a(""),$=a(null),q=a(!1);l((async e=>{Q.value=e.category_id||"",await S().then((e=>{const a={name:t("all"),category_id:""};J.value.push(a),J.value=J.value.concat(e.data.data)}))}));const B=e=>{q.value=!1;let a={category_id:Q.value,title:T.value,page:e.num,limit:e.size};A(a).then((a=>{let l=a.data.data;1==e.num&&(O.value=[]),O.value=O.value.concat(l),e.endSuccess(l.length),q.value=!0})).catch((()=>{q.value=!0,e.endErr()}))},G=()=>{H().resetUpScroll()};return s((()=>{setTimeout((()=>{H().optUp.textNoMore=t("end")}),500)})),(e,a)=>{const l=g,s=h,v=y,_=b,S=j(k("u-icon"),V),A=j(k("u--image"),z),N=j(k("tabbar"),D);return r(),o(v,{class:"bg-[var(--page-bg-color)] min-h-[100vh]",style:x(e.themeColor())},{default:i((()=>[n(v,{class:"fixed top-0 inset-x-0 z-10"},{default:i((()=>[n(v,{class:"px-[30rpx] bg-[#fff] h-[100rpx] flex items-center"},{default:i((()=>[n(v,{class:"flex-1 search-input"},{default:i((()=>[n(l,{onClick:c(G,["stop"]),class:"nc-iconfont nc-icon-sousuo-duanV6xx1 btn"},null,8,["onClick"]),n(s,{class:"input",maxlength:"50",type:"text",modelValue:T.value,"onUpdate:modelValue":a[0]||(a[0]=e=>T.value=e),placeholder:u(t)("searchPlaceholder"),placeholderClass:"text-[var(--text-color-light9)] text-[24rpx]","confirm-type":"search",onConfirm:G},null,8,["modelValue","placeholder"]),T.value?(r(),o(l,{key:0,class:"nc-iconfont nc-icon-cuohaoV6xx1 clear",onClick:a[1]||(a[1]=e=>T.value="")})):p("v-if",!0)])),_:1})])),_:1}),n(_,{"scroll-x":!0,"enable-flex":!0,class:"tab-style-2 -mt-[14rpx]"},{default:i((()=>[n(v,{class:"tab-content !justify-start scroll-view-wrap"},{default:i((()=>[(r(!0),d(f,null,m(J.value,((e,a)=>(r(),o(v,{class:C(["tab-items text-[28rpx] h-[90rpx] leading-[90rpx]",{"class-select":Q.value==e.category_id," mr-[50rpx]":a!=J.value.lengt-1}]),onClick:a=>{return l=e.category_id,Q.value=l,void H().resetUpScroll();var l},key:e.category_id},{default:i((()=>[w(I(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1}),n(E,{ref_key:"mescrollRef",ref:$,onInit:u(P),top:"176rpx",down:{use:!1},onUp:B},{default:i((()=>[(r(!0),d(f,null,m(O.value,((e,a)=>(r(),o(v,{key:e.id,class:"flex align-center px-[var(--pad-sidebar-m)] py-[var(--pad-top-m)] bg-[#fff] mx-[var(--sidebar-m)] my-[var(--top-m)] rounded-[var(--rounded-big)]",onClick:a=>{return l=e.id,void U({url:"/addon/cms/pages/detail",param:{id:l}});var l}},{default:i((()=>[n(A,{width:"210rpx",height:"160rpx",radius:"var(--goods-rounded-big)",class:"overflow-hidden",src:u(M)(e.image),model:"aspectFill"},{error:i((()=>[n(S,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"]),n(v,{class:"flex-1 flex flex-col my-[4rpx] ml-[20rpx]"},{default:i((()=>[n(v,{class:"text-[30rpx] leading-[1.3] multi-hidden"},{default:i((()=>[w(I(e.title),1)])),_:2},1024),n(v,{class:"text-[var(--text-color-light9)] text-[24rpx] mt-auto flex items-center justify-between"},{default:i((()=>[n(l,null,{default:i((()=>[w(I(e.create_time.replace(/\-/g,".")),1)])),_:2},1024),n(v,{class:"inline-block"},{default:i((()=>[n(l,{class:"!text-[24rpx] -mb-[4rpx] iconfont iconyanjing mr-[6rpx]"}),n(l,null,{default:i((()=>[w(I(parseInt(e.visit)+parseInt(e.visit_virtual)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),!O.value.length&&q.value?(r(),o(F,{key:0})):p("v-if",!0)])),_:1},8,["onInit"]),n(N)])),_:1},8,["style"])}}}),[["__scopeId","data-v-d778d4b0"]]);export{R as default};
