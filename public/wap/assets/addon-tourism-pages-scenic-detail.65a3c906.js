import{_ as e}from"./u-swiper.f792d47e.js";import{d as t,r as l,l as a,j as s,p as n,E as r,o as u,c,w as o,u as i,b as d,y as x,z as p,f,bV as _,P as m,a7 as g,Q as v,n as b,g as h,h as y,i as k,D as w,bY as j,a6 as F,s as C,H as P,a as V,B as D,C as S}from"./index-7bf68536.js";import{_ as E}from"./u-popup.be4bfacd.js";import{_ as I}from"./u-parse.525658f5.js";import{_ as z}from"./loading-page.vue_vue_type_script_setup_true_lang.124ad65f.js";import{r as A}from"./tourism.3586533e.js";import{s as B}from"./share-poster.5efeffe7.js";import{_ as H}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.b37701e7.js";import"./u-transition.cdf87992.js";import"./u-icon.0c1c54c7.js";import"./u-safe-bottom.908eeae4.js";import"./u-loading-page.566c330a.js";/* empty css                                                                     */const U=H(t({__name:"detail",setup(t){let H=l([]),U=l([]),Y=l(!0),G=l(""),L=l(!1),M=l([]),Q=l(!1),R=l("");const T=a(),q=s((()=>T.info));l(null),n((e=>{Y.value=!0,A(e.scenic_id).then((t=>{G.value=e.scenic_id,U.value=t.data,M.value.push({id:1,latitude:U.value.latitude,longitude:U.value.longitude,iconPath:r("addon/tourism/tourism/map_icon.png"),height:25}),H.value=[],U.value.image_thumb_big&&U.value.image_thumb_big.length?U.value.image_thumb_big.forEach(((e,t)=>{H.value.push(r(e))})):H.value.push(r(U.value.cover_thumb_big)),W(),Y.value=!1})).catch((()=>{Y.value=!1}))}));let J=l({ticket_id:"",reserve_time:(e=>{let t=e.getFullYear(),l=e.getMonth()+1,a=e.getDate();return""+(t+"-"+(l<10?"0"+l:l)+"-"+(a<10?"0"+a:a))})(((e,t="")=>{var l=864e5*e;return t?new Date(t+l):new Date(Date.now()+l)})(0)),num:1,scenic_id:G});let K=l(null),N=l(""),O={};const W=()=>{N.value="?scenic_id="+U.value.scenic_id,q.value&&q.value.member_id&&(N.value+="&mid="+q.value.member_id)},X=()=>{O.scenic_id=U.value.scenic_id,q.value&&q.value.member_id&&(O.member_id=q.value.member_id),K.value.openShare()};let Z=e=>{let t="";return t=e.member_discount&&C()?"member_price":"",t},$=e=>{let t="0.00";return t=e.member_discount&&C()&&e.member_price||e.price,parseFloat(t).toFixed(2)};return(t,l)=>{const a=h(y("u-swiper"),e),s=k,n=w,A=j,T=h(y("u-popup"),E),q=D,W=S,ee=h(y("u-parse"),I),te=F,le=h(y("loading-page"),z);return u(),c(s,{class:"bg-[#f7f7f7] min-h-screen overflow-hidden",style:b(t.themeColor())},{default:o((()=>[i(Y)?f("v-if",!0):(u(),c(s,{key:0},{default:o((()=>[d(a,{list:i(H),height:"380rpx",radius:"0"},null,8,["list"]),d(s,{class:"chunk-wrap pt-4 pb-3 rounded-t-2xl relative -mt-[30rpx]"},{default:o((()=>[d(s,{class:"flex justify-between items-center"},{default:o((()=>[d(s,{class:"flex-1"},{default:o((()=>[d(s,{class:"text-[34rpx] font-bold multi-hidden leading-6"},{default:o((()=>[x(p(i(U).scenic_name),1)])),_:1}),d(s,{class:"text-xs mt-2"},{default:o((()=>[x("景点级别「"+p(i(U).scenic_level)+"星」",1)])),_:1})])),_:1}),d(s,{class:"flex flex-col items-center text-[#6D7278] ml-[40rpx] pl-[50rpx] pr-[30rpx] border-0 border-l border-solid border-[#F0F0F0]",onClick:X},{default:o((()=>[d(n,{class:"nc-iconfont nc-icon-fenxiangV6xx-1 text-lg"}),d(n,{class:"mt-1 text-xs"},{default:o((()=>[x("分享")])),_:1})])),_:1})])),_:1}),f(' <view class="flex justify-between text-[#543E3E] items-baseline mt-3">\r\n\t\t\t\t\t<view class="text-xs member-price pl-2 py-1 rounded-l-lg">\r\n\t\t\t\t\t\t<text>5.0评分</text>\r\n\t\t\t\t\t\t<text class="ml-3">风景很好</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class="text-xs flex items-center">\r\n\t\t\t\t\t\t<text>39条评论</text>\r\n\t\t\t\t\t\t<text class="nc-iconfont nc-icon-youV6xx text-[26rpx]"></text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view> '),d(s,{class:"flex mt-3"},{default:o((()=>[d(s,{class:"bg-[#F2F4F9] mr-2 py-2 px-3 rounded-md w-[240rpx] box-border"},{default:o((()=>[d(n,{class:"text-[26rpx] font-bold"},{default:o((()=>[x("营业中")])),_:1}),d(s,{class:"text-xs mt-1"},{default:o((()=>[d(n,null,{default:o((()=>[x(p(i(U).open_time),1)])),_:1}),d(n,{class:"text-[26rpx] nc-iconfont nc-icon-youV6xx"})])),_:1})])),_:1}),d(s,{class:"bg-[#F2F4F9] py-2 px-3 rounded-md flex flex-1 items-center",onClick:l[0]||(l[0]=e=>_(L)?L.value=!0:L=!0)},{default:o((()=>[d(s,{class:"flex-1"},{default:o((()=>[f(' <text class="text-[26rpx] font-bold">距您直线12.3km</text> '),d(n,{class:"text-[26rpx] font-bold"},{default:o((()=>[x("景点地址")])),_:1}),d(s,{class:"text-xs mt-1"},{default:o((()=>[d(n,null,{default:o((()=>[x(p(i(U).address),1)])),_:1}),d(n,{class:"text-[26rpx] nc-iconfont nc-icon-youV6xx"})])),_:1})])),_:1}),d(s,{class:"flex flex-col ml-3"},{default:o((()=>[d(n,{class:"nc-iconfont nc-icon-dizhiV6mm leading-[1] p-[8rpx] text-center bg-[#fff] text-[32rpx] rounded-full"}),d(n,{class:"text-xs mt-[4rpx]"},{default:o((()=>[x("地图")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),d(T,{show:i(L),onClose:l[1]||(l[1]=e=>_(L)?L.value=!1:L=!1),closeable:!0},{default:o((()=>[d(s,{class:"text-center py-[30rpx] font-bold leading-none"},{default:o((()=>[d(n,null,{default:o((()=>[x("地图")])),_:1})])),_:1}),d(s,null,{default:o((()=>[d(A,{class:"map-body w-full h-[600rpx]",latitude:i(U).latitude,longitude:i(U).longitude,markers:i(M)},null,8,["latitude","longitude","markers"])])),_:1})])),_:1},8,["show"]),i(U).ticket_list&&i(U).ticket_list.length?(u(),c(s,{key:0,class:"chunk-wrap"},{default:o((()=>[d(s,{class:"chunk-head"},{default:o((()=>[d(n,null,{default:o((()=>[x("门票")])),_:1})])),_:1}),(u(!0),m(v,null,g(i(U).ticket_list,((e,t)=>(u(),c(s,{key:e.goods_id},{default:o((()=>[d(s,{class:"flex border-0 border-b border-solid border-[#F2F2F2] py-[30rpx] justify-between"},{default:o((()=>[d(s,{class:"flex flex-col"},{default:o((()=>[d(n,{class:"text-sm font-bold"},{default:o((()=>[x(p(e.goods_name),1)])),_:2},1024),f(' <text class="text-xs text-color mt-1">票数: {{item.stock}}</text> '),d(s,{class:"flex text-xs text-[#646464] mt-1"},{default:o((()=>[d(n,{class:"class-select"},{default:o((()=>[x("官方")])),_:1}),d(n,{class:"class-select"},{default:o((()=>[x("有条件退")])),_:1}),d(n,{class:"text-color"},{default:o((()=>[x("无需换票")])),_:1})])),_:1}),d(s,{class:"flex text-xs text-[#646464] mt-1",onClick:t=>{return l=e.goods_content,Q.value=!0,void(R.value=l);var l}},{default:o((()=>[d(n,null,{default:o((()=>[x("门票说明"),d(n,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx]"})])),_:1})])),_:2},1032,["onClick"])])),_:2},1024),d(s,{class:"flex flex-col justify-center"},{default:o((()=>[d(s,{class:"text-xs text-[#626262]"},{default:o((()=>[d(n,{class:"text-[#FA6400] price-font"},{default:o((()=>[x("￥")])),_:1}),d(n,{class:"text-lg font-bold text-[#FA6400] price-font"},{default:o((()=>[x(p(i($)(e)),1)])),_:2},1024),"member_price"==i(Z)(e)?(u(),c(q,{key:0,class:"h-[22rpx] ml-[6rpx] w-[55rpx]",src:i(r)("addon/tourism/VIP.png"),mode:"widthFix"},null,8,["src"])):f("v-if",!0),x(" 起 ")])),_:2},1024),d(W,{class:"w-[128rpx] h-[60rpx] leading-[60rpx] text-sm text-white bg-color rounded-2xl mt-[20rpx]",onClick:t=>(e=>{if(!C())return P().setLoginBack({url:"/addon/tourism/pages/scenic/detail",param:{scenic_id:G.value}}),!1;J.value.ticket_id=e.goods_id,uni.setStorageSync("scenicCreateData",J.value),V({url:"/addon/tourism/pages/scenic/order"})})(e)},{default:o((()=>[x("预订")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):f("v-if",!0),f(" 门票说明 "),d(T,{show:i(Q),onClose:l[2]||(l[2]=e=>_(Q)?Q.value=!1:Q=!1),closeable:!0},{default:o((()=>[d(s,{class:"text-center py-[30rpx] font-bold leading-none"},{default:o((()=>[d(n,null,{default:o((()=>[x("门票说明")])),_:1})])),_:1}),d(s,{class:"pt-[28rpx] pb-[40rpx] px-[28rpx]"},{default:o((()=>[d(te,{class:"max-h-[60vh]","scroll-y":!0},{default:o((()=>[i(R)?(u(),c(ee,{key:0,content:i(R),tagStyle:{img:"vertical-align: top;"}},null,8,["content"])):(u(),c(n,{key:1,class:"block px-5"},{default:o((()=>[x("暂无购买须知")])),_:1}))])),_:1})])),_:1})])),_:1},8,["show"]),i(U).telephone?(u(),c(s,{key:1,class:"chunk-wrap"},{default:o((()=>[d(s,{class:"chunk-head"},{default:o((()=>[d(n,null,{default:o((()=>[x("联系电话")])),_:1})])),_:1}),d(s,{class:"text-sm py-3 px-1 text-[var(--text-color-light6)] flex items-center"},{default:o((()=>[d(n,{class:"iconfont icondianhua-xianxingyuankuang font-bold mr-2 text-lg"}),d(n,null,{default:o((()=>[x(p(i(U).telephone),1)])),_:1})])),_:1})])),_:1})):f("v-if",!0),d(s,{class:"chunk-wrap"},{default:o((()=>[d(s,{class:"chunk-head"},{default:o((()=>[d(n,null,{default:o((()=>[x("景区介绍")])),_:1})])),_:1}),d(s,{class:"pt-[28rpx] pb-[40rpx] scheduling-content"},{default:o((()=>[i(U).scenic_desc?(u(),c(ee,{key:0,content:i(U).scenic_desc,tagStyle:{img:"vertical-align: top;"}},null,8,["content"])):(u(),c(n,{key:1},{default:o((()=>[x("暂无景区介绍")])),_:1}))])),_:1})])),_:1}),d(s,{class:"chunk-wrap"},{default:o((()=>[d(s,{class:"chunk-head"},{default:o((()=>[d(n,null,{default:o((()=>[x("景区周边")])),_:1})])),_:1}),d(s,{class:"pt-[28rpx] pb-[40rpx] scheduling-content"},{default:o((()=>[i(U).surround?(u(),c(ee,{key:0,content:i(U).surround,tagStyle:{img:"vertical-align: top;"}},null,8,["content"])):(u(),c(n,{key:1},{default:o((()=>[x("暂无景区周边")])),_:1}))])),_:1})])),_:1})])),_:1})),d(le,{loading:i(Y)},null,8,["loading"]),d(B,{ref_key:"sharePosterRef",ref:K,posterType:"tourism_scenic",posterId:i(U).poster_id,posterParam:i(O),copyUrlParam:i(N)},null,8,["posterId","posterParam","copyUrlParam"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-9f71c3cd"]]);export{U as default};
