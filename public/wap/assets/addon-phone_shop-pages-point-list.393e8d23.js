import{d as e,r as t,T as a,F as l,o as s,c as r,w as o,b as n,f as c,W as x,y as i,U as u,ad as p,V as f,u as d,n as m,ae as _,af as v,g,h,D as y,i as b,E as w,z as j,a as k,Q as V,B as C,bl as F,_ as z}from"./index-71c7df08.js";import{_ as I}from"./tabbar.a37cc2d9.js";import{b as M}from"./point.16230268.js";import{M as U}from"./mescroll-body.49de0f6f.js";import{M as T}from"./mescroll-empty.95b8c17e.js";import{u as D}from"./useMescroll.26ccf5de.js";import"./cloneDeep.77735539.js";import"./mescroll-i18n.00218d15.js";/* empty css                                                                       */const N=z(e({__name:"list",setup(e){const{mescrollInit:z,downCallback:N,getMescroll:S}=D(v,_),B=t([]),E=t(""),Q=t(""),R=t(null),H=t(!1),O=t(""),P=t(""),W=t(""),q=t("total_order_num"),A=e=>{H.value=!1;let t={goods_category:Q.value,page:e.num,limit:e.size,names:O.value,coupon_id:E.value,order:"total_order_num"===q.value?"":q.value,sort:"price"==q.value?P.value:W.value};M(t).then((t=>{let a=t.data.data;1===Number(e.num)&&(B.value=[]),B.value=B.value.concat(a),e.endSuccess(a.length),H.value=!0})).catch((()=>{H.value=!0,e.endErr()}))},G=e=>{q.value=e,"total_order_num"==e&&(W.value="",P.value=""),"price"==e&&(W.value="",P.value?P.value="asc"==P.value?"desc":"asc":P.value="asc"),"total_exchange_num"==e&&(P.value="",W.value?W.value="asc"==W.value?"desc":"asc":W.value="asc"),B.value=[],S().resetUpScroll()};return a((()=>{setTimeout((()=>{S().optUp.textNoMore=l("end")}),500)})),(e,t)=>{const a=g(h("u-input"),V),l=y,_=b,v=C,M=g(h("u--image"),F),D=g(h("tabbar"),I);return s(),r(_,{class:"bg-gray-100 min-h-[100vh]",style:m(e.themeColor())},{default:o((()=>[n(_,{class:"fixed left-0 right-0 top-0 product-warp bg-[#fff] px-[30rpx] z-10"},{default:o((()=>[n(_,{class:"py-[14rpx] flex items-center justify-between"},{default:o((()=>[n(_,{class:"flex-1 flex items-center h-[64rpx] bg-[#F6F8F8] rounded-[33rpx] px-[32rpx]"},{default:o((()=>[n(a,{class:"flex-1",maxlength:"50",modelValue:O.value,"onUpdate:modelValue":t[0]||(t[0]=e=>O.value=e),onConfirm:t[1]||(t[1]=e=>G("total_order_num")),placeholder:"请搜索您想要的商品",placeholderClass:"text-[#a5a6a6] text-[26rpx]",fontSize:"26rpx",clearable:"",border:"none"},null,8,["modelValue"]),n(l,{class:"nc-iconfont nc-icon-sousuo-duanV6xx1 text-[32rpx] ml-[18rpx] !text-[#999]",onClick:t[2]||(t[2]=e=>G("total_order_num"))})])),_:1}),c(" <view :class=\"['nc-iconfont  text-[44rpx]', listType ? 'nc-icon-yingyongzhongxinV6xx' : 'nc-icon-yingyongliebiaoV6xx']\" @click=\"listIconBtn\"></view> ")])),_:1}),n(_,{class:"flex justify-between tems-center py-[22rpx] px-[20rpx]"},{default:o((()=>[n(_,{class:"flex items-center justify-between text-[24rpx] text-[#666] flex-1"},{default:o((()=>[n(l,{class:x({"text-[#303133] ":"total_order_num"==q.value}),onClick:t[3]||(t[3]=e=>G("total_order_num"))},{default:o((()=>[i("综合排序")])),_:1},8,["class"]),n(_,{class:x(["flex items-center",{"text-[#303133]":"total_exchange_num"==q.value}]),onClick:t[4]||(t[4]=e=>G("total_exchange_num"))},{default:o((()=>[n(l,{class:"mr-[4rpx]"},{default:o((()=>[i("销量")])),_:1}),"asc"!=W.value&&"desc"!=W.value?(s(),r(l,{key:0,class:"text-[30rpx] text-[#666] nc-iconfont nc-icon-shangxiaxuanzeV6xx"})):"asc"==W.value?(s(),r(l,{key:1,class:"text-[18rpx] w-[30rpx] h-[30rpx] flex items-center justify-center text-[#666] nc-iconfont font-bold nc-icon-shangV6xx-1 font-bold"})):"desc"==W.value?(s(),r(l,{key:2,class:"text-[18rpx] w-[30rpx] h-[30rpx] flex items-center justify-center text-[#666] font-bold nc-iconfont nc-icon-xiaV6xx"})):c("v-if",!0)])),_:1},8,["class"]),n(_,{class:x(["flex items-center",{"text-[#303133]":"price"==q.value}]),onClick:t[5]||(t[5]=e=>G("price"))},{default:o((()=>[n(l,{class:"mr-[4rpx]"},{default:o((()=>[i("价格")])),_:1}),"asc"!=P.value&&"desc"!=P.value?(s(),r(l,{key:0,class:"text-[30rpx] text-[#666] nc-iconfont nc-icon-shangxiaxuanzeV6xx"})):"asc"==P.value?(s(),r(l,{key:1,class:"text-[18rpx] w-[30rpx] h-[30rpx] flex items-center justify-center font-bold text-[#666] nc-iconfont nc-icon-shangV6xx-1 font-bold"})):"desc"==P.value?(s(),r(l,{key:2,class:"text-[18rpx] w-[30rpx] h-[30rpx] flex items-center justify-center font-bold text-[#666] nc-iconfont nc-icon-xiaV6xx"})):c("v-if",!0)])),_:1},8,["class"])])),_:1})])),_:1})])),_:1}),n(U,{ref_key:"mescrollRef",ref:R,top:"160rpx",bottom:"50px",onInit:d(z),down:{use:!1},onUp:A},{default:o((()=>[B.value.length?(s(),r(_,{key:0,class:"sidebar-marign flex justify-between flex-wrap"},{default:o((()=>[(s(!0),u(f,null,p(B.value,((e,t)=>(s(),r(_,{class:"goods-item-style-two flex flex-col bg-[#fff] box-border rounded-[16rpx] overflow-hidden mt-[20rpx]",onClick:t=>{return a=e.id,void k({url:"/addon/phone_shop/pages/point/detail",param:{id:a},mode:"navigateTo"});var a}},{default:o((()=>[n(M,{width:"100%",height:"350rpx",src:d(w)(e.goods_cover_thumb_mid?e.goods_cover_thumb_mid:""),model:"aspectFill"},{error:o((()=>[n(v,{class:"w-[100%] h-[350rpx]",src:d(w)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["src"]),n(_,{class:"px-[16rpx] flex-1 pt-[10rpx] pb-[20rpx] flex flex-col justify-between"},{default:o((()=>[n(_,{class:"text-[#333] leading-[40rpx] text-[28rpx] multi-hidden"},{default:o((()=>[i(j(e.names),1)])),_:2},1024),n(_,{class:"text-[24rpx] font-400 leading-[34rpx] mt-[10rpx] text-[#999]"},{default:o((()=>[i(" 已兑"+j(e.total_exchange_num)+"人",1)])),_:2},1024),n(_,{class:"flex justify-between flex-wrap items-center mt-[16rpx]"},{default:o((()=>[n(_,{class:"flex items-baseline"},{default:o((()=>[n(v,{class:"h-[28rpx] self-center",src:d(w)("addon/phone_shop/exchange/point-icon.png"),mode:"heightFix"},null,8,["src"]),n(l,{class:"text-[var(--price-text-color)] price-font text-[32rpx] ml-[2rpx]"},{default:o((()=>[i(j(e.point),1)])),_:2},1024),e.price&&e.price>0?(s(),r(l,{key:0,class:"text-[#333] font-400 text-[24rpx]"},{default:o((()=>[i("+")])),_:1})):c("v-if",!0),e.price&&e.price>0?(s(),r(l,{key:1,class:"text-[var(--price-text-color)] font-400 text-[22rpx]"},{default:o((()=>[i("￥"+j(parseFloat(e.price).toFixed(2)),1)])),_:2},1024)):c("v-if",!0)])),_:2},1024),n(_,{class:"w-[80rpx] h-[46rpx] text-[28rpx] leading-[46rpx] !text-[#fff] m-0 rounded-full !bg-[var(--primary-color)] font-400 remove-border text-center",shape:"circle"},{default:o((()=>[i("兑换")])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})):c("v-if",!0),!B.value.length&&H.value?(s(),r(_,{key:1,class:"mx-[30rpx] mt-[20rpx] rounded-[16rpx] noData flex items-center justify-center"},{default:o((()=>[n(T,{option:{tip:"暂无商品"}})])),_:1})):c("v-if",!0)])),_:1},8,["onInit"]),n(D)])),_:1},8,["style"])}}}),[["__scopeId","data-v-2da27b4b"]]);export{N as default};
