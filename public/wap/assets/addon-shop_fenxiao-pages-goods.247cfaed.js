import{d as e,l as o,j as a,r as s,p as r,o as l,c as t,w as i,b as d,n as p,u as n,O as u,a6 as m,P as c,f as x,a7 as _,a8 as f,i as g,g as v,h,E as b,Q as y,y as j,z as k,A as w,a as C,B as F,D as P}from"./index-2882a2d8.js";import{_ as S}from"./u--image.d52c0594.js";import{M as U}from"./mescroll-body.e69cb222.js";import{M as I}from"./mescroll-empty.7f392528.js";import{u as M}from"./useMescroll.26ccf5de.js";import{e as z}from"./fenxiao.cc7bcc27.js";import{_ as E}from"./share-poster.cdaa31fc.js";import{_ as R}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.46ebbbc1.js";import"./u-icon.1104ad2f.js";import"./u-transition.4448d2e5.js";import"./mescroll-i18n.c2747603.js";/* empty css                                                                       */import"./u-popup.2abbe959.js";import"./u-overlay.1a317a4e.js";import"./u-safe-bottom.f13b01b8.js";const D=R(e({__name:"goods",setup(e){const{mescrollInit:R,downCallback:D,getMescroll:Q}=M(f,_),T=o(),A=a((()=>T.info)),B=s([]),O=s(!0);s(null),r((()=>{}));const V=e=>{let o={page:e.num,limit:e.size};O.value=!0,z(o).then((o=>{let a=o.data.data;1==e.num&&(B.value=[]),B.value=B.value.concat(a),O.value=!1,e.endSuccess(a.length)})).catch((()=>{O.value=!1,e.endErr()}))},$=s(null),q=s(""),G=s("");let H={};const J=e=>{H.sku_id=e.goodsSku.sku_id,A.value&&A.value.member_id&&(H.member_id=A.value.member_id),(e=>{G.value="/wap/addon/shop/pages/goods/detail",q.value="?goods_id="+e.goods_id,A.value&&A.value.member_id&&(q.value+="&mid="+A.value.member_id)})(e),$.value.openShare()};return(e,o)=>{const a=g,s=F,r=v(h("u--image"),S),_=P;return l(),t(a,{class:"bg-[var(--page-bg-color)] min-h-[100vh]",style:p(e.themeColor())},{default:i((()=>[d(U,{ref:"mescrollRef",onInit:n(R),onUp:V,down:{use:!1}},{default:i((()=>[d(a,{class:"w-[100%] h-[340rpx]",style:p({backgroundImage:"url("+n(b)("addon/shop_fenxiao/fenxiao_goods_bg.png")+")","background-size":"cover"})},null,8,["style"]),(l(!0),u(c,null,m(B.value,((e,o)=>(l(),t(a,{class:y(["bg-white flex card-template sidebar-marign rounded-[var(--rounded-big)] overflow-hidden mt-[var(--top-m)]",{"mb-[20rpx]":o+1==B.value.length}]),key:o,onClick:o=>{C({url:"/addon/shop/pages/goods/detail",param:{goods_id:e.goods_id}})}},{default:i((()=>[d(a,{class:"w-[190rpx] h-[190rpx] rounded-[var(--goods-rounded-big)] overflow-hidden"},{default:i((()=>[d(r,{width:"190rpx",height:"190rpx",src:n(b)(e.goods_cover_thumb_mid?e.goods_cover_thumb_mid:""),model:"aspectFill"},{error:i((()=>[d(s,{class:"w-[190rpx] h-[190rpx]",src:n(b)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["src"])])),_:2},1024),d(a,{class:"flex-1 flex flex-col ml-[20rpx] py-[4rpx]"},{default:i((()=>[d(a,{class:"text-[28rpx] text-[#333] leading-[40rpx] multi-hidden mb-[10rpx]"},{default:i((()=>[j(k(e.goods_name),1)])),_:2},1024),d(a,{class:"mt-auto flex justify-between items-end"},{default:i((()=>[d(a,{class:"text-[var(--price-text-color)] price-font flex items-baseline"},{default:i((()=>[d(_,{class:"text-[24rpx] font-500"},{default:i((()=>[j("￥")])),_:1}),d(_,{class:"text-[40rpx] font-500"},{default:i((()=>[j(k(parseFloat(e.goodsSku.price).toFixed(2).split(".")[0]),1)])),_:2},1024),d(_,{class:"text-[24rpx] font-500"},{default:i((()=>[j("."+k(parseFloat(e.goodsSku.price).toFixed(2).split(".")[1]),1)])),_:2},1024)])),_:2},1024),d(a,{onClick:w((o=>J(e)),["stop"]),class:"text-[24rpx] box-border border-[2rpx] border-solid border-[var(--price-text-color)] px-[16rpx] h-[54rpx] flex-center rounded-[50rpx] text-[var(--price-text-color)]"},{default:i((()=>[d(_,{class:"nc-iconfont nc-icon-fenxiangV6xx-1 mr-[6rpx] !text-[26rpx]"}),d(_,null,{default:i((()=>[j("赚"+k(e.commission)+"元",1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128)),B.value.length||O.value?x("v-if",!0):(l(),t(I,{key:0,option:{icon:n(b)("static/resource/images/empty.png")}},null,8,["option"]))])),_:1},8,["onInit"]),d(E,{ref_key:"sharePosterRef",ref:$,posterType:"fenxiao_goods",posterParam:n(H),copyUrlParam:q.value,copyUrl:G.value},null,8,["posterParam","copyUrlParam","copyUrl"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-573ea620"]]);export{D as default};
