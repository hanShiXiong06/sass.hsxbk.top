import{d as t,r as e,N as i,bS as a,a4 as c,bT as l,g as r,aA as s,h as d,o as n,c as o,w as p,b as u,A as v,y as f,W as y,z as m,f as x,e as h,U as _,V as k,ad as C,v as g,i as b,ac as w}from"./index-71c7df08.js";const A=t({__name:"area-select",props:{areaId:{type:Number,default:0}},emits:["complete"],setup(t,{expose:A,emit:I}){const N=t,T=e(!1),j=i({province:[],city:[],district:[]}),z=e("province"),S=i({province:null,city:null,district:null});a(0).then((({data:t})=>{j.province=t})).catch(),c((()=>N.areaId),((t,e)=>{t&&!e&&l(t).then((({data:t})=>{t.province&&(S.province=t.province),t.city&&(S.city=t.city),t.district&&(S.district=t.district)}))}),{immediate:!0}),c((()=>S.province),(()=>{a(S.province.id).then((({data:t})=>{if(j.city=t,z.value="city",S.city){let e=!1;for(let i=0;i<t.length;i++)if(S.city.id==t[i].id){e=!0;break}e||(S.city=null)}})).catch()}),{deep:!0}),c((()=>S.city),(t=>{t?a(S.city.id).then((({data:t})=>{if(j.district=t,z.value="district",S.district){let e=!1;for(let i=0;i<t.length;i++)if(S.district.id==t[i].id){e=!0;break}e||(S.district=null)}})).catch():(j.district=[],S.district=null)}),{deep:!0}),c((()=>S.district),(t=>{t&&(z.value="district",I("complete",S),T.value=!1)}),{deep:!0});return A({open:()=>{T.value=!0}}),(t,e)=>{const i=b,a=w,c=r(d("u-popup"),s);return n(),o(c,{show:T.value,onClose:e[4]||(e[4]=t=>T.value=!1),mode:"bottom",round:10},{default:p((()=>[u(i,{onTouchmove:e[3]||(e[3]=v((()=>{}),["prevent","stop"])),class:"popup-common"},{default:p((()=>[u(i,{class:"title"},{default:p((()=>[f("请选择地区")])),_:1}),u(i,{class:"flex p-[30rpx] pt-[0] text-sm font-500"},{default:p((()=>[j.province.length?(n(),o(i,{key:0,class:y(["flex-1 pr-[10rpx]",{"text-[var(--primary-color)]":"province"==z.value}]),onClick:e[0]||(e[0]=t=>z.value="province")},{default:p((()=>[S.province?(n(),o(i,{key:0},{default:p((()=>[f(m(S.province.name),1)])),_:1})):(n(),o(i,{key:1},{default:p((()=>[f("请选择")])),_:1}))])),_:1},8,["class"])):x("v-if",!0),j.city.length?(n(),o(i,{key:1,class:y(["flex-1 pr-[10rpx]",{"text-[var(--primary-color)]":"city"==z.value}]),onClick:e[1]||(e[1]=t=>z.value="city")},{default:p((()=>[S.city?(n(),o(i,{key:0},{default:p((()=>[f(m(S.city.name),1)])),_:1})):(n(),o(i,{key:1},{default:p((()=>[f("请选择")])),_:1}))])),_:1},8,["class"])):x("v-if",!0),j.district.length?(n(),o(i,{key:2,class:y(["flex-1 pr-[10rpx]",{"text-[var(--primary-color)]":"district"==z.value}]),onClick:e[2]||(e[2]=t=>z.value="district")},{default:p((()=>[S.district?(n(),o(i,{key:0},{default:p((()=>[f(m(S.district.name),1)])),_:1})):(n(),o(i,{key:1},{default:p((()=>[f("请选择")])),_:1}))])),_:1},8,["class"])):x("v-if",!0)])),_:1}),u(a,{"scroll-y":"true",class:"h-[50vh]"},{default:p((()=>[u(i,{class:"flex p-[30rpx] pt-0 text-sm"},{default:p((()=>[j.province.length?h((n(),o(i,{key:0},{default:p((()=>[(n(!0),_(k,null,C(j.province,(t=>(n(),o(i,{class:y(["h-[80rpx] flex items-center",{"text-[var(--primary-color)]":S.province&&S.province.id==t.id}]),onClick:e=>S.province=t},{default:p((()=>[f(m(t.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1},512)),[[g,"province"==z.value]]):x("v-if",!0),j.city.length?h((n(),o(i,{key:1},{default:p((()=>[(n(!0),_(k,null,C(j.city,(t=>(n(),o(i,{class:y(["h-[80rpx] flex items-center",{"text-[var(--primary-color)]":S.city&&S.city.id==t.id}]),onClick:e=>S.city=t},{default:p((()=>[f(m(t.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1},512)),[[g,"city"==z.value]]):x("v-if",!0),j.district.length?h((n(),o(i,{key:2},{default:p((()=>[(n(!0),_(k,null,C(j.district,(t=>(n(),o(i,{class:y(["h-[80rpx] flex items-center",{"text-[var(--primary-color)]":S.district&&S.district.id==t.id}]),onClick:e=>S.district=t},{default:p((()=>[f(m(t.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1},512)),[[g,"district"==z.value]]):x("v-if",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])}}});export{A as _};
