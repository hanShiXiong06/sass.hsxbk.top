import{bt as e,d as a,r as t,p as s,x as r,F as l,o,c as d,w as c,b as i,P as n,a7 as u,Q as p,f as m,u as f,n as _,a8 as v,a9 as g,i as b,a6 as h,g as x,h as y,R as j,y as k,z as w,A as F,E as C,a as E,B as I,D as z}from"./index-7bf68536.js";import{_ as M}from"./tabbar.e049672c.js";import{a as D}from"./giftcard.66db0fe0.js";import{M as S}from"./mescroll-body.b6d57b41.js";import{M as U}from"./mescroll-empty.fcefb74e.js";import{u as A}from"./useMescroll.26ccf5de.js";import{_ as R}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.0c1c54c7.js";import"./u-badge.d8d91719.js";import"./u-tabbar.d98653fa.js";import"./u-safe-bottom.908eeae4.js";import"./cloneDeep.77735539.js";import"./mescroll-i18n.14e7fe02.js";/* empty css                                                                       */const V=R(a({__name:"list",setup(a){const{mescrollInit:R,downCallback:V,getMescroll:B}=A(g,v),H=t([]),J=t(!0),O=t(!1),P=t(""),Q=t([]);s((e=>{G()})),r((()=>{B()&&B().resetUpScroll()}));const q=e=>{J.value=!0;let a={page:e.num,limit:e.size,category_id:P.value};D(a).then((a=>{let t=a.data.data;1==e.num&&(H.value=[]),H.value=H.value.concat(t),e.endSuccess(t.length),J.value=!1})).catch((()=>{J.value=!1,e.endErr()}))},G=()=>{O.value=!1,Q.value=[];let a={category_name:l("all"),category_id:""};Q.value.push(a),e.get("shop_giftcard/category").then((e=>{Object.values(e.data).forEach(((e,a)=>{Q.value.push(e)})),O.value=!0})).catch((()=>{O.value=!0}))},K=e=>{let a="";return a="balance"==e.card_right_type?"addon/shop_giftcard/diy/index/value_card.jpg":"addon/shop_giftcard/diy/index/redemption_card.jpg",a};return(e,a)=>{const t=b,s=h,r=I,v=z,g=x(y("tabbar"),M);return o(),d(t,{class:"bg-[#f8f8f8] min-h-[100vh] giftcard-list",style:_(e.themeColor())},{default:c((()=>[O.value?(o(),d(t,{key:0,class:"fixed left-0 top-0 right-0 z-10"},{default:c((()=>[i(s,{"scroll-x":!0,class:"tab-style-2"},{default:c((()=>[i(t,{class:"tab-content"},{default:c((()=>[(o(!0),n(p,null,u(Q.value,((e,a)=>(o(),d(t,{class:j(["tab-items mx-[20rpx]",{"class-select":P.value===e.category_id}]),onClick:a=>{return t=e.category_id,P.value=t,H.value=[],void B().resetUpScroll();var t}},{default:c((()=>[k(w(e.category_name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1})):m("v-if",!0),i(S,{ref:"mescrollRef",top:"88rpx",onInit:f(R),down:{use:!1},onUp:q},{default:c((()=>[H.value.length?(o(),d(t,{key:0,class:"sidebar-margin pt-[var(--top-m)] flex justify-between flex-wrap"},{default:c((()=>[(o(!0),n(p,null,u(H.value,((e,a)=>(o(),d(t,{class:"flex flex-col template-item rounded-[var(--goods-rounded-big)] overflow-hidden bg-[#fff] box-border border-[2rpx] border-solid border-[#F8F8F8] mb-[var(--top-m)]",key:a,onClick:F((a=>{E({url:"/addon/shop_giftcard/pages/detail",param:{giftcard_id:e.giftcard_id}})}),["stop"])},{default:c((()=>[e.cover?(o(),d(r,{key:0,class:"w-[100%] h-[210rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:f(C)(e.cover?e.cover.split(",")[0]:""),onError:a=>e.cover=K(e),mode:"aspectFill"},null,8,["src","onError"])):(o(),d(r,{key:1,class:"w-[100%] h-[210rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:f(C)(K(e)),mode:"aspectFill"},null,8,["src"])),i(t,{class:"flex justify-between h-[80rpx] items-center px-[var(--pad-sidebar-m)]"},{default:c((()=>[i(t,{class:"max-w-[250rpx] text-[28rpx] font-400 truncate text-[#303133]"},{default:c((()=>[k(w(e.card_name),1)])),_:2},1024),i(v,{class:j(["text-[30rpx] iconfont",{"iconchuzhikaV6mm text-[#EF000C]":"balance"==e.card_right_type,"iconduihuankaV6mm-1 text-[#FF7700]":"goods"==e.card_right_type}])},null,8,["class"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):m("v-if",!0),H.value.length||J.value?m("v-if",!0):(o(),d(U,{key:1,option:{tip:f(l)("cardEmpty"),icon:f(C)("addon/shop_giftcard/empty.png")}},null,8,["option"]))])),_:1},8,["onInit"]),i(g)])),_:1},8,["style"])}}}),[["__scopeId","data-v-3220f65b"]]);export{V as default};
