import{d as e,r as a,j as t,o as l,c as s,w as r,E as u,b as d,n as x,u as _,x as m,y as p,f,H as n,G as i,a as o,C as v,i as c,N as k,g as b,h,V as g,$ as w,t as y}from"./index-905183d4.js";import{_ as j}from"./u-count-down.eabeb208.js";import{_ as D}from"./u-loading-page.7aa0a449.js";import{a as T}from"./task.287f672e.js";import{_ as z}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.c376267d.js";import"./u-transition.dbaca185.js";const C=z(e({__name:"task_detail",setup(e){const z=a({});t((e=>{S(Number(e.id))}));let C=a(!0);const S=e=>{T(e).then((e=>{z.value=e.data,1===z.value.status?(z.value.time=new Date(z.value.start_time).getTime()-(new Date).getTime(),z.value.time=z.value.time<0?"":z.value.time):2===z.value.status&&(2!=z.value.time_type?(z.value.time=new Date(z.value.end_time).getTime()-(new Date).getTime(),z.value.time=z.value.time<0?"":z.value.time):z.value.time=""),C.value=!1})).catch((()=>{C.value=!1}))},H=a({}),I=e=>{H.value=e},N=()=>{o({url:"/addon/shop_fenxiao/pages/task_rewards_detail",param:{id:z.value.id}})};return(e,a)=>{const t=v,o=c,T=k,S=b(h("u-count-down"),j),O=b(h("u-loading-page"),D);return l(),s(o,{class:"bg-[#f8f8f8] min-h-[100vh] p-[24rpx] box-border",style:x(e.themeColor())},{default:r((()=>[Object.keys(z.value).length?(l(),u(i,{key:0},[d(o,{class:"bg-[#fff] rounded-[10rpx]overflow-hidden"},{default:r((()=>[d(o,{class:"w-[100%] h-[270rpx] relative background-size box-border p-[24rpx]",style:x({backgroundImage:"url("+_(g)("addon/shop_fenxiao/task-detail-header.png")+")"})},{default:r((()=>[d(o,{class:"text-[40rpx] mt-[30rpx] text-[#fff] font-600"},{default:r((()=>[d(t,null,{default:r((()=>[m(p(z.value.name),1)])),_:1})])),_:1}),d(o,{class:"mt-[30rpx] text-[22rpx] text-[#fff]"},{default:r((()=>[m(p(z.value.start_time?z.value.start_time.substring(0,10):"--")+" 至 "+p(1==z.value.time_type?z.value.end_time.substring(0,10):"长期有效")+"（"+p(1===z.value.status?"未开始":2===z.value.status?"已开始":"已结束")+"） ",1)])),_:1}),f(" 跳转个任务奖励明细 "),d(o,{class:"absolute top-[24rpx] right-[24rpx] text-[24rpx] text-[#fdf6ec] leading-[35rpx] h-[35rpx] bg-[rgba(0,0,0,0.2)] px-[17.5rpx] rounded-[17.5rpx]",onClick:N},{default:r((()=>[m("奖励明细")])),_:1}),f(" 进度条 "),d(o,{class:"mx-auto mt-[70rpx] text-[#fff] relative mx-[15rpx]"},{default:r((()=>[d(o,{class:"w-full h-[15rpx] rounded-[7.5rpx] bg-[#ececec] flex"},{default:r((()=>[d(o,{class:"h-[15rpx] rounded-[7.5rpx] bg-[#eebe77]",style:x({width:z.value.task_member?z.value.task_member.task_data.show_progress.rate+"%":0})},null,8,["style"])])),_:1}),f(" 当前进度 "),d(o,{class:"w-[30rpx] h-[30rpx] rounded-[15rpx] bg-[#eebe77] absolute z-10 top-[-7.5rpx] ml-[-15rpx] ltft-0",style:x({left:z.value.task_member?z.value.task_member.task_data.show_progress.rate+"%":0})},{default:r((()=>[d(o,{class:"w-[15rpx] h-[15rpx] rounded-[7.5rpx] bg-[#fff] absolute top-[7.5rpx] left-[7.5rpx]"})])),_:1},8,["style"]),f(" 当前完成进度文字 "),z.value.task_member&&100!=z.value.task_member.task_data.show_progress.rate?(l(),s(o,{key:0,ref:"mytext",class:"absolute text-[24rpx] bottom-[30rpx] transform -translate-x-1/2",style:x({left:z.value.task_member?z.value.task_member.task_data.show_progress.rate+"%":0})},{default:r((()=>[m(p(z.value.task_member.task_data.now_data+z.value.task_member.task_data.util),1)])),_:1},8,["style"])):f("v-if",!0),d(o,{class:n(["w-[30rpx] h-[30rpx] rounded-[15rpx] absolute z-9 top-[-7.5rpx] mr-[-15rpx] right-0 bg-[#ececec]",{"!bg-[#eebe77]":z.value.task_member&&100==z.value.task_member.task_data.show_progress.rate}])},{default:r((()=>[d(o,{class:"w-[15rpx] h-[15rpx] rounded-[7.5rpx] bg-[#fff] absolute top-[7.5rpx] left-[7.5rpx]"})])),_:1},8,["class"]),f(" 需完成的总进度完成 "),d(o,{ref:"overallText",class:"absolute text-[24rpx] bottom-[30rpx] right-0"},{default:r((()=>[m(p(z.value.task_member?("元"==z.value.task_member.task_data.util?_(w)(z.value.task_member.task_data.end_data):z.value.task_member.task_data.end_data)+z.value.task_member.task_data.util:("元"==z.value.task_data.util?_(w)(z.value.task_data.end_data):z.value.task_data.end_data)+z.value.task_data.util),1)])),_:1},512)])),_:1})])),_:1},8,["style"]),d(o,{class:"p-[24rpx]"},{default:r((()=>[z.value.task_member?(l(),s(o,{key:1,class:"text-[26rpx] font-600"},{default:r((()=>[m(p(z.value.task_member.task_data.title)+"达",1),d(t,{class:"text-[#eebe77] mx-[10rpx]"},{default:r((()=>[m(p("元"==z.value.task_member.task_data.util?_(w)(z.value.task_member.task_data.end_data):z.value.task_member.task_data.end_data)+p(z.value.task_member.task_data.util),1)])),_:1}),m("即可获得以下奖励： ")])),_:1})):(l(),s(o,{key:0,class:"text-[26rpx] font-600"},{default:r((()=>[m(p(z.value.task_data.title)+"达",1),d(t,{class:"text-[#eebe77] mx-[10rpx]"},{default:r((()=>[m(p("元"==z.value.task_data.util?_(w)(z.value.task_data.end_data):z.value.task_data.end_data)+p(z.value.task_data.util),1)])),_:1}),m("即可获得以下奖励： ")])),_:1})),d(o,{class:"w-full mt-[24rpx] flex"},{default:r((()=>[d(o,{class:"flex flex-col items-center"},{default:r((()=>[d(T,{class:"w-[56rpx] h-[56rpx] rounded-[50%]",src:_(g)("addon/shop_fenxiao/tark-money.png"),mode:"aspectFill"},null,8,["src"]),d(o,{class:"mt-[14rpx] text-[22rpx]"},{default:r((()=>{var e;return[m(p(_(w)(null==(e=z.value.rules[0].reward)?void 0:e.commission))+"元",1)]})),_:1})])),_:1})])),_:1})])),_:1}),1===z.value.status?(l(),s(o,{key:0,class:"px-[24rpx] pt-[30rpx] border-0 border-t-[1rpx] border-solid border-[#ddd]"},{default:r((()=>[d(o,{class:"text-center text-[28rpx] font-600"},{default:r((()=>[m(" 距离开始还剩 ")])),_:1}),d(o,{class:"flex justify-center mt-[26rpx]"},{default:r((()=>[d(S,{time:z.value.time,format:"DD:HH:mm:ss",autoStart:"",millisecond:"",onChange:I},{default:r((()=>[d(o,{class:"time text-[26rpx] font-600 flex items-center"},{default:r((()=>[d(t,{class:"time__days mr-[24rpx]"},{default:r((()=>[m(p(H.value.days)+"天",1)])),_:1}),d(t,{class:"time__hours"},{default:r((()=>[m(p(H.value.hours>10?H.value.hours:"0"+H.value.hours),1)])),_:1}),d(t,{class:"mx-[7rpx] text-[var(--primary-color)]"},{default:r((()=>[m(":")])),_:1}),d(t,{class:"time__minutes"},{default:r((()=>[m(p(H.value.minutes>10?H.value.minutes:"0"+H.value.minutes),1)])),_:1}),d(t,{class:"mx-[7rpx] text-[var(--primary-color)]"},{default:r((()=>[m(":")])),_:1}),d(t,{class:"time__seconds"},{default:r((()=>[m(p(H.value.seconds>10?H.value.seconds:"0"+H.value.seconds),1)])),_:1})])),_:1})])),_:1},8,["time"])])),_:1}),d(o,{class:"text-center text-[24rpx] pb-[40rpx] text-[35rpx] text-[#ddd] mt-[50rpx]"},{default:r((()=>[m("即将开始")])),_:1})])),_:1})):f("v-if",!0)])),_:1}),d(o,{class:"bg-[#fff] rounded-[10rpx] overflow-hidden mt-[30rpx] p-[24rpx]"},{default:r((()=>[d(o,{class:"text-[30rpx] font-600 mt-[24rpx]"},{default:r((()=>[m(p(_(y)("rewardRules")),1)])),_:1}),f(' <view class="flex items-center mt-[24rpx]">\r\n                    <view class="flex h-[26rpx] items-center flex-shrink-0">\r\n                        <view class="h-[15rpx] w-[15rpx] rounded-[50%] bg-[#f8e3c5] mr-[24rpx] flex-shrink-0"></view>\r\n                    </view>\r\n                    <view class="text-[26rpx] flex-1 text-[#999] w-[615rpx] break-all">\r\n                        <text>任务类型：</text>\r\n                        <text>{{ detail.type_name }}</text>\r\n                    </view>\r\n                </view> '),1===z.value.type?(l(),s(o,{key:0,class:"flex items-center mt-[24rpx]"},{default:r((()=>[d(o,{class:"flex h-[26rpx] items-center flex-shrink-0"},{default:r((()=>[d(o,{class:"h-[15rpx] w-[15rpx] rounded-[50%] bg-[#f8e3c5] mr-[24rpx] flex-shrink-0"})])),_:1}),d(o,{class:"text-[26rpx] flex-1 text-[#999] w-[615rpx] break-all"},{default:r((()=>[d(t,null,{default:r((()=>[m("参与次数：")])),_:1}),d(t,null,{default:r((()=>[m(p(z.value.times?z.value.times+"次":"不限次"),1)])),_:1})])),_:1})])),_:1})):f("v-if",!0),d(o,{class:"flex mt-[24rpx]"},{default:r((()=>[d(o,{class:"flex h-[26rpx] items-center flex-shrink-0"},{default:r((()=>[d(o,{class:"h-[15rpx] w-[15rpx] rounded-[50%] bg-[#f8e3c5] mr-[24rpx] flex-shrink-0"})])),_:1}),d(o,{class:"text-[26rpx] flex-1 text-[#999] w-[615rpx] break-all"},{default:r((()=>[d(t,null,{default:r((()=>[m("参与等级：")])),_:1}),d(t,null,{default:r((()=>[m(p(1==z.value.level_type?"全部等级":2==z.value.level_type&&Object.values(z.value.level_data).toString()),1)])),_:1})])),_:1})])),_:1}),d(o,{class:"flex items-center mt-[24rpx]"},{default:r((()=>[d(o,{class:"flex h-[26rpx] items-center flex-shrink-0"},{default:r((()=>[d(o,{class:"h-[15rpx] w-[15rpx] rounded-[50%] bg-[#f8e3c5] mr-[24rpx] flex-shrink-0"})])),_:1}),d(o,{class:"text-[26rpx] flex-1 text-[#999] w-[615rpx] break-all"},{default:r((()=>[d(t,null,{default:r((()=>[m("参与指标：")])),_:1}),d(t,null,{default:r((()=>[m(p(z.value.task_member?z.value.task_member.task_data.title:z.value.task_data.title),1)])),_:1})])),_:1})])),_:1}),d(o,{class:"flex items-center mt-[24rpx]"},{default:r((()=>[d(o,{class:"flex h-[26rpx] items-center flex-shrink-0"},{default:r((()=>[d(o,{class:"h-[15rpx] w-[15rpx] rounded-[50%] bg-[#f8e3c5] mr-[24rpx] flex-shrink-0"})])),_:1}),z.value.task_member?(l(),s(o,{key:1,class:"text-[26rpx] flex-1 text-[#999] w-[615rpx] break-all"},{default:r((()=>[d(t,null,{default:r((()=>[m("奖励说明：")])),_:1}),d(t,null,{default:r((()=>{var e;return[m(p(z.value.task_member.task_data.title)+"达"+p("元"==z.value.task_member.task_data.util?_(w)(z.value.task_member.task_data.end_data):z.value.task_member.task_data.end_data)+p(z.value.task_member.task_data.util)+"即可获得"+p(_(w)(null==(e=z.value.rules[0].reward)?void 0:e.commission))+"元佣金 ",1)]})),_:1})])),_:1})):(l(),s(o,{key:0,class:"text-[26rpx] flex-1 text-[#999] w-[615rpx] break-all"},{default:r((()=>[d(t,null,{default:r((()=>[m("奖励说明：")])),_:1}),d(t,null,{default:r((()=>{var e;return[m(p(z.value.task_data.title)+"达"+p("元"==z.value.task_data.util?_(w)(z.value.task_data.end_data):z.value.task_data.end_data)+p(z.value.task_data.util)+"即可获得"+p(_(w)(null==(e=z.value.rules[0].reward)?void 0:e.commission))+"元佣金",1)]})),_:1})])),_:1}))])),_:1})])),_:1})],64)):f("v-if",!0),z.value.remark?(l(),s(o,{key:1,class:"bg-[#fff] rounded-[10rpx] overflow-hidden mt-[30rpx] p-[24rpx]"},{default:r((()=>[d(o,{class:"text-[30rpx] font-600 mt-[24rpx]"},{default:r((()=>[m(p(_(y)("taskSpecification")),1)])),_:1}),d(o,{class:"text-[#999] text-[26rpx] mt-[24rpx]"},{default:r((()=>[m(p(z.value.remark),1)])),_:1})])),_:1})):f("v-if",!0),d(O,{"bg-color":"rgb(248,248,248)",loading:_(C),loadingText:"",fontSize:"16",color:"#333"},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-075e6f2a"]]);export{C as default};
