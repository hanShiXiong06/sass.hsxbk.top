import{d as e,r as t,p as o,T as l,o as r,c as a,w as i,f as s,L as d,n,I as u,K as p,J as x,u as c,b as m,aQ as g,i as f,a_ as h,m as v,q as y,t as _,af as w,b9 as b,b3 as R,b4 as k,g as S,h as C,a2 as B,l as G,y as F,z as W,Y as j,a as A,Q as H,D as $}from"./index-d8a8f699.js";import{_ as D}from"./u--image.2df700b8.js";import{_ as E}from"./_plugin-vue_export-helper.1b428a4d.js";import{g as N}from"./fenxiao.966b2ea4.js";import{_ as T}from"./share-poster.b1e17ebe.js";const O=E(e({__name:"x-skeleton",props:{type:{type:String,default:"",required:!0},loading:{type:Boolean,default:!0},animate:{type:Boolean,default:!0},animateTime:{type:Number,default:1.8},fadeOut:{type:Boolean,default:!0},fadeOutTime:{type:Number,default:.5},bgColor:{type:String,default:"#EAEDF5"},highlightBgColor:{type:String,default:"#F9FAFF"},config:{type:Object,default:()=>({})}},setup(e){const h=e,v=t(h.config||{}),y=t(h.loading),_=t(!1);t(0);const w=o((()=>{var e;return new Array(Number((null==(e=v.value)?void 0:e.gridRows)||[]))})),b=o((()=>{var e;return new Array(Number((null==(e=v.value)?void 0:e.gridColumns)||[]))})),R=o((()=>{var e;if(!(null==(e=v.value)?void 0:e.textShow))return[];/%$/.test(v.value.textHeight)&&console.error("x-skeleton: textHeight参数不支持百分比单位");const t=[];for(let o=0;o<v.value.textRows;o++){const{gridRows:e,textWidth:l,textHeight:r}=v.value;let a={},i=S(l)?l[o]||(o===e-1?"70%":"100%"):o===e-1?"70%":l,s=S(r)?r[o]||"30rpx":r;/%$/.test(i)?a.width=i:a.width=C(i),a.height=C(s),t.push(a)}return t})),k=o((()=>["animateTime","fadeOutTime","bgColor","highlightBgColor"].map((e=>e.indexOf("Time")>-1?`--${e}:${h[e]}s`:`--${e}:${h[e]}`)).join(";")));l((()=>h.loading),(e=>{e?y.value=!0:h.fadeOut?(_.value=!0,setTimeout((()=>{y.value=!1,_.value=!1}),1e3*h.fadeOutTime)):y.value=!1}),{immediate:!0}),l((()=>h.type),(e=>{var t;v.value="banner"===e?(t=h.config,{padding:"20rpx",gridRows:1,gridColumns:1,gridRowsGap:"40rpx",gridColumnsGap:"24rpx",itemDirection:"row",itemGap:"30rpx",itemAlign:"center",headShow:!0,headWidth:"100%",headHeight:"300rpx",headBorderRadius:"20rpx",textShow:!1,textRows:3,textRowsGap:"20rpx",textWidth:"100%",textHeight:"30rpx",textBorderRadius:"6rpx",...t}):"info"===e?function(e){return{padding:"20rpx",gridRows:1,gridColumns:1,gridRowsGap:"50rpx",gridColumnsGap:"24rpx",itemDirection:"row",itemGap:"30rpx",itemAlign:"flex-start",headShow:!0,headWidth:"100rpx",headHeight:"100rpx",headBorderRadius:"50%",textShow:!0,textRows:4,textRowsGap:"30rpx",textWidth:["50%","100%","100%","80%"],textHeight:["40rpx","24rpx","24rpx","24rpx"],textBorderRadius:"6rpx",...e}}(h.config):"text"===e?function(e){return{padding:"20rpx",gridRows:1,gridColumns:1,gridRowsGap:"50rpx",gridColumnsGap:"24rpx",itemDirection:"row",itemGap:"30rpx",itemAlign:"flex-start",headShow:!1,headWidth:"100rpx",headHeight:"100rpx",headBorderRadius:"50%",textShow:!0,textRows:4,textRowsGap:"30rpx",textWidth:["50%","100%","100%","80%"],textHeight:"30rpx",textBorderRadius:"6rpx",...e}}(h.config):"menu"===e?function(e){return{padding:"20rpx",gridRows:2,gridColumns:5,gridRowsGap:"40rpx",gridColumnsGap:"40rpx",itemDirection:"column",itemGap:"16rpx",itemAlign:"center",headShow:!0,headWidth:"100rpx",headHeight:"100rpx",headBorderRadius:"50%",textShow:!0,textRows:1,textRowsGap:"0rpx",textWidth:"100%",textHeight:"24rpx",textBorderRadius:"6rpx",...e}}(h.config):"list"===e?function(e){return{padding:"20rpx",gridRows:2,gridColumns:1,gridRowsGap:"50rpx",gridColumnsGap:"24rpx",itemDirection:"row",itemGap:"30rpx",itemAlign:"flex-start",headShow:!0,headWidth:"200rpx",headHeight:"200rpx",headBorderRadius:"16rpx",textShow:!0,textRows:4,textRowsGap:"30rpx",textWidth:["50%","100%","100%","80%"],textHeight:["38rpx","24rpx","24rpx","24rpx"],textBorderRadius:"6rpx",...e}}(h.config):"waterfall"===e?function(e){return{padding:"20rpx",gridRows:2,gridColumns:2,gridRowsGap:"40rpx",gridColumnsGap:"24rpx",itemDirection:"column",itemGap:"16rpx",itemAlign:"center",headShow:!0,headWidth:"100%",headHeight:"400rpx",headBorderRadius:"12rpx",textShow:!0,textRows:3,textRowsGap:"12rpx",textWidth:["40%","85%","60%"],textHeight:["30rpx","20rpx","20rpx"],textBorderRadius:"6rpx",...e}}(h.config):h.config||{}}),{immediate:!0});const S=e=>"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e),C=(e="auto",t="px")=>(e=String(e),/^[\+-]?(\d+\.?\d*|\.\d+|\d\.\d+e\+\d+)$/.test(e)?`${e}${t}`:e);return(t,o)=>{const l=f;return r(),a(l,{class:"x-skeleton",style:n(c(k))},{default:i((()=>[s(" 骨架屏 "),y.value?(r(),a(l,{key:0,class:d(["x-skeleton__wrapper",[_.value&&"fade-out"]]),style:n({padding:v.value.padding})},{default:i((()=>[(r(!0),u(p,null,x(c(w),((t,o)=>(r(),a(l,{key:o,class:"x-skeleton__wrapper__rows",style:n({marginBottom:o<c(w).length-1?v.value.gridRowsGap:0})},{default:i((()=>[(r(!0),u(p,null,x(c(b),((t,o)=>(r(),a(l,{key:o,class:"x-skeleton__wrapper__columns",style:n({flexDirection:v.value.itemDirection,alignItems:v.value.itemAlign,marginRight:o<c(b).length-1?v.value.gridColumnsGap:0})},{default:i((()=>[v.value.headShow?(r(),a(l,{key:0,class:d(["x-skeleton__wrapper__head",[e.animate&&"animate"]]),style:n({width:v.value.headWidth,height:v.value.headHeight,borderRadius:v.value.headBorderRadius,marginRight:"row"==v.value.itemDirection&&v.value.textShow?v.value.itemGap:0,marginBottom:"column"==v.value.itemDirection&&v.value.textShow?v.value.itemGap:0})},null,8,["class","style"])):s("v-if",!0),v.value.textShow?(r(),a(l,{key:1,class:"x-skeleton__wrapper__text"},{default:i((()=>[(r(!0),u(p,null,x(c(R),((t,o)=>(r(),a(l,{key:o,class:d(["x-skeleton__wrapper__text__row",[e.animate&&"animate"]]),style:n({width:t.width,height:t.height,borderRadius:v.value.textBorderRadius,marginBottom:o<c(R).length-1?v.value.textRowsGap:0})},null,8,["class","style"])))),128))])),_:1})):s("v-if",!0)])),_:2},1032,["style"])))),128))])),_:2},1032,["style"])))),128))])),_:1},8,["class","style"])):(r(),u(p,{key:1},[s(" 插槽 "),m(l,null,{default:i((()=>[g(t.$slots,"default",{},void 0,!0)])),_:3})],2112))])),_:3},8,["style"])}}}),[["__scopeId","data-v-d6bfd42f"]]),U=e({__name:"index",props:["component","index","pullDownRefreshCount","value"],setup(e){const g=e,E=h(),U=v(),P=o((()=>U.info)),z=y({type:"",loading:"decorate"!=E.mode,config:{}}),I=t([]),q=o((()=>g.value?g.value:"decorate"==E.mode?E.value[g.index]:g.component)),L=o((()=>{var e="";return e+="position:relative;",q.value.componentStartBgColor&&(q.value.componentStartBgColor&&q.value.componentEndBgColor?e+=`background:linear-gradient(${q.value.componentGradientAngle},${q.value.componentStartBgColor},${q.value.componentEndBgColor});`:e+="background-color:"+q.value.componentStartBgColor+";"),q.value.componentBgUrl&&(e+=`background-image:url('${G(q.value.componentBgUrl)}');`,e+="background-size: cover;background-repeat: no-repeat;"),q.value.topRounded&&(e+="border-top-left-radius:"+2*q.value.topRounded+"rpx;"),q.value.topRounded&&(e+="border-top-right-radius:"+2*q.value.topRounded+"rpx;"),q.value.bottomRounded&&(e+="border-bottom-left-radius:"+2*q.value.bottomRounded+"rpx;"),q.value.bottomRounded&&(e+="border-bottom-right-radius:"+2*q.value.bottomRounded+"rpx;"),e})),Q=o((()=>{var e="";return q.value.componentBgUrl&&(e+="position:absolute;top:0;width:100%;",e+=`background: rgba(0,0,0,${q.value.componentBgAlpha/10});`,e+=`height:${Z.value}px;`,q.value.topRounded&&(e+="border-top-left-radius:"+2*q.value.topRounded+"rpx;"),q.value.topRounded&&(e+="border-top-right-radius:"+2*q.value.topRounded+"rpx;"),q.value.bottomRounded&&(e+="border-bottom-left-radius:"+2*q.value.bottomRounded+"rpx;"),q.value.bottomRounded&&(e+="border-bottom-right-radius:"+2*q.value.bottomRounded+"rpx;")),e})),V=o((()=>{var e="";return q.value.elementBgColor&&(e+="background-color:"+q.value.elementBgColor+";"),q.value.topElementRounded&&(e+="border-top-left-radius:"+2*q.value.topElementRounded+"rpx;"),q.value.topElementRounded&&(e+="border-top-right-radius:"+2*q.value.topElementRounded+"rpx;"),q.value.bottomElementRounded&&(e+="border-bottom-left-radius:"+2*q.value.bottomElementRounded+"rpx;"),q.value.bottomElementRounded&&(e+="border-bottom-right-radius:"+2*q.value.bottomElementRounded+"rpx;"),"style-2"==q.value.style&&(q.value.margin&&q.value.margin.both?e+="width: calc((100vw - "+4*q.value.margin.both+"rpx - 20rpx) / 2)":e+="width: calc((100vw - 20rpx) / 2 )"),e})),J=o((()=>{var e="";return q.value.margin&&q.value.margin.both?e+="calc((100vw - "+4*q.value.margin.both+"rpx - 20rpx) / 2)":e+="calc((100vw - 20rpx) / 2 )",e})),K=o((()=>{var e="";return e+="padding:0 20rpx;",q.value.margin&&q.value.margin.both?e+="width: calc( 100vw - "+(4*q.value.margin.both+40)+"rpx);":e+="box-sizing: border-box; width: 100vw;",e})),Y=t(""),M=()=>{Y.value="margin-right:14rpx;"};l((()=>g.pullDownRefreshCount),((e,t)=>{}));const X=k(),Z=t(0);_((()=>{ee(),"decorate"==E.mode?l((()=>q.value),((e,t)=>{e&&"FenxiaoGoodsList"==e.componentName&&w((()=>{R().in(X).select(".diy-fenxiao-goods-list").boundingClientRect((e=>{Z.value=e.height})).exec()}))})):l((()=>q.value),((e,t)=>{ee()}),{deep:!0})}));const ee=()=>{if("decorate"==E.mode){let e={goods_cover_thumb_mid:"",goods_name:"商品名称",sale_num:"100",commission:"10",unit:"件",fenxiaoGoods:{},goodsSku:{price:100}};I.value.push(e),I.value.push(e),w((()=>{"style-3"==q.value.style&&M()}))}else"style-1"==q.value.style?(z.type="list",z.type="list",z.config={textRows:2}):"style-2"==q.value.style?(z.type="waterfall",z.config={headHeight:"320rpx",gridRows:1,textRows:2,textWidth:["100%","80%"]}):"style-3"==q.value.style&&(z.type="waterfall",z.config={gridRows:1,gridColumns:3,headHeight:"200rpx",textRows:2,textWidth:["100%","80%"]}),(()=>{let e={num:"all"==q.value.source||"category"==q.value.source?q.value.num:"",goods_category:"category"==q.value.source?q.value.goods_category:"",order:q.value.sortWay};N(e).then((e=>{I.value=e.data,z.loading=!1,q.value.componentBgUrl&&setTimeout((()=>{R().in(X).select(".diy-fenxiao-goods-list").boundingClientRect((e=>{Z.value=e.height})).exec()}),1e3),w((()=>{setTimeout((()=>{"style-3"==q.value.style&&M()}),500)}))}))})()},te=e=>{A({url:"/addon/shop/pages/goods/detail",param:{goods_id:e.goods_id}})},oe=()=>{A({url:"/addon/shop_fenxiao/pages/index"})};let le=t(null),re=t(""),ae=t(""),ie={};const se=e=>{ie.sku_id=e.goodsSku.sku_id,P.value&&P.value.member_id&&(ie.member_id=P.value.member_id),(e=>{ae.value="/wap/addon/shop/pages/goods/detail",re.value="?goods_id="+e.goods_id,P.value&&P.value.member_id&&(re.value+="&mid="+P.value.member_id)})(e),le.value.openShare()};return(e,t)=>{const o=f,l=H,g=S(C("u--image"),D),h=$,v=B,y=S(C("x-skeleton"),O);return r(),a(y,{type:z.type,loading:z.loading,config:z.config},{default:i((()=>[m(o,{style:n(c(L))},{default:i((()=>[m(o,{style:n(c(Q))},null,8,["style"]),b("div",{class:"diy-fenxiao-goods-list relative flex flex-wrap justify-between"},["style-1"==c(q).style?(r(!0),u(p,{key:0},x(I.value,((e,u)=>(r(),a(o,{class:d(["bg-white w-full flex p-[20rpx] mx-[20rpx] rounded-[8rpx] overflow-hidden",{"mt-[20rpx]":u>-10,"mb-[20rpx]":u+1==I.value.length}]),style:n(c(V)),key:e.goods_id,onClick:t=>te(e)},{default:i((()=>[m(g,{class:"rounded-[10rpx] overflow-hidden",width:"190rpx",height:"190rpx",src:c(G)(e.goods_cover_thumb_mid||""),model:"aspectFill"},{error:i((()=>[m(l,{class:"w-[190rpx] h-[190rpx] rounded-[10rpx] overflow-hidden",src:c(G)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["src"]),m(o,{class:"flex-1 flex flex-col ml-[20rpx] py-[6rpx]"},{default:i((()=>[m(o,{class:"text-[28rpx] leading-[40rpx] text-[#303133] multi-hidden mb-[10rpx]",style:n({color:c(q).goodsNameStyle.color,fontWeight:c(q).goodsNameStyle.fontWeight})},{default:i((()=>[F(W(e.goods_name),1)])),_:2},1032,["style"]),m(o,{class:"mt-auto flex items-center items-baseline"},{default:i((()=>[m(o,{class:"font-bold price-font flex items-baseline mr-[12rpx]",style:n({color:c(q).priceStyle.mainColor})},{default:i((()=>[m(h,{class:"text-[26rpx] font-500"},{default:i((()=>[F("￥")])),_:1}),m(h,{class:"text-[36rpx] font-500"},{default:i((()=>[F(W(parseFloat(e.goodsSku.price).toFixed(2).split(".")[0]),1)])),_:2},1024),m(h,{class:"text-[24rpx] font-500"},{default:i((()=>[F("."+W(parseFloat(e.goodsSku.price).toFixed(2).split(".")[1]),1)])),_:2},1024)])),_:2},1032,["style"]),parseFloat(e.commission)&&e.fenxiao?(r(),a(o,{key:0,class:"text-[var(--price-text-color)] price-font flex items-baseline",style:n({color:c(q).commissionStyle.color})},{default:i((()=>[m(h,{class:"text-[24rpx]"},{default:i((()=>[F("推广佣金")])),_:1}),m(h,{class:"text-[26rpx] mx-[4rpx]"},{default:i((()=>[F("￥")])),_:1}),m(h,{class:"text-[26rpx]"},{default:i((()=>[F(W(parseFloat(e.commission).toFixed(2)),1)])),_:2},1024)])),_:2},1032,["style"])):s("v-if",!0),e.fenxiao?(r(),a(h,{key:1,onClick:j((t=>se(e)),["stop"]),class:"nc-iconfont nc-icon-fenxiangV6xx-1 leading-0 flex items-center justify-center rounded-full ml-auto w-[48rpx] h-[48rpx] bg-[var(--price-text-color)] text-[#fff]",style:n({"background-color":c(q).commissionStyle.color})},null,8,["onClick","style"])):s("v-if",!0),e.fenxiao||1!=c(q).is_become_fenxiao?s("v-if",!0):(r(),a(h,{key:2,onClick:t[0]||(t[0]=j((e=>oe()),["stop"])),class:"leading-0 flex items-center justify-center rounded-[50rpx] ml-auto w-[150rpx] h-[56rpx] bg-[#fe4c19] text-[24rpx] text-[#fff]",style:n({"background-color":c(q).commissionStyle.color})},{default:i((()=>[F(" 成为分销商 ")])),_:1},8,["style"]))])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","style","onClick"])))),128)):s("v-if",!0),"style-2"==c(q).style?(r(!0),u(p,{key:1},x(I.value,((e,u)=>(r(),a(o,{class:d(["flex flex-col bg-[#fff] box-border rounded-[12rpx] overflow-hidden",{"mt-[24rpx]":u>1}]),style:n(c(V)),key:e.goods_id,onClick:t=>te(e)},{default:i((()=>[m(g,{width:c(J),height:c(J),src:c(G)(e.goods_cover_thumb_mid||""),model:"aspectFill"},{error:i((()=>[m(l,{style:n({width:c(J),height:c(J)}),src:c(G)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["style","src"])])),_:2},1032,["width","height","src"]),m(o,{class:"px-[16rpx] flex-1 pt-[16rpx] pb-[20rpx] flex flex-col justify-between"},{default:i((()=>[m(o,{class:"text-[#303133] leading-[40rpx] text-[28rpx] multi-hidden",style:n({color:c(q).goodsNameStyle.color,fontWeight:c(q).goodsNameStyle.fontWeight})},{default:i((()=>[F(W(e.goods_name),1)])),_:2},1032,["style"]),parseFloat(e.commission)&&e.fenxiao?(r(),a(o,{key:0,class:"text-[24rpx] price-font flex items-baseline mt-[16rpx]",style:n({color:c(q).commissionStyle.color})},{default:i((()=>[m(h,{class:"text-[24rpx]"},{default:i((()=>[F("推广佣金")])),_:1}),m(h,{class:"text-[26rpx] mx-[4rpx]"},{default:i((()=>[F("￥")])),_:1}),m(h,{class:"text-[26rpx]"},{default:i((()=>[F(W(parseFloat(e.commission).toFixed(2)),1)])),_:2},1024)])),_:2},1032,["style"])):s("v-if",!0),m(o,{class:"flex justify-between items-center mt-[10rpx]"},{default:i((()=>[m(o,{class:"text-[var(--price-text-color)] price-font flex items-baseline",style:n({color:c(q).priceStyle.mainColor})},{default:i((()=>[m(h,{class:"text-[26rpx] font-500"},{default:i((()=>[F("￥")])),_:1}),m(h,{class:"text-[36rpx] font-500"},{default:i((()=>[F(W(parseFloat(e.goodsSku.price).toFixed(2).split(".")[0]),1)])),_:2},1024),m(h,{class:"text-[24rpx] font-500"},{default:i((()=>[F("."+W(parseFloat(e.goodsSku.price).toFixed(2).split(".")[1]),1)])),_:2},1024)])),_:2},1032,["style"]),e.fenxiao?(r(),a(h,{key:0,onClick:j((t=>se(e)),["stop"]),class:"nc-iconfont nc-icon-fenxiangV6xx-1 leading-0 flex items-center justify-center rounded-full ml-auto w-[48rpx] h-[48rpx] bg-[var(--price-text-color)] text-[#fff]",style:n({"background-color":c(q).commissionStyle.color})},null,8,["onClick","style"])):s("v-if",!0),e.fenxiao||1!=c(q).is_become_fenxiao?s("v-if",!0):(r(),a(h,{key:1,onClick:t[1]||(t[1]=j((e=>oe()),["stop"])),class:"leading-0 flex items-center justify-center rounded-[50rpx] ml-auto w-[150rpx] h-[56rpx] bg-[#fe4c19] text-[24rpx] text-[#fff]",style:n({"background-color":c(q).commissionStyle.color})},{default:i((()=>[F(" 成为分销商 ")])),_:1},8,["style"]))])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","style","onClick"])))),128)):s("v-if",!0),"style-3"==c(q).style?(r(),a(o,{key:2,style:n(c(K))},{default:i((()=>[m(v,{id:"warpStyle3-"+c(q).id,class:"whitespace-nowrap","scroll-x":!0},{default:i((()=>[(r(!0),u(p,null,x(I.value,((e,t)=>(r(),a(o,{id:"item"+t+c(q).id,class:d(["w-[214rpx] rounded-[10rpx] inline-block bg-[#fff] box-border overflow-hidden",{"!mr-[0rpx]":t===I.value.length-1}]),style:n(c(V)+Y.value),key:e.goods_id,onClick:t=>te(e)},{default:i((()=>[m(g,{width:"214rpx",height:"160rpx",src:c(G)(e.goods_cover_thumb_mid||""),model:"aspectFill"},{error:i((()=>[m(l,{class:"w-[214rpx] h-[160rpx]",src:c(G)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["src"]),m(o,{class:"px-[10rpx] pt-[16rpx] pb-[10rpx]"},{default:i((()=>[m(o,{class:"text-[26rpx] text-[#303133] truncate",style:n({color:c(q).goodsNameStyle.color,fontWeight:c(q).goodsNameStyle.fontWeight})},{default:i((()=>[F(W(e.goods_name),1)])),_:2},1032,["style"]),m(o,{class:"text-[var(--price-text-color)] mt-[10rpx] font-bold price-font flex items-baseline",style:n({color:c(q).priceStyle.mainColor})},{default:i((()=>[m(h,{class:"text-[26rpx] font-500"},{default:i((()=>[F("￥")])),_:1}),m(h,{class:"text-[36rpx] font-500"},{default:i((()=>[F(W(parseFloat(e.goodsSku.price).toFixed(2).split(".")[0]),1)])),_:2},1024),m(h,{class:"text-[24rpx] font-500"},{default:i((()=>[F("."+W(parseFloat(e.goodsSku.price).toFixed(2).split(".")[1]),1)])),_:2},1024)])),_:2},1032,["style"])])),_:2},1024)])),_:2},1032,["id","class","style","onClick"])))),128))])),_:1},8,["id"])])),_:1},8,["style"])):s("v-if",!0)])])),_:1},8,["style"]),m(T,{ref_key:"sharePosterRef",ref:le,posterType:"fenxiao_goods",posterParam:c(ie),copyUrlParam:c(re),copyUrl:c(ae)},null,8,["posterParam","copyUrlParam","copyUrl"])])),_:1},8,["type","loading","config"])}}});export{O as _,U as a};
