import{bu as e,d as t,r as a,j as s,o,E as l,b as r,w as n,u as i,c as d,G as u,F as c,f as p,a5 as m,a6 as f,i as _,a4 as v,g,h as k,H as j,x as h,y,V as b}from"./index-656dc629.js";import{_ as x}from"./tabbar.d997a979.js";import{_ as w}from"./pay.99eeea8c.js";import{M as C}from"./mescroll-body.cb3f7eec.js";import{M}from"./mescroll-empty.966dc165.js";import{u as S}from"./useMescroll.26ccf5de.js";import{g as I}from"./goto.e0aed7b8.js";import{_ as E}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.286409fc.js";import"./u-badge.973492be.js";import"./u-tabbar.8ee28cae.js";import"./u-safe-bottom.d9fa806b.js";import"./u-image.38c45e12.js";import"./u-transition.825c0e35.js";import"./u-button.e2de732d.js";import"./u-loading-icon.5e5c27a0.js";import"./u-popup.7e287da6.js";import"./pay.c96fa6a1.js";import"./mescroll-uni-option.de83ded3.js";import"./mescroll-i18n.6025c811.js";/* empty css                                                                       */const z=E(t({__name:"orderaddlist",setup(t){const E=a(null),z=a(!1),{mescrollInit:U,downCallback:A,getMescroll:D}=S(f,m);let O=a([]),P=a(!1),R=a(!1),F=a(""),G=a([]);a([]),s((e=>{F.value=e.status||"0",Y()}));const H=async t=>{await function(t){return e.delete(`tk_jhkd/deleteorderadd/${t}`,{showSuccessMessage:!0,showErrorMessage:!0})}(t),D().resetUpScroll()},V=t=>{P.value=!1;let a={page:t.num,limit:t.size,order_status:F.value};console.log(F.value),function(t){return e.get("tk_jhkd/getorderaddlist",t)}(a).then((e=>{let a=e.data.data;1==t.num&&(O.value=[]),O.value=O.value.concat(a),t.endSuccess(a.length),P.value=!0})).catch((()=>{P.value=!0,t.endErr()}))},Y=()=>{R.value=!1,G.value=[],e.get("tk_jhkd/getorderaddstatus").then((e=>{Object.values(e.data).forEach(((e,t)=>{G.value.push(e)})),R.value=!0})).catch((()=>{R.value=!0}))};return(e,t)=>{const a=_,s=v,m=g(k("tabbar"),x),f=g(k("pay"),w);return o(),l(u,null,[r(a,{class:"bg-[#f8f8f8] min-h-screen overflow-hidden"},{default:n((()=>[i(R)?(o(),d(a,{key:0,class:"fixed left-0 top-0 right-0 z-10"},{default:n((()=>[r(s,{"scroll-x":"true",class:"scroll-Y box-border px-[24rpx] bg-white"},{default:n((()=>[r(a,{class:"flex whitespace-nowrap justify-around"},{default:n((()=>[(o(!0),l(u,null,c(i(G),((e,t)=>(o(),d(a,{class:j(["text-sm leading-[90rpx]",{"class-select":i(F)===e.status.toString()}]),onClick:t=>{return a=e.status,F.value=a.toString(),O.value=[],void D().resetUpScroll();var a}},{default:n((()=>[h(y(e.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1})):p("v-if",!0),r(C,{ref:"mescrollRef",top:"44rpx",onInit:i(U),onDown:i(A),onUp:V},{default:n((()=>[i(O).length>0?(o(!0),l(u,{key:0},c(i(O),((e,t)=>(o(),d(a,{class:"tk-card",key:"index"},{default:n((()=>[r(a,{class:"text-xs font-weight",onClick:t=>i(I)("/addon/tk_jhkd/pages/orderdetail?id="+e.orderInfo.id)},{default:n((()=>[h("订单号:"+y(e.order_id),1)])),_:2},1032,["onClick"]),r(a,{class:"fb items-center"},{default:n((()=>[r(a,{class:"text-xs"},{default:n((()=>[h(y(e.create_time),1)])),_:2},1024),0==e.order_status?(o(),d(a,{key:0,class:"tk-tag",onClick:t=>(e=>{var t;z.value=!0,null==(t=E.value)||t.open("jhkdOrderAddPay",e.id,"/addon/tk_jhkd/pages/orderaddlist")})(e)},{default:n((()=>[h("立即支付")])),_:2},1032,["onClick"])):p("v-if",!0),1==e.order_status?(o(),d(a,{key:1,class:"tk-tag",onClick:t=>H(e.id)},{default:n((()=>[h("删除订单")])),_:2},1032,["onClick"])):p("v-if",!0)])),_:2},1024)])),_:2},1024)))),128)):p("v-if",!0),!i(O).length&&i(P)?(o(),d(M,{key:1,option:{icon:i(b)("static/resource/images/empty.png")}},null,8,["option"])):p("v-if",!0)])),_:1},8,["onInit","onDown"])])),_:1}),r(m,{addon:"tk_jhkd"}),r(f,{ref_key:"payRef",ref:E,onClose:t[0]||(t[0]=e=>z.value=!1)},null,512)],64)}}}),[["__scopeId","data-v-1778dea3"]]);export{z as default};
