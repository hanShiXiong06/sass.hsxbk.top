import{bu as e,d as a,a9 as t,r as l,m as s,o,c as r,w as d,u as n,b as i,x as f,y as u,n as _,f as x,E as p,F as c,G as m,N as v,i as g,C as h,a4 as b,g as y,h as F,V as k,t as w,$ as j,ah as C}from"./index-656dc629.js";import{_ as z}from"./u-loading-page.f8275a02.js";import{b as E,a as G}from"./fenxiao.6f2151fd.js";import{_ as H}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.5e5c27a0.js";import"./u-transition.825c0e35.js";const I=H(a({__name:"level",setup(a){t((()=>{$(),U()}));let H=l(!0),I=l([]),N=l({});const S=()=>{e.get("shop_fenxiao/level").then((e=>{I.value=e.data,I.value.forEach(((e,a)=>{e.level_id==V.value.level_id&&(Y.value=a,N.value=e)})),H.value=!1}))};let T=l({});const U=()=>{E().then((e=>{T.value=e.data}))};let V=l({}),Y=l(0);const $=()=>{G().then((e=>{V.value=e.data,S()}))},q=s((()=>{if(I.value.length&&I.value[Y.value+1]){let e=I.value[Y.value+1];if(e.task=[],e.complete=0,e.fenxiao_order_num>0){let a={title:"订单总数",desc:"一级分销订单总数满"+e.fenxiao_order_num+"个",condition:e.fenxiao_order_num,value:V.value.fenxiao_order_num,progress:parseFloat(V.value.fenxiao_order_num)>parseFloat(e.fenxiao_order_num)?100:(parseFloat(V.value.fenxiao_order_num)/parseFloat(e.fenxiao_order_num)*100).toFixed(2)};100==a.progress&&(e.complete+=1),e.task.push(a)}if(e.fenxiao_commission>0){let a={title:"佣金总额",desc:"一级分销订单佣金总额满"+j(e.fenxiao_commission)+"元",condition:j(e.fenxiao_commission),value:j(V.value.fenxiao_commission),progress:parseFloat(V.value.fenxiao_commission)>parseFloat(e.fenxiao_commission)?100:(parseFloat(V.value.fenxiao_commission)/parseFloat(e.fenxiao_commission)*100).toFixed(2)};100==a.progress&&(e.complete+=1),e.task.push(a)}if(e.fenxiao_order_money>0){let a={title:"订单总额",desc:"一级分销订单总额满"+j(e.fenxiao_order_money)+"元",condition:j(e.fenxiao_order_money),value:j(V.value.fenxiao_total_order),progress:parseFloat(V.value.fenxiao_total_order)>parseFloat(e.fenxiao_order_money)?100:(parseFloat(V.value.fenxiao_total_order)/parseFloat(e.fenxiao_order_money)*100).toFixed(2)};100==a.progress&&(e.complete+=1),e.task.push(a)}if(e.order_num>0){let a={title:"自购订单总数",desc:"自购订单总数满"+e.order_num+"个",condition:e.order_num,value:V.value.add_up_data.order_num,progress:parseFloat(V.value.add_up_data.order_num)>parseFloat(e.order_num)?100:(parseFloat(V.value.add_up_data.order_num)/parseFloat(e.order_num)*100).toFixed(2)};100==a.progress&&(e.complete+=1),e.task.push(a)}if(e.order_money>0){let a={title:"自购订单总额",desc:"自购订单总额满"+j(e.order_money)+"元",condition:j(e.order_money),value:j(V.value.add_up_data.order_sum),progress:parseFloat(V.value.add_up_data.order_sum)>parseFloat(e.order_money)?100:(parseFloat(V.value.add_up_data.order_sum)/parseFloat(e.order_money)*100).toFixed(2)};100==a.progress&&(e.complete+=1),e.task.push(a)}if(e.child_num>0){let a={title:"下线人数",desc:"一级下线人数达到"+e.child_num+"人",condition:e.child_num,value:V.value.add_up_data.child_count,progress:parseFloat(V.value.add_up_data.child_count)>parseFloat(e.child_num)?100:(parseFloat(V.value.add_up_data.child_count)/parseFloat(e.child_num)*100).toFixed(2)};100==a.progress&&(e.complete+=1),e.task.push(a)}if(e.child_fenxiao_num>0){let a={title:"下线分销商",desc:"一级下线分销商人数达到"+e.child_fenxiao_num+"人",condition:e.child_fenxiao_num,value:V.value.add_up_data.child_fenxiao_count,progress:parseFloat(V.value.add_up_data.child_fenxiao_count)>parseFloat(e.child_fenxiao_num)?100:(parseFloat(V.value.add_up_data.child_fenxiao_count)/parseFloat(e.child_fenxiao_num)*100).toFixed(2)};100==a.progress&&(e.complete+=1),e.task.push(a)}return e.task_num=1==e.upgrade_type?1:e.task.length,e}}));return(e,a)=>{const t=v,l=g,s=h,j=C,E=b,G=y(F("u-loading-page"),z);return o(),r(l,{style:_(e.themeColor())},{default:d((()=>[n(H)?x("v-if",!0):(o(),r(l,{key:0,class:"bg-[#f8f8f8] min-h-[100vh]"},{default:d((()=>[i(l,{class:"w-[100%] h-[40rpx] relative"},{default:d((()=>[i(t,{class:"w-[100%] h-[300rpx] absolute",src:n(k)("addon/shop_fenxiao/level/level-top-bg.png")},null,8,["src"])])),_:1}),i(l,{class:"flex items-center relative z-[20] mx-[60rpx] mb-[30rpx]"},{default:d((()=>[n(V).member.headimg?(o(),r(t,{key:0,class:"w-[90rpx] h-[90rpx] rounded-[50%]",src:n(k)(n(V).member.headimg),mode:"aspectFill"},null,8,["src"])):(o(),r(t,{key:1,class:"w-[90rpx] h-[90rpx] rounded-[50%]",src:n(k)("addon/shop_fenxiao/index/head.png"),mode:"aspectFill"},null,8,["src"])),i(l,{class:"ml-[20rpx] flex items-center"},{default:d((()=>[i(s,{class:"text-[32rpx] text-[#fff] font-bold"},{default:d((()=>[f(u(n(V).member.nickname),1)])),_:1}),i(s,{class:"rounded-sm ml-[10rpx] text-[#fff] text-[20rpx] border-solid border-[2rpx] border-[#fff] p-[6rpx]"},{default:d((()=>[f(u(n(N).level_name),1)])),_:1})])),_:1})])),_:1}),i(l,{class:"h-[300rpx] relative flex level-card-one items-center justify-center mx-[50rpx] rounded-[16rpx]"},{default:d((()=>[i(l,{class:"level-wrap w-[100%] h-[100%]",style:_({"background-image":"url("+n(k)("addon/shop_fenxiao/level/style_4_bg.png")+")","background-size":"cover"})},{default:d((()=>[n(I)[n(Y)+1]?(o(),r(l,{key:0,class:"text-[28rpx] text-[#fff] flex items-center"},{default:d((()=>[i(l,{class:"flex items-center"},{default:d((()=>[i(s,{class:"rounded-sm border-[2rpx] text-[24rpx] border-solid border-[#fff] px-[6rpx] py-[6rpx] mr-[6rpx]"},{default:d((()=>[f(u(n(I)[n(Y)+1].level_name),1)])),_:1}),i(s,null,{default:d((()=>[f(u(n(w)("notYetUnlocked")),1)])),_:1})])),_:1}),i(s,{class:"shop-fenxiao-icon icon-dasuozi ml-[6rpx] !text-[28rpx]"})])),_:1})):x("v-if",!0),n(I)[n(Y)+1]?(o(),r(l,{key:1,class:"text-[#fff] mt-[16rpx] text-[24rpx]"},{default:d((()=>[f(u(1==n(I)[n(Y)+1].upgrade_type?n(w)("arbitraryCondition"):n(w)("allConditions"))+u(n(w)("upgradable")),1)])),_:1})):x("v-if",!0),i(l,{class:"flex mt-[40rpx]"},{default:d((()=>[n(T).fenxiao_config&&n(T).fenxiao_config.level>=1?(o(),r(l,{key:0,class:"flex-1 text-left"},{default:d((()=>[i(l,{class:"text-[#fff] text-[24rpx]"},{default:d((()=>[f("一级分佣比率")])),_:1}),i(l,{class:"mt-[14rpx] text-[#fff] text-[38rpx] leading-[1]"},{default:d((()=>[f(u(n(N).one_rate),1),i(s,{class:"text-[24rpx] ml-[4rpx]"},{default:d((()=>[f("%")])),_:1})])),_:1})])),_:1})):x("v-if",!0),n(T).fenxiao_config&&n(T).fenxiao_config.level>=2?(o(),r(l,{key:1,class:"flex-1 text-left"},{default:d((()=>[i(l,{class:"text-[#fff] text-[24rpx]"},{default:d((()=>[f("二级分佣比率")])),_:1}),i(l,{class:"mt-[14rpx] text-[#fff] text-[38rpx] leading-[1]"},{default:d((()=>[f(u(n(N).two_rate),1),i(s,{class:"text-[24rpx] ml-[4rpx]"},{default:d((()=>[f("%")])),_:1})])),_:1})])),_:1})):x("v-if",!0),n(T).team_config&&1==n(T).team_config.is_open?(o(),r(l,{key:2,class:"flex-1 text-left"},{default:d((()=>[i(l,{class:"text-[#fff] text-[24rpx]"},{default:d((()=>[f("团队分佣比率")])),_:1}),i(l,{class:"mt-[14rpx] text-[#fff] text-[38rpx] leading-[1]"},{default:d((()=>[f(u(n(N).team_rate),1),i(s,{class:"text-[24rpx] ml-[4rpx]"},{default:d((()=>[f("%")])),_:1})])),_:1})])),_:1})):x("v-if",!0)])),_:1})])),_:1},8,["style"])])),_:1}),n(q)&&n(q).task.length?(o(),r(l,{key:0,class:"bg-[#fff] my-[30rpx] mx-[30rpx] p-[30rpx] rounded-[10rpx]"},{default:d((()=>[i(l,{class:"flex items-center justify-between"},{default:d((()=>[i(s,{class:"font-bold"},{default:d((()=>[f("快速升级技巧")])),_:1}),i(l,{class:"flex items-center text-[26rpx]"},{default:d((()=>[i(s,{class:"text-[#e7b667]"},{default:d((()=>[f(u(n(q).complete>n(q).task_num?n(q).task_num:n(q).complete),1)])),_:1}),i(s,{class:"text-[#bbb]"},{default:d((()=>[f("/"+u(n(q).task_num),1)])),_:1})])),_:1})])),_:1}),i(E,{"scroll-y":"true",class:"flex flex-col upgrade-content"},{default:d((()=>[(o(!0),p(m,null,c(n(q).task,((e,a)=>(o(),r(l,{class:"flex flex-col bg-[#f7f7f7] rounded-[10rpx] mt-[30rpx] py-[20rpx] px-[30rpx]",key:a},{default:d((()=>[i(l,{class:"flex items-center justify-between"},{default:d((()=>[i(s,{class:"mr-[10rpx] text-[28rpx]"},{default:d((()=>[f(u(e.title),1)])),_:2},1024),i(s,{class:"text-[#999] text-[28rpx]"},{default:d((()=>[f(u(100==e.progress?"已完成":"未完成"),1)])),_:2},1024)])),_:2},1024),i(l,{class:"my-[20rpx]"},{default:d((()=>[i(j,{percent:e.progress,activeColor:"var(--primary-color)","stroke-width":"4"},null,8,["percent"])])),_:2},1024),i(l,{class:"flex items-center justify-between"},{default:d((()=>[i(s,{class:"text-[24rpx] text-[#999]"},{default:d((()=>[f(u(e.desc),1)])),_:2},1024),i(l,{class:"flex items-center text-[26rpx]"},{default:d((()=>[i(s,{class:"text-[#e7b667]"},{default:d((()=>[f(u(e.value),1)])),_:2},1024),i(s,{class:"text-[#bbb]"},{default:d((()=>[f("/"+u(e.condition),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):x("v-if",!0)])),_:1})),i(G,{"bg-color":"rgb(248,248,248)",loading:n(H),loadingText:"",fontSize:"16",color:"#333"},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-abd60028"]]);export{I as default};
