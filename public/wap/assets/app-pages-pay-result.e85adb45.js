import{d as e,r as a,p as t,L as s,F as l,o as r,c,w as n,b as o,W as u,y as p,z as i,u as x,f,n as d,a as m,b2 as y,D as _,i as v,C as h,g,h as b,a7 as w,b3 as C,aM as S}from"./index-71c7df08.js";import{g as T}from"./pay.4cfa8889.js";const F=e({__name:"result",setup(e){const F=a(null),L=a(!1);let j="",k=0,z=0;t((e=>{j=e.trade_type,k=e.trade_id,P()}));const P=()=>{T(j,k).then((e=>{if(!uni.$u.test.isEmpty(e.data)){if(1==e.data.status&&z<5)return L.value=!0,z++,void setTimeout((()=>{P()}),1e3);F.value=e.data,L.value=!1,s({title:2==F.value.status?l("pay.paySuccess"):l("pay.payFail")})}}))},R=()=>{var e;const a=decodeURIComponent(uni.getStorageSync("payReturn"));m(a?{url:a,mode:"reLaunch"}:{url:y(),param:{code:null==(e=F.value)?void 0:e.out_trade_no},mode:"reLaunch"})};return(e,a)=>{const t=_,s=v,m=h,y=g(b("u-loading-icon"),C),T=g(b("u-modal"),S);return r(),c(s,{style:d(e.themeColor())},{default:n((()=>[F.value?(r(),c(s,{key:0,class:"w-screen h-screen flex flex-col items-center"},{default:n((()=>[o(s,{class:"flex-1 flex flex-col items-center w-full pt-[200rpx]"},{default:n((()=>[o(s,{class:"flex items-center"},{default:n((()=>[o(t,{class:u(["nc-iconfont -mb-[4rpx] !text-[44rpx]",2==F.value.status?"text-primary nc-icon-duihaoV6mm":"nc-icon-tanhaoV6mm text-red"])},null,8,["class"]),o(t,{class:"text-[36rpx] ml-[16rpx] font-500"},{default:n((()=>[p(i(2==F.value.status?x(l)("pay.paySuccess"):x(l)("pay.payFail")),1)])),_:1})])),_:1}),o(s,{class:"text-[56rpx] font-500 mt-[60rpx] price-font"},{default:n((()=>[o(t,{class:"text-[36rpx] mr-[6rpx]"},{default:n((()=>[p(i(x(l)("currency")),1)])),_:1}),o(t,null,{default:n((()=>[p(i(x(w)(F.value.money)),1)])),_:1})])),_:1})])),_:1}),o(s,{class:"pb-[260rpx]"},{default:n((()=>[o(m,{class:"w-[380rpx] !border-0 h-[80rpx] text-[28rpx] text-[#333] !bg-[#f2f2f2] flex-center font-500 rounded-[20rpx]",plain:!0,onClick:R},{default:n((()=>[p(i(2==F.value.status?x(l)("complete"):x(l)("close")),1)])),_:1})])),_:1})])),_:1})):f("v-if",!0),o(T,{show:L.value,showCancelButton:!0,confirmText:x(l)("pay.completePay"),cancelText:x(l)("pay.incompletePay"),onCancel:R,confirmColor:"var(--primary-color)"},{default:n((()=>[o(s,{class:"py-[20rpx]"},{default:n((()=>[o(y,{text:x(l)("pay.getting"),textSize:"16",mode:"circle",vertical:!0},null,8,["text"])])),_:1})])),_:1},8,["show","confirmText","cancelText"])])),_:1},8,["style"])}}});export{F as default};
