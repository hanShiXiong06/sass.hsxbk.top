import{d as e,r as t,j as l,l as a,o as s,c as r,w as o,b as u,u as d,A as i,y as n,z as c,f as p,U as x,ad as f,V as v,W as _,H as m,aV as g,t as h,a as b,E as y,c7 as k,B as w,g as j,h as C,i as F,D as S,ab as V,ac as T,C as O,s as L,bl as z,bY as D,aA as I,cl as A,_ as E,p as B,a6 as N,L as P,an as R,x as U,bz as H,af as J,bc as M,c6 as K,n as W,a3 as X,bf as Y,Z,$,bg as q,b_ as G,cb as Q,aw as ee,b7 as te,M as le}from"./index-71c7df08.js";import{_ as ae}from"./loading-page.vue_vue_type_script_setup_true_lang.c7dc2256.js";import{d as se,e as re,f as oe,h as ue}from"./goods.3be4f1b5.js";import{b as de,d as ie}from"./coupon.6319e3c7.js";import{u as ne}from"./cart.9b3f86c4.js";import{b as ce}from"./bind-mobile.b7e673b6.js";import{f as pe}from"./cloneDeep.77735539.js";/* empty css                                                                    */import{s as xe}from"./share-poster.aefc8367.js";import"./sms-code.vue_vue_type_script_setup_true_lang.e09e1c1f.js";const fe=E(e({__name:"ns-goods-sku",props:["goodsDetail"],emits:["change"],setup(e,{expose:E,emit:B}){const N=e,P=t(!1),R=t(null),U=t({skuId:"",name:[]}),H=t(""),J=t(1),M=l((()=>{let e="0.00";return e=Object.keys(G.value).length&&Object.keys(G.value.goods).length&&G.value.goods.is_discount&&G.value.sale_price!=G.value.price?G.value.sale_price:Object.keys(G.value).length&&Object.keys(G.value.goods).length&&G.value.goods.member_discount&&L()&&G.value.member_price!=G.value.price?G.value.member_price:G.value.price,e})),K=a(),W=l((()=>K.info)),X=ne();X.getList();const Y=l((()=>X.cartList)),Z=()=>{setTimeout((()=>{J.value>=G.value.stock&&(J.value=G.value.stock)}),0)},$=()=>{setTimeout((()=>{(!J.value||J.value<=0)&&(J.value=1),J.value>=G.value.stock&&(J.value=G.value.stock)}),0)},q=()=>{P.value=!1},G=l((()=>{let e=pe(N.goodsDetail);return Object.keys(e).length&&(Object.keys(U.value.name).length||(U.value.name=e.sku_spec_format.split(",")),e.goodsSpec.forEach(((e,t)=>{let l=e.spec_values.split(",");e.values=[],l.forEach(((l,a)=>{e.values[a]={},e.values[a].name=l,e.values[a].selected=!1,e.values[a].disabled=!1,U.value.name.forEach(((s,r)=>{r==t&&s==l&&(e.values[a].selected=!0)}))}))})),Q(),e.skuList&&Object.keys(e.skuList).length&&e.skuList.forEach(((t,l)=>{t.sku_id==U.value.skuId&&(e.detail=t)}))),e})),Q=()=>{N.goodsDetail.skuList.forEach(((e,t)=>{e.sku_spec_format==U.value.name.toString()&&(U.value.skuId=e.sku_id,B("change",e.sku_id))}))},ee=t(null);t(uni.getStorageSync("isbindmobile"));const te=()=>{if(!W.value)return m().setLoginBack({url:"/addon/shop/pages/goods/detail",param:{sku_id:G.value.sku_id}}),!1;if(uni.getStorageSync("isbindmobile"))return ee.value.open(),!1;if("join_cart"==H.value){let e=0,t="";Y.value["goods_"+G.value.goods_id]&&Y.value["goods_"+G.value.goods_id]["sku_"+G.value.sku_id]&&(e=g(Y.value["goods_"+G.value.goods_id]["sku_"+G.value.sku_id].num),t=g(Y.value["goods_"+G.value.goods_id]["sku_"+G.value.sku_id].id)),e+=Number(J.value),X.increase({id:t||"",goods_id:G.value.goods_id,sku_id:G.value.sku_id,stock:G.value.stock,sale_price:G.value.sale_price,num:e},0,(()=>{h({title:"加入购物车成功",icon:"none"})}))}else if("buy_now"==H.value){var e={sku_id:G.value.sku_id,num:J.value};uni.setStorage({key:"orderCreateData",data:{sku_data:[e]},success:()=>{b({url:"/addon/shop/pages/order/payment"})}})}q()};return E({open:(e="",t="")=>{H.value=e,P.value=!0,R.value=t}}),(e,t)=>{const l=w,a=j(C("u--image"),z),m=F,g=S,h=V,b=j(C("u-number-box"),D),L=T,E=O,B=j(C("u-popup"),I),N=j(C("u-overlay"),A);return s(),r(m,{onTouchmove:t[4]||(t[4]=i((()=>{}),["prevent","stop"]))},{default:o((()=>[u(N,{show:P.value,onClick:q,zIndex:"490"},{default:o((()=>[u(B,{class:"popup-type",show:P.value,onClose:q,mode:"bottom",overlay:!1,zIndex:"500"},{default:o((()=>[d(G).detail?(s(),r(m,{key:0,class:"py-[32rpx] relative",onTouchmove:t[3]||(t[3]=i((()=>{}),["prevent","stop"]))},{default:o((()=>[u(m,{class:"flex px-[32rpx] mb-[40rpx]"},{default:o((()=>[u(m,{class:"rounded-[var(--goods-rounded-big)] overflow-hidden w-[180rpx] h-[180rpx]"},{default:o((()=>[u(a,{width:"180rpx",height:"180rpx",src:d(y)(d(G).detail.sku_image),onClick:t[0]||(t[0]=e=>(e=>{if(""===e)return!1;var t=[];t.push(y(e)),k({indicator:"number",loop:!0,urls:t})})(d(G).detail.sku_image)),model:"aspectFill"},{error:o((()=>[u(l,{class:"w-[180rpx] h-[180rpx]",src:d(y)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:1},8,["src"])])),_:1}),u(m,{class:"flex flex-1 flex-col justify-between ml-[24rpx] py-[10rpx]"},{default:o((()=>[u(m,{class:"w-[100%]"},{default:o((()=>[u(m,{class:"text-[var(--price-text-color)] flex items-baseline"},{default:o((()=>[u(g,{class:"text-[32rpx] font-bold price-font"},{default:o((()=>[n("￥")])),_:1}),u(g,{class:"text-[48rpx] price-font"},{default:o((()=>[n(c(parseFloat(d(M)).toFixed(2).split(".")[0]),1)])),_:1}),u(g,{class:"text-[32rpx] mr-[6rpx] price-font"},{default:o((()=>[n("."+c(parseFloat(d(M)).toFixed(2).split(".")[1]),1)])),_:1})])),_:1}),u(m,{class:"text-[26rpx] leading-[32rpx] text-[var(--text-color-light6)] mt-[12rpx]"},{default:o((()=>[n("库存"+c(d(G).detail.stock)+c(d(G).goods.unit),1)])),_:1})])),_:1}),d(G).goodsSpec&&d(G).goodsSpec.length?(s(),r(m,{key:0,class:"text-[26rpx] leading-[30rpx] text-[var(--text-color-light6)] w-[100%] max-h-[60rpx] multi-hidden"},{default:o((()=>[n("已选规格："+c(d(G).detail.sku_spec_format),1)])),_:1})):p("v-if",!0),p(' \t\t\t\t\t\t<view v-if="goodsDetail.goodsSpec && goodsDetail.goodsSpec.length">\r\n\t\t\t\t\t\t\t\t<text>已选规格：{{goodsDetail.detail.sku_spec_format}}</text>\r\n\t\t\t\t\t\t\t</view> ')])),_:1})])),_:1}),u(L,{class:"h-[500rpx] px-[32rpx] box-border mb-[60rpx]","scroll-y":"true"},{default:o((()=>[(s(!0),x(v,null,f(d(G).goodsSpec,((e,t)=>(s(),r(m,{class:_({"mt-[20rpx]":0!=t}),key:t},{default:o((()=>[u(m,{class:"text-[28rpx] leading-[36rpx] mb-[24rpx]"},{default:o((()=>[n(c(e.spec_name),1)])),_:2},1024),u(m,{class:"flex flex-wrap"},{default:o((()=>[(s(!0),x(v,null,f(e.values,((e,l)=>(s(),r(m,{class:_(["box-border bg-[var(--temp-bg)] text-[24rpx] px-[44rpx] text-center h-[56rpx] flex-center mr-[20rpx] mb-[20rpx] border-1 border-solid rounded-[50rpx] border-[var(--temp-bg)]",{"!border-[var(--primary-color)] text-[var(--primary-color)] !bg-[var(--primary-color-light)]":e.selected}]),key:l,onClick:l=>((e,t)=>{U.value.name[t]=e.name,J.value=1,Q()})(e,t)},{default:o((()=>[n(c(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:2},1024)])),_:2},1032,["class"])))),128)),u(m,{class:"flex justify-between items-center mt-[20rpx]"},{default:o((()=>[u(m,{class:"text-[28rpx]"},{default:o((()=>[n("购买数量")])),_:1}),u(b,{min:1,max:d(G).stock,integer:"",step:1,"input-width":"68rpx",modelValue:J.value,"onUpdate:modelValue":t[2]||(t[2]=e=>J.value=e),"input-height":"52rpx"},{minus:o((()=>[u(g,{class:_(["text-[30rpx] nc-iconfont nc-icon-jianV6xx font-500",{"!text-[var(--text-color-light9)]":J.value<=1}])},null,8,["class"])])),input:o((()=>[u(h,{class:"text-[#303133] text-[28rpx] mx-[10rpx] w-[80rpx] h-[44rpx] bg-[var(--temp-bg)] leading-[44rpx] text-center rounded-[6rpx]",type:"number",onInput:Z,onBlur:$,modelValue:J.value,"onUpdate:modelValue":t[1]||(t[1]=e=>J.value=e)},null,8,["modelValue"])])),plus:o((()=>[u(g,{class:_(["text-[30rpx] nc-iconfont nc-icon-jiahaoV6xx font-500",{"!text-[var(--text-color-light9)]":J.value>=d(G).stock}])},null,8,["class"])])),_:1},8,["max","modelValue"])])),_:1})])),_:1}),u(m,{class:"px-[20rpx]"},{default:o((()=>[d(G).detail.stock>0?(s(),r(E,{key:0,"hover-class":"none",class:"!h-[80rpx] leading-[80rpx] text-[26rpx] font-500 rounded-[50rpx] primary-btn-bg",type:"primary",onClick:te},{default:o((()=>[n("确定")])),_:1})):(s(),r(E,{key:1,"hover-class":"none",class:"!h-[80rpx] leading-[80rpx] text-[26rpx] font-500 text-[#fff] bg-[#ccc] rounded-[50rpx]"},{default:o((()=>[n("已售罄")])),_:1}))])),_:1})])),_:1})):p("v-if",!0)])),_:1},8,["show"])])),_:1},8,["show"]),p(" 强制绑定手机号 "),u(ce,{ref_key:"bindMobileRef",ref:ee},null,512)])),_:1})}}}),[["__scopeId","data-v-0beb0b3f"]]),ve=E(e({__name:"detail",setup(e){const g=t({}),V=e=>{g.value=e},{setShare:D}=X(),A=a(),E=l((()=>A.info)),ce=ne();l((()=>ce.totalNum));const pe=t(null),ve=t({}),_e=t(!1),me=t(!1),ge=t(!1),he=t(!1),be=t(!1),ye=t(0),ke=t(""),we=t(""),je=t("");t(null),B((e=>{se({goods_id:e.goods_id||"",sku_id:e.sku_id||""}).then((e=>{if(!e.data.goods||"[]"===JSON.stringify(e.data))return h({title:"找不到该商品",icon:"none"}),setTimeout((()=>{b({url:"/addon/shop/pages/index",mode:"reLaunch"})}),600),!1;ve.value=N(e.data),Te.value=ve.value.goods.is_collect,ve.value.delivery_type_list=ve.value.goods.delivery_type_list?Object.values(ve.value.goods.delivery_type_list):[],ve.value.goods.goods_image=ve.value.goods.goods_image_thumb_big,ve.value.goods.goods_image.forEach(((e,t)=>{ve.value.goods.goods_image[t]=y(e)}));let t=N(e.data);if(ve.value.goods.attr_format=[],t.goods&&t.goods.attr_format){N(JSON.parse(t.goods.attr_format)).forEach(((e,t)=>{(e.attr_child_value_name&&!(e.attr_child_value_name instanceof Array)||e.attr_child_value_name instanceof Array&&e.attr_child_value_name.length)&&ve.value.goods.attr_format.push(e)}))}ke.value=ve.value.goods.goods_name,we.value="/addon/shop/pages/goods/detail?sku_id="+ve.value.sku_id,je.value=y(ve.value.goods.goods_cover_thumb_mid);let l={title:ve.value.goods.goods_name,desc:ve.value.goods.sub_title,url:ve.value.goods.goods_cover_thumb_mid};if(P({title:ve.value.goods.goods_name}),D({wechat:{...l},weapp:{...l}}),Object.keys(ve.value.goods).length&&ve.value.goods.is_discount&&Object.keys(ve.value.discount_info).length){let e=(new Date).getTime();ye.value=1e3*ve.value.discount_info.active.end_time-e.toFixed(0)}ze(),Ie(),Ze(),R((()=>{setTimeout((()=>{const e=Y().in(Ue);e.select(".swiper-box").boundingClientRect((e=>{He=e?e.height:0})).exec(),e.select(".detail-head").boundingClientRect((e=>{e&&(Je=e.height?e.height:0)})).exec()}),400)}))}))})),U((()=>{uni.removeStorageSync("distributionType"),ce.getList()}));const Ce=e=>{ve.value.skuList.forEach(((t,l)=>{t.sku_id==e&&Object.assign(ve.value,t)}))},Fe=l((()=>{let e=!1;return ve.value.skuList.forEach(((t,l)=>{t.sku_spec_format&&(e=!0)})),!(!e&&ve.value.stock<=0)&&(!e&&ve.value.stock,!0)})),Se=l((()=>{let e=!1;return(ve.value.service&&ve.value.service.length||ve.value.goodsSpec&&ve.value.goodsSpec.length||"real"==ve.value.goods.goods_type&&ve.value.delivery_type_list&&ve.value.delivery_type_list.length||Le.value.length)&&(e=!0),e})),Ve=e=>{pe.value.open(e)},Te=t(0),Oe=()=>{if(!E.value)return m().setLoginBack({url:"/addon/shop/pages/goods/detail",param:{sku_id:ve.value.sku_id}}),!1;(Te.value?oe(ve.value.goods_id):ue(ve.value.goods_id)).then((e=>{Te.value=!Te.value,Te.value?h({title:"收藏成功",icon:"none"}):h({title:"取消收藏",icon:"none"})}))},Le=t([]),ze=()=>{de({category_id:ve.value.goods.goods_category||"",goods_id:ve.value.goods_id||""}).then((e=>{Le.value=e.data.data.map((e=>(-1!=e.sum_count&&e.receive_count===e.sum_count&&(e.btnType="collected"),E.value&&e.is_receive&&e.limit_count===e.member_receive_count?e.btnType="using":e.btnType="collecting",e)))}))},De=t({count:0}),Ie=()=>{re(ve.value.goods_id).then((e=>{De.value=e.data}))},Ae=(e,t)=>{if(Array.isArray(e)){if(!e.length)return!1;k({indicator:"number",current:t,loop:!0,urls:l=e})}else{if(""===e)return!1;var l;(l=[]).push(y(e)),k({indicator:"number",loop:!0,urls:l})}},Ee=t(0),Be=()=>{he.value=!0};let Ne=H().platform;const Pe=l((()=>{let e="";return e+="height: 100rpx;",e+="padding-right: 30rpx;",e+="padding-left: 30rpx;",e+="font-size: 32rpx;","ios"===Ne?e+="font-weight: 500;":"android"===Ne&&(e+="font-size: 36rpx;"),e})),Re=l((()=>{let e="";return e+="font-size: 26px;","font-size: 26px;"})),Ue=q();let He=0,Je=0;const Me=t(!1);J((e=>{if(0==He||0==Je)return;let t=He-Je-20;Me.value=!1,e.scrollTop>=t&&(Me.value=!0)}));const Ke=e=>{"number"==typeof e&&Ae(ve.value.goods.goods_image,e)},We=t(null),Xe=t("");let Ye={};const Ze=()=>{Xe.value="?sku_id="+ve.value.sku_id,E.value&&E.value.member_id&&(Xe.value+="&mid="+E.value.member_id)},$e=()=>{Ye.sku_id=ve.value.sku_id,E.value&&E.value.member_id&&(Ye.member_id=E.value.member_id),We.value.openShare()},qe=t(""),Ge=l((()=>{let e="0.00";return Object.keys(ve.value).length&&Object.keys(ve.value.goods).length&&ve.value.goods.is_discount&&ve.value.sale_price!=ve.value.price?(e=ve.value.sale_price?ve.value.sale_price:ve.value.price,qe.value="discount_price"):Object.keys(ve.value).length&&Object.keys(ve.value.goods).length&&ve.value.goods.member_discount&&L()&&ve.value.member_price!=ve.value.price?(e=ve.value.member_price?ve.value.member_price:ve.value.price,qe.value="member_price"):(e=ve.value.price,qe.value=""),e}));return M((()=>{K()})),(e,t)=>{const l=S,a=F,h=j(C("u-swiper"),G),k=w,L=j(C("up-count-down"),Q),D=j(C("u-avatar"),ee),A=j(C("u-icon"),te),B=j(C("u--image"),z),N=j(C("u-parse"),le),P=O,R=T,U=j(C("u-popup"),I),H=j(C("loading-page"),ae);return s(),r(a,{style:W(e.themeColor())},{default:o((()=>[Object.keys(ve.value).length?(s(),r(a,{key:0,class:"bg-[var(--page-bg-color)] min-h-[100vh] relative"},{default:o((()=>[p(" 自定义头部 "),u(a,{class:_(["flex items-center fixed left-0 right-0 z-10 bg-transparent detail-head",{"!bg-[#fff]":Me.value}]),style:W(d(Pe))},{default:o((()=>[u(l,{class:"nc-iconfont nc-icon-zuoV6xx",style:W(d(Re)),onClick:t[0]||(t[0]=e=>{Z().length>1?$({delta:1}):b({url:"/addon/shop/pages/index",mode:"reLaunch"})})},null,8,["style"]),u(a,{class:_(["ml-auto !pt-[12rpx] !pb-[8rpx] p-[10rpx] bg-[rgba(255,255,255,.4)] rounded-full border-[2rpx] border-solid border-transparent box-border nc-iconfont nc-icon-fenxiangV6xx font-bold text-[#303133] text-[36rpx]",{"border-[#d8d8d8]":Me.value}]),onClick:$e},null,8,["class"])])),_:1},8,["class","style"]),u(a,{class:"swiper-box"},{default:o((()=>[u(h,{list:ve.value.goods.goods_image,indicator:ve.value.goods.goods_image.length,indicatorStyle:{bottom:"70rpx"},autoplay:!0,height:"100vw",radius:"0",onClick:Ke},null,8,["list","indicator"])])),_:1}),"discount_price"==qe.value?(s(),r(a,{key:0,class:"rounded-t-[40rpx] -mt-[44rpx] relative flex items-center justify-between !bg-cover box-border pb-[26rpx] h-[136rpx] px-[30rpx]",style:W({background:"url("+d(y)("addon/shop/detail/discount_price_bg.png")+") no-repeat"})},{default:o((()=>[u(a,{class:"text-[#fff]"},{default:o((()=>[u(l,{class:"text-[28rpx] mr-[10rpx] font-500"},{default:o((()=>[n("折扣价")])),_:1}),u(a,{class:"inline-block"},{default:o((()=>[u(l,{class:"text-[32rpx] price-font mr-[4rpx]"},{default:o((()=>[n("￥")])),_:1}),u(l,{class:"text-[56rpx] -mb-[4rpx] price-font"},{default:o((()=>[n(c(parseFloat(d(Ge)).toFixed(2).split(".")[0]),1)])),_:1}),u(l,{class:"text-[32rpx] price-font"},{default:o((()=>[n("."+c(parseFloat(d(Ge)).toFixed(2).split(".")[1]),1)])),_:1})])),_:1}),ve.value.market_price&&parseFloat(ve.value.market_price)?(s(),r(l,{key:0,class:"text-[32rpx] ml-[14rpx] line-through price-font"},{default:o((()=>[n("￥"+c(ve.value.market_price),1)])),_:1})):p("v-if",!0)])),_:1}),u(a,{class:"flex flex-col text-[#fff] items-end h-[59rpx] justify-between"},{default:o((()=>[u(k,{class:"h-[28rpx] mr-[2rpx]",src:d(y)("addon/shop/detail/discount_price.png"),mode:"heightFix"},null,8,["src"]),u(a,{class:"flex items-center text-[24rpx] -mb-[10rpx] overflow-hidden h-[28rpx]"},{default:o((()=>[u(l,{class:"mr-[4rpx]"},{default:o((()=>[n("距结束")])),_:1}),u(L,{class:"text-[#fff] text-[28rpx]",time:ye.value,format:"DD:HH:mm:ss",onChange:V},{default:o((()=>[u(a,{class:"flex"},{default:o((()=>[g.value.days>0?(s(),r(a,{key:0,class:"text-[24rpx] flex items-center"},{default:o((()=>[u(l,null,{default:o((()=>[n(c(g.value.days),1)])),_:1}),u(l,{class:"text-[20rpx] ml-[2rpx] mr-[4rpx]"},{default:o((()=>[n("天")])),_:1})])),_:1})):p("v-if",!0),u(a,{class:"text-[24rpx] flex items-center"},{default:o((()=>[g.value.hours?(s(),r(l,{key:0},{default:o((()=>[n(c(g.value.hours>10?g.value.hours:"0"+g.value.hours),1)])),_:1})):(s(),r(l,{key:1},{default:o((()=>[n("0")])),_:1})),u(l,{class:"text-[20rpx] ml-[2rpx] mr-[4rpx]"},{default:o((()=>[n("时")])),_:1})])),_:1}),u(a,{class:"text-[24rpx] flex items-center"},{default:o((()=>[u(l,null,{default:o((()=>[n(c(g.value.minutes),1)])),_:1}),u(l,{class:"text-[20rpx] ml-[2rpx] mr-[4rpx]"},{default:o((()=>[n("分")])),_:1})])),_:1}),u(a,{class:"text-[24rpx] flex items-center"},{default:o((()=>[u(l,null,{default:o((()=>[n(c(g.value.seconds<10?"0"+g.value.seconds:g.value.seconds),1)])),_:1}),u(l,{class:"text-[20rpx] ml-[2rpx] mr-[4rpx]"},{default:o((()=>[n("秒")])),_:1})])),_:1})])),_:1})])),_:1},8,["time"])])),_:1})])),_:1})])),_:1},8,["style"])):p("v-if",!0),u(a,{class:"bg-[var(--page-bg-color)] rounded-[40rpx] overflow-hidden -mt-[34rpx] relative"},{default:o((()=>[u(a,{class:_(["datail-title relative px-[30rpx]",{"pt-[40rpx]":"discount_price"==qe.value,"pt-[30rpx]":"discount_price"!=qe.value}])},{default:o((()=>["discount_price"!=qe.value?(s(),r(a,{key:0,class:"text-[var(--price-text-color)] flex items-baseline mb-[12rpx]"},{default:o((()=>[u(a,{class:"inline-block"},{default:o((()=>[u(l,{class:"text-[32rpx] font-medium price-font"},{default:o((()=>[n("￥")])),_:1}),u(l,{class:"text-[48rpx] price-font"},{default:o((()=>[n(c(parseFloat(d(Ge)).toFixed(2).split(".")[0]),1)])),_:1}),u(l,{class:"text-[32rpx] mr-[10rpx] price-font"},{default:o((()=>[n("."+c(parseFloat(d(Ge)).toFixed(2).split(".")[1]),1)])),_:1})])),_:1}),"member_price"==qe.value?(s(),r(k,{key:0,class:"h-[34rpx] mr-[12rpx] w-[80rpx]",src:d(y)("addon/shop/VIP.png"),mode:"heightFix"},null,8,["src"])):p("v-if",!0),ve.value.market_price&&parseFloat(ve.value.market_price)?(s(),r(l,{key:1,class:"text-[26rpx] text-[var(--text-color-light9)] line-through price-font"},{default:o((()=>[n(" ￥"+c(ve.value.market_price),1)])),_:1})):p("v-if",!0)])),_:1})):p("v-if",!0),u(a,{class:"text-[#333] font-medium text-[30rpx] multi-hidden leading-[40rpx]"},{default:o((()=>[n(c(ve.value.goods.goods_name),1)])),_:1}),u(a,{class:"flex items-start mt-[24rpx]"},{default:o((()=>[ve.value.label_info&&ve.value.label_info.length?(s(),r(a,{key:0,class:"flex flex-wrap"},{default:o((()=>[(s(!0),x(v,null,f(ve.value.label_info,(e=>(s(),r(a,{key:e.label_id,class:"tag-item text-[#FA6400] mb-[10rpx] h-[36rpx] leading-[32rpx] text-[20rpx] px-[12rpx] border-[2rpx] border-solid border-[#FA6400] mr-[15rpx] truncate"},{default:o((()=>[n(c(e.label_name),1)])),_:2},1024)))),128))])),_:1})):p("v-if",!0),u(a,{class:"text-[22rpx] mb-[10rpx] text-[var(--text-color-light9)] flex items-baseline ml-auto"},{default:o((()=>[u(l,{class:"whitespace-nowrap"},{default:o((()=>[n("销量")])),_:1}),u(l,{class:"mx-[2rpx]"},{default:o((()=>[n(c(ve.value.goods.sale_num),1)])),_:1}),u(l,null,{default:o((()=>[n(c(ve.value.goods.unit),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["class"]),d(Se)?(s(),r(a,{key:0,class:"mt-[var(--top-m)] sidebar-margin card-template"},{default:o((()=>[ve.value.service&&ve.value.service.length?(s(),r(a,{key:0,onClick:t[1]||(t[1]=e=>ge.value=!ge.value),class:"card-template-item"},{default:o((()=>[u(l,{class:"text-[#333] text-[26rpx] leading-[30rpx] font-400 shrink-0"},{default:o((()=>[n("服务")])),_:1}),u(a,{class:"text-[#343434] text-[26rpx] leading-[30rpx] font-400 truncate ml-auto"},{default:o((()=>[n(c(ve.value.service[0].service_name),1)])),_:1}),u(l,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light6)] ml-[8rpx]"})])),_:1})):p("v-if",!0),ve.value.goodsSpec&&ve.value.goodsSpec.length?(s(),r(a,{key:1,onClick:Ve,class:"card-template-item"},{default:o((()=>[u(l,{class:"text-[#333] text-[26rpx] leading-[30rpx] font-400 shrink-0 mr-[20rpx]"},{default:o((()=>[n("已选")])),_:1}),u(a,{class:"ml-auto text-right truncate flex-1 text-[#343434] text-[26rpx] leading-[30rpx] font-400"},{default:o((()=>[n(c(ve.value.sku_spec_format),1)])),_:1}),u(l,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light6)] ml-[8rpx]"})])),_:1})):p("v-if",!0),"real"==ve.value.goods.goods_type&&ve.value.delivery_type_list&&ve.value.delivery_type_list.length?(s(),r(a,{key:2,class:"card-template-item",onClick:Be},{default:o((()=>[u(l,{class:"text-[#333] text-[26rpx] leading-[30rpx] font-400 shrink-0"},{default:o((()=>[n("配送")])),_:1}),u(a,{class:"ml-auto flex items-center text-[#343434] text-[26rpx] leading-[30rpx] font-400"},{default:o((()=>[n(c(ve.value.delivery_type_list[Ee.value].name),1)])),_:1}),u(l,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light6)] ml-[8rpx]"})])),_:1})):p("v-if",!0),Le.value.length?(s(),r(a,{key:3,onClick:t[2]||(t[2]=e=>be.value=!0),class:"card-template-item"},{default:o((()=>[u(l,{class:"text-[#333] text-[26rpx] leading-[30rpx] font-400 shrink-0 mr-[20rpx]"},{default:o((()=>[n("领券")])),_:1}),u(a,{class:"ml-auto flex-1 flex-nowrap flex items-center overflow-hidden h-[44rpx] content-between"},{default:o((()=>[(s(!0),x(v,null,f(Le.value,((e,t)=>(s(),x(v,{key:t},[t<3?(s(),r(l,{key:0,class:_(["tag-item whitespace-nowrap border-[2rpx] px-[6rpx] h-[40rpx] border-solid border-[var(--primary-color)] text-[var(--primary-color)] mt-[4rpx]",{"mr-[12rpx]":Le.value.length!=t+1&&t<2,"ml-auto":0==t}])},{default:o((()=>[n(c(e.title),1)])),_:2},1032,["class"])):p("v-if",!0)],64)))),128))])),_:1}),u(l,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light6)] ml-[8rpx]"})])),_:1})):p("v-if",!0)])),_:1})):p("v-if",!0),u(a,{class:"mt-[var(--top-m)] sidebar-margin card-template"},{default:o((()=>[u(a,{class:_(["flex items-center justify-between min-h-[40rpx]",{"mb-[30rpx]":De.value&&De.value.list&&De.value.list.length}])},{default:o((()=>[u(l,{class:"title !mb-[0]"},{default:o((()=>[n("宝贝评价("+c(De.value.count)+")",1)])),_:1}),De.value.count?(s(),r(a,{key:0,class:"h-[40rpx] flex items-center",onClick:t[3]||(t[3]=e=>(ve.value.goods_id,void b({url:"/addon/shop/pages/evaluate/list",param:{goods_id:ve.value.goods_id}})))},{default:o((()=>[u(l,{class:"text-[24rpx] text-[var(--text-color-light9)]"},{default:o((()=>[n("查看全部")])),_:1}),u(l,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light9)]"})])),_:1})):p("v-if",!0),De.value.count?p("v-if",!0):(s(),r(l,{key:1,class:"text-[24rpx] text-[var(--text-color-light6)]"},{default:o((()=>[n("暂无评价")])),_:1}))])),_:1},8,["class"]),u(a,null,{default:o((()=>[(s(!0),x(v,null,f(De.value.list,((e,t)=>(s(),r(a,{class:_({"pb-[34rpx]":t!=De.value.list.length-1}),key:t},{default:o((()=>[u(a,{class:"flex items-center w-full"},{default:o((()=>[u(D,{"default-url":d(y)("static/resource/images/default_headimg.png"),src:d(y)(e.member_head),size:"50rpx",leftIcon:"none"},null,8,["default-url","src"]),u(l,{class:"ml-[10rpx] text-[28rpx] text-[#333]"},{default:o((()=>[n(c(e.member_name),1)])),_:2},1024)])),_:2},1024),u(a,{class:"flex justify-between w-full mt-[16rpx]"},{default:o((()=>[u(a,{class:"flex-1 w-[540rpx] text-[26rpx] text-[#333] max-h-[72rpx] leading-[36rpx] multi-hidden mr-[50rpx]"},{default:o((()=>[n(c(e.content),1)])),_:2},1024),u(a,{class:"w-[80rpx] shrink-0"},{default:o((()=>[e.image_mid&&e.image_mid.length?(s(),r(B,{key:0,width:"80rpx",height:"80rpx",radius:"var(--goods-rounded-mid)",src:d(y)(e.image_mid[0]),model:"aspectFill",onClick:t=>Ae(e.images[0])},{error:o((()=>[u(A,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src","onClick"])):p("v-if",!0)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class"])))),128))])),_:1})])),_:1}),ve.value.goods&&ve.value.goods.attr_format&&Object.keys(ve.value.goods.attr_format).length?(s(),r(a,{key:1,class:"my-[var(--top-m)] goods-sku sidebar-margin card-template"},{default:o((()=>[u(a,{class:"title mb-[30rpx]"},{default:o((()=>[n("商品属性")])),_:1}),u(a,null,{default:o((()=>[(s(!0),x(v,null,f(ve.value.goods.attr_format,((e,t)=>(s(),x(v,{key:t},[t<4||_e.value?(s(),r(a,{key:0,class:"card-template-item"},{default:o((()=>[u(l,{class:"text-[26rpx] leading-[30rpx] w-[160rpx] font-400 shrink-0 text-[var(--text-color-light9)]"},{default:o((()=>[n(c(e.attr_value_name),1)])),_:2},1024),u(a,{class:"text-[#333] box-border value-wid text-[26rpx] leading-[30rpx] font-400 truncate pl-[20rpx]"},{default:o((()=>[n(c(Array.isArray(e.attr_child_value_name)?e.attr_child_value_name.join(","):e.attr_child_value_name),1)])),_:2},1024),p(' <text class="nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light6)] ml-[8rpx]"></text> ')])),_:2},1024)):p("v-if",!0)],64)))),128)),ve.value.goods.attr_format.length>4?(s(),r(a,{key:0,class:"flex-center",onClick:t[4]||(t[4]=e=>_e.value=!_e.value)},{default:o((()=>[u(l,{class:"text-[24rpx] mr-[10rpx]"},{default:o((()=>[n(c(_e.value?"收起":"展开"),1)])),_:1}),u(l,{class:_(["nc-iconfont !text-[22rpx]",{"nc-icon-xiaV6xx":!_e.value,"nc-icon-shangV6xx-1":_e.value}])},null,8,["class"])])),_:1})):p("v-if",!0)])),_:1})])),_:1})):p("v-if",!0),u(a,{class:"my-[var(--top-m)] sidebar-margin card-template px-[var(--pad-sidebar-m)]"},{default:o((()=>[u(a,{class:"title"},{default:o((()=>[n("商品详情")])),_:1}),u(a,{class:"u-content"},{default:o((()=>[u(N,{content:ve.value.goods.goods_desc,tagStyle:{img:"vertical-align: top;",p:"overflow: hidden;word-break:break-word;"}},null,8,["content"])])),_:1})])),_:1}),u(a,{class:"tab-bar-placeholder"}),u(a,{class:"border-[0] border-t-[2rpx] border-solid border-[#f5f5f5] w-[100%] flex justify-between pl-[32rpx] pr-[4rpx] bg-[#fff] box-border fixed left-0 bottom-0 tab-bar z-1 items-center"},{default:o((()=>[u(a,{class:"flex items-center"},{default:o((()=>[u(a,{class:"flex flex-col justify-center items-center mr-[38rpx]",onClick:t[5]||(t[5]=e=>d(b)({url:"/addon/shop/pages/index",mode:"reLaunch"}))},{default:o((()=>[u(a,{class:"nc-iconfont nc-icon-shouyeV6xx11 text-[36rpx]"}),u(l,{class:"text-[20rpx] mt-[10rpx]"},{default:o((()=>[n("首页")])),_:1})])),_:1}),u(a,{class:"flex flex-col justify-center items-center mr-[38rpx]",onClick:$e},{default:o((()=>[u(a,{class:"nc-iconfont nc-icon-fenxiangV6xx text-[36rpx]"}),u(l,{class:"text-[20rpx] mt-[10rpx]"},{default:o((()=>[n("分享")])),_:1})])),_:1}),u(a,{class:"flex flex-col justify-center items-center mr-[38rpx]",onClick:Oe},{default:o((()=>[u(l,{class:_(["nc-iconfont text-[36rpx]",{"text-[#ff0000] nc-icon-xihuanV6mm":Te.value,"text-[#303133] nc-icon-guanzhuV6xx":!Te.value}])},null,8,["class"]),u(l,{class:"text-[20rpx] mt-[10rpx]"},{default:o((()=>[n("收藏")])),_:1})])),_:1})])),_:1}),1==ve.value.goods.status?(s(),r(a,{key:0,class:"flex flex-1"},{default:o((()=>["real"==ve.value.goods.goods_type||"virtual"==ve.value.goods.goods_type&&"verify"!=ve.value.goods.virtual_receive_type?(s(),r(P,{key:0,class:"flex-1 !h-[70rpx] font-500 text-[26rpx] !text-[#fff] !m-0 !mr-[16rpx] leading-[70rpx] rounded-full remove-border",style:{background:"linear-gradient(127deg, #FFB000 0%, #FFA029 100%)"},onClick:t[6]||(t[6]=e=>Ve("join_cart"))},{default:o((()=>[n(" 加入购物车")])),_:1})):p("v-if",!0),d(Fe)?(s(),r(P,{key:1,style:W({width:"real"==ve.value.goods.goods_type||"virtual"==ve.value.goods.goods_type&&"verify"!=ve.value.goods.virtual_receive_type?"200rpx":"420rpx!important"}),class:"flex-1 !h-[70rpx] font-500 text-[26rpx] !text-[#fff] primary-btn-bg !m-0 !mr-[16rpx] leading-[70rpx] rounded-full remove-border",onClick:t[7]||(t[7]=e=>Ve("buy_now"))},{default:o((()=>[n("立即购买")])),_:1},8,["style"])):(s(),r(P,{key:2,style:W({width:"real"==ve.value.goods.goods_type||"virtual"==ve.value.goods.goods_type&&"verify"!=ve.value.goods.virtual_receive_type?"200rpx":"420rpx!important"}),class:"flex-1 !h-[70rpx] font-500 text-[26rpx] !text-[#fff] !bg-[#ccc] !m-0 !mr-[16rpx] leading-[70rpx] rounded-full remove-border"},{default:o((()=>[n("已售罄")])),_:1},8,["style"]))])),_:1})):(s(),r(a,{key:1,class:"flex flex-1"},{default:o((()=>[u(P,{class:"w-[100%] !h-[70rpx] font-500 text-[26rpx] !text-[#fff] !bg-[#ccc] !m-0 leading-[70rpx] rounded-full remove-border"},{default:o((()=>[n("该商品已下架")])),_:1})])),_:1}))])),_:1})])),_:1}),p(" 服务 "),u(a,{onTouchmove:t[10]||(t[10]=i((()=>{}),["prevent","stop"]))},{default:o((()=>[u(U,{class:"popup-type",show:ge.value,onClose:t[9]||(t[9]=e=>ge.value=!1)},{default:o((()=>[u(a,{class:"min-h-[480rpx] popup-common",onTouchmove:t[8]||(t[8]=i((()=>{}),["prevent","stop"]))},{default:o((()=>[u(a,{class:"title"},{default:o((()=>[n(" 商品服务 ")])),_:1}),u(R,{class:"h-[520rpx]","scroll-y":"true"},{default:o((()=>[u(a,{class:"pl-[22rpx] pb-[28rpx] pr-[37rpx]"},{default:o((()=>[(s(!0),x(v,null,f(ve.value.service,((e,t)=>(s(),r(a,{class:"flex mb-[28rpx]"},{default:o((()=>[u(k,{class:"mt-[4rpx] w-[32rpx] h-[32rpx] mr-[14rpx]",src:d(y)(e.image||"addon/shop/icon_service.png"),mode:"aspectFit"},null,8,["src"]),u(a,{class:"flex-1"},{default:o((()=>[u(a,{class:"text-[30rpx] leading-[36rpx] text-[#333] mb-[8rpx]"},{default:o((()=>[n(c(e.service_name),1)])),_:2},1024),u(a,{class:"text-[24rpx] leading-[36rpx] text-[var(--text-color-light9)]"},{default:o((()=>[n(c(e.desc),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256))])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1}),p(" 配送 "),u(a,{onTouchmove:t[13]||(t[13]=i((()=>{}),["prevent","stop"]))},{default:o((()=>[u(U,{class:"popup-type",show:he.value,onClose:t[12]||(t[12]=e=>he.value=!1)},{default:o((()=>[u(a,{class:"min-h-[360rpx] popup-common",onTouchmove:t[11]||(t[11]=i((()=>{}),["prevent","stop"]))},{default:o((()=>[u(a,{class:"title"},{default:o((()=>[n("配送方式")])),_:1}),u(R,{class:"h-[520rpx]","scroll-y":"true"},{default:o((()=>[u(a,{class:"px-[var(--popup-sidebar-m)]"},{default:o((()=>[(s(!0),x(v,null,f(ve.value.delivery_type_list,((e,t)=>(s(),r(a,{class:"flex mb-[40rpx]",onClick:l=>((e,t)=>{Ee.value=t,he.value=!1,uni.setStorageSync("distributionType",e.name)})(e,t)},{default:o((()=>[u(k,{class:"mt-[4rpx] w-[32rpx] h-[32rpx] mr-[14rpx]",src:d(y)("addon/shop/icon_service.png"),mode:"aspectFit"},null,8,["src"]),u(a,{class:"flex-1"},{default:o((()=>[u(a,{class:"text-[30rpx] leading-[36rpx] text-[#333] mb-[8rpx]"},{default:o((()=>[n(c(e.name),1)])),_:2},1024),u(a,{class:"text-[24rpx] leading-[36rpx] text-[var(--text-color-light9)]"},{default:o((()=>[n(c(e.desc),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1}),p(" 优惠券 "),u(a,{onTouchmove:t[17]||(t[17]=i((()=>{}),["prevent","stop"]))},{default:o((()=>[u(U,{class:"popup-type",show:be.value,onClose:t[16]||(t[16]=e=>be.value=!1)},{default:o((()=>[u(a,{class:"min-h-[480rpx] popup-common",onTouchmove:t[15]||(t[15]=i((()=>{}),["prevent","stop"]))},{default:o((()=>[u(a,{class:"title"},{default:o((()=>[n(" 优惠券 ")])),_:1}),u(R,{class:"h-[520rpx]","scroll-y":"true"},{default:o((()=>[u(a,{class:"px-[32rpx]"},{default:o((()=>[(s(!0),x(v,null,f(Le.value,((e,t)=>(s(),r(a,{class:"mb-[30rpx] flex items-center border-[2rpx] border-solid border-[rgba(0,0,0,.1)] rounded-[var(--rounded-small)]",key:t},{default:o((()=>[u(a,{class:"flex flex-col items-center my-[20rpx] w-[200rpx] border-0 border-r-[2rpx] border-dashed border-[rgba(0,0,0,.1)]"},{default:o((()=>[u(a,{class:"text-xs price-font"},{default:o((()=>[u(l,{class:"text-[28rpx]"},{default:o((()=>[n("￥")])),_:1}),u(l,{class:"text-[48rpx]"},{default:o((()=>[n(c(Number(e.price)),1)])),_:2},1024)])),_:2},1024),u(l,{class:"text-xs mt-[12rpx]"},{default:o((()=>[n(c(Number(e.min_condition_money)?"满"+Number(e.min_condition_money)+"元可用":"无门槛"),1)])),_:2},1024)])),_:2},1024),u(a,{class:"ml-[20rpx] flex-1 flex flex-col py-[20rpx]"},{default:o((()=>[u(l,{class:"text-xs font-500"},{default:o((()=>[n(c(e.title),1)])),_:2},1024),u(l,{class:"text-xs text-[var(--text-color-light6)] mt-[12rpx]"},{default:o((()=>[n(c(1==e.valid_type&&"领取之日起"+e.length+"天内有效"||2==e.valid_type&&"领取之日起至"+e.valid_end_time),1)])),_:2},1024)])),_:2},1024),"collecting"===e.btnType?(s(),r(l,{key:0,class:"bg-[var(--primary-color)] mr-[20rpx] w-[106rpx] box-border text-center text-[#fff] h-[50rpx] text-[22rpx] px-[20rpx] leading-[50rpx] rounded-[100rpx]",onClick:t=>(e=>{if(!E.value)return m().setLoginBack({url:"/addon/shop/pages/goods/detail",param:{sku_id:ve.value.sku_id}}),!1;ie({coupon_id:e.id||"",number:1}).then((e=>{ze()}))})(e)},{default:o((()=>[n("领取")])),_:2},1032,["onClick"])):(s(),r(l,{key:1,class:"!bg-[#FFB4B1] mr-[20rpx] text-[#fff] mr-[20rpx] h-[50rpx] text-[22rpx] px-[20rpx] leading-[50rpx] rounded-[100rpx]"},{default:o((()=>[n(c("collected"===e.btnType?"已领完":"已领取"),1)])),_:2},1024))])),_:2},1024)))),128))])),_:1})])),_:1}),u(a,{class:"btn-wrap"},{default:o((()=>[u(P,{class:"primary-btn-bg btn",onClick:t[14]||(t[14]=e=>be.value=!1)},{default:o((()=>[n("确定")])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1}),u(fe,{ref_key:"goodsSkuRef",ref:pe,"goods-detail":ve.value,onChange:Ce},null,8,["goods-detail"]),u(xe,{ref_key:"sharePosterRef",ref:We,posterType:"shop_goods",posterId:ve.value.goods.poster_id,posterParam:d(Ye),copyUrlParam:Xe.value},null,8,["posterId","posterParam","copyUrlParam"])])),_:1})):p("v-if",!0),u(H,{loading:me.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-a3fc18d8"]]);export{ve as default};
