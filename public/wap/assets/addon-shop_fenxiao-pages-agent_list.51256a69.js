import{bu as e,d as t,r,j as a,o as s,c as l,w as o,u as n,I as d,b as c,y as f,z as i,f as p,L as u,K as x,J as m,n as _,a3 as g,a4 as b,Q as y,D as h,i as v,g as w,h as k,l as j,Z as C,x as F}from"./index-d8a8f699.js";import{_ as I}from"./u-empty.41eb000a.js";import{_ as z}from"./u-loading-page.c740ef13.js";import{M}from"./mescroll-body.f9302aea.js";import{M as S}from"./mescroll-empty.2fe85dec.js";import{u as U}from"./useMescroll.26ccf5de.js";import{a as D}from"./fenxiao.966b2ea4.js";import{_ as E}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.5ba98c98.js";import"./u-loading-icon.6808ae8c.js";import"./u-transition.db07fff7.js";import"./mescroll-i18n.49872024.js";const J=E(t({__name:"agent_list",setup(t){const{mescrollInit:E,downCallback:J,getMescroll:Z}=U(b,g);let B=r("");a((async()=>{await e.get("shop_fenxiao/order/agent/config").then((e=>{B.value=e.data.is_open}))}));let K=r([]),L=r({member:{}}),N=r({}),Q=r(!0),R=r(!0);Q.value=!0,D().then((e=>{L.value=e.data,Q.value=!1})).catch((()=>{Q.value=!1}));const T=t=>{let r={is_settlement:X.value,page:t.num,limit:t.size};var a;R.value=!0,(a=r,e.get("shop_fenxiao/order/agent",a)).then((e=>{let r=e.data.data;1==t.num&&(K.value=[]),K.value=K.value.concat(r),R.value=!1,t.endSuccess(r.length)})).catch((()=>{R.value=!1,t.endErr()}))},W=()=>{e.get("shop_fenxiao/order/agent/stat").then((e=>{N.value=e.data}))};W();let X=r(1);const Y=e=>{X.value=e,K.value=[],Z().resetUpScroll(),W()};return(e,t)=>{const r=y,a=h,g=v,b=w(k("u-empty"),I),U=w(k("u-loading-page"),z);return s(),l(g,{class:"bg-[#f8f8f8] min-h-[100vh]",style:_(e.themeColor())},{default:o((()=>[n(Q)||1!=n(B)?p("v-if",!0):(s(),d(x,{key:0},[c(g,{class:"flex items-center wrap-bg p-[50rpx]"},{default:o((()=>[n(L).member&&n(L).member.headimg?(s(),l(r,{key:0,class:"w-[90rpx] h-[90rpx] rounded-full mr-[20rpx]",src:n(j)(n(L).member.headimg),mode:"aspectFill"},null,8,["src"])):(s(),l(r,{key:1,class:"w-[90rpx] h-[90rpx] rounded-full mr-[20rpx]",src:n(j)("addon/shop_fenxiao/index/head.png"),mode:"aspectFill"},null,8,["src"])),c(g,{class:"flex flex-col"},{default:o((()=>[c(g,{class:"flex items-center"},{default:o((()=>[c(a,{class:"truncate text-[#fff] max-w-[380rpx] mr-[10rpx] text-[28rpx]"},{default:o((()=>[f(i(n(L).member.nickname||n(L).member.username),1)])),_:1}),n(L).agent_level?(s(),l(a,{key:0,class:"text-[#fff] text-[24rpx] border-[2rpx] border-solid border-[#fff] px-[6rpx] py-[8rpx] whitespace-nowrap"},{default:o((()=>[f(i(n(L).agent_level.name),1)])),_:1})):p("v-if",!0)])),_:1}),n(L).agent_level?(s(),l(a,{key:0,class:"text-[#fff] text-[24rpx] mt-[14rpx]"},{default:o((()=>[f("享"+i(Number(n(L).agent_level.discount))+"折优惠",1)])),_:1})):(s(),l(a,{key:1,class:"text-[#fff] text-[24rpx] mt-[14rpx]"},{default:o((()=>[f("您还不是渠道代理商")])),_:1}))])),_:1})])),_:1}),c(g,{class:"bg-[#fff] sticky top-[0] z-10"},{default:o((()=>[c(g,{class:"flex whitespace-nowrap justify-around"},{default:o((()=>[c(g,{class:u(["text-center justify-center flex flex-1 h-[90rpx] mx-[60rpx] items-center border-0 border-b-[2rpx] border-solid border-[transparent]",{"!border-[var(--primary-color)] text-[var(--primary-color)]":1==n(X)}]),onClick:t[0]||(t[0]=e=>Y(1))},{default:o((()=>[c(a,{class:"text-[28rpx]"},{default:o((()=>[f("已结算")])),_:1}),c(a,{class:"text-[28rpx]"},{default:o((()=>[f("("+i(n(C)(n(N).agent_commission))+")",1)])),_:1})])),_:1},8,["class"]),c(g,{class:u(["text-sm text-center justify-center flex flex-1 h-[90rpx] mx-[60rpx] items-center border-0 border-b-[2rpx] border-solid border-[transparent]",{"!border-[var(--primary-color)] text-[var(--primary-color)]":0==n(X)}]),onClick:t[1]||(t[1]=e=>Y(0))},{default:o((()=>[c(a,{class:"text-[28rpx]"},{default:o((()=>[f("待结算")])),_:1}),c(a,{class:"text-[28rpx]"},{default:o((()=>[f("("+i(n(C)(n(N).unsettlement))+")",1)])),_:1})])),_:1},8,["class"])])),_:1})])),_:1}),c(M,{ref:"mescrollRef",bottom:"100rpx",onInit:n(E),down:{use:!1},onUp:T},{default:o((()=>[(s(!0),d(x,null,m(n(K),((e,t)=>(s(),l(g,{class:"ranking-list bg-[#fff] rounded-[16rpx] sidebar-marign mt-[24rpx]",key:t},{default:o((()=>[c(g,{class:"bg-[#fff] rounded-[10rpx] p-[30rpx] mb-[18rpx]"},{default:o((()=>[c(g,{class:"flex items-center justify-between text-[28rpx]"},{default:o((()=>[c(a,null,{default:o((()=>[f("订单号："+i(e.order_no),1)])),_:2},1024),c(a,{class:"text-[var(--primary-color)]"},{default:o((()=>[f(i(e.is_settlement?"已结算":"未结算"),1)])),_:2},1024)])),_:2},1024),c(g,{class:"flex pt-[40rpx]"},{default:o((()=>[e.order_goods&&e.order_goods.goods_image_thumb_mid?(s(),l(r,{key:0,class:"w-[160rpx] h-[160rpx] rounded-[10rpx]",src:n(j)(e.order_goods.goods_image_thumb_mid),mode:"aspectFill"},null,8,["src"])):(s(),l(r,{key:1,class:"w-[160rpx] h-[160rpx] rounded-[10rpx]",src:n(j)("addon/shop_fenxiao/index/commission_rank.png"),mode:"aspectFill"},null,8,["src"])),c(g,{class:"flex flex-1 flex-col ml-[20rpx]"},{default:o((()=>[c(g,{class:"text-[28rpx] leading-[1.5]"},{default:o((()=>[c(a,null,{default:o((()=>[f(i(e.order_goods.goods_name.length>21?e.order_goods.goods_name.substr(0,21)+"...":e.order_goods.goods_name),1)])),_:2},1024),c(g,{class:"text-[#999] ml-[10rpx] inline-block whitespace-nowrap"},{default:o((()=>[c(g,{class:"flex items-center"},{default:o((()=>[c(a,null,{default:o((()=>[f("(购买人：")])),_:1}),c(g,{class:"max-w-[120rpx] truncate"},{default:o((()=>[f(i(e.shop_order.member.nickname||"-"),1)])),_:2},1024),c(a,null,{default:o((()=>[f(")")])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1024),c(g,{class:"text-[var(--primary-color)] font-bold mt-[20rpx] text-[28rpx]"},{default:o((()=>[f(" ￥"+i(n(C)(e.order_goods.goods_money)),1)])),_:2},1024),e.order_goods&&1!=e.order_goods.status&&e.order_goods.status_name?(s(),l(g,{key:0,class:"mt-[20rpx] text-[24rpx] text-[#999]"},{default:o((()=>[f(i(n(F)("refundStatus"))+i(e.order_goods.status_name),1)])),_:2},1024)):p("v-if",!0)])),_:2},1024)])),_:2},1024),c(g,{class:"flex items-center justify-between mt-[40rpx] flex-wrap"},{default:o((()=>[c(g,{class:"flex items-center text-[24rpx]"},{default:o((()=>[c(a,null,{default:o((()=>[f("折扣：")])),_:1}),c(g,{class:"text-[var(--primary-color)]"},{default:o((()=>[f(i(parseFloat(e.agent_discount))+"折 ",1)])),_:2},1024)])),_:2},1024),c(g,{class:"text-[24rpx] flex items-center"},{default:o((()=>[c(a,null,{default:o((()=>[f("计算价：")])),_:1}),c(a,{class:"text-[var(--primary-color)]"},{default:o((()=>[f(i(n(C)(e.order_original_goods_money)||"0.00"),1)])),_:2},1024)])),_:2},1024),c(g,{class:"text-[24rpx] flex items-center"},{default:o((()=>[c(a,null,{default:o((()=>[f("佣金：")])),_:1}),c(a,{class:"text-[var(--primary-color)]"},{default:o((()=>[f(i(n(C)(e.commission)||"0.00"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),n(K).length||n(R)?p("v-if",!0):(s(),l(S,{key:0,option:{icon:n(j)("static/resource/images/empty.png")}},null,8,["option"]))])),_:1},8,["onInit"])],64)),0!=n(B)||n(Q)?p("v-if",!0):(s(),l(g,{key:1,class:"h-[100vh] w-[100vw] flex justify-center items-center"},{default:o((()=>[c(b,{text:"渠道代理设置未开启",width:"347rpx",height:"265rpx",icon:n(j)("static/resource/images/system/empty.png")},null,8,["icon"])])),_:1})),c(U,{"bg-color":"rgb(248,248,248)",loading:n(Q),loadingText:"",fontSize:"16",color:"#333"},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-7e05766f"]]);export{J as default};
