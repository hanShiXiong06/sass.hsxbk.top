import{d as e,l as o,m as s,r as a,o as t,c as r,w as l,b as i,n as p,u as d,E as n,F as m,G as c,f as u,a5 as x,a6 as f,i as _,g,h as v,V as h,H as b,x as y,y as j,_ as k,a as w,C}from"./index-656dc629.js";import{_ as F}from"./u-icon.286409fc.js";import{_ as I}from"./u--image.8451ef47.js";import{M as z}from"./mescroll-body.cb3f7eec.js";import{M as P}from"./mescroll-empty.966dc165.js";import{u as S}from"./useMescroll.26ccf5de.js";import{e as U}from"./fenxiao.6f2151fd.js";import{s as M}from"./share-poster.62a765e3.js";import{_ as E}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.38c45e12.js";import"./u-transition.825c0e35.js";import"./mescroll-uni-option.de83ded3.js";import"./mescroll-i18n.6025c811.js";/* empty css                                                                       */import"./u-popup.7e287da6.js";import"./u-safe-bottom.d9fa806b.js";const H=E(e({__name:"goods",setup(e){const{mescrollInit:E,downCallback:H,getMescroll:R}=S(f,x),V=o(),A=s((()=>V.info));let G=a([]),T=a(!0);const q=e=>{let o={page:e.num,limit:e.size};T.value=!0,U(o).then((o=>{let s=o.data.data;1==e.num&&(G.value=[]),G.value=G.value.concat(s),T.value=!1,e.endSuccess(s.length)})).catch((()=>{T.value=!1,e.endErr()}))};let B=a(null),D=a(""),J=a(""),K={};const L=e=>{K.sku_id=e.goodsSku.sku_id,A.value&&A.value.member_id&&(K.member_id=A.value.member_id),(e=>{J.value="/wap/addon/shop/pages/goods/detail",D.value="?goods_id="+e.goods_id,A.value&&A.value.member_id&&(D.value+="&mid="+A.value.member_id)})(e),B.value.openShare()};return(e,o)=>{const s=_,a=g(v("u-icon"),F),x=g(v("u--image"),I),f=C;return t(),r(s,{class:"bg-[#f8f8f8] min-h-[100vh]",style:p(e.themeColor())},{default:l((()=>[i(z,{ref:"mescrollRef",top:"350rpx",onInit:d(E),onUp:q,down:{use:!1}},{default:l((()=>[i(s,{class:"fixed top-0 left-0 right-0 z-10"},{default:l((()=>[i(s,{class:"w-[100%] h-[340rpx]",style:p({backgroundImage:"url("+d(h)("addon/shop_fenxiao/fenxiao_goods_bg.png")+")","background-size":"cover"})},null,8,["style"])])),_:1}),(t(!0),n(c,null,m(d(G),((e,o)=>(t(),r(s,{class:b(["bg-white flex p-[20rpx] mx-[30rpx] rounded-[16rpx] overflow-hidden mt-[20rpx]",{"mb-[20rpx]":o+1==d(G).length}]),key:o,onClick:o=>{w({url:"/addon/shop/pages/goods/detail",param:{goods_id:e.goods_id}})}},{default:l((()=>[i(x,{class:"rounded-[10rpx] overflow-hidden",width:"190rpx",height:"190rpx",src:d(h)(e.goods_cover_thumb_mid?e.goods_cover_thumb_mid:""),model:"aspectFill"},{error:l((()=>[i(a,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"]),i(s,{class:"flex-1 flex flex-col ml-[20rpx] py-[6rpx]"},{default:l((()=>[i(s,{class:"text-[28rpx] text-[#303133] leading-[40rpx] multi-hidden mb-[10rpx]"},{default:l((()=>[y(j(e.goods_name),1)])),_:2},1024),i(s,{class:"mt-auto flex justify-between items-baseline"},{default:l((()=>[i(s,{class:"text-[var(--price-text-color)] price-font flex items-baseline"},{default:l((()=>[i(f,{class:"text-[26rpx] font-500"},{default:l((()=>[y("￥")])),_:1}),i(f,{class:"text-[36rpx] font-500"},{default:l((()=>[y(j(parseFloat(e.goodsSku.price).toFixed(2).split(".")[0]),1)])),_:2},1024),i(f,{class:"text-[24rpx] font-500"},{default:l((()=>[y("."+j(parseFloat(e.goodsSku.price).toFixed(2).split(".")[1]),1)])),_:2},1024)])),_:2},1024),i(s,{onClick:k((o=>L(e)),["stop"]),class:"text-[22rpx] flex items-center border-[2rpx] border-solid border-[var(--price-text-color)] px-[12rpx] py-[8rpx] rounded-[50rpx] text-[var(--price-text-color)]"},{default:l((()=>[i(f,{class:"nc-iconfont nc-icon-fenxiangV6xx-1 mr-[4rpx] !text-[28rpx]"}),i(f,null,{default:l((()=>[y("赚"+j(e.commission)+"元",1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128)),d(G).length||d(T)?u("v-if",!0):(t(),r(P,{key:0,option:{icon:d(h)("static/resource/images/empty.png")}},null,8,["option"]))])),_:1},8,["onInit"]),i(M,{ref_key:"sharePosterRef",ref:B,posterType:"fenxiao_goods",posterParam:d(K),copyUrlParam:d(D),copyUrl:d(J)},null,8,["posterParam","copyUrlParam","copyUrl"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-f3b7fd8c"]]);export{H as default};
