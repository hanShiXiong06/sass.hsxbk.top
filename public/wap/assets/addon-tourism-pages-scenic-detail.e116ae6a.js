import{d as e,r as t,l,j as a,p as s,E as n,o as c,c as u,w as r,u as d,b as o,y as i,z as x,f,cd as _,U as p,ad as m,V as g,n as v,g as b,h,i as y,D as k,cf as w,ac as F,s as C,H as j,a as D,b_ as V,aA as P,B as S,C as E,M as I,_ as A}from"./index-71c7df08.js";import{_ as U}from"./loading-page.vue_vue_type_script_setup_true_lang.c7dc2256.js";import{r as z}from"./tourism.86990a9a.js";import{s as B}from"./share-poster.aefc8367.js";const M=A(e({__name:"detail",setup(e){let A=t([]),M=t([]),H=t(!0),L=t(""),R=t(!1),T=t([]),Y=t(!1),q=t("");const G=l(),J=a((()=>G.info));t(null),s((e=>{H.value=!0,z(e.scenic_id).then((t=>{L.value=e.scenic_id,M.value=t.data,T.value.push({id:1,latitude:M.value.latitude,longitude:M.value.longitude,iconPath:n("addon/tourism/tourism/map_icon.png"),height:25}),A.value=[],M.value.image_thumb_big&&M.value.image_thumb_big.length?M.value.image_thumb_big.forEach(((e,t)=>{A.value.push(n(e))})):A.value.push(n(M.value.cover_thumb_big)),W(),H.value=!1})).catch((()=>{H.value=!1}))}));let K=t({ticket_id:"",reserve_time:(e=>{let t=e.getFullYear(),l=e.getMonth()+1,a=e.getDate();return""+(t+"-"+(l<10?"0"+l:l)+"-"+(a<10?"0"+a:a))})(((e,t="")=>{var l=864e5*e;return t?new Date(t+l):new Date(Date.now()+l)})(0)),num:1,scenic_id:L});let N=t(null),O=t(""),Q={};const W=()=>{O.value="?scenic_id="+M.value.scenic_id,J.value&&J.value.member_id&&(O.value+="&mid="+J.value.member_id)},X=()=>{Q.scenic_id=M.value.scenic_id,J.value&&J.value.member_id&&(Q.member_id=J.value.member_id),N.value.openShare()};let Z=e=>{let t="";return t=e.member_discount&&C()?"member_price":"",t},$=e=>{let t="0.00";return t=e.member_discount&&C()&&e.member_price||e.price,parseFloat(t).toFixed(2)};return(e,t)=>{const l=b(h("u-swiper"),V),a=y,s=k,z=w,G=b(h("u-popup"),P),J=S,W=E,ee=b(h("u-parse"),I),te=F,le=b(h("loading-page"),U);return c(),u(a,{class:"bg-[#f7f7f7] min-h-screen overflow-hidden",style:v(e.themeColor())},{default:r((()=>[d(H)?f("v-if",!0):(c(),u(a,{key:0},{default:r((()=>[o(l,{list:d(A),height:"380rpx",radius:"0"},null,8,["list"]),o(a,{class:"chunk-wrap pt-4 pb-3 rounded-t-2xl relative -mt-[30rpx]"},{default:r((()=>[o(a,{class:"flex justify-between items-center"},{default:r((()=>[o(a,{class:"flex-1"},{default:r((()=>[o(a,{class:"text-[34rpx] font-bold multi-hidden leading-6"},{default:r((()=>[i(x(d(M).scenic_name),1)])),_:1}),o(a,{class:"text-xs mt-2"},{default:r((()=>[i("景点级别「"+x(d(M).scenic_level)+"星」",1)])),_:1})])),_:1}),o(a,{class:"flex flex-col items-center text-[#6D7278] ml-[40rpx] pl-[50rpx] pr-[30rpx] border-0 border-l border-solid border-[#F0F0F0]",onClick:X},{default:r((()=>[o(s,{class:"nc-iconfont nc-icon-fenxiangV6xx-1 text-lg"}),o(s,{class:"mt-1 text-xs"},{default:r((()=>[i("分享")])),_:1})])),_:1})])),_:1}),f(' <view class="flex justify-between text-[#543E3E] items-baseline mt-3">\r\n\t\t\t\t\t<view class="text-xs member-price pl-2 py-1 rounded-l-lg">\r\n\t\t\t\t\t\t<text>5.0评分</text>\r\n\t\t\t\t\t\t<text class="ml-3">风景很好</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class="text-xs flex items-center">\r\n\t\t\t\t\t\t<text>39条评论</text>\r\n\t\t\t\t\t\t<text class="nc-iconfont nc-icon-youV6xx text-[26rpx]"></text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view> '),o(a,{class:"flex mt-3"},{default:r((()=>[o(a,{class:"bg-[#F2F4F9] mr-2 py-2 px-3 rounded-md w-[240rpx] box-border"},{default:r((()=>[o(s,{class:"text-[26rpx] font-bold"},{default:r((()=>[i("营业中")])),_:1}),o(a,{class:"text-xs mt-1"},{default:r((()=>[o(s,null,{default:r((()=>[i(x(d(M).open_time),1)])),_:1}),o(s,{class:"text-[26rpx] nc-iconfont nc-icon-youV6xx"})])),_:1})])),_:1}),o(a,{class:"bg-[#F2F4F9] py-2 px-3 rounded-md flex flex-1 items-center",onClick:t[0]||(t[0]=e=>_(R)?R.value=!0:R=!0)},{default:r((()=>[o(a,{class:"flex-1"},{default:r((()=>[f(' <text class="text-[26rpx] font-bold">距您直线12.3km</text> '),o(s,{class:"text-[26rpx] font-bold"},{default:r((()=>[i("景点地址")])),_:1}),o(a,{class:"text-xs mt-1"},{default:r((()=>[o(s,null,{default:r((()=>[i(x(d(M).address),1)])),_:1}),o(s,{class:"text-[26rpx] nc-iconfont nc-icon-youV6xx"})])),_:1})])),_:1}),o(a,{class:"flex flex-col ml-3"},{default:r((()=>[o(s,{class:"nc-iconfont nc-icon-dizhiV6mm leading-[1] p-[8rpx] text-center bg-[#fff] text-[32rpx] rounded-full"}),o(s,{class:"text-xs mt-[4rpx]"},{default:r((()=>[i("地图")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),o(G,{show:d(R),onClose:t[1]||(t[1]=e=>_(R)?R.value=!1:R=!1),closeable:!0},{default:r((()=>[o(a,{class:"text-center py-[30rpx] font-bold leading-none"},{default:r((()=>[o(s,null,{default:r((()=>[i("地图")])),_:1})])),_:1}),o(a,null,{default:r((()=>[o(z,{class:"map-body w-full h-[600rpx]",latitude:d(M).latitude,longitude:d(M).longitude,markers:d(T)},null,8,["latitude","longitude","markers"])])),_:1})])),_:1},8,["show"]),d(M).ticket_list&&d(M).ticket_list.length?(c(),u(a,{key:0,class:"chunk-wrap"},{default:r((()=>[o(a,{class:"chunk-head"},{default:r((()=>[o(s,null,{default:r((()=>[i("门票")])),_:1})])),_:1}),(c(!0),p(g,null,m(d(M).ticket_list,((e,t)=>(c(),u(a,{key:e.goods_id},{default:r((()=>[o(a,{class:"flex border-0 border-b border-solid border-[#F2F2F2] py-[30rpx] justify-between"},{default:r((()=>[o(a,{class:"flex flex-col"},{default:r((()=>[o(s,{class:"text-sm font-bold"},{default:r((()=>[i(x(e.goods_name),1)])),_:2},1024),f(' <text class="text-xs text-color mt-1">票数: {{item.stock}}</text> '),o(a,{class:"flex text-xs text-[#646464] mt-1"},{default:r((()=>[o(s,{class:"class-select"},{default:r((()=>[i("官方")])),_:1}),o(s,{class:"class-select"},{default:r((()=>[i("有条件退")])),_:1}),o(s,{class:"text-color"},{default:r((()=>[i("无需换票")])),_:1})])),_:1}),o(a,{class:"flex text-xs text-[#646464] mt-1",onClick:t=>{return l=e.goods_content,Y.value=!0,void(q.value=l);var l}},{default:r((()=>[o(s,null,{default:r((()=>[i("门票说明"),o(s,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx]"})])),_:1})])),_:2},1032,["onClick"])])),_:2},1024),o(a,{class:"flex flex-col justify-center"},{default:r((()=>[o(a,{class:"text-xs text-[#626262]"},{default:r((()=>[o(s,{class:"text-[#FA6400] price-font"},{default:r((()=>[i("￥")])),_:1}),o(s,{class:"text-lg font-bold text-[#FA6400] price-font"},{default:r((()=>[i(x(d($)(e)),1)])),_:2},1024),"member_price"==d(Z)(e)?(c(),u(J,{key:0,class:"h-[22rpx] ml-[6rpx] w-[55rpx]",src:d(n)("addon/tourism/VIP.png"),mode:"widthFix"},null,8,["src"])):f("v-if",!0),i(" 起 ")])),_:2},1024),o(W,{class:"w-[128rpx] h-[60rpx] leading-[60rpx] text-sm text-white bg-color rounded-2xl mt-[20rpx]",onClick:t=>(e=>{if(!C())return j().setLoginBack({url:"/addon/tourism/pages/scenic/detail",param:{scenic_id:L.value}}),!1;K.value.ticket_id=e.goods_id,uni.setStorageSync("scenicCreateData",K.value),D({url:"/addon/tourism/pages/scenic/order"})})(e)},{default:r((()=>[i("预订")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):f("v-if",!0),f(" 门票说明 "),o(G,{show:d(Y),onClose:t[2]||(t[2]=e=>_(Y)?Y.value=!1:Y=!1),closeable:!0},{default:r((()=>[o(a,{class:"text-center py-[30rpx] font-bold leading-none"},{default:r((()=>[o(s,null,{default:r((()=>[i("门票说明")])),_:1})])),_:1}),o(a,{class:"pt-[28rpx] pb-[40rpx] px-[28rpx]"},{default:r((()=>[o(te,{class:"max-h-[60vh]","scroll-y":!0},{default:r((()=>[d(q)?(c(),u(ee,{key:0,content:d(q),tagStyle:{img:"vertical-align: top;"}},null,8,["content"])):(c(),u(s,{key:1,class:"block px-5"},{default:r((()=>[i("暂无购买须知")])),_:1}))])),_:1})])),_:1})])),_:1},8,["show"]),d(M).telephone?(c(),u(a,{key:1,class:"chunk-wrap"},{default:r((()=>[o(a,{class:"chunk-head"},{default:r((()=>[o(s,null,{default:r((()=>[i("联系电话")])),_:1})])),_:1}),o(a,{class:"text-sm py-3 px-1 text-[var(--text-color-light6)] flex items-center"},{default:r((()=>[o(s,{class:"iconfont icondianhua-xianxingyuankuang font-bold mr-2 text-lg"}),o(s,null,{default:r((()=>[i(x(d(M).telephone),1)])),_:1})])),_:1})])),_:1})):f("v-if",!0),o(a,{class:"chunk-wrap"},{default:r((()=>[o(a,{class:"chunk-head"},{default:r((()=>[o(s,null,{default:r((()=>[i("景区介绍")])),_:1})])),_:1}),o(a,{class:"pt-[28rpx] pb-[40rpx] scheduling-content"},{default:r((()=>[d(M).scenic_desc?(c(),u(ee,{key:0,content:d(M).scenic_desc,tagStyle:{img:"vertical-align: top;"}},null,8,["content"])):(c(),u(s,{key:1},{default:r((()=>[i("暂无景区介绍")])),_:1}))])),_:1})])),_:1}),o(a,{class:"chunk-wrap"},{default:r((()=>[o(a,{class:"chunk-head"},{default:r((()=>[o(s,null,{default:r((()=>[i("景区周边")])),_:1})])),_:1}),o(a,{class:"pt-[28rpx] pb-[40rpx] scheduling-content"},{default:r((()=>[d(M).surround?(c(),u(ee,{key:0,content:d(M).surround,tagStyle:{img:"vertical-align: top;"}},null,8,["content"])):(c(),u(s,{key:1},{default:r((()=>[i("暂无景区周边")])),_:1}))])),_:1})])),_:1})])),_:1})),o(le,{loading:d(H)},null,8,["loading"]),o(B,{ref_key:"sharePosterRef",ref:N,posterType:"tourism_scenic",posterId:d(M).poster_id,posterParam:d(Q),copyUrlParam:d(O)},null,8,["posterId","posterParam","copyUrlParam"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-9f71c3cd"]]);export{M as default};
