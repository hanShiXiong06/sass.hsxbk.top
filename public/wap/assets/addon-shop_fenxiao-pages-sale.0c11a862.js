import{d as e,r as t,o as a,c as s,w as l,b as r,u as o,E as d,x as n,y as i,G as p,F as c,f as x,n as f,a5 as u,a6 as m,i as _,$ as b,H as h,V as v,a as y}from"./index-e6ce9fbf.js";import{g,a as w,b as j}from"./sale.74b7a4fa.js";import{M as k}from"./mescroll-body.dc3de07c.js";import{M as I}from"./mescroll-empty.b423055b.js";import{u as C}from"./useMescroll.26ccf5de.js";import{_ as M}from"./_plugin-vue_export-helper.1b428a4d.js";import"./mescroll-uni-option.2f7b06f4.js";import"./mescroll-i18n.6025c811.js";/* empty css                                                                       */const O=M(e({__name:"sale",setup(e){const{mescrollInit:M,downCallback:O,getMescroll:E}=C(m,u);let S=t(!0);const F=t([]),G=e=>{g({page:e.num,limit:e.size}).then((t=>{let a=t.data.data;1==e.num&&(F.value=[],H(a)),F.value=F.value.concat(a),e.endSuccess(a.length)})).catch((()=>{S.value=!1,e.endErr()}))},H=async e=>{const t=await w();let a=e.map((e=>e.period_id));if(Object.keys(t.data).length&&(a.length&&-1==a.indexOf(t.data.id)||!a.length)){let e=JSON.parse(JSON.stringify(t.data));e.reward_money=e.total_reward_money,e.period_id=e.id,F.value.unshift(e)}S.value=!1};let J=t({});j().then((e=>{J.value=e.data}));return(e,t)=>{const u=_;return a(),s(u,{class:"bg-[#f8f8f8] min-h-[100vh]",style:f(e.themeColor())},{default:l((()=>[r(k,{ref:"mescrollRef",down:{use:!1},onInit:o(M),onUp:G},{default:l((()=>[o(S)?x("v-if",!0):(a(),d(p,{key:0},[r(u,{class:"wechat w-full h-[180rpx]"}),r(u,{class:"wechat w-full h-[20rpx] rounded-b-[50%]"}),r(u,{class:"p-[24rpx] relative mt-[-120rpx] box-border"},{default:l((()=>[r(u,{class:"w-full box-border bg-[#fff] px-[24rpx] py-[30rpx] rounded-[10rpx] overflow-hidden"},{default:l((()=>[r(u,{class:"text-[26rpx] text-center text-[#999]"},{default:l((()=>[n("销售奖励（元）")])),_:1}),r(u,{class:"text-[50rpx] font-600 text-center mt-[24rpx]"},{default:l((()=>[n(i(o(b)(o(J).sale_commission)||0),1)])),_:1}),r(u,{class:"mt-[24rpx] flex justify-center"},{default:l((()=>[r(u,{class:"px-[10rpx] leading-[35rpx] h-[35rpx] text-[#999] rounded-[2rpx]"},{default:l((()=>[n(" 待发放:"+i(o(b)(o(J).wait_sale_commission)||0)+"（元） ",1)])),_:1})])),_:1})])),_:1}),r(u,{class:"mt-[24rpx] bg-[#fff] px-[24rpx] box-border rounded-[10rpx] overflow-hidden"},{default:l((()=>[(a(!0),d(p,null,c(F.value,((e,t)=>(a(),s(u,{class:h(["flex py-[30rpx] box-border border-0 border-solid border-[#ddd]",{"border-b-[1rpx]":t!=F.value.length-1}]),onClick:t=>{return a=e.period_id,void y({url:"/addon/shop_fenxiao/pages/sale_detail",param:{id:a}});var a}},{default:l((()=>[r(u,{class:"flex-1 flex flex-col justify-between"},{default:l((()=>[r(u,{class:"text-[26rpx] font-600"},{default:l((()=>[n(i(e.is_send?"已发放":"待发放"),1)])),_:2},1024),e.is_settlement?(a(),s(u,{key:0,class:"text-[24rpx] text-[#999]"},{default:l((()=>[n("已于 "+i(e.sale_end_time)+" 结算该奖励",1)])),_:2},1024)):(a(),s(u,{key:1,class:"text-[24rpx] text-[#999]"},{default:l((()=>[n("预计于 "+i(e.sale_end_time)+" 结算该奖励",1)])),_:2},1024))])),_:2},1024),r(u,{class:"text-[35rpx] font-600 text-[var(--price-text-color)] h-[100rpx] leading-[100rpx]"},{default:l((()=>[n(" +"+i(o(b)(e.reward_money)),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),256))])),_:1}),F.value.length||o(S)?x("v-if",!0):(a(),s(I,{key:0,option:{icon:o(v)("static/resource/images/empty.png")}},null,8,["option"]))])),_:1})],64))])),_:1},8,["onInit"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-08ea265d"]]);export{O as default};
