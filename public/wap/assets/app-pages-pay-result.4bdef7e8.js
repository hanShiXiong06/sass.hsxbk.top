import{bt as e,d as a,r as t,p as s,L as l,F as r,o as n,c,w as o,b as u,W as p,y as i,z as f,u as x,f as d,n as m,a as y,bu as v,D as _,i as h,C as b,g,h as w,ab as C,bv as S,a6 as T}from"./index-22c9735d.js";const F=a({__name:"result",setup(a){const F=t(null),L=t(!1);let $="",k=0,z=0;s((e=>{$=e.trade_type,k=e.trade_id,E()}));const E=()=>{(function(a,t){return e.get(`pay/info/${a}/${t}`,{},{showErrorMessage:!0})})($,k).then((e=>{if(!uni.$u.test.isEmpty(e.data)){if(1==e.data.status&&z<5)return L.value=!0,z++,void setTimeout((()=>{E()}),1e3);F.value=e.data,L.value=!1,l({title:2==F.value.status?r("pay.paySuccess"):r("pay.payFail")})}}))},P=()=>{var e;const a=decodeURIComponent(uni.getStorageSync("payReturn"));y(a?{url:a,mode:"reLaunch"}:{url:v(),param:{code:null==(e=F.value)?void 0:e.out_trade_no},mode:"reLaunch"})};return(e,a)=>{const t=_,s=h,l=b,y=g(w("u-loading-icon"),S),v=g(w("u-modal"),T);return n(),c(s,{style:m(e.themeColor())},{default:o((()=>[F.value?(n(),c(s,{key:0,class:"w-screen h-screen flex flex-col items-center"},{default:o((()=>[u(s,{class:"flex-1 flex flex-col items-center w-full pt-[200rpx]"},{default:o((()=>[u(s,{class:"flex items-center"},{default:o((()=>[u(t,{class:p(["nc-iconfont -mb-[4rpx] !text-[44rpx]",2==F.value.status?"text-primary nc-icon-duihaoV6mm":"nc-icon-tanhaoV6mm text-red"])},null,8,["class"]),u(t,{class:"text-[36rpx] ml-[16rpx] font-500"},{default:o((()=>[i(f(2==F.value.status?x(r)("pay.paySuccess"):x(r)("pay.payFail")),1)])),_:1})])),_:1}),u(s,{class:"text-[56rpx] font-500 mt-[60rpx] price-font"},{default:o((()=>[u(t,{class:"text-[36rpx] mr-[6rpx]"},{default:o((()=>[i(f(x(r)("currency")),1)])),_:1}),u(t,null,{default:o((()=>[i(f(x(C)(F.value.money)),1)])),_:1})])),_:1})])),_:1}),u(s,{class:"pb-[260rpx]"},{default:o((()=>[u(l,{class:"w-[380rpx] !border-0 h-[80rpx] text-[28rpx] text-[#333] !bg-[#f2f2f2] flex-center font-500 rounded-[20rpx]",plain:!0,onClick:P},{default:o((()=>[i(f(2==F.value.status?x(r)("complete"):x(r)("close")),1)])),_:1})])),_:1})])),_:1})):d("v-if",!0),u(v,{show:L.value,showCancelButton:!0,confirmText:x(r)("pay.completePay"),cancelText:x(r)("pay.incompletePay"),onCancel:P,confirmColor:"var(--primary-color)"},{default:o((()=>[u(s,{class:"py-[20rpx]"},{default:o((()=>[u(y,{text:x(r)("pay.getting"),textSize:"16",mode:"circle",vertical:!0},null,8,["text"])])),_:1})])),_:1},8,["show","confirmText","cancelText"])])),_:1},8,["style"])}}});export{F as default};
