import{d as e,r as t,q as l,o,c as r,w as a,u as s,b as i,H as d,aN as c,f as u,_ as n,E as p,F as x,G as f,a as _,a3 as g,g as v,h as m,C as h,i as b,a4 as k,x as y,y as w,V as C,m as F,W as j,I as S,ab as N,aK as I,l as z,e as E,v as A,n as V,a5 as B,a6 as L,B as O,X as R,N as D,j as T,a9 as M,s as U}from"./index-905183d4.js";import{_ as $}from"./u-icon.86a2aad0.js";import{_ as P}from"./u--image.b5d65e0e.js";import{_ as J}from"./tabbar.f4383367.js";import{_ as q}from"./u-loading-page.7aa0a449.js";import{b as G,i as H,c as K,j as W}from"./goods.2e1a20de.js";import{M as X}from"./mescroll-empty.f9bce990.js";import{_ as Y}from"./_plugin-vue_export-helper.1b428a4d.js";import{M as Q}from"./mescroll-body.b8d008ed.js";import{u as Z}from"./useMescroll.26ccf5de.js";import{_ as ee}from"./u-number-box.3b1a803a.js";import{_ as te}from"./u-popup.e3f6594b.js";import{u as le}from"./cart.f169c06a.js";import"./u-image.44c969ef.js";import"./u-transition.dbaca185.js";import"./u-badge.82a65592.js";import"./u-tabbar.bedfa48a.js";import"./u-safe-bottom.e94b03c1.js";import"./u-loading-icon.c376267d.js";import"./mescroll-uni-option.0af4878d.js";import"./mescroll-i18n.6025c811.js";/* empty css                                                                       */const oe=Y(e({__name:"category-template-two-one",props:{config:{type:Object,default:()=>({})},categoryId:{type:[String,Number],default:0}},setup(e){const F=e;let j=F.config,S=F.categoryId,N=t(""),I=t(!0);l((()=>{E()}));const z=t([]),E=()=>{I.value=!0,G().then((e=>{if(z.value=e.data,S)for(let t=0;t<z.value.length;t++){if(z.value[t].category_id==S){A.value=t;break}if(z.value[t].child_list)for(let e=0;e<z.value[t].child_list.length;e++)if(z.value[t].child_list[e].category_id==S){A.value=t;break}}I.value=!1})).catch((()=>{I.value=!1}))},A=t(0),V=()=>{N.value&&_({url:"/addon/shop/pages/goods/list",param:{goods_name:N.value}})};return(e,t)=>{const l=g,F=v(m("u-icon"),$),S=h,E=b,B=k,L=v(m("u--image"),P),O=v(m("tabbar"),J),R=v(m("u-loading-page"),q);return o(),r(E,{class:"bg-[#F4F6F8] min-h-screen"},{default:a((()=>[z.value.length?(o(),r(E,{key:0,class:"mescroll-box"},{default:a((()=>[s(j).search.control?(o(),r(E,{key:0,class:"search-box z-10 bg-[#fff] fixed top-0 left-0 right-0 h-[106rpx] box-border"},{default:a((()=>[i(l,{class:d(["search-ipt pl-[20rpx] text-[24rpx]",{"pr-[96rpx]":s(N),"pr-[60rpx]":!s(N)}]),type:"text",modelValue:s(N),"onUpdate:modelValue":t[0]||(t[0]=e=>c(N)?N.value=e:N=e),placeholder:s(j).search.title,onConfirm:V},null,8,["class","modelValue","placeholder"]),i(E,{class:"flex items-center h-[70rpx] absolute right-[48rpx] top-[18rpx] z-2"},{default:a((()=>[s(N)?(o(),r(F,{key:0,name:"close-circle-fill",color:"#A5A6A6",size:"28rpx",onClick:t[1]||(t[1]=e=>c(N)?N.value="":N="")})):u("v-if",!0),i(E,{class:"h-[70rpx] w-[40rpx] text-center leading-[70rpx]",onClick:n(V,["stop"])},{default:a((()=>[i(S,{class:"iconfont iconxiazai17 text-[28rpx]"})])),_:1},8,["onClick"])])),_:1})])),_:1})):u("v-if",!0),i(E,{class:d(["tabs-box z-2 fixed left-0 bg-[#fff] bottom-[50px] top-0",{"!top-[106rpx]":s(j).search.control}])},{default:a((()=>[i(B,{"scroll-y":!0,class:"scroll-height"},{default:a((()=>[i(E,{class:"bg-[#F4F6F8]"},{default:a((()=>[(o(!0),p(f,null,x(z.value,((e,t)=>(o(),r(E,{class:d(["tab-item truncate",{"tab-item-active":t==A.value,"rounded-br-[12rpx]":A.value-1===t,"rounded-tr-[12rpx]":A.value+1===t}]),key:e.site_id,onClick:e=>((e,t)=>{A.value=e})(t)},{default:a((()=>[i(E,{class:"text-box px-[16rpx] truncate"},{default:a((()=>[y(w(e.category_name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1},8,["class"]),i(B,{class:"h-[100vh]","scroll-y":!0},{default:a((()=>[i(E,{class:d(["pl-[202rpx] scroll-ios pt-[20rpx] pr-[20rpx]",{"!pt-[126rpx]":s(j).search.control}])},{default:a((()=>{var e,t;return[(null==(e=z.value[A.value])?void 0:e.child_list)&&!s(I)?(o(),r(E,{key:0,class:"bg-[#fff] grid grid-cols-3 gap-x-[50rpx] gap-y-[32rpx] py-[33rpx] px-[23rpx] rounded-[16rpx]"},{default:a((()=>{var e;return[(o(!0),p(f,null,x(null==(e=z.value[A.value])?void 0:e.child_list,((e,t)=>(o(),r(E,{key:e.category_id,class:"",onClick:t=>{return l=e.category_id,void _({url:"/addon/shop/pages/goods/list",param:{curr_goods_category:l}});var l}},{default:a((()=>[i(L,{class:"rounded-[12rpx] overflow-hidden",width:"129rpx",height:"129rpx",src:s(C)(e.image?e.image:""),model:"aspectFill"},{error:a((()=>[i(F,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"]),i(E,{class:"text-[24rpx] text-center mt-[12rpx] leading-[34rpx]"},{default:a((()=>[y(w(e.category_name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))]})),_:1})):u("v-if",!0),(null==(t=z.value[A.value])?void 0:t.child_list)||s(I)?u("v-if",!0):(o(),r(E,{key:1,class:d(["flex justify-center w-[100%] bg-[#fff] rounded-[16rpx] flex items-center",{noData1:s(j).search.control,noData2:!s(j).search.control}])},{default:a((()=>[i(X,{option:{tip:"暂无商品分类"}})])),_:1},8,["class"]))]})),_:1},8,["class"])])),_:1})])),_:1})):u("v-if",!0),i(O,{addon:"shop"}),z.value.length||s(I)?u("v-if",!0):(o(),r(E,{key:1,class:"flex justify-center w-[100%] items-center justify-center h-[100vh] bg-[#fff]"},{default:a((()=>[i(X,{option:{tip:"暂无商品分类"}})])),_:1})),i(R,{"bg-color":"rgb(248,248,248)",loading:s(I),loadingText:"",fontSize:"16",color:"#303133"},null,8,["loading"])])),_:1})}}}),[["__scopeId","data-v-8663a0b4"]]),re=e({__name:"add-cart-popup",setup(e,{expose:l}){const c=le(),_=F((()=>c.cartList));let g=t(!1),z=t({skuId:"",name:[]}),E=t({}),A=t({});const V=t(1),B=()=>{g.value=!1},L=F((()=>{let e=JSON.parse(JSON.stringify(E.value));return Object.keys(e).length&&(Object.keys(z.value.name).length||(z.value.name=e.sku_spec_format.split(",")),e.goodsSpec.forEach(((e,t)=>{let l=e.spec_values.split(",");e.values=[],l.forEach(((l,o)=>{e.values[o]={},e.values[o].name=l,e.values[o].selected=!1,e.values[o].disabled=!1,z.value.name.forEach(((r,a)=>{a==t&&r==l&&(e.values[o].selected=!0)}))}))})),O(),e.skuList&&Object.keys(e.skuList).length&&e.skuList.forEach((e=>{e.sku_id==z.value.skuId&&(A.value=e)}))),e}));j((()=>A.value),((e,t)=>{_.value["goods_"+A.value.goods_id]&&_.value["goods_"+A.value.goods_id]["sku_"+A.value.sku_id]?(V.value=I(_.value["goods_"+A.value.goods_id]["sku_"+A.value.sku_id].num),A.value.cart_id=I(_.value["goods_"+A.value.goods_id]["sku_"+A.value.sku_id].id)):(V.value=1,A.value.cart_id="")}));const O=()=>{E.value.skuList.forEach(((e,t)=>{let l=e.sku_spec_format.split(",");z.value.name.every((e=>l.includes(e)))&&(z.value.skuId=e.sku_id)}))},R=()=>{0==V.value?c.reduce({id:A.value.cart_id||"",goods_id:A.value.goods_id,sale_price:A.value.sale_price,sku_id:A.value.sku_id}):c.increase({id:A.value.cart_id||"",goods_id:A.value.goods_id,sku_id:A.value.sku_id,stock:A.value.stock,sale_price:A.value.sale_price,num:V.value},0,(()=>{S({title:"加入购物车成功",icon:"none"})})),g.value=!1};return l({open:e=>{(e=>{H(e).then((t=>{E.value=t.data,z.value.sku_id=e,E.value.skuList&&Object.keys(E.value.skuList).length&&E.value.skuList.forEach((t=>{t.sku_id==e&&(A.value=t,z.value.name=t.sku_spec_format.split(","))})),g.value=!0}))})(e)}}),(e,t)=>{const l=b,c=v(m("u-icon"),$),F=v(m("u--image"),P),j=h,S=v(m("u-number-box"),ee),I=k,E=N,O=v(m("u-popup"),te);return o(),r(l,{onTouchmove:t[3]||(t[3]=n((()=>{}),["prevent","stop"]))},{default:a((()=>[i(O,{show:s(g),onClose:B,mode:"bottom"},{default:a((()=>[Object.keys(s(L)).length?(o(),r(l,{key:0,onTouchmove:t[2]||(t[2]=n((()=>{}),["prevent","stop"])),class:"rounded-t-[20rpx] overflow-hidden bg-[#fff] p-[32rpx] relative"},{default:a((()=>[i(l,{class:"absolute right-[37rpx] iconfont iconguanbi text-[50rpx]",onClick:B}),i(l,{class:"flex mb-[58rpx]"},{default:a((()=>[i(l,{class:"rounded-[8rpx] overflow-hidden"},{default:a((()=>[i(F,{width:"180rpx",height:"180rpx",src:s(C)(s(A).sku_image),model:"aspectFill"},{error:a((()=>[i(c,{name:"photo",color:"#999",size:"50"})])),_:1},8,["src"])])),_:1}),i(l,{class:"flex flex-1 flex-col ml-[20rpx] py-[10rpx]"},{default:a((()=>[i(l,{class:"w-[100%]"},{default:a((()=>[i(l,{class:"text-[var(--price-text-color)] flex items-baseline"},{default:a((()=>[i(j,{class:"text-[28rpx] font-bold price-font"},{default:a((()=>[y("￥")])),_:1}),i(j,{class:"text-[42rpx] font-bold price-font"},{default:a((()=>[y(w(parseFloat(s(A).sale_price).toFixed(2).split(".")[0]),1)])),_:1}),i(j,{class:"text-[28rpx] font-bold price-font"},{default:a((()=>[y("."+w(parseFloat(s(A).sale_price).toFixed(2).split(".")[1]),1)])),_:1})])),_:1}),i(l,{class:"text-[24rpx] leading-[32rpx] text-[#303133] mt-[12rpx]"},{default:a((()=>[y("库存"+w(s(A).stock)+w(s(L).goods.unit),1)])),_:1})])),_:1}),s(L).goodsSpec&&s(L).goodsSpec.length?(o(),r(l,{key:0,class:"w-[100%] mt-auto",style:{"max-height":"calc(204rpx - 126rpx)",overflow:"hidden"}},{default:a((()=>[i(j,{class:"text-[24rpx] leading-[30rpx] text-[#666]"},{default:a((()=>[y("已选规格："+w(s(A).sku_spec_format),1)])),_:1})])),_:1})):u("v-if",!0)])),_:1})])),_:1}),i(I,{class:"h-[500rpx] mb-[30rpx]","scroll-y":"true"},{default:a((()=>[(o(!0),p(f,null,x(s(L).goodsSpec,((e,t)=>(o(),r(l,{class:d({"mt-[36rpx]":0!=t}),key:t},{default:a((()=>[i(l,{class:"text-[26rpx] leading-[36rpx] mb-[24rpx]"},{default:a((()=>[y(w(e.spec_name),1)])),_:2},1024),i(l,{class:"flex flex-wrap"},{default:a((()=>[(o(!0),p(f,null,x(e.values,((e,s)=>(o(),r(l,{class:d(["box-border bg-[#f2f2f2] text-[24rpx] px-[44rpx] text-center h-[56rpx] leading-[56rpx] mr-[20rpx] mb-[20rpx] border-1 border-solid rounded-[50rpx] border-[#f2f2f2]",{"!border-[var(--primary-color)] text-[var(--primary-color)] !bg-[var(--primary-color-light)]":e.selected}]),key:s,onClick:l=>((e,t)=>{z.value.name[t]=e.name})(e,t)},{default:a((()=>[y(w(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:2},1024)])),_:2},1032,["class"])))),128)),i(l,{class:"flex justify-between items-center mt-[30rpx]"},{default:a((()=>[i(l,{class:"text-[26rpx]"},{default:a((()=>[y("购买数量")])),_:1}),s(_)["goods_"+s(A).goods_id]&&s(_)["goods_"+s(A).goods_id]["sku_"+s(A).sku_id]?(o(),r(S,{key:0,modelValue:V.value,"onUpdate:modelValue":t[0]||(t[0]=e=>V.value=e),min:0,max:s(A).stock,integer:"",step:1,"input-width":"98rpx","input-height":"54rpx"},{minus:a((()=>[i(j,{class:d(["text-[44rpx] iconfont iconjian",{"!text-[#c8c9cc]":0===V.value}])},null,8,["class"])])),input:a((()=>[i(j,{class:"number-input text-[#303133] text-center bg-[#f2f2f2] w-[82rpx] fext-[23rpx] mx-[16rpx]"},{default:a((()=>[y(w(V.value),1)])),_:1})])),plus:a((()=>[i(j,{class:d(["text-[44rpx] iconfont iconjia",{"!text-[#c8c9cc]":V.value===s(A).stock}])},null,8,["class"])])),_:1},8,["modelValue","max"])):(o(),r(S,{key:1,modelValue:V.value,"onUpdate:modelValue":t[1]||(t[1]=e=>V.value=e),min:1,max:s(A).stock,integer:"",step:1,"input-width":"98rpx","input-height":"54rpx"},{minus:a((()=>[i(j,{class:d(["text-[44rpx] iconfont iconjian",{"!text-[#c8c9cc]":1===V.value}])},null,8,["class"])])),input:a((()=>[i(j,{class:"number-input text-[#303133] text-center bg-[#f2f2f2] w-[82rpx] fext-[23rpx] mx-[16rpx]"},{default:a((()=>[y(w(V.value),1)])),_:1})])),plus:a((()=>[i(j,{class:d(["text-[44rpx] iconfont iconjia",{"!text-[#c8c9cc]":V.value===s(A).stock}])},null,8,["class"])])),_:1},8,["modelValue","max"]))])),_:1})])),_:1}),s(L).stock>0?(o(),r(E,{key:0,class:"!h-[72rpx] leading-[72rpx] text-[26rpx] rounded-[50rpx]",type:"primary",onClick:R},{default:a((()=>[y("确定")])),_:1})):(o(),r(E,{key:1,class:"!h-[72rpx] leading-[72rpx] text-[26rpx] text-[#fff] bg-[#ccc] rounded-[50rpx]"},{default:a((()=>[y("已售罄")])),_:1}))])),_:1})):u("v-if",!0)])),_:1},8,["show"])])),_:1})}}}),ae=Y(e({__name:"category-template-one-one",props:{config:{type:Object,default:()=>({})},categoryId:{type:[String,Number],default:0}},setup(e){const j=e,I=le();I.getList();const T=F((()=>I.cartList)),M=F((()=>I.totalNum)),U=F((()=>I.totalMoney)),H=z(),W=F((()=>H.info)),{mescrollInit:Y,getMescroll:ee}=Z(L,B);let te=j.config,oe=j.categoryId,ae=t([]),se=t(""),ie=t(!0),de=t(!1);t([]).value=uni.getStorageSync("shopCart")||[];const ce=e=>{de.value=!1,K({page:e.num,limit:e.size,keyword:"",goods_category:oe,brand_id:"",label_ids:"",start_price:"",end_price:"",order:"price",sort:"desc"}).then((t=>{let l=t.data.data;1==e.num&&(ae.value=[]),ae.value=ae.value.concat(l),ie.value=!1,e.endSuccess(l.length),ae.value.length||(de.value=!0)})).catch((()=>{ie.value=!1,de.value=!0,e.endErr()}))},ue=e=>{_({url:"/addon/shop/pages/goods/detail",param:{goods_id:e}})};l((()=>{xe()}));const ne=t(""),pe=t([]),xe=()=>{ie.value=!0,G().then((e=>{if(pe.value=e.data,oe)for(let t=0;t<pe.value.length;t++){if(pe.value[t].category_id==oe){fe.value=t;break}if(pe.value[t].child_list)for(let e=0;e<pe.value[t].child_list.length;e++)if(pe.value[t].child_list[e].category_id==oe){fe.value=t;break}}else oe=e.data[0].category_id;ie.value=!1})).catch((()=>{ie.value=!1}))},fe=t(0),_e=()=>{se.value&&_({url:"/addon/shop/pages/goods/list",param:{goods_name:se.value}})};let ge=t();const ve=(e,t)=>"virtual"==e.goods_type&&"verify"==e.virtual_receive_type||"cart"!==te.cart.event?ue(e.goodsSku.goods_id):W.value?void(e.goodsSku.sku_spec_format?ge.value.open(e.goodsSku.sku_id):((e,t)=>{const l=window.document.getElementById("animation-end"),o=l.getBoundingClientRect().left,r=l.getBoundingClientRect().top,a=window.document.getElementById(t),s=a.getBoundingClientRect().left,i=a.getBoundingClientRect().top;ne.value=`top: ${i}px; left: ${s}px;`,setTimeout((()=>{ne.value=`top: ${r}px; left: ${o}px; transition: all 1s; transform: rotate(-720deg);`}),20),setTimeout((()=>{ne.value="",I.increase({goods_id:e.goods_id,sku_id:e.sku_id,sale_price:e.sale_price,stock:e.stock})}),1020)})(e.goodsSku,t)):(O().setLoginBack({url:"/addon/shop/pages/goods/category"}),!1),me=()=>{_({url:"/addon/shop/pages/goods/cart"})},he=()=>{if(!M.value)return void S({title:"还没有选择商品",icon:"none"});const e=[];Object.values(T.value).forEach((t=>{Object.keys(t).forEach((l=>{"totalNum"!=l&&"totalMoney"!=l&&e.push(t[l].id)}))})),uni.setStorage({key:"orderCreateData",data:{cart_ids:e},success(){_({url:"/addon/shop/pages/order/payment"})}})};let be=e=>{let t="";return t=e.is_discount?"discount_price":e.member_discount&&R()?"member_price":"",t},ke=e=>{let t="0.00";return t=e.is_discount?e.goodsSku.sale_price:e.member_discount&&R()?e.goodsSku.member_price:e.goodsSku.price,t};return(e,t)=>{const l=g,_=v(m("u-icon"),$),F=h,j=b,S=k,z=v(m("u--image"),P),B=D,L=N,O=v(m("u-loading-page"),q),R=v(m("tabbar"),J);return o(),r(j,{class:"min-h-screen"},{default:a((()=>[pe.value.length?(o(),r(j,{key:0,class:d(["mescroll-box bg-[#F4F6F8]",{cart:s(te).cart.control&&"cart"===s(te).cart.event,detail:!(s(te).cart.control&&"cart"===s(te).cart.event)}])},{default:a((()=>[i(Q,{ref:"mescrollRef",down:{use:!1},onInit:s(Y),onUp:ce},{default:a((()=>[s(te).search.control?(o(),r(j,{key:0,class:"search-box z-10 bg-[#fff] fixed top-0 left-0 right-0 h-[106rpx] box-border"},{default:a((()=>[i(l,{class:d(["search-ipt pl-[20rpx] text-[24rpx]",{"pr-[96rpx]":s(se),"pr-[60rpx]":!s(se)}]),type:"text",modelValue:s(se),"onUpdate:modelValue":t[0]||(t[0]=e=>c(se)?se.value=e:se=e),placeholder:s(te).search.title,onConfirm:_e},null,8,["class","modelValue","placeholder"]),i(j,{class:"flex items-center h-[70rpx] absolute right-[48rpx] top-[18rpx] z-2"},{default:a((()=>[s(se)?(o(),r(_,{key:0,name:"close-circle-fill",color:"#A5A6A6",size:"28rpx",onClick:t[1]||(t[1]=e=>c(se)?se.value="":se="")})):u("v-if",!0),i(j,{class:"h-[70rpx] w-[40rpx] text-center leading-[70rpx]",onClick:n(_e,["stop"])},{default:a((()=>[i(F,{class:"iconfont iconxiazai17 text-[28rpx]"})])),_:1},8,["onClick"])])),_:1})])),_:1})):u("v-if",!0),i(j,{class:d(["tabs-box z-2 fixed left-0 bg-[#fff] bottom-[50px] top-0",{"!top-[106rpx]":s(te).search.control,"pb-[98rpx]":s(te).cart.control&&"cart"===s(te).cart.event}])},{default:a((()=>[i(S,{"scroll-y":!0,class:"scroll-height"},{default:a((()=>[i(j,{class:"bg-[#F4F6F8]"},{default:a((()=>[(o(!0),p(f,null,x(pe.value,((e,t)=>(o(),r(j,{class:d(["tab-item truncate",{"tab-item-active":t==fe.value,"rounded-br-[12rpx]":fe.value-1===t,"rounded-tr-[12rpx]":fe.value+1===t}]),key:e.site_id,onClick:l=>((e,t)=>{fe.value=e,oe=t.category_id,ae.value=[],ee().resetUpScroll()})(t,e)},{default:a((()=>[i(j,{class:"text-box px-[16rpx] truncate"},{default:a((()=>[y(w(e.category_name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1},8,["class"]),i(j,{class:d(["flex justify-center flex-wrap pl-[182rpx] pb-[20rpx]",{" pt-[126rpx]":s(te).search.control," pt-[20rpx]":!s(te).search.control}])},{default:a((()=>[(o(!0),p(f,null,x(s(ae),((e,t)=>(o(),r(j,{key:e.goods_id,class:d(["w-[536rpx] box-border bg-white w-full flex mx-[16rpx] px-[24rpx] py-[20rpx] rounded-[12rpx]",{"mt-[16rpx]":t}]),onClick:n((t=>ue(e.goods_id)),["stop"])},{default:a((()=>[i(j,{class:"overflow-hidden mr-[8rpx] rounded-md"},{default:a((()=>[i(z,{width:"168rpx",height:"168rpx",src:s(C)(e.goods_cover_thumb_mid?e.goods_cover_thumb_mid:""),model:"aspectFill"},{error:a((()=>[i(_,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"])])),_:2},1024),i(j,{class:"flex flex-1 ml-[8rpx] flex-wrap"},{default:a((()=>[i(j,{class:"w-[316rpx] max-h-[80rpx] text-[28rpx] leading-[40rpx] multi-hidden"},{default:a((()=>[y(w(e.goods_name),1)])),_:2},1024),i(j,{class:"w-[316rpx] flex self-end items-end justify-between"},{default:a((()=>[i(F,{class:"text-[var(--price-text-color)] price-font"},{default:a((()=>[i(F,{class:"text-[26rpx] font-500"},{default:a((()=>[y("￥")])),_:1}),i(F,{class:"text-[36rpx] font-500"},{default:a((()=>[y(w(parseFloat(s(ke)(e)).toFixed(2).split(".")[0]),1)])),_:2},1024),i(F,{class:"text-[24rpx] font-500"},{default:a((()=>[y("."+w(parseFloat(s(ke)(e)).toFixed(2).split(".")[1]),1)])),_:2},1024),"member_price"==s(be)(e)?(o(),r(B,{key:0,class:"h-[24rpx] ml-[6rpx]",src:s(C)("addon/shop/VIP.png"),mode:"heightFix"},null,8,["src"])):u("v-if",!0),"discount_price"==s(be)(e)?(o(),r(B,{key:1,class:"h-[24rpx] ml-[6rpx]",src:s(C)("addon/shop/discount.png"),mode:"heightFix"},null,8,["src"])):u("v-if",!0)])),_:2},1024),("real"==e.goods_type||"virtual"==e.goods_type&&"verify"!=e.virtual_receive_type)&&""===e.goodsSku.sku_spec_format&&s(T)["goods_"+e.goods_id]&&s(T)["goods_"+e.goods_id]["sku_"+e.goodsSku.sku_id]&&s(te).cart.control&&"cart"===s(te).cart.event?(o(),r(j,{key:0,class:"flex items-center"},{default:a((()=>[i(F,{class:"text-[44rpx] text-color iconfont iconjianhao",onClick:n((t=>{return l=s(T)["goods_"+e.goods_id]["sku_"+e.goodsSku.sku_id],void I.reduce({id:l.id,goods_id:l.goods_id,sku_id:l.sku_id,stock:l.stock,sale_price:l.sale_price,num:l.num});var l}),["stop"])},null,8,["onClick"]),i(F,{class:"text-[#333] text-[24rpx] mx-[16rpx]"},{default:a((()=>[y(w(s(T)["goods_"+e.goods_id]["sku_"+e.goodsSku.sku_id].num),1)])),_:2},1024),i(F,{class:"text-[44rpx] text-color iconfont iconjiahao2fill",onClick:n((t=>{return l=s(T)["goods_"+e.goods_id]["sku_"+e.goodsSku.sku_id],void I.increase({id:l.id,goods_id:l.goods_id,sku_id:l.sku_id,stock:l.stock,sale_price:l.sale_price,num:l.num});var l}),["stop"])},null,8,["onClick"])])),_:2},1024)):(o(),p(f,{key:1},[s(te).cart.control&&"style-1"===s(te).cart.style?(o(),r(j,{key:0,class:"h-[44rpx] relative"},{default:a((()=>[i(j,{id:"itemCart"+t,class:"text-[#fff] bg-color h-[44rpx] text-[24rpx] px-[10px] leading-[44rpx] rounded-[22rpx]",onClick:n((l=>ve(e,"itemCart"+t)),["stop"])},{default:a((()=>[y(w(s(te).cart.text),1)])),_:2},1032,["id","onClick"]),s(T)["goods_"+e.goods_id]&&s(T)["goods_"+e.goods_id].totalNum?(o(),r(j,{key:0,class:d(["absolute right-[-16rpx] top-[-16rpx] rounded-[30rpx] h-[30rpx] min-w-[30rpx] text-center leading-[30rpx] bg-[#FF4646] text-[#fff] text-[20rpx] font-500 box-border box-border border-[2rpx] border-solid border-[#fff]",s(T)["goods_"+e.goods_id].totalNum>9?"px-[10rpx]":""])},{default:a((()=>[y(w(s(T)["goods_"+e.goods_id].totalNum),1)])),_:2},1032,["class"])):u("v-if",!0)])),_:2},1024)):u("v-if",!0),s(te).cart.control&&"style-2"===s(te).cart.style?(o(),r(j,{key:1,class:"w-[44rpx] h-[44rpx] relative"},{default:a((()=>[i(F,{id:"itemCart"+t,class:"text-color iconfont iconjiahao1 text-[44rpx]",onClick:n((l=>ve(e,"itemCart"+t)),["stop"])},null,8,["id","onClick"]),s(T)["goods_"+e.goods_id]&&s(T)["goods_"+e.goods_id].totalNum?(o(),r(j,{key:0,class:d(["absolute right-[-16rpx] top-[-16rpx] rounded-[30rpx] h-[30rpx] min-w-[30rpx] text-center leading-[30rpx] bg-[#FF4646] text-[#fff] text-[20rpx] font-500 box-border box-border border-[2rpx] border-solid border-[#fff]",s(T)["goods_"+e.goods_id].totalNum>9?"px-[10rpx]":""])},{default:a((()=>[y(w(s(T)["goods_"+e.goods_id].totalNum),1)])),_:2},1032,["class"])):u("v-if",!0)])),_:2},1024)):u("v-if",!0),s(te).cart.control&&"style-3"===s(te).cart.style?(o(),r(j,{key:2,class:"w-[44rpx] h-[44rpx] relative"},{default:a((()=>[i(F,{id:"itemCart"+t,class:"text-color iconfont icongouwuche !text-[44rpx]",onClick:n((l=>ve(e,"itemCart"+t)),["stop"])},null,8,["id","onClick"]),s(T)["goods_"+e.goods_id]&&s(T)["goods_"+e.goods_id].totalNum?(o(),r(j,{key:0,class:d(["absolute right-[-16rpx] top-[-16rpx] rounded-[30rpx] h-[30rpx] min-w-[30rpx] text-center leading-[30rpx] bg-[#FF4646] text-[#fff] text-[20rpx] font-500 box-border box-border border-[2rpx] border-solid border-[#fff]",s(T)["goods_"+e.goods_id].totalNum>9?"px-[10rpx]":""])},{default:a((()=>[y(w(s(T)["goods_"+e.goods_id].totalNum),1)])),_:2},1032,["class"])):u("v-if",!0)])),_:2},1024)):u("v-if",!0),s(te).cart.control&&"style-4"===s(te).cart.style?(o(),r(j,{key:3,class:"w-[44rpx] h-[44rpx] relative"},{default:a((()=>[i(j,{id:"itemCart"+t,class:"flex items-center justify-center text-[#fff] bg-color h-[44rpx] w-[44rpx] rounded-[22rpx] text-center",onClick:n((l=>ve(e,"itemCart"+t)),["stop"])},{default:a((()=>[i(F,{class:"iconfont icongouwuche !text-[26rpx]"})])),_:2},1032,["id","onClick"]),s(T)["goods_"+e.goods_id]&&s(T)["goods_"+e.goods_id].totalNum?(o(),r(j,{key:0,class:d(["absolute right-[-16rpx] top-[-16rpx] rounded-[30rpx] h-[30rpx] min-w-[30rpx] text-center leading-[30rpx] bg-[#FF4646] text-[#fff] text-[20rpx] font-500 box-border border-[2rpx] border-solid border-[#fff]",s(T)["goods_"+e.goods_id].totalNum>9?"px-[10rpx]":""])},{default:a((()=>[y(w(s(T)["goods_"+e.goods_id].totalNum),1)])),_:2},1032,["class"])):u("v-if",!0)])),_:2},1024)):u("v-if",!0)],64))])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128)),s(ae).length||s(ie)||!s(de)?u("v-if",!0):(o(),r(j,{key:0,class:d(["mx-[24rpx] bg-[#fff] w-[536rpx] rounded-[12rpx] flex items-center justify-center",{noData1:s(te).search.control,noData2:!s(te).search.control}])},{default:a((()=>[i(X,{option:{tip:"暂无商品"}})])),_:1},8,["class"]))])),_:1},8,["class"]),i(re,{ref_key:"cartRef",ref:ge},null,512)])),_:1},8,["onInit"]),s(te).cart.control&&"cart"===s(te).cart.event?(o(),r(j,{key:0,class:"bg-[#fff] z-10 flex justify-between items-center fixed left-0 right-0 bottom-[50px] box-solid px-[24rpx] py-[17rpx] mb-ios"},{default:a((()=>[i(j,{class:"flex items-center"},{default:a((()=>[i(j,{class:"w-[66rpx] h-[66rpx] mr-[27rpx] relative"},{default:a((()=>[i(j,{id:"animation-end",class:"w-[66rpx] h-[66rpx] rounded-[35rpx] bg-[var(--primary-color)] text-center leading-[70rpx]",onClick:n(me,["stop"])},{default:a((()=>[i(F,{class:"icongouwuche1 iconfont text-[#fff] text-[30rpx]"})])),_:1},8,["onClick"]),s(M)?(o(),r(j,{key:0,class:d(["absolute left-[50rpx] top-[-10rpx] rounded-[28rpx] h-[28rpx] min-w-[28rpx] text-center leading-[30rpx] bg-[#FF4646] text-[#fff] text-[20rpx] font-500 box-border",s(M)>9?"px-[10rpx]":""])},{default:a((()=>[y(w(s(M)>99?"99+":s(M)),1)])),_:1},8,["class"])):u("v-if",!0)])),_:1}),i(F,{class:"text-[32rpx] font-500 text-[#333]"},{default:a((()=>[y("总计：")])),_:1}),i(F,{class:"text-[var(--price-text-color)] price-font"},{default:a((()=>[i(F,{class:"text-[26rpx] font-500"},{default:a((()=>[y("￥")])),_:1}),i(F,{class:"text-[36rpx] font-500"},{default:a((()=>[y(w(parseFloat(s(U)).toFixed(2).split(".")[0]),1)])),_:1}),i(F,{class:"text-[24rpx] font-500"},{default:a((()=>[y("."+w(parseFloat(s(U)).toFixed(2).split(".")[1]),1)])),_:1})])),_:1})])),_:1}),i(L,{class:"w-[180rpx] h-[66rpx] text-[28rpx] leading-[66rpx] !text-[#fff] m-0 rounded-full bg-color remove-border",shape:"circle",onClick:he},{default:a((()=>[y("去结算")])),_:1})])),_:1})):u("v-if",!0)])),_:1},8,["class"])):u("v-if",!0),E(i(j,{style:V(ne.value),class:"fixed z-999 flex items-center justify-center text-[#fff] bg-color h-[44rpx] w-[44rpx] rounded-[22rpx] text-center"},{default:a((()=>[i(F,{class:"iconfont icongouwuche !text-[30rpx]"})])),_:1},8,["style"]),[[A,ne.value]]),pe.value.length||s(ie)?u("v-if",!0):(o(),r(j,{key:1,class:"flex justify-center items-center w-[100%] h-[100vh]"},{default:a((()=>[i(X,{option:{tip:"暂无商品分类"}})])),_:1})),i(O,{"bg-color":"rgb(248,248,248)",loading:s(ie),loadingText:"",fontSize:"16",color:"#303133"},null,8,["loading"]),i(R,{addon:"shop"})])),_:1})}}}),[["__scopeId","data-v-c868d9d6"]]),se=Y(e({__name:"category-template-two-two",props:{config:{type:Object,default:()=>({})},categoryId:{type:[String,Number],default:0}},setup(e){const j=e,I=le();I.getList();const T=F((()=>I.cartList)),M=F((()=>I.totalNum)),U=F((()=>I.totalMoney)),H=z(),W=F((()=>H.info)),{mescrollInit:Y,getMescroll:ee}=Z(L,B);let oe=j.config,ae=j.categoryId,se=t([]),ie=t(""),de=t(!0),ce=t(!1),ue=t(!1);t([]).value=uni.getStorageSync("shopCart")||[];const ne=e=>{ce.value=!1,K({page:e.num,limit:e.size,keyword:"",goods_category:ae,brand_id:"",label_ids:"",start_price:"",end_price:"",order:"price",sort:"desc"}).then((t=>{let l=t.data.data;const o=new Date;l=l.map((e=>{const t=new Date(e.create_time),l=+o-+t<108e6;return{...e,flag:l}})),1==e.num&&(se.value=[]),se.value=se.value.concat(l),de.value=!1,e.endSuccess(l.length),se.value.length||(ce.value=!0)})).catch((()=>{de.value=!1,ce.value=!0,e.endErr()}))},pe=e=>{_({url:"/addon/shop/pages/goods/detail",param:{goods_id:e}})};l((()=>{_e()}));const xe=t("");t({allActive:-1,data:{category_name:"全部",category_id:""}});const fe=t([]),_e=()=>{de.value=!0,G().then((e=>{fe.value=e.data;for(let t=0;t<fe.value.length;t++)if(fe.value[t].child_list){let e={category_name:"全部",category_id:fe.value[t].category_id};fe.value[t].child_list.unshift(e)}if(ae)for(let t=0;t<fe.value.length;t++){if(fe.value[t].category_id==ae){ge.value=t;break}if(fe.value[t].child_list)for(let e=0;e<fe.value[t].child_list.length;e++)if(fe.value[t].child_list[e].category_id==ae){ge.value=t,ve.value=e;break}}else ae=e.data[0].category_id;de.value=!1})).catch((()=>{de.value=!1}))},ge=t(0),ve=t(0),me=(e,t)=>{ve.value=e,ae=t.category_id,ue.value=!1,se.value=[],ee().resetUpScroll()},he=()=>{ie.value&&_({url:"/addon/shop/pages/goods/list",param:{goods_name:ie.value}})};let be=t();const ke=(e,t)=>"virtual"==e.goods_type&&"verify"==e.virtual_receive_type?pe(e.goodsSku.goods_id):"cart"!==oe.cart.event?pe(e.goods_id):W.value?void(e.goodsSku.sku_spec_format?be.value.open(e.goodsSku.sku_id):((e,t)=>{const l=window.document.getElementById("animation-end"),o=l.getBoundingClientRect().left,r=l.getBoundingClientRect().top,a=window.document.getElementById(t),s=a.getBoundingClientRect().left,i=a.getBoundingClientRect().top;xe.value=`top: ${i}px; left: ${s}px;`,setTimeout((()=>{xe.value=`top: ${r}px; left: ${o}px; transition: all 1s; transform: rotate(-720deg);`}),20),setTimeout((()=>{xe.value="",I.increase({goods_id:e.goods_id,sku_id:e.sku_id,sale_price:e.sale_price,stock:e.stock})}),1020)})(e.goodsSku,t)):(O().setLoginBack({url:"/addon/shop/pages/goods/category"}),!1),ye=()=>{_({url:"/addon/shop/pages/goods/cart"})},we=()=>{if(!M.value)return void S({title:"还没有选择商品",icon:"none"});const e=[];Object.values(T.value).forEach((t=>{Object.keys(t).forEach((l=>{"totalNum"!=l&&"totalMoney"!=l&&e.push(t[l].id)}))})),uni.setStorage({key:"orderCreateData",data:{cart_ids:e},success(){_({url:"/addon/shop/pages/order/payment"})}})};let Ce=e=>{let t="";return t=e.is_discount?"discount_price":e.member_discount&&R()?"member_price":"",t},Fe=e=>{let t="0.00";return t=e.is_discount?e.goodsSku.sale_price:e.member_discount&&R()?e.goodsSku.member_price:e.goodsSku.price,t};return(e,t)=>{const l=g,_=v(m("u-icon"),$),F=h,j=b,S=k,z=v(m("u-popup"),te),B=v(m("u--image"),P),L=D,O=N,R=v(m("u-loading-page"),q),G=v(m("tabbar"),J);return o(),r(j,{class:"min-h-screen"},{default:a((()=>[fe.value.length?(o(),r(j,{key:0,class:d(["mescroll-box bg-[#F4F6F8]",{cart:s(oe).cart.control&&"cart"===s(oe).cart.event,detail:!(s(oe).cart.control&&"cart"===s(oe).cart.event)}])},{default:a((()=>[i(Q,{ref:"mescrollRef",down:{use:!1},onInit:s(Y),onUp:ne},{default:a((()=>{var e,g,v,m,h,b;return[s(oe).search.control?(o(),r(j,{key:0,class:"search-box z-10 bg-[#fff] fixed top-0 left-0 right-0 h-[106rpx] box-border"},{default:a((()=>[i(l,{class:d(["search-ipt pl-[20rpx] text-[24rpx]",{"pr-[96rpx]":s(ie),"pr-[60rpx]":!s(ie)}]),type:"text",modelValue:s(ie),"onUpdate:modelValue":t[0]||(t[0]=e=>c(ie)?ie.value=e:ie=e),placeholder:s(oe).search.title,onConfirm:he},null,8,["class","modelValue","placeholder"]),i(j,{class:"flex items-center h-[70rpx] absolute right-[48rpx] top-[18rpx] z-2"},{default:a((()=>[s(ie)?(o(),r(_,{key:0,name:"close-circle-fill",color:"#A5A6A6",size:"28rpx",onClick:t[1]||(t[1]=e=>c(ie)?ie.value="":ie="")})):u("v-if",!0),i(j,{class:"h-[70rpx] w-[40rpx] text-center leading-[70rpx]",onClick:n(he,["stop"])},{default:a((()=>[i(F,{class:"iconfont iconxiazai17 text-[28rpx]"})])),_:1},8,["onClick"])])),_:1})])),_:1})):u("v-if",!0),i(j,{class:d(["tabs-box z-2 fixed left-0 bg-[#fff] bottom-[50px] top-0",{"!top-[106rpx]":s(oe).search.control,"pb-[98rpx]":s(oe).cart.control&&"cart"===s(oe).cart.event}])},{default:a((()=>[i(S,{"scroll-y":!0,class:"scroll-height"},{default:a((()=>[i(j,{class:"bg-[#F4F6F8]"},{default:a((()=>[(o(!0),p(f,null,x(fe.value,((e,t)=>(o(),r(j,{class:d(["tab-item truncate",{"tab-item-active ":t==ge.value,"rounded-br-[12rpx]":!(ge.value-1!==t||fe.value[ge.value].child_list&&fe.value[ge.value].child_list.length),"rounded-tr-[12rpx]":!(ge.value+1!==t||fe.value[ge.value].child_list&&fe.value[ge.value].child_list.length)}]),key:e.site_id,onClick:l=>((e,t)=>{ge.value=e,ue.value=!1,t.child_list&&t.child_list.length?me(0,t.child_list[0]):(ae=t.category_id,se.value=[],ee().resetUpScroll())})(t,e)},{default:a((()=>[i(j,{class:"text-box truncate px-[24rpx]"},{default:a((()=>[y(w(e.category_name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1},8,["class"]),(null==(e=fe.value[ge.value])?void 0:e.child_list)&&(null==(g=fe.value[ge.value])?void 0:g.child_list.length)?(o(),r(j,{key:1,class:d(["flex justify-center items-center h-[92rpx] px-[24rpx] py-[20rpx] z-10 bg-white fixed left-[182rpx] right-0 box-border top-0",{"!top-[106rpx]":s(oe).search.control}])},{default:a((()=>[s(ue)?(o(),p(f,{key:1},[i(j,{class:"flex-1 h-[48rpx] text-[22rpx] text-[#A5A6A6] pr-[24rpx] leading-[48rpx]"},{default:a((()=>[y("全部分类")])),_:1}),i(F,{class:"iconfont iconjiantoushang text-[26rpx]",onClick:t[3]||(t[3]=e=>c(ue)?ue.value=!1:ue=!1)})],64)):(o(),p(f,{key:0},[i(S,{"scroll-x":!0,"scroll-with-animation":"","scroll-into-view":"id"+(ve.value?ve.value-1:0),class:"flex-1 h-[49rpx] scroll-Y box-border pr-[24rpx] bg-white"},{default:a((()=>[i(j,{class:"flex items-center h-[48rpx] box-border"},{default:a((()=>{var e;return[(o(!0),p(f,null,x(null==(e=fe.value[ge.value])?void 0:e.child_list,((e,t)=>(o(),r(F,{class:d(["flex-shrink-0 ml-[24rpx] px-[24rpx] h-[48rpx] text-[22rpx] leading-[48rpx] border-[2rpx] border-solid rounded-[24rpx] box-border",{"sub-tab-active text-color border-color":t===ve.value,"border-[#E2E2E2]":t!=ve.value}]),key:fe.value[ge.value].category_id,id:"id"+t,onClick:l=>me(t,e)},{default:a((()=>[y(w(e.category_name),1)])),_:2},1032,["class","id","onClick"])))),128))]})),_:1})])),_:1},8,["scroll-into-view"]),i(j,{class:"iconfont iconxiangxiajiantou text-[26rpx] w-[30rpx] h-[30rpx] text-center transform",onClick:t[2]||(t[2]=e=>c(ue)?ue.value=!0:ue=!0)}),u(' @click="showAllTabs()" ')],64))])),_:1},8,["class"])):u("v-if",!0),i(j,{class:d(["labelPopup",{active:s(oe).search.control}])},{default:a((()=>[i(z,{show:s(ue),mode:"top",onClose:t[5]||(t[5]=e=>c(ue)?ue.value=!1:ue=!1)},{default:a((()=>[i(j,{class:"flex flex-wrap py-[24rpx]",onTouchmove:t[4]||(t[4]=n((()=>{}),["prevent","stop"]))},{default:a((()=>{var e;return[u(' <text\r\n                class="flex-shrink-0 w-[160rpx] ml-[22rpx] mb-[24rpx] text-center h-[48rpx] text-[22rpx] leading-[48rpx] border-[2rpx] border-solid rounded-[24rpx] box-border"\r\n                :class="{ \'sub-tab-active text-color border-color\': initAll.allActive === subActive, \'border-[#E2E2E2]\': initAll.allActive != subActive }"\r\n                 @click="subMenuClick(initAll.allActive,initAll.data)">全部</text> '),(o(!0),p(f,null,x(null==(e=fe.value[ge.value])?void 0:e.child_list,((e,t)=>(o(),r(F,{class:d(["flex-shrink-0 w-auto pl-2 pr-2 ml-[22rpx] mb-[24rpx] text-center h-[48rpx] text-[22rpx] leading-[48rpx] border-[2rpx] border-solid rounded-[24rpx] box-border",{"sub-tab-active text-color border-color":t===ve.value,"border-[#E2E2E2]":t!=ve.value}]),key:fe.value[ge.value].category_id,onClick:l=>me(t,e)},{default:a((()=>[y(w(e.category_name),1)])),_:2},1032,["class","onClick"])))),128))]})),_:1})])),_:1},8,["show"])])),_:1},8,["class"]),i(j,{class:d(["flex justify-center flex-wrap pl-[182rpx] pt-[20rpx] pb-[20rpx]",{"!pt-[218rpx]":s(oe).search.control&&(null==(v=fe.value[ge.value])?void 0:v.child_list)&&(null==(m=fe.value[ge.value])?void 0:m.child_list.length),"pt-[126rpx]":s(oe).search.control&&(!fe.value[ge.value].child_list||!fe.value[ge.value].child_list.length),"pt-[112rpx]":(null==(h=fe.value[ge.value])?void 0:h.child_list)&&(null==(b=fe.value[ge.value])?void 0:b.child_list.length)&&!s(oe).search.control}])},{default:a((()=>{var e,t,l,c;return[(o(!0),p(f,null,x(s(se),((e,t)=>(o(),r(j,{key:e.goods_id,class:d(["w-[536rpx] box-border bg-white w-full flex mx-[16rpx] px-[24rpx] py-[20rpx] rounded-[12rpx]",{"mt-[16rpx]":t}]),onClick:n((t=>pe(e.goods_id)),["stop"])},{default:a((()=>[i(j,{class:"overflow-hidden mr-[8rpx] rounded-md position-r"},{default:a((()=>[i(j,{class:"position-a"},{default:a((()=>[e.flag?(o(),r(B,{key:0,class:"position-a",width:"58rpx",height:"28rpx",src:"https://vip.123pan.cn/1832133965/tiantai/1717078717e95d5ba5e4287e7131ff27478e746976_ott.png",model:"aspectFill"})):u("v-if",!0)])),_:2},1024),i(j,{class:"position-b"},{default:a((()=>[i(B,{width:"168rpx",height:"168rpx",src:s(C)(e.goods_cover_thumb_mid?e.goods_cover_thumb_mid:""),model:"aspectFill"},{error:a((()=>[i(_,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"])])),_:2},1024)])),_:2},1024),i(j,{class:"flex flex-1 flex-wrap"},{default:a((()=>[i(j,{class:"w-[316rpx] max-h-[80rpx] text-[28rpx] leading-[40rpx] multi-hidden"},{default:a((()=>[y(w(e.goods_name),1)])),_:2},1024),e.sub_title?(o(),r(j,{key:0,class:"w-[316rpx] max-h-[80rpx] text-[20rpx] leading-[40rpx] truncate"},{default:a((()=>[y(w(e.sub_title),1)])),_:2},1024)):u("v-if",!0),e.goodsSku.sku_no?(o(),r(j,{key:1,class:"w-[316rpx] max-h-[80rpx] text-[20rpx] leading-[40rpx] truncate"},{default:a((()=>[y(" 串号: "+w(e.goodsSku.sku_no),1)])),_:2},1024)):u("v-if",!0),i(j,{class:"w-[316rpx] flex self-end items-end justify-between"},{default:a((()=>[i(F,{class:"text-[var(--price-text-color)] price-font"},{default:a((()=>[i(F,{class:"text-[26rpx] font-500"},{default:a((()=>[y("￥")])),_:1}),i(F,{class:"text-[36rpx] font-500"},{default:a((()=>[y(w(parseFloat(s(Fe)(e)).toFixed(2).split(".")[0]),1)])),_:2},1024),i(F,{class:"text-[24rpx] font-500"},{default:a((()=>[y("."+w(parseFloat(s(Fe)(e)).toFixed(2).split(".")[1]),1)])),_:2},1024),"member_price"==s(Ce)(e)?(o(),r(L,{key:0,class:"h-[24rpx] ml-[6rpx]",src:s(C)("addon/shop/VIP.png"),mode:"heightFix"},null,8,["src"])):u("v-if",!0),"discount_price"==s(Ce)(e)?(o(),r(L,{key:1,class:"h-[24rpx] ml-[6rpx]",src:s(C)("addon/shop/discount.png"),mode:"heightFix"},null,8,["src"])):u("v-if",!0)])),_:2},1024),("real"==e.goods_type||"virtual"==e.goods_type&&"verify"!=e.virtual_receive_type)&&""===e.goodsSku.sku_spec_format&&s(T)["goods_"+e.goods_id]&&s(T)["goods_"+e.goods_id]["sku_"+e.goodsSku.sku_id]&&s(oe).cart.control&&"cart"===s(oe).cart.event?(o(),r(j,{key:0,class:"flex items-center"},{default:a((()=>[i(F,{class:"text-[44rpx] text-color iconfont iconjianhao",onClick:n((t=>{return l=s(T)["goods_"+e.goods_id]["sku_"+e.goodsSku.sku_id],void I.reduce({id:l.id,goods_id:l.goods_id,sku_id:l.sku_id,stock:l.stock,sale_price:l.sale_price,num:l.num});var l}),["stop"])},null,8,["onClick"]),i(F,{class:"text-[#333] text-[24rpx] mx-[16rpx]"},{default:a((()=>[y(w(s(T)["goods_"+e.goods_id]["sku_"+e.goodsSku.sku_id].num),1)])),_:2},1024),i(F,{class:"text-[44rpx] text-color iconfont iconjiahao2fill",onClick:n((t=>{return l=s(T)["goods_"+e.goods_id]["sku_"+e.goodsSku.sku_id],void I.increase({id:l.id,goods_id:l.goods_id,sku_id:l.sku_id,stock:l.stock,sale_price:l.sale_price,num:l.num});var l}),["stop"])},null,8,["onClick"])])),_:2},1024)):(o(),p(f,{key:1},[s(oe).cart.control&&"style-1"===s(oe).cart.style?(o(),r(j,{key:0,class:"h-[44rpx] relative"},{default:a((()=>[i(j,{id:"itemCart"+t,class:"text-[#fff] bg-color h-[44rpx] text-[24rpx] px-[10px] leading-[44rpx] rounded-[22rpx]",onClick:n((l=>ke(e,"itemCart"+t)),["stop"])},{default:a((()=>[y(w(s(oe).cart.text),1)])),_:2},1032,["id","onClick"]),s(T)["goods_"+e.goods_id]&&s(T)["goods_"+e.goods_id].totalNum?(o(),r(j,{key:0,class:d(["absolute right-[-16rpx] top-[-16rpx] rounded-[30rpx] h-[30rpx] min-w-[30rpx] text-center leading-[30rpx] bg-[#FF4646] text-[#fff] text-[20rpx] font-500 box-border box-border border-[2rpx] border-solid border-[#fff]",s(T)["goods_"+e.goods_id].totalNum>9?"px-[10rpx]":""])},{default:a((()=>[y(w(s(T)["goods_"+e.goods_id].totalNum),1)])),_:2},1032,["class"])):u("v-if",!0)])),_:2},1024)):u("v-if",!0),s(oe).cart.control&&"style-2"===s(oe).cart.style?(o(),r(j,{key:1,class:"w-[44rpx] h-[44rpx] relative"},{default:a((()=>[i(F,{id:"itemCart"+t,class:"text-color iconfont iconjiahao1 text-[44rpx]",onClick:n((l=>ke(e,"itemCart"+t)),["stop"])},null,8,["id","onClick"]),s(T)["goods_"+e.goods_id]&&s(T)["goods_"+e.goods_id].totalNum?(o(),r(j,{key:0,class:d(["absolute right-[-16rpx] top-[-16rpx] rounded-[30rpx] h-[30rpx] min-w-[30rpx] text-center leading-[30rpx] bg-[#FF4646] text-[#fff] text-[20rpx] font-500 box-border box-border border-[2rpx] border-solid border-[#fff]",s(T)["goods_"+e.goods_id].totalNum>9?"px-[10rpx]":""])},{default:a((()=>[y(w(s(T)["goods_"+e.goods_id].totalNum),1)])),_:2},1032,["class"])):u("v-if",!0)])),_:2},1024)):u("v-if",!0),s(oe).cart.control&&"style-3"===s(oe).cart.style?(o(),r(j,{key:2,class:"w-[44rpx] h-[44rpx] relative"},{default:a((()=>[i(F,{id:"itemCart"+t,class:"text-color iconfont icongouwuche !text-[44rpx]",onClick:n((l=>ke(e,"itemCart"+t)),["stop"])},null,8,["id","onClick"]),s(T)["goods_"+e.goods_id]&&s(T)["goods_"+e.goods_id].totalNum?(o(),r(j,{key:0,class:d(["absolute right-[-16rpx] top-[-16rpx] rounded-[30rpx] h-[30rpx] min-w-[30rpx] text-center leading-[30rpx] bg-[#FF4646] text-[#fff] text-[20rpx] font-500 box-border box-border border-[2rpx] border-solid border-[#fff]",s(T)["goods_"+e.goods_id].totalNum>9?"px-[10rpx]":""])},{default:a((()=>[y(w(s(T)["goods_"+e.goods_id].totalNum),1)])),_:2},1032,["class"])):u("v-if",!0)])),_:2},1024)):u("v-if",!0),s(oe).cart.control&&"style-4"===s(oe).cart.style?(o(),r(j,{key:3,class:"w-[44rpx] h-[44rpx] relative"},{default:a((()=>[i(j,{id:"itemCart"+t,class:"flex items-center justify-center text-[#fff] bg-color h-[44rpx] w-[44rpx] rounded-[22rpx] text-center",onClick:n((l=>ke(e,"itemCart"+t)),["stop"])},{default:a((()=>[i(F,{class:"iconfont icongouwuche !text-[26rpx]"})])),_:2},1032,["id","onClick"]),s(T)["goods_"+e.goods_id]&&s(T)["goods_"+e.goods_id].totalNum?(o(),r(j,{key:0,class:d(["absolute right-[-16rpx] top-[-16rpx] rounded-[30rpx] h-[30rpx] min-w-[30rpx] text-center leading-[30rpx] bg-[#FF4646] text-[#fff] text-[20rpx] font-500 box-border border-[2rpx] border-solid border-[#fff]",s(T)["goods_"+e.goods_id].totalNum>9?"px-[10rpx]":""])},{default:a((()=>[y(w(s(T)["goods_"+e.goods_id].totalNum),1)])),_:2},1032,["class"])):u("v-if",!0)])),_:2},1024)):u("v-if",!0)],64))])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128)),s(se).length||s(de)||!s(ce)?u("v-if",!0):(o(),r(j,{key:0,class:d(["w-[536rpx] bg-[#fff] mx-[16rpx] rounded-[12rpx] flex items-center justify-center",{noData1:s(oe).search.control,noData2:!s(oe).search.control,child:(null==(e=fe.value[ge.value])?void 0:e.child_list)&&(null==(t=fe.value[ge.value])?void 0:t.child_list.length),noChild:!(null==(l=fe.value[ge.value])?void 0:l.child_list)||!(null==(c=fe.value[ge.value])?void 0:c.child_list.length)}])},{default:a((()=>[i(X,{option:{tip:"暂无商品"}})])),_:1},8,["class"]))]})),_:1},8,["class"]),i(re,{ref_key:"cartRef",ref:be},null,512)]})),_:1},8,["onInit"]),s(oe).cart.control&&"cart"===s(oe).cart.event?(o(),r(j,{key:0,class:"bg-[#fff] z-10 flex justify-between items-center fixed left-0 right-0 bottom-[50px] box-solid px-[24rpx] py-[17rpx] mb-ios"},{default:a((()=>[i(j,{class:"flex items-center"},{default:a((()=>[i(j,{class:"w-[66rpx] h-[66rpx] mr-[27rpx] relative"},{default:a((()=>[i(j,{id:"animation-end",class:"w-[66rpx] h-[66rpx] rounded-[35rpx] bg-[var(--primary-color)] text-center leading-[70rpx]",onClick:n(ye,["stop"])},{default:a((()=>[i(F,{class:"icongouwuche1 iconfont text-[#fff] text-[30rpx]"})])),_:1},8,["onClick"]),s(M)?(o(),r(j,{key:0,class:d(["absolute left-[50rpx] top-[-10rpx] rounded-[28rpx] h-[28rpx] min-w-[28rpx] text-center leading-[30rpx] bg-[#FF4646] text-[#fff] text-[20rpx] font-500 box-border",s(M)>9?"px-[10rpx]":""])},{default:a((()=>[y(w(s(M)>99?"99+":s(M)),1)])),_:1},8,["class"])):u("v-if",!0)])),_:1}),i(F,{class:"text-[32rpx] font-500 text-[#333]"},{default:a((()=>[y("总计：")])),_:1}),i(F,{class:"text-[var(--price-text-color)] price-font"},{default:a((()=>[i(F,{class:"text-[26rpx] font-500"},{default:a((()=>[y("￥")])),_:1}),i(F,{class:"text-[36rpx] font-500"},{default:a((()=>[y(w(parseFloat(s(U)).toFixed(2).split(".")[0]),1)])),_:1}),i(F,{class:"text-[24rpx] font-500"},{default:a((()=>[y("."+w(parseFloat(s(U)).toFixed(2).split(".")[1]),1)])),_:1})])),_:1})])),_:1}),i(O,{class:"w-[180rpx] h-[66rpx] text-[28rpx] leading-[66rpx] !text-[#fff] m-0 rounded-full bg-color remove-border",shape:"circle",onClick:we},{default:a((()=>[y("去结算 ")])),_:1})])),_:1})):u("v-if",!0)])),_:1},8,["class"])):u("v-if",!0),E(i(j,{style:V(xe.value),class:"fixed z-999 flex items-center justify-center text-[#fff] bg-color h-[44rpx] w-[44rpx] rounded-[22rpx] text-center"},{default:a((()=>[i(F,{class:"iconfont icongouwuche !text-[30rpx]"})])),_:1},8,["style"]),[[A,xe.value]]),fe.value.length||s(de)?u("v-if",!0):(o(),r(j,{key:1,class:"flex justify-center items-center w-[100%] bg-[#fff]"},{default:a((()=>[i(X,{option:{tip:"暂无商品分类"}})])),_:1})),i(R,{"bg-color":"rgb(248,248,248)",loading:s(de),loadingText:"",fontSize:"16",color:"#303133"},null,8,["loading"]),i(G,{addon:"shop"})])),_:1})}}}),[["__scopeId","data-v-ce57de18"]]),ie=Y(e({__name:"category",setup(e){const l=le(),s=t({}),i=t(0);return T((e=>{i.value=e.category_id||0,W().then((e=>{s.value=e.data,U({title:s.value.page_title})}))})),M((()=>{l.getList()})),(e,t)=>{const l=b;return o(),r(l,{style:V(e.themeColor())},{default:a((()=>[1===s.value.level&&"style-1"===s.value.template?(o(),r(ae,{key:0,class:"category",categoryId:i.value,config:s.value},null,8,["categoryId","config"])):u("v-if",!0),2===s.value.level&&"style-1"===s.value.template?(o(),r(oe,{key:1,categoryId:i.value,config:s.value},null,8,["categoryId","config"])):u("v-if",!0),2===s.value.level&&"style-2"===s.value.template?(o(),r(se,{key:2,class:"category",categoryId:i.value,config:s.value},null,8,["categoryId","config"])):u("v-if",!0)])),_:1},8,["style"])}}}),[["__scopeId","data-v-25ab6188"]]);export{ie as default};
