import{_ as e}from"./u-input.e030155a.js";import{am as a,an as t,ao as l,aY as r,aW as o,aX as s,bL as n,o as i,c as d,w as u,b as c,n as m,y as p,z as h,f,Q as g,c0 as b,D as y,i as _,d as v,r as x,p as j,aH as C,j as S,u as V,cd as P,A as k,aJ as B,aK as $,a as E,g as F,h as w,F as K}from"./index-9317da28.js";import{_ as I}from"./u-form-item.83fe1c60.js";import{_ as T}from"./u-switch.4466d14d.js";import{_ as N}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as H}from"./u-button.c3400270.js";import{_ as U}from"./u-form.cfe692b2.js";import{_ as D}from"./area-select.vue_vue_type_script_setup_true_lang.cd88be8d.js";import{f as A}from"./tkjhkd.71d3825e.js";import"./u-icon.5e775659.js";/* empty css                                                                */import"./u-line.30917996.js";/* empty css                                                               */import"./u-loading-icon.aabe3d05.js";/* empty css                                                                       */import"./u-popup.1f2ebcae.js";import"./u-transition.65be38eb.js";import"./u-safe-bottom.3546c5bb.js";const L=N({name:"u-textarea",mixins:[t,l,{props:{value:{type:[String,Number],default:()=>a.textarea.value},modelValue:{type:[String,Number],default:()=>a.textarea.value},placeholder:{type:[String,Number],default:()=>a.textarea.placeholder},placeholderClass:{type:String,default:()=>a.input.placeholderClass},placeholderStyle:{type:[String,Object],default:()=>a.input.placeholderStyle},height:{type:[String,Number],default:()=>a.textarea.height},confirmType:{type:String,default:()=>a.textarea.confirmType},disabled:{type:Boolean,default:()=>a.textarea.disabled},count:{type:Boolean,default:()=>a.textarea.count},focus:{type:Boolean,default:()=>a.textarea.focus},autoHeight:{type:Boolean,default:()=>a.textarea.autoHeight},fixed:{type:Boolean,default:()=>a.textarea.fixed},cursorSpacing:{type:Number,default:()=>a.textarea.cursorSpacing},cursor:{type:[String,Number],default:()=>a.textarea.cursor},showConfirmBar:{type:Boolean,default:()=>a.textarea.showConfirmBar},selectionStart:{type:Number,default:()=>a.textarea.selectionStart},selectionEnd:{type:Number,default:()=>a.textarea.selectionEnd},adjustPosition:{type:Boolean,default:()=>a.textarea.adjustPosition},disableDefaultPadding:{type:Boolean,default:()=>a.textarea.disableDefaultPadding},holdKeyboard:{type:Boolean,default:()=>a.textarea.holdKeyboard},maxlength:{type:[String,Number],default:()=>a.textarea.maxlength},border:{type:String,default:()=>a.textarea.border},formatter:{type:[Function,null],default:()=>a.textarea.formatter},ignoreCompositionEvent:{type:Boolean,default:!0}}}],data:()=>({innerValue:"",focused:!1,firstChange:!0,changeFromInner:!1,innerFormatter:e=>e}),created(){},watch:{modelValue:{immediate:!0,handler(e,a){this.innerValue=e,!1===this.firstChange&&!1===this.changeFromInner&&this.valueChange(),this.firstChange=!1,this.changeFromInner=!1}}},computed:{textareaClass(){let e=[],{border:a,disabled:t}=this;return"surround"===a&&(e=e.concat(["u-border","u-textarea--radius"])),"bottom"===a&&(e=e.concat(["u-border-bottom","u-textarea--no-radius"])),t&&e.push("u-textarea--disabled"),e.join(" ")},textareaStyle(){return r({},o(this.customStyle))}},emits:["update:modelValue","linechange","focus","blur","change","confirm","keyboardheightchange"],methods:{addStyle:o,addUnit:s,setFormatter(e){this.innerFormatter=e},onFocus(e){this.$emit("focus",e)},onBlur(e){this.$emit("blur",e),n(this,"blur")},onLinechange(e){this.$emit("linechange",e)},onInput(e){let{value:a=""}=e.detail||{};const t=(this.formatter||this.innerFormatter)(a);this.innerValue=a,this.$nextTick((()=>{this.innerValue=t,this.valueChange()}))},valueChange(){const e=this.innerValue;this.$nextTick((()=>{this.$emit("update:modelValue",e),this.changeFromInner=!0,this.$emit("change",e),n(this,"change")}))},onConfirm(e){this.$emit("confirm",e)},onKeyboardheightchange(e){this.$emit("keyboardheightchange",e)}}},[["render",function(e,a,t,l,r,o){const s=b,n=y,v=_;return i(),d(v,{class:g(["u-textarea",o.textareaClass]),style:m([o.textareaStyle])},{default:u((()=>[c(s,{class:"u-textarea__field",value:r.innerValue,style:m({height:o.addUnit(e.height)}),placeholder:e.placeholder,"placeholder-style":o.addStyle(e.placeholderStyle,"string"),"placeholder-class":e.placeholderClass,disabled:e.disabled,focus:e.focus,autoHeight:e.autoHeight,fixed:e.fixed,cursorSpacing:e.cursorSpacing,cursor:e.cursor,showConfirmBar:e.showConfirmBar,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd,adjustPosition:e.adjustPosition,disableDefaultPadding:e.disableDefaultPadding,holdKeyboard:e.holdKeyboard,maxlength:e.maxlength,"confirm-type":e.confirmType,ignoreCompositionEvent:e.ignoreCompositionEvent,onFocus:o.onFocus,onBlur:o.onBlur,onLinechange:o.onLinechange,onInput:o.onInput,onConfirm:o.onConfirm,onKeyboardheightchange:o.onKeyboardheightchange},null,8,["value","style","placeholder","placeholder-style","placeholder-class","disabled","focus","autoHeight","fixed","cursorSpacing","cursor","showConfirmBar","selectionStart","selectionEnd","adjustPosition","disableDefaultPadding","holdKeyboard","maxlength","confirm-type","ignoreCompositionEvent","onFocus","onBlur","onLinechange","onInput","onConfirm","onKeyboardheightchange"]),e.count?(i(),d(n,{key:0,class:"u-textarea__count",style:m({"background-color":e.disabled?"transparent":"#fff"})},{default:u((()=>[p(h(r.innerValue.length)+"/"+h(e.maxlength),1)])),_:1},8,["style"])):f("v-if",!0)])),_:1},8,["class","style"])}],["__scopeId","data-v-56565a8a"]]),q=N(v({__name:"address_edit",setup(a){const t=x(),l=x({id:0,name:"",mobile:"",province_id:0,city_id:0,district_id:0,address:"",full_address:"",is_default:0,area:"",type:"address"}),r=x(),o=x(null),s=x(""),n=x(""),f=x(!1),g=()=>{setTimeout((()=>{b()}),500)},b=()=>{t.value?A({address:t.value}).then((e=>{Object.assign(l.value,e.data),uni.$u.toast("地址解析成功"),t.value=""})):uni.$u.toast("请填写解析地址")};j((e=>{e.id&&C(e.id).then((({data:e})=>{e&&Object.assign(l.value,e)})).catch(),s.value=e.type||"",n.value=e.source||""}));const y=S((()=>({name:{type:"string",required:!0,message:K("namePlaceholder"),trigger:["blur","change"]},mobile:[{type:"string",required:!0,message:K("mobilePlaceholder"),trigger:["blur","change"]},{validator(e,a,t){/^1[3-9]\d{9}$/.test(a)?t():t(new Error(K("mobileError")))}}],area:{validator:()=>!uni.$u.test.isEmpty(l.value.area),message:K("selectAreaPlaceholder")},address:{type:"string",required:!0,message:K("addressPlaceholder"),trigger:["blur","change"]}}))),v=()=>{r.value.open()},N=e=>{l.value.province_id=e.province.id||0,l.value.city_id=e.city.id||0,l.value.district_id=e.district.id||0,l.value.area=`${e.province.name||""}${e.city.name||""}${e.district.name||""}`},q=x(!1),O=()=>{const e=l.value.id?B:$;o.value.validate().then((()=>{q.value||(q.value=!0,f.value=!0,l.value.full_address=l.value.area+l.value.address,e(l.value).then((e=>{q.value=!1,setTimeout((()=>{f.value=!1,E({url:"/addon/tk_jhkd/pages/address/address",mode:"redirectTo",param:{type:s.value,source:n.value}})}),1e3)})).catch((()=>{q.value=!1,f.value=!1})))}))};return(a,s)=>{const n=F(w("u-input"),e),x=F(w("u-form-item"),I),j=_,C=F(w("u-switch"),T),S=F(w("u-textarea"),L),B=F(w("u-button"),H),$=F(w("u-form"),U),E=F(w("area-select"),D);return i(),d(j,{class:"px-[30rpx]",style:m(a.themeColor())},{default:u((()=>[c($,{labelPosition:"left",model:l.value,labelWidth:"200rpx",errorType:"toast",rules:V(y),ref_key:"formRef",ref:o},{default:u((()=>[c(j,{class:"mt-[10rpx]"},{default:u((()=>[c(x,{label:V(K)("name"),prop:"name","border-bottom":!0},{default:u((()=>[c(n,{modelValue:l.value.name,"onUpdate:modelValue":s[0]||(s[0]=e=>l.value.name=e),modelModifiers:{trim:!0},border:"none",clearable:"",maxlength:"25",placeholder:V(K)("namePlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),c(j,{class:"mt-[10rpx]"},{default:u((()=>[c(x,{label:V(K)("mobile"),prop:"mobile","border-bottom":!0},{default:u((()=>[c(n,{modelValue:l.value.mobile,"onUpdate:modelValue":s[1]||(s[1]=e=>l.value.mobile=e),border:"none",clearable:"",placeholder:V(K)("mobilePlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),c(j,{class:"mt-[10rpx]"},{default:u((()=>[c(x,{label:V(K)("selectArea"),prop:"area","border-bottom":!0,onClick:v},{default:u((()=>[l.value.area?(i(),d(j,{key:1,class:"text-[30rpx]"},{default:u((()=>[p(h(l.value.area),1)])),_:1})):(i(),d(j,{key:0,class:"text-gray-placeholder text-[30rpx]"},{default:u((()=>[p(h(V(K)("selectAreaPlaceholder")),1)])),_:1}))])),_:1},8,["label"])])),_:1}),c(j,{class:"mt-[10rpx]"},{default:u((()=>[c(x,{label:V(K)("address"),prop:"address","border-bottom":!0},{default:u((()=>[c(n,{modelValue:l.value.address,"onUpdate:modelValue":s[2]||(s[2]=e=>l.value.address=e),modelModifiers:{trim:!0},border:"none",clearable:"",maxlength:"120",placeholder:V(K)("addressPlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),c(j,{class:"mt-[10rpx]"},{default:u((()=>[c(x,{label:V(K)("defaultAddress"),prop:"name","border-bottom":!0},{default:u((()=>[c(C,{modelValue:l.value.is_default,"onUpdate:modelValue":s[3]||(s[3]=e=>l.value.is_default=e),size:"20",activeValue:1,inactiveValue:0,activeColor:"var(--primary-color)"},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),c(j,{class:"tk-card1 p-2 mt-4 mb-4"},{default:u((()=>[c(S,{clearable:"",border:"none",modelValue:t.value,"onUpdate:modelValue":s[4]||(s[4]=e=>t.value=e),height:"40",placeholder:"在此处输入粘贴地址可以快速自动识别",maxlength:"240",onKeydown:[P(a.handleEnter,["enter"]),P(k(a.handleShiftEnter,["shift"]),["enter"])],onPaste:g,autoHeight:""},null,8,["modelValue","onKeydown"]),c(j,{class:"flex justify-end tk-tag w-48px text-xs mt-1 ml-2",onClick:s[5]||(s[5]=e=>b())},{default:u((()=>[p("地址识别")])),_:1})])),_:1}),c(j,{class:"mt-[40rpx]"},{default:u((()=>[c(B,{type:"primary",shape:"circle",text:V(K)("save"),onClick:O,disabled:f.value,loading:q.value},null,8,["text","disabled","loading"])])),_:1})])),_:1},8,["model","rules"]),c(E,{ref_key:"areaRef",ref:r,onComplete:N,"area-id":l.value.district_id},null,8,["area-id"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-24ffcf79"]]);export{q as default};
