import{_ as e}from"./u-input.6410b5d0.js";import{d as a,r as l,p as r,aH as t,j as o,o as s,c as d,w as i,b as u,u as m,y as n,z as p,n as c,aJ as _,aK as v,a as b,g as f,h,i as g,F as y}from"./index-2882a2d8.js";import{_ as x}from"./u-form-item.03ed7ff5.js";import{_ as j}from"./u-switch.3ee1caf1.js";import{_ as V}from"./u-button.0ab7ff00.js";import{_ as P}from"./u-form.54744837.js";import{_ as k}from"./area-select.vue_vue_type_script_setup_true_lang.1ee3e80e.js";import"./u-icon.1104ad2f.js";import"./_plugin-vue_export-helper.1b428a4d.js";/* empty css                                                                */import"./u-line.d7ff94e2.js";/* empty css                                                               */import"./u-loading-icon.a37f7e61.js";/* empty css                                                                       */import"./u-popup.2abbe959.js";import"./u-overlay.1a317a4e.js";import"./u-transition.4448d2e5.js";import"./u-safe-bottom.f13b01b8.js";const $=a({__name:"address_edit",setup(a){const $=l({id:0,name:"",mobile:"",province_id:0,city_id:0,district_id:0,address:"",full_address:"",is_default:0,area:""}),C=l(),w=l(null),A=l(!1);r((e=>{e.id&&t(e.id).then((({data:e})=>{e&&Object.assign($.value,e)})).catch()}));const U=o((()=>({name:{type:"string",required:!0,message:y("namePlaceholder"),trigger:["blur","change"]},mobile:[{type:"string",required:!0,message:y("mobilePlaceholder"),trigger:["blur","change"]},{validator(e,a,l){/^1[3-9]\d{9}$/.test(a)?l():l(new Error(y("mobileError")))}}],area:{validator:()=>!uni.$u.test.isEmpty($.value.area),message:y("selectAreaPlaceholder")},address:{type:"string",required:!0,message:y("addressPlaceholder"),trigger:["blur","change"]}}))),q=()=>{C.value.open()},E=e=>{$.value.province_id=e.province.id||0,$.value.city_id=e.city.id||0,$.value.district_id=e.district.id||0,$.value.area=`${e.province.name||""}${e.city.name||""}${e.district.name||""}`},M=l(!1),z=()=>{const e=$.value.id?_:v;w.value.validate().then((()=>{M.value||(M.value=!0,A.value=!0,$.value.full_address=$.value.area+$.value.address,e($.value).then((e=>{M.value=!1,setTimeout((()=>{A.value=!1,b({url:"/addon/o2o/pages/address/index"})}),1e3)})).catch((()=>{M.value=!1,A.value=!1})))}))};return(a,l)=>{const r=f(h("u-input"),e),t=f(h("u-form-item"),x),o=g,_=f(h("u-switch"),j),v=f(h("u-button"),V),b=f(h("u-form"),P),R=f(h("area-select"),k);return s(),d(o,{style:c(a.themeColor())},{default:i((()=>[u(o,{class:"px-[30rpx]"},{default:i((()=>[u(b,{labelPosition:"left",model:$.value,labelWidth:"200rpx",errorType:"toast",rules:m(U),ref_key:"formRef",ref:w},{default:i((()=>[u(o,{class:"mt-[10rpx]"},{default:i((()=>[u(t,{label:m(y)("name"),prop:"name","border-bottom":!0},{default:i((()=>[u(r,{modelValue:$.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>$.value.name=e),modelModifiers:{trim:!0},border:"none",clearable:"",placeholder:m(y)("namePlaceholder"),maxlength:"25"},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),u(o,{class:"mt-[10rpx]"},{default:i((()=>[u(t,{label:m(y)("mobile"),prop:"mobile","border-bottom":!0},{default:i((()=>[u(r,{modelValue:$.value.mobile,"onUpdate:modelValue":l[1]||(l[1]=e=>$.value.mobile=e),modelModifiers:{trim:!0},border:"none",clearable:"",placeholder:m(y)("mobilePlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),u(o,{class:"mt-[10rpx]"},{default:i((()=>[u(t,{label:m(y)("selectArea"),prop:"area","border-bottom":!0,onClick:q},{default:i((()=>[$.value.area?(s(),d(o,{key:1,class:"text-[30rpx]"},{default:i((()=>[n(p($.value.area),1)])),_:1})):(s(),d(o,{key:0,class:"text-gray-placeholder text-[30rpx]"},{default:i((()=>[n(p(m(y)("selectAreaPlaceholder")),1)])),_:1}))])),_:1},8,["label"])])),_:1}),u(o,{class:"mt-[10rpx]"},{default:i((()=>[u(t,{label:m(y)("address"),prop:"address","border-bottom":!0},{default:i((()=>[u(r,{modelValue:$.value.address,"onUpdate:modelValue":l[2]||(l[2]=e=>$.value.address=e),modelModifiers:{trim:!0},border:"none",clearable:"",placeholder:m(y)("addressPlaceholder"),maxlength:"120"},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),u(o,{class:"mt-[10rpx]"},{default:i((()=>[u(t,{label:m(y)("defaultAddress"),prop:"name","border-bottom":!0},{default:i((()=>[u(_,{modelValue:$.value.is_default,"onUpdate:modelValue":l[3]||(l[3]=e=>$.value.is_default=e),size:"20",activeValue:1,inactiveValue:0,activeColor:"var(--primary-color)"},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),u(o,{class:"mt-[40rpx]"},{default:i((()=>[u(v,{class:"text-[var-(--primary-color)]",type:"primary",shape:"circle",text:m(y)("save"),onClick:z,disabled:A.value,loading:M.value},null,8,["text","disabled","loading"])])),_:1})])),_:1},8,["model","rules"])])),_:1}),u(R,{ref_key:"areaRef",ref:C,onComplete:E,"area-id":$.value.district_id},null,8,["area-id"])])),_:1},8,["style"])}}});export{$ as default};
