import{d as e,l as a,j as s,r as o,p as l,o as r,c as t,w as d,b as i,n,u as p,U as c,ad as u,V as m,f as x,ae as f,af as _,i as g,g as v,h as b,E as h,W as y,y as k,z as j,A as w,a as C,B as F,bl as P,D as U,_ as I}from"./index-71c7df08.js";import{M as S}from"./mescroll-body.49de0f6f.js";import{M}from"./mescroll-empty.95b8c17e.js";import{u as z}from"./useMescroll.26ccf5de.js";import{e as R}from"./fenxiao.04341d50.js";import{s as D}from"./share-poster.aefc8367.js";import"./mescroll-i18n.00218d15.js";/* empty css                                                                       */const E=I(e({__name:"goods",setup(e){const{mescrollInit:I,downCallback:E,getMescroll:V}=z(_,f),A=a(),B=s((()=>A.info)),N=o([]),O=o(!0);o(null),l((()=>{}));const Q=e=>{let a={page:e.num,limit:e.size};O.value=!0,R(a).then((a=>{let s=a.data.data;1==e.num&&(N.value=[]),N.value=N.value.concat(s),O.value=!1,e.endSuccess(s.length)})).catch((()=>{O.value=!1,e.endErr()}))},T=o(null),W=o(""),q=o("");let G={};const H=e=>{G.sku_id=e.goodsSku.sku_id,B.value&&B.value.member_id&&(G.member_id=B.value.member_id),(e=>{q.value="/addon/shop/pages/goods/detail",W.value="?goods_id="+e.goods_id,B.value&&B.value.member_id&&(W.value+="&mid="+B.value.member_id)})(e),T.value.openShare()};return(e,a)=>{const s=g,o=F,l=v(b("u--image"),P),f=U;return r(),t(s,{class:"bg-[var(--page-bg-color)] min-h-[100vh]",style:n(e.themeColor())},{default:d((()=>[i(S,{ref:"mescrollRef",onInit:p(I),onUp:Q,down:{use:!1}},{default:d((()=>[i(s,{class:"w-[100%] h-[340rpx]",style:n({backgroundImage:"url("+p(h)("addon/shop_fenxiao/fenxiao_goods_bg.png")+")","background-size":"cover"})},null,8,["style"]),(r(!0),c(m,null,u(N.value,((e,a)=>(r(),t(s,{class:y(["bg-white flex card-template sidebar-margin rounded-[var(--rounded-big)] overflow-hidden mt-[var(--top-m)]",{"mb-[20rpx]":a+1==N.value.length}]),key:a,onClick:a=>{C({url:"/addon/shop/pages/goods/detail",param:{goods_id:e.goods_id}})}},{default:d((()=>[i(s,{class:"w-[190rpx] h-[190rpx]"},{default:d((()=>[i(l,{width:"190rpx",height:"190rpx",radius:"var(--goods-rounded-big)",src:p(h)(e.goods_cover_thumb_mid?e.goods_cover_thumb_mid:""),model:"aspectFill"},{error:d((()=>[i(o,{class:"w-[190rpx] h-[190rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:p(h)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["src"])])),_:2},1024),i(s,{class:"flex-1 flex flex-col ml-[20rpx] py-[4rpx]"},{default:d((()=>[i(s,{class:"text-[28rpx] text-[#333] leading-[40rpx] multi-hidden mb-[10rpx]"},{default:d((()=>[k(j(e.goods_name),1)])),_:2},1024),i(s,{class:"mt-auto flex justify-between items-end"},{default:d((()=>[i(s,{class:"text-[var(--price-text-color)] price-font flex items-baseline"},{default:d((()=>[i(f,{class:"text-[24rpx] font-500"},{default:d((()=>[k("￥")])),_:1}),i(f,{class:"text-[40rpx] font-500"},{default:d((()=>[k(j(parseFloat(e.goodsSku.price).toFixed(2).split(".")[0]),1)])),_:2},1024),i(f,{class:"text-[24rpx] font-500"},{default:d((()=>[k("."+j(parseFloat(e.goodsSku.price).toFixed(2).split(".")[1]),1)])),_:2},1024)])),_:2},1024),i(s,{onClick:w((a=>H(e)),["stop"]),class:"text-[24rpx] box-border border-[2rpx] border-solid border-[var(--price-text-color)] px-[16rpx] h-[54rpx] flex-center rounded-[50rpx] text-[var(--price-text-color)]"},{default:d((()=>[i(f,{class:"nc-iconfont nc-icon-fenxiangV6xx-1 mr-[6rpx] !text-[26rpx]"}),i(f,null,{default:d((()=>[k("赚"+j(e.commission)+"元",1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128)),N.value.length||O.value?x("v-if",!0):(r(),t(M,{key:0,option:{icon:p(h)("static/resource/images/empty.png")}},null,8,["option"]))])),_:1},8,["onInit"]),i(D,{ref_key:"sharePosterRef",ref:T,posterType:"fenxiao_goods",posterParam:p(G),copyUrlParam:W.value,copyUrl:q.value},null,8,["posterParam","copyUrlParam","copyUrl"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-6d71643f"]]);export{E as default};
