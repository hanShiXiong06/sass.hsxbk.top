import{d as e,r as a,p as r,o as t,c as l,w as s,b as o,W as d,y as c,U as i,ad as n,V as p,f as u,u as f,n as x,ae as _,af as g,i as m,ac as v,g as b,h,z as y,E as k,A as C,a as w,B as j,D as z,aw as M,C as E}from"./index-71c7df08.js";import{_ as F}from"./loading-page.vue_vue_type_script_setup_true_lang.c7dc2256.js";import{g as I}from"./records.6378d415.js";import{g as U}from"./card.1368a464.js";import{M as V}from"./mescroll-body.49de0f6f.js";import{M as R}from"./mescroll-empty.95b8c17e.js";import{u as S}from"./useMescroll.26ccf5de.js";import"./mescroll-i18n.00218d15.js";/* empty css                                                                       */const q=e({__name:"receive_list",setup(e){const{mescrollInit:q,downCallback:A,getMescroll:B}=S(g,_),D=a([]),N=a(!0),O=a(!0),P=a({});r((e=>{Q()}));const Q=()=>{O.value=!1,P.value={},U().then((e=>{P.value=e.data,O.value=!0})).catch((()=>{O.value=!0}))},W=e=>{N.value=!0;let a={page:e.num,limit:e.size,status:G.value};I(a).then((a=>{let r=a.data.data;1==e.num&&(D.value=[]),D.value=D.value.concat(r),e.endSuccess(r.length),N.value=!1})).catch((()=>{N.value=!1,e.endErr()}))},G=a(""),H=e=>{G.value=e,B().resetUpScroll()},J=e=>{let a="";return a="balance"==e.giftcard.card_right_type?"addon/shop_giftcard/diy/index/value_card.jpg":"addon/shop_giftcard/diy/index/redemption_card.jpg",a},K=(e,a)=>{w("use"==e?{url:"/addon/shop_giftcard/pages/use_card",param:{card_id:a}}:{url:"/addon/shop_giftcard/pages/give",param:{card_id:a}})};return(e,a)=>{const r=m,_=v,g=j,w=z,I=b(h("u-avatar"),M),U=E,S=b(h("loading-page"),F);return t(),l(r,{class:"bg-[#f8f8f8] min-h-[100vh]",style:x(e.themeColor())},{default:s((()=>[O.value?(t(),l(r,{key:0,class:"fixed left-0 top-0 right-0 z-10"},{default:s((()=>[o(_,{"scroll-x":!0,class:"tab-style-2"},{default:s((()=>[o(r,{class:"tab-content"},{default:s((()=>[o(r,{class:d(["tab-items",{"class-select":""===G.value}]),onClick:a[0]||(a[0]=e=>H(""))},{default:s((()=>[c("全部")])),_:1},8,["class"]),(t(!0),i(p,null,n(P.value,((e,a)=>(t(),l(r,{class:d(["tab-items",{"class-select":G.value===a}]),onClick:e=>H(a)},{default:s((()=>[c(y(e),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1})):u("v-if",!0),o(V,{ref:"mescrollRef",top:"88rpx",onInit:f(q),down:{use:!1},onUp:W},{default:s((()=>[D.value.length?(t(),l(r,{key:0,class:"sidebar-margin pt-[var(--top-m)]"},{default:s((()=>[(t(!0),i(p,null,n(D.value,((e,a)=>(t(),l(r,{onClick:a=>K("use",e.card_id),class:"h-[430rpx] mb-[var(--top-m)] rounded-[var(--rounded-big)] overflow-hidden box-border relative"},{default:s((()=>[e.card_cover?(t(),l(g,{key:0,class:"w-[100%] h-[100%] rounded-[var(--goods-rounded-big)] overflow-hidden",src:f(k)(e.card_cover||""),onError:a=>e.card_cover=J(e),mode:"aspectFill"},null,8,["src","onError"])):(t(),l(g,{key:1,class:"w-[100%] h-[100%] rounded-[var(--goods-rounded-big)] overflow-hidden",src:f(k)(J(e)),mode:"aspectFill"},null,8,["src"])),o(r,{class:"flex flex-col justify-between w-full h-[430rpx] mb-[var(--top-m)] rounded-[var(--rounded-big)] overflow-hidden box-border absolute left-0 top-0 z-5"},{default:s((()=>[o(r,{class:"flex py-[var(--pad-top-m)] px-[var(--pad-sidebar-m)]"},{default:s((()=>[o(r,{class:"flex h-[38rpx] px-[10rpx] bg-[rgba(255,255,255,0.9)] rounded-[19rpx]"},{default:s((()=>[o(w,{class:d(["mr-[8rpx] iconfont !text-[22rpx] !leading-[38rpx]",{"iconchuzhikaV6mm !text-[#EF000C]":"balance"==e.giftcard.card_right_type,"iconduihuankaV6mm-1 !text-[#FF7700]":"goods"==e.giftcard.card_right_type}])},null,8,["class"]),"balance"==e.giftcard.card_right_type?(t(),l(w,{key:0,class:"!text-[26rpx] font-500 !leading-[38rpx]"},{default:s((()=>[c(y(e.balance),1)])),_:2},1024)):u("v-if",!0),o(w,{class:"!text-[22rpx] font-400 !leading-[38rpx]"},{default:s((()=>["balance"==e.giftcard.card_right_type?(t(),l(w,{key:0},{default:s((()=>[c("元")])),_:1})):u("v-if",!0),c(y(e.giftcard.card_right_type_name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),o(r,{class:"flex items-center justify-between bg-[rgba(255,255,255,0.9)] h-[80rpx] px-[var(--pad-sidebar-m)] box-border"},{default:s((()=>[o(r,{class:"flex items-center"},{default:s((()=>[o(I,{src:f(k)(e.record_info.fromMember.headimg),size:"54rpx",leftIcon:"none","default-url":f(k)("static/resource/images/default_headimg.png")},null,8,["src","default-url"]),o(r,{class:"w-[250rpx] text-[28rpx] font-400 leading-[38rpx] ml-[8rpx] truncate"},{default:s((()=>[c(y(e.record_info.fromMember.nickname),1)])),_:2},1024)])),_:2},1024),o(r,{class:"flex items-center"},{default:s((()=>["to_use"==e.status&&e.giftcard.is_give?(t(),l(U,{key:0,class:"h-[50rpx] font-500 text-[22rpx] leading-[46rpx] !text-[#333] !bg-transparent m-0 rounded-[25rpx] px-[22rpx] border-[2rpx] border-solid border-[var(--text-color-light9)] box-border ml-[20rpx]",onClick:C((a=>K("give",e.card_id)),["stop"])},{default:s((()=>[c("赠送好友")])),_:2},1032,["onClick"])):u("v-if",!0),"to_use"==e.status||"can_use"==e.status?(t(),l(U,{key:1,class:"h-[50rpx] font-500 text-[22rpx] leading-[46rpx] !text-[var(--primary-color)] m-0 rounded-[25rpx] px-[22rpx] border-[2rpx] border-solid border-[var(--primary-color)] box-border ml-[20rpx]",onClick:C((a=>K("use",e.card_id)),["stop"])},{default:s((()=>[c("去使用")])),_:2},1032,["onClick"])):u("v-if",!0),"used"==e.status?(t(),l(U,{key:2,class:"h-[50rpx] font-500 text-[22rpx] leading-[50rpx] !text-[var(--text-color-light6)] !bg-[rgba(221,221,221,0.8)] m-0 rounded-[25rpx] px-[22rpx] box-border ml-[20rpx]",onClick:C((a=>K("use",e.card_id)),["stop"])},{default:s((()=>[c("已使用")])),_:2},1032,["onClick"])):u("v-if",!0),"invalid"==e.status?(t(),l(U,{key:3,class:"h-[50rpx] font-500 text-[22rpx] leading-[50rpx] !text-[var(--text-color-light6)] !bg-[rgba(221,221,221,0.8)] m-0 rounded-[25rpx] px-[22rpx] box-border ml-[20rpx]",onClick:C((a=>K("use",e.card_id)),["stop"])},{default:s((()=>[c("已失效")])),_:2},1032,["onClick"])):u("v-if",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})):u("v-if",!0),D.value.length||N.value?u("v-if",!0):(t(),l(R,{key:1,option:{tip:"暂无卡记录",icon:f(k)("addon/shop_giftcard/empty.png")}},null,8,["option"]))])),_:1},8,["onInit"]),o(S,{loading:N.value},null,8,["loading"])])),_:1},8,["style"])}}});export{q as default};
