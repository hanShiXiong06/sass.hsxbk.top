import{d as e,r as t,m as a,l,o as s,c as r,w as o,b as i,u as p,_ as n,x as d,y as u,f as x,E as c,G as f,F as m,aN as _,H as g,B as v,a as b,V as h,bp as y,i as k,g as w,h as j,C,a4 as F,ab as S,t as O,X as T,j as I,I as E,s as L,aj as z,a9 as N,ac as A,a6 as P,bY as U,bZ as D,n as J,U as R,b2 as V,Y as B,b3 as Y,N as q}from"./index-905183d4.js";import{_ as G}from"./u-swiper.607b71bb.js";import{_ as H}from"./u-avatar.c19cb462.js";import{_ as M}from"./u-icon.86a2aad0.js";import{_ as X}from"./u--image.b5d65e0e.js";import{_ as Z}from"./u-parse.b0851c53.js";import{_ as K}from"./u-popup.e3f6594b.js";import{_ as Q}from"./u-loading-page.7aa0a449.js";import{e as W}from"./goods.2e1a20de.js";import{c as $}from"./point.d005bfc9.js";import{_ as ee}from"./u-number-box.3b1a803a.js";import{_ as te}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as ae}from"./share-poster.cfed5f32.js";import"./u-loading-icon.c376267d.js";import"./u-text.86301043.js";import"./u-image.44c969ef.js";import"./u-transition.dbaca185.js";import"./u-safe-bottom.e94b03c1.js";const le=te(e({__name:"goods-sku",props:["goodsDetail"],emits:["change"],setup(e,{expose:I,emit:E}){const L=e;let z=t(!1),N=t(null),A=t({skuId:"",name:[]}),P=t(""),U=t(1),D=a((()=>{let e="0.00";return e=Object.keys(B.value).length&&Object.keys(B.value.goods).length&&B.value.goods.is_discount?B.value.sale_price:Object.keys(B.value).length&&Object.keys(B.value.goods).length&&B.value.goods.member_discount&&T()?B.value.member_price:B.value.price,e}));const J=l(),R=a((()=>J.info)),V=()=>{z.value=!1},B=a((()=>{let e=JSON.parse(JSON.stringify(L.goodsDetail));return Object.keys(e).length&&(Object.keys(A.value.name).length||(A.value.name=e.sku_spec_format.split(",")),e.goodsSpec.forEach(((e,t)=>{let a=e.spec_values.split(",");e.values=[],a.forEach(((a,l)=>{e.values[l]={},e.values[l].name=a,e.values[l].selected=!1,e.values[l].disabled=!1,A.value.name.forEach(((s,r)=>{r==t&&s==a&&(e.values[l].selected=!0)}))}))})),Y(),e.skuList&&Object.keys(e.skuList).length&&e.skuList.forEach(((t,a)=>{t.sku_id==A.value.skuId&&(e.detail=t)}))),e})),Y=()=>{L.goodsDetail.skuList.forEach(((e,t)=>{e.sku_spec_format==A.value.name.toString()&&(A.value.skuId=e.sku_id,E("change",e.sku_id))}))},q=()=>{if(!R.value)return v().setLoginBack({url:"/addon/shop/pages/point/detail",param:{id:B.value.exchange_id}}),!1;var e={sku_id:B.value.sku_id,num:U.value};uni.setStorage({key:"orderCreateData",data:{sku_data:[e]},success:()=>{b({url:"/addon/shop/pages/point/payment"})}}),V()};return I({open:(e="",t="")=>{P.value=e,z.value=!0,N.value=t}}),(e,t)=>{const a=k,l=w(j("u-icon"),M),v=w(j("u--image"),X),b=C,T=w(j("u-number-box"),ee),I=F,E=S,L=w(j("u-popup"),K);return s(),r(a,{onTouchmove:t[3]||(t[3]=n((()=>{}),["prevent","stop"]))},{default:o((()=>[i(L,{class:"popup-type",show:p(z),onClose:V,mode:"bottom"},{default:o((()=>[p(B).detail?(s(),r(a,{key:0,class:"p-[32rpx] relative",onTouchmove:t[2]||(t[2]=n((()=>{}),["prevent","stop"]))},{default:o((()=>[i(a,{class:"absolute right-[37rpx] iconfont iconguanbi text-[36rpx]",onClick:V}),i(a,{class:"flex mb-[58rpx]"},{default:o((()=>[i(a,{class:"rounded-[8rpx] overflow-hidden"},{default:o((()=>[i(v,{width:"180rpx",height:"180rpx",src:p(h)(p(B).detail.sku_image),onClick:t[0]||(t[0]=e=>(e=>{if(""===e)return!1;var t=[];t.push(h(e)),y({indicator:"number",loop:!0,urls:t})})(p(B).detail.sku_image)),model:"aspectFill"},{error:o((()=>[i(l,{name:"photo",color:"#999",size:"50"})])),_:1},8,["src"])])),_:1}),i(a,{class:"flex flex-1 flex-col ml-[20rpx] py-[10rpx]"},{default:o((()=>[i(a,{class:"w-[100%]"},{default:o((()=>[i(a,{class:"text-[var(--price-text-color)] flex items-baseline"},{default:o((()=>[p(B).point?(s(),r(b,{key:0,class:"text-[44rpx] leading-[62rpx] price-font"},{default:o((()=>[d(u(p(B).point)+u(p(O)("point")),1)])),_:1})):x("v-if",!0),p(B).point&&parseFloat(p(B).price)?(s(),r(b,{key:1,class:"text-[36rpx] mb-[10rpx]"},{default:o((()=>[d("+")])),_:1})):x("v-if",!0),parseFloat(p(B).price)?(s(),c(f,{key:2},[i(b,{class:"text-[28rpx] font-bold price-font"},{default:o((()=>[d("￥")])),_:1}),i(b,{class:"text-[48rpx] price-font"},{default:o((()=>[d(u(parseFloat(p(B).price).toFixed(2).split(".")[0]),1)])),_:1}),i(b,{class:"text-[32rpx] mr-[6rpx] price-font"},{default:o((()=>[d("."+u(parseFloat(p(B).price).toFixed(2).split(".")[1]),1)])),_:1})],64)):x("v-if",!0),p(B).point||parseFloat(p(B).price)?x("v-if",!0):(s(),c(f,{key:3},[i(b,{class:"text-[28rpx] font-bold price-font"},{default:o((()=>[d("￥")])),_:1}),i(b,{class:"text-[48rpx] price-font"},{default:o((()=>[d(u(parseFloat(p(B).price).toFixed(2).split(".")[0]),1)])),_:1}),i(b,{class:"text-[32rpx] mr-[6rpx] price-font"},{default:o((()=>[d("."+u(parseFloat(p(D)).toFixed(2).split(".")[1]),1)])),_:1})],64))])),_:1}),i(a,{class:"text-[24rpx] leading-[32rpx] text-[#303133] mt-[12rpx]"},{default:o((()=>[d("库存"+u(p(B).detail.stock)+u(p(B).goods.unit),1)])),_:1})])),_:1}),p(B).goodsSpec&&p(B).goodsSpec.length?(s(),r(a,{key:0,class:"w-[100%] mt-auto",style:{"max-height":"calc(204rpx - 98rpx)",overflow:"hidden"}},{default:o((()=>[i(b,{class:"text-[24rpx] leading-[30rpx] text-[#666]"},{default:o((()=>[d("已选规格："+u(p(B).detail.sku_spec_format),1)])),_:1})])),_:1})):x("v-if",!0)])),_:1})])),_:1}),i(I,{class:"h-[500rpx] mb-[30rpx]","scroll-y":"true"},{default:o((()=>[(s(!0),c(f,null,m(p(B).goodsSpec,((e,t)=>(s(),r(a,{class:g({"mt-[36rpx]":0!=t}),key:t},{default:o((()=>[i(a,{class:"text-[26rpx] leading-[36rpx] mb-[24rpx]"},{default:o((()=>[d(u(e.spec_name),1)])),_:2},1024),i(a,{class:"flex flex-wrap"},{default:o((()=>[(s(!0),c(f,null,m(e.values,((e,l)=>(s(),r(a,{class:g(["box-border bg-[#f2f2f2] text-[24rpx] px-[44rpx] text-center h-[56rpx] leading-[56rpx] mr-[20rpx] mb-[20rpx] border-1 border-solid rounded-[50rpx] border-[#f2f2f2]",{"!border-[var(--primary-color)] text-[var(--primary-color)] !bg-[var(--primary-color-light)]":e.selected}]),key:l,onClick:a=>((e,t)=>{A.value.name[t]=e.name,Y()})(e,t)},{default:o((()=>[d(u(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:2},1024)])),_:2},1032,["class"])))),128)),i(a,{class:"flex justify-between items-center mt-[30rpx]"},{default:o((()=>[i(a,{class:"text-[26rpx]"},{default:o((()=>[d("购买数量")])),_:1}),i(T,{min:1,max:parseInt(p(B).detail.limit_num)<p(B).stock?parseInt(p(B).detail.limit_num):p(B).stock,integer:"",step:1,"input-width":"98rpx",modelValue:p(U),"onUpdate:modelValue":t[1]||(t[1]=e=>_(U)?U.value=e:U=e),"input-height":"54rpx"},{minus:o((()=>[i(b,{class:g(["text-[44rpx] iconfont iconjian",{"!text-[#c8c9cc]":1===p(U)}])},null,8,["class"])])),input:o((()=>[i(b,{class:"number-input text-[#303133] text-center bg-[#f2f2f2] w-[82rpx] fext-[23rpx] mx-[16rpx]"},{default:o((()=>[d(u(p(U)),1)])),_:1})])),plus:o((()=>[i(b,{class:g(["text-[44rpx] iconfont iconjia",{"!text-[#c8c9cc]":p(U)===p(B).stock||p(U)==parseInt(p(B).detail.limit_num)}])},null,8,["class"])])),_:1},8,["max","modelValue"])])),_:1})])),_:1}),p(B).detail.stock>0?(s(),r(E,{key:0,class:"!h-[72rpx] leading-[72rpx] text-[26rpx] rounded-[50rpx]",type:"primary",onClick:q},{default:o((()=>[d("确定")])),_:1})):(s(),r(E,{key:1,class:"!h-[72rpx] leading-[72rpx] text-[26rpx] text-[#fff] bg-[#ccc] rounded-[50rpx]"},{default:o((()=>[d("已售罄")])),_:1}))])),_:1})):x("v-if",!0)])),_:1},8,["show"])])),_:1})}}}),[["__scopeId","data-v-4bf0b3c5"]]),se=te(e({__name:"detail",setup(e){const{setShare:v,onShareAppMessage:T,onShareTimeline:ee}=R(),te=l(),se=a((()=>te.info));let re=t(null),oe=t({}),ie=t(!1),pe=t(!1),ne=t(!1),de=t(!1);I((e=>{$(e.id||"").then((e=>{if("[]"===JSON.stringify(e.data))return E({title:"找不到该商品",icon:"none"}),setTimeout((()=>{b({url:"/addon/shop/pages/index",mode:"reLaunch"})}),600),!1;oe.value=e.data,oe.value.delivery_type_list=oe.value.goods.delivery_type_list?Object.values(oe.value.goods.delivery_type_list).map((e=>e.name)):[],oe.value.goods.goods_image=oe.value.goods.goods_image_thumb_big,oe.value.goods.goods_image.forEach(((e,t)=>{oe.value.goods.goods_image[t]=h(e)})),oe.value.goods.attr_format=oe.value.goods&&oe.value.goods.attr_format?JSON.parse(oe.value.goods.attr_format):[];let t={title:oe.value.goods.goods_name,desc:oe.value.goods.sub_title,url:oe.value.goods.goods_cover_thumb_mid};L({title:oe.value.goods.goods_name}),v({wechat:{...t},weapp:{...t}}),T(),ee(),_e(),Ee(),z((()=>{setTimeout((()=>{const e=V().in(we);e.select(".swiper-box").boundingClientRect((e=>{je=e?e.height:0})).exec(),e.select(".detail-head").boundingClientRect((e=>{e&&(Ce=e.height?e.height:0)})).exec()}),400)}))}))})),N((()=>{uni.removeStorageSync("distributionType")}));const ue=e=>{oe.value.skuList.forEach(((t,a)=>{t.sku_id==e&&Object.assign(oe.value,t)}))},xe=a((()=>{let e=!1;return oe.value.skuList.forEach(((t,a)=>{t.sku_spec_format&&(e=!0)})),!(!e&&oe.value.stock<=0)&&(!e&&oe.value.stock,!0)})),ce=a((()=>{let e=!1;return(oe.value.service&&oe.value.service.length||oe.value.goodsSpec&&oe.value.goodsSpec.length||"real"==oe.value.goods.goods_type&&oe.value.delivery_type_list&&oe.value.delivery_type_list.length)&&(e=!0),e})),fe=e=>{re.value.open(e)},me=t({count:0}),_e=()=>{W(oe.value.goods_id).then((e=>{me.value=e.data}))},ge=e=>{if(""===e)return!1;var t=[];t.push(h(e)),y({indicator:"number",loop:!0,urls:t})},ve=t(0),be=()=>{de.value=!0};let he=A().platform;const ye=a((()=>{let e="";return e+="height: 100rpx;",e+="padding-right: 30rpx;",e+="padding-left: 30rpx;",e+="font-size: 32rpx;","ios"===he?e+="font-weight: 500;":"android"===he&&(e+="font-size: 36rpx;"),e})),ke=a((()=>"")),we=Y();let je=0,Ce=0,Fe=t(!1);P((e=>{let t=je-Ce-20;Fe.value=!1,e.scrollTop>=t&&(Fe.value=!0)}));const Se=e=>{"number"==typeof e&&ge(oe.value.goods.goods_image[e])};let Oe=t(null),Te=t(""),Ie={};const Ee=()=>{Te.value="?id="+oe.value.exchange_id,se.value&&se.value.member_id&&(Te.value+="&mid="+se.value.member_id)},Le=()=>{Ie.id=oe.value.exchange_id,se.value&&se.value.member_id&&(Ie.member_id=se.value.member_id),Oe.value.openShare()};return U((()=>{D()})),(e,t)=>{const a=C,l=k,v=w(j("u-swiper"),G),y=w(j("u-avatar"),H),T=w(j("u-icon"),M),I=w(j("u--image"),X),E=w(j("u-parse"),Z),L=S,z=q,N=F,A=w(j("u-popup"),K),P=w(j("u-loading-page"),Q);return s(),r(l,{style:J(e.themeColor())},{default:o((()=>[Object.keys(p(oe)).length?(s(),r(l,{key:0,class:"bg-[#f7f7f7] min-h-[100vh] relative"},{default:o((()=>[x(" 自定义头部 "),i(l,{class:g(["flex items-center fixed left-0 right-0 z-10 bg-transparent detail-head",{"!bg-[#fff]":p(Fe)}]),style:J(p(ye))},{default:o((()=>[i(a,{class:"iconfont iconjiantou3",style:J(p(ke)),onClick:t[0]||(t[0]=e=>{B({delta:1})})},null,8,["style"])])),_:1},8,["class","style"]),i(l,{class:"swiper-box"},{default:o((()=>[i(v,{list:p(oe).goods.goods_image,autoplay:!1,height:"100vw",onClick:Se},null,8,["list"])])),_:1}),i(l,{class:"-mt-[26rpx] relative flex items-center justify-between !bg-cover box-border pb-[26rpx] h-[136rpx] px-[30rpx]",style:J({background:"url("+p(h)("addon/shop/detail/discount_price_bg.png")+") no-repeat"})},{default:o((()=>[i(l,{class:"flex items-baseline text-[#fff]"},{default:o((()=>[i(l,{class:"flex items-center"},{default:o((()=>[p(oe).point?(s(),r(a,{key:0,class:"text-[44rpx] leading-[62rpx] price-font"},{default:o((()=>[d(u(p(oe).point)+u(p(O)("point")),1)])),_:1})):x("v-if",!0),p(oe).point&&parseFloat(p(oe).price)?(s(),r(a,{key:1,class:"text-[36rpx]"},{default:o((()=>[d("+")])),_:1})):x("v-if",!0),parseFloat(p(oe).price)?(s(),r(a,{key:2,class:"text-[44rpx] leading-[62rpx] price-font"},{default:o((()=>[d(u(parseFloat(p(oe).price).toFixed(2))+u(p(O)("priceUnit")),1)])),_:1})):x("v-if",!0)])),_:1}),p(oe).market_price&&parseFloat(p(oe).market_price)?(s(),r(a,{key:0,class:"text-[26rpx] line-through ml-[5rpx]"},{default:o((()=>[d(" ￥"+u(parseFloat(p(oe).market_price).toFixed(2)),1)])),_:1})):x("v-if",!0)])),_:1})])),_:1},8,["style"]),i(l,{class:"bg-[#f6f6f6] rounded-[16rpx] -mt-[26rpx] relative"},{default:o((()=>[i(l,{class:"relative mx-[30rpx] rounded-[16rpx] pt-[20rpx]"},{default:o((()=>[i(l,{class:"font-medium text-[32rpx] multi-hidden leading-[40rpx]"},{default:o((()=>[d(u(p(oe).goods.goods_name),1)])),_:1}),i(l,{class:"flex items-start mt-[12rpx] pb-[10rpx]"},{default:o((()=>[p(oe).label_info&&p(oe).label_info.length?(s(),r(l,{key:0,class:"flex flex-wrap"},{default:o((()=>[(s(!0),c(f,null,m(p(oe).label_info,(e=>(s(),r(l,{key:e.label_id,class:"text-[#FA6400] mb-[10rpx] leading-[36rpx] text-[22rpx] h-[40rpx] px-[10rpx] border-[2rpx] border-solid border-[#FA6400] rounded-[4rpx] mr-[15rpx] box-border truncate"},{default:o((()=>[d(u(e.label_name),1)])),_:2},1024)))),128))])),_:1})):x("v-if",!0),i(l,{class:"text-[26rpx] mt-[6rpx] text-[#666] flex items-baseline ml-auto"},{default:o((()=>[i(a,{class:"whitespace-nowrap"},{default:o((()=>[d("销量")])),_:1}),i(a,{class:"mx-[2rpx]"},{default:o((()=>[d(u(p(oe).sale_num),1)])),_:1}),i(a,null,{default:o((()=>[d(u(p(oe).goods.unit),1)])),_:1})])),_:1})])),_:1})])),_:1}),p(ce)?(s(),r(l,{key:0,class:"mt-[20rpx] bg-white mx-[20rpx] rounded-[16rpx] px-[20rpx] py-[16rpx]"},{default:o((()=>[p(oe).service&&p(oe).service.length?(s(),r(l,{key:0,onClick:t[1]||(t[1]=e=>_(ne)?ne.value=!p(ne):ne=!p(ne)),class:"flex items-center h-[64rpx]"},{default:o((()=>[i(a,{class:"text-[#666] text-[26rpx] leading-[30rpx] font-400 shrink-0"},{default:o((()=>[d("服务")])),_:1}),i(l,{class:"text-[#343434] text-[26rpx] leading-[30rpx] font-400 truncate ml-auto"},{default:o((()=>[d(u(p(oe).service[0].service_name),1)])),_:1}),i(a,{class:"iconfont iconxiangyoujiantou text-[22rpx] text-[#999] ml-[4rpx]"})])),_:1})):x("v-if",!0),p(oe).goodsSpec&&p(oe).goodsSpec.length?(s(),r(l,{key:1,onClick:fe,class:"flex items-center h-[64rpx]"},{default:o((()=>[i(a,{class:"text-[#666] text-[26rpx] leading-[30rpx] font-400 shrink-0 mr-[20rpx]"},{default:o((()=>[d("已选")])),_:1}),i(l,{class:"ml-auto text-right truncate flex-1 text-[#343434] text-[26rpx] leading-[30rpx] font-400"},{default:o((()=>[d(u(p(oe).sku_spec_format),1)])),_:1}),i(a,{class:"iconfont iconxiangyoujiantou text-[22rpx] text-[#999] ml-[4rpx]"})])),_:1})):x("v-if",!0),"real"==p(oe).goods.goods_type&&p(oe).delivery_type_list&&p(oe).delivery_type_list.length?(s(),r(l,{key:2,class:"flex items-center h-[64rpx]",onClick:be},{default:o((()=>[i(a,{class:"text-[#666] text-[26rpx] leading-[30rpx] font-400 shrink-0"},{default:o((()=>[d("配送")])),_:1}),i(l,{class:"ml-auto flex items-center text-[#343434] text-[26rpx] leading-[30rpx] font-400"},{default:o((()=>[d(u(p(oe).delivery_type_list[ve.value]),1)])),_:1}),i(a,{class:"iconfont iconxiangyoujiantou text-[22rpx] text-[#999] ml-[4rpx]"})])),_:1})):x("v-if",!0)])),_:1})):x("v-if",!0),i(l,{class:"mt-[20rpx] bg-white mx-[20rpx] rounded-[16rpx] px-[20rpx]"},{default:o((()=>[i(l,{class:"flex items-center justify-between h-[80rpx]"},{default:o((()=>[i(a,{class:"text-[28rpx] text-[#303133] font-bold"},{default:o((()=>[d("宝贝评价("+u(me.value.count)+")",1)])),_:1}),me.value.count?(s(),r(l,{key:0,class:"h-[80rpx] leading-[80rpx]",onClick:t[2]||(t[2]=e=>(p(oe).goods_id,void b({url:"/addon/shop/pages/evaluate/list",param:{goods_id:oe.value.goods_id}})))},{default:o((()=>[i(a,{class:"text-[24rpx] text-[#666] mr-[4rpx]"},{default:o((()=>[d("查看全部")])),_:1}),i(a,{class:"iconfont iconxiangyoujiantou text-[22rpx] text-[#999]"})])),_:1})):x("v-if",!0),me.value.count?x("v-if",!0):(s(),r(a,{key:1,class:"text-[24rpx] text-[#666]"},{default:o((()=>[d("暂无评价")])),_:1}))])),_:1}),i(l,null,{default:o((()=>[(s(!0),c(f,null,m(me.value.list,((e,t)=>(s(),r(l,{class:"pb-[20rpx] flex justify-between",key:t},{default:o((()=>[i(l,{class:"flex flex-col"},{default:o((()=>[i(l,{class:"flex items-center"},{default:o((()=>[i(y,{src:p(h)(e.member_head),size:"30rpx",leftIcon:"none"},null,8,["src"]),i(a,{class:"ml-[10rpx] text-[22rpx] text-[#999]"},{default:o((()=>[d(u(e.member_name),1)])),_:2},1024)])),_:2},1024),i(l,{class:"text-[26rpx] text-[#303133] leading-[36rpx] mt-[10rpx] multi-hidden"},{default:o((()=>[d(u(e.content),1)])),_:2},1024)])),_:2},1024),e.image_mid&&e.image_mid.length?(s(),r(I,{key:0,class:"rounded-[8rpx] ml-[50rpx] overflow-hidden",width:"80rpx",height:"80rpx",src:p(h)(e.image_mid[0]),model:"aspectFill",onClick:t=>ge(e.images[0])},{error:o((()=>[i(T,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src","onClick"])):x("v-if",!0)])),_:2},1024)))),128))])),_:1})])),_:1}),p(oe).goods&&p(oe).goods.attr_format&&Object.keys(p(oe).goods.attr_format).length?(s(),r(l,{key:1,class:"my-[20rpx] bg-white mx-[20rpx] rounded-[16rpx] px-[20rpx] pb-[20rpx]"},{default:o((()=>[i(l,{class:"text-[28rpx] h-[80rpx] leading-[80rpx] font-bold"},{default:o((()=>[d("商品属性")])),_:1}),i(l,{class:"border-[2rpx] border-solid border-[#f1f1f1] border-b-0"},{default:o((()=>[(s(!0),c(f,null,m(p(oe).goods.attr_format,((e,t)=>(s(),c(f,{key:t},[t<4||p(ie)?(s(),r(l,{key:0,class:"flex border-0 border-solid border-[#f1f1f1] border-b-[2rpx]"},{default:o((()=>[i(l,{class:"w-[30%] px-[18rpx] py-[8rpx] text-[24rpx] min-h-[70rpx] break-all box-border flex items-center border-0 border-solid border-[#f1f1f1] border-r-[2rpx] bg-[#fbfafa]"},{default:o((()=>[d(u(e.attr_value_name),1)])),_:2},1024),i(l,{class:"w-[70%] px-[18rpx] py-[8rpx] text-[24rpx] min-h-[70rpx] break-all flex items-center box-border"},{default:o((()=>[d(u(Array.isArray(e.attr_child_value_name)?e.attr_child_value_name.join(","):e.attr_child_value_name),1)])),_:2},1024)])),_:2},1024)):x("v-if",!0)],64)))),128)),p(oe).goods.attr_format.length>4?(s(),r(l,{key:0,class:"flex items-center justify-center h-[70rpx] border-0 border-solid border-[#f1f1f1] border-b-[2rpx]",onClick:t[3]||(t[3]=e=>_(ie)?ie.value=!p(ie):ie=!p(ie))},{default:o((()=>[i(a,{class:"text-[24rpx] mr-[10rpx]"},{default:o((()=>[d(u(p(ie)?"展开":"收起"),1)])),_:1}),i(a,{class:g(["iconfont !text-[22rpx]",{iconxiangxiajiantou:p(ie),iconjiantoushang:!p(ie)}])},null,8,["class"])])),_:1})):x("v-if",!0)])),_:1})])),_:1})):x("v-if",!0),i(l,{class:"my-[20rpx] bg-white mx-[20rpx] rounded-[16rpx] px-[20rpx] pd-[10px]"},{default:o((()=>[i(l,{class:"text-[28rpx] h-[80rpx] leading-[80rpx] font-bold"},{default:o((()=>[d("商品详情")])),_:1}),i(l,{class:"u-content"},{default:o((()=>[i(E,{content:p(oe).goods.goods_desc,tagStyle:{img:"vertical-align: top;",p:"overflow: hidden;word-break:break-word;"}},null,8,["content"])])),_:1})])),_:1}),i(l,{class:"tab-bar-placeholder"}),i(l,{class:"w-[100%] flex justify-between px-[27rpx] bg-[#fff] box-border fixed left-0 bottom-0 tab-bar z-1"},{default:o((()=>[i(l,{class:"flex items-center"},{default:o((()=>[i(l,{class:"flex flex-col justify-center items-center mr-[39rpx]",onClick:t[4]||(t[4]=e=>p(b)({url:"/addon/shop/pages/index",mode:"reLaunch"}))},{default:o((()=>[i(l,{class:"iconfont iconshouye1 text-[42rpx]"}),i(a,{class:"text-[18rpx] mt-1"},{default:o((()=>[d("首页")])),_:1})])),_:1}),i(l,{class:"flex flex-col justify-center items-center mr-[39rpx]",onClick:Le},{default:o((()=>[i(l,{class:"iconfont iconfenxiang3 text-[42rpx]"}),i(a,{class:"text-[18rpx] mt-1"},{default:o((()=>[d("分享")])),_:1})])),_:1})])),_:1}),1==p(oe).goods.status?(s(),r(l,{key:0,class:"flex-1"},{default:o((()=>[p(xe)?(s(),r(L,{key:0,class:"!h-[72rpx] text-[26rpx] !text-[#fff] !bg-[#FF4646] !m-0 leading-[72rpx] rounded-full remove-border w-full",onClick:t[5]||(t[5]=e=>fe("buy_now"))},{default:o((()=>[d("立即兑换")])),_:1})):(s(),r(L,{key:1,class:"!w-full !h-[72rpx] text-[26rpx] !text-[#fff] !bg-[#ccc] !m-0 leading-[72rpx] rounded-full remove-border"},{default:o((()=>[d("已售罄")])),_:1}))])),_:1})):(s(),r(l,{key:1,class:"flex flex-1 ml-[40rpx]"},{default:o((()=>[i(L,{class:"w-[100%] !h-[72rpx] text-[26rpx] !text-[#fff] !bg-[#ccc] !m-0 leading-[72rpx] rounded-full remove-border"},{default:o((()=>[d("该商品已下架")])),_:1})])),_:1}))])),_:1})])),_:1}),x(" 服务 "),i(l,{onTouchmove:t[10]||(t[10]=n((()=>{}),["prevent","stop"]))},{default:o((()=>[i(A,{class:"popup-type",show:p(ne),onClose:t[9]||(t[9]=e=>_(ne)?ne.value=!1:ne=!1)},{default:o((()=>[i(l,{class:"min-h-[480rpx]",onTouchmove:t[8]||(t[8]=n((()=>{}),["prevent","stop"]))},{default:o((()=>[i(l,{class:"flex items-center justify-center py-[34rpx] relative"},{default:o((()=>[i(a,{class:"text-[32rpx] leading-[36rpx] font-500"},{default:o((()=>[d("商品服务")])),_:1}),i(l,{class:"absolute right-[37rpx] iconfont iconguanbi text-[36rpx]",onClick:t[6]||(t[6]=e=>_(ne)?ne.value=!1:ne=!1)})])),_:1}),i(N,{class:"h-[520rpx]","scroll-y":"true"},{default:o((()=>[i(l,{class:"pl-[22rpx] pt-[28rpx] pr-[37rpx]"},{default:o((()=>[(s(!0),c(f,null,m(p(oe).service,((e,t)=>(s(),r(l,{class:"flex mb-[28rpx]"},{default:o((()=>[i(z,{class:"max-w-[34rpx] max-h-[34rpx] mr-[14rpx]",src:p(h)(e.image||"addon/shop/icon_service.png"),mode:"aspectFit"},null,8,["src"]),i(l,{class:"flex-1"},{default:o((()=>[i(l,{class:"text-[26rpx] leading-[36rpx] text-[#222] mb-[4rpx] w-[643rpx]"},{default:o((()=>[d(u(e.service_name),1)])),_:2},1024),i(l,{class:"text-[22rpx] leading-[36rpx] text-[#888] w-[643rpx]"},{default:o((()=>[d(u(e.desc),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256))])),_:1})])),_:1}),i(l,{class:"px-[32rpx] pb-[67rpx] pt-[42rpx]"},{default:o((()=>[i(L,{class:"!w-[100%] !h-[72rpx] text-[26rpx] !bg-[#FF4646] !m-0 leading-[72rpx] rounded-full text-white",onClick:t[7]||(t[7]=e=>_(ne)?ne.value=!1:ne=!1)},{default:o((()=>[d("确定")])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1}),x(" 配送 "),i(l,{onTouchmove:t[14]||(t[14]=n((()=>{}),["prevent","stop"]))},{default:o((()=>[i(A,{class:"popup-type",show:p(de),onClose:t[13]||(t[13]=e=>_(de)?de.value=!1:de=!1)},{default:o((()=>[i(l,{class:"min-h-[360rpx]",onTouchmove:t[12]||(t[12]=n((()=>{}),["prevent","stop"]))},{default:o((()=>[i(l,{class:"flex items-center justify-center py-[34rpx] relative"},{default:o((()=>[i(a,{class:"text-[32rpx] leading-[36rpx] font-500"},{default:o((()=>[d("配送方式")])),_:1}),i(l,{class:"absolute right-[37rpx] iconfont iconguanbi text-[36rpx]",onClick:t[11]||(t[11]=e=>_(de)?de.value=!1:de=!1)})])),_:1}),i(N,{class:"h-[520rpx]","scroll-y":"true"},{default:o((()=>[i(l,{class:"pl-[22rpx] pt-[28rpx] pr-[37rpx]"},{default:o((()=>[(s(!0),c(f,null,m(p(oe).delivery_type_list,((e,t)=>(s(),r(l,{class:"flex mb-[28rpx]",onClick:a=>((e,t)=>{ve.value=t,de.value=!1,uni.setStorageSync("distributionType",e)})(e,t)},{default:o((()=>[i(z,{class:"w-[34rpx] h-[34rpx] mr-[14rpx]",src:p(h)("addon/shop/icon_service.png"),mode:"aspectFit"},null,8,["src"]),i(l,{class:"flex-1"},{default:o((()=>[i(l,{class:"text-[26rpx] leading-[36rpx] text-[#222] mb-[4rpx]"},{default:o((()=>[d(u(e),1)])),_:2},1024),i(l,{class:"text-[22rpx] leading-[36rpx] text-[#888]"},{default:o((()=>[d(u(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1}),i(le,{ref_key:"goodsSkuRef",ref:re,"goods-detail":p(oe),onChange:ue},null,8,["goods-detail"]),i(ae,{ref_key:"sharePosterRef",ref:Oe,posterType:"shop_point_goods",posterParam:p(Ie),copyUrlParam:p(Te)},null,8,["posterParam","copyUrlParam"])])),_:1})):x("v-if",!0),i(P,{"bg-color":"rgb(248,248,248)",loading:p(pe),loadingText:"",fontSize:"16",color:"#303133"},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-0f947a91"]]);export{se as default};
