import{d as e,r as l,p as a,O as t,F as s,o,c as r,w as n,b as c,A as d,f as i,R as u,y as p,P as x,a7 as m,Q as f,u as _,n as v,a8 as g,a9 as y,D as b,a5 as h,i as k,g as w,h as j,z as C,E as F,a as E,B as V}from"./index-7bf68536.js";import{_ as P}from"./u-popup.be4bfacd.js";import{_ as T}from"./tabbar.e049672c.js";import{b as I,c as S}from"./goods.ac47f924.js";import{M as U}from"./mescroll-body.b6d57b41.js";import{M}from"./mescroll-empty.fcefb74e.js";import{u as z}from"./useMescroll.26ccf5de.js";import{u as D}from"./useGoods.e187513d.js";import{_ as R}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-transition.cdf87992.js";import"./u-icon.0c1c54c7.js";import"./u-safe-bottom.908eeae4.js";import"./u-badge.d8d91719.js";import"./u-tabbar.d98653fa.js";import"./cloneDeep.77735539.js";import"./mescroll-i18n.14e7fe02.js";/* empty css                                                                       */const A=R(e({__name:"list",setup(e){const{mescrollInit:R,downCallback:A,getMescroll:N}=z(y,g),O=D(),B=l([]),G=l([]),H=l(""),J=l(""),L=l(null),Q=l(!1),q=l(!1),K=l(""),W=l(""),X=l(""),Y=l("all");l(!1);const Z=l(!0);a((async e=>{J.value=e.curr_goods_category||"",K.value=e.goods_name?decodeURIComponent(e.goods_name):"",H.value=e.coupon_id||"",await I().then((e=>{B.value.push({category_name:"全部",category_id:""}),B.value=B.value.concat(e.data)}))}));const $=e=>{Q.value=!1;let l={goods_category:J.value,page:e.num,limit:e.size,keyword:K.value,coupon_id:H.value,order:"all"===Y.value?"":Y.value,sort:"price"==Y.value?W.value:X.value};S(l).then((l=>{let a=l.data.data;1===Number(e.num)&&(G.value=[]),G.value=G.value.concat(a),e.endSuccess(a.length),Q.value=!0})).catch((()=>{Q.value=!0,e.endErr()}))},ee=e=>{Y.value=e,"all"==e&&(X.value="",W.value=""),"price"==e&&(X.value="",W.value?W.value="asc"==W.value?"desc":"asc":W.value="asc"),"sale_num"==e&&(W.value="",X.value?X.value="asc"==X.value?"desc":"asc":X.value="asc"),"label"==e?(X.value="asc",W.value="asc",q.value=!0):(q.value=!1,G.value=[],N().resetUpScroll())},le=()=>{Z.value=!Z.value},ae=e=>{E({url:"/addon/shop/pages/goods/detail",param:{goods_id:e},mode:"navigateTo"})};return t((()=>{setTimeout((()=>{N().optUp.textNoMore=s("end")}),500)})),(e,l)=>{const a=b,t=h,s=k,g=w(j("u-popup"),P),y=V,I=w(j("tabbar"),T);return o(),r(s,{class:"bg-gray-100 min-h-[100vh]",style:v(e.themeColor())},{default:n((()=>[c(s,{class:"fixed left-0 right-0 top-0 product-warp bg-[#fff]"},{default:n((()=>[c(s,{class:"py-[14rpx] flex items-center justify-between px-[20rpx]"},{default:n((()=>[c(s,{class:"flex-1 search-input mr-[20rpx]"},{default:n((()=>[c(a,{onClick:l[0]||(l[0]=d((e=>ee("all")),["stop"])),class:"nc-iconfont nc-icon-sousuo-duanV6xx1 btn"}),c(t,{class:"input",maxlength:"50",type:"text",modelValue:K.value,"onUpdate:modelValue":l[1]||(l[1]=e=>K.value=e),placeholder:"请搜索您想要的商品",placeholderClass:"text-[var(--text-color-light9)] text-[24rpx]","confirm-type":"search",onConfirm:l[2]||(l[2]=e=>ee("all"))},null,8,["modelValue"]),K.value?(o(),r(a,{key:0,class:"nc-iconfont nc-icon-cuohaoV6xx1 clear",onClick:l[3]||(l[3]=e=>K.value="")})):i("v-if",!0)])),_:1}),c(s,{class:u(["iconfont text-[32rpx] text-[#333] -mb-[2rpx]",Z.value?"icona-yingyongzhongxinV6xx-32":"icona-yingyongliebiaoV6xx-32"]),onClick:le},null,8,["class"])])),_:1}),c(s,{class:"flex justify-between tems-center h-[88rpx] px-[30rpx]"},{default:n((()=>[c(s,{class:"flex items-center justify-between text-[26rpx] flex-1"},{default:n((()=>[c(a,{class:u(["text-[#333]",{"text-[var(--primary-color)] font-500":"all"==Y.value}]),onClick:l[4]||(l[4]=e=>ee("all"))},{default:n((()=>[p("综合排序")])),_:1},8,["class"]),c(s,{class:u(["flex items-center text-[#333]",{"text-[var(--primary-color)] font-500":"sale_num"==Y.value}]),onClick:l[5]||(l[5]=e=>ee("sale_num"))},{default:n((()=>[c(a,{class:"mr-[4rpx]"},{default:n((()=>[p("销量")])),_:1}),"asc"==X.value?(o(),r(a,{key:0,class:u(["text-[16rpx] nc-iconfont nc-icon-a-xiangshangV6xx1",{"text-[var(--primary-color)]":"sale_num"==Y.value}])},null,8,["class"])):(o(),r(a,{key:1,class:u(["text-[16rpx] nc-iconfont nc-icon-a-xiangxiaV6xx1",{"text-[var(--primary-color)]":"sale_num"==Y.value}])},null,8,["class"]))])),_:1},8,["class"]),c(s,{class:u(["flex items-center text-[#333]",{"text-[var(--primary-color)] font-500":"price"==Y.value}]),onClick:l[6]||(l[6]=e=>ee("price"))},{default:n((()=>[c(a,{class:"mr-[4rpx]"},{default:n((()=>[p("价格")])),_:1}),"asc"==W.value?(o(),r(a,{key:0,class:u(["text-[16rpx] nc-iconfont nc-icon-a-xiangshangV6xx1",{"text-[var(--primary-color)]":"price"==Y.value}])},null,8,["class"])):(o(),r(a,{key:1,class:u(["text-[16rpx] nc-iconfont nc-icon-a-xiangxiaV6xx1",{"text-[var(--primary-color)]":"price"==Y.value}])},null,8,["class"]))])),_:1},8,["class"]),c(s,{class:u(["flex items-center",{"text-[var(--primary-color)] font-500":"label"==Y.value,"text-[#333]":"label"!=Y.value}]),onClick:l[7]||(l[7]=e=>ee("label"))},{default:n((()=>[c(a,{class:"mr-[8rpx]"},{default:n((()=>[p("筛选")])),_:1}),c(a,{class:"iconfont font-500 icona-shaixuanV6xx-34 -mb-[4rpx] !text-[26rpx]"})])),_:1},8,["class"])])),_:1})])),_:1})])),_:1}),c(g,{show:q.value,mode:"top",onClose:l[9]||(l[9]=e=>q.value=!1)},{default:n((()=>[c(s,{onTouchmove:l[8]||(l[8]=d((()=>{}),["prevent","stop"]))},{default:n((()=>[c(s,{class:"text-[28rpx] px-[30rpx] mt-[40rpx]"},{default:n((()=>[p("全部分类")])),_:1}),c(s,{class:"flex flex-wrap pl-[30rpx] pt-[30rpx]"},{default:n((()=>[(o(!0),x(f,null,m(B.value,((e,l)=>(o(),r(a,{onClick:l=>{return a=e.category_id,J.value=a,G.value=[],N().resetUpScroll(),void(q.value=!1);var a},key:e.category_id,class:u([{"label-select":J.value==e.category_id},"truncate text-[#333] px-[10rpx] border-[2rpx] border-solid border-transparent w-[184rpx] h-[56rpx] flex items-center justify-center mr-[30rpx] mb-[30rpx] box-border bg-[var(--temp-bg)] rounded-[50rpx] text-[24rpx]"])},{default:n((()=>[p(C(e.category_name),1)])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1})])),_:1},8,["show"]),c(U,{ref_key:"mescrollRef",ref:L,top:"176rpx",bottom:"60px",onInit:_(R),down:{use:!1},onUp:$},{default:n((()=>[G.value.length?(o(),r(s,{key:0,class:u(["sidebar-margin",Z.value?"":"biserial-goods-list"])},{default:n((()=>[Z.value?(o(!0),x(f,{key:0},m(G.value,((e,l)=>(o(),r(s,{key:l,class:u(["bg-white flex px-[20rpx] py-[24rpx] rounded-[var(--rounded-small)] overflow-hidden top-mar",{"mb-[20rpx]":l+1==G.value.length}]),onClick:l=>ae(e.goods_id)},{default:n((()=>[e.goods_cover_thumb_mid?(o(),r(y,{key:0,class:"w-[190rpx] h-[190rpx] rounded-[var(--rounded-mid)]",src:_(F)(e.goods_cover_thumb_mid),mode:"aspectFill",onError:l=>e.goods_cover_thumb_mid="static/resource/images/diy/shop_default.jpg"},null,8,["src","onError"])):(o(),r(y,{key:1,class:"w-[190rpx] h-[190rpx] rounded-[var(--rounded-mid)]",src:_(F)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])),c(s,{class:"flex-1 flex flex-col ml-[20rpx] py-[6rpx]"},{default:n((()=>[c(s,{class:"text-[28rpx] text-[#333] leading-[40rpx] multi-hidden mb-[10rpx]"},{default:n((()=>[e.goods_brand?(o(),r(s,{key:0,class:"brand-tag"},{default:n((()=>[p(C(e.goods_brand.brand_name),1)])),_:2},1024)):i("v-if",!0),p(" "+C(e.goods_name),1)])),_:2},1024),e.goods_label_name&&e.goods_label_name.length?(o(),r(s,{key:0,class:"flex flex-wrap"},{default:n((()=>[(o(!0),x(f,null,m(e.goods_label_name,((e,l)=>(o(),x(f,null,["icon"==e.style_type&&e.icon?(o(),r(y,{key:0,class:"img-tag",src:_(F)(e.icon),mode:"heightFix",onError:l=>_(O).error(e,"icon")},null,8,["src","onError"])):"diy"!=e.style_type&&e.icon?i("v-if",!0):(o(),r(s,{key:1,class:"base-tag",style:v(_(O).baseTagStyle(e))},{default:n((()=>[p(C(e.label_name),1)])),_:2},1032,["style"]))],64)))),256))])),_:2},1024)):i("v-if",!0),c(s,{class:"mt-auto flex justify-between items-baseline"},{default:n((()=>[c(s,{class:"flex items-baseline mt-[20rpx]"},{default:n((()=>[c(s,{class:"text-[var(--price-text-color)] price-font flex items-baseline"},{default:n((()=>[c(a,{class:"text-[24rpx] font-500 mr-[4rpx]"},{default:n((()=>[p("￥")])),_:1}),c(a,{class:"text-[40rpx] font-500"},{default:n((()=>[p(C(_(O).goodsPrice(e).toFixed(2).split(".")[0]),1)])),_:2},1024),c(a,{class:"text-[24rpx] font-500"},{default:n((()=>[p("."+C(_(O).goodsPrice(e).toFixed(2).split(".")[1]),1)])),_:2},1024)])),_:2},1024),"member_price"==_(O).priceType(e)?(o(),r(y,{key:0,class:"max-w-[50rpx] h-[28rpx] ml-[6rpx]",src:_(F)("addon/shop/VIP.png"),mode:"heightFix"},null,8,["src"])):i("v-if",!0)])),_:2},1024),c(a,{class:"text-[22rpx] mt-[20rpx] text-[var(--text-color-light9)]"},{default:n((()=>[p("已售"+C(e.sale_num)+C(e.unit),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128)):(o(),x(f,{key:1},[c(s,null,{default:n((()=>[(o(!0),x(f,null,m(G.value,((e,l)=>(o(),x(f,null,[l%2==0?(o(),r(s,{key:0,class:"flex flex-col bg-[#fff] box-border rounded-[var(--rounded-mid)] overflow-hidden mt-[var(--top-m)]",onClick:l=>ae(e.goods_id)},{default:n((()=>[e.goods_cover_thumb_mid?(o(),r(y,{key:0,class:"w-[100%] h-[344rpx] rounded-tl-[var(--rounded-mid)] rounded-tr-[var(--rounded-mid)]",src:_(F)(e.goods_cover_thumb_mid),mode:"aspectFill",onError:l=>e.goods_cover_thumb_mid="static/resource/images/diy/shop_default.jpg"},null,8,["src","onError"])):(o(),r(y,{key:1,class:"w-[100%] h-[344rpx] rounded-tl-[var(--rounded-mid)] rounded-tr-[var(--rounded-mid)]",src:_(F)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])),c(s,{class:"px-[20rpx] flex-1 pt-[16rpx] pb-[24rpx] flex flex-col justify-between"},{default:n((()=>[c(s,{class:"text-[#303133] leading-[40rpx] text-[28rpx] multi-hidden"},{default:n((()=>[e.goods_brand?(o(),r(s,{key:0,class:"brand-tag"},{default:n((()=>[p(C(e.goods_brand.brand_name),1)])),_:2},1024)):i("v-if",!0),p(" "+C(e.goods_name),1)])),_:2},1024),e.goods_label_name&&e.goods_label_name.length?(o(),r(s,{key:0,class:"flex flex-wrap"},{default:n((()=>[(o(!0),x(f,null,m(e.goods_label_name,((e,l)=>(o(),x(f,null,["icon"==e.style_type&&e.icon?(o(),r(y,{key:0,class:"img-tag",src:_(F)(e.icon),mode:"heightFix",onError:l=>_(O).error(e,"icon")},null,8,["src","onError"])):"diy"!=e.style_type&&e.icon?i("v-if",!0):(o(),r(s,{key:1,class:"base-tag",style:v(_(O).baseTagStyle(e))},{default:n((()=>[p(C(e.label_name),1)])),_:2},1032,["style"]))],64)))),256))])),_:2},1024)):i("v-if",!0),c(s,{class:"flex justify-between flex-wrap items-end"},{default:n((()=>[c(s,{class:"flex items-baseline mt-[20rpx]"},{default:n((()=>[c(s,{class:"text-[var(--price-text-color)] price-font flex items-baseline"},{default:n((()=>[c(a,{class:"text-[24rpx] font-500"},{default:n((()=>[p("￥")])),_:1}),c(a,{class:"text-[40rpx] font-500"},{default:n((()=>[p(C(_(O).goodsPrice(e).toFixed(2).split(".")[0]),1)])),_:2},1024),c(a,{class:"text-[24rpx] font-500"},{default:n((()=>[p("."+C(_(O).goodsPrice(e).toFixed(2).split(".")[1]),1)])),_:2},1024)])),_:2},1024),"member_price"==_(O).priceType(e)?(o(),r(y,{key:0,class:"max-w-[50rpx] h-[28rpx] ml-[6rpx]",src:_(F)("addon/shop/VIP.png"),mode:"heightFix"},null,8,["src"])):i("v-if",!0)])),_:2},1024),c(a,{class:"text-[22rpx] text-[var(--text-color-light9)] mt-[20rpx]"},{default:n((()=>[p("已售"+C(e.sale_num)+C(e.unit),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])):i("v-if",!0)],64)))),256))])),_:1}),c(s,null,{default:n((()=>[(o(!0),x(f,null,m(G.value,((e,l)=>(o(),x(f,null,[l%2==1?(o(),r(s,{key:0,class:"flex flex-col bg-[#fff] box-border rounded-[var(--rounded-mid)] overflow-hidden mt-[var(--top-m)]",onClick:l=>ae(e.goods_id)},{default:n((()=>[e.goods_cover_thumb_mid?(o(),r(y,{key:0,class:"w-[100%] h-[344rpx] rounded-tl-[var(--rounded-mid)] rounded-tr-[var(--rounded-mid)]",src:_(F)(e.goods_cover_thumb_mid),mode:"aspectFill",onError:l=>e.goods_cover_thumb_mid="static/resource/images/diy/shop_default.jpg"},null,8,["src","onError"])):(o(),r(y,{key:1,class:"w-[100%] h-[344rpx] rounded-tl-[var(--rounded-mid)] rounded-tr-[var(--rounded-mid)]",src:_(F)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])),c(s,{class:"px-[20rpx] flex-1 pt-[16rpx] pb-[24rpx] flex flex-col justify-between"},{default:n((()=>[c(s,{class:"text-[#303133] leading-[40rpx] text-[28rpx] multi-hidden"},{default:n((()=>[e.goods_brand?(o(),r(s,{key:0,class:"brand-tag"},{default:n((()=>[p(C(e.goods_brand.brand_name),1)])),_:2},1024)):i("v-if",!0),p(" "+C(e.goods_name),1)])),_:2},1024),e.goods_label_name&&e.goods_label_name.length?(o(),r(s,{key:0,class:"flex flex-wrap"},{default:n((()=>[(o(!0),x(f,null,m(e.goods_label_name,((e,l)=>(o(),x(f,null,["icon"==e.style_type&&e.icon?(o(),r(y,{key:0,class:"img-tag",src:_(F)(e.icon),mode:"heightFix",onError:l=>_(O).error(e,"icon")},null,8,["src","onError"])):"diy"!=e.style_type&&e.icon?i("v-if",!0):(o(),r(s,{key:1,class:"base-tag",style:v(_(O).baseTagStyle(e))},{default:n((()=>[p(C(e.label_name),1)])),_:2},1032,["style"]))],64)))),256))])),_:2},1024)):i("v-if",!0),c(s,{class:"flex justify-between flex-wrap items-baseline"},{default:n((()=>[c(s,{class:"flex items-baseline mt-[20rpx]"},{default:n((()=>[c(s,{class:"text-[var(--price-text-color)] price-font flex items-baseline"},{default:n((()=>[c(a,{class:"text-[24rpx] font-500"},{default:n((()=>[p("￥")])),_:1}),c(a,{class:"text-[40rpx] font-500"},{default:n((()=>[p(C(_(O).goodsPrice(e).toFixed(2).split(".")[0]),1)])),_:2},1024),c(a,{class:"text-[24rpx] font-500"},{default:n((()=>[p("."+C(_(O).goodsPrice(e).toFixed(2).split(".")[1]),1)])),_:2},1024)])),_:2},1024),"member_price"==_(O).priceType(e)?(o(),r(y,{key:0,class:"max-w-[50rpx] h-[28rpx] ml-[6rpx]",src:_(F)("addon/shop/VIP.png"),mode:"heightFix"},null,8,["src"])):i("v-if",!0)])),_:2},1024),c(a,{class:"mt-[20rpx] text-[22rpx] text-[var(--text-color-light9)]"},{default:n((()=>[p("已售"+C(e.sale_num)+C(e.unit),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])):i("v-if",!0)],64)))),256))])),_:1})],64))])),_:1},8,["class"])):i("v-if",!0),!G.value.length&&Q.value?(o(),r(M,{key:1,option:{tip:"暂无商品",btnText:"去逛逛"},onEmptyclick:l[10]||(l[10]=e=>_(E)({url:"/addon/shop/pages/index",mode:"reLaunch"}))})):i("v-if",!0)])),_:1},8,["onInit"]),c(I)])),_:1},8,["style"])}}}),[["__scopeId","data-v-6457a7ab"]]);export{A as default};
