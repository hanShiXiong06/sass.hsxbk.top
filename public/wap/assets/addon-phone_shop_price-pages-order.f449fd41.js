import{d as e,r as a,l,L as u,o as t,c as o,w as s,b as d,y as r,z as n,f as m,t as c,c8 as p,c4 as i,i as _,g as f,h as v}from"./index-7bf68536.js";import{_ as y,a as b}from"./u-row.3d76be3a.js";import{_ as g}from"./u-number-box.30c0ab2e.js";import{_ as x}from"./u-textarea.441d8e5e.js";import{_ as h}from"./u-icon.0c1c54c7.js";import{_ as V}from"./u-input.09a5cedd.js";import{_ as j,a as C}from"./u-form.78a4f7c2.js";import{_ as k}from"./u-button.359d7329.js";import{_ as w}from"./u-picker.17389cd6.js";import{a as S,s as U}from"./recycle.0a383705.js";import{_ as z}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.463a2a45.js";import"./u-loading-icon.b37701e7.js";import"./u-popup.be4bfacd.js";import"./u-transition.cdf87992.js";import"./u-safe-bottom.908eeae4.js";const q=z(e({__name:"order",setup(e){const z=a(""),q=a({count:1,express_id:"",send_username:"",telphone:l().info.mobile||"",user_name:"",account:""}),$={send_username:{required:!0,message:"联系人不能为空",trigger:"blur"},username:{required:!0,message:"联系人不能为空",trigger:"blur"},express_id:{required:!0,message:"快递单号不能为空",trigger:"blur"},account:{required:!0,message:"请输入收款账号",trigger:"blur"},pay_type:{required:!0,message:"请选择收款方式",trigger:"blur"}},F=a(null),I=a(null),M=a(!1),A=u([["微信","支付宝","银行卡"]]),K=()=>{p({onlyFromCamera:!0,success:e=>{"scanCode:ok"===e.errMsg?q.value.express_id=e.result:c({title:e.errorMsg,icon:"none"})}})},L=()=>{q.value.user_name=q.value.send_username||""},R=e=>{M.value=!1,I.value=e.value[0]},X=async()=>{if(q.value.pay_type=I.value,!I.value)return c({title:"请选择收款方式",icon:"none"});await F.value.validate()?U(q.value).then((e=>{1===e.code?(c({title:"下单成功",icon:"none"}),I.value="",F.value.resetFields()):c({title:"下单失败,请重试!",icon:"none"})})):c({title:"请完善表单信息",icon:"none"})},B=()=>{i({data:z.value,success(){c({title:"复制成功",icon:"none"})}})};return(async()=>{try{const e=await S();z.value=`${e.data.data[0].full_address}, ${e.data.data[0].contact_name}, ${e.data.data[0].mobile}`}catch(e){c({title:"无邮寄地址!请联系商家",icon:"none"}),console.error("获取地址失败",e)}})(),(e,a)=>{const l=_,u=f(v("up-col"),y),c=f(v("up-number-box"),g),p=f(v("up-row"),b),i=f(v("up-textarea"),x),S=f(v("up-icon"),h),U=f(v("u-input"),V),D=f(v("u-form-item"),j),E=f(v("up-button"),k),G=f(v("up-picker"),w),H=f(v("up-input"),V),J=f(v("u-icon"),h),N=f(v("u-form"),C);return t(),o(l,{class:"page"},{default:s((()=>[d(N,{model:q.value,rules:$,ref_key:"formRef",ref:F,"label-position":"left"},{default:s((()=>[d(l,{class:"box rounded"},{default:s((()=>[d(l,{class:"title"},{default:s((()=>[r("出货信息")])),_:1}),d(p,{customStyle:"margin-bottom: 10px"},{default:s((()=>[d(u,{span:"3"},{default:s((()=>[d(l,{class:"demo-layout"},{default:s((()=>[r("出货数量")])),_:1})])),_:1}),d(u,{span:"9"},{default:s((()=>[d(l,{class:"demo-layout"},{default:s((()=>[d(c,{modelValue:q.value.count,"onUpdate:modelValue":a[0]||(a[0]=e=>q.value.count=e),onChange:e.valChange},null,8,["modelValue","onChange"])])),_:1})])),_:1})])),_:1}),d(p,{customStyle:"margin-bottom: 10px"},{default:s((()=>[d(u,{span:"3"},{default:s((()=>[d(l,{class:"demo-layout"},{default:s((()=>[r("备注")])),_:1})])),_:1}),d(u,{span:"9"},{default:s((()=>[d(l,{class:"demo-layout"},{default:s((()=>[d(i,{modelValue:q.value.comment,"onUpdate:modelValue":a[1]||(a[1]=e=>q.value.comment=e),placeholder:"请输入内容"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),d(l,{class:"box rounded mt-2"},{default:s((()=>[d(l,{class:"title"},{default:s((()=>[r("寄件信息")])),_:1}),d(p,{customStyle:"margin-bottom: 10px"},{default:s((()=>[d(u,{span:"3"},{default:s((()=>[d(l,{class:"demo-layout bg-purple-light"},{default:s((()=>[r("快递单号")])),_:1})])),_:1}),d(u,{span:"9"},{default:s((()=>[d(l,{class:"p-r"},{default:s((()=>[d(D,{prop:"express_id"},{default:s((()=>[d(U,{placeholder:"输入或扫描快递单号",border:"surround",clearable:"",modelValue:q.value.express_id,"onUpdate:modelValue":a[2]||(a[2]=e=>q.value.express_id=e)},{suffix:s((()=>[d(S,{onClick:K,name:"scan",size:"24"})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),d(p,{customStyle:"margin-bottom: 10px"},{default:s((()=>[d(u,{span:"3"},{default:s((()=>[d(l,{class:"demo-layout bg-purple-light"},{default:s((()=>[r("联系人")])),_:1})])),_:1}),d(u,{span:"9"},{default:s((()=>[d(l,{class:"demo-layout"},{default:s((()=>[d(D,{prop:"send_username"},{default:s((()=>[d(U,{modelValue:q.value.send_username,"onUpdate:modelValue":a[3]||(a[3]=e=>q.value.send_username=e),placeholder:"联系人",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),d(p,{customStyle:"margin-bottom: 10px"},{default:s((()=>[d(u,{span:"3"},{default:s((()=>[d(l,{class:"demo-layout bg-purple-light"},{default:s((()=>[r("联系电话")])),_:1})])),_:1}),d(u,{span:"9"},{default:s((()=>[d(l,{class:"demo-layout"},{default:s((()=>[d(D,{prop:"telphone"},{default:s((()=>[d(U,{modelValue:q.value.telphone,"onUpdate:modelValue":a[4]||(a[4]=e=>q.value.telphone=e),placeholder:"联系电话",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),d(l,{class:"box rounded mt-2"},{default:s((()=>[d(l,{class:"title"},{default:s((()=>[r("收款信息")])),_:1}),d(p,{customStyle:"margin-bottom: 10px"},{default:s((()=>[d(u,{span:"3"},{default:s((()=>[d(l,{class:"demo-layout"},{default:s((()=>[r("收款方式")])),_:1})])),_:1}),d(u,{span:"9"},{default:s((()=>[d(l,{class:"demo-layout"},{default:s((()=>[d(E,{type:"primary",size:"mini",onClick:a[5]||(a[5]=e=>M.value=!0)},{default:s((()=>[r(n(I.value||"选择"),1)])),_:1}),d(G,{show:M.value,columns:A,onConfirm:R,onCancel:a[6]||(a[6]=e=>M.value=!1)},null,8,["show","columns"])])),_:1})])),_:1})])),_:1}),I.value&&"微信"!==I.value?(t(),o(p,{key:0,customStyle:"margin-bottom: 10px"},{default:s((()=>[d(u,{span:"3"},{default:s((()=>[d(l,{class:"demo-layout"},{default:s((()=>[r("真实姓名")])),_:1})])),_:1}),d(u,{span:"9"},{default:s((()=>[d(l,{class:"demo-layout"},{default:s((()=>[d(H,{placeholder:"请输入真实姓名, 否则无法打款",border:"surround",clearable:"",modelValue:q.value.user_name,"onUpdate:modelValue":a[7]||(a[7]=e=>q.value.user_name=e)},{suffix:s((()=>[d(E,{onClick:L,text:"一键复制",type:"success",size:"mini"})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})):m("v-if",!0),d(p,{customStyle:"margin-bottom: 10px"},{default:s((()=>[d(u,{span:"3"},{default:s((()=>[d(l,{class:"demo-layout"},{default:s((()=>[r("账号")])),_:1})])),_:1}),d(u,{span:"9"},{default:s((()=>[d(l,{class:"demo-layout"},{default:s((()=>[d(D,{prop:"account"},{default:s((()=>[d(U,{modelValue:q.value.account,"onUpdate:modelValue":a[8]||(a[8]=e=>q.value.account=e),placeholder:"请输入账号",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),d(l,{class:"box rounded mt-2"},{default:s((()=>[d(l,{class:"title"},{default:s((()=>[r("商家收货信息")])),_:1}),d(l,{class:"flex"},{default:s((()=>[d(l,{class:"w-70 mr-5"},{default:s((()=>[r(n(z.value),1)])),_:1}),d(J,{name:"cut",size:"18",onClick:B})])),_:1})])),_:1}),d(l,{class:"add_order"},{default:s((()=>[d(E,{type:"primary",onClick:X,text:"提交订单"})])),_:1})])),_:1},8,["model"])])),_:1})}}}),[["__scopeId","data-v-088e8335"]]);export{q as default};
