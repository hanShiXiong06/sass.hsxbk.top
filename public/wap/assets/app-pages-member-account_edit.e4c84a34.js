import{d as e,r as a,K as l,j as t,p as o,J as r,F as n,a2 as c,o as d,c as u,w as p,b as i,O as s,y as m,z as _,u as f,P as b,f as x,n as h,aC as y,aD as g,a as v,aB as k,i as j,g as A,h as V,C as T,a5 as C}from"./index-9317da28.js";import{_ as P}from"./u-input.e030155a.js";import{_ as N}from"./u-form-item.83fe1c60.js";import{_ as R}from"./u-form.cfe692b2.js";import{_ as w}from"./u-modal.42c2671a.js";import{_ as z}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.5e775659.js";/* empty css                                                                */import"./u-line.30917996.js";/* empty css                                                               */import"./u-loading-icon.aabe3d05.js";/* empty css                                                                       */import"./u-popup.1f2ebcae.js";import"./u-transition.65be38eb.js";import"./u-safe-bottom.3546c5bb.js";/* empty css                                                                */const B=z(e({__name:"account_edit",setup(e){const z=a(!1),B=a(null),M=a("get"),S=a(!1),U=l({account_id:0,account_type:"bank",bank_name:"",realname:"",account_no:""}),W=t((()=>({realname:{type:"string",required:!0,message:"bank"==U.account_type?n("bankRealnamePlaceholder"):n("alipayRealnamePlaceholder"),trigger:["blur","change"]},bank_name:{type:"string",required:"bank"==U.account_type,message:n("bankNamePlaceholder"),trigger:["blur","change"]},account_no:{type:"string",required:!0,message:"bank"==U.account_type?n("bankAccountNoPlaceholder"):n("alipayAccountNoPlaceholder"),trigger:["blur","change"]}})));o((e=>{e.type&&(U.account_type=e.type),e.mode&&(M.value=e.mode),e.id&&(U.account_id=e.id||"",U.account_id?r({title:n("editAccountTitle")}):r({title:n("addAccountTitle")}),c({account_id:e.id}).then((e=>{e.data&&Object.keys(U).forEach((a=>{null!=e.data[a]&&(U[a]=e.data[a])}))})))}));const q=()=>{const e=U.account_id?y:g;B.value.validate().then((()=>{z.value||(z.value=!0,e(U).then((e=>{"get"==M.value?v({url:"/app/pages/member/account",param:{type:U.account_type,mode:M.value}}):v({url:"/app/pages/member/apply_cash_out",param:{account_id:U.account_id?U.account_id:e.data.id,type:U.account_type},mode:"redirectTo"})})).catch((()=>{z.value=!1})))}))},O=()=>{k(U.account_id).then((()=>{v({url:"/app/pages/member/account",mode:"redirectTo"})}))};return(e,a)=>{const l=j,t=A(V("u-input"),P),o=A(V("u-form-item"),N),r=A(V("u-form"),R),c=T,y=C,g=A(V("u-modal"),w);return d(),u(l,{class:"w-screen h-screen bg-[var(--page-bg-color)] overflow-hidden",style:h(e.themeColor())},{default:p((()=>[i(y,{"scroll-y":"true"},{default:p((()=>[i(l,{class:"sidebar-marign card-template top-mar account pb-[20rpx]"},{default:p((()=>["bank"==U.account_type?(d(),s(b,{key:0},[i(l,{class:"text-center text-[32rpx] font-500 mt-[10rpx] text-[#333] leading-[42rpx]"},{default:p((()=>[m(_(U.account_id?f(n)("editBankCard"):f(n)("addBankCard")),1)])),_:1}),i(l,{class:"text-center text-[24rpx] mt-[16rpx] text-[var(--text-color-light9)]"},{default:p((()=>[m(_(U.account_id?f(n)("editBankCardTips"):f(n)("addBankCardTips")),1)])),_:1}),i(l,{class:"mt-[70rpx] px-[10rpx]"},{default:p((()=>[i(r,{labelPosition:"left",model:U,errorType:"toast",rules:f(W),ref_key:"formRef",ref:B},{default:p((()=>[i(l,null,{default:p((()=>[i(o,{label:f(n)("bankRealname"),prop:"realname",labelWidth:"200rpx"},{default:p((()=>[i(t,{modelValue:U.realname,"onUpdate:modelValue":a[0]||(a[0]=e=>U.realname=e),modelModifiers:{trim:!0},fontSize:"28rpx",maxlength:"30",border:"none",clearable:"",placeholder:f(n)("bankRealnamePlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),i(l,{class:"mt-[16rpx]"},{default:p((()=>[i(o,{label:f(n)("bankName"),prop:"bank_name",labelWidth:"200rpx"},{default:p((()=>[i(t,{modelValue:U.bank_name,"onUpdate:modelValue":a[1]||(a[1]=e=>U.bank_name=e),modelModifiers:{trim:!0},fontSize:"28rpx",maxlength:"30",border:"none",clearable:"",placeholder:f(n)("bankNamePlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),i(l,{class:"mt-[16rpx]"},{default:p((()=>[i(o,{label:f(n)("bankAccountNo"),prop:"account_no",labelWidth:"200rpx"},{default:p((()=>[i(t,{modelValue:U.account_no,"onUpdate:modelValue":a[2]||(a[2]=e=>U.account_no=e),modelModifiers:{trim:!0},fontSize:"28rpx",maxlength:"30",border:"none",clearable:"",placeholder:f(n)("bankAccountNoPlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1})])),_:1},8,["model","rules"])])),_:1})],64)):x("v-if",!0),"alipay"==U.account_type?(d(),s(b,{key:1},[i(l,{class:"text-center text-[32rpx] font-500 mt-[20rpx] text-[#333] leading-[42rpx]"},{default:p((()=>[m(_(U.account_id?f(n)("editAlipayAccount"):f(n)("addAlipayAccount")),1)])),_:1}),i(l,{class:"text-center text-[28rpx] mt-[16rpx] text-[var(--text-color-light9)] leading-[36rpx]"},{default:p((()=>[m(_(U.account_id?f(n)("editAlipayAccountTips"):f(n)("addAlipayAccountTips")),1)])),_:1}),i(l,{class:"mt-[70rpx] px-[10rpx]"},{default:p((()=>[i(r,{labelPosition:"left",model:U,labelWidth:"200rpx",errorType:"toast",rules:f(W),ref_key:"formRef",ref:B},{default:p((()=>[i(l,null,{default:p((()=>[i(o,{label:f(n)("alipayRealname"),prop:"realname"},{default:p((()=>[i(t,{modelValue:U.realname,"onUpdate:modelValue":a[3]||(a[3]=e=>U.realname=e),modelModifiers:{trim:!0},maxlength:"30",border:"none",fontSize:"28rpx",clearable:"",placeholder:f(n)("alipayRealnamePlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),i(l,{class:"mt-[16rpx]"},{default:p((()=>[i(o,{label:f(n)("alipayAccountNo"),prop:"account_no"},{default:p((()=>[i(t,{modelValue:U.account_no,"onUpdate:modelValue":a[4]||(a[4]=e=>U.account_no=e),modelModifiers:{trim:!0},border:"none",maxlength:"30",fontSize:"28rpx",clearable:"",placeholder:f(n)("alipayAccountNoPlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1})])),_:1},8,["model","rules"])])),_:1})],64)):x("v-if",!0)])),_:1}),i(l,{class:"common-tab-bar-placeholder"}),i(l,{class:"common-tab-bar fixed left-[var(--sidebar-m)] right-[var(--sidebar-m)] bottom-[0]"},{default:p((()=>[i(c,{loading:z.value,class:"primary-btn-bg text-[#fff] h-[80rpx] leading-[80rpx] rounded-[100rpx] text-[26rpx] font-500",onClick:q},{default:p((()=>[m(_(f(n)("save")),1)])),_:1},8,["loading"])])),_:1})])),_:1}),i(g,{show:S.value,content:f(n)("deleteConfirm"),confirmText:f(n)("confirm"),cancelText:f(n)("cancel"),showCancelButton:!0,onConfirm:O,onCancel:a[5]||(a[5]=e=>S.value=!1),confirmColor:"var(--primary-color)"},null,8,["show","content","confirmText","cancelText"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-a198fdbf"]]);export{B as default};
