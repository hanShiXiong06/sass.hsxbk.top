import{d as e,r as t,p as l,o as a,c as r,w as s,b as o,U as i,ad as n,V as c,f as u,u as d,n as m,ae as p,af as f,i as _,ac as x,g as v,h as y,W as h,y as b,z as g,E as w,F as j,a as k,c0 as C,k as S,D as M,b7 as U,bl as z,bX as I,_ as R}from"./index-71c7df08.js";import{_ as E}from"./pay.6aa36878.js";import{_ as D}from"./tabbar.a37cc2d9.js";import{g as F,b as O,c as P,d as L}from"./order.7a0e41bc.js";import{M as N}from"./mescroll-body.49de0f6f.js";import{M as Q}from"./mescroll-empty.95b8c17e.js";import{u as V}from"./useMescroll.26ccf5de.js";import"./pay.4cfa8889.js";import"./cloneDeep.77735539.js";import"./mescroll-i18n.00218d15.js";/* empty css                                                                       */const W=R(e({__name:"list",setup(e){const{mescrollInit:R,downCallback:W,getMescroll:X}=V(f,p),Y=t([]),$=t(!1),q=t(!1),A=t(""),B=t([]);l((e=>{A.value=e.order_status||"",G()}));const G=()=>{q.value=!1,B.value=[];B.value.push({name:"全部",status:""}),F().then((e=>{Object.values(e.data).forEach(((e,t)=>{B.value.push(e)})),q.value=!0})).catch((()=>{q.value=!0}))},H=e=>{$.value=!1;let t={page:e.num,limit:e.size,order_status:A.value};O(t).then((t=>{let l=t.data.data;1==e.num&&(Y.value=[]),Y.value=Y.value.concat(l),e.endSuccess(l.length),$.value=!0})).catch((()=>{$.value=!0,e.endErr()}))},J=t(null),K=e=>{C({title:"提示",content:"您确定要删除该订单吗？",confirmColor:S().themeColor["--primary-color"],success:t=>{t.confirm&&P(e.order_id).then((e=>{X().resetUpScroll()})).catch((()=>{X().resetUpScroll()}))}})},T=e=>{C({title:"提示",content:"您确定要删除该订单吗？",confirmColor:S().themeColor["--primary-color"],success:t=>{t.confirm&&L(e.order_id).then((e=>{X().resetUpScroll()})).catch((()=>{X().resetUpScroll()}))}})};return(e,t)=>{const l=_,p=x,f=M,C=v(y("u-icon"),U),S=v(y("u--image"),z),F=v(y("u-button"),I),O=v(y("pay"),E),P=v(y("tabbar"),D);return a(),r(l,{class:"bg-[#f8f8f8] min-h-screen overflow-hidden",style:m(e.themeColor())},{default:s((()=>[q.value?(a(),r(l,{key:0,class:"fixed left-0 top-0 right-0 z-10"},{default:s((()=>[o(p,{"scroll-x":"true",class:"scroll-Y box-border px-[24rpx] bg-white"},{default:s((()=>[o(l,{class:"flex whitespace-nowrap justify-around"},{default:s((()=>[(a(!0),i(c,null,n(B.value,((e,t)=>(a(),r(l,{class:h(["text-sm leading-[90rpx]",{"class-select":A.value===e.status.toString()}]),onClick:t=>{return l=e.status,A.value=l.toString(),Y.value=[],void X().resetUpScroll();var l}},{default:s((()=>[b(g(e.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1})):u("v-if",!0),o(N,{ref:"mescrollRef",top:"114rpx",onInit:d(R),down:{use:!1},onUp:H},{default:s((()=>[(a(!0),i(c,null,n(Y.value,((e,t)=>(a(),r(l,{key:e.order_id,class:"mx-3 mb-3 bg-white p-3 rounded"},{default:s((()=>[o(l,{class:"flex justify-between items-center text-sm text-gray-500 pb-3 border-0 border-b border-slate-200 border-solid"},{default:s((()=>[o(l,null,{default:s((()=>[b(g(e.order_no),1)])),_:2},1024),o(f,null,{default:s((()=>[b(g(e.order_status_info.name),1)])),_:2},1024)])),_:2},1024),o(l,null,{default:s((()=>[(a(!0),i(c,null,n(e.item,((t,i)=>(a(),r(l,{class:"order-goods-item flex mt-[30rpx]",key:i,onClick:t=>{k({url:"/addon/o2o/pages/order/detail",param:{order_id:e.order_id}})}},{default:s((()=>[o(l,{class:"w-[160rpx] h-[160rpx] flex-2"},{default:s((()=>[o(S,{class:"rounded-[10rpx] overflow-hidden",width:"160rpx",height:"160rpx",src:d(w)(t.item_image_thumb_small?t.item_image_thumb_small:""),model:"aspectFill"},{error:s((()=>[o(C,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"])])),_:2},1024),o(l,{class:"ml-[20rpx] flex flex-1 flex-col justify-between"},{default:s((()=>[o(l,{class:"flex justify-between items-center"},{default:s((()=>[o(f,{class:"text-[28rpx] text-item leading-[40rpx] max-h-[80rpx] w-[360rpx] multi-hidden"},{default:s((()=>[b(g(t.item_name),1)])),_:2},1024),o(f,{class:"shrink-0 text-[24rpx] text-[var(--primary-color)] ml-[10rpx] leading-[40rpx]"},{default:s((()=>[b(g(t.pay_time?"":d(j)("notPaid")),1)])),_:2},1024)])),_:2},1024),o(l,{class:"flex justify-between"},{default:s((()=>[o(f,{class:"text-right text-[28rpx] text-[var(--price-text-color)] price-font"},{default:s((()=>[b("￥"+g(t.price),1)])),_:2},1024),o(f,{class:"text-right text-[24rpx]"},{default:s((()=>[b("x"+g(t.num),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024),u(' <view class="flex items-center justify-between  text-[28rpx]  mt-[40rpx]">\r\n                        <text class="text-[var(--text-color-light9)]">{{ item.create_time }}</text>\r\n\t\t\t\t\t</view> '),o(l,{class:"flex items-center justify-end mt-[30rpx]"},{default:s((()=>[o(l,null,{default:s((()=>[o(f,null,{default:s((()=>[b(g(d(j)("orderMoney")),1)])),_:1}),o(f,{class:"text-[var(--price-text-color)] price-font"},{default:s((()=>[b("￥"+g(e.total_money),1)])),_:2},1024)])),_:2},1024),o(l,{class:"ml-3"},{default:s((()=>[o(f,null,{default:s((()=>[b(g(d(j)("payMoney")),1)])),_:1}),o(f,{class:"text-[var(--price-text-color)] price-font"},{default:s((()=>[b("￥"+g(e.total_pay_money),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),o(l,{class:"flex justify-end mt-3"},{default:s((()=>[(a(!0),i(c,null,n(e.order_status_info.member_action,((t,l)=>(a(),r(F,{text:t.name,customStyle:{marginRight:"0px",marginLeft:"8rpx",width:"auto"},shape:"circle",size:"small",onClick:l=>((e,t="")=>{var l;"pay"==t?null==(l=J.value)||l.open(e.order_type,e.order_id,`/addon/o2o/pages/order/detail?order_id=${e.order_id}`):"cancel"==t?K(e):"delete"==t&&T(e)})(e,t.key),key:l},null,8,["text","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128)),!Y.value.length&&$.value?(a(),r(Q,{key:0,option:{icon:d(w)("static/resource/images/empty.png"),tip:d(j)("nothingMore")}},null,8,["option"])):u("v-if",!0)])),_:1},8,["onInit"]),o(O,{ref_key:"payRef",ref:J},null,512),o(P)])),_:1},8,["style"])}}}),[["__scopeId","data-v-3a27fd70"]]);export{W as default};
