import{d as e,r as l,j as a,a9 as t,X as s,I as r,Y as n,o as u,c as o,w as d,u as i,E as p,b as f,G as x,F as c,x as m,y as v,f as _,n as g,a as y,i as b,C as h,g as j,h as k,V as w,N as C}from"./index-905183d4.js";import{_ as F}from"./u-loading-page.7aa0a449.js";import{g as T,a as E,v as I}from"./verify.a1cbf2dc.js";import"./u-loading-icon.c376267d.js";import"./_plugin-vue_export-helper.1b428a4d.js";import"./u-transition.dbaca185.js";const z=e({__name:"verify",setup(e){const z=l(!0);l(null);let G=l("");a((e=>{if(e.code&&(G.value=e.code),e.scene){let l=decodeURIComponent(e.scene);l=l.split("&"),l.length&&l.forEach((e=>{-1!=e.indexOf("code")&&(G.value=e.split("-")[1])}))}})),t((()=>{s()&&(N(),R())}));const N=()=>{T().then((e=>{e.data?z.value=!1:(r({title:"非核销员无此权限",icon:"none"}),setTimeout((()=>{n()}),1e3))}))};let O=l({});const R=()=>{z.value=!0,E(G.value).then((e=>{O.value=e.data,z.value=!1}))};let S=!1;const U=()=>{if(S)return!1;S=!0,I(G.value).then((e=>{S=!1,setTimeout((()=>{y({url:"/app/pages/verify/index",param:{},mode:"redirectTo"})}),1e3)})).catch((()=>{S=!1}))};return(e,l)=>{const a=C,t=b,s=h,r=j(k("u-loading-page"),F);return u(),o(t,{style:g(e.themeColor()),class:"bg-[#f8f8f8] min-h-[100vh] overflow-hidden"},{default:d((()=>[!z.value&&i(O)&&i(O).value?(u(),p(x,{key:0},[f(t,{class:"bg-[#fff] rounded-[16rpx] mt-[20rpx] mx-[20rpx] px-[20rpx] py-[30rpx]"},{default:d((()=>[(u(!0),p(x,null,c(i(O).value.list,((e,l)=>(u(),o(t,{class:"py-[10rpx] flex",key:l},{default:d((()=>[e.cover?(u(),o(a,{key:0,class:"w-[80rpx] h-[80rpx]",mode:"aspectFit",src:i(w)(e.cover)},null,8,["src"])):(u(),o(a,{key:1,class:"w-[80rpx] h-[80rpx]",mode:"aspectFit",src:i(w)("addon/tourism/tourism/member/hotel.png")},null,8,["src"])),f(t,{class:"flex flex-col flex-1 ml-[10rpx]"},{default:d((()=>[f(t,{class:"multi-hidden leading-[1.2]"},{default:d((()=>[m(v(e.name),1)])),_:2},1024),f(t,{class:"ml-auto text-[#999]"},{default:d((()=>[m("x1")])),_:1})])),_:2},1024)])),_:2},1024)))),128))])),_:1}),f(t,{class:"bg-[#fff] rounded-[16rpx] mt-[20rpx] mx-[20rpx] px-[20rpx] py-[30rpx]"},{default:d((()=>[f(t,{class:"border-0 border-b-[2rpx] leading-[1] pb-[20rpx] border-[#ccc] border-solid"},{default:d((()=>[m("核销信息")])),_:1}),f(t,{class:"text-[28rpx]"},{default:d((()=>[f(t,{class:"flex items-center leading-[1] mt-[30rpx] justify-between"},{default:d((()=>[f(s,null,{default:d((()=>[m("核销类型")])),_:1}),f(t,null,{default:d((()=>[m(v(i(O).type_name),1)])),_:1})])),_:1}),(u(!0),p(x,null,c(i(O).value.content.fixed,((e,l)=>(u(),o(t,{class:"flex items-center leading-[1] mt-[30rpx] justify-between"},{default:d((()=>[f(s,null,{default:d((()=>[m(v(e.title),1)])),_:2},1024),f(t,null,{default:d((()=>[m(v(e.value),1)])),_:2},1024)])),_:2},1024)))),256))])),_:1})])),_:1}),(u(!0),p(x,null,c(i(O).value.content.diy,((e,l)=>(u(),o(t,{key:l,class:"bg-[#fff] rounded-[16rpx] mt-[20rpx] mx-[20rpx] px-[20rpx] py-[30rpx]"},{default:d((()=>[f(t,{class:"border-0 border-b-[2rpx] leading-[1] pb-[20rpx] border-[#ccc] border-solid"},{default:d((()=>[m(v(e.title),1)])),_:2},1024),f(t,{class:"text-[28rpx]"},{default:d((()=>[(u(!0),p(x,null,c(e.list,((e,l)=>(u(),o(t,{class:"flex items-center leading-[1] mt-[30rpx] justify-between",key:l},{default:d((()=>[f(s,null,{default:d((()=>[m(v(e.title),1)])),_:2},1024),f(t,null,{default:d((()=>[m(v(e.value),1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)))),128)),f(s,{class:"bg-[var(--primary-color)] text-[#fff] mx-[20rpx] mt-[60rpx] h-[80rpx] flex items-center justify-center !text-[28rpx] rounded-[10rpx]",onClick:U},{default:d((()=>[m("核销")])),_:1})],64)):_("v-if",!0),f(r,{loading:z.value,"loading-text":"",loadingColor:"var(--primary-color)",iconSize:"35"},null,8,["loading"])])),_:1},8,["style"])}}});export{z as default};
