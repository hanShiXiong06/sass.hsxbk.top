import{_ as e}from"./u-input.6410b5d0.js";import{d as l,r as t,p as a,N as s,F as r,o,c,w as u,b as i,Q as p,y as n,A as d,f as x,O as f,a6 as m,P as _,u as v,b8 as g,n as b,a7 as h,a8 as y,g as k,h as w,D as j,i as S,a5 as F,z as C,E as V,a as I,s as U,B as z}from"./index-2882a2d8.js";import{_ as M}from"./u--image.d52c0594.js";import{_ as T}from"./u-button.0ab7ff00.js";import{_ as N}from"./u-popup.2abbe959.js";import{_ as P}from"./tabbar.f422f3d5.js";import{b as D,c as E}from"./goods.34b799b5.js";import{M as Q}from"./mescroll-body.e69cb222.js";import{M as R}from"./mescroll-empty.7f392528.js";import{u as A}from"./useMescroll.26ccf5de.js";import{_ as B}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.1104ad2f.js";/* empty css                                                                */import"./u-image.46ebbbc1.js";import"./u-transition.4448d2e5.js";import"./u-loading-icon.a37f7e61.js";/* empty css                                                                       */import"./u-overlay.1a317a4e.js";import"./u-safe-bottom.f13b01b8.js";import"./u-badge.e8ba7dff.js";import"./u-tabbar.b113c065.js";import"./mescroll-i18n.c2747603.js";/* empty css                                                                       */const H=B(l({__name:"list",setup(l){const{mescrollInit:B,downCallback:H,getMescroll:O}=A(y,h),$=t([]),q=t([]),G=t(""),J=t(""),K=t(null),L=t(!1),W=t(!1),X=t(""),Y=t(""),Z=t(""),ee=t("all");t(!1);let le=t({start_price:"",end_price:""});const te=t(!0);a((async e=>{J.value=e.curr_goods_category||"",X.value=e.goods_name||"",G.value=e.coupon_id||"",await D().then((e=>{$.value.push({category_name:"全部",category_id:""}),$.value=$.value.concat(e.data)}))}));const ae=e=>{L.value=!1;let l={goods_category:se.value,page:e.num,limit:e.size,keyword:X.value,coupon_id:G.value,order:"all"===ee.value?"":ee.value,sort:"price"==ee.value?Y.value:Z.value,start_price:le.value.start_price,end_price:le.value.end_price};E(l).then((l=>{let t=l.data.data;1===Number(e.num)&&(q.value=[]),q.value=q.value.concat(t),e.endSuccess(t.length),L.value=!0})).catch((()=>{L.value=!0,e.endErr()}))},se=t(""),re=e=>{ee.value=e,"all"==e&&(Z.value="",Y.value=""),"price"==e&&(Z.value="",Y.value?Y.value="asc"==Y.value?"desc":"asc":Y.value="asc"),"sale_num"==e&&(Y.value="",Z.value?Z.value="asc"==Z.value?"desc":"asc":Z.value="asc"),"label"==e?(Z.value="asc",Y.value="asc",W.value=!W.value):(W.value=!1,q.value=[],O().resetUpScroll())},oe=()=>{te.value=!te.value},ce=e=>{I({url:"/addon/phone_shop/pages/goods/detail",param:{goods_id:e},mode:"navigateTo"})},ue=()=>{X.value="",J.value="",se.value="",G.value="",Y.value="",Z.value="",le.value.start_price="",le.value.end_price="",W.value=!1,ee.value="all",te.value=!0,q.value=[],O().resetUpScroll()};s((()=>{setTimeout((()=>{O().optUp.textNoMore=r("end")}),500)}));const ie=e=>{let l="";return l=e.is_discount&&e.goodsSku.sale_price!=e.goodsSku.price?"discount_price":e.member_discount&&U()&&e.goodsSku.member_price!=e.goodsSku.price?"member_price":"",l},pe=e=>{let l="0.00";return l=e.is_discount&&e.goodsSku.sale_price!=e.goodsSku.price?e.goodsSku.sale_price?e.goodsSku.sale_price:e.goodsSku.price:e.member_discount&&U()&&e.goodsSku.member_price!=e.goodsSku.price&&e.goodsSku.member_price?e.goodsSku.member_price:e.goodsSku.price,parseFloat(l)};return(l,t)=>{const a=k(w("u-input"),e),s=j,r=S,h=F,y=z,I=k(w("u--image"),M),U=k(w("u-button"),T),D=k(w("u-popup"),N),E=k(w("tabbar"),P);return o(),c(r,{class:"bg-gray-100 min-h-[100vh]",style:b(l.themeColor())},{default:u((()=>[i(r,{class:"fixed left-0 right-0 top-0 product-warp bg-[#fff] px-[30rpx]"},{default:u((()=>[i(r,{class:"py-[14rpx] flex items-center justify-between"},{default:u((()=>[i(r,{class:"flex-1 flex items-center h-[64rpx] bg-[#F6F8F8] rounded-[33rpx] px-[32rpx] mr-[30rpx]"},{default:u((()=>[i(a,{class:"flex-1",maxlength:"50",modelValue:X.value,"onUpdate:modelValue":t[0]||(t[0]=e=>X.value=e),onConfirm:t[1]||(t[1]=e=>re("all")),placeholder:"请搜索您想要的商品",placeholderClass:"text-[#a5a6a6] text-[26rpx]",fontSize:"26rpx",clearable:"",border:"none"},null,8,["modelValue"]),i(s,{class:"nc-iconfont nc-icon-sousuo-duanV6xx1 text-[32rpx] ml-[18rpx] !text-[#999]",onClick:t[2]||(t[2]=e=>re("all"))})])),_:1}),i(r,{class:p(["nc-iconfont text-[34rpx] text-[#666]",te.value?"nc-icon-erweimaV6xx":"nc-icon-yingyongliebiaoV6xx"]),onClick:oe},null,8,["class"])])),_:1}),i(r,{class:"flex justify-between tems-center py-[22rpx] px-[20rpx]"},{default:u((()=>[i(r,{class:"flex items-center justify-between text-[24rpx] text-[#666] flex-1"},{default:u((()=>[i(s,{class:p({"text-[#303133] ":"all"==ee.value}),onClick:t[3]||(t[3]=e=>re("all"))},{default:u((()=>[n("综合排序")])),_:1},8,["class"]),i(r,{class:p(["flex items-center",{"text-[#303133]":"sale_num"==ee.value}]),onClick:t[4]||(t[4]=e=>re("sale_num"))},{default:u((()=>[i(s,{class:"mr-[4rpx]"},{default:u((()=>[n("销量")])),_:1}),"asc"==Z.value?(o(),c(s,{key:0,class:"text-[18rpx] text-[#666] nc-iconfont nc-icon-a-xiangshangV6xx1"})):(o(),c(s,{key:1,class:"text-[18rpx] text-[#666] nc-iconfont nc-icon-a-xiangxiaV6xx1"}))])),_:1},8,["class"]),i(r,{class:p(["flex items-center",{"text-[#303133]":"price"==ee.value}]),onClick:t[5]||(t[5]=e=>re("price"))},{default:u((()=>[i(s,{class:"mr-[4rpx]"},{default:u((()=>[n("价格")])),_:1}),"asc"==Y.value?(o(),c(s,{key:0,class:"text-[18rpx] text-[#666] nc-iconfont nc-icon-a-xiangshangV6xx1"})):(o(),c(s,{key:1,class:"text-[18rpx] text-[#666] nc-iconfont nc-icon-a-xiangxiaV6xx1"}))])),_:1},8,["class"]),i(r,{class:p(["flex items-center",{"text-[#303133]":"label"==ee.value}]),onClick:t[6]||(t[6]=e=>re("label"))},{default:u((()=>[i(s,{class:"mr-[2rpx]"},{default:u((()=>[n("筛选")])),_:1}),i(s,{class:"nc-iconfont color-[#666] nc-icon-shaixuanV6xx text-[28rpx]"})])),_:1},8,["class"])])),_:1})])),_:1})])),_:1}),i(D,{show:W.value,mode:"top",onClose:t[10]||(t[10]=e=>W.value=!1)},{default:u((()=>[i(r,{onTouchmove:t[9]||(t[9]=d((()=>{}),["prevent","stop"])),class:""},{default:u((()=>[x(' <view class="text-sm font-bold px-[30rpx] mt-3">全部分类</view> '),i(r,{class:"tabs-box z-2 fixed left-0 bg-[#fff] bottom-[50px] top-20 pl-[30rpx] pt-[30rpx]"},{default:u((()=>[i(h,{"scroll-y":!0,class:"scroll-height"},{default:u((()=>[i(r,{class:"bg-[#F4F6F8]"},{default:u((()=>[(o(!0),f(_,null,m($.value,((e,l)=>(o(),c(r,{class:p(["tab-item truncate",{"tab-item-active":J.value==l,"rounded-br-[12rpx]":J.value-1===l,"rounded-tr-[12rpx]":J.value+1===l}]),key:e.category_id,onClick:l=>(e=>{se.value=e,q.value=[];const l=$.value.findIndex((l=>l.category_id==e));J.value=l})(e.category_id)},{default:u((()=>[i(r,{class:"text-box px-[16rpx] truncate"},{default:u((()=>[n(C(e.category_name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1}),x("        价格区间筛选 "),i(r,{class:"flex justify-center flex-wrap pl-[200rpx] pb-[20rpx]"},{default:u((()=>[i(r,{class:"flex flex-wrap pl-[30rpx] pt-[30rpx] mr-3"},{default:u((()=>[i(a,{placeholder:"请输入查找最低价格",border:"surround",class:"mr-3",prefixIconStyle:"font-size: 22px;color: #909399",modelValue:v(le).start_price,"onUpdate:modelValue":t[7]||(t[7]=e=>v(le).start_price=e)},null,8,["modelValue"]),n(" - "),i(a,{placeholder:"请输入最高价格",border:"surround",class:"ml-3",modelValue:v(le).end_price,"onUpdate:modelValue":t[8]||(t[8]=e=>v(le).end_price=e)},null,8,["modelValue"])])),_:1}),i(h,{class:"h-[70vh]","scroll-y":!0},{default:u((()=>[i(r,{class:"bg-[#fff] grid grid-cols-3 gap-x-[50rpx] gap-y-[32rpx] py-[33rpx] px-[23rpx] rounded-[16rpx]"},{default:u((()=>{var e;return[(o(!0),f(_,null,m(null==(e=$.value[J.value])?void 0:e.child_list,((e,l)=>(o(),c(r,{key:e.category_id,class:p(["text-center flex flex-col items-center pt-[8rpx] rounded",{"bg-[#f4f6f8]":se.value==e.category_id}]),onClick:l=>{return t=e.category_id,se.value==t?se.value=$.value[J.value-1].category_id||"":se.value=t,void(q.value=[]);var t}},{default:u((()=>[i(I,{radius:"12rpx",width:"60rpx",height:"60rpx",src:v(V)(e.image?e.image:""),model:"aspectFill"},{error:u((()=>[i(y,{class:"rounded-[12rpx] overflow-hidden w-[60rpx] h-[60rpx]",src:v(V)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["src"]),i(r,{class:"text-[24rpx] text-center mt-[12rpx] leading-[34rpx]"},{default:u((()=>[n(C(e.category_name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))]})),_:1})])),_:1}),i(r,{class:"flex flex-wrap justify-end pl-[30rpx] p-[30rpx]"},{default:u((()=>[g("div",{class:"flex"},[i(U,{type:"primary",class:"mr-3",text:"重置",onClick:ue}),i(U,{type:"success",plain:!0,onClick:re,text:"搜索"})])])),_:1})])),_:1})])),_:1})])),_:1},8,["show"]),i(Q,{ref_key:"mescrollRef",ref:K,top:"160rpx",bottom:"50px",onInit:v(B),down:{use:!1},onUp:ae},{default:u((()=>[q.value.length?(o(),c(r,{key:0,class:p(["sidebar-marign",te.value?"":"flex justify-between flex-wrap"])},{default:u((()=>[(o(!0),f(_,null,m(q.value,((e,l)=>(o(),f(_,null,[te.value?(o(),c(r,{key:0,class:p(["bg-white flex p-[20rpx] rounded-[16rpx] overflow-hidden mt-[20rpx]",{"mb-[20rpx]":l+1==q.value.length}]),onClick:l=>ce(e.goods_id)},{default:u((()=>[i(I,{class:"rounded-[10rpx] overflow-hidden",width:"190rpx",height:"190rpx",src:v(V)(e.goods_cover_thumb_mid?e.goods_cover_thumb_mid:""),model:"aspectFill"},{error:u((()=>[i(y,{class:"w-[190rpx] h-[190rpx] rounded-[10rpx] overflow-hidden",src:v(V)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["src"]),i(r,{class:"flex-1 flex flex-col ml-[20rpx] py-[6rpx]"},{default:u((()=>[i(r,{class:"text-[28rpx] text-[#303133] leading-[40rpx] multi-hidden mb-[10rpx]"},{default:u((()=>[n(C(e.goods_name),1)])),_:2},1024),e.sub_title?(o(),c(r,{key:0,class:"text-[16rpx] text-[#303133] leading-[40rpx] multi-hidden mb-[10rpx]"},{default:u((()=>[n(C(e.sub_title),1)])),_:2},1024)):x("v-if",!0),e.goodsSku.sku_no?(o(),c(r,{key:1,class:"text-[16rpx] text-[#303133] leading-[40rpx] multi-hidden mb-[10rpx]"},{default:u((()=>[n(" sn: "+C(e.goodsSku.sku_no),1)])),_:2},1024)):x("v-if",!0),i(r,{class:"mt-auto flex justify-between items-baseline"},{default:u((()=>[i(r,{class:"text-[var(--price-text-color)] price-font flex items-baseline"},{default:u((()=>[i(s,{class:"text-[26rpx] font-500"},{default:u((()=>[n("￥")])),_:1}),i(s,{class:"text-[36rpx] font-500"},{default:u((()=>[n(C(pe(e).toFixed(2).split(".")[0]),1)])),_:2},1024),i(s,{class:"text-[24rpx] font-500"},{default:u((()=>[n("."+C(pe(e).toFixed(2).split(".")[1]),1)])),_:2},1024),"member_price"==ie(e)?(o(),c(y,{key:0,class:"h-[24rpx] w-[72rpx] ml-[6rpx]",src:v(V)("addon/phone_shop/VIP.png"),mode:"heightFix"},null,8,["src"])):x("v-if",!0),"discount_price"==ie(e)?(o(),c(y,{key:1,class:"h-[24rpx] w-[72rpx] ml-[6rpx]",src:v(V)("addon/phone_shop/discount.png"),mode:"heightFix"},null,8,["src"])):x("v-if",!0)])),_:2},1024),i(s,{class:"text-[22rpx] text-[#999]"},{default:u((()=>[n("库存:"+C(e.goodsSku.stock)+C(e.unit)+" | 已售:"+C(e.sale_num)+C(e.unit),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])):(o(),c(r,{key:1,class:"goods-item-style-two flex flex-col bg-[#fff] box-border rounded-[12rpx] overflow-hidden mt-[20rpx]",onClick:l=>ce(e.goods_id)},{default:u((()=>[i(I,{width:"100%",height:"350rpx",src:v(V)(e.goods_cover_thumb_mid?e.goods_cover_thumb_mid:""),model:"aspectFill"},{error:u((()=>[i(y,{class:"w-[100%] h-[350rpx]",src:v(V)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["src"]),i(r,{class:"px-[16rpx] flex-1 pt-[16rpx] pb-[20rpx] flex flex-col justify-between"},{default:u((()=>[i(r,{class:"text-[#303133] leading-[40rpx] text-[28rpx] multi-hidden"},{default:u((()=>[n(C(e.goods_name),1)])),_:2},1024),i(r,{class:"text-[#303133] leading-[40rpx] text-[20rpx] multi-hidden"},{default:u((()=>[n(C(e.sub_title),1)])),_:2},1024),i(r,{class:"flex justify-between flex-wrap items-baseline mt-[16rpx]"},{default:u((()=>[i(r,{class:"text-[var(--price-text-color)] price-font flex items-baseline"},{default:u((()=>[x('\t\t\t\t\t\t\t\t\t\t<text class="text-[20rpx]  mr-[4rpx]">￥</text>'),x('\t\t\t\t\t\t\t\t\t\t<text class="text-[36rpx] font-500">{{ item.goodsSku.price }}</text>'),i(s,{class:"text-[26rpx] font-500"},{default:u((()=>[n("￥")])),_:1}),i(s,{class:"text-[36rpx] font-500"},{default:u((()=>[n(C(pe(e).toFixed(2).split(".")[0]),1)])),_:2},1024),i(s,{class:"text-[24rpx] font-500"},{default:u((()=>[n("."+C(pe(e).toFixed(2).split(".")[1]),1)])),_:2},1024),"member_price"==ie(e)?(o(),c(y,{key:0,class:"h-[24rpx] ml-[6rpx]",src:v(V)("addon/phone_shop/VIP.png"),mode:"heightFix"},null,8,["src"])):x("v-if",!0),"discount_price"==ie(e)?(o(),c(y,{key:1,class:"h-[24rpx] ml-[6rpx]",src:v(V)("addon/phone_shop/discount.png"),mode:"heightFix"},null,8,["src"])):x("v-if",!0)])),_:2},1024),i(s,{class:"text-[22rpx] text-[#999]"},{default:u((()=>[n(" 库存"+C(e.goodsSku.stock)+C(e.unit),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]))],64)))),256))])),_:1},8,["class"])):x("v-if",!0),!q.value.length&&L.value?(o(),c(r,{key:1,class:"mx-[30rpx] mt-[20rpx] bg-[#fff] rounded-[16rpx] noData flex items-center justify-center"},{default:u((()=>[i(R,{option:{tip:"暂无商品"}})])),_:1})):x("v-if",!0)])),_:1},8,["onInit"]),i(E)])),_:1},8,["style"])}}}),[["__scopeId","data-v-3b9e9c3f"]]);export{H as default};
