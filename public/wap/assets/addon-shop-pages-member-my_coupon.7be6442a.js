import{d as e,l as r,r as t,u as l,o as a,c as s,w as o,b as p,E as x,F as n,G as d,f as u,n as i,a5 as c,a6 as f,i as m,a4 as _,g as b,h as g,H as y,x as v,y as h,V as k,a as w,C as j,ab as F}from"./index-e6ce9fbf.js";import{_ as C}from"./u-button.7a41d301.js";import{_ as D}from"./pay.16fd6339.js";import{e as I}from"./coupon.fd366af9.js";import{M as S}from"./mescroll-body.dc3de07c.js";import{M as z}from"./mescroll-empty.b423055b.js";import{u as B}from"./useMescroll.26ccf5de.js";import{_ as M}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.39fd4711.js";import"./u-icon.c5d9cd81.js";import"./u-image.c9386d77.js";import"./u-transition.6919b33f.js";import"./u-popup.b16d6e1d.js";import"./u-safe-bottom.1ba5bfba.js";import"./pay.f23cf994.js";import"./mescroll-uni-option.2f7b06f4.js";import"./mescroll-i18n.6025c811.js";/* empty css                                                                       */const E=M(e({__name:"my_coupon",setup(e){const M=r(),{mescrollInit:E,downCallback:H,getMescroll:G}=B(f,c),R=t([]),U=t(!1),V=[{status:1,name:"待使用"},{status:2,name:"已使用"},{status:3,name:"已过期"}],Y=t(1),q=e=>{U.value=!1;let r={page:e.num,limit:e.size,status:Y.value};I(r).then((r=>{let t=r.data.data;1==e.num&&(R.value=[]),R.value=R.value.concat(t),e.endSuccess(t.length),U.value=!0})).catch((()=>{U.value=!0,e.endErr()}))};return(e,r)=>{const t=m,c=_,f=j,I=F,B=b(g("u-button"),C),A=b(g("pay"),D);return l(M).info?(a(),s(t,{key:0,class:"bg-[#f8f8f8] min-h-screen overflow-hidden",style:i(e.themeColor())},{default:o((()=>[p(t,{class:"fixed left-0 top-0 right-0 z-10"},{default:o((()=>[p(c,{"scroll-x":"true",class:"scroll-Y box-border px-[24rpx] bg-white"},{default:o((()=>[p(t,{class:"flex whitespace-nowrap justify-around"},{default:o((()=>[(a(!0),x(d,null,n(l(V),((e,r)=>(a(),s(t,{class:y(["text-[27rpx] leading-[90rpx]",{"class-select":Y.value===e.status}]),onClick:r=>{return t=e.status,Y.value=t,R.value=[],void G().resetUpScroll();var t}},{default:o((()=>[v(h(e.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1}),p(S,{ref:"mescrollRef",top:"90rpx",onInit:l(E),onDown:l(H),onUp:q},{default:o((()=>[R.value.length?(a(),s(t,{key:0,class:"py-[20rpx] px-[24rpx]"},{default:o((()=>[(a(!0),x(d,null,n(R.value,((e,r)=>(a(),x(d,null,[1!=Y.value?(a(),s(t,{key:0,class:y(["flex items-center relative w-[100%] rounded-[20rpx] overflow-hidden bg-[#fff] py-[10rpx] background-size",{"mt-[20rpx]":r}]),style:i({backgroundImage:3==Y.value?"url("+l(k)("addon/shop/coupon/coupn_expired.png")+")":"none"})},{default:o((()=>[p(t,{class:"relative box-border flex-1 border-0 border-r-[1px] border-[#FFBDBD] border-dashed flex items-center"},{default:o((()=>[p(t,{class:"pl-[40rpx] w-[200rpx] box-border"},{default:o((()=>[p(t,{class:"price-font flex items-center text-[var(--primary-color)]"},{default:o((()=>[p(f,{class:"text-[38rpx] leading-[45rpx] text-center font-500"},{default:o((()=>[v("￥")])),_:1}),p(f,{class:"text-[56rpx] font-semibold text-left leading-[70rpx] truncate"},{default:o((()=>[v(h(e.coupon_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),p(t,{class:"flex-1 box-border ml-[10rpx]"},{default:o((()=>[p(t,{class:"text-[30rpx] leading-[35rpx] text-left font-500"},{default:o((()=>["0.00"===e.min_condition_money?(a(),s(f,{key:0},{default:o((()=>[v("无门槛")])),_:1})):(a(),s(f,{key:1},{default:o((()=>[v("满"+h(e.coupon_min_price)+"元可用",1)])),_:2},1024))])),_:2},1024),p(t,{class:"text-[20rpx] leading-[23rpx] mt-[4rpx] text-left flex items-center"},{default:o((()=>[p(f,{class:"bg-[var(--primary-color)] text-[#fff] text-[20rpx] h-[28rpx] leading-[28rpx] px-[10rpx] text-center rounded-[16rpx] mr-[6rpx] shrink-0"},{default:o((()=>[v(h(e.type_name),1)])),_:2},1024),p(f,{class:"truncate max-w-[190rpx]"},{default:o((()=>[v(h(e.title),1)])),_:2},1024)])),_:2},1024),p(t,{class:"w-[100%] mt-[4rpx] mb-[11px] text-[20rpx] leading-[23rpx]"},{default:o((()=>[1==e.valid_type?(a(),s(f,{key:0},{default:o((()=>[v("领取之日起"+h(e.length||"")+"天内有效",1)])),_:2},1024)):(a(),s(f,{key:1},{default:o((()=>[v(" 有效期至"+h(e.expire_time?e.expire_time.slice(0,10):""),1)])),_:2},1024))])),_:2},1024)])),_:2},1024)])),_:2},1024),p(t,{class:"pr-[20rpx] pl-[30rpx]"},{default:o((()=>[2==Y.value?(a(),s(I,{key:0,class:"w-[150rpx] h-[60rpx] text-[24rpx] !border-0 !bg-[#cccccc] rounded-full !text-[#fff] leading-[60rpx] remove-border",disabled:""},{default:o((()=>[v(h(l(V)[Y.value-1].name),1)])),_:1})):u("v-if",!0),3==Y.value?(a(),s(I,{key:1,class:"w-[150rpx] h-[60rpx] text-[24rpx] !bg-[#f6f6f6] !opacity-80 rounded-full !text-[#999] leading-[60rpx] border-[2rpx] border-solid border-[#999]",disabled:""},{default:o((()=>[v(h(l(V)[Y.value-1].name),1)])),_:1})):u("v-if",!0)])),_:1}),p(t,{class:"absolute top-0 right-[190rpx] h-[10rpx] w-[20rpx] rounded-br-[20rpx] rounded-bl-[20rpx] bg-[#F6F6F6]"}),p(t,{class:"absolute bottom-0 right-[190rpx] h-[10rpx] w-[20rpx] rounded-tr-[20rpx] rounded-tl-[20rpx] bg-[#F6F6F6]"})])),_:2},1032,["class","style"])):(a(),s(t,{key:1,class:y(["flex items-center relative w-[100%] rounded-[20rpx] overflow-hidden bg-[#fff] py-[10rpx] background-size",{"mt-[20rpx]":r}]),style:i({backgroundImage:"url("+l(k)("addon/shop/coupon/coupn_bg.png")+")"})},{default:o((()=>[p(t,{class:"relative box-border flex-1 border-0 border-r-[1px] border-[#FFBDBD] border-dashed flex items-center"},{default:o((()=>[p(t,{class:"pl-[40rpx] w-[200rpx] box-border"},{default:o((()=>[p(t,{class:"price-font flex items-center text-[var(--primary-color)]"},{default:o((()=>[p(f,{class:"text-[38rpx] leading-[45rpx] text-center font-500"},{default:o((()=>[v("￥")])),_:1}),p(f,{class:"text-[56rpx] font-semibold text-left leading-[70rpx] truncate"},{default:o((()=>[v(h(e.coupon_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),p(t,{class:"flex-1 box-border ml-[10rpx]"},{default:o((()=>[p(t,{class:"text-[30rpx] leading-[35rpx] text-left font-500"},{default:o((()=>["0.00"===e.min_condition_money?(a(),s(f,{key:0},{default:o((()=>[v("无门槛")])),_:1})):(a(),s(f,{key:1},{default:o((()=>[v("满"+h(e.coupon_min_price)+"元可用",1)])),_:2},1024))])),_:2},1024),p(t,{class:"text-[20rpx] leading-[23rpx] mt-[4px] text-left flex items-center"},{default:o((()=>[p(f,{class:"bg-[var(--primary-color)] text-[#fff] text-[20rpx] text-center h-[28rpx] leading-[28rpx] px-[10rpx] rounded-[16rpx] mr-[6rpx] shrink-0"},{default:o((()=>[v(h(e.type_name),1)])),_:2},1024),p(f,{class:"truncate max-w-[190rpx]"},{default:o((()=>[v(h(e.title),1)])),_:2},1024)])),_:2},1024),p(t,{class:"w-[100%] mt-[4px] mb-[11px] text-[20rpx] leading-[23rpx]"},{default:o((()=>[p(f,null,{default:o((()=>[v("有效期至"),p(f,null,{default:o((()=>[v(h(e.expire_time?e.expire_time.slice(0,10):""),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),1===Y.value?(a(),s(t,{key:0,class:"pr-[20rpx] pl-[30rpx]"},{default:o((()=>[p(B,{text:"去使用",customStyle:{width:"150rpx",height:"60rpx",color:"var(--primary-color)",fontSize:"24rpx",lineHeight:"60rpx",padding:"0",backgroundColor:"transparent",border:"2rpx solid var(--primary-color)"},shape:"circle",onClick:r=>{return t=e.coupon_id,void w({url:"/addon/shop/pages/goods/list",param:{coupon_id:t}});var t}},null,8,["customStyle","onClick"])])),_:2},1024)):u("v-if",!0),p(t,{class:"absolute top-0 right-[190rpx] h-[10rpx] w-[20rpx] rounded-br-[20rpx] rounded-bl-[20rpx] bg-[#F6F6F6]"}),p(t,{class:"absolute bottom-0 right-[190rpx] h-[10rpx] w-[20rpx] rounded-tr-[20rpx] rounded-tl-[20rpx] bg-[#F6F6F6]"})])),_:2},1032,["class","style"]))],64)))),256))])),_:1})):u("v-if",!0),!R.value.length&&U.value?(a(),s(t,{key:1,class:"noData my-[20rpx] mx-[24rpx] bg-[#fff] rounded-[20rpx] flex items-center justify-center"},{default:o((()=>[p(z,{option:{tip:"暂无优惠券"}})])),_:1})):u("v-if",!0)])),_:1},8,["onInit","onDown"]),p(A,{ref:"payRef"},null,512)])),_:1},8,["style"])):u("v-if",!0)}}}),[["__scopeId","data-v-bceab66e"]]);export{E as default};
