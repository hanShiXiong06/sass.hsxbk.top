import{d as e,r as t,p as s,o as a,c as l,w as r,b as o,u as d,y as i,z as c,f as x,n as f,B as n,i as u,D as p,g as m,h as _,E as y,F as v}from"./index-7bf68536.js";import{_ as g}from"./u-button.359d7329.js";import{_ as b}from"./pay.d2e850e8.js";import{_ as h}from"./loading-page.vue_vue_type_script_setup_true_lang.124ad65f.js";import{n as j,m as w}from"./vipcard.fb0aea23.js";import{_ as k}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.b37701e7.js";import"./u-icon.0c1c54c7.js";import"./u-image.e46f68ef.js";import"./u-transition.cdf87992.js";import"./u-popup.be4bfacd.js";import"./u-safe-bottom.908eeae4.js";import"./pay.2db06871.js";import"./u-loading-page.566c330a.js";const F=k(e({__name:"my_reserved_detail",setup(e){let k=t({}),F=t("");const C=t(!0);s((e=>{F.value=e.id,z(e.id)}));const z=e=>{j(e).then((e=>{k.value=e.data,C.value=!1})).catch((()=>{C.value=!1}))},I=t(null),N=(e,t="")=>{var s;"pay"==t?null==(s=I.value)||s.open(e.trade_type,e.trade_id,`/addon/vipcard/pages/order/detail?order_id=${e.trade_id}`):"cancel"==t&&w(e.reserve_id).then((e=>{z(F.value)}))};return(e,t)=>{const s=n,j=u,w=p,F=m(_("u-button"),g),z=m(_("pay"),b),T=m(_("loading-page"),h);return a(),l(j,{style:f(e.themeColor())},{default:r((()=>[C.value?x("v-if",!0):(a(),l(j,{key:0,class:"bg-[#F6F8FA] min-h-screen overflow-hidden"},{default:r((()=>[o(j,{class:"bg-[#fff] rounded-lg mx-3 mt-4 p-3"},{default:r((()=>[o(j,{class:"flex"},{default:r((()=>[o(s,{class:"w-[240rpx] h-[180rpx] rounded mr-3",src:d(y)(d(k).goods.cover_thumb_mid),mode:"aspectFill"},null,8,["src"]),o(j,{class:"flex flex-col py-1 flex-1"},{default:r((()=>[o(j,{class:"font-bold multi-hidden text-[30rpx]"},{default:r((()=>[i(c(d(k).goods.goods_name),1)])),_:1}),d(k).goods.keywords?(a(),l(j,{key:0,class:"text-[26rpx] mt-2 text-[var(--text-color-light6)]"},{default:r((()=>[i(c(d(k).goods.keywords),1)])),_:1})):x("v-if",!0),o(j,{class:"mt-auto font-bold text-[#FF3223]"},{default:r((()=>[i("￥"+c(d(k).goods.price),1)])),_:1})])),_:1})])),_:1})])),_:1}),o(j,{class:"flex flex-col mx-3 mt-3 px-3 py-4 bg-[#fff] rounded-lg"},{default:r((()=>[o(j,{class:"flex justify-between items-center pb-3 border-0 border-b-[2rpx] border-[#F2F2F2] border-solid"},{default:r((()=>[o(j,{class:"flex items-center"},{default:r((()=>[o(w,{class:"nc-iconfont nc-icon-qiuzhirenyuanV6xx1 text-[28rpx] font-bold mr-1"}),o(w,{class:"text-[26rpx]"},{default:r((()=>[i(c(d(v)("reservedTechnician")),1)])),_:1})])),_:1}),d(k).technician?(a(),l(j,{key:0,class:"text-[26rpx]"},{default:r((()=>[i(c(d(k).technician.name||"--"),1)])),_:1})):x("v-if",!0)])),_:1}),o(j,{class:"flex justify-between items-center pt-3"},{default:r((()=>[o(j,{class:"flex items-center"},{default:r((()=>[o(w,{class:"nc-iconfont nc-icon-a-shijianV6xx-36 font-bold text-[28rpx] mr-1"}),o(w,{class:"text-[26rpx]"},{default:r((()=>[i(c(d(v)("reservedTime")),1)])),_:1})])),_:1}),o(j,{class:"text-[26rpx]"},{default:r((()=>[i(c(d(k).reserve_time),1)])),_:1})])),_:1})])),_:1}),d(k).order?(a(),l(j,{key:0,class:"flex flex-col mx-3 mt-3 px-3 py-4 bg-[#fff] rounded-lg"},{default:r((()=>[o(j,{class:"font-bold text-sm mb-1"},{default:r((()=>[i(c(d(v)("reservedInfo")),1)])),_:1}),o(j,{class:"flex justify-between items-center py-2"},{default:r((()=>[o(w,{class:"text-xs text-[var(--text-color-light6)]"},{default:r((()=>[i(c(d(v)("orderNo"))+"：",1)])),_:1}),o(w,{class:"text-xs text-[#222]"},{default:r((()=>[i(c(d(k).order.order_no),1)])),_:1})])),_:1}),o(j,{class:"flex justify-between items-center py-2"},{default:r((()=>[o(w,{class:"text-xs text-[var(--text-color-light6)]"},{default:r((()=>[i(c(d(v)("reserveStateName"))+"：",1)])),_:1}),o(w,{class:"text-xs text-[#222]"},{default:r((()=>[i(c(d(k).reserve_state_name),1)])),_:1})])),_:1}),o(j,{class:"flex justify-between items-center py-2"},{default:r((()=>[o(w,{class:"text-xs text-[var(--text-color-light6)]"},{default:r((()=>[i(c(d(v)("createTime"))+"：",1)])),_:1}),o(w,{class:"text-xs text-[#222]"},{default:r((()=>[i(c(d(k).order.create_time),1)])),_:1})])),_:1}),o(j,{class:"flex justify-between items-center py-2"},{default:r((()=>[o(w,{class:"text-xs text-[var(--text-color-light6)]"},{default:r((()=>[i(c(d(v)("mobile"))+"：",1)])),_:1}),o(w,{class:"text-xs text-[#222]"},{default:r((()=>[i(c(d(k).mobile),1)])),_:1})])),_:1}),o(j,{class:"flex justify-between items-center py-2"},{default:r((()=>[o(w,{class:"text-xs text-[var(--text-color-light6)]"},{default:r((()=>[i(c(d(v)("remark"))+"：",1)])),_:1}),o(w,{class:"text-xs text-[#222]"},{default:r((()=>[i(c(d(k).remark),1)])),_:1})])),_:1})])),_:1})):x("v-if",!0),o(j,{class:"h-[160rpx] w-full"}),["1","4"].includes(d(k).reserve_state)?(a(),l(j,{key:1,class:"flex justify-end items-center bg-white px-3 py-1 fixed left-0 right-0 bottom-0 z-10"},{default:r((()=>[o(F,{text:d(v)("cancelReserved"),type:"primary",shape:"circle",plain:"",class:"text-[26rpx] !w-[210rpx] !h-[70rpx] !leading-[70rpx] mx-0 my-2 mr-3",onClick:t[0]||(t[0]=e=>N(d(k),"cancel"))},null,8,["text"]),"4"==d(k).reserve_state?(a(),l(F,{key:0,text:d(v)("pay"),type:"primary",shape:"circle",class:"text-[26rpx] !w-[210rpx] !h-[70rpx] !leading-[70rpx] mx-0 my-2 ml-3",onClick:t[1]||(t[1]=e=>N(d(k),"pay"))},null,8,["text"])):x("v-if",!0)])),_:1})):x("v-if",!0),o(z,{ref_key:"payRef",ref:I,onClose:e.payClose},null,8,["onClose"])])),_:1})),o(T,{loading:C.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-fc4f6472"]]);export{F as default};
