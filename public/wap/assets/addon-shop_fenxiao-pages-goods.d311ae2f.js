import{d as e,m as s,p as o,r as a,o as r,c as t,w as l,b as i,n as p,u as d,I as n,J as m,K as c,f as u,a3 as x,a4 as f,i as _,g,h,l as v,L as b,y,z as j,Y as k,a as w,Q as C,D as F}from"./index-d8a8f699.js";import{_ as I}from"./u--image.2df700b8.js";import{M as P}from"./mescroll-body.f9302aea.js";import{M as S}from"./mescroll-empty.2fe85dec.js";import{u as U}from"./useMescroll.26ccf5de.js";import{e as z}from"./fenxiao.966b2ea4.js";import{_ as M}from"./share-poster.b1e17ebe.js";import{_ as D}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.e646392b.js";import"./u-icon.5ba98c98.js";import"./u-transition.db07fff7.js";import"./mescroll-i18n.49872024.js";import"./u-popup.0d48946e.js";import"./u-safe-bottom.a4431b09.js";const E=D(e({__name:"goods",setup(e){const{mescrollInit:D,downCallback:E,getMescroll:R}=U(f,x),Y=s(),B=o((()=>Y.info));let J=a([]),K=a(!0);const L=e=>{let s={page:e.num,limit:e.size};K.value=!0,z(s).then((s=>{let o=s.data.data;1==e.num&&(J.value=[]),J.value=J.value.concat(o),K.value=!1,e.endSuccess(o.length)})).catch((()=>{K.value=!1,e.endErr()}))};let Q=a(null),T=a(""),V=a(""),W={};const Z=e=>{W.sku_id=e.goodsSku.sku_id,B.value&&B.value.member_id&&(W.member_id=B.value.member_id),(e=>{V.value="/wap/addon/shop/pages/goods/detail",T.value="?goods_id="+e.goods_id,B.value&&B.value.member_id&&(T.value+="&mid="+B.value.member_id)})(e),Q.value.openShare()};return(e,s)=>{const o=_,a=C,x=g(h("u--image"),I),f=F;return r(),t(o,{class:"bg-[#f8f8f8] min-h-[100vh]",style:p(e.themeColor())},{default:l((()=>[i(P,{ref:"mescrollRef",top:"350rpx",onInit:d(D),onUp:L,down:{use:!1}},{default:l((()=>[i(o,{class:"fixed top-0 left-0 right-0 z-10"},{default:l((()=>[i(o,{class:"w-[100%] h-[340rpx]",style:p({backgroundImage:"url("+d(v)("addon/shop_fenxiao/fenxiao_goods_bg.png")+")","background-size":"cover"})},null,8,["style"])])),_:1}),(r(!0),n(c,null,m(d(J),((e,s)=>(r(),t(o,{class:b(["bg-white flex p-[20rpx] sidebar-marign rounded-[16rpx] overflow-hidden mt-[20rpx]",{"mb-[20rpx]":s+1==d(J).length}]),key:s,onClick:s=>{w({url:"/addon/shop/pages/goods/detail",param:{goods_id:e.goods_id}})}},{default:l((()=>[i(x,{class:"rounded-[10rpx] overflow-hidden",width:"190rpx",height:"190rpx",src:d(v)(e.goods_cover_thumb_mid?e.goods_cover_thumb_mid:""),model:"aspectFill"},{error:l((()=>[i(a,{class:"rounded-[10rpx] overflow-hidden w-[190rpx] h-[190rpx]",src:d(v)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["src"]),i(o,{class:"flex-1 flex flex-col ml-[20rpx] py-[6rpx]"},{default:l((()=>[i(o,{class:"text-[28rpx] text-[#303133] leading-[40rpx] multi-hidden mb-[10rpx]"},{default:l((()=>[y(j(e.goods_name),1)])),_:2},1024),i(o,{class:"mt-auto flex justify-between items-baseline"},{default:l((()=>[i(o,{class:"text-[var(--price-text-color)] price-font flex items-baseline"},{default:l((()=>[i(f,{class:"text-[26rpx] font-500"},{default:l((()=>[y("￥")])),_:1}),i(f,{class:"text-[36rpx] font-500"},{default:l((()=>[y(j(parseFloat(e.goodsSku.price).toFixed(2).split(".")[0]),1)])),_:2},1024),i(f,{class:"text-[24rpx] font-500"},{default:l((()=>[y("."+j(parseFloat(e.goodsSku.price).toFixed(2).split(".")[1]),1)])),_:2},1024)])),_:2},1024),i(o,{onClick:k((s=>Z(e)),["stop"]),class:"text-[22rpx] flex items-center border-[2rpx] border-solid border-[var(--price-text-color)] px-[12rpx] py-[8rpx] rounded-[50rpx] text-[var(--price-text-color)]"},{default:l((()=>[i(f,{class:"nc-iconfont nc-icon-fenxiangV6xx-1 mr-[4rpx] !text-[28rpx]"}),i(f,null,{default:l((()=>[y("赚"+j(e.commission)+"元",1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128)),d(J).length||d(K)?u("v-if",!0):(r(),t(S,{key:0,option:{icon:d(v)("static/resource/images/empty.png")}},null,8,["option"]))])),_:1},8,["onInit"]),i(M,{ref_key:"sharePosterRef",ref:Q,posterType:"fenxiao_goods",posterParam:d(W),copyUrlParam:d(T),copyUrl:d(V)},null,8,["posterParam","copyUrlParam","copyUrl"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-0d3de0fe"]]);export{E as default};
