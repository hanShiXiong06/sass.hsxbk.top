import{d as t,r as e,j as s,o as a,c as o,w as r,u as l,b as n,E as u,F as i,G as d,f as c,n as m,a5 as _,a6 as p,i as f,a4 as y,g as b,h,H as v,x as g,y as k,V as x,_ as w,a as j,C,N as F,ab as D}from"./index-e6ce9fbf.js";import{_ as B}from"./pay.16fd6339.js";import{y as M,z as S,A as U,B as I}from"./tourism.b22998fc.js";import{M as E}from"./mescroll-body.dc3de07c.js";import{M as W}from"./mescroll-empty.b423055b.js";import{u as z}from"./useMescroll.26ccf5de.js";import{_ as G}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.c9386d77.js";import"./u-icon.c5d9cd81.js";import"./u-transition.6919b33f.js";import"./u-button.7a41d301.js";import"./u-loading-icon.39fd4711.js";import"./u-popup.b16d6e1d.js";import"./u-safe-bottom.1ba5bfba.js";import"./pay.f23cf994.js";import"./mescroll-uni-option.2f7b06f4.js";import"./mescroll-i18n.6025c811.js";/* empty css                                                                       */const H=G(t({__name:"list",setup(t){const{mescrollInit:G,downCallback:H,getMescroll:R}=z(p,_);let V=e([]),Y=e(!1),A=e(!1),L=e(""),N=e([]);s((t=>{L.value=t.status||"",$()}));const O=t=>{Y.value=!1;let e={page:t.num,limit:t.size,order_status:L.value};S(e).then((e=>{let s=e.data.data;1==t.num&&(V.value=[]),V.value=V.value.concat(s),t.endSuccess(s.length),Y.value=!0})).catch((()=>{Y.value=!0,t.endErr()}))},$=()=>{A.value=!1,N.value=[];N.value.push({name:"全部",status:""}),M().then((t=>{Object.values(t.data).forEach(((t,e)=>{N.value.push(t)})),A.value=!0})).catch((()=>{A.value=!0}))},q=t=>{j({url:"/addon/tourism/pages/order/detail",param:{order_id:t.order_id}})},J=(t,e)=>{const s=new Date(t);let a,o=[s.getFullYear(),s.getMonth()+1,s.getDate()];const r=s.getDay();return a="yearMonthDay"==e?o[0]+"年"+o[1]+"月"+o[2]+"日":"yearMonthDayWeek"==e?o[0]+"年"+o[1]+"月"+o[2]+"日 "+["周日","周一","周二","周三","周四","周五","周六"][r]:o[1]+"月"+o[2]+"日",a},K=e(null),P=(t,e="")=>{var s;"pay"==e?null==(s=K.value)||s.open(t.order_type,t.order_id,`/addon/tourism/pages/order/detail?order_id=${t.order_id}`):"cancel"==e?(t=>{U(t).then((t=>{R().resetUpScroll()})).catch((()=>{R().resetUpScroll()}))})(t):"delete"==e?(t=>{I(t.order_id).then((t=>{R().resetUpScroll()})).catch((()=>{R().resetUpScroll()}))})(t):"buy"==e&&("scenic"==t.order_type?j({url:"/addon/tourism/pages/scenic/list"}):"way"==t.order_type?j({url:"/addon/tourism/pages/way/list"}):"hotel"==t.order_type&&j({url:"/addon/tourism/pages/hotel/list"}))};return(t,e)=>{const s=f,_=y,p=C,j=F,M=D,S=b(h("pay"),B);return a(),o(s,{class:"bg-[#f8f8f8] min-h-screen overflow-hidden",style:m(t.themeColor())},{default:r((()=>[l(A)?(a(),o(s,{key:0,class:"fixed left-0 top-0 right-0 z-10"},{default:r((()=>[n(_,{"scroll-x":"true",class:"scroll-Y box-border px-[24rpx] bg-white"},{default:r((()=>[n(s,{class:"flex whitespace-nowrap justify-around"},{default:r((()=>[(a(!0),u(d,null,i(l(N),((t,e)=>(a(),o(s,{class:v(["text-sm leading-[90rpx]",{"class-select":l(L)===t.status.toString()}]),onClick:e=>{return s=t.status,L.value=s.toString(),V.value=[],void R().resetUpScroll();var s}},{default:r((()=>[g(k(t.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1})):c("v-if",!0),n(E,{ref:"mescrollRef",top:"104rpx",onInit:l(G),onDown:l(H),onUp:O},{default:r((()=>[n(s,{class:"goods-wrap"},{default:r((()=>[(a(!0),u(d,null,i(l(V),((t,e)=>(a(),u(d,{key:t.order_id},["hotel"==t.order_type?(a(),o(s,{key:0,class:"goods-item",onClick:e=>q(t)},{default:r((()=>[n(s,{class:"goods-head"},{default:r((()=>[n(p,null,{default:r((()=>[g("预订日期："+k(J(t.start_time,"yearMonthDayWeek")),1)])),_:2},1024),n(p,null,{default:r((()=>[g(k(t.order_status_info.name),1)])),_:2},1024)])),_:2},1024),n(s,{class:"goods-content"},{default:r((()=>[n(j,{class:"w-[40rpx]",src:l(x)("addon/tourism/tourism/member/hotel.png")},null,8,["src"]),n(s,null,{default:r((()=>[n(s,{class:"name-wrap"},{default:r((()=>[n(s,{class:"multi-hidden"},{default:r((()=>[g(k(t.hotel.hotel_name),1)])),_:2},1024),n(s,null,{default:r((()=>[g("￥"+k(t.order_money),1)])),_:2},1024)])),_:2},1024),n(s,{class:"desc"},{default:r((()=>[g(k(t.goods_name),1)])),_:2},1024),n(s,{class:"desc"},{default:r((()=>[g(k(J(t.start_time,"monthDay"))+"(入住)-"+k(J(t.end_time,"monthDay"))+"(离店)"+k(t.days)+"晚/"+k(t.num)+"间",1)])),_:2},1024),n(s,{class:"btn-wrap"},{default:r((()=>[(a(!0),u(d,null,i(t.order_status_info.member_action,((e,s)=>(a(),o(M,{class:"!w-auto !h-[60rpx] !text-[23rpx] flex items-center",onClick:w((s=>P(t,e.key)),["stop"])},{default:r((()=>[g(k(e.name),1)])),_:2},1032,["onClick"])))),256)),c(' <button @click.stop="orderBtnFn(item,\'buy\')" v-if="item.order_status">在线咨询</button> '),c(' <button @click.stop="orderBtnFn(item,\'buy\')" v-if="item.order_status">在线咨询</button>\r\n\t\t\t\t\t\t\t\t\t<button @click.stop="orderBtnFn(item)" v-if="item.order_status == -1">删除订单</button>\r\n\t\t\t\t\t\t\t\t\t<button @click.stop="orderBtnFn(item)" v-if="item.order_status == 0">取消订单</button>\r\n\t\t\t\t\t\t\t\t\t<button type="primary" @click.stop="orderBtnFn(item,\'pay\')" v-if="item.order_status == 0">去支付</button> ')])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])):c("v-if",!0),"way"==t.order_type?(a(),o(s,{key:1,class:"goods-item",onClick:e=>q(t)},{default:r((()=>[n(s,{class:"goods-head"},{default:r((()=>[n(p,null,{default:r((()=>[g("预订日期："+k(J(t.start_time,"yearMonthDayWeek")),1)])),_:2},1024),n(p,null,{default:r((()=>[g(k(t.order_status_info.name),1)])),_:2},1024)])),_:2},1024),n(s,{class:"goods-content"},{default:r((()=>[n(j,{class:"w-[40rpx]",src:l(x)("addon/tourism/tourism/member/way.png")},null,8,["src"]),n(s,null,{default:r((()=>[n(s,{class:"name-wrap"},{default:r((()=>[n(s,{class:"multi-hidden"},{default:r((()=>[g(k(t.way.way_name),1)])),_:2},1024),n(s,null,{default:r((()=>[g("￥"+k(t.order_money),1)])),_:2},1024)])),_:2},1024),n(s,{class:"desc"},{default:r((()=>[g(k(t.goods_name),1)])),_:2},1024),n(s,{class:"desc"},{default:r((()=>[g(k(t.num)+"张 "+k(J(t.start_time,"monthDay"))+"（出游）",1)])),_:2},1024),c(' <view class="time-wrap">\r\n\t\t\t\t\t\t\t\t\t<text class="nc-iconfont nc-icon-shijianV6xx"></text>\r\n\t\t\t\t\t\t\t\t\t<text>剩余支付时间：</text>\r\n\t\t\t\t\t\t\t\t\t<text>29分钟</text>\r\n\t\t\t\t\t\t\t\t</view> '),n(s,{class:"btn-wrap"},{default:r((()=>[(a(!0),u(d,null,i(t.order_status_info.member_action,((e,s)=>(a(),o(M,{class:"!w-auto !h-[60rpx] !text-[23rpx] flex items-center",onClick:w((s=>P(t,e.key)),["stop"])},{default:r((()=>[g(k(e.name),1)])),_:2},1032,["onClick"])))),256)),c(' <button @click.stop="orderBtnFn(item,\'buy\')" v-if="item.order_status">在线咨询</button>\r\n\t\t\t\t\t\t\t\t\t<button @click.stop="orderBtnFn(item)" v-if="item.order_status == -1">删除订单</button>\r\n\t\t\t\t\t\t\t\t\t<button @click.stop="orderBtnFn(item)" v-if="item.order_status == 0">取消订单</button>\r\n\t\t\t\t\t\t\t\t\t<button type="primary" @click.stop="orderBtnFn(item,\'pay\')" v-if="item.order_status == 0">去支付</button> ')])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])):c("v-if",!0),"scenic"==t.order_type?(a(),o(s,{key:2,class:"goods-item",onClick:e=>q(t)},{default:r((()=>[n(s,{class:"goods-head"},{default:r((()=>[n(p,null,{default:r((()=>[g("预订日期："+k(J(t.start_time,"yearMonthDayWeek")),1)])),_:2},1024),n(p,null,{default:r((()=>[g(k(t.order_status_info.name),1)])),_:2},1024)])),_:2},1024),n(s,{class:"goods-content"},{default:r((()=>[n(j,{class:"w-[40rpx]",src:l(x)("addon/tourism/tourism/member/scenic.png")},null,8,["src"]),n(s,null,{default:r((()=>[n(s,{class:"name-wrap"},{default:r((()=>[n(s,{class:"multi-hidden"},{default:r((()=>[g(k(t.scenic.scenic_name),1)])),_:2},1024),n(s,null,{default:r((()=>[g("￥"+k(t.order_money),1)])),_:2},1024)])),_:2},1024),n(s,{class:"desc"},{default:r((()=>[g(k(t.num)+"人 "+k(J(t.start_time,"yearMonthDay"))+"出发（"+k(t.goods_name)+"）",1)])),_:2},1024),n(s,{class:"btn-wrap"},{default:r((()=>[(a(!0),u(d,null,i(t.order_status_info.member_action,((e,s)=>(a(),o(M,{class:"!w-auto !h-[60rpx] !text-[23rpx] flex items-center",onClick:w((s=>P(t,e.key)),["stop"])},{default:r((()=>[g(k(e.name),1)])),_:2},1032,["onClick"])))),256)),c(' <button @click.stop="orderBtnFn(item,\'buy\')" v-if="item.order_status">在线咨询</button>\r\n\t\t\t\t\t\t\t\t\t<button @click.stop="orderBtnFn(item)" v-if="item.order_status == -1">删除订单</button>\r\n\t\t\t\t\t\t\t\t\t<button @click.stop="orderBtnFn(item)" v-if="item.order_status == 0">取消订单</button>\r\n\t\t\t\t\t\t\t\t\t<button type="primary" @click.stop="orderBtnFn(item,\'pay\')" v-if="item.order_status == 0">去支付</button> ')])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])):c("v-if",!0)],64)))),128))])),_:1}),!l(V).length&&l(Y)?(a(),o(W,{key:0,option:{icon:l(x)("static/resource/images/empty.png")}},null,8,["option"])):c("v-if",!0)])),_:1},8,["onInit","onDown"]),n(S,{ref_key:"payRef",ref:K,onClose:t.payClose},null,8,["onClose"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-af18e01b"]]);export{H as default};
