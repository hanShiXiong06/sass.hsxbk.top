import{bE as e,d as t,r as a,p as s,J as l,F as r,o,c as n,w as u,b as c,Q as p,y as i,z as m,u as f,f as x,n as d,a as y,bF as _,D as v,i as h,C as g,g as b,h as j,ab as w}from"./index-ef55c51f.js";import{_ as C}from"./u-loading-icon.26cceccf.js";import{_ as S}from"./u-modal.8223c8eb.js";import"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.54e03fd2.js";import"./u-popup.eb4425a0.js";import"./u-transition.f866f84e.js";import"./u-icon.ea2e3f36.js";const T=t({__name:"result",setup(t){const T=a(null),F=a(!1);let E="",$=0,k=0;s((e=>{E=e.trade_type,$=e.trade_id,z()}));const z=()=>{(function(t,a){return e.get(`pay/info/${t}/${a}`,{},{showErrorMessage:!0})})(E,$).then((e=>{if(!uni.$u.test.isEmpty(e.data)){if(1==e.data.status&&k<5)return F.value=!0,k++,void setTimeout((()=>{z()}),1e3);T.value=e.data,F.value=!1,l({title:2==T.value.status?r("pay.paySuccess"):r("pay.payFail")})}}))},L=()=>{var e;const t=decodeURIComponent(uni.getStorageSync("payReturn"));y(t?{url:t,mode:"reLaunch"}:{url:_(),param:{code:null==(e=T.value)?void 0:e.out_trade_no},mode:"reLaunch"})};return(e,t)=>{const a=v,s=h,l=g,y=b(j("u-loading-icon"),C),_=b(j("u-modal"),S);return o(),n(s,{style:d(e.themeColor())},{default:u((()=>[T.value?(o(),n(s,{key:0,class:"w-screen h-screen flex flex-col items-center"},{default:u((()=>[c(s,{class:"flex-1 flex flex-col items-center w-full pt-[200rpx]"},{default:u((()=>[c(s,{class:"flex items-center"},{default:u((()=>[c(a,{class:p(["nc-iconfont -mb-[4rpx] !text-[44rpx]",2==T.value.status?"text-primary nc-icon-duihaoV6mm":"nc-icon-tanhaoV6mm text-red"])},null,8,["class"]),c(a,{class:"text-[36rpx] ml-[16rpx] font-500"},{default:u((()=>[i(m(2==T.value.status?f(r)("pay.paySuccess"):f(r)("pay.payFail")),1)])),_:1})])),_:1}),c(s,{class:"text-[56rpx] font-500 mt-[60rpx] price-font"},{default:u((()=>[c(a,{class:"text-[36rpx] mr-[6rpx]"},{default:u((()=>[i(m(f(r)("currency")),1)])),_:1}),c(a,null,{default:u((()=>[i(m(f(w)(T.value.money)),1)])),_:1})])),_:1})])),_:1}),c(s,{class:"pb-[260rpx]"},{default:u((()=>[c(l,{class:"w-[380rpx] !border-0 h-[80rpx] text-[28rpx] text-[#333] !bg-[#f2f2f2] flex-center font-500 rounded-[20rpx]",plain:!0,onClick:L},{default:u((()=>[i(m(2==T.value.status?f(r)("complete"):f(r)("close")),1)])),_:1})])),_:1})])),_:1})):x("v-if",!0),c(_,{show:F.value,showCancelButton:!0,confirmText:f(r)("pay.completePay"),cancelText:f(r)("pay.incompletePay"),onCancel:L,confirmColor:"var(--primary-color)"},{default:u((()=>[c(s,{class:"py-[20rpx]"},{default:u((()=>[c(y,{text:f(r)("pay.getting"),textSize:"16",mode:"circle",vertical:!0},null,8,["text"])])),_:1})])),_:1},8,["show","confirmText","cancelText"])])),_:1},8,["style"])}}});export{T as default};
