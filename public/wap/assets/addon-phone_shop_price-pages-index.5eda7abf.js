import{an as t,ao as e,ap as a,aY as s,aZ as i,bC as l,c7 as r,bD as n,o,c as d,w as c,aS as u,R as h,n as p,f as m,i as f,d as _,l as g,j as b,r as v,O as y,H as x,P as k,b as C,y as w,u as I,z as D,Q as j,a7 as P,bc as S,D as V,g as $,h as W,a as z,e as A,E as B,v as H,bo as N,B as F}from"./index-7bf68536.js";import{_ as G}from"./u-icon.0c1c54c7.js";import{_ as T}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as Y}from"./u-modal.b47eb877.js";import{_ as E}from"./tabbar.e049672c.js";import{g as J}from"./recycle.0a383705.js";import"./u-line.463a2a45.js";import"./u-loading-icon.b37701e7.js";import"./u-popup.be4bfacd.js";import"./u-transition.cdf87992.js";import"./u-safe-bottom.908eeae4.js";import"./u-badge.d8d91719.js";import"./u-tabbar.d98653fa.js";import"./cloneDeep.77735539.js";const L=T({name:"u-grid-item",mixins:[e,a,{props:{name:{type:[String,Number,null],default:()=>t.gridItem.name},bgColor:{type:String,default:()=>t.gridItem.bgColor}}}],data:()=>({parentData:{col:0,border:!0},classes:[]}),mounted(){this.init()},emits:["click"],computed:{width(){return this.parentData.col>0?100/Number(this.parentData.col)+"%":0},itemStyle(){const t={background:this.bgColor,width:this.width};return s(t,i(this.customStyle))}},methods:{init(){l("$uGridItem",(()=>{this.gridItemClasses()})),this.updateParentData(),r("$uGridItem"),this.gridItemClasses()},updateParentData(){this.getParentData("u-grid")},clickHandler(){var t;let e=this.name;const a=null==(t=this.parent)?void 0:t.children;a&&null===this.name&&(e=a.findIndex((t=>t===this))),this.parent&&this.parent.childClick(e),this.$emit("click",e)},async getItemWidth(){let t=0;if(this.parent){t=await this.getParentWidth()/Number(this.parentData.col)+"px"}this.width=t},getParentWidth(){},gridItemClasses(){if(this.parentData.border){let t=[];this.parent.children.map(((e,a)=>{if(this===e){const e=this.parent.children.length;(a+1)%this.parentData.col!=0&&a+1!==e&&t.push("u-border-right");a<e-(e%this.parentData.col==0?this.parentData.col:e%this.parentData.col)&&t.push("u-border-bottom")}})),this.classes=t}}},beforeUnmount(){n("$uGridItem")}},[["render",function(t,e,a,s,i,l){const r=f;return i.parentData.col>0?(o(),d(r,{key:0,class:h(["u-grid-item",i.classes]),"hover-class":"u-grid-item--hover-class","hover-stay-time":200,onClick:l.clickHandler,style:p([l.itemStyle])},{default:c((()=>[u(t.$slots,"default",{},void 0,!0)])),_:3},8,["onClick","class","style"])):m("v-if",!0)}],["__scopeId","data-v-061660c7"]]);const O=T({name:"u-grid",mixins:[e,a,{props:{col:{type:[String,Number],default:()=>t.grid.col},border:{type:Boolean,default:()=>t.grid.border},align:{type:String,default:()=>t.grid.align}}}],data:()=>({index:0,width:0}),watch:{parentData(){this.children.length&&this.children.map((t=>{"function"==typeof t.updateParentData&&t.updateParentData()}))}},created(){this.children=[]},computed:{parentData(){return[this.hoverClass,this.col,this.size,this.border]},gridStyle(){let t={};switch(this.align){case"left":default:t.justifyContent="flex-start";break;case"center":t.justifyContent="center";break;case"right":t.justifyContent="flex-end"}return s(t,i(this.customStyle))}},emits:["click"],methods:{childClick(t){this.$emit("click",t)}}},[["render",function(t,e,a,s,i,l){const r=f;return o(),d(r,{class:"u-grid",ref:"u-grid",style:p([l.gridStyle])},{default:c((()=>[u(t.$slots,"default",{},void 0,!0)])),_:3},8,["style"])}],["__scopeId","data-v-1edb832b"]]),Q=T(_({__name:"index",setup(t){const e=g(),a=b((()=>e.info));let s=v([]),i=v([]);const l=v(!1),r=b((()=>{var t;return null==(t=a.value)?void 0:t.member_level})),n=b((()=>{var t;return null==(t=a.value)?void 0:t.member_level_name}));y((()=>{a.value||x().setLoginBack({url:"/addon/phone_shop_price/pages/index"}),J().then((t=>{s.value=t.data,i.value=Q(t.data)}))}));const u=t=>t.child_list.filter((t=>t.is_show)),h=t=>{console.log(t.startsWith("http")),t.startsWith("http")||(t=p()+t),console.log(t),N({indicator:"number",loop:!0,urls:Array.isArray(t)?t:[t]})},p=()=>"",_=()=>{S({url:"/addon/tk_vip/pages/index"})},T=()=>{S({url:"/addon/phone_shop_price/pages/order"})};function Q(t){return t.reduce(((t,e)=>(e.images&&t.push(e),e.child_list&&e.child_list.length&&(t=t.concat(Q(e.child_list))),t)),[])}const R=b((()=>s.value.some((t=>t.child_list&&t.child_list.some((t=>1===t.need_vip))))));return(t,e)=>{const a=f,p=V,g=F,b=$(W("up-icon"),G),v=$(W("up-grid-item"),L),y=$(W("up-grid"),O),x=$(W("up-modal"),Y),S=$(W("tabbar"),E);return o(),k(j,null,[C(a,{class:"page"},{default:c((()=>[C(a,{class:"text-2xl text-center p-2"},{default:c((()=>[w(" 回收♻️报价 ")])),_:1}),C(a,{class:"text-center"},{default:c((()=>[w("做更真实的报价!")])),_:1}),C(a,{class:"mt-3 text-xs flex justify-between p-2"},{default:c((()=>[I(R)?(o(),d(a,{key:0},{default:c((()=>[I(r)?(o(),d(a,{key:1},{default:c((()=>[w(" 恭喜您已成为VIP-"+D(I(n))+"-等级 ",1)])),_:1})):(o(),d(a,{key:0},{default:c((()=>[w(" 同行报价单需要开通VIP才能查看 点击"),C(p,{class:"text-[#007AFF]",onClick:e[0]||(e[0]=t=>_())},{default:c((()=>[w("开通VIP")])),_:1})])),_:1}))])),_:1})):m("v-if",!0),C(a,{class:"text-[#ff4000]"},{default:c((()=>[C(p,{onClick:T},{default:c((()=>[w(" 立即报单 ")])),_:1}),C(p,{onClick:e[1]||(e[1]=t=>I(z)({url:"/addon/phone_shop_price/pages/order/list"}))},{default:c((()=>[w(" 我的订单 ")])),_:1})])),_:1})])),_:1}),(o(!0),k(j,null,P(I(s),((t,e)=>A((o(),d(a,{class:"list mt-3 bg-white shadow rounded",key:e},{default:c((()=>[C(a,{class:"title"},{default:c((()=>[w(D(t.category_name),1)])),_:2},1024),t.child_list&&t.child_list.length?(o(),d(a,{key:0,class:"p-2"},{default:c((()=>[C(y,{border:!1,col:"4"},{default:c((()=>[(o(!0),k(j,null,P(u(t),((t,e)=>(o(),d(v,{key:e,onClick:e=>(t=>{const e=i.value.findIndex((e=>e.category_id===t));-1!==e&&i.value[e].images?h(i.value[e].images):l.value=!0})(t.category_id)},{default:c((()=>[t.need_vip?(o(),d(a,{key:0,class:"w-8 h-5 vip_box"},{default:c((()=>[C(g,{src:"https://vip.123pan.cn/1832133965/tiantai/vip2.png",mode:"aspectFit",class:"vip_bg w-full h-10"})])),_:1})):m("v-if",!0),C(b,{class:"rounded",customStyle:{padding:"10rpx"},name:I(B)(t.image),size:30},null,8,["name"]),C(p,{class:"grid-text"},{default:c((()=>[w(D(t.category_name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1024)):(o(),d(a,{key:1,class:"list_box bg-white shadow rounded"},{default:c((()=>[C(a,{class:"list_item"},{default:c((()=>[C(a,null,{default:c((()=>[w("暂无报价")])),_:1})])),_:1})])),_:1}))])),_:2},1024)),[[H,t.is_show]]))),128)),C(x,{cancelText:"取消",showCancelButton:"",confirmText:"购买VIP",onCancel:e[2]||(e[2]=t=>l.value=!1),onConfirm:e[3]||(e[3]=t=>_()),show:l.value,title:"购买VIP",content:"当前部分报价需要开通或升级VIP,如有需求请购买或升级VIP"},null,8,["show"])])),_:1}),C(S)],64)}}}),[["__scopeId","data-v-393d74fa"]]);export{Q as default};
