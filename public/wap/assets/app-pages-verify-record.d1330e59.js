import{d as e,r as a,p as l,o as t,c as s,w as r,b as o,A as c,f as x,U as n,ah as i,V as p,u,n as d,ai as f,aj as m,D as v,af as g,i as _,g as h,h as b,y,z as k,bI as w,E as C,a as j,B as V,bJ as I,_ as U}from"./index-22c9735d.js";import{u as z,M}from"./useMescroll.c8621717.js";import{M as S}from"./mescroll-empty.6040bd4d.js";import{c as D}from"./verify.48f9fbfa.js";import{s as E}from"./select-date.d8a89cc9.js";import"./mescroll-i18n.1ec61c43.js";const F=U(e({__name:"record",setup(e){const U=a(""),F=a([]),R=a([]),A=a(!1),{mescrollInit:B,downCallback:J,getMescroll:q}=z(m,f);a(null),l((()=>{}));const G=e=>{A.value=!1;let a={page:e.num,limit:e.size,keyword:U.value,create_time:F.value};D(a).then((a=>{let l=a.data.data;1==e.num&&(R.value=[]),R.value=R.value.concat(l),e.endSuccess(l.length),A.value=!0})).catch((()=>{A.value=!0,e.endErr()}))},H=()=>{q().resetUpScroll()},K=a(),L=()=>{K.value.show=!0},N=e=>{F.value=e,R.value=[],q().resetUpScroll()};return(e,a)=>{const l=v,f=g,m=_,z=V,D=h(b("u--image"),I);return t(),s(m,{class:"bg-[var(--page-bg-color)] min-h-screen overflow-hidden",style:d(e.themeColor())},{default:r((()=>[o(m,{class:"fixed left-0 right-0 top-0 z-99 bg-[#fff]"},{default:r((()=>[o(m,{class:"py-[14rpx] flex items-center justify-between px-[20rpx]"},{default:r((()=>[o(m,{class:"flex-1 search-input mr-[20rpx]"},{default:r((()=>[o(l,{onClick:a[0]||(a[0]=c((e=>H()),["stop"])),class:"nc-iconfont nc-icon-sousuo-duanV6xx1 btn"}),o(f,{class:"input",maxlength:"50",type:"text",modelValue:U.value,"onUpdate:modelValue":a[1]||(a[1]=e=>U.value=e),placeholder:"请输入搜索关键词",placeholderClass:"text-[var(--text-color-light9)] text-[24rpx]","confirm-type":"search",onConfirm:a[2]||(a[2]=e=>H())},null,8,["modelValue"]),U.value?(t(),s(l,{key:0,class:"nc-iconfont nc-icon-cuohaoV6xx1 clear",onClick:a[3]||(a[3]=e=>U.value="")})):x("v-if",!0)])),_:1}),o(m,{class:"nc-iconfont nc-icon-a-riliV6xx-36 !text-[30rpx] leading-[36rpx] text-[var(--text-color-light6)]",onClick:L})])),_:1})])),_:1}),o(M,{ref:"mescrollRef",top:"88rpx",onInit:u(B),down:{use:!1},onUp:G},{default:r((()=>[R.value.length?(t(),s(m,{key:0,class:"sidebar-margin pt-[var(--top-m)]"},{default:r((()=>[(t(!0),n(p,null,i(R.value,((e,a)=>(t(),s(m,{key:e.id,class:"w-full flex flex-col mb-[var(--top-m)] card-template",onClick:a=>{j({url:"/app/pages/verify/detail",param:{code:e.code}})}},{default:r((()=>[o(m,{class:"flex items-center mb-[30rpx] leading-[1] text-[26rpx]"},{default:r((()=>[o(m,{class:"nc-iconfont nc-icon-hexiaotaiV6xx !text-[26rpx] pr-[10rpx]"}),o(l,{class:"truncate text-[#303133] text-[26rpx]"},{default:r((()=>[y("核销码:")])),_:1}),o(l,{class:"ml-[10rpx] max-w-[494rpx]"},{default:r((()=>[y(k(e.code),1)])),_:2},1024),o(l,{class:"text-[#303133] text-[26rpx] font-400 nc-iconfont nc-icon-fuzhiV6xx1 ml-[11rpx]",onClick:c((a=>u(w)(e.code)),["stop"])},null,8,["onClick"])])),_:2},1024),(t(!0),n(p,null,i(e.value.list,((a,l)=>(t(),s(m,{class:"flex flex-1",key:l},{default:r((()=>[o(D,{width:"130rpx",height:"130rpx",radius:"var(--goods-rounded-big)",src:u(C)(a.cover?a.cover:""),mode:"aspectFill"},{error:r((()=>[o(z,{class:"w-[130rpx] h-[130rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:u(C)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["radius","src"]),o(m,{class:"flex flex-col flex-1 ml-[20rpx] py-[4rpx]"},{default:r((()=>[o(m,{class:"max-w-[490rpx] leading-[1.3] truncate text-[28rpx] text-[#303133]"},{default:r((()=>[y(k(a.name),1)])),_:2},1024),e.sub_name?(t(),s(m,{key:0,class:"mt-[14rpx] truncate text-[24rpx] text-[var(--text-color-light9)] max-w-[490rpx]"},{default:r((()=>[y(k(e.sub_name),1)])),_:2},1024)):x("v-if",!0),o(m,{class:"text-[24rpx] mt-[10rpx] text-[var(--text-color-light9)]"},{default:r((()=>[y("x1")])),_:1})])),_:2},1024)])),_:2},1024)))),128)),o(m,{class:"flex bg-[var(--temp-bg)] py-[20rpx] px-[20rpx] rounded-[12rpx] mt-[20rpx]"},{default:r((()=>[o(m,{class:"flex-1"},{default:r((()=>[o(m,{class:"text-[22rpx] text-[var(--text-color-light9)] mb-[10rpx] leading-[30rpx]"},{default:r((()=>[y("核销时间")])),_:1}),o(m,{class:"text-[26rpx] text-[#303133] leading-[36rpx]"},{default:r((()=>[y(k(e.create_time),1)])),_:2},1024)])),_:2},1024),o(m,{class:"flex-1"},{default:r((()=>[o(m,{class:"text-[22rpx] text-[var(--text-color-light9)] mb-[10rpx] leading-[30rpx]"},{default:r((()=>[y("核销员")])),_:1}),o(m,{class:"text-[26rpx] text-[#303133] leading-[36rpx]"},{default:r((()=>[y(k(e.member?e.member.nickname:"--"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):x("v-if",!0),!R.value.length&&A.value?(t(),s(S,{key:1,option:{tip:"暂无核销记录"}})):x("v-if",!0)])),_:1},8,["onInit"]),x(" 时间选择 "),o(E,{ref_key:"selectDateRef",ref:K,onConfirm:N},null,512)])),_:1},8,["style"])}}}),[["__scopeId","data-v-aa534e07"]]);export{F as default};
