import{d as t,r as e,j as a,s,t as l,o,c as u,w as n,b as r,H as c,x as i,y as p,u as m,f as d,n as f,a as x,aS as y,C as _,i as v,g as h,h as j,$ as g}from"./index-e6ce9fbf.js";import{_ as b}from"./u-button.7a41d301.js";import{_ as w}from"./u-loading-icon.39fd4711.js";import{_ as S}from"./u-modal.a2c072b7.js";import{g as C}from"./pay.f23cf994.js";import"./u-icon.c5d9cd81.js";import"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.ebbd60c6.js";import"./u-popup.b16d6e1d.js";import"./u-transition.6919b33f.js";import"./u-safe-bottom.1ba5bfba.js";const T=t({__name:"result",setup(t){const T=e(null),k=e(!1);let z="",F=0,L=0;a((t=>{z=t.trade_type,F=t.trade_id,P()}));const P=()=>{C(z,F).then((t=>{if(!uni.$u.test.isEmpty(t.data)){if(1==t.data.status&&L<5)return k.value=!0,L++,void setTimeout((()=>{P()}),1e3);T.value=t.data,k.value=!1,s({title:2==T.value.status?l("pay.paySuccess"):l("pay.payFail")})}})).catch((()=>{}))},R=()=>{var t;const e=decodeURIComponent(uni.getStorageSync("payReturn"));x(e?{url:e,mode:"reLaunch"}:{url:y(),param:{code:null==(t=T.value)?void 0:t.out_trade_no},mode:"reLaunch"})};return(t,e)=>{const a=_,s=v,x=h(j("u-button"),b),y=h(j("u-loading-icon"),w),C=h(j("u-modal"),S);return o(),u(s,{style:f(t.themeColor())},{default:n((()=>[T.value?(o(),u(s,{key:0,class:"w-screen h-screen flex flex-col items-center"},{default:n((()=>[r(s,{class:"flex-1 flex flex-col items-center w-full pt-[100rpx]"},{default:n((()=>[r(a,{class:c(["iconfont text-2xl",2==T.value.status?"text-primary iconduigou":"iconzhifushibai text-red"])},null,8,["class"]),r(s,{class:"text-sm"},{default:n((()=>[i(p(2==T.value.status?m(l)("pay.paySuccess"):m(l)("pay.payFail")),1)])),_:1}),r(s,{class:"text-xl font-bold pt-[30rpx]"},{default:n((()=>[r(a,{class:"text-base"},{default:n((()=>[i(p(m(l)("currency")),1)])),_:1}),r(a,null,{default:n((()=>[i(p(m(g)(T.value.money)),1)])),_:1})])),_:1})])),_:1}),r(s,{class:"pb-[200rpx] w-[240rpx]"},{default:n((()=>[r(x,{type:"primary",text:2==T.value.status?m(l)("complete"):m(l)("close"),plain:!0,onClick:R},null,8,["text"])])),_:1})])),_:1})):d("v-if",!0),r(C,{show:k.value,showCancelButton:!0,confirmText:m(l)("pay.completePay"),cancelText:m(l)("pay.incompletePay"),onCancel:R},{default:n((()=>[r(s,{class:"py-[20rpx]"},{default:n((()=>[r(y,{text:m(l)("pay.getting"),textSize:"16",mode:"circle",vertical:!0},null,8,["text"])])),_:1})])),_:1},8,["show","confirmText","cancelText"])])),_:1},8,["style"])}}});export{T as default};
