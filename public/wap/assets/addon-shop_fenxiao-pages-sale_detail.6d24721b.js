import{d as e,r as a,p as t,t as l,a as s,o as r,c as d,w as o,O as n,b as i,u as p,y as u,n as f,z as _,f as x,P as c,a6 as m,g,h as v,i as b,D as h,C as y,E as w,a0 as j,Q as k}from"./index-9317da28.js";import{_ as C}from"./u--image.5461b7b7.js";import{_ as N}from"./loading-page.vue_vue_type_script_setup_true_lang.c92b07c2.js";import{d as z}from"./sale.c5a7dd4d.js";import{b as D}from"./fenxiao.4ded0069.js";import{_ as I}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.74ac23f6.js";import"./u-icon.5e775659.js";import"./u-transition.65be38eb.js";import"./u-loading-page.de89bca9.js";import"./u-loading-icon.aabe3d05.js";/* empty css                                                                       */const T=I(e({__name:"sale_detail",setup(e){const I=a({}),T=a([]);t((e=>{e.id?F(Number(e.id)):(l({title:"缺少销售奖励id",icon:"none"}),setTimeout((()=>{s({url:"/addon/shop_fenxiao/pages/sale",mode:"redirectTo"})}),1e3))}));const E=a(!0),F=e=>{z(e).then((a=>{I.value.id=e,I.value.is_settlement=a.data.is_settlement,I.value.order_money=a.data.order_money,I.value.reward_money=I.value.is_settlement?a.data.reward_money:a.data.diff_data.now_reward,I.value.sale_start_time=a.data.sale_start_time,I.value.sale_end_time=a.data.sale_end_time,I.value.is_settlement||(I.value.diff_data=a.data.diff_data),L()})).catch((()=>{E.value=!1}))},L=()=>{D().then((e=>{I.value.condition_order_money=e.data.sale_config.condition.order_money,T.value=e.data.sale_config.reward.map(((a,t)=>(a.title=t?Number(e.data.sale_config.reward[t-1].end)+1!=Number(a.end)?"第 "+(Number(e.data.sale_config.reward[t-1].end)+1)+"-"+a.end:"第 "+a.end:a.end>1?"前 "+a.end:"第 "+a.end,a))),E.value=!1})).catch((e=>{E.value=!1}))},O=()=>{s({url:"/addon/shop_fenxiao/pages/sale_ranking",param:{id:I.value.id}})},P=()=>{s({url:"/addon/shop/pages/index",mode:"reLaunch"})};return(e,a)=>{const t=g(v("u--image"),C),l=b,s=h,z=y,D=g(v("loading-page"),N);return r(),d(l,{class:"bg-[var(--page-bg-color)] min-h-[100vh]",style:f(e.themeColor())},{default:o((()=>[E.value?x("v-if",!0):(r(),n(c,{key:0},[i(l,{class:"w-[100%] h-[960rpx] relative background-size box-border",style:f({backgroundImage:"url("+p(w)("addon/shop_fenxiao/sale-detail-header.png")+")"})},{default:o((()=>[i(l,{class:"absolute top-[105rpx] left-0 right-0 flex justify-center"},{default:o((()=>[i(t,{width:"341rpx",height:"63rpx",src:p(w)("addon/shop_fenxiao/sale-detail-title.png"),model:"aspectFill"},null,8,["src"])])),_:1}),i(l,{class:"side-tab",onClick:O},{default:o((()=>[i(s,{class:"nc-iconfont nc-icon-paihangbangV6xx icon"}),i(s,{class:"desc"},{default:o((()=>[u("排行榜")])),_:1})])),_:1})])),_:1},8,["style"]),i(l,{class:"py-[24rpx] px-[var(--sidebar-m)] relative mt-[-560rpx] box-border"},{default:o((()=>[i(l,{class:"w-full box-border bg-[#fff] rounded-[var(--rounded-big)] overflow-hidden"},{default:o((()=>[i(l,{class:"bg-[#fdf6ec] px-[var(--pad-sidebar-m)] py-[30rpx]"},{default:o((()=>[i(l,{class:"text-[30rpx] font-500 text-[#b88230] mb-[20rpx]"},{default:o((()=>[u("当前业绩")])),_:1}),i(l,{class:"flex items-center mb-[10rpx]"},{default:o((()=>[i(l,{class:"text-[24rpx] text-[#b88230]"},{default:o((()=>[u("奖励周期：")])),_:1}),i(l,{class:"flex"},{default:o((()=>[i(l,{class:"text-[24rpx] text-[#b88230] leading-[32rpx]"},{default:o((()=>[u(_(I.value.sale_start_time.split(" ")[0].replace(/-/g,".")),1)])),_:1}),i(l,{class:"text-[24rpx] text-[#b88230] leading-[32rpx]"},{default:o((()=>[u("-"+_(I.value.sale_end_time.split(" ")[0].replace(/-/g,".")),1)])),_:1})])),_:1})])),_:1}),!I.value.is_settlement&&I.value.diff_data.diff_order_money?(r(),d(l,{key:0,class:"text-[24rpx] leading-[32rpx] text-[#b88230]"},{default:o((()=>[u(" 再卖"+_(I.value.diff_data.diff_order_money)+"元可获得"+_(p(j)(I.value.diff_data.prev_reward))+"元 ",1)])),_:1})):x("v-if",!0)])),_:1}),i(l,{class:"w-full pt-[70rpx] flex justify-between box-border"},{default:o((()=>[i(l,{class:"w-[50%] flex-shrink-0 box-border pl-[30rpx] pr-[24rpx]"},{default:o((()=>[i(l,{class:"text-[28rpx] text-[#333]"},{default:o((()=>[u("个人奖金（元）")])),_:1}),i(l,{class:"text-[50rpx] font-500 text-left mt-[20rpx] price-font"},{default:o((()=>[u(_(p(j)(I.value.reward_money)),1)])),_:1})])),_:1}),i(l,{class:"w-[50%] flex-shrink-0 box-border pr-[30rpx] pl-[24rpx]"},{default:o((()=>[i(l,{class:"text-[28rpx] text-[#333]"},{default:o((()=>[u("团队销售（元）")])),_:1}),i(l,{class:"text-[50rpx] font-500 text-left mt-[20rpx] price-font"},{default:o((()=>[u(_(p(j)(I.value.order_money)),1)])),_:1})])),_:1})])),_:1}),i(l,{class:"w-full pt-[90rpx] pb-[40rpx] flex justify-center"},{default:o((()=>[i(z,{class:"w-[460rpx] h-[76rpx] text-[26rpx] flex-center rounded-[100rpx] !text-[#fff] m-0 primary-btn-bg remove-border font-500",shape:"circle",onClick:P},{default:o((()=>[u("去推广商品")])),_:1})])),_:1})])),_:1}),i(l,{class:"w-full card-template overflow-hidden top-mar"},{default:o((()=>[i(l,{class:"text-[30rpx] leading-[42rpx] flex items-center"},{default:o((()=>[i(s,{class:"font-500"},{default:o((()=>[u("排名奖励规则")])),_:1}),i(s,{class:"text-[24rpx] text-[var(--text-color-light6)] ml-[10rpx]"},{default:o((()=>[u("参与门槛: 团队销售额"+_(p(j)(I.value.condition_order_money))+"元",1)])),_:1})])),_:1}),(r(!0),n(c,null,m(T.value,((e,a)=>(r(),d(l,{class:k(["text-[26rpx] mt-[30rpx]",{"mb-[34rpx]":a!=T.value.length}])},{default:o((()=>[u("团队销售"+_(e.title)+" 名，奖金 "+_(p(j)(e.reward.commission))+" 元",1)])),_:2},1032,["class"])))),256))])),_:1})])),_:1})],64)),i(D,{loading:E.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-25c30e90"]]);export{T as default};
