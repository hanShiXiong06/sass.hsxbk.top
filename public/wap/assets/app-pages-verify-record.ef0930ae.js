import{_ as e}from"./u-input.9468a367.js";import{d as l,r as t,o as a,c as s,w as r,b as o,I as n,J as p,K as c,f as x,u as i,n as u,a3 as d,a4 as f,g as m,h as _,D as v,i as g,y as h,z as b,l as j,a as y,Q as w}from"./index-d8a8f699.js";import{_ as k}from"./u--image.2df700b8.js";import{M as C}from"./mescroll-body.f9302aea.js";import{M as F}from"./mescroll-empty.2fe85dec.js";import{u as D}from"./useMescroll.26ccf5de.js";import{c as V}from"./verify.577b693a.js";import{s as I}from"./select-date.1d88e46b.js";import{_ as M}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.5ba98c98.js";import"./u-image.e646392b.js";import"./u-transition.db07fff7.js";import"./mescroll-i18n.49872024.js";import"./u-popup.0d48946e.js";import"./u-safe-bottom.a4431b09.js";const z=M(l({__name:"record",setup(l){const M=t(""),z=t([]),S=t([]),U=t(!1),{mescrollInit:A,downCallback:E,getMescroll:R}=D(f,d),Y=e=>{U.value=!1;let l={page:e.num,limit:e.size,keyword:M.value,create_time:z.value};V(l).then((l=>{let t=l.data.data;1==e.num&&(S.value=[]),S.value=S.value.concat(t),e.endSuccess(t.length),U.value=!0})).catch((()=>{U.value=!0,e.endErr()}))},B=()=>{R().resetUpScroll()},J=t(),K=()=>{J.value.show=!0},Q=e=>{z.value=e,S.value=[],R().resetUpScroll()};return(l,t)=>{const d=m(_("u-input"),e),f=v,D=g,V=w,z=m(_("u--image"),k);return a(),s(D,{class:"bg-[#f8f8f8] min-h-screen overflow-hidden",style:u(l.themeColor())},{default:r((()=>[o(D,{class:"fixed left-0 right-0 top-0 z-99 bg-[#fff] px-[var(--sidebar-m)]"},{default:r((()=>[o(D,{class:"py-[14rpx] flex items-center justify-between"},{default:r((()=>[o(D,{class:"flex-1 flex items-center h-[60rpx] bg-[#F8F9FD] rounded-[30rpx] px-[20rpx] mr-[30rpx]"},{default:r((()=>[o(d,{class:"flex-1",maxlength:"50",modelValue:M.value,"onUpdate:modelValue":t[0]||(t[0]=e=>M.value=e),onConfirm:t[1]||(t[1]=e=>B()),placeholder:"请输入搜索关键词",placeholderClass:"text-[#8288A2] text-[24rpx]",fontSize:"26rpx",clearable:"",border:"none"},null,8,["modelValue"]),o(f,{class:"nc-iconfont nc-icon-sousuo-duanV6xx1 text-[32rpx] ml-[18rpx] !text-[#999]",onClick:t[2]||(t[2]=e=>B())})])),_:1}),o(D,{class:"nc-iconfont nc-icon-riliV6xx !text-[30rpx] leading-[36rpx]",onClick:K})])),_:1})])),_:1}),o(C,{ref:"mescrollRef",top:"108rpx",onInit:i(A),down:{use:!1},onUp:Y},{default:r((()=>[o(D,{class:"sidebar-marign"},{default:r((()=>[(a(!0),n(c,null,p(S.value,((e,l)=>(a(),s(D,{key:e.id,class:"w-full flex flex-col mb-[20rpx] card-template",onClick:l=>{y({url:"/app/pages/verify/detail",param:{code:e.code}})}},{default:r((()=>[o(D,{class:"flex items-center mb-[30rpx] leading-[1]"},{default:r((()=>[o(D,{class:"nc-iconfont nc-icon-hexiaotaiV6xx !text-[26rpx] pr-[10rpx]"}),o(f,{class:"truncate text-[#333333] text-[26rpx]"},{default:r((()=>[h("核销码："+b(e.code),1)])),_:2},1024)])),_:2},1024),(a(!0),n(c,null,p(e.value.list,((e,l)=>(a(),s(D,{class:"flex flex-1",key:l},{default:r((()=>[o(z,{class:"rounded-[8rpx] overflow-hidden",width:"120rpx",height:"120rpx",src:i(j)(e.cover?e.cover:""),model:"aspectFill"},{error:r((()=>[o(V,{class:"w-[120rpx] h-[120rpx] rounded-[8rpx] overflow-hidden",src:i(j)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["src"]),o(D,{class:"flex flex-col flex-1 justify-between ml-[20rpx] py-[4rpx]"},{default:r((()=>[o(D,{class:"leading-[1.3] multi-hidden text-[28rpx] text-[#333]"},{default:r((()=>[h(b(e.name),1)])),_:2},1024),o(D,{class:"self-end text-[26rpx] mt-[10rpx] text-[#626779]"},{default:r((()=>[h("x1")])),_:1})])),_:2},1024)])),_:2},1024)))),128)),o(D,{class:"flex bg-[#F8F9FD] py-[20rpx] px-[20rpx] rounded-[12rpx] mt-[20rpx]"},{default:r((()=>[o(D,{class:"flex-1"},{default:r((()=>[o(D,{class:"text-[22rpx] text-[#8288A2] mb-[10rpx] leading-[30rpx]"},{default:r((()=>[h("核销时间")])),_:1}),o(D,{class:"text-[26rpx] text-[#333] leading-[36rpx]"},{default:r((()=>[h(b(e.create_time),1)])),_:2},1024)])),_:2},1024),o(D,{class:"flex-1"},{default:r((()=>[o(D,{class:"text-[22rpx] text-[#8288A2] mb-[10rpx] leading-[30rpx]"},{default:r((()=>[h("核销员")])),_:1}),o(D,{class:"text-[26rpx] text-[#333] leading-[36rpx]"},{default:r((()=>[h(b(e.member?e.member.nickname:"--"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),!S.value.length&&U.value?(a(),s(D,{key:0,class:"mx-[30rpx] rounded-[16rpx] noData flex items-center justify-center"},{default:r((()=>[o(F,{option:{tip:"暂无核销记录"}})])),_:1})):x("v-if",!0)])),_:1},8,["onInit"]),x(" 时间选择 "),o(I,{ref_key:"selectDateRef",ref:J,onConfirm:Q},null,512)])),_:1},8,["style"])}}}),[["__scopeId","data-v-3d56020b"]]);export{z as default};
