import{d as e,r as a,l as s,p as t,s as l,J as r,E as o,x as d,o as i,c,w as n,u as p,b as u,y as g,z as x,f as _,n as v,H as f,a as m,g as h,h as y,i as b,D as w,B as k,F as j}from"./index-7bf68536.js";import{_ as C}from"./u-swiper.f792d47e.js";import{_ as F}from"./u-parse.525658f5.js";import{_ as D}from"./u-button.359d7329.js";import{_ as S}from"./loading-page.vue_vue_type_script_setup_true_lang.124ad65f.js";import{i as B,d as I,e as L,s as z}from"./vipcard.fb0aea23.js";import{_ as E}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.b37701e7.js";import"./u-icon.0c1c54c7.js";import"./u-loading-page.566c330a.js";import"./u-transition.cdf87992.js";const H=E(e({__name:"detail",setup(e){let E=a([]),H=a([]),N=a(!0);const G=s();let J={goods:[{num:1,goods_id:""}]},K=a("");t((e=>{K.value=e.id,N.value=!0,l()&&G.getMemberInfo(),B(e.id).then((e=>{H.value=e.data,r({title:H.value.goods_name}),E.value=[],H.value.goods_image?(H.value.goods_image=H.value.goods_image.split(","),H.value.goods_image.forEach(((e,a)=>{E.value.push(o(e))}))):E.value.push(o(H.value.goods_cover)),N.value=!1}))}));const M=a(0);d((()=>{l()&&setTimeout((function(){P()}),700)}));const P=()=>{I({goods_id:K.value,type:"vipcard"}).then((e=>{e.data&&(M.value=e.data.id),e.data||(M.value=0)}))};return(e,a)=>{const s=h(y("u-swiper"),C),t=b,r=w,d=h(y("u-parse"),F),B=k,I=h(y("u-button"),D),G=h(y("loading-page"),S);return i(),c(t,{style:v(e.themeColor())},{default:n((()=>[p(N)?_("v-if",!0):(i(),c(t,{key:0,class:"bg-[#f7f7f7] min-h-screen overflow-hidden px-[24rpx] pt-[20rpx]"},{default:n((()=>[u(s,{list:p(E),height:"360rpx",radius:"18rpx"},null,8,["list"]),u(t,{class:"chunk-wrap pt-4 pb-3 rounded-lg relative mt-[24rpx]"},{default:n((()=>[u(t,{class:"font-bold multi-hidden"},{default:n((()=>[g(x(p(H).goods_name),1)])),_:1}),u(t,{class:"flex items-center mt-2 text-[#F55246] text-base font-bold"},{default:n((()=>[u(r,{class:"text-xs"},{default:n((()=>[g("ï¿¥")])),_:1}),g(x(p(H).price),1)])),_:1})])),_:1}),u(t,{class:"chunk-wrap pt-[34rpx] pb-[24rpx] scheduling rounded-lg"},{default:n((()=>[u(t,{class:"text-center text-[34rpx] font-bold"},{default:n((()=>[g("-- "+x(p(j)("purchaseNotes"))+" --",1)])),_:1}),u(t,{class:"scheduling-content mt-2"},{default:n((()=>[p(H).buy_info?(i(),c(d,{key:0,content:p(H).buy_info,tagStyle:{img:"vertical-align: top;"}},null,8,["content"])):(i(),c(t,{key:1},{default:n((()=>[g(x(p(j)("noPurchaseNotes")),1)])),_:1}))])),_:1})])),_:1}),u(t,{class:"chunk-wrap pt-[34rpx] pb-[24rpx] scheduling rounded-lg"},{default:n((()=>[u(t,{class:"text-center text-[34rpx] font-bold"},{default:n((()=>[g("-- "+x(p(j)("cardDetail"))+" --",1)])),_:1}),u(t,{class:"scheduling-content mt-2"},{default:n((()=>[p(H).goods_content?(i(),c(d,{key:0,content:p(H).goods_content,tagStyle:{img:"vertical-align: top;"}},null,8,["content"])):(i(),c(t,{key:1},{default:n((()=>[g(x(p(j)("noCardDetail")),1)])),_:1}))])),_:1})])),_:1}),u(t,{class:"h-[148rpx] tab-bar-placeholder w-screen"}),u(t,{class:"flex justify-between bg-white px-3 tab-bar fixed bottom-0 left-0 right-0"},{default:n((()=>[u(t,{class:"flex items-center"},{default:n((()=>[u(t,{class:"flex flex-col items-center mr-[44rpx]",onClick:a[0]||(a[0]=e=>p(m)({url:"/addon/vipcard/pages/index",mode:"reLaunch"}))},{default:n((()=>[u(B,{class:"w-[44rpx] h-[44rpx]",src:p(o)("addon/vipcard/vipcard/service/index.png"),mode:"aspectFill"},null,8,["src"]),u(r,{class:"text-xs whitespace-nowrap text-[#454545] mt-1"},{default:n((()=>[g(x(p(j)("index")),1)])),_:1})])),_:1}),u(t,{class:"flex flex-col items-center mr-[44rpx]"},{default:n((()=>[u(B,{class:"w-[44rpx] h-[44rpx]",src:p(o)("addon/vipcard/vipcard/service/service.png"),mode:"aspectFill"},null,8,["src"]),u(r,{class:"text-xs whitespace-nowrap text-[#454545] mt-1"},{default:n((()=>[g(x(p(j)("service")),1)])),_:1})])),_:1}),u(t,{class:"flex flex-col items-center mr-[44rpx]",onClick:a[1]||(a[1]=e=>(e=>{if(!l())return f().setLoginBack({url:"/addon/vipcard/pages/service/detail",param:{id:e.goods_id}}),!1;M.value>0?L(M.value).then((()=>{P()})):z({goods_id:K.value,type:"vipcard"}).then((()=>{P()}))})(p(H)))},{default:n((()=>[M.value>0?(i(),c(B,{key:0,class:"w-[44rpx] h-[44rpx]",src:p(o)("addon/vipcard/vipcard/service/select_collect.png"),mode:"aspectFill"},null,8,["src"])):(i(),c(B,{key:1,class:"w-[44rpx] h-[44rpx]",src:p(o)("addon/vipcard/vipcard/service/collect.png"),mode:"aspectFill"},null,8,["src"])),u(r,{class:"text-xs whitespace-nowrap text-[#454545] mt-1"},{default:n((()=>[g(x(p(j)("collect")),1)])),_:1})])),_:1})])),_:1}),u(I,{text:p(H).is_reserve?p(j)("reserve"):p(j)("buy"),class:"flex-1 !rounded-3xl !ml-1",type:"primary",size:"16",onClick:a[2]||(a[2]=e=>(e=>{if(!l())return f().setLoginBack({url:"/addon/vipcard/pages/service/detail",param:{id:e.goods_id}}),!1;e.is_reserve?m({url:"/addon/vipcard/pages/service/reserve_detail",param:{id:e.goods_id}}):(J.goods[0].goods_id=e.goods_id,uni.setStorageSync("vipcardCreateData",J),m({url:"/addon/vipcard/pages/order/payment"}))})(p(H)))},null,8,["text"])])),_:1})])),_:1})),u(G,{loading:p(N)},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-0448ed32"]]);export{H as default};
