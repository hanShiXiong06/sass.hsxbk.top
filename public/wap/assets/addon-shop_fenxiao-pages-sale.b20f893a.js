import{d as e,r as t,o as a,c as s,w as l,b as r,u as o,E as d,x as n,y as i,G as p,F as x,f as c,n as f,a5 as u,a6 as m,i as _,$ as b,H as v,V as y,a as h}from"./index-656dc629.js";import{g,a as w,b as j}from"./sale.793cbe2c.js";import{M as k}from"./mescroll-body.cb3f7eec.js";import{M as C}from"./mescroll-empty.966dc165.js";import{u as I}from"./useMescroll.26ccf5de.js";import{_ as M}from"./_plugin-vue_export-helper.1b428a4d.js";import"./mescroll-uni-option.de83ded3.js";import"./mescroll-i18n.6025c811.js";/* empty css                                                                       */const O=M(e({__name:"sale",setup(e){const{mescrollInit:M,downCallback:O,getMescroll:S}=I(m,u);let z=t(!0);const E=t([]),J=e=>{g({page:e.num,limit:e.size}).then((t=>{let a=t.data.data;1==e.num&&(E.value=[],N(a)),E.value=E.value.concat(a),e.endSuccess(a.length)})).catch((()=>{z.value=!1,e.endErr()}))},N=async e=>{const t=await w();let a=e.map((e=>e.period_id));if(Object.keys(t.data).length&&(a.length&&-1==a.indexOf(t.data.id)||!a.length)){let e=JSON.parse(JSON.stringify(t.data));e.reward_money=e.total_reward_money,e.period_id=e.id,E.value.unshift(e)}z.value=!1};let A=t({});j().then((e=>{A.value=e.data}));return(e,t)=>{const u=_;return a(),s(u,{class:"bg-[#f8f8f8] min-h-[100vh]",style:f(e.themeColor())},{default:l((()=>[r(k,{ref:"mescrollRef",down:{use:!1},onInit:o(M),onUp:J},{default:l((()=>[o(z)?c("v-if",!0):(a(),d(p,{key:0},[r(u,{class:"wechat w-full h-[180rpx]"}),r(u,{class:"wechat w-full h-[20rpx] rounded-b-[50%]"}),r(u,{class:"p-[24rpx] relative mt-[-120rpx] box-border"},{default:l((()=>[r(u,{class:"w-full box-border bg-[#fff] px-[24rpx] py-[30rpx] rounded-[10rpx] overflow-hidden"},{default:l((()=>[r(u,{class:"text-[26rpx] text-center text-[#999]"},{default:l((()=>[n("销售奖励（元）")])),_:1}),r(u,{class:"text-[50rpx] font-600 text-center mt-[24rpx]"},{default:l((()=>[n(i(o(b)(o(A).sale_commission)||0),1)])),_:1}),r(u,{class:"mt-[24rpx] flex justify-center"},{default:l((()=>[r(u,{class:"px-[10rpx] leading-[35rpx] h-[35rpx] text-[#999] rounded-[2rpx]"},{default:l((()=>[n(" 待发放:"+i(o(b)(o(A).wait_sale_commission)||0)+"（元） ",1)])),_:1})])),_:1})])),_:1}),r(u,{class:"mt-[24rpx] bg-[#fff] px-[24rpx] box-border rounded-[10rpx] overflow-hidden"},{default:l((()=>[(a(!0),d(p,null,x(E.value,((e,t)=>(a(),s(u,{class:v(["flex py-[30rpx] box-border border-0 border-solid border-[#ddd]",{"border-b-[1rpx]":t!=E.value.length-1}]),onClick:t=>{return a=e.period_id,void h({url:"/addon/shop_fenxiao/pages/sale_detail",param:{id:a}});var a}},{default:l((()=>[r(u,{class:"flex-1 flex flex-col justify-between"},{default:l((()=>[r(u,{class:"text-[26rpx] font-600"},{default:l((()=>[n(i(e.is_send?"已发放":"待发放"),1)])),_:2},1024),e.is_settlement?(a(),s(u,{key:0,class:"text-[24rpx] text-[#999]"},{default:l((()=>[n("已于 "+i(e.sale_end_time)+" 结算该奖励",1)])),_:2},1024)):(a(),s(u,{key:1,class:"text-[24rpx] text-[#999]"},{default:l((()=>[n("预计于 "+i(e.sale_end_time)+" 结算该奖励",1)])),_:2},1024))])),_:2},1024),r(u,{class:"text-[35rpx] font-600 text-[var(--price-text-color)] h-[100rpx] leading-[100rpx]"},{default:l((()=>[n(" +"+i(o(b)(e.reward_money)),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),256))])),_:1}),E.value.length||o(z)?c("v-if",!0):(a(),s(C,{key:0,option:{icon:o(y)("static/resource/images/empty.png")}},null,8,["option"]))])),_:1})],64))])),_:1},8,["onInit"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-08ea265d"]]);export{O as default};
