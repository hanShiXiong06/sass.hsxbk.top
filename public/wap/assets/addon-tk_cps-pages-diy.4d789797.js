import{d as a,r as e,a_ as o,p as t,m as l,j as r,a9 as s,a$ as i,s as p,b0 as g,b1 as u,a6 as m,o as n,c as d,w as j,b as c,e as b,v,f,u as h,n as _,U as y,g as S,h as x,i as C,V as k}from"./index-656dc629.js";import{_ as B}from"./u-loading-page.f8275a02.js";import{d as w,f as $}from"./index.f48672e5.js";import{_ as D}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.5e5c27a0.js";import"./u-transition.825c0e35.js";import"./u-icon.286409fc.js";import"./u-popup.7e287da6.js";import"./u-safe-bottom.d9fa806b.js";import"./u-avatar.7ebcca8a.js";import"./u-text.d2d9d7e3.js";import"./u-parse.126498b6.js";import"./tabbar.d997a979.js";import"./u-badge.973492be.js";import"./u-tabbar.8ee28cae.js";import"./u--image.8451ef47.js";import"./u-image.38c45e12.js";import"./article.5eb27f33.js";import"./goods.69a93840.js";import"./u--input.ff17d21d.js";import"./u-input.cf99fb96.js";import"./technician.38170cd2.js";import"./tourism.5350a0e9.js";import"./tkjhkd.5725355a.js";import"./u-line.144794ca.js";import"./u-row.7d5ceef7.js";import"./goto.e0aed7b8.js";import"./u-tag.01386195.js";import"./u-line-progress.765541e1.js";import"./mescroll-uni.b78a6e13.js";import"./mescroll-body.cb3f7eec.js";import"./mescroll-uni-option.de83ded3.js";import"./mescroll-i18n.6025c811.js";import"./useMescroll.26ccf5de.js";import"./mescroll-empty.966dc165.js";/* empty css                                                                       */import"./bwc.d8c16f5f.js";import"./common.dd6be071.js";import"./coupon.a0bc913c.js";import"./goods.14ff652f.js";import"./point.9ecbf721.js";import"./order.49a0a3c1.js";import"./fenxiao.6f2151fd.js";import"./share-poster.62a765e3.js";import"./top-tabbar.a5b6fbb7.js";import"./manifest.78a5c925.js";import"./isArrayLike.512b2e7f.js";const E=D(a({__name:"diy",setup(a){const{setShare:D,onShareAppMessage:E,onShareTimeline:M}=y();E(),M();const A=e(!0),T=o(),I=e(0);let R=e(!1);const G=t({pageMode:"diy",title:"",global:{},value:[]}),H=l((()=>"decorate"==T.mode?T:G)),J=e(0),U=e("DIY_TK_CPS_DIY"),z=e("");r((a=>{T.mode=a.mode||"","decorate"==T.mode&&(A.value=!1),J.value=a.id||"",z.value=a.template||""})),s((()=>{"decorate"==T.mode?T.init():i({id:J.value,name:U.value,template:z.value}).then((a=>{if(a.data.value){let e=a.data;G.pageMode=e.mode,G.title=e.title;let o=JSON.parse(e.value);G.global=o.global,G.value=o.value,G.value.forEach(((a,e)=>{a.pageStyle="",a.pageStartBgColor&&(a.pageStartBgColor&&a.pageEndBgColor?a.pageStyle+=`background:linear-gradient(${a.pageGradientAngle},${a.pageStartBgColor},${a.pageEndBgColor});`:a.pageStyle+="background-color:"+a.pageStartBgColor+";"),a.margin&&(a.pageStyle+="padding-top:"+2*a.margin.top+"rpx;",a.pageStyle+="padding-bottom:"+2*a.margin.bottom+"rpx;",a.pageStyle+="padding-right:"+2*a.margin.both+"rpx;",a.pageStyle+="padding-left:"+2*a.margin.both+"rpx;")})),R.value=G.value.some((a=>a&&a.position&&"top_fixed"==a.position)),p({title:G.title})}let e=a.data.share?JSON.parse(a.data.share):null;D(e),A.value=!1}))}));const K=l((()=>{var a="";return H.value.global.pageStartBgColor&&H.value.global.pageEndBgColor?a+=`background:linear-gradient(${H.value.global.pageGradientAngle},${H.value.global.pageStartBgColor},${H.value.global.pageEndBgColor});`:a+="background-color:"+H.value.global.pageStartBgColor+";",a+="min-height:calc(100vh - 50px);",H.value.global.bgUrl&&(a+=`background-image:url('${k(H.value.global.bgUrl)}');`),H.value.global.bgHeightScale&&(a+=`background-size: 100% ${H.value.global.bgHeightScale}%;`),a}));return g((()=>{I.value++,u()})),m((a=>{T.scrollTop=a.scrollTop})),(a,e)=>{const o=S(x("u-loading-page"),B),t=C;return n(),d(t,{style:_(a.themeColor())},{default:j((()=>[c(o,{loading:A.value,loadingText:"","bg-color":"#f7f7f7"},null,8,["loading"]),b(c(t,null,{default:j((()=>[f(" 自定义模板渲染 "),"fixed"!=h(H).pageMode?(n(),d(t,{key:0,class:"diy-template-wrap bg-index",style:_(h(K))},{default:j((()=>[c(w,{data:h(H),pullDownRefreshCount:I.value},null,8,["data","pullDownRefreshCount"])])),_:1},8,["style"])):f("v-if",!0),f(" 固定模板渲染 "),"fixed"==h(H).pageMode?(n(),d(t,{key:1,class:"fixed-template-wrap"},{default:j((()=>[c($,{data:h(H),pullDownRefreshCount:I.value},null,8,["data","pullDownRefreshCount"])])),_:1})):f("v-if",!0)])),_:1},512),[[v,!A.value]])])),_:1},8,["style"])}}}),[["__scopeId","data-v-0bf29936"]]);export{E as default};
