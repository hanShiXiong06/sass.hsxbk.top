import{r as a,a_ as e,p as l,m as o,V as g,j as t,a9 as r,a$ as p,s as n,b0 as u,b1 as i,a6 as d}from"./index-e6ce9fbf.js";function b(b={}){const v=a(!0),s=e(),m=a(0),S=a(0),c=a(b.name||""),h=a(""),B=l({pageMode:"diy",title:"",global:{},value:[]}),C=o((()=>"decorate"==s.mode?s:B)),y=a(!1);return{getLoading:()=>v.value,pullDownRefreshCount:m,data:C.value,isShowTopTabbar:y,pageStyle:()=>{var a="";return C.value.global.pageStartBgColor&&(C.value.global.pageStartBgColor&&C.value.global.pageEndBgColor?a+=`background:linear-gradient(${C.value.global.pageGradientAngle},${C.value.global.pageStartBgColor},${C.value.global.pageEndBgColor});`:a+="background-color:"+C.value.global.pageStartBgColor+";"),a+="min-height:calc(100vh - 50px);",C.value.global.bgUrl&&(a+=`background-image:url('${g(C.value.global.bgUrl)}');`),C.value.global.bgHeightScale&&(a+=`background-size: 100% ${C.value.global.bgHeightScale}%;`),C.value.global&&C.value.global.topStatusBar&&"style-5"==C.value.global.topStatusBar.style&&(a+="background-position-y: -176rpx;"),a},onLoad:()=>{t((a=>{s.mode=a.mode||"","decorate"==s.mode&&(v.value=!1),S.value=a.id||"",""==c.value&&(c.value=a.name||""),h.value=a.template||""}))},onShow:(a=null)=>{r((()=>{"decorate"==s.mode?s.init():p({id:S.value,name:c.value,template:h.value}).then((e=>{let l=e.data;if(l.value){B.pageMode=l.mode,B.title=l.title;let a=JSON.parse(l.value);B.global=a.global,B.value=a.value,B.value.forEach(((a,e)=>{a.pageStyle="",a.pageStartBgColor&&(a.pageStartBgColor&&a.pageEndBgColor?a.pageStyle+=`background:linear-gradient(${a.pageGradientAngle},${a.pageStartBgColor},${a.pageEndBgColor});`:a.pageStyle+="background-color:"+a.pageStartBgColor+";"),a.margin&&(a.margin.top>0&&(a.pageStyle+="padding-top:"+2*a.margin.top+"rpx;"),a.pageStyle+="padding-bottom:"+2*a.margin.bottom+"rpx;",a.pageStyle+="padding-right:"+2*a.margin.both+"rpx;",a.pageStyle+="padding-left:"+2*a.margin.both+"rpx;")})),y.value=B.value.some((a=>a&&a.position&&"top_fixed"==a.position)),n({title:B.title})}v.value=!1,a&&a(l)}))}))},onPullDownRefresh:()=>{u((()=>{m.value++,i()}))},onPageScroll:()=>{d((a=>{a.scrollTop>0&&(s.scrollTop=a.scrollTop)}))}}}export{b as u};
