import{d as e,r as t,o as r,c as a,w as s,u as l,I as o,b as n,y as d,z as c,f as i,L as x,K as m,J as p,n as f,a3 as u,a4 as _,Q as g,D as b,i as y,g as v,h,l as w,Z as k,x as j}from"./index-d8a8f699.js";import{_ as C}from"./u-loading-page.c740ef13.js";import{M as I}from"./mescroll-body.f9302aea.js";import{M as z}from"./mescroll-empty.2fe85dec.js";import{u as F}from"./useMescroll.26ccf5de.js";import{h as M,i as S,f as U}from"./fenxiao.966b2ea4.js";import{_ as D}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.6808ae8c.js";import"./u-transition.db07fff7.js";import"./mescroll-i18n.49872024.js";const E=D(e({__name:"order",setup(e){const{mescrollInit:D,downCallback:E,getMescroll:B}=F(_,u);let J=t([]),K=t(!0),L=t(!0);const Q=e=>{let t={is_settlement:X.value,page:e.num,limit:e.size};L.value=!0,M(t).then((t=>{let r=t.data.data;1==e.num&&(J.value=[]),J.value=J.value.concat(r),L.value=!1,e.endSuccess(r.length)})).catch((()=>{L.value=!1,e.endErr()}))};let R=t({});const T=()=>{S().then((e=>{R.value=e.data}))};T();let W=t({});K.value=!0,U().then((e=>{W.value=e.data,K.value=!1}));let X=t(1);const Y=e=>{X.value=e,J.value=[],B().resetUpScroll(),T()};return(e,t)=>{const u=g,_=b,F=y,M=v(h("u-loading-page"),C);return r(),a(F,{class:"bg-[#f8f8f8] min-h-[100vh]",style:f(e.themeColor())},{default:s((()=>[l(K)?i("v-if",!0):(r(),o(m,{key:0},[n(F,{class:"flex items-center order-bg-wrap p-[40rpx]"},{default:s((()=>[l(W).member&&l(W).member.headimg?(r(),a(u,{key:0,class:"w-[90rpx] h-[90rpx] rounded-full mr-[20rpx]",src:l(w)(l(W).member.headimg),mode:"aspectFill"},null,8,["src"])):(r(),a(u,{key:1,class:"w-[90rpx] h-[90rpx] rounded-full mr-[20rpx]",src:l(w)("addon/shop_fenxiao/index/head.png"),mode:"aspectFill"},null,8,["src"])),n(F,{class:"flex flex-col"},{default:s((()=>[n(F,{class:"flex items-center"},{default:s((()=>[n(_,{class:"truncate max-w-[380rpx] text-[#fff] mr-[10rpx] text-[28rpx]"},{default:s((()=>[d(c(l(W).member.nickname||l(W).member.username),1)])),_:1}),l(W).fenxiao_level?(r(),a(_,{key:0,class:"text-[#fff] text-[24rpx] border-[2rpx] border-solid border-[#fff] px-[6rpx] py-[8rpx] whitespace-nowrap"},{default:s((()=>[d(c(l(W).fenxiao_level.level_name),1)])),_:1})):i("v-if",!0)])),_:1})])),_:1})])),_:1}),n(F,{class:"bg-[#fff] sticky top-[0] z-10"},{default:s((()=>[n(F,{class:"flex whitespace-nowrap justify-around overflow-hidden"},{default:s((()=>[n(F,{class:x(["text-center mx-[60rpx] justify-center flex flex-1 items-center h-[90rpx] border-0 border-b-[2rpx] border-solid border-[transparent]",{"!border-[var(--primary-color)] text-[var(--primary-color)]":1==l(X)}]),onClick:t[0]||(t[0]=e=>Y(1))},{default:s((()=>[n(_,{class:"text-[28rpx]"},{default:s((()=>[d("已结算")])),_:1}),n(_,{class:"text-[28rpx]"},{default:s((()=>[d("("+c(l(k)(l(R).fenxiao_commission))+")",1)])),_:1})])),_:1},8,["class"]),n(F,{class:x(["text-sm mx-[60rpx] text-center justify-center flex items-center flex-1 h-[90rpx] border-0 border-b-[2rpx] border-solid border-[transparent]",{"!border-[var(--primary-color)] text-[var(--primary-color)]":0==l(X)}]),onClick:t[1]||(t[1]=e=>Y(0))},{default:s((()=>[n(_,{class:"text-[28rpx]"},{default:s((()=>[d("待结算")])),_:1}),n(_,{class:"text-[28rpx]"},{default:s((()=>[d("("+c(l(k)(l(R).unsettlement))+")",1)])),_:1})])),_:1},8,["class"])])),_:1})])),_:1}),n(I,{ref:"mescrollRef",bottom:"100rpx",onInit:l(D),down:{use:!1},onUp:Q},{default:s((()=>[(r(!0),o(m,null,p(l(J),((e,t)=>(r(),a(F,{class:"bg-[#fff] rounded-[16rpx] p-[30rpx] sidebar-marign mt-[24rpx]",key:t},{default:s((()=>[n(F,{class:"flex items-center justify-between text-[28rpx]"},{default:s((()=>[n(_,null,{default:s((()=>[d("订单号："+c(e.order_no),1)])),_:2},1024),n(_,{class:"text-[var(--primary-color)]"},{default:s((()=>[d(c(e.is_settlement?"已结算":"未结算"),1)])),_:2},1024)])),_:2},1024),n(F,{class:"flex pt-[40rpx]"},{default:s((()=>[e.order_goods&&e.order_goods.goods_image_thumb_mid?(r(),a(u,{key:0,class:"w-[160rpx] h-[160rpx] rounded-[10rpx] shrink-0",src:l(w)(e.order_goods.goods_image_thumb_mid),mode:"aspectFill"},null,8,["src"])):(r(),a(u,{key:1,class:"w-[160rpx] h-[160rpx] rounded-[10rpx] shrink-0",src:l(w)("addon/shop_fenxiao/index/commission_rank.png"),mode:"aspectFill"},null,8,["src"])),n(F,{class:"flex flex-1 flex-col ml-[20rpx] w-[470rpx]"},{default:s((()=>[n(F,{class:"text-[28rpx] leading-[1.5]"},{default:s((()=>[n(_,null,{default:s((()=>[d(c(e.order_goods.goods_name.length>21?e.order_goods.goods_name.substr(0,21)+"...":e.order_goods.goods_name),1)])),_:2},1024),n(F,{class:"text-[#999] ml-[10rpx] inline-block whitespace-nowrap"},{default:s((()=>[n(F,{class:"flex items-center"},{default:s((()=>[n(_,null,{default:s((()=>[d("(购买人：")])),_:1}),n(F,{class:"max-w-[120rpx] truncate"},{default:s((()=>[d(c(e.shop_order.member.nickname||"-"),1)])),_:2},1024),n(_,null,{default:s((()=>[d(")")])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1024),n(F,{class:"flex items-center justify-between mt-[20rpx] text-[28rpx]"},{default:s((()=>[n(_,{class:"text-[var(--primary-color)] font-bold"},{default:s((()=>[d("￥"+c(l(k)(e.order_goods.goods_money)),1)])),_:2},1024)])),_:2},1024),e.order_goods&&1!=e.order_goods.status&&e.order_goods.status_name?(r(),a(F,{key:0,class:"mt-[20rpx] text-[24rpx] text-[#999]"},{default:s((()=>[d(c(l(j)("refundStatus"))+c(e.order_goods.status_name),1)])),_:2},1024)):i("v-if",!0)])),_:2},1024)])),_:2},1024),n(F,{class:"flex items-center justify-between mt-[40rpx] flex-wrap"},{default:s((()=>[i(' <view class="text-[24rpx] flex items-center leading-[35rpx]">\r\n\t\t\t\t\t\t\t<text>购买人：</text>\r\n\t\t\t\t\t\t\t<text class="text-[var(--primary-color)]">{{ item.shop_order.member.nickname||\'-\' }}</text>\r\n\t\t\t\t\t\t</view> '),n(F,{class:"text-[24rpx] flex items-center leading-[35rpx]"},{default:s((()=>[n(_,null,{default:s((()=>[d("计算价：")])),_:1}),n(_,{class:"text-[var(--primary-color)]"},{default:s((()=>[d("￥"+c(l(k)(e.order_goods_money)),1)])),_:2},1024)])),_:2},1024),e.calculate_type?(r(),a(F,{key:0,class:"flex items-center text-[24rpx] leading-[35rpx]"},{default:s((()=>[n(_,null,{default:s((()=>[d(c(e.calculate_type_name)+"：",1)])),_:2},1024),n(_,{class:"text-[var(--primary-color)]"},{default:s((()=>[d(c(1!=e.calculate_type?"￥"+l(k)(e.commission):e.commission_rate+"%"),1)])),_:2},1024)])),_:2},1024)):i("v-if",!0),n(F,{class:"flex items-center text-[24rpx]"},{default:s((()=>[n(_,null,{default:s((()=>[d("佣金：")])),_:1}),n(F,{class:"text-[var(--primary-color)]"},{default:s((()=>[d(c(l(k)(e.commission)||"0.00"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),l(J).length||l(L)?i("v-if",!0):(r(),a(z,{key:0,option:{icon:l(w)("static/resource/images/empty.png")}},null,8,["option"]))])),_:1},8,["onInit"])],64)),n(M,{"bg-color":"rgb(248,248,248)",loading:l(K),loadingText:"",fontSize:"16",color:"#333"},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-59b8ac13"]]);export{E as default};
