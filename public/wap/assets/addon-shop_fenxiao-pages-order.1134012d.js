import{d as e,r as t,o as r,c as l,w as s,u as a,E as o,b as n,x as d,y as c,f as i,H as x,G as m,F as p,n as u,a5 as f,a6 as _,N as g,C as y,i as b,g as v,h,V as w,$ as k,t as j}from"./index-656dc629.js";import{_ as C}from"./u-loading-page.f8275a02.js";import{M as F}from"./mescroll-body.cb3f7eec.js";import{M as z}from"./mescroll-empty.966dc165.js";import{u as I}from"./useMescroll.26ccf5de.js";import{h as M,i as S,f as D}from"./fenxiao.6f2151fd.js";import{_ as E}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.5e5c27a0.js";import"./u-transition.825c0e35.js";import"./mescroll-uni-option.de83ded3.js";import"./mescroll-i18n.6025c811.js";/* empty css                                                                       */const H=E(e({__name:"order",setup(e){const{mescrollInit:E,downCallback:H,getMescroll:U}=I(_,f);let A=t([]),G=t(!0),N=t(!0);const R=e=>{let t={is_settlement:q.value,page:e.num,limit:e.size};N.value=!0,M(t).then((t=>{let r=t.data.data;1==e.num&&(A.value=[]),A.value=A.value.concat(r),N.value=!1,e.endSuccess(r.length)})).catch((()=>{N.value=!1,e.endErr()}))};let T=t({});const V=()=>{S().then((e=>{T.value=e.data}))};V();let $=t({});G.value=!0,D().then((e=>{$.value=e.data,G.value=!1}));let q=t(1);const B=e=>{q.value=e,A.value=[],U().resetUpScroll(),V()};return(e,t)=>{const f=g,_=y,I=b,M=v(h("u-loading-page"),C);return r(),l(I,{class:"bg-[#f8f8f8] min-h-[100vh]",style:u(e.themeColor())},{default:s((()=>[a(G)?i("v-if",!0):(r(),o(m,{key:0},[n(I,{class:"flex items-center order-bg-wrap p-[40rpx]"},{default:s((()=>[a($).member&&a($).member.headimg?(r(),l(f,{key:0,class:"w-[90rpx] h-[90rpx] rounded-full mr-[20rpx]",src:a(w)(a($).member.headimg),mode:"aspectFill"},null,8,["src"])):(r(),l(f,{key:1,class:"w-[90rpx] h-[90rpx] rounded-full mr-[20rpx]",src:a(w)("addon/shop_fenxiao/index/head.png"),mode:"aspectFill"},null,8,["src"])),n(I,{class:"flex flex-col"},{default:s((()=>[n(I,{class:"flex items-center"},{default:s((()=>[n(_,{class:"truncate max-w-[380rpx] text-[#fff] mr-[10rpx] text-[28rpx]"},{default:s((()=>[d(c(a($).member.nickname||a($).member.username),1)])),_:1}),a($).fenxiao_level?(r(),l(_,{key:0,class:"text-[#fff] text-[24rpx] border-[2rpx] border-solid border-[#fff] px-[6rpx] py-[8rpx] whitespace-nowrap"},{default:s((()=>[d(c(a($).fenxiao_level.level_name),1)])),_:1})):i("v-if",!0)])),_:1})])),_:1})])),_:1}),n(I,{class:"bg-[#fff] sticky top-[0] z-10"},{default:s((()=>[n(I,{class:"flex whitespace-nowrap justify-around overflow-hidden"},{default:s((()=>[n(I,{class:x(["text-center mx-[60rpx] justify-center flex flex-1 items-center h-[90rpx] border-0 border-b-[2rpx] border-solid border-[transparent]",{"!border-[var(--primary-color)] text-[var(--primary-color)]":1==a(q)}]),onClick:t[0]||(t[0]=e=>B(1))},{default:s((()=>[n(_,{class:"text-[28rpx]"},{default:s((()=>[d("已结算")])),_:1}),n(_,{class:"text-[28rpx]"},{default:s((()=>[d("("+c(a(k)(a(T).fenxiao_commission))+")",1)])),_:1})])),_:1},8,["class"]),n(I,{class:x(["text-sm mx-[60rpx] text-center justify-center flex items-center flex-1 h-[90rpx] border-0 border-b-[2rpx] border-solid border-[transparent]",{"!border-[var(--primary-color)] text-[var(--primary-color)]":0==a(q)}]),onClick:t[1]||(t[1]=e=>B(0))},{default:s((()=>[n(_,{class:"text-[28rpx]"},{default:s((()=>[d("待结算")])),_:1}),n(_,{class:"text-[28rpx]"},{default:s((()=>[d("("+c(a(k)(a(T).unsettlement))+")",1)])),_:1})])),_:1},8,["class"])])),_:1})])),_:1}),n(F,{ref:"mescrollRef",onInit:a(E),onDown:a(H),onUp:R},{default:s((()=>[(r(!0),o(m,null,p(a(A),((e,t)=>(r(),l(I,{class:"bg-[#fff] rounded-[16rpx] p-[30rpx] mx-[24rpx] mt-[24rpx]",key:t},{default:s((()=>[n(I,{class:"flex items-center justify-between text-[28rpx]"},{default:s((()=>[n(_,null,{default:s((()=>[d("订单号："+c(e.order_no),1)])),_:2},1024),n(_,{class:"text-[var(--primary-color)]"},{default:s((()=>[d(c(e.is_settlement?"已结算":"未结算"),1)])),_:2},1024)])),_:2},1024),n(I,{class:"flex pt-[40rpx]"},{default:s((()=>[e.order_goods&&e.order_goods.goods_image_thumb_mid?(r(),l(f,{key:0,class:"w-[160rpx] h-[160rpx] rounded-[10rpx] shrink-0",src:a(w)(e.order_goods.goods_image_thumb_mid),mode:"aspectFill"},null,8,["src"])):(r(),l(f,{key:1,class:"w-[160rpx] h-[160rpx] rounded-[10rpx] shrink-0",src:a(w)("addon/shop_fenxiao/index/commission_rank.png"),mode:"aspectFill"},null,8,["src"])),n(I,{class:"flex flex-1 flex-col ml-[20rpx] w-[470rpx]"},{default:s((()=>[n(I,{class:"text-[28rpx] leading-[1.5]"},{default:s((()=>[n(_,null,{default:s((()=>[d(c(e.order_goods.goods_name.length>21?e.order_goods.goods_name.substr(0,21)+"...":e.order_goods.goods_name),1)])),_:2},1024),n(I,{class:"text-[#999] ml-[10rpx] inline-block whitespace-nowrap"},{default:s((()=>[n(I,{class:"flex items-center"},{default:s((()=>[n(_,null,{default:s((()=>[d("(购买人：")])),_:1}),n(I,{class:"max-w-[120rpx] truncate"},{default:s((()=>[d(c(e.shop_order.member.nickname||"-"),1)])),_:2},1024),n(_,null,{default:s((()=>[d(")")])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1024),n(I,{class:"flex items-center justify-between mt-[20rpx] text-[28rpx]"},{default:s((()=>[n(_,{class:"text-[var(--primary-color)] font-bold"},{default:s((()=>[d("￥"+c(a(k)(e.order_goods.goods_money)),1)])),_:2},1024)])),_:2},1024),e.order_goods&&1!=e.order_goods.status&&e.order_goods.status_name?(r(),l(I,{key:0,class:"mt-[20rpx] text-[24rpx] text-[#999]"},{default:s((()=>[d(c(a(j)("refundStatus"))+c(e.order_goods.status_name),1)])),_:2},1024)):i("v-if",!0)])),_:2},1024)])),_:2},1024),n(I,{class:"flex items-center justify-between mt-[40rpx] flex-wrap"},{default:s((()=>[i(' <view class="text-[24rpx] flex items-center leading-[35rpx]">\r\n\t\t\t\t\t\t\t<text>购买人：</text>\r\n\t\t\t\t\t\t\t<text class="text-[var(--primary-color)]">{{ item.shop_order.member.nickname||\'-\' }}</text>\r\n\t\t\t\t\t\t</view> '),n(I,{class:"text-[24rpx] flex items-center leading-[35rpx]"},{default:s((()=>[n(_,null,{default:s((()=>[d("计算价：")])),_:1}),n(_,{class:"text-[var(--primary-color)]"},{default:s((()=>[d("￥"+c(a(k)(e.order_goods_money)),1)])),_:2},1024)])),_:2},1024),e.calculate_type?(r(),l(I,{key:0,class:"flex items-center text-[24rpx] leading-[35rpx]"},{default:s((()=>[n(_,null,{default:s((()=>[d(c(e.calculate_type_name)+"：",1)])),_:2},1024),n(_,{class:"text-[var(--primary-color)]"},{default:s((()=>[d(c(1!=e.calculate_type?"￥"+a(k)(e.commission):e.commission_rate+"%"),1)])),_:2},1024)])),_:2},1024)):i("v-if",!0),n(I,{class:"flex items-center text-[24rpx]"},{default:s((()=>[n(_,null,{default:s((()=>[d("佣金：")])),_:1}),n(I,{class:"text-[var(--primary-color)]"},{default:s((()=>[d(c(a(k)(e.commission)||"0.00"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),a(A).length||a(N)?i("v-if",!0):(r(),l(z,{key:0,option:{icon:a(w)("static/resource/images/empty.png")}},null,8,["option"]))])),_:1},8,["onInit","onDown"])],64)),n(M,{"bg-color":"rgb(248,248,248)",loading:a(G),loadingText:"",fontSize:"16",color:"#333"},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-9723b19c"]]);export{H as default};
