import{d as e,r as t,N as a,F as l,o as r,c as o,w as s,b as c,A as n,f as i,Q as u,y as x,O as p,a6 as d,P as m,u as f,n as v,a7 as _,a8 as g,D as h,a4 as y,i as b,g as j,h as k,E as w,z as C,a as V,B as F}from"./index-2882a2d8.js";import{_ as M}from"./tabbar.f422f3d5.js";import{b as U}from"./point.9d4b8565.js";import{M as E}from"./mescroll-body.e69cb222.js";import{M as I}from"./mescroll-empty.7f392528.js";import{u as N}from"./useMescroll.26ccf5de.js";import{_ as S}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.1104ad2f.js";import"./u-badge.e8ba7dff.js";import"./u-tabbar.b113c065.js";import"./u-safe-bottom.f13b01b8.js";import"./mescroll-i18n.c2747603.js";/* empty css                                                                       */const T=S(e({__name:"list",setup(e){const{mescrollInit:S,downCallback:T,getMescroll:z}=N(g,_),Q=t([]),R=t(""),A=t(""),B=t(null),D=t(!1),O=t(""),P=t(""),$=t(""),q=t("total_order_num"),G=e=>{D.value=!1;let t={goods_category:A.value,page:e.num,limit:e.size,names:O.value,coupon_id:R.value,order:"total_order_num"===q.value?"":q.value,sort:"price"==q.value?P.value:$.value};U(t).then((t=>{let a=t.data.data;1===Number(e.num)&&(Q.value=[]),Q.value=Q.value.concat(a),e.endSuccess(a.length),D.value=!0})).catch((()=>{D.value=!0,e.endErr()}))},H=e=>{q.value=e,"total_order_num"==e&&($.value="",P.value=""),"price"==e&&($.value="",P.value?P.value="asc"==P.value?"desc":"asc":P.value="asc"),"total_exchange_num"==e&&(P.value="",$.value?$.value="asc"==$.value?"desc":"asc":$.value="asc"),Q.value=[],z().resetUpScroll()};return a((()=>{setTimeout((()=>{z().optUp.textNoMore=l("end")}),500)})),(e,t)=>{const a=h,l=y,_=b,g=F,U=j(k("tabbar"),M);return r(),o(_,{class:"bg-[var(--page-bg-color)] min-h-[100vh]",style:v(e.themeColor())},{default:s((()=>[c(_,{class:"fixed left-0 right-0 top-0 product-warp bg-[#fff]"},{default:s((()=>[c(_,{class:"py-[14rpx] flex items-center justify-between px-[20rpx]"},{default:s((()=>[c(_,{class:"flex-1 search-input"},{default:s((()=>[c(a,{onClick:t[0]||(t[0]=n((e=>H("all")),["stop"])),class:"nc-iconfont nc-icon-sousuo-duanV6xx1 btn"}),c(l,{class:"input",maxlength:"50",type:"text",modelValue:O.value,"onUpdate:modelValue":t[1]||(t[1]=e=>O.value=e),placeholder:"请搜索您想要的商品",placeholderClass:"text-[var(--text-color-light9)]","confirm-type":"search",onConfirm:t[2]||(t[2]=e=>H("all"))},null,8,["modelValue"]),O.value?(r(),o(a,{key:0,class:"nc-iconfont nc-icon-cuohaoV6xx1 clear",onClick:t[3]||(t[3]=e=>O.value="")})):i("v-if",!0)])),_:1})])),_:1}),c(_,{class:"h-[88rpx] px-[30rpx]"},{default:s((()=>[c(_,{class:"flex items-center text-[26rpx] text-[var(--text-color-light6)] h-[88rpx]"},{default:s((()=>[c(a,{class:u(["mr-[120rpx]",{"!text-[var(--primary-color)] font-500":"total_order_num"==q.value}]),onClick:t[4]||(t[4]=e=>H("total_order_num"))},{default:s((()=>[x("综合排序")])),_:1},8,["class"]),c(_,{class:"flex items-center mr-[120rpx]",onClick:t[5]||(t[5]=e=>H("total_exchange_num"))},{default:s((()=>[c(a,{class:u(["mr-[4rpx]",{"!text-[var(--primary-color)] font-500":"total_exchange_num"==q.value}])},{default:s((()=>[x("销量")])),_:1},8,["class"]),"asc"==$.value?(r(),o(a,{key:0,class:u(["text-[16rpx] text-[var(--text-color-light6)] nc-iconfont nc-icon-a-xiangshangV6xx1",{"!text-[var(--primary-color)]":"total_exchange_num"==q.value}])},null,8,["class"])):(r(),o(a,{key:1,class:u(["text-[16rpx] text-[var(--text-color-light6)] nc-iconfont nc-icon-a-xiangxiaV6xx1",{"!text-[var(--primary-color)]":"total_exchange_num"==q.value}])},null,8,["class"]))])),_:1}),c(_,{class:"flex items-center",onClick:t[6]||(t[6]=e=>H("price"))},{default:s((()=>[c(a,{class:u(["mr-[4rpx]",{"!text-[var(--primary-color)] font-500":"price"==q.value}])},{default:s((()=>[x("价格")])),_:1},8,["class"]),"asc"==P.value?(r(),o(a,{key:0,class:u(["text-[16rpx] text-[var(--text-color-light6)] nc-iconfont nc-icon-a-xiangshangV6xx1",{"!text-[var(--primary-color)]":"price"==q.value}])},null,8,["class"])):(r(),o(a,{key:1,class:u(["text-[16rpx] text-[var(--text-color-light6)] nc-iconfont nc-icon-a-xiangxiaV6xx1",{"!text-[var(--primary-color)]":"price"==q.value}])},null,8,["class"]))])),_:1})])),_:1})])),_:1})])),_:1}),c(E,{ref_key:"mescrollRef",ref:B,top:"176rpx",bottom:"60px",onInit:f(S),down:{use:!1},onUp:G},{default:s((()=>[Q.value.length?(r(),o(_,{key:0,class:"sidebar-marign flex justify-between flex-wrap"},{default:s((()=>[(r(!0),p(m,null,d(Q.value,((e,t)=>(r(),o(_,{class:"goods-item-style-two flex flex-col bg-[#fff] box-border rounded-[var(--rounded-mid)] overflow-hidden mt-[var(--top-m)]",onClick:t=>{return a=e.id,void V({url:"/addon/shop/pages/point/detail",param:{id:a},mode:"navigateTo"});var a}},{default:s((()=>[i(' <u--image width="100%" height="350rpx" :src="img(item.goods_cover_thumb_mid ? item.goods_cover_thumb_mid : \'\')" model="aspectFill">\r\n\t\t\t\t\t\t\t<template #error>\r\n\t\t\t\t\t\t\t\t<image class="w-[100%] h-[350rpx]" :src="img(\'static/resource/images/diy/shop_default.jpg\')" mode="aspectFill"></image>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</u--image> '),e.goods_cover_thumb_mid?(r(),o(g,{key:0,class:"w-[100%] h-[350rpx] rounded-tl-[var(--rounded-mid)] rounded-tr-[var(--rounded-mid)]",src:f(w)(e.goods_cover_thumb_mid),mode:"aspectFill",onError:t=>e.goods_cover_thumb_mid="static/resource/images/diy/shop_default.jpg"},null,8,["src","onError"])):(r(),o(g,{key:1,class:"w-[100%] h-[350rpx] rounded-tl-[var(--rounded-mid)] rounded-tr-[var(--rounded-mid)]",src:f(w)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])),c(_,{class:"px-[16rpx] flex-1 pt-[10rpx] pb-[20rpx] flex flex-col justify-between"},{default:s((()=>[c(_,{class:"text-[] leading-[40rpx] text-[28rpx] multi-hidden"},{default:s((()=>[x(C(e.names),1)])),_:2},1024),c(_,{class:"text-[24rpx] font-400 leading-[34rpx] mt-[10rpx] text-[var(--text-color-light9)]"},{default:s((()=>[x("已兑"+C(e.total_exchange_num)+"人",1)])),_:2},1024),c(_,{class:"flex justify-between flex-wrap items-center mt-[16rpx]"},{default:s((()=>[c(_,{class:"flex flex-col"},{default:s((()=>[c(_,{class:"text-[var(--price-text-color)] price-font ml-[2rpx] flex items-center"},{default:s((()=>[c(a,{class:"text-[32rpx]"},{default:s((()=>[x(C(e.point),1)])),_:2},1024),c(a,{class:"text-[26rpx] ml-[4rpx]"},{default:s((()=>[x("积分")])),_:1})])),_:2},1024),e.price&&e.price>0?(r(),o(_,{key:0,class:"flex items-center price-font mt-[6rpx]"},{default:s((()=>[c(a,{class:"text-[var(--price-text-color)] font-400 text-[32rpx]"},{default:s((()=>[x("+"+C(parseFloat(e.price).toFixed(2)),1)])),_:2},1024),c(a,{class:"text-[var(--price-text-color)] font-400 ml-[4rpx] text-[20rpx]"},{default:s((()=>[x("元")])),_:1})])),_:2},1024)):i("v-if",!0)])),_:2},1024),c(_,{class:"w-[120rpx] h-[54rpx] text-[22rpx] flex-center !text-[#fff] m-0 rounded-full primary-btn-bg remove-border text-center",shape:"circle"},{default:s((()=>[x("去兑换")])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})):i("v-if",!0),!Q.value.length&&D.value?(r(),o(I,{key:1,option:{tip:"暂无商品"}})):i("v-if",!0)])),_:1},8,["onInit"]),c(U)])),_:1},8,["style"])}}}),[["__scopeId","data-v-95fb471f"]]);export{T as default};
