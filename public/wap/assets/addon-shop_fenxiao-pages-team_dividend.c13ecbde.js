import{bG as e,d as a,r as t,p as l,o as s,c as r,w as o,U as d,b as n,u,y as c,z as i,f as m,W as p,V as f,ad as _,n as x,ae as v,af as g,B as h,D as y,i as b,g as k,h as w,E as j,a7 as C,F,_ as I}from"./index-71c7df08.js";import{_ as M}from"./loading-page.vue_vue_type_script_setup_true_lang.c7dc2256.js";import{M as S}from"./mescroll-body.49de0f6f.js";import{M as U}from"./mescroll-empty.95b8c17e.js";import{u as z}from"./useMescroll.26ccf5de.js";import{f as E}from"./fenxiao.04341d50.js";import"./mescroll-i18n.00218d15.js";/* empty css                                                                       */const N=I(a({__name:"team_dividend",setup(a){const{mescrollInit:I,downCallback:N,getMescroll:R}=z(g,v),B=t("");l((async()=>{await e.get("shop_fenxiao/order/team/config").then((e=>{B.value=e.data.is_open}))}));const D=t([]),G=t(!0),O=t(!0),P=a=>{let t={is_settlement:q.value,page:a.num,limit:a.size};var l;O.value=!0,(l=t,e.get("shop_fenxiao/order/team",l)).then((e=>{let t=e.data.data;1==a.num&&(D.value=[]),D.value=D.value.concat(t),O.value=!1,a.endSuccess(t.length)})).catch((()=>{O.value=!1,a.endErr()}))},Q=t({}),V=()=>{e.get("shop_fenxiao/order/team/stat").then((e=>{Q.value=e.data}))};V();const W=t({});G.value=!0,E().then((e=>{W.value=e.data,G.value=!1}));const q=t(1),A=e=>{q.value=e,D.value=[],R().resetUpScroll(),V()};return(e,a)=>{const t=h,l=y,v=b,g=k(w("loading-page"),M);return s(),r(v,{class:"bg-[#f8f8f8] min-h-[100vh] team-dividend",style:x(e.themeColor())},{default:o((()=>[G.value||1!=B.value?m("v-if",!0):(s(),d(f,{key:0},[n(v,{class:"flex items-center wrap-bg p-[40rpx]"},{default:o((()=>[W.value.member&&W.value.member.headimg?(s(),r(t,{key:0,class:"w-[90rpx] h-[90rpx] rounded-full mr-[20rpx]",src:u(j)(W.value.member.headimg),mode:"aspectFill"},null,8,["src"])):(s(),r(t,{key:1,class:"w-[90rpx] h-[90rpx] rounded-full mr-[20rpx]",src:u(j)("addon/shop_fenxiao/index/head.png"),mode:"aspectFill"},null,8,["src"])),n(v,{class:"flex flex-col"},{default:o((()=>[n(v,{class:"flex items-center"},{default:o((()=>[n(l,{class:"truncate max-w-[380rpx] mr-[10rpx] text-[30rpx] font-500 text-[#fff]"},{default:o((()=>[c(i(W.value.member.nickname||W.value.member.username),1)])),_:1}),W.value.fenxiao_level?(s(),r(l,{key:0,class:"bg-primary-light !text-[var(--primary-color)] !text-[22rpx] px-[10rpx] h-[36rpx] ml-[10rpx] tag-item"},{default:o((()=>[c(i(W.value.fenxiao_level.level_name),1)])),_:1})):m("v-if",!0)])),_:1}),W.value.fenxiao_level?(s(),r(l,{key:0,class:"text-[#fff] text-[24rpx] mt-[14rpx]"},{default:o((()=>[c("团队分红比率 "+i(W.value.fenxiao_level.team_rate)+"%",1)])),_:1})):m("v-if",!0)])),_:1})])),_:1}),n(v,{class:"tab-style-3"},{default:o((()=>[n(v,{class:p(["tab-items",{"class-select":1==q.value}]),onClick:a[0]||(a[0]=e=>A(1))},{default:o((()=>[n(l,null,{default:o((()=>[c("已结算")])),_:1}),n(l,null,{default:o((()=>[c("("+i(u(C)(Q.value.team_commission))+")",1)])),_:1})])),_:1},8,["class"]),n(v,{class:p(["tab-items",{"class-select":0==q.value}]),onClick:a[1]||(a[1]=e=>A(0))},{default:o((()=>[n(l,{class:"text-[28rpx]"},{default:o((()=>[c("待结算")])),_:1}),n(l,{class:"text-[28rpx]"},{default:o((()=>[c("("+i(u(C)(Q.value.unsettlement))+")",1)])),_:1})])),_:1},8,["class"])])),_:1}),n(S,{ref:"mescrollRef",onInit:u(I),down:{use:!1},onUp:P},{default:o((()=>[D.value.length?(s(),r(v,{key:0,class:"pt-[var(--top-m)]"},{default:o((()=>[(s(!0),d(f,null,_(D.value,((e,a)=>(s(),r(v,{class:"sidebar-margin mb-[var(--top-m)] card-template",key:a},{default:o((()=>[n(v,{class:"flex items-center justify-between text-[26rpx] leading-[36rpx] text-[#333]"},{default:o((()=>[n(v,null,{default:o((()=>[n(l,null,{default:o((()=>[c(i(u(F)("orderNo"))+":",1)])),_:1}),n(l,{class:"ml-[10rpx]"},{default:o((()=>[c(i(e.order_no),1)])),_:2},1024)])),_:2},1024),n(l,{class:"text-[var(--text-color-light6)]"},{default:o((()=>[c(i(e.is_settlement?"已结算":"未结算"),1)])),_:2},1024)])),_:2},1024),n(v,{class:"flex pt-[20rpx]"},{default:o((()=>[e.order_goods&&e.order_goods.goods_image_thumb_mid?(s(),r(t,{key:0,class:"w-[180rpx] h-[180rpx] rounded-[var(--goods-rounded-big)]",src:u(j)(e.order_goods.goods_image_thumb_mid),mode:"aspectFill"},null,8,["src"])):(s(),r(t,{key:1,class:"w-[180rpx] h-[180rpx] rounded-[var(--goods-rounded-big)]",src:u(j)("addon/shop_fenxiao/index/commission_rank.png"),mode:"aspectFill"},null,8,["src"])),n(v,{class:"flex flex-1 flex-col ml-[20rpx] pb-[6rpx]"},{default:o((()=>[n(v,{class:"w-[462rpx] text-[28rpx] truncate leading-[1.5]"},{default:o((()=>[c(i(e.order_goods.goods_name),1)])),_:2},1024),n(v,{class:"text-[var(--text-color-light6)] flex items-center whitespace-nowrap mt-[20rpx] text-[24rpx]"},{default:o((()=>[n(l,null,{default:o((()=>[c("购买人：")])),_:1}),n(v,{class:"max-w-[120rpx] truncate"},{default:o((()=>[c(i(e.shop_order.member.nickname||"-"),1)])),_:2},1024)])),_:2},1024),n(v,{class:"flex justify-between items-center mt-[auto] pb-[6rpx]"},{default:o((()=>[n(v,{class:"text-[var(--price-text-color)] price-font font-500 inline-block leading-[1]"},{default:o((()=>[n(l,{class:"text-[22rpx] mr-[4rpx]"},{default:o((()=>[c("￥")])),_:1}),n(l,{class:"text-[36rpx]"},{default:o((()=>[c(i(u(C)(e.order_goods.goods_money).split(".")[0]),1)])),_:2},1024),n(l,{class:"text-[22rpx]"},{default:o((()=>[c("."+i(u(C)(e.order_goods.goods_money).split(".")[1]),1)])),_:2},1024)])),_:2},1024),e.order_goods&&1!=e.order_goods.status&&e.order_goods.status_name?(s(),r(v,{key:0,class:"text-[24rpx] text-[var(--text-color-light9)]"},{default:o((()=>[c(i(u(F)("refundStatus"))+i(e.order_goods.status_name),1)])),_:2},1024)):m("v-if",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024),n(v,{class:"flex items-center justify-between mt-[20rpx] flex-wrap"},{default:o((()=>[n(v,{class:"flex items-center text-[24rpx] leading-[35rpx]"},{default:o((()=>[n(l,{class:"mr-[4rpx]"},{default:o((()=>[c("分红比率:")])),_:1}),e.commission_rate||e.team_flat_rate?(s(),r(v,{key:0,class:"text-[var(--price-text-color)]"},{default:o((()=>[c(i(e.team_flat_rate>0?e.team_flat_rate+"%(平级分红比率)":e.commission_rate+"%"),1)])),_:2},1024)):(s(),r(v,{key:1,class:"flex items-center"},{default:o((()=>[c("--")])),_:1}))])),_:2},1024),n(v,{class:"text-[24rpx] flex items-center leading-[35rpx]"},{default:o((()=>[n(l,{class:"mr-[4rpx]"},{default:o((()=>[c("佣金:")])),_:1}),n(l,{class:"text-[var(--price-text-color)]"},{default:o((()=>[c(i(u(C)(e.commission)||"0.00"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):m("v-if",!0),D.value.length||O.value?m("v-if",!0):(s(),r(U,{key:1,option:{icon:u(j)("static/resource/images/empty.png")}},null,8,["option"]))])),_:1},8,["onInit"])],64)),0!=B.value||G.value?m("v-if",!0):(s(),r(v,{key:1,class:"pt-[var(--top-m)] footer"},{default:o((()=>[n(U,{option:{tip:"团队分红设置未开启"}})])),_:1})),n(g,{loading:G.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-b166034b"]]);export{N as default};
