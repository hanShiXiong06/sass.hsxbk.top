import{d as e,r as a,j as t,I as r,a as l,o as s,c as d,w as o,u as n,E as x,b as i,x as f,n as u,y as p,f as _,G as c,F as m,g as b,h as g,i as v,ab as h,C as w,V as y,$ as j,H as k}from"./index-656dc629.js";import{_ as C}from"./u--image.8451ef47.js";import{_ as N}from"./u-loading-page.f8275a02.js";import{c as I}from"./sale.793cbe2c.js";import{b as T}from"./fenxiao.6f2151fd.js";import{_ as z}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.38c45e12.js";import"./u-icon.286409fc.js";import"./u-transition.825c0e35.js";import"./u-loading-icon.5e5c27a0.js";const F=z(e({__name:"sale_detail",setup(e){const z=a({}),F=a([]);t((e=>{e.id?E(Number(e.id)):(r({title:"缺少销售奖励id",icon:"none"}),setTimeout((()=>{l({url:"/addon/shop_fenxiao/pages/sale",mode:"redirectTo"})}),1e3))}));let H=a(!0);const E=e=>{I(e).then((a=>{z.value.id=e,z.value.is_settlement=a.data.is_settlement,z.value.order_money=a.data.order_money,z.value.reward_money=z.value.is_settlement?a.data.reward_money:a.data.diff_data.now_reward,z.value.sale_start_time=a.data.sale_start_time,z.value.sale_end_time=a.data.sale_end_time,z.value.is_settlement||(z.value.diff_data=a.data.diff_data),G()})).catch((()=>{H.value=!1}))},G=()=>{T().then((e=>{z.value.condition_order_money=e.data.sale_config.condition.order_money,F.value=e.data.sale_config.reward.map(((a,t)=>(a.title=t?Number(e.data.sale_config.reward[t-1].end)+1!=Number(a.end)?"第 "+(Number(e.data.sale_config.reward[t-1].end)+1)+"-"+a.end:"第 "+a.end:a.end>1?"前 "+a.end:"第 "+a.end,a))),H.value=!1})).catch((e=>{H.value=!1}))},L=()=>{l({url:"/addon/shop_fenxiao/pages/sale_ranking",param:{id:z.value.id}})},S=()=>{l({url:"/addon/shop/pages/index",mode:"reLaunch"})};return(e,a)=>{const t=b(g("u--image"),C),r=v,l=h,I=w,T=b(g("u-loading-page"),N);return s(),d(r,{class:"bg-[#f8f8f8] min-h-[100vh]",style:u(e.themeColor())},{default:o((()=>[n(H)?_("v-if",!0):(s(),x(c,{key:0},[i(r,{class:"w-[100%] h-[960rpx] relative background-size box-border",style:u({backgroundImage:"url("+n(y)("addon/shop_fenxiao/sale-detail-header.png")+")"})},{default:o((()=>[i(r,{class:"absolute top-[105rpx] left-0 right-0 flex justify-center"},{default:o((()=>[i(t,{width:"341rpx",height:"63rpx",src:n(y)("addon/shop_fenxiao/sale-detail-title.png"),model:"aspectFill"},null,8,["src"])])),_:1}),i(r,{class:"absolute top-[24rpx] right-[24rpx] text-[24rpx] text-[#fdf6ec] leading-[35rpx] h-[35rpx] bg-[rgba(0,0,0,0.2)] px-[17.5rpx] rounded-[17.5rpx]",onClick:L},{default:o((()=>[f("排行榜")])),_:1})])),_:1},8,["style"]),i(r,{class:"p-[24rpx] relative mt-[-560rpx] box-border"},{default:o((()=>[i(r,{class:"w-full box-border bg-[#fff] rounded-[10rpx] overflow-hidden"},{default:o((()=>[i(r,{class:"flex items-center justify-between bg-[#fdf6ec] px-[24rpx]"},{default:o((()=>[i(r,{class:"text-[30rpx] font-600 text-[#b88230] leading-[80rpx] flex-shrink-0"},{default:o((()=>[f("当前业绩")])),_:1}),i(r,{class:"flex items-center"},{default:o((()=>[i(r,{class:"text-[22rpx] text-[#b88230]"},{default:o((()=>[f("本次奖励周期：")])),_:1}),i(r,{class:"flex flex-col"},{default:o((()=>[i(r,{class:"text-[22rpx] text-[#b88230] leading-[30rpx]"},{default:o((()=>[f(p(z.value.sale_start_time),1)])),_:1}),i(r,{class:"text-[22rpx] text-[#b88230] leading-[30rpx]"},{default:o((()=>[f(p(z.value.sale_end_time),1)])),_:1})])),_:1})])),_:1})])),_:1}),i(r,{class:"w-full p-[35rpx] pt-[50rpx] flex justify-between box-border"},{default:o((()=>[i(r,{class:"max-w-[50%] flex-shrink-0 box-border px-[24rpx]"},{default:o((()=>[i(r,{class:"text-[24rpx] text-[#999] text-center"},{default:o((()=>[f("个人奖金（元）")])),_:1}),i(r,{class:"text-[50rpx] font-600 text-center mt-[10rpx]"},{default:o((()=>[f(p(n(j)(z.value.reward_money)),1)])),_:1})])),_:1}),i(r,{class:"max-w-[50%] flex-shrink-0 box-border px-[24rpx]"},{default:o((()=>[i(r,{class:"text-[24rpx] text-[#999] text-center"},{default:o((()=>[f("团队销售（元）")])),_:1}),i(r,{class:"text-[50rpx] font-600 text-center mt-[10rpx]"},{default:o((()=>[f(p(n(j)(z.value.order_money)),1)])),_:1})])),_:1})])),_:1}),!z.value.is_settlement&&z.value.diff_data.diff_order_money?(s(),d(r,{key:0,class:"w-full mt-[24rpx] flex justify-center"},{default:o((()=>[i(r,{class:"bg-[#fdf6ec] text-[24rpx] text-[#eebe77] h-[50rpx] leading-[50rpx] px-[25rpx] rounded-[25rpx]"},{default:o((()=>[f(" 再卖"+p(z.value.diff_data.diff_order_money)+"元可获得"+p(n(j)(z.value.diff_data.prev_reward))+"元 ",1)])),_:1})])),_:1})):_("v-if",!0),i(r,{class:"w-full pt-[24rpx] pb-[45rpx] flex justify-center"},{default:o((()=>[i(l,{class:"w-[538rpx] h-[80rpx] text-[32rpx] leading-[80rpx] rounded-[40rpx] !text-[#fff] m-0 wechat remove-border",shape:"circle",onClick:S},{default:o((()=>[f("去推广商品")])),_:1})])),_:1})])),_:1}),i(r,{class:"w-full px-[24rpx] box-border bg-[#fff] rounded-[10rpx] overflow-hidden mt-[24rpx]"},{default:o((()=>[i(r,{class:"text-[30rpx] font-600 py-[24rpx]"},{default:o((()=>[i(I,null,{default:o((()=>[f("排名奖励规则")])),_:1}),i(I,{class:"text-[22rpx] text-[#999]"},{default:o((()=>[f("（参与门槛：团队销售额"+p(n(j)(z.value.condition_order_money))+"元）",1)])),_:1})])),_:1}),(s(!0),x(c,null,m(F.value,((e,a)=>(s(),d(r,{class:k(["text-[26rpx] py-[24rpx] border-0 border-solid border-[#ddd]",{"border-b-[1rpx]":a!=F.value.length-1}])},{default:o((()=>[f("团队销售"+p(e.title)+" 名，奖金 "+p(n(j)(e.reward.commission))+" 元",1)])),_:2},1032,["class"])))),256))])),_:1})])),_:1})],64)),i(T,{"bg-color":"rgb(248,248,248)",loading:n(H),loadingText:"",fontSize:"16",color:"#333"},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-f2375426"]]);export{F as default};
