import{_ as e}from"./u-swiper.05fa8b7a.js";import{d as t,r as l,l as a,j as s,p as n,E as c,o as r,c as o,w as u,u as i,b as d,y as x,z as f,f as p,c5 as _,O as m,a6 as g,P as b,n as v,g as h,h as y,i as k,D as w,c9 as F,a5 as j,s as C,H as P,a as D,B as S,C as V}from"./index-9317da28.js";import{_ as E}from"./u-popup.1f2ebcae.js";import{_ as I}from"./u-parse.49c1d8b5.js";import{_ as z}from"./u-loading-page.de89bca9.js";import{r as A}from"./tourism.d4c34c72.js";import{_ as B}from"./share-poster.025b3e61.js";import{_ as U}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.aabe3d05.js";/* empty css                                                                       */import"./u-transition.65be38eb.js";import"./u-icon.5e775659.js";import"./u-safe-bottom.3546c5bb.js";const H=U(t({__name:"detail",setup(t){let U=l([]),H=l([]),L=l(!0),M=l(""),O=l(!1),R=l([]),T=l(!1),Y=l("");const q=a(),G=s((()=>q.info));n((e=>{L.value=!0,A(e.scenic_id).then((t=>{M.value=e.scenic_id,H.value=t.data,R.value.push({id:1,latitude:H.value.latitude,longitude:H.value.longitude,iconPath:c("addon/tourism/tourism/map_icon.png"),height:25}),U.value=[],H.value.image_thumb_big&&H.value.image_thumb_big.length?H.value.image_thumb_big.forEach(((e,t)=>{U.value.push(c(e))})):U.value.push(c(H.value.cover_thumb_big)),W(),L.value=!1})).catch((()=>{L.value=!1}))}));let J=l({ticket_id:"",reserve_time:(e=>{let t=e.getFullYear(),l=e.getMonth()+1,a=e.getDate();return""+(t+"-"+(l<10?"0"+l:l)+"-"+(a<10?"0"+a:a))})(((e,t="")=>{var l=864e5*e;return t?new Date(t+l):new Date(Date.now()+l)})(0)),num:1,scenic_id:M});let K=l(null),N=l(""),Q={};const W=()=>{N.value="?scenic_id="+H.value.scenic_id,G.value&&G.value.member_id&&(N.value+="&mid="+G.value.member_id)},X=()=>{Q.scenic_id=H.value.scenic_id,G.value&&G.value.member_id&&(Q.member_id=G.value.member_id),K.value.openShare()};let Z=e=>{let t="";return t=e.member_discount&&C()?"member_price":"",t},$=e=>{let t="0.00";return t=e.member_discount&&C()&&e.member_price||e.price,parseFloat(t).toFixed(2)};return(t,l)=>{const a=h(y("u-swiper"),e),s=k,n=w,A=F,q=h(y("u-popup"),E),G=S,W=V,ee=h(y("u-parse"),I),te=j,le=h(y("u-loading-page"),z);return r(),o(s,{class:"bg-[#f7f7f7] min-h-screen overflow-hidden",style:v(t.themeColor())},{default:u((()=>[i(L)?p("v-if",!0):(r(),o(s,{key:0},{default:u((()=>[d(a,{list:i(U),height:"380rpx",radius:"0"},null,8,["list"]),d(s,{class:"chunk-wrap pt-4 pb-3 rounded-t-2xl relative -mt-[30rpx]"},{default:u((()=>[d(s,{class:"flex justify-between items-center"},{default:u((()=>[d(s,{class:"flex-1"},{default:u((()=>[d(s,{class:"text-[34rpx] font-bold multi-hidden leading-6"},{default:u((()=>[x(f(i(H).scenic_name),1)])),_:1}),d(s,{class:"text-xs mt-2"},{default:u((()=>[x("景点级别「"+f(i(H).scenic_level)+"星」",1)])),_:1})])),_:1}),d(s,{class:"flex flex-col items-center text-[#6D7278] ml-[40rpx] pl-[50rpx] pr-[30rpx] border-0 border-l border-solid border-[#F0F0F0]",onClick:X},{default:u((()=>[d(n,{class:"nc-iconfont nc-icon-fenxiangV6xx-1 text-lg"}),d(n,{class:"mt-1 text-xs"},{default:u((()=>[x("分享")])),_:1})])),_:1})])),_:1}),p(' <view class="flex justify-between text-[#543E3E] items-baseline mt-3">\r\n\t\t\t\t\t<view class="text-xs member-price pl-2 py-1 rounded-l-lg">\r\n\t\t\t\t\t\t<text>5.0评分</text>\r\n\t\t\t\t\t\t<text class="ml-3">风景很好</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class="text-xs flex items-center">\r\n\t\t\t\t\t\t<text>39条评论</text>\r\n\t\t\t\t\t\t<text class="nc-iconfont nc-icon-youV6xx text-[26rpx]"></text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view> '),d(s,{class:"flex mt-3"},{default:u((()=>[d(s,{class:"bg-[#F2F4F9] mr-2 py-2 px-3 rounded-md w-[240rpx] box-border"},{default:u((()=>[d(n,{class:"text-[26rpx] font-bold"},{default:u((()=>[x("营业中")])),_:1}),d(s,{class:"text-xs mt-1"},{default:u((()=>[d(n,null,{default:u((()=>[x(f(i(H).open_time),1)])),_:1}),d(n,{class:"text-[26rpx] nc-iconfont nc-icon-youV6xx"})])),_:1})])),_:1}),d(s,{class:"bg-[#F2F4F9] py-2 px-3 rounded-md flex flex-1 items-center",onClick:l[0]||(l[0]=e=>_(O)?O.value=!0:O=!0)},{default:u((()=>[d(s,{class:"flex-1"},{default:u((()=>[p(' <text class="text-[26rpx] font-bold">距您直线12.3km</text> '),d(n,{class:"text-[26rpx] font-bold"},{default:u((()=>[x("景点地址")])),_:1}),d(s,{class:"text-xs mt-1"},{default:u((()=>[d(n,null,{default:u((()=>[x(f(i(H).address),1)])),_:1}),d(n,{class:"text-[26rpx] nc-iconfont nc-icon-youV6xx"})])),_:1})])),_:1}),d(s,{class:"flex flex-col ml-3"},{default:u((()=>[d(n,{class:"nc-iconfont nc-icon-dizhiV6mm leading-[1] p-[8rpx] text-center bg-[#fff] text-[32rpx] rounded-full"}),d(n,{class:"text-xs mt-[4rpx]"},{default:u((()=>[x("地图")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),d(q,{show:i(O),onClose:l[1]||(l[1]=e=>_(O)?O.value=!1:O=!1),closeable:!0},{default:u((()=>[d(s,{class:"text-center py-[30rpx] font-bold leading-none"},{default:u((()=>[d(n,null,{default:u((()=>[x("地图")])),_:1})])),_:1}),d(s,null,{default:u((()=>[d(A,{class:"map-body w-full h-[600rpx]",latitude:i(H).latitude,longitude:i(H).longitude,markers:i(R)},null,8,["latitude","longitude","markers"])])),_:1})])),_:1},8,["show"]),i(H).ticket_list&&i(H).ticket_list.length?(r(),o(s,{key:0,class:"chunk-wrap"},{default:u((()=>[d(s,{class:"chunk-head"},{default:u((()=>[d(n,null,{default:u((()=>[x("门票")])),_:1})])),_:1}),(r(!0),m(b,null,g(i(H).ticket_list,((e,t)=>(r(),o(s,{key:e.goods_id},{default:u((()=>[d(s,{class:"flex border-0 border-b border-solid border-[#F2F2F2] py-[30rpx] justify-between"},{default:u((()=>[d(s,{class:"flex flex-col"},{default:u((()=>[d(n,{class:"text-sm font-bold"},{default:u((()=>[x(f(e.goods_name),1)])),_:2},1024),p(' <text class="text-xs text-color mt-1">票数: {{item.stock}}</text> '),d(s,{class:"flex text-xs text-[#646464] mt-1"},{default:u((()=>[d(n,{class:"class-select"},{default:u((()=>[x("官方")])),_:1}),d(n,{class:"class-select"},{default:u((()=>[x("有条件退")])),_:1}),d(n,{class:"text-color"},{default:u((()=>[x("无需换票")])),_:1})])),_:1}),d(s,{class:"flex text-xs text-[#646464] mt-1",onClick:t=>{return l=e.goods_content,T.value=!0,void(Y.value=l);var l}},{default:u((()=>[d(n,null,{default:u((()=>[x("门票说明"),d(n,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx]"})])),_:1})])),_:2},1032,["onClick"])])),_:2},1024),d(s,{class:"flex flex-col justify-center"},{default:u((()=>[d(s,{class:"text-xs text-[#626262]"},{default:u((()=>[d(n,{class:"text-[#FA6400] price-font"},{default:u((()=>[x("￥")])),_:1}),d(n,{class:"text-lg font-bold text-[#FA6400] price-font"},{default:u((()=>[x(f(i($)(e)),1)])),_:2},1024),"member_price"==i(Z)(e)?(r(),o(G,{key:0,class:"h-[22rpx] ml-[6rpx] w-[55rpx]",src:i(c)("addon/tourism/VIP.png"),mode:"widthFix"},null,8,["src"])):p("v-if",!0),x(" 起 ")])),_:2},1024),d(W,{class:"w-[128rpx] h-[60rpx] leading-[60rpx] text-sm text-white bg-color rounded-2xl mt-[20rpx]",onClick:t=>(e=>{if(!C())return P().setLoginBack({url:"/addon/tourism/pages/scenic/detail",param:{scenic_id:M.value}}),!1;J.value.ticket_id=e.goods_id,uni.setStorageSync("scenicCreateData",J.value),D({url:"/addon/tourism/pages/scenic/order"})})(e)},{default:u((()=>[x("预订")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):p("v-if",!0),p(" 门票说明 "),d(q,{show:i(T),onClose:l[2]||(l[2]=e=>_(T)?T.value=!1:T=!1),closeable:!0},{default:u((()=>[d(s,{class:"text-center py-[30rpx] font-bold leading-none"},{default:u((()=>[d(n,null,{default:u((()=>[x("门票说明")])),_:1})])),_:1}),d(s,{class:"pt-[28rpx] pb-[40rpx] px-[28rpx]"},{default:u((()=>[d(te,{class:"max-h-[60vh]","scroll-y":!0},{default:u((()=>[i(Y)?(r(),o(ee,{key:0,content:i(Y),tagStyle:{img:"vertical-align: top;"}},null,8,["content"])):(r(),o(n,{key:1,class:"block px-5"},{default:u((()=>[x("暂无购买须知")])),_:1}))])),_:1})])),_:1})])),_:1},8,["show"]),i(H).telephone?(r(),o(s,{key:1,class:"chunk-wrap"},{default:u((()=>[d(s,{class:"chunk-head"},{default:u((()=>[d(n,null,{default:u((()=>[x("联系电话")])),_:1})])),_:1}),d(s,{class:"text-sm py-3 px-1 text-[#666] flex items-center"},{default:u((()=>[d(n,{class:"iconfont icondianhua-xianxingyuankuang font-bold mr-2 text-lg"}),d(n,null,{default:u((()=>[x(f(i(H).telephone),1)])),_:1})])),_:1})])),_:1})):p("v-if",!0),d(s,{class:"chunk-wrap"},{default:u((()=>[d(s,{class:"chunk-head"},{default:u((()=>[d(n,null,{default:u((()=>[x("景区介绍")])),_:1})])),_:1}),d(s,{class:"pt-[28rpx] pb-[40rpx] scheduling-content"},{default:u((()=>[i(H).scenic_desc?(r(),o(ee,{key:0,content:i(H).scenic_desc,tagStyle:{img:"vertical-align: top;"}},null,8,["content"])):(r(),o(n,{key:1},{default:u((()=>[x("暂无景区介绍")])),_:1}))])),_:1})])),_:1}),d(s,{class:"chunk-wrap"},{default:u((()=>[d(s,{class:"chunk-head"},{default:u((()=>[d(n,null,{default:u((()=>[x("景区周边")])),_:1})])),_:1}),d(s,{class:"pt-[28rpx] pb-[40rpx] scheduling-content"},{default:u((()=>[i(H).surround?(r(),o(ee,{key:0,content:i(H).surround,tagStyle:{img:"vertical-align: top;"}},null,8,["content"])):(r(),o(n,{key:1},{default:u((()=>[x("暂无景区周边")])),_:1}))])),_:1})])),_:1})])),_:1})),d(le,{"bg-color":"rgb(248,248,248)",loading:i(L),fontSize:"16",color:"#333"},null,8,["loading"]),d(B,{ref_key:"sharePosterRef",ref:K,posterType:"tourism_scenic",posterId:i(H).poster_id,posterParam:i(Q),copyUrlParam:i(N)},null,8,["posterId","posterParam","copyUrlParam"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-5341025f"]]);export{H as default};
