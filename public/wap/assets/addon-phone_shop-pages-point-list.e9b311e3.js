import{_ as e}from"./u-input.09a5cedd.js";import{d as t,r as a,O as l,F as s,o as r,c as o,w as n,b as c,f as x,R as i,y as u,P as p,a7 as f,Q as d,u as m,n as _,a8 as v,a9 as g,g as h,h as b,D as y,i as j,E as w,z as k,a as V,B as C}from"./index-7bf68536.js";import{_ as F}from"./u--image.b3bf1d5c.js";import{_ as z}from"./tabbar.e049672c.js";import{b as I}from"./point.16ed8061.js";import{M}from"./mescroll-body.b6d57b41.js";import{M as D}from"./mescroll-empty.fcefb74e.js";import{u as S}from"./useMescroll.26ccf5de.js";import{_ as U}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.0c1c54c7.js";import"./u-image.e46f68ef.js";import"./u-transition.cdf87992.js";import"./u-badge.d8d91719.js";import"./u-tabbar.d98653fa.js";import"./u-safe-bottom.908eeae4.js";import"./cloneDeep.77735539.js";import"./mescroll-i18n.14e7fe02.js";/* empty css                                                                       */const N=U(t({__name:"list",setup(t){const{mescrollInit:U,downCallback:N,getMescroll:T}=S(g,v),B=a([]),E=a(""),R=a(""),A=a(null),H=a(!1),J=a(""),O=a(""),P=a(""),Q=a("total_order_num"),X=e=>{H.value=!1;let t={goods_category:R.value,page:e.num,limit:e.size,names:J.value,coupon_id:E.value,order:"total_order_num"===Q.value?"":Q.value,sort:"price"==Q.value?O.value:P.value};I(t).then((t=>{let a=t.data.data;1===Number(e.num)&&(B.value=[]),B.value=B.value.concat(a),e.endSuccess(a.length),H.value=!0})).catch((()=>{H.value=!0,e.endErr()}))},q=e=>{Q.value=e,"total_order_num"==e&&(P.value="",O.value=""),"price"==e&&(P.value="",O.value?O.value="asc"==O.value?"desc":"asc":O.value="asc"),"total_exchange_num"==e&&(O.value="",P.value?P.value="asc"==P.value?"desc":"asc":P.value="asc"),B.value=[],T().resetUpScroll()};return l((()=>{setTimeout((()=>{T().optUp.textNoMore=s("end")}),500)})),(t,a)=>{const l=h(b("u-input"),e),s=y,v=j,g=C,I=h(b("u--image"),F),S=h(b("tabbar"),z);return r(),o(v,{class:"bg-gray-100 min-h-[100vh]",style:_(t.themeColor())},{default:n((()=>[c(v,{class:"fixed left-0 right-0 top-0 product-warp bg-[#fff] px-[30rpx] z-10"},{default:n((()=>[c(v,{class:"py-[14rpx] flex items-center justify-between"},{default:n((()=>[c(v,{class:"flex-1 flex items-center h-[64rpx] bg-[#F6F8F8] rounded-[33rpx] px-[32rpx]"},{default:n((()=>[c(l,{class:"flex-1",maxlength:"50",modelValue:J.value,"onUpdate:modelValue":a[0]||(a[0]=e=>J.value=e),onConfirm:a[1]||(a[1]=e=>q("total_order_num")),placeholder:"请搜索您想要的商品",placeholderClass:"text-[#a5a6a6] text-[26rpx]",fontSize:"26rpx",clearable:"",border:"none"},null,8,["modelValue"]),c(s,{class:"nc-iconfont nc-icon-sousuo-duanV6xx1 text-[32rpx] ml-[18rpx] !text-[#999]",onClick:a[2]||(a[2]=e=>q("total_order_num"))})])),_:1}),x(" <view :class=\"['nc-iconfont  text-[44rpx]', listType ? 'nc-icon-yingyongzhongxinV6xx' : 'nc-icon-yingyongliebiaoV6xx']\" @click=\"listIconBtn\"></view> ")])),_:1}),c(v,{class:"flex justify-between tems-center py-[22rpx] px-[20rpx]"},{default:n((()=>[c(v,{class:"flex items-center justify-between text-[24rpx] text-[#666] flex-1"},{default:n((()=>[c(s,{class:i({"text-[#303133] ":"total_order_num"==Q.value}),onClick:a[3]||(a[3]=e=>q("total_order_num"))},{default:n((()=>[u("综合排序")])),_:1},8,["class"]),c(v,{class:i(["flex items-center",{"text-[#303133]":"total_exchange_num"==Q.value}]),onClick:a[4]||(a[4]=e=>q("total_exchange_num"))},{default:n((()=>[c(s,{class:"mr-[4rpx]"},{default:n((()=>[u("销量")])),_:1}),"asc"!=P.value&&"desc"!=P.value?(r(),o(s,{key:0,class:"text-[30rpx] text-[#666] nc-iconfont nc-icon-shangxiaxuanzeV6xx"})):"asc"==P.value?(r(),o(s,{key:1,class:"text-[18rpx] w-[30rpx] h-[30rpx] flex items-center justify-center text-[#666] nc-iconfont font-bold nc-icon-shangV6xx-1 font-bold"})):"desc"==P.value?(r(),o(s,{key:2,class:"text-[18rpx] w-[30rpx] h-[30rpx] flex items-center justify-center text-[#666] font-bold nc-iconfont nc-icon-xiaV6xx"})):x("v-if",!0)])),_:1},8,["class"]),c(v,{class:i(["flex items-center",{"text-[#303133]":"price"==Q.value}]),onClick:a[5]||(a[5]=e=>q("price"))},{default:n((()=>[c(s,{class:"mr-[4rpx]"},{default:n((()=>[u("价格")])),_:1}),"asc"!=O.value&&"desc"!=O.value?(r(),o(s,{key:0,class:"text-[30rpx] text-[#666] nc-iconfont nc-icon-shangxiaxuanzeV6xx"})):"asc"==O.value?(r(),o(s,{key:1,class:"text-[18rpx] w-[30rpx] h-[30rpx] flex items-center justify-center font-bold text-[#666] nc-iconfont nc-icon-shangV6xx-1 font-bold"})):"desc"==O.value?(r(),o(s,{key:2,class:"text-[18rpx] w-[30rpx] h-[30rpx] flex items-center justify-center font-bold text-[#666] nc-iconfont nc-icon-xiaV6xx"})):x("v-if",!0)])),_:1},8,["class"])])),_:1})])),_:1})])),_:1}),c(M,{ref_key:"mescrollRef",ref:A,top:"160rpx",bottom:"50px",onInit:m(U),down:{use:!1},onUp:X},{default:n((()=>[B.value.length?(r(),o(v,{key:0,class:"sidebar-marign flex justify-between flex-wrap"},{default:n((()=>[(r(!0),p(d,null,f(B.value,((e,t)=>(r(),o(v,{class:"goods-item-style-two flex flex-col bg-[#fff] box-border rounded-[16rpx] overflow-hidden mt-[20rpx]",onClick:t=>{return a=e.id,void V({url:"/addon/phone_shop/pages/point/detail",param:{id:a},mode:"navigateTo"});var a}},{default:n((()=>[c(I,{width:"100%",height:"350rpx",src:m(w)(e.goods_cover_thumb_mid?e.goods_cover_thumb_mid:""),model:"aspectFill"},{error:n((()=>[c(g,{class:"w-[100%] h-[350rpx]",src:m(w)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["src"]),c(v,{class:"px-[16rpx] flex-1 pt-[10rpx] pb-[20rpx] flex flex-col justify-between"},{default:n((()=>[c(v,{class:"text-[#333] leading-[40rpx] text-[28rpx] multi-hidden"},{default:n((()=>[u(k(e.names),1)])),_:2},1024),c(v,{class:"text-[24rpx] font-400 leading-[34rpx] mt-[10rpx] text-[#999]"},{default:n((()=>[u(" 已兑"+k(e.total_exchange_num)+"人",1)])),_:2},1024),c(v,{class:"flex justify-between flex-wrap items-center mt-[16rpx]"},{default:n((()=>[c(v,{class:"flex items-baseline"},{default:n((()=>[c(g,{class:"h-[28rpx] self-center",src:m(w)("addon/phone_shop/exchange/point-icon.png"),mode:"heightFix"},null,8,["src"]),c(s,{class:"text-[var(--price-text-color)] price-font text-[32rpx] ml-[2rpx]"},{default:n((()=>[u(k(e.point),1)])),_:2},1024),e.price&&e.price>0?(r(),o(s,{key:0,class:"text-[#333] font-400 text-[24rpx]"},{default:n((()=>[u("+")])),_:1})):x("v-if",!0),e.price&&e.price>0?(r(),o(s,{key:1,class:"text-[var(--price-text-color)] font-400 text-[22rpx]"},{default:n((()=>[u("￥"+k(parseFloat(e.price).toFixed(2)),1)])),_:2},1024)):x("v-if",!0)])),_:2},1024),c(v,{class:"w-[80rpx] h-[46rpx] text-[28rpx] leading-[46rpx] !text-[#fff] m-0 rounded-full !bg-[var(--primary-color)] font-400 remove-border text-center",shape:"circle"},{default:n((()=>[u("兑换")])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})):x("v-if",!0),!B.value.length&&H.value?(r(),o(v,{key:1,class:"mx-[30rpx] mt-[20rpx] rounded-[16rpx] noData flex items-center justify-center"},{default:n((()=>[c(D,{option:{tip:"暂无商品"}})])),_:1})):x("v-if",!0)])),_:1},8,["onInit"]),c(S)])),_:1},8,["style"])}}}),[["__scopeId","data-v-2da27b4b"]]);export{N as default};
