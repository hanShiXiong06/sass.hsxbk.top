import{d as e,Z as t,r as l,p as a,o as s,P as o,b as r,w as i,u as n,c,Q as u,a7 as p,f as m,y as f,bF as d,i as x,a6 as g,g as _,h,R as y,z as b,a as v,E as w,B as k}from"./index-7bf68536.js";import{_ as j}from"./u-button.359d7329.js";import{_ as S}from"./tabbar.e049672c.js";import"./mescroll-uni.3ef5aea1.js";import{M as C}from"./mescroll-body.b6d57b41.js";import{u as z}from"./useMescroll.26ccf5de.js";import{M as I}from"./mescroll-empty.fcefb74e.js";import{o as R,a as T}from"./bwc.28e2fa51.js";import"./common.1828864e.js";import{_ as D}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.b37701e7.js";import"./u-icon.0c1c54c7.js";import"./u-badge.d8d91719.js";import"./u-tabbar.d98653fa.js";import"./u-safe-bottom.908eeae4.js";import"./cloneDeep.77735539.js";import"./mescroll-i18n.14e7fe02.js";/* empty css                                                                       */const H=D(e({__name:"order",setup(e){const{mescrollInit:D,downCallback:H,getMescroll:M}=z(),{setShare:F,onShareAppMessage:U,onShareTimeline:A}=t();let E=l([]),J=l(!1);const N=l(uni.getStorageSync("localtion"));F(),U(),A();const B=l("0");l([]);const L=l({0:"全部",3:"已报名",4:"已下单",1:"已取消",2:"已过期",8:"已返现"}),O=e=>{P(),J.value=!1;let t={page:e.num,limit:e.size,state:B.value};R(t).then((t=>{let l=t.data.data;1==e.num&&(E.value=[]),l==[]&&(uni.$u.toast("已经全部加载了"),e.endSuccess(l.length),J.value=!0),E.value=E.value.concat(l),e.endSuccess(l.length),J.value=!0})).catch((()=>{J.value=!0,e.endErr()}))},P=()=>{uni.getStorageSync("localtion")||d({type:"wgs84",success:function(e){N.value=e,uni.setStorageSync("localtion",N.value)}})};return a((()=>{P()})),(e,t)=>{const l=x,a=g,d=k,z=_(h("u-button"),j),R=_(h("tabbar"),S);return s(),o(u,null,[r(l,{class:"detail-box"},{default:i((()=>[r(C,{ref:"mescrollRef",onInit:n(D),onDown:n(H),onUp:O},{default:i((()=>[L.value?(s(),c(l,{key:0,class:"mb-2 z-1000"},{default:i((()=>[r(a,{"scroll-x":"true",class:"scroll-Y box-border px-[24rpx] bg-white"},{default:i((()=>[r(l,{class:"flex whitespace-nowrap justify-around"},{default:i((()=>[(s(!0),o(u,null,p(L.value,((e,t)=>(s(),c(l,{class:y(["text-sm leading-[90rpx]",{"class-select":B.value===t}]),onClick:e=>{return l=t,B.value=l,void M().resetUpScroll();var l}},{default:i((()=>[f(b(e),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1})):m("v-if",!0),r(l,{class:"tk-card text-[#ff0004]"},{default:i((()=>[r(l,{class:"text-xs"},{default:i((()=>[f("1、评价类订单请在次日11点前完成评价")])),_:1}),r(l,{class:"text-xs mt-1"},{default:i((()=>[f("2、订单完成后才会显示预计佣金/积分")])),_:1})])),_:1}),(s(!0),o(u,null,p(n(E),((e,t)=>(s(),c(l,{class:"tk-card"},{default:i((()=>[r(l,{class:"flex justify-between mb-2"},{default:i((()=>[r(l,{class:"text-xs"},{default:i((()=>[f("订单号:"+b(e.orderSn),1)])),_:2},1024),(s(!0),o(u,null,p(L.value,((t,a)=>(s(),o(u,{key:a},[a==e.state?(s(),c(l,{key:0,class:"text-xs"},{default:i((()=>[f(b(t),1)])),_:2},1024)):m("v-if",!0)],64)))),128))])),_:2},1024),r(l,{class:"flex"},{default:i((()=>[r(d,{style:{width:"180rpx",height:"140rpx","background-color":"#eeeeee","border-radius":"8px"},src:e.logo,mode:"aspectFill"},null,8,["src"]),r(l,{class:"flex flex-col ml-2 w-[100%] justify-between",style:{}},{default:i((()=>[r(l,{class:"font-bold tk-sltext text-xs"},{default:i((()=>[f(b(e.name),1)])),_:2},1024),r(l,{class:"flex justify-between"},{default:i((()=>[r(l,{class:"flex items-center"},{default:i((()=>[r(d,{style:{width:"32rpx",height:"32rpx","background-color":"#eeeeee","border-radius":"8px"},src:e.platformLogo,mode:"aspectFill"},null,8,["src"]),r(l,{class:"text-xs mt-[4rpx] ml-2"},{default:i((()=>[f(b(e.platformName),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),r(l,{class:"flex justify-between"},{default:i((()=>[r(l,{class:"text-xs"},{default:i((()=>[f(b(e.create_time),1)])),_:2},1024),e.fanxian>0?(s(),c(l,{key:0,class:"text-xs text-[#ff0202]"},{default:i((()=>[f(" 预计:"+b(e.fanxian>0?e.fanxian:""),1)])),_:2},1024)):m("v-if",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024),r(l,{class:"line-box w-[100%] mt-3"}),1!=e.state?(s(),c(l,{key:0,class:"flex justify-end"},{default:i((()=>[m(" <u-button color=\"#828282\" shape=\"circle\" size=\"small\" :plain=\"true\"\r\n\t\t\t\t\t\t:customStyle=\"{lineHeight:'76rpx', margin:'0rpx', color:'#000000',width:'140rpx',marginTop:'12rpx',marginRight:'12rpx'}\"\r\n\t\t\t\t\t\t@click=\"openShop(item)\">查看店铺</u-button> "),1!=e.state||2!=e.state?(s(),c(z,{key:0,color:"#828282",shape:"circle",size:"small",plain:!0,customStyle:{lineHeight:"76rpx",margin:"0rpx",color:"#000000",width:"140rpx",marginTop:"12rpx",marginRight:"12rpx"},onClick:t=>n(v)({url:"/addon/tk_cps/pages/bwc/orderdetail?id="+e.id})},{default:i((()=>[f("查看订单")])),_:2},1032,["onClick"])):m("v-if",!0),3==e.state?(s(),c(z,{key:1,color:"#828282",shape:"circle",size:"small",plain:!0,customStyle:{lineHeight:"76rpx",margin:"0rpx",color:"#000000",width:"140rpx",marginTop:"12rpx",marginRight:"12rpx"},onClick:t=>(async e=>{await T({orderSn:e.orderSn,telephone:e.orderTelephone}),M().resetUpScroll()})(e)},{default:i((()=>[f("取消报名")])),_:2},1032,["onClick"])):m("v-if",!0),3==e.state?(s(),c(z,{key:2,color:"#FE6D3A",shape:"circle",size:"small",customStyle:{lineHeight:"76rpx",margin:"0rpx",color:"#ffffff",width:"140rpx",marginTop:"12rpx",marginRight:"12rpx"},onClick:t=>(e=>{let t=JSON.parse(e.actionUrl);1==e.platform&&(window.location.href=t.h5.mt),2==e.platform&&(window.location.href=t.h5.elm)})(e)},{default:i((()=>[f("前往下单")])),_:2},1032,["onClick"])):m("v-if",!0)])),_:2},1024)):m("v-if",!0)])),_:2},1024)))),256)),!n(E).length&&n(J)?(s(),c(I,{key:1,option:{icon:n(w)("static/resource/images/empty.png")}},null,8,["option"])):m("v-if",!0)])),_:1},8,["onInit","onDown"])])),_:1}),r(R,{addon:"tk_cps"})],64)}}}),[["__scopeId","data-v-9d654fe8"]]);export{H as default};
