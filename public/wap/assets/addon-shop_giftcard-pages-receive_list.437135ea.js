import{d as e,r as a,p as r,x as t,o as l,c as s,w as o,b as d,R as i,y as c,z as n,u as p,P as u,a7 as x,Q as f,f as m,n as _,a8 as g,a9 as v,i as b,a6 as h,g as y,h as k,F as j,E as C,A as w,a as F,B as E,D as S,C as z}from"./index-7bf68536.js";import{_ as M}from"./u-avatar.0bc202a4.js";import{_ as I}from"./loading-page.vue_vue_type_script_setup_true_lang.124ad65f.js";import{g as U}from"./records.18e3c8c4.js";import{g as R}from"./card.83abd190.js";import{M as V}from"./mescroll-body.b6d57b41.js";import{M as A}from"./mescroll-empty.fcefb74e.js";import{u as B}from"./useMescroll.26ccf5de.js";import{_ as D}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.0c1c54c7.js";import"./u-text.df478cbc.js";import"./u-loading-page.566c330a.js";import"./u-loading-icon.b37701e7.js";import"./u-transition.cdf87992.js";import"./mescroll-i18n.14e7fe02.js";/* empty css                                                                       */const P=D(e({__name:"receive_list",setup(e){const{mescrollInit:D,downCallback:P,getMescroll:Q}=B(v,g),T=a([]),q=a(!0),G=a(!0),H=a({});r((e=>{J()})),t((()=>{Q()&&Q().resetUpScroll()}));const J=()=>{G.value=!1,H.value={},R().then((e=>{H.value=e.data,G.value=!0})).catch((()=>{G.value=!0}))},K=e=>{q.value=!0;let a={page:e.num,limit:e.size,status:L.value};U(a).then((a=>{let r=a.data.data;1==e.num&&(T.value=[]),T.value=T.value.concat(r),e.endSuccess(r.length),q.value=!1})).catch((()=>{q.value=!1,e.endErr()}))},L=a(""),N=e=>{L.value=e,Q().resetUpScroll()},O=e=>{let a="";return a="balance"==e.giftcard.card_right_type?"addon/shop_giftcard/diy/index/value_card.jpg":"addon/shop_giftcard/diy/index/redemption_card.jpg",a},W=(e,a)=>{"use"==e?F({url:"/addon/shop_giftcard/pages/use_card",param:{card_id:a}}):(uni.getStorageSync("give_id")&&uni.removeStorageSync("give_id"),F({url:"/addon/shop_giftcard/pages/give",param:{card_id:a}}))};return(e,a)=>{const r=b,t=h,g=E,v=S,F=y(k("u-avatar"),M),U=z,R=y(k("loading-page"),I);return l(),s(r,{class:"bg-[#f8f8f8] min-h-[100vh]",style:_(e.themeColor())},{default:o((()=>[G.value?(l(),s(r,{key:0,class:"fixed left-0 top-0 right-0 z-10"},{default:o((()=>[d(t,{"scroll-x":!0,class:"tab-style-2"},{default:o((()=>[d(r,{class:"tab-content"},{default:o((()=>[d(r,{class:i(["tab-items",{"class-select":""===L.value}]),onClick:a[0]||(a[0]=e=>N(""))},{default:o((()=>[c(n(p(j)("all")),1)])),_:1},8,["class"]),(l(!0),u(f,null,x(H.value,((e,a)=>(l(),s(r,{class:i(["tab-items",{"class-select":L.value===a}]),onClick:e=>N(a)},{default:o((()=>[c(n(e),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1})):m("v-if",!0),d(V,{ref:"mescrollRef",top:"88rpx",onInit:p(D),down:{use:!1},onUp:K},{default:o((()=>[T.value.length?(l(),s(r,{key:0,class:"sidebar-margin pt-[var(--top-m)]"},{default:o((()=>[(l(!0),u(f,null,x(T.value,((e,a)=>(l(),s(r,{onClick:a=>W("use",e.card_id),class:"h-[430rpx] mb-[var(--top-m)] rounded-[var(--rounded-big)] overflow-hidden box-border relative"},{default:o((()=>[e.card_cover?(l(),s(g,{key:0,class:"w-[100%] h-[100%] rounded-[var(--goods-rounded-big)] overflow-hidden",src:p(C)(e.card_cover||""),onError:a=>e.card_cover=O(e),mode:"aspectFill"},null,8,["src","onError"])):(l(),s(g,{key:1,class:"w-[100%] h-[100%] rounded-[var(--goods-rounded-big)] overflow-hidden",src:p(C)(O(e)),mode:"aspectFill"},null,8,["src"])),d(r,{class:"flex flex-col justify-between w-full h-[430rpx] mb-[var(--top-m)] rounded-[var(--rounded-big)] overflow-hidden box-border absolute left-0 top-0 z-5"},{default:o((()=>[d(r,{class:"flex py-[var(--pad-top-m)] px-[var(--pad-sidebar-m)]"},{default:o((()=>[d(r,{class:"flex h-[38rpx] px-[10rpx] bg-[rgba(255,255,255,0.9)] rounded-[19rpx]"},{default:o((()=>[d(v,{class:i(["mr-[8rpx] iconfont !text-[22rpx] !leading-[38rpx]",{"iconchuzhikaV6mm !text-[#EF000C]":"balance"==e.giftcard.card_right_type,"iconduihuankaV6mm-1 !text-[#FF7700]":"goods"==e.giftcard.card_right_type}])},null,8,["class"]),"balance"==e.giftcard.card_right_type?(l(),s(v,{key:0,class:"!text-[26rpx] font-500 !leading-[38rpx]"},{default:o((()=>[c(n(e.balance),1)])),_:2},1024)):m("v-if",!0),d(v,{class:"!text-[22rpx] font-400 !leading-[38rpx]"},{default:o((()=>["balance"==e.giftcard.card_right_type?(l(),s(v,{key:0},{default:o((()=>[c("å…ƒ")])),_:1})):m("v-if",!0),c(n(e.giftcard.card_right_type_name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),d(r,{class:"flex justify-between px-[var(--pad-sidebar-m)] mt-auto mb-[var(--pad-top-m)]"},{default:o((()=>[d(r,{class:"h-[36rpx] leading-[36rpx] text-[26rpx] font-800 text-stroke"},{default:o((()=>[c(n(e.card_no),1)])),_:2},1024)])),_:2},1024),d(r,{class:"flex items-center justify-between bg-[rgba(255,255,255,0.9)] h-[80rpx] px-[var(--pad-sidebar-m)] box-border"},{default:o((()=>[d(r,{class:"flex items-center"},{default:o((()=>[d(F,{src:p(C)(e.record_info.fromMember.headimg),size:"54rpx",leftIcon:"none","default-url":p(C)("static/resource/images/default_headimg.png")},null,8,["src","default-url"]),d(r,{class:"w-[250rpx] text-[28rpx] font-400 leading-[38rpx] ml-[8rpx] truncate"},{default:o((()=>[c(n(e.record_info.fromMember.nickname),1)])),_:2},1024)])),_:2},1024),d(r,{class:"flex items-center"},{default:o((()=>["to_use"==e.status&&e.giftcard.is_give?(l(),s(U,{key:0,class:"h-[50rpx] font-500 text-[22rpx] leading-[46rpx] !text-[#333] !bg-transparent m-0 rounded-[25rpx] px-[22rpx] border-[2rpx] border-solid border-[var(--text-color-light9)] box-border ml-[20rpx]",onClick:w((a=>W("give",e.card_id)),["stop"])},{default:o((()=>[c(n(p(j)("giftToFriends")),1)])),_:2},1032,["onClick"])):m("v-if",!0),"to_use"==e.status||"can_use"==e.status?(l(),s(U,{key:1,class:"h-[50rpx] font-500 text-[22rpx] leading-[46rpx] !text-[var(--primary-color)] m-0 rounded-[25rpx] px-[22rpx] border-[2rpx] border-solid border-[var(--primary-color)] box-border ml-[20rpx]",onClick:w((a=>W("use",e.card_id)),["stop"])},{default:o((()=>[c(n(p(j)("canUse")),1)])),_:2},1032,["onClick"])):m("v-if",!0),"used"==e.status?(l(),s(U,{key:2,class:"h-[50rpx] font-500 text-[22rpx] leading-[50rpx] !text-[var(--text-color-light6)] !bg-[rgba(221,221,221,0.8)] m-0 rounded-[25rpx] px-[22rpx] box-border ml-[20rpx]",onClick:w((a=>W("use",e.card_id)),["stop"])},{default:o((()=>[c(n(p(j)("used")),1)])),_:2},1032,["onClick"])):m("v-if",!0),"invalid"==e.status?(l(),s(U,{key:3,class:"h-[50rpx] font-500 text-[22rpx] leading-[50rpx] !text-[var(--text-color-light6)] !bg-[rgba(221,221,221,0.8)] m-0 rounded-[25rpx] px-[22rpx] box-border ml-[20rpx]",onClick:w((a=>W("use",e.card_id)),["stop"])},{default:o((()=>[c(n(p(j)("invalid")),1)])),_:2},1032,["onClick"])):m("v-if",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})):m("v-if",!0),T.value.length||q.value?m("v-if",!0):(l(),s(A,{key:1,option:{tip:p(j)("cardEmpty"),icon:p(C)("addon/shop_giftcard/empty.png")}},null,8,["option"]))])),_:1},8,["onInit"]),d(R,{loading:q.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-11866e68"]]);export{P as default};
