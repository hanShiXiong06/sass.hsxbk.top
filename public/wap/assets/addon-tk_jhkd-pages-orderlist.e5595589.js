import{c5 as e,d as s,r as a,p as t,o as l,O as o,b as r,w as d,c as n,P as u,a6 as c,f as i,u as f,a7 as _,a8 as m,i as p,a5 as x,g as v,h as g,Q as y,y as b,z as h,bv as j,E as k,D as w}from"./index-2882a2d8.js";import{_ as I}from"./u-icon.1104ad2f.js";import{_ as C}from"./u-modal.c146ecea.js";import{_ as S}from"./tabbar.f422f3d5.js";import{_ as O}from"./pay.d604a92e.js";import{g as J,a as M,d as N,c as U,b as z}from"./order.065f7736.js";import{M as E}from"./mescroll-body.e69cb222.js";import{M as D}from"./mescroll-empty.7f392528.js";import{u as R}from"./useMescroll.26ccf5de.js";import{g as Q}from"./goto.c6391162.js";import{_ as q}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.d7ff94e2.js";/* empty css                                                               */import"./u-loading-icon.a37f7e61.js";/* empty css                                                                       */import"./u-popup.2abbe959.js";import"./u-overlay.1a317a4e.js";import"./u-transition.4448d2e5.js";import"./u-safe-bottom.f13b01b8.js";/* empty css                                                                */import"./u-badge.e8ba7dff.js";import"./u-tabbar.b113c065.js";import"./u-image.46ebbbc1.js";import"./pay.a752545f.js";import"./mescroll-i18n.c2747603.js";/* empty css                                                                       */async function A(s,a,t){e({title:"操作提示",content:s,confirmColor:"#3569EA",cancelColor:"#646464",success:function(e){e.confirm?a(t):e.cancel&&console.log("用户点击取消")}})}const B=q(s({__name:"orderlist",setup(e){const s=a(null),q=a(!1),B=a({show:!1,msg:""}),{mescrollInit:K,downCallback:P,getMescroll:T}=R(m,_),Y=a([]),$=a(!1),F=a(!1),G=a(""),H=a([]);t((e=>{G.value=e.status||"",ee()}));const L=e=>{var a;q.value=!0,null==(a=s.value)||a.open(e.payInfo.trade_type,e.payInfo.trade_id,"/addon/tk_jhkd/pages/orderlist?status="+G.value)},V=async e=>{await N(e.id),T().resetUpScroll()},W=async e=>{await U(e.id),T().resetUpScroll()},X=async e=>{const s={id:e.id,close_reason:"用户主动退款"};await z(s),T().resetUpScroll()},Z=e=>{$.value=!1;const s={page:e.num,limit:e.size,order_status:G.value};M(s).then((s=>{const a=s.data.data;1===e.num&&(Y.value=[]),Y.value=Y.value.concat(a),e.endSuccess(a.length),$.value=!0})).catch((()=>{$.value=!0,e.endErr()}))},ee=()=>{F.value=!1,H.value=[];H.value.push({name:"全部",status:""}),J().then((e=>{Object.values(e.data).forEach((e=>{H.value.push(e)})),F.value=!0})).catch((()=>{F.value=!0}))};return(e,a)=>{const t=p,_=x,m=w,J=v(g("up-icon"),I),M=v(g("up-modal"),C),N=v(g("tabbar"),S),U=v(g("pay"),O);return l(),o(u,null,[r(t,{class:"bg-[#f8f8f8] min-h-screen overflow-hidden"},{default:d((()=>[F.value?(l(),n(t,{key:0,class:"fixed left-0 top-0 right-0 z-10"},{default:d((()=>[r(_,{"scroll-x":"true",class:"scroll-Y box-border px-[24rpx] bg-white"},{default:d((()=>[r(t,{class:"flex whitespace-nowrap justify-around"},{default:d((()=>[(l(!0),o(u,null,c(H.value,((e,s)=>(l(),n(t,{class:y(["text-sm leading-[90rpx]",{"class-select":G.value===e.status.toString()}]),onClick:s=>{return a=e.status,G.value=a.toString(),Y.value=[],void T().resetUpScroll();var a}},{default:d((()=>[b(h(e.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1})):i("v-if",!0),r(t,{class:"h-[44rpx]"}),r(E,{ref:"mescrollRef",top:"44rpx",onInit:f(K),onDown:f(P),onUp:Z},{default:d((()=>[Y.value.length>0?(l(!0),o(u,{key:0},c(Y.value,((e,s)=>(l(),n(t,{class:"tk-card m-2 mt-4 rounded-xl shadow-xl",key:s},{default:d((()=>[r(t,{class:"fb flex justify-between"},{default:d((()=>[r(t,{class:"text-xs font-weight"},{default:d((()=>[b(" 订单号:"+h(e.order_id)+" ",1),e.orderInfo.delivery_id?(l(),n(t,{key:0,class:"flex items-center",onClick:s=>f(j)(e.orderInfo.delivery_id)},{default:d((()=>[r(m,{class:"mr-2 text-primary text-xs mt-1"},{default:d((()=>[b("运单号:"+h(e.orderInfo.delivery_id),1)])),_:2},1024),r(t,null,{default:d((()=>[r(J,{class:"border-1 rounded",name:"cut",color:"#4541c7",size:"16"})])),_:1})])),_:2},1032,["onClick"])):i("v-if",!0)])),_:2},1024),"已关闭"==e.order_status_data.name?(l(),n(t,{key:0,class:"text-xs h-5 text-red-600"},{default:d((()=>[b(h(e.order_status_data.name),1)])),_:2},1024)):(l(),n(t,{key:1,class:"text-xs h-5"},{default:d((()=>[b(h(e.order_status_data.name),1)])),_:2},1024))])),_:2},1024),r(t,{class:"flex items-center"},{default:d((()=>[r(t,{class:"mr-4"},{default:d((()=>[r(m,{class:"qu-tag text-sm p-2 rounded-xl"},{default:d((()=>[b("寄")])),_:1})])),_:1}),r(t,{class:""},{default:d((()=>[r(t,{class:"tk-sltext text-xs text-[#4b4b4b] font-bold"},{default:d((()=>[b(h(JSON.parse(e.orderInfo.start_address).name),1)])),_:2},1024),r(t,{class:"text-xs flex"},{default:d((()=>[r(t,{class:"w-3/4"},{default:d((()=>[b(h(JSON.parse(e.orderInfo.start_address).address)+" "+h(JSON.parse(e.orderInfo.start_address).full_address),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),r(t,{class:"flex mt-2 items-center"},{default:d((()=>[r(t,{class:"mr-4"},{default:d((()=>[r(m,{class:"song-tag text-sm p-2 rounded-xl"},{default:d((()=>[b("收")])),_:1})])),_:1}),r(t,{class:""},{default:d((()=>[r(t,{class:"tk-sltext text-xs text-[#4b4b4b] font-bold"},{default:d((()=>[b(h(JSON.parse(e.orderInfo.end_address).name),1)])),_:2},1024),r(t,{class:"text-xs flex"},{default:d((()=>[r(t,{class:"w-3/4"},{default:d((()=>[b(h(JSON.parse(e.orderInfo.end_address).address)+h(JSON.parse(e.orderInfo.end_address).full_address),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),r(t,{class:"detail-tag mt-1 text-sm font-weight p-1 text-[#555]"},{default:d((()=>[b("物品:"+h(e.orderInfo.goods)+" 重量:"+h(e.orderInfo.weight)+"kg "+h(e.orderInfo.long)+"x"+h(e.orderInfo.width)+"x"+h(e.orderInfo.height)+"cm ",1)])),_:2},1024),r(t,{class:"text-[16rpx] pl-1 text-[#7e7e7e]"},{default:d((()=>[b(" 注意：下单 1 分钟后才能取消订单哦")])),_:1}),r(t,{class:"flex mt-2 items-center justify-between"},{default:d((()=>[r(t,{class:"flex"},{default:d((()=>[e.order_status_arr?(l(!0),o(u,{key:0},c(e.order_status_arr.member_action,((s,a)=>(l(),n(t,{class:"tk-tag mr-4",onClick:a=>((e,s)=>{"gopay"===e?L(s):"del"===e?A("确定要删除订单吗？",V,s):"refund"===e?A("确定要申请退款吗？",X,s):"close"===e&&A("确定要关闭订单吗？",W,s)})(s.class,e)},{default:d((()=>[b(h(s.name),1)])),_:2},1032,["onClick"])))),256)):i("v-if",!0)])),_:2},1024),r(t,{class:"tk-tag",onClick:s=>f(Q)("/addon/tk_jhkd/pages/orderdetail?id="+e.id)},{default:d((()=>[b("查看详情")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128)):i("v-if",!0),!Y.value.length&&$.value?(l(),n(D,{key:1,option:{icon:f(k)("static/resource/images/empty.png")}},null,8,["option"])):i("v-if",!0)])),_:1},8,["onInit","onDown"])])),_:1}),r(M,{show:B.value.show,onConfirm:a[0]||(a[0]=s=>f(A)(e.item1.class,e.item)),ref:"uModal",onCancel:a[1]||(a[1]=e=>B.value.show=!1),showCancelButton:!0,content:B.value.msg,asyncClose:!0},null,8,["show","content"]),r(N,{addon:"tk_jhkd"}),r(U,{ref_key:"payRef",ref:s,onClose:a[2]||(a[2]=e=>q.value=!1)},null,512)],64)}}}),[["__scopeId","data-v-33764153"]]);export{B as default};
