import{d as e,r as t,_ as l,j as a,g as r,h as s,o,c as d,w as i,b as u,A as p,y as c,u as n,f as x,e as v,P as f,Q as _,a7 as m,R as y,z as g,v as b,i as h,D as k,a6 as w,C,aF as j,F,a as S,b7 as V,n as A,t as z,B as T,a5 as $,E,aG as R}from"./index-7bf68536.js";import{_ as I}from"./u--image.b3bf1d5c.js";import{_ as K}from"./u-alert.97ce073c.js";import{_ as O}from"./u-tabbar.d98653fa.js";import{_ as B}from"./pay.d2e850e8.js";import{f as D,h as M,i as L}from"./order.3552570e.js";import{_ as U}from"./u-tabs.d81e913a.js";import{_ as G}from"./u-popup.be4bfacd.js";import{_ as J,a as N}from"./invoice.vue_vue_type_script_setup_true_lang.a6ce1d0c.js";import{_ as P}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.e46f68ef.js";import"./u-icon.0c1c54c7.js";import"./u-transition.cdf87992.js";import"./u-safe-bottom.908eeae4.js";import"./pay.2db06871.js";import"./u-badge.d8d91719.js";import"./u-loading-icon.b37701e7.js";import"./u-empty.68b4529f.js";import"./u-form.78a4f7c2.js";import"./u-line.463a2a45.js";import"./u-input.09a5cedd.js";import"./uni-popup.3d2f7726.js";const Q=e({__name:"select-coupon",props:{orderKey:{type:String,default:""}},emits:["confirm"],setup(e,{expose:j,emit:F}){const S=e,V=t(0),A=t([]),z=t([]),T=t(!1),$=t(null);l((()=>S.orderKey),(()=>{S.orderKey&&!A.value.length&&D({order_key:S.orderKey}).then((({data:e})=>{const t=[],l=[];e.length&&e.forEach((e=>{e.is_normal?t.push(e):l.push(e)})),z.value=l,A.value=t,t.length&&($.value=t[0],F("confirm",$.value))})).catch()}),{immediate:!0});const E=a((()=>[{name:`可用优惠券(${A.value.length})`,key:"normal"},{name:`不可用优惠券(${z.value.length})`,key:"disabled"}])),R=e=>{V.value=e.index},I=()=>{F("confirm",$.value),T.value=!1};return j({open:e=>{if(T.value=!0,e)for(let t=0;t<A.value.length;t++)if(A.value[t].id==e){$.value=A.value[t];break}},couponList:A}),(e,t)=>{const l=h,a=r(s("u-tabs"),U),j=k,F=w,S=C,K=r(s("u-popup"),G);return o(),d(K,{show:T.value,onClose:t[1]||(t[1]=e=>T.value=!1),mode:"bottom",round:10,closeable:!0},{default:i((()=>[u(l,{onTouchmove:t[0]||(t[0]=p((()=>{}),["prevent","stop"])),class:"popup-common"},{default:i((()=>[u(l,{class:"title"},{default:i((()=>[c("请选择优惠券")])),_:1}),e.type?x("v-if",!0):(o(),d(l,{key:0,class:"-mt-[20rpx]"},{default:i((()=>[u(a,{list:n(E),onClick:R,current:V.value,itemStyle:"width:50%;height:88rpx;box-sizing: border-box; font-size: 28rpx;",activeStyle:{color:"var(--primary-color)"},lineColor:"var(--primary-color)"},null,8,["list","current","activeStyle"])])),_:1})),u(F,{"scroll-y":"true",class:"h-[50vh] pt-[10rpx]"},{default:i((()=>[v(u(l,{class:"px-[var(--popup-sidebar-m)] pb-[30rpx] pt-0 text-sm"},{default:i((()=>[(o(!0),f(_,null,m(A.value,(e=>(o(),d(l,{class:y(["mt-[var(--top-m)] px-[var(--pad-sidebar-m)] py-[var(--pad-top-m)] border-1 border-[#eee] border-solid rounded-[20rpx]",{"!border-[var(--primary-color)] bg-[var(--primary-color-light2)]":$.value&&$.value.id==e.id}]),onClick:t=>{return l=e,void($.value?$.value=$.value.id!=l.id?l:null:$.value=l);var l}},{default:i((()=>[u(l,{class:y(["flex border-0 !border-b border-[#eee] border-dashed pb-[20rpx]",{"!border-[var(--primary-color)]":$.value&&$.value.id==e.id}])},{default:i((()=>[u(l,{class:"flex-1 w-0"},{default:i((()=>[u(l,{class:"text-[30rpx] mb-[20rpx] font-500"},{default:i((()=>[c(g(e.title),1)])),_:2},1024),e.min_condition_money>0?(o(),d(l,{key:0,class:"text-[24rpx] text-[var(--text-color-light6)]"},{default:i((()=>[c("满"+g(e.min_condition_money)+"可用",1)])),_:2},1024)):(o(),d(l,{key:1,class:"text-[24rpx] text-[var(--text-color-light6)]"},{default:i((()=>[c("无门槛券")])),_:1}))])),_:2},1024),u(l,{class:"text-[36rpx] price-font"},{default:i((()=>[u(j,{class:"text-xs mr-[2rpx]"},{default:i((()=>[c("￥")])),_:1}),c(g(e.price),1)])),_:2},1024)])),_:2},1032,["class"]),u(l,{class:"pt-[20rpx] text-[24rpx] text-[var(--text-color-light6)]"},{default:i((()=>[c(g(e.create_time)+" ~ "+g(e.expire_time)+"有效",1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),256))])),_:1},512),[[b,0==V.value]]),v(u(l,{class:"px-[var(--popup-sidebar-m)] pb-[30rpx] pt-0 text-sm"},{default:i((()=>[(o(!0),f(_,null,m(z.value,(e=>(o(),d(l,{class:"mt-[var(--top-m)] px-[var(--pad-sidebar-m)] py-[var(--pad-top-m)] border-1 !border-[#eee] border-solid rounded-[var(--rounded-mid)] bg-[var(--temp-bg)]"},{default:i((()=>[u(l,{class:"flex border-0 !border-b !border-[#ddd] border-dashed pb-[20rpx]"},{default:i((()=>[u(l,{class:"flex-1 w-0"},{default:i((()=>[u(l,{class:"text-[30rpx] mb-[20rpx] font-500"},{default:i((()=>[c(g(e.title),1)])),_:2},1024),e.min_condition_money>0?(o(),d(l,{key:0,class:"text-[24rpx] text-[var(--text-color-light9)]"},{default:i((()=>[c("满"+g(e.min_condition_money)+"可用",1)])),_:2},1024)):(o(),d(l,{key:1,class:"text-[24rpx] text-[var(--text-color-light9)]"},{default:i((()=>[c("无门槛券")])),_:1}))])),_:2},1024),u(l,{class:"text-[36rpx] price-font"},{default:i((()=>[u(j,{class:"text-xs mr-[2rpx]"},{default:i((()=>[c("￥")])),_:1}),c(g(e.price),1)])),_:2},1024)])),_:2},1024),u(l,{class:"pt-[20rpx] text-[24rpx] text-[var(--text-color-light9)]"},{default:i((()=>[c(g(e.create_time)+" ~ "+g(e.expire_time)+"期间有效",1)])),_:2},1024),u(l,{class:"text-[24rpx] pt-[10rpx] flex text-[var(--text-color-light9)]"},{default:i((()=>[c(" 不可用原因："+g(e.error),1)])),_:2},1024)])),_:2},1024)))),256))])),_:1},512),[[b,1==V.value]])])),_:1}),u(l,{class:"btn-wrap"},{default:i((()=>[u(S,{class:"primary-btn-bg btn",onClick:I},{default:i((()=>[c("确认")])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])}}}),W=e({__name:"address-list",emits:["confirm"],setup(e,{expose:l,emit:a}){const v=t(!1),b=t(!1),V=t(""),A=t({}),z=t([]);j({}).then((({data:e})=>{z.value=e,b.value=!1}));const T=(e,t=2)=>{uni.setStorage({key:"selectAddressCallback",data:{back:"/addon/shop/pages/order/payment",delivery:A.value.delivery},success(){S({url:"/app/pages/member/address_edit",param:{id:e.id,source:"shop_order_payment",isSelectMap:t}})}})},$=()=>{uni.setStorage({key:"selectAddressCallback",data:{back:"/addon/shop/pages/order/payment",delivery:A.value.delivery},success(){S({url:"/app/pages/member/address_edit",param:{source:"shop_order_payment"}})}})};return l({open:e=>{v.value=!0,A.value=e,V.value=e.id}}),(e,t)=>{const l=h,b=k,j=w,S=C,E=r(s("u-popup"),G);return o(),d(E,{show:v.value,onClose:t[1]||(t[1]=e=>v.value=!1),mode:"bottom",round:10},{default:i((()=>[u(l,{onTouchmove:t[0]||(t[0]=p((()=>{}),["prevent","stop"])),class:"popup-common"},{default:i((()=>[u(l,{class:"title"},{default:i((()=>[c(g(n(F)("selectAddress")),1)])),_:1}),u(j,{"scroll-y":"true",class:"h-[50vh]"},{default:i((()=>[(o(!0),f(_,null,m(z.value,((e,t)=>(o(),d(l,{key:e.id,class:y(["flex items-center mx-[var(--popup-sidebar-m)] border-1 border-[#eee] border-solid rounded-[var(--rounded-mid)] px-[var(--pad-sidebar-m)] py-[var(--pad-top-m)]",{"mb-[var(--top-m)]":z.value.length-1!=t,"text-[var(--primary-color)] !border-[var(--primary-color)]":e.id==V.value}]),onClick:e=>(e=>{let t=z.value[e];if("local_delivery"!=A.value.delivery||t.lat||t.lng){let t={};t.address_id=z.value[e].id,t.delivery=A.value.delivery,a("confirm",t)}else T(t,1);v.value=!1})(t)},{default:i((()=>[u(b,{class:"nc-iconfont nc-icon-dingweiV6xx-1 text-[36rpx]"}),u(l,{class:"flex flex-col mx-[20rpx] w-[480rpx]"},{default:i((()=>[u(l,{class:"flex items-center truncate leading-[1.5]"},{default:i((()=>[u(b,{class:"mr-[8rpx] text-[30rpx] truncate max-w-[300rpx]"},{default:i((()=>[c(g(e.name),1)])),_:2},1024),u(b,{class:"text-[30rpx]"},{default:i((()=>[c(g(e.mobile),1)])),_:2},1024)])),_:2},1024),u(l,{class:"truncate text-[26rpx] leading-[1.5] mt-[12rpx]"},{default:i((()=>[c(g(e.full_address),1)])),_:2},1024)])),_:2},1024),u(b,{class:"nc-iconfont nc-icon-xiugaiV6xx text-[32rpx] ml-auto",onClick:t=>T(e)},null,8,["onClick"])])),_:2},1032,["class","onClick"])))),128)),!z.value||z.value&&!z.value.length?(o(),d(l,{key:0,class:"text-[var(--text-color-light6)] text-[28rpx] text-center"},{default:i((()=>[c(g(n(F)("emptyAddress")),1)])),_:1})):x("v-if",!0)])),_:1}),u(l,{class:"btn-wrap"},{default:i((()=>[u(S,{class:"primary-btn-bg btn",onClick:$},{default:i((()=>[c(g(n(F)("addAddress")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])}}}),X=P(e({__name:"payment",setup(e){const p=t({order_key:"",member_remark:"",discount:{},invoice:{},delivery:{delivery_type:""},extend_data:{}}),v=t(null),b=t(),w=t(),j=t(),F=t(),D=t(),U=t(!1),G=t(0),P=t([]);uni.getStorageSync("orderCreateData")&&Object.assign(p.value,uni.getStorageSync("orderCreateData"));const X=uni.getStorageSync("selectAddressCallback");X&&(p.value.order_key="",p.value.delivery.delivery_type=X.delivery,p.value.delivery.take_address_id=X.address_id,uni.removeStorage({key:"selectAddressCallback"}));const q=(e,t)=>{p.value.delivery.delivery_type!=e&&(G.value=t,p.value.order_key="",p.value.delivery.delivery_type=e,p.value.delivery.take_address_id=0,H())},H=()=>{M(p.value).then((({data:e})=>{v.value=e,p.value.order_key=e.order_key,v.value.delivery.delivery_type_list&&(P.value=Object.values(v.value.delivery.delivery_type_list)),X&&(G.value=P.value.findIndex((e=>e.key===v.value.delivery.delivery_type))),!p.value.delivery.delivery_type&&e.delivery.delivery_type&&(p.value.delivery.delivery_type=e.delivery.delivery_type)})).catch()};H(),l((()=>P.value.length),((e,t)=>{P.value.length&&uni.getStorageSync("distributionType")&&(P.value.forEach(((e,t)=>{e.name==uni.getStorageSync("distributionType")&&(G.value=t,q(e.key,t))})),uni.removeStorage({key:"distributionType"}))}));let Y=0;const Z=()=>{ee()&&!U.value&&(U.value=!0,L(p.value).then((({data:e})=>{var t;Y=e.order_id,0==v.value.basic.order_money?S({url:"/addon/shop/pages/order/detail",param:{order_id:Y},mode:"redirectTo"}):null==(t=j.value)||t.open(e.trade_type,e.order_id,`/addon/shop/pages/order/detail?order_id=${e.order_id}`)})).catch((()=>{U.value=!1})))},ee=()=>{const e=p.value;if(v.value.basic.has_goods_types.includes("real")){if(["express","local_delivery"].includes(e.delivery.delivery_type)&&!v.value.delivery.take_address)return z({title:"请选择收货地址",icon:"none"}),!1;if("store"==e.delivery.delivery_type&&!e.delivery.take_store_id)return z({title:"请选择自提点",icon:"none"}),!1}return!0},te=()=>{S({url:"/addon/shop/pages/order/detail",param:{order_id:Y},mode:"redirectTo"})},le=()=>{let e={};e.delivery=p.value.delivery.delivery_type,e.type="local_delivery"==p.value.delivery.delivery_type?"location_address":"address",e.id=v.value.delivery.take_address.id,F.value.open(e)},ae=a((()=>{var e;return(null==(e=b.value)?void 0:e.couponList)||[]})),re=e=>{p.value.discount.coupon_id=e?e.id:0,H()},se=e=>{p.value.delivery.take_store_id=e&&e.store_id?e.store_id:0,H()},oe=e=>{p.value.invoice=e},de=e=>{p.value.order_key="",p.value.delivery.delivery_type=e.delivery,p.value.delivery.take_address_id=e.address_id,H()};return(e,t)=>{const l=h,a=T,S=k,z=r(s("u--image"),I),M=r(s("u-alert"),K),L=$,U=C,X=r(s("u-tabbar"),O),H=r(s("pay"),B);return o(),d(l,{style:A(e.themeColor())},{default:i((()=>[v.value?(o(),d(l,{key:0,class:"bg-[var(--page-bg-color)] min-h-[100vh]"},{default:i((()=>[u(l,{class:"pt-[30rpx] sidebar-margin payment-bottom"},{default:i((()=>[x(" 配送方式 "),v.value.basic.has_goods_types.includes("real")&&P.value.length?(o(),d(l,{key:0,class:"mb-[var(--top-m)] rounded-[var(--rounded-big)] bg-white"},{default:i((()=>[P.value.length>1?(o(),d(l,{key:0,class:"rounded-tl-[var(--rounded-big)] rounded-tr-[var(--rounded-big)] head-tab flex items-center w-full bg-[#F1F1F1]"},{default:i((()=>[(o(!0),f(_,null,m(P.value,((e,t)=>(o(),d(l,{key:t,class:y(["head-tab-item flex-1 relative",{active:t===G.value}])},{default:i((()=>[u(l,{class:"h-[74rpx] relative z-10 text-center leading-[74rpx] text-[28rpx]",onClick:l=>q(e.key,t)},{default:i((()=>[c(g(e.name),1)])),_:2},1032,["onClick"]),t===G.value&&3==P.value.length?(o(),d(a,{key:0,class:"tab-image absolute bottom-[-2rpx] h-[94rpx] w-[240rpx]",src:n(E)(`addon/shop/payment/tab_${t}.png`),mode:"aspectFit"},null,8,["src"])):t===G.value&&2==P.value.length?(o(),d(a,{key:1,class:"tab-img absolute bottom-[-2rpx] h-[95rpx] w-[354rpx]",src:n(E)(`addon/shop/payment/tabstyle_${t}.png`),mode:"aspectFit"},null,8,["src"])):x("v-if",!0)])),_:2},1032,["class"])))),128))])),_:1})):x("v-if",!0),u(l,{class:"min-h-[140rpx] flex items-center px-[30rpx]"},{default:i((()=>[x(" 收货地址 "),["express","local_delivery"].includes(p.value.delivery.delivery_type)?(o(),d(l,{key:0,class:"w-full",onClick:le},{default:i((()=>[e.$u.test.isEmpty(v.value.delivery.take_address)?(o(),d(l,{key:1,class:"flex items-center"},{default:i((()=>[u(a,{class:"w-[26rpx] h-[30rpx] mr-[10rpx]",src:n(E)("addon/shop/payment/position_02.png"),mode:"aspectFit"},null,8,["src"]),u(S,{class:"text-[28rpx]"},{default:i((()=>[c("添加收货地址")])),_:1}),u(S,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light9)] ml-auto"})])),_:1})):(o(),d(l,{key:0,class:"pt-[20rpx] pb-[30rpx] flex items-center"},{default:i((()=>[u(a,{class:"w-[60rpx] h-[60rpx] mr-[20rpx] flex-shrink-0",src:n(E)("addon/shop/payment/position_01.png"),mode:"aspectFit"},null,8,["src"]),u(l,{class:"flex flex-col overflow-hidden"},{default:i((()=>[u(S,{class:"text-[26rpx] text-[var(--text-color-light9)] mt-[16rpx] truncate max-w-[536rpx]"},{default:i((()=>[c(g(v.value.delivery.take_address.full_address.split(v.value.delivery.take_address.address)[0]),1)])),_:1}),u(S,{class:"font-500 text-[30rpx] mt-[14rpx] text-[#333] truncate max-w-[536rpx]"},{default:i((()=>[c(g(v.value.delivery.take_address.address),1)])),_:1}),u(l,{class:"flex items-center text-[26rpx] text-[var(--text-color-light6)] mt-[16rpx]"},{default:i((()=>[u(S,{class:"mr-[16rpx]"},{default:i((()=>[c(g(v.value.delivery.take_address.name),1)])),_:1}),u(S,null,{default:i((()=>[c(g(n(R)(v.value.delivery.take_address.mobile)),1)])),_:1})])),_:1})])),_:1}),u(S,{class:"ml-auto nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light9)]"})])),_:1}))])),_:1})):x("v-if",!0),x(" 自提点 "),"store"==p.value.delivery.delivery_type?(o(),d(l,{key:1,class:"flex items-center w-full",onClick:t[0]||(t[0]=e=>w.value.open())},{default:i((()=>[e.$u.test.isEmpty(v.value.delivery.take_store)?(o(),d(l,{key:1,class:"flex items-center w-full"},{default:i((()=>[u(a,{class:"w-[26rpx] h-[30rpx] mr-[10rpx]",src:n(E)("addon/shop/payment/position_02.png"),mode:"aspectFit"},null,8,["src"]),u(S,{class:"text-[28rpx]"},{default:i((()=>[c("请选择自提点")])),_:1}),u(S,{class:"ml-auto nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light9)]"})])),_:1})):(o(),d(l,{key:0,class:"pt-[40rpx] pb-[30rpx] w-full flex items-center"},{default:i((()=>[u(l,{class:"flex flex-col"},{default:i((()=>[u(l,{class:"text-[30rpx] font-500 text-[#303133] mb-[20rpx]"},{default:i((()=>[c(g(v.value.delivery.take_store.store_name),1)])),_:1}),u(l,{class:"text-[24rpx] text-[var(--text-color-light6)] mb-[20rpx] leading-[1.4] flex"},{default:i((()=>[u(S,{class:"flex-shrink-0"},{default:i((()=>[c("门店地址：")])),_:1}),u(S,{class:"max-w-[490rpx]"},{default:i((()=>[c(g(v.value.delivery.take_store.full_address),1)])),_:1})])),_:1}),u(l,{class:"text-[24rpx] text-[var(--text-color-light6)] mb-[20rpx]"},{default:i((()=>[u(S,null,{default:i((()=>[c("联系电话：")])),_:1}),u(S,null,{default:i((()=>[c(g(v.value.delivery.take_store.store_mobile),1)])),_:1})])),_:1}),u(l,{class:"text-[24rpx] text-[var(--text-color-light6)]"},{default:i((()=>[u(S,null,{default:i((()=>[c("营业时间：")])),_:1}),u(S,null,{default:i((()=>[c(g(v.value.delivery.take_store.trade_time),1)])),_:1})])),_:1})])),_:1}),u(S,{class:"ml-auto nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light9)]"})])),_:1}))])),_:1})):x("v-if",!0)])),_:1})])),_:1})):x("v-if",!0),v.value.basic.has_goods_types.includes("real")&&!P.value.length?(o(),d(l,{key:1,class:"mb-[var(--top-m)] card-template h-[100rpx] flex items-center"},{default:i((()=>[V("p",{class:"text-[28rpx] text-[var(--primary-color)]"},"商家尚未配置配送方式")])),_:1})):x("v-if",!0),u(l,{class:"mb-[var(--top-m)] card-template"},{default:i((()=>[(o(!0),f(_,null,m(v.value.goods_data,((e,t,r)=>(o(),d(l,{key:r,class:"mb-[30rpx]"},{default:i((()=>[u(l,{class:"flex"},{default:i((()=>[u(z,{radius:"var(--goods-rounded-big)",width:"180rpx",height:"180rpx",src:n(E)(e.sku_image),model:"aspectFill"},{error:i((()=>[u(a,{class:"w-[180rpx] h-[180rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:n(E)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["src"]),u(l,{class:"flex flex-1 w-0 flex-col justify-between ml-[20rpx] py-[6rpx]"},{default:i((()=>[u(l,{class:"line-normal"},{default:i((()=>[u(l,{class:"truncate text-[#303133] text-[28rpx] leading-[32rpx]"},{default:i((()=>[c(g(e.goods.goods_name),1)])),_:2},1024),e.sku_name?(o(),d(l,{key:0,class:"mt-[14rpx] flex"},{default:i((()=>[u(S,{class:"truncate text-[24rpx] text-[var(--text-color-light9)] leading-[28rpx]"},{default:i((()=>[c(g(e.sku_name),1)])),_:2},1024)])),_:2},1024)):x("v-if",!0)])),_:2},1024),e.not_support_delivery?(o(),d(l,{key:0,class:y(["mb-auto",{"mt-[6rpx]":!e.sku_name}])},{default:i((()=>[u(M,{type:"error",description:"该商品不支持当前所选配送方式",class:"leading-[30rpx] !inline-block",fontSize:"11"})])),_:2},1032,["class"])):x("v-if",!0),u(l,{class:"flex justify-between items-baseline"},{default:i((()=>[u(l,{class:"text-[var(--price-text-color)] flex items-baseline price-font"},{default:i((()=>[u(S,{class:"text-[24rpx] font-500 mr-[4rpx]"},{default:i((()=>[c("￥")])),_:1}),u(S,{class:"text-[40rpx] font-500"},{default:i((()=>[c(g(parseFloat(e.price).toFixed(2).split(".")[0]),1)])),_:2},1024),u(S,{class:"text-[24rpx] font-500"},{default:i((()=>[c("."+g(parseFloat(e.price).toFixed(2).split(".")[1]),1)])),_:2},1024)])),_:2},1024),u(l,{class:"font-400 text-[28rpx] text-[#303133]"},{default:i((()=>[u(S,null,{default:i((()=>[c("x")])),_:1}),u(S,null,{default:i((()=>[c(g(e.num),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),e.is_newcomer&&e.newcomer_price!=e.price&&e.num>1?(o(),d(l,{key:0,class:y(["flex items-center mt-[8rpx]",{"pb-[40rpx]":r+1!=Object.keys(v.value.goods_data).length}])},{default:i((()=>[u(a,{class:"h-[24rpx] w-[56rpx]",src:n(E)("addon/shop/newcomer.png"),mode:"heightFix"},null,8,["src"]),u(l,{class:"text-[24rpx] text-[#FFB000] leading-[34rpx] ml-[8rpx]"},{default:i((()=>[c("第1"+g(e.goods.unit)+"，￥"+g(parseFloat(e.newcomer_price).toFixed(2))+"/"+g(e.goods.unit)+"；第"+g(e.num>2?"2~"+e.num:"2")+g(e.goods.unit)+"，￥"+g(parseFloat(e.price).toFixed(2))+"/"+g(e.goods.unit),1)])),_:2},1024)])),_:2},1032,["class"])):x("v-if",!0)])),_:2},1024)))),128)),x(" 买家留言 "),u(l,{class:"bg-white flex items-center leading-[30rpx]"},{default:i((()=>[u(l,{class:"text-[28rpx] w-[150rpx] text-[#303133]"},{default:i((()=>[c("买家留言")])),_:1}),u(l,{class:"flex-1 text-[#303133]"},{default:i((()=>[u(L,{type:"text",modelValue:p.value.member_remark,"onUpdate:modelValue":t[1]||(t[1]=e=>p.value.member_remark=e),class:"text-right text-[#333] text-[28rpx]",maxlength:"50",placeholder:"请输入留言信息给卖家","placeholder-class":"text-[var(--text-color-light9)] text-[28rpx]"},null,8,["modelValue"])])),_:1})])),_:1}),x(" 发票 "),D.value&&D.value.invoiceOpen?(o(),d(l,{key:0,class:"flex items-center text-[#303133] leading-[30rpx] mt-[30rpx]",onClick:t[2]||(t[2]=e=>D.value.open())},{default:i((()=>[u(l,{class:"text-[28rpx] w-[150rpx] text-[#303133]"},{default:i((()=>[c("发票信息")])),_:1}),u(l,{class:"flex-1 w-0 text-right truncate"},{default:i((()=>[u(S,{class:"text-[28rpx] text-[#333]"},{default:i((()=>[c(g(p.value.invoice.header_name||"不需要发票"),1)])),_:1})])),_:1}),u(S,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light9)]"})])),_:1})):x("v-if",!0)])),_:1}),b.value&&n(ae).length?(o(),d(l,{key:2,class:"mb-[var(--top-m)] card-template"},{default:i((()=>[x(" 优惠券 "),n(ae).length?(o(),d(l,{key:0,class:"flex items-center h-[40rpx] leading-[40rpx]",onClick:t[3]||(t[3]=e=>b.value.open(p.value.discount.coupon_id))},{default:i((()=>[u(l,{class:"text-[28rpx] w-[150rpx] text-[#303133] flex-shrink-0"},{default:i((()=>[c("优惠券")])),_:1}),u(l,{class:"flex-1 flex justify-end truncate"},{default:i((()=>[v.value.discount&&v.value.discount.coupon?(o(),d(S,{key:0,class:"text-[var(--primary-color)] text-[28rpx] truncate"},{default:i((()=>[c(g(v.value.discount.coupon.title),1)])),_:1})):(o(),d(S,{key:1,class:"text-[28rpx] text-gray-subtitle"},{default:i((()=>[c("请选择优惠券")])),_:1}))])),_:1}),u(S,{class:"nc-iconfont nc-icon-youV6xx -mb-[2rpx] text-[26rpx] text-[var(--text-color-light9)]"})])),_:1})):x("v-if",!0)])),_:1})):x("v-if",!0),u(l,{class:"card-template"},{default:i((()=>[u(l,{class:"title"},{default:i((()=>[c("价格明细")])),_:1}),u(l,{class:"card-template-item"},{default:i((()=>[u(l,{class:"text-[28rpx] w-[150rpx] leading-[30rpx] text-[#303133]"},{default:i((()=>[c("商品金额")])),_:1}),u(l,{class:"flex-1 w-0 text-right price-font text-[#333] text-[32rpx]"},{default:i((()=>[c(" ￥"+g(parseFloat(v.value.basic.goods_money)),1)])),_:1})])),_:1}),v.value.basic.delivery_money?(o(),d(l,{key:0,class:"card-template-item"},{default:i((()=>[u(l,{class:"text-[28rpx] w-[150rpx] leading-[30rpx] text-[#303133]"},{default:i((()=>[c("配送费用")])),_:1}),u(l,{class:"flex-1 w-0 text-right price-font text-[#333] text-[32rpx]"},{default:i((()=>[c(" ￥"+g(parseFloat(v.value.basic.delivery_money)),1)])),_:1})])),_:1})):x("v-if",!0),v.value.basic.discount_money?(o(),d(l,{key:1,class:"card-template-item"},{default:i((()=>[u(l,{class:"text-[28rpx] w-[150rpx] leading-[30rpx] text-[#303133]"},{default:i((()=>[c("优惠金额")])),_:1}),u(l,{class:"flex-1 w-0 text-right text-[var(--price-text-color)] text-[32rpx] price-font leading-[1]"},{default:i((()=>[c(" -￥"+g(parseFloat(v.value.basic.discount_money)),1)])),_:1})])),_:1})):x("v-if",!0)])),_:1})])),_:1}),u(X,{fixed:!0,placeholder:!0,safeAreaInsetBottom:!0,zIndex:"10"},{default:i((()=>[u(l,{class:"flex-1 flex items-center justify-between pl-[30rpx] pr-[20rpx]"},{default:i((()=>[u(l,{class:"flex items-baseline"},{default:i((()=>[u(S,{class:"text-[26rpx] text-[#333] leading-[32rpx]"},{default:i((()=>[c("合计：")])),_:1}),u(l,{class:"inline-block"},{default:i((()=>[u(S,{class:"text-[26rpx] font-500 text-[var(--price-text-color)] price-font leading-[30rpx]"},{default:i((()=>[c("￥")])),_:1}),u(S,{class:"text-[44rpx] font-500 text-[var(--price-text-color)] price-font leading-[46rpx]"},{default:i((()=>[c(g(parseFloat(v.value.basic.order_money).toFixed(2).split(".")[0]),1)])),_:1}),u(S,{class:"text-[26rpx] font-500 text-[var(--price-text-color)] price-font leading-[46rpx]"},{default:i((()=>[c("."+g(parseFloat(v.value.basic.order_money).toFixed(2).split(".")[1]),1)])),_:1})])),_:1})])),_:1}),u(U,{class:"w-[196rpx] h-[70rpx] font-500 text-[26rpx] leading-[70rpx] !text-[#fff] m-0 rounded-full primary-btn-bg remove-border","hover-class":"none",onClick:Z},{default:i((()=>[c("提交订单")])),_:1})])),_:1})])),_:1}),x(" 选择优惠券 "),u(n(Q),{"order-key":p.value.order_key,ref_key:"couponRef",ref:b,onConfirm:re},null,8,["order-key"]),x(" 选择自提点 "),u(n(J),{ref_key:"storeRef",ref:w,onConfirm:se},null,512),x(" 发票 "),u(n(N),{ref_key:"invoiceRef",ref:D,onConfirm:oe},null,512),x(" 地址 "),u(n(W),{ref_key:"addressRef",ref:F,onConfirm:de},null,512),u(H,{ref_key:"payRef",ref:j,onClose:te},null,512)])),_:1})):x("v-if",!0)])),_:1},8,["style"])}}}),[["__scopeId","data-v-3c49c92a"]]);export{X as default};
