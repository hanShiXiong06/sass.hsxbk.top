import{d as e,r as t,p as a,o as r,c as l,w as s,b as o,P as d,a7 as p,Q as i,f as u,u as n,n as x,a8 as c,a9 as f,i as _,a6 as m,g as v,h as y,R as h,y as b,z as g,F as k,E as j,A as F,a as C,c3 as w,k as M,B as S,D as E}from"./index-7bf68536.js";import{_ as z}from"./u--image.b3bf1d5c.js";import{_ as I}from"./pay.d2e850e8.js";import{d as U,e as A,o as R,b as D}from"./order.2608f784.js";import{g as N}from"./shop.a4d32535.js";import{M as P}from"./mescroll-body.b6d57b41.js";import{M as B}from"./mescroll-empty.fcefb74e.js";import{u as O}from"./useMescroll.26ccf5de.js";import{_ as Q}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.e46f68ef.js";import"./u-icon.0c1c54c7.js";import"./u-transition.cdf87992.js";import"./u-popup.be4bfacd.js";import"./u-safe-bottom.908eeae4.js";import"./pay.2db06871.js";import"./mescroll-i18n.14e7fe02.js";/* empty css                                                                       */const T=Q(e({__name:"order_list",setup(e){const{mescrollInit:Q,downCallback:T,getMescroll:Y}=O(f,c),$=t([]),q=t(!1),G=t(!1),H=t(""),J=t([]),K=t(""),L=t(""),V=t(!1);a((e=>{H.value=e.status||"",W(),Z()}));const W=()=>{N().then((e=>{K.value=e.data}))},X=e=>{q.value=!1;let t={page:e.num,limit:e.size,status:H.value,activity_type:"exchange"};A(t).then((t=>{let a=t.data.data;1==e.num&&($.value=[]),$.value=$.value.concat(a),e.endSuccess(a.length),L.value=t.data.mch_id,V.value=t.data.is_trade_managed,q.value=!0})).catch((()=>{q.value=!0,e.endErr()}))},Z=()=>{G.value=!1,J.value=[];J.value.push({name:"全部",status:""}),U().then((e=>{Object.values(e.data).forEach(((e,t)=>{J.value.push(e)})),G.value=!0})).catch((()=>{G.value=!0}))},ee=t(null),te=(e,t="")=>{var a;"pay"==t?null==(a=ee.value)||a.open(e.order_type,e.order_id,`/addon/phone_shop/pages/order/detail?order_id=${e.order_id}`):"close"==t?ae(e):"finish"==t?re(e):"evaluate"==t&&(e.is_evaluate?C({url:"/addon/phone_shop/pages/evaluate/order_evaluate_view",param:{order_id:e.order_id}}):C({url:"/addon/phone_shop/pages/evaluate/order_evaluate",param:{order_id:e.order_id}}))},ae=e=>{w({title:"提示",content:"您确定要关闭该订单吗？",confirmColor:M().themeColor["--primary-color"],success:t=>{t.confirm&&R(e.order_id).then((e=>{Y().resetUpScroll()}))}})},re=e=>{w({title:"提示",content:"您确定物品已收到吗？",confirmColor:M().themeColor["--primary-color"],success:t=>{t.confirm&&D(e.order_id).then((e=>{Y().resetUpScroll()}))}})};return(e,t)=>{const a=_,c=m,f=S,w=v(y("u--image"),z),M=E,U=v(y("pay"),I);return r(),l(a,{class:"bg-[#F6F6F6] min-h-screen overflow-hidden order-list",style:x(e.themeColor())},{default:s((()=>[G.value?(r(),l(a,{key:0,class:"fixed left-0 top-0 right-0 z-10"},{default:s((()=>[o(c,{"scroll-x":"true",class:"scroll-Y box-border px-[30rpx] bg-white"},{default:s((()=>[o(a,{class:"flex whitespace-nowrap justify-between"},{default:s((()=>[(r(!0),d(i,null,p(J.value,((e,t)=>(r(),l(a,{class:h(["text-[28rpx] leading-[90rpx]",{"class-select":H.value===e.status.toString()}]),onClick:t=>{return a=e.status,H.value=a.toString(),$.value=[],void Y().resetUpScroll();var a}},{default:s((()=>[b(g(e.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1})):u("v-if",!0),o(P,{ref:"mescrollRef",top:"90rpx",onInit:n(Q),down:{use:!1},onUp:X},{default:s((()=>[$.value.length?(r(),l(a,{key:0,class:"mx-[30rpx] mt-[20rpx]"},{default:s((()=>[(r(!0),d(i,null,p($.value,((e,t)=>(r(),l(a,{key:t,class:"mb-[20rpx] bg-[#fff] p-[20rpx] rounded-[16rpx]"},{default:s((()=>[o(a,{onClick:t=>{C({url:"/addon/phone_shop/pages/order/detail",param:{order_id:e.order_id}})}},{default:s((()=>[o(a,{class:"flex justify-between items-center"},{default:s((()=>[o(a,{class:"text-[#303133] text-[28rpx] font-400 leading-[30rpx]"},{default:s((()=>[b(g(n(k)("orderNo"))+"："+g(e.order_no),1)])),_:2},1024),o(a,{class:"text-[#EF900A] text-[28rpx]"},{default:s((()=>[b(g(e.status_name.name),1)])),_:2},1024)])),_:2},1024),(r(!0),d(i,null,p(e.order_goods,((t,p)=>(r(),l(a,{class:"flex box-border mt-[30rpx]",key:p},{default:s((()=>[o(a,{class:"w-[150rpx] h-[150rpx]"},{default:s((()=>[o(w,{class:"rounded-[10rpx] overflow-hidden",width:"150rpx",height:"150rpx",src:n(j)(t.goods_image_thumb_small?t.goods_image_thumb_small:""),model:"aspectFill"},{error:s((()=>[o(f,{class:"rounded-[10rpx] overflow-hidden w-[150rpx] h-[150rpx]",src:n(j)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["src"])])),_:2},1024),o(a,{class:"ml-[20rpx] flex flex-1 flex-col justify-between box-border"},{default:s((()=>[o(a,null,{default:s((()=>[o(M,{class:"text-[28rpx] text-item leading-[40rpx] text-[#303133]"},{default:s((()=>[b(g(t.goods_name),1)])),_:2},1024),t.sku_name?(r(),l(a,{key:0},{default:s((()=>[o(a,{class:"text-[24rpx] truncate mt-[10rpx] text-[#999] leading-[28rpx] max-w-[480rpx]"},{default:s((()=>[b(g(t.sku_name),1)])),_:2},1024)])),_:2},1024)):u("v-if",!0)])),_:2},1024),o(a,{class:"flex justify-between items-center text-[#303133]"},{default:s((()=>[o(a,{class:"text-right leading-[28rpx] price-font"},{default:s((()=>["exchange"==e.activity_type?(r(),d(i,{key:0},[o(M,null,{default:s((()=>[b(g(t.extend.point)+g(n(k)("point")),1)])),_:2},1024),parseFloat(t.price)?(r(),d(i,{key:0},[o(M,{class:"text-[28rpx]"},{default:s((()=>[b("+")])),_:1}),o(M,{class:"text-[24rpx]"},{default:s((()=>[b("￥")])),_:1}),o(M,{class:"text-[32rpx] font-500"},{default:s((()=>[b(g(parseFloat(t.price).toFixed(2).split(".")[0]),1)])),_:2},1024),o(M,{class:"text-[22rpx] font-500"},{default:s((()=>[b("."+g(parseFloat(t.price).toFixed(2).split(".")[1]),1)])),_:2},1024)],64)):u("v-if",!0)],64)):(r(),d(i,{key:1},[o(M,{class:"text-[24rpx]"},{default:s((()=>[b("￥")])),_:1}),o(M,{class:"text-[32rpx] font-500"},{default:s((()=>[b(g(parseFloat(t.price).toFixed(2).split(".")[0]),1)])),_:2},1024),o(M,{class:"text-[22rpx] font-500"},{default:s((()=>[b("."+g(parseFloat(t.price).toFixed(2).split(".")[1]),1)])),_:2},1024)],64))])),_:2},1024),o(M,{class:"text-right text-[26rpx]"},{default:s((()=>[b("x"+g(t.num),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1032,["onClick"]),o(a,{class:"flex justify-between items-center mt-[20rpx]"},{default:s((()=>[o(M,{class:"text-[#666] text-[24rpx]"},{default:s((()=>[b(g(e.create_time),1)])),_:2},1024),o(a,{class:"flex items-center"},{default:s((()=>[o(a,{class:"text-[#999] text-[22rpx] mr-[4rpx]"},{default:s((()=>[b(g(n(k)("actualPayment"))+"：",1)])),_:1}),o(a,{class:"text-[var(--price-text-color)] price-font"},{default:s((()=>["exchange"==e.activity_type?(r(),d(i,{key:0},[o(M,null,{default:s((()=>[b(g(e.point)+g(n(k)("point")),1)])),_:2},1024),parseFloat(e.order_money)?(r(),d(i,{key:0},[o(M,{class:"text-[28rpx]"},{default:s((()=>[b("+")])),_:1}),o(M,{class:"text-[26rpx]"},{default:s((()=>[b("￥")])),_:1}),o(M,{class:"text-[36rpx] font-500"},{default:s((()=>[b(g(parseFloat(e.order_money).toFixed(2).split(".")[0]),1)])),_:2},1024),o(M,{class:"text-[24rpx] font-500"},{default:s((()=>[b("."+g(parseFloat(e.order_money).toFixed(2).split(".")[1]),1)])),_:2},1024)],64)):u("v-if",!0)],64)):(r(),d(i,{key:1},[o(M,{class:"text-[26rpx]"},{default:s((()=>[b("￥")])),_:1}),o(M,{class:"text-[36rpx] font-500"},{default:s((()=>[b(g(parseFloat(e.order_money).toFixed(2).split(".")[0]),1)])),_:2},1024),o(M,{class:"text-[24rpx] font-500"},{default:s((()=>[b("."+g(parseFloat(e.order_money).toFixed(2).split(".")[1]),1)])),_:2},1024)],64))])),_:2},1024)])),_:2},1024)])),_:2},1024),1==e.status||3==e.status||5==e.status&&1==K.value.is_evaluate?(r(),l(a,{key:0,class:"flex justify-end text-[28rpx] mt-[20rpx] items-center"},{default:s((()=>[1==e.status?(r(),l(a,{key:0,class:"inline-block text-[24rpx] leading-[52rpx] px-[23rpx] border-[2rpx] border-solid border-[#999] rounded-full text-[#303133] box-border",onClick:F((t=>te(e,"close")),["stop"])},{default:s((()=>[b(g(n(k)("orderClose")),1)])),_:2},1032,["onClick"])):u("v-if",!0),1==e.status?(r(),l(a,{key:1,class:"inline-block text-[24rpx] leading-[52rpx] px-[23rpx] border-[2rpx] border-solid text-[#fff] border-primary bg-primary rounded-full ml-[20rpx] box-border",onClick:F((t=>te(e,"pay")),["stop"])},{default:s((()=>[b(g(n(k)("topay")),1)])),_:2},1032,["onClick"])):u("v-if",!0),3==e.status?(r(),l(a,{key:2,class:"inline-block text-[24rpx] leading-[52rpx] px-[23rpx] border-[2rpx] border-solid text-[#fff] border-primary bg-primary rounded-full ml-[20rpx] box-border",onClick:F((t=>te(e,"finish")),["stop"])},{default:s((()=>[b(g(n(k)("orderFinish")),1)])),_:2},1032,["onClick"])):u("v-if",!0),5==e.status&&1==K.value.is_evaluate?(r(),l(a,{key:3,class:"inline-block text-[24rpx] leading-[52rpx] px-[23rpx] border-[2rpx] border-solid border-[#999] rounded-full ml-[20rpx] text-[#303133] box-border",onClick:F((t=>te(e,"evaluate")),["stop"])},{default:s((()=>[b(g(1==e.is_evaluate?n(k)("selectedEvaluate"):n(k)("evaluate")),1)])),_:2},1032,["onClick"])):u("v-if",!0)])),_:2},1024)):u("v-if",!0)])),_:2},1024)))),128))])),_:1})):u("v-if",!0),!$.value.length&&q.value?(r(),l(a,{key:1,class:"mx-[30rpx] mt-[20rpx] rounded-[16rpx] flex items-center justify-center noData"},{default:s((()=>[o(B,{option:{tip:"暂无订单"}})])),_:1})):u("v-if",!0)])),_:1},8,["onInit"]),o(U,{ref_key:"payRef",ref:ee,onClose:e.payClose},null,8,["onClose"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-c785ef5b"]]);export{T as default};
