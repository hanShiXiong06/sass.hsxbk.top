import{d as e,r as a,a9 as t,o as l,c as s,w as r,b as o,u as p,x,y as c,E as u,G as n,f as i,F as d,H as f,n as _,a as m,I as v,N as h,i as g,C as b,g as y,h as w,ab as k,V as j,t as F,_ as I,$ as C}from"./index-656dc629.js";import{_ as O}from"./u-icon.286409fc.js";import{_ as N}from"./u--image.8451ef47.js";import{_ as z,a as S}from"./u-checkbox-group.47287110.js";import{j as D,k as E,b as H,l as M,m as T}from"./fenxiao.6f2151fd.js";import{_ as V}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.38c45e12.js";import"./u-transition.825c0e35.js";const G=V(e({__name:"apply",setup(e){const V=a({}),G=a({}),$=a(!1),q=a({memberInfo:!1,applyInfo:!1,config:!1,check:!1}),A=()=>{D().then((e=>{G.value=Object.assign(G.value,e.data),G.value.is_fenxiao&&m({url:"/addon/shop_fenxiao/pages/index",mode:"redirectTo",param:{}}),q.value.memberInfo=!0})).catch((()=>{q.value.memberInfo=!0}))},B=()=>{E().then((e=>{G.value.status=e.data.status||0,3===G.value.status&&(G.value.refuse_reason=e.data.refuse_reason||""),q.value.applyInfo=!0})).catch((()=>{q.value.applyInfo=!0}))},J=()=>{H().then((e=>{V.value=Object.assign(V.value,e.data.fenxiao_config),"1"!=V.value.is_show_apply&&($.value=!0),q.value.config=!0})).catch((()=>{q.value.config=!0}))},K=()=>{M().then((e=>{if(V.value=Object.assign(V.value,e.data.condition_data),"3"===V.value.fenxiao_condition){let e=0;Object.values(V.value.goods_list).forEach(((a,t)=>{a.is_buy&&(e+=1)})),V.value.goods_sum=e}V.value.is_allow_apply=e.data.is_allow_apply,q.value.check=!0})).catch((()=>{q.value.check=!0}))};t((()=>{q.value={memberInfo:!1,applyInfo:!1,config:!1,check:!1},V.value={},G.value={},A(),B(),J(),K()}));const L=()=>{$.value=!$.value},P=a(!1),Q=()=>$.value?!P.value&&(P.value=!0,void T().then((e=>{P.value=!1,q.value={memberInfo:!1,applyInfo:!1,config:!1,check:!1},V.value={},G.value={},A(),B(),J(),K()})).catch((()=>{P.value=!1}))):(v({title:"请阅读并同意《分销申请协议》",icon:"none"}),!1);return(e,a)=>{const t=h,v=g,D=b,E=y(w("u-icon"),O),H=y(w("u--image"),N),M=y(w("u-checkbox"),z),T=y(w("u-checkbox-group"),S),A=k;return Object.values(q.value).every((e=>e))?(l(),s(v,{key:0,class:"bg-[#f6f6f6] min-h-[100vh]",style:_(e.themeColor())},{default:r((()=>["0"==V.value.is_fenxiao?(l(),s(v,{key:0,class:"flex flex-col items-center pt-[100rpx]"},{default:r((()=>[o(v,{class:"w-[300rpx] h-[200rpx]"},{default:r((()=>[o(t,{class:"w-[300rpx] h-[200rpx]",mode:"aspectFit",src:p(j)("addon/shop_fenxiao/unopened-fenxiao.png")},null,8,["src"])])),_:1}),o(v,{class:"mt-[40rpx] text-[24rpx]"},{default:r((()=>[x(c(p(F)("fenxiaoNotOpen")),1)])),_:1})])),_:1})):3==V.value.apply_type?(l(),s(v,{key:1,class:"flex flex-col items-center pt-[100rpx]"},{default:r((()=>[o(v,{class:"w-[300rpx] h-[200rpx]"},{default:r((()=>[o(t,{class:"w-[300rpx] h-[200rpx]",mode:"aspectFit",src:p(j)("addon/shop_fenxiao/unopened-fenxiao.png")},null,8,["src"])])),_:1}),o(v,{class:"mt-[40rpx] text-[24rpx]"},{default:r((()=>[x("请联系客服成为分销商")])),_:1})])),_:1})):(l(),u(n,{key:2},[0===G.value.status&&Object.keys(V.value).length&&"3"!=V.value.apply_type?(l(),u(n,{key:0},[o(t,{class:"w-[100vw] min-h-[100%] h-[100%]",mode:"widthFix",src:p(j)(V.value.apply_head||"")},null,8,["src"]),o(v,{class:"bg-[#fff] relative mx-[30rpx] mt-[-68rpx] rounded-[16rpx] h-[100rpx] flex justify-between items-center px-[30rpx]"},{default:r((()=>[o(D,{class:"text-[30rpx]"},{default:r((()=>[x(c(p(F)("referrer")),1)])),_:1}),o(D,{class:"text-[26rpx] text-[#666]"},{default:r((()=>[x(c(G.value.bindFenxiaoMember?G.value.bindFenxiaoMember.nickname:p(F)("notHave")),1)])),_:1})])),_:1}),["1","2","3"].indexOf(V.value.fenxiao_condition)>-1?(l(),s(v,{key:0,class:"bg-[#FFFFFF] z-10 rounded-[16rpx] mt-[20rpx] p-[30rpx] box-border mx-[30rpx]"},{default:r((()=>["1"===V.value.fenxiao_condition?(l(),u(n,{key:0},[o(v,{class:"flex items-center"},{default:r((()=>[o(t,{class:"w-[32rpx] h-[32rpx]",src:p(j)("addon/shop/apply/tiaojian.png")},null,8,["src"]),o(v,{class:"text-[30rpx] text-[#333333] box-border relative ml-[10rpx] leading-[42rpx] font-medium"},{default:r((()=>[x("申请条件")])),_:1})])),_:1}),o(v,{class:"text-[26rpx] text-[#666] pt-[20rpx] font-light"},{default:r((()=>[x(" 累计消费"),o(D,{class:"price-font mx-[5rpx]"},{default:r((()=>[x(c(V.value.consume_count),1)])),_:1}),x("次 ")])),_:1}),o(v,{class:"flex items-center mt-[40rpx]"},{default:r((()=>[o(t,{class:"w-[32rpx] h-[32rpx]",src:p(j)("addon/shop/apply/vector.png")},null,8,["src"]),o(v,{class:"text-[30rpx] box-border relative ml-[10rpx] pt-[4rpx]"},{default:r((()=>[x("已完成")])),_:1})])),_:1}),o(v,{class:"text-[26rpx] text-[#666] pt-[20rpx] font-light pb-[30rpx]"},{default:r((()=>[x(" 累计消费"),o(D,{class:"text-[32rpx] text-[var(--price-text-color)] price-font mx-[5rpx]"},{default:r((()=>[x(c(V.value.order_count),1)])),_:1}),x("次 ")])),_:1})],64)):i("v-if",!0),"2"===V.value.fenxiao_condition?(l(),u(n,{key:1},[o(v,{class:"flex items-center"},{default:r((()=>[o(t,{class:"w-[32rpx] h-[32rpx]",src:p(j)("addon/shop/apply/tiaojian.png")},null,8,["src"]),o(v,{class:"text-[30rpx] text-[#333333] box-border relative ml-[10rpx] leading-[42rpx]"},{default:r((()=>[x("申请条件")])),_:1})])),_:1}),o(v,{class:"text-[26rpx] text-[#666] pt-[20rpx]"},{default:r((()=>[x(" 累计消费"),o(D,{class:"price-font mx-[5rpx]"},{default:r((()=>[x(c(V.value.consume_money),1)])),_:1}),x("元 ")])),_:1}),o(v,{class:"flex mt-[40rpx] items-center"},{default:r((()=>[o(t,{class:"w-[32rpx] h-[32rpx]",src:p(j)("addon/shop/apply/vector.png")},null,8,["src"]),o(v,{class:"text-[30rpx] box-border relative ml-[10rpx] pt-[4rpx]"},{default:r((()=>[x("已完成")])),_:1})])),_:1}),o(v,{class:"text-[26rpx] text-[#666] pt-[20rpx]"},{default:r((()=>[x(" 累计消费"),o(D,{class:"text-[32rpx] text-[var(--price-text-color)] price-font mx-[5rpx]"},{default:r((()=>[x(c(V.value.order_sum),1)])),_:1}),x("元 ")])),_:1})],64)):i("v-if",!0),"3"===V.value.fenxiao_condition?(l(),u(n,{key:2},[o(v,{class:"flex items-center justify-between"},{default:r((()=>[o(v,{class:"flex items-center"},{default:r((()=>[o(t,{class:"w-[32rpx] h-[32rpx]",src:p(j)("addon/shop/apply/tiaojian.png")},null,8,["src"]),o(v,{class:"text-[30rpx] text-[#333333] box-border relative ml-[10rpx] pt-[6rpx]"},{default:r((()=>[x("申请条件")])),_:1})])),_:1}),o(v,{class:"text-[24rpx] text-[#999]"},{default:r((()=>[x(" 已购买"),o(D,{class:"text-[30rpx] text-[var(--price-text-color)] price-font mx-[5rpx]"},{default:r((()=>[x(c(V.value.goods_sum?V.value.goods_sum:0),1)])),_:1}),x("个商品 ")])),_:1})])),_:1}),o(v,{class:"mt-[24rpx] text-[24rpx] text-[#666] pb-[30rpx]"},{default:r((()=>[x(" 商品任选其一购买即可成为分销商 ")])),_:1}),(l(!0),u(n,null,d(V.value.goods_list,((e,a,t)=>(l(),s(v,{class:f(["flex",{"mb-[30rpx]":Object.keys(V.value.goods_list).length-1!=t}]),key:t,onClick:I((a=>{return t=e.goods_id,void m({url:"/addon/shop/pages/goods/detail",param:{goods_id:t}});var t}),["stop"])},{default:r((()=>[o(v,{class:"w-[180rpx] h-[180rpx] overflow-hidden rounded-md"},{default:r((()=>[o(H,{width:"180rpx",height:"180rpx",src:p(j)(e.goods_cover_thumb_mid?e.goods_cover_thumb_mid:""),model:"aspectFill"},{error:r((()=>[o(E,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"])])),_:2},1024),o(v,{class:"flex flex-1 flex-col justify-between py-[6rpx] ml-[20rpx]"},{default:r((()=>[o(v,{class:"multi-hidden text-[26rpx] leading-[1.3]"},{default:r((()=>[x(c(e.goods_name),1)])),_:2},1024),o(v,{class:"flex items-end justify-between"},{default:r((()=>[o(v,{class:"text-[var(--price-text-color)] price-font"},{default:r((()=>[o(D,{class:"text-[24rpx] ml-[20rpx]"},{default:r((()=>[x("￥")])),_:1}),o(D,{class:"text-[38rpx]"},{default:r((()=>[x(c(parseFloat(p(C)(e.goods_sku.price)).toFixed(2).toString().split(".")[0]),1)])),_:2},1024),o(D,{class:"text-[26rpx] mr-[10rpx]"},{default:r((()=>[x("."+c(parseFloat(p(C)(e.goods_sku.price)).toFixed(2).toString().split(".")[1]),1)])),_:2},1024)])),_:2},1024),o(D,{class:"nc-iconfont nc-icon-gouwucheV6xx-2 text-[#fff] text-[28rpx] bg-[#FE4C19] h-[48rpx] w-[48rpx] text-center leading-[48rpx] rounded-[50rpx]"})])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))],64)):i("v-if",!0)])),_:1})):i("v-if",!0),o(v,{class:"fixed btn-wrap flex justify-center flex-col bottom-[0] left-[0] right-[0] items-center bg-[#fff] py-[30rpx]"},{default:r((()=>[o(v,{class:f(["w-[670rpx] h-[80rpx] text-[28rpx] rounded-[44rpx] text-center",{"bg-[#eee] border-[#DDD] border-solid border-[1rpx] leading-[78rpx]":!Number(V.value.is_allow_apply),"bg-color text-[#fff] leading-[80rpx]":Number(V.value.is_allow_apply)}]),disabled:!Number(V.value.is_allow_apply),onClick:Q},{default:r((()=>[x(c(Number(V.value.is_allow_apply)?"申请成为分销商":"尚未达到申请条件"),1)])),_:1},8,["class","disabled"]),"1"===V.value.is_show_apply?(l(),s(v,{key:0,class:"flex justify-center items-baseline mt-[20rpx]"},{default:r((()=>[o(T,null,{default:r((()=>[o(M,{activeColor:"var(--primary-color)",checked:$.value,shape:"shape",size:"14",onChange:L,customStyle:{marginTop:"4rpx"}},null,8,["checked"])])),_:1}),o(v,{class:"text-xs text-gray-400 flex flex-wrap"},{default:r((()=>[x(" 我已阅读并了解 "),o(v,{onClick:a[0]||(a[0]=e=>p(m)({url:"/app/pages/auth/agreement?key=fenxiao_service"}))},{default:r((()=>[o(D,{class:"text-primary"},{default:r((()=>[x("《分销申请协议》")])),_:1})])),_:1})])),_:1})])),_:1})):i("v-if",!0)])),_:1}),o(v,{class:f(["pt-[170rpx]",{"h-[50rpx]":"1"===V.value.is_show_apply}])},null,8,["class"])],64)):i("v-if",!0),1===G.value.status?(l(),s(v,{key:1,class:"flex flex-col items-center"},{default:r((()=>[o(v,{class:"w-[500rpx] h-[500rpx]"},{default:r((()=>[o(H,{width:"500rpx",height:"500rpx",src:p(j)("addon/shop_fenxiao/fenxiao.png"),model:"aspectFill"},null,8,["src"])])),_:1}),o(v,{class:"text-[24rpx]"},{default:r((()=>[x("您已提交分销商申请，等待平台审核")])),_:1})])),_:1})):i("v-if",!0),3===G.value.status?(l(),s(v,{key:2,class:"flex flex-col items-center"},{default:r((()=>[o(v,{class:"w-[500rpx] h-[500rpx]"},{default:r((()=>[o(H,{width:"500rpx",height:"500rpx",src:p(j)("addon/shop_fenxiao/no-fenxiao.png"),model:"aspectFill"},null,8,["src"])])),_:1}),o(v,{class:"mt-[40rpx] text-[24rpx] mb-[24rpx] text-[#999]"},{default:r((()=>[x("您提交的分销商申请已被拒绝")])),_:1}),o(v,{class:"text-[24rpx] mb-[24rpx] text-[#666]"},{default:r((()=>[x("拒绝原因："+c(G.value.refuse_reason),1)])),_:1}),o(A,{class:"w-[500rpx] h-[70rpx] text-[28rpx] leading-[68rpx] rounded-[44rpx] !p-0 text-[#fff] m-0 bg-color remove-border",shape:"circle","hover-class":"none",onClick:a[1]||(a[1]=e=>G.value.status=0)},{default:r((()=>[x("重新申请")])),_:1})])),_:1})):i("v-if",!0)],64)),i(' <u-loading-page bg-color="rgb(248,248,248)" :loading="loading" fontSize="16" color="#303133"></u-loading-page> ')])),_:1},8,["style"])):i("v-if",!0)}}}),[["__scopeId","data-v-57085233"]]);export{G as default};
