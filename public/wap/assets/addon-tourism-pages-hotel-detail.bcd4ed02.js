import{d as e,r as t,l,j as a,p as s,E as o,J as r,o as n,c as u,w as i,u as c,b as d,y as x,z as f,P as m,a7 as p,Q as _,bV as b,f as h,A as g,n as v,bW as y,g as k,h as w,i as j,D as F,bY as C,B as V,a6 as P,C as T,R as D,F as z,t as I,s as O,H as S,a as E}from"./index-7bf68536.js";import{_ as H}from"./u-swiper.f792d47e.js";import{_ as A}from"./u-popup.be4bfacd.js";import{_ as B}from"./u-parse.525658f5.js";import{_ as J}from"./loading-page.vue_vue_type_script_setup_true_lang.124ad65f.js";import{_ as R}from"./u-calendar.f4984da6.js";import{k as U,l as Y,m as G}from"./tourism.3586533e.js";import{s as L}from"./share-poster.5efeffe7.js";import{_ as M}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.b37701e7.js";import"./u-transition.cdf87992.js";import"./u-icon.0c1c54c7.js";import"./u-safe-bottom.908eeae4.js";import"./u-loading-page.566c330a.js";import"./u-button.359d7329.js";import"./index.a605aec4.js";/* empty css                                                                     */const N=M(e({__name:"detail",setup(e){let M=t([]),N=t([]),Q=t(!0),W=t(!1),q=t(!1),K=t(!1),X=t([]),Z=t({start_time:"",end_time:"",day:1}),$={room_id:"",start_time:"",end_time:"",num:1},ee=t(!1),te=t(!1);const le=l(),ae=a((()=>le.info)),se=e=>(y(Date.parse(e.date)/1e3,"year_month_day"),e),oe=e=>{$.start_time=e[0],$.end_time=e[e.length-1],Z.value.start_time=ce(e[0]),Z.value.end_time=ce(e[e.length-1]),Z.value.day=e.length-1,ee.value=!1,fe($.start_time)};let re=t(""),ne=t([]);s((e=>{var t;re.value=e.id,Q.value=!0,t=e.id,Y(t).then((e=>{e.data,te.value=!0})).catch((()=>{Q.value=!0})),U(e.id).then((e=>{N.value=e.data,ne.value.push({id:1,latitude:N.value.latitude,longitude:N.value.longitude,iconPath:o("addon/tourism/tourism/map_icon.png"),height:25}),r({title:N.value.hotel_name}),M.value=[],N.value.image_thumb_big&&N.value.image_thumb_big.length?N.value.image_thumb_big.forEach(((e,t)=>{M.value.push(o(e))})):M.value.push(o(N.value.cover_thumb_big)),N.value.hotel_tag&&(N.value.hotel_tag=N.value.hotel_tag.split("，").join(",").split(","),N.value.hotel_tag=N.value.hotel_tag.filter((e=>e&&e.trim()))),N.value.hotel_attribute&&(N.value.hotel_attribute=N.value.hotel_attribute.split("，").join(",").split(","),N.value.hotel_attribute=N.value.hotel_attribute.filter((e=>e&&e.trim()))),N.value.room_list&&N.value.room_list.forEach(((e,t)=>{e.attr_name=e.attr_name.split("|").filter(((e,t)=>e&&e.trim()))})),X.value=N.value.room_list||[],be(),Q.value=!1}))}));let ue=t({});const ie=(e,t)=>"empty"==t?(I({title:"入住时间当日房间已售空",icon:"none"}),!1):O()?($.room_id=e.goods_id,uni.setStorageSync("hotelCreateData",$),void E({url:"/addon/tourism/pages/hotel/order"})):(S().setLoginBack({url:"/addon/tourism/pages/hotel/detail",param:{id:re.value}}),!1),ce=e=>{var t=[];return-1!=e.indexOf("-")?t=e.split("-"):-1!=e.indexOf("/")&&(t=e.split("/")),t[1]+"月"+t[2]+"日"},de=e=>{var t=864e5*e;return new Date(Date.now()+t)},xe=e=>{let t=e.getFullYear(),l=e.getMonth()+1,a=e.getDate();return""+(t+"-"+(l<10?"0"+l:l)+"-"+(a<10?"0"+a:a))};Z.value.start_time=ce(xe(de(0))),Z.value.end_time=ce(xe(de(1))),$.start_time=xe(de(0)),$.end_time=xe(de(1));const fe=e=>{let t={};t.date=e,t.hotel_id=N.value.hotel_id,G(t).then((e=>{X.value=e.data,X.value&&X.value.forEach(((e,t)=>{e.attr_name=e.attr_name.split("|").filter(((e,t)=>e&&e.trim()))}))}))};let me=t(null),pe=t(""),_e={};const be=()=>{pe.value="?id="+N.value.hotel_id,ae.value&&ae.value.member_id&&(pe.value+="&mid="+ae.value.member_id)},he=()=>{_e.id=N.value.hotel_id,ae.value&&ae.value.member_id&&(_e.member_id=ae.value.member_id),me.value.openShare()};let ge=e=>{let t="";return t=e.member_discount&&O()?"member_price":"",t},ve=e=>{let t="0.00";return t=e.member_discount&&O()&&e.member_price||e.price,parseFloat(t).toFixed(2)};return(e,t)=>{const l=k(w("u-swiper"),H),a=j,s=F,r=k(w("u-popup"),A),y=C,I=V,O=k(w("u-parse"),B),S=P,E=T,U=k(w("loading-page"),J),Y=k(w("u-calendar"),R);return n(),u(a,{class:"bg-[#f7f7f7] min-h-screen overflow-hidden",style:v(e.themeColor())},{default:i((()=>[c(Q)?h("v-if",!0):(n(),u(a,{key:0},{default:i((()=>[d(l,{list:c(M),height:"380rpx",radius:"0"},null,8,["list"]),d(a,{class:"chunk-wrap pt-4 pb-3 rounded-t-2xl relative -mt-[30rpx]"},{default:i((()=>[d(a,{class:"flex flex-wrap items-center"},{default:i((()=>[d(a,{class:"font-bold multi-hidden"},{default:i((()=>[x(f(c(N).hotel_name),1)])),_:1}),d(a,{class:"font-bold multi-hidden text-[#ffaf00] flex items-center text-xs mt-[-4rpx] ml-2"},{default:i((()=>[d(s,{class:"iconfont iconxingxing mr-[4rpx] text-xs mt-[-4rpx]"}),d(s,null,{default:i((()=>[x(f(c(N).hotel_star)+"星",1)])),_:1})])),_:1})])),_:1}),d(a,{class:"flex mt-[16rpx] justify-between items-center"},{default:i((()=>[d(a,{class:"flex"},{default:i((()=>[c(N).hotel_tag.length?(n(!0),m(_,{key:0},p(c(N).hotel_tag,((e,t)=>(n(),m(_,null,[t<4?(n(),u(s,{key:0,class:D(["bg-[#F6F8F9] text-xs px-[10rpx] py-[4rpx] rounded",{"mr-[20rpx]":t<3}])},{default:i((()=>[x(f(e),1)])),_:2},1032,["class"])):h("v-if",!0)],64)))),256)):(n(!0),m(_,{key:1},p(c(N).hotel_attribute,((e,t)=>(n(),m(_,null,[t<4?(n(),u(s,{key:0,class:D(["bg-[#F6F8F9] text-xs px-[10rpx] py-[4rpx] rounded",{"mr-[20rpx]":t<3}])},{default:i((()=>[x(f(e),1)])),_:2},1032,["class"])):h("v-if",!0)],64)))),256))])),_:1}),d(a,{class:"flex items-center",onClick:t[0]||(t[0]=e=>b(W)?W.value=!c(W):W=!c(W))},{default:i((()=>[d(a,{class:"text-xs flex items-baseline"},{default:i((()=>[x("详情"),d(s,{class:"nc-iconfont nc-icon-fengefuV6xx text-xs"}),x("设施")])),_:1}),d(s,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx]"})])),_:1})])),_:1}),d(r,{show:c(W),mode:"bottom",round:10,onClose:t[2]||(t[2]=e=>b(W)?W.value=!1:W=!1)},{default:i((()=>[d(a,{class:"flex flex-col p-3 rounded-t-3xl"},{default:i((()=>[d(a,{class:"text-base font-bold flex justify-between items-center"},{default:i((()=>[d(s,null,{default:i((()=>[x(f(c(z)("hotelTab")),1)])),_:1}),d(s,{class:"nc-iconfont nc-icon-guanbiV6xx text-[var(--text-color-light6)]",onClick:t[1]||(t[1]=e=>b(W)?W.value=!1:W=!1)})])),_:1}),d(a,{class:"mt-2 flex flex-col"},{default:i((()=>[c(N).hotel_tag?(n(),u(a,{key:0},{default:i((()=>[d(a,{class:"flex flex-wrap"},{default:i((()=>[(n(!0),m(_,null,p(c(N).hotel_tag,((e,t)=>(n(),u(s,{class:D(["my-2 whitespace-nowrap text-xs px-[10rpx] py-[4rpx]",{"mr-[20rpx]":t<c(N).hotel_attribute.length-1}])},{default:i((()=>[x(f(e),1)])),_:2},1032,["class"])))),256))])),_:1})])),_:1})):h("v-if",!0),c(N).hotel_attribute?(n(),u(a,{key:1},{default:i((()=>[(n(!0),m(_,null,p(Object.values(c(N).hotel_attribute_array),((e,t)=>(n(),u(a,{class:"mt-2"},{default:i((()=>[d(a,{class:"text-sm font-bold"},{default:i((()=>[x(f(e.name),1)])),_:2},1024),d(a,{class:"flex flex-wrap"},{default:i((()=>[(n(!0),m(_,null,p(e.attr,((e,t)=>(n(),m(_,null,[e[1]?(n(),u(s,{key:0,class:"m-2 whitespace-nowrap bg-[#F6F8F9] text-xs px-[10rpx] py-[4rpx] rounded"},{default:i((()=>[x(f(e[0]),1)])),_:2},1024)):h("v-if",!0)],64)))),256))])),_:2},1024)])),_:2},1024)))),256))])),_:1})):h("v-if",!0)])),_:1})])),_:1})])),_:1},8,["show"]),d(a,{class:"flex items-center mt-3"},{default:i((()=>[d(a,{class:"flex-1 leading-tight text-[#19293F] text-[26rpx] font-bold"},{default:i((()=>[x(f(c(N).full_address),1)])),_:1}),d(a,{class:"flex ml-auto"},{default:i((()=>[d(a,{class:"flex flex-col items-center justify-center mr-[20rpx]",onClick:t[3]||(t[3]=e=>b(K)?K.value=!0:K=!0)},{default:i((()=>[d(s,{class:"nc-iconfont nc-icon-dizhiguanliV6xx bg-[#F1F1F1] w-[44rpx] h-[44rpx] rounded-full flex items-center justify-center"}),d(s,{class:"text-xs mt-1"},{default:i((()=>[x(f(c(z)("map")),1)])),_:1})])),_:1}),d(a,{class:"flex flex-col items-center justify-center mr-[20rpx]",onClick:he},{default:i((()=>[d(s,{class:"nc-iconfont nc-icon-fenxiangV6xx text-[30rpx] bg-[#F1F1F1] w-[44rpx] h-[44rpx] rounded-full flex items-center justify-center"}),d(s,{class:"text-xs mt-1"},{default:i((()=>[x("分享")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),d(r,{show:c(K),onClose:t[4]||(t[4]=e=>b(K)?K.value=!1:K=!1),closeable:!0},{default:i((()=>[d(a,{class:"text-center py-[30rpx] font-bold leading-none"},{default:i((()=>[d(s,null,{default:i((()=>[x("地图")])),_:1})])),_:1}),d(a,null,{default:i((()=>[d(y,{class:"map-body w-full h-[600rpx]",latitude:c(N).latitude,longitude:c(N).longitude,markers:c(ne)},null,8,["latitude","longitude","markers"])])),_:1})])),_:1},8,["show"]),d(a,{class:"chunk-wrap pt-[34rpx] scheduling"},{default:i((()=>{var e;return[d(a,{class:"flex justify-between items-center",onClick:t[5]||(t[5]=e=>b(ee)?ee.value=!0:ee=!0)},{default:i((()=>[d(a,{class:"flex"},{default:i((()=>[d(a,{class:"flex items-center"},{default:i((()=>[d(s,{class:"font-bold text-[30rpx]"},{default:i((()=>[x(f(c(Z).start_time),1)])),_:1}),d(s,{class:"text-xs ml-1"},{default:i((()=>[x(f(c(z)("checkToday")),1)])),_:1})])),_:1}),d(a,{class:"flex items-center ml-[30rpx]"},{default:i((()=>[d(s,{class:"font-bold text-[30rpx]"},{default:i((()=>[x(f(c(Z).end_time),1)])),_:1}),d(s,{class:"text-xs ml-1"},{default:i((()=>[x(f(c(z)("checkTomorrow")),1)])),_:1})])),_:1})])),_:1}),d(a,{class:"text-sm flex items-center"},{default:i((()=>[d(s,{class:"text-color"},{default:i((()=>[x(f(c(z)("common"))+f(c(Z).day)+f(c(z)("lateness")),1)])),_:1}),d(s,{class:"nc-iconfont nc-icon-youV6xx text-[26rpx] text-[var(--text-color-light6)]"})])),_:1})])),_:1}),(null==(e=c(X))?void 0:e.length)?(n(),u(a,{key:0,class:"py-[20rpx]"},{default:i((()=>[(n(!0),m(_,null,p(c(X),((e,t)=>(n(),u(a,{class:"flex mb-[30rpx]",key:e.goods_id,onClick:e=>(e=>{ue.value=N.value.room_list[e],q.value=!0})(t)},{default:i((()=>[d(I,{class:"w-[162rpx] h-[184rpx] mr-[20rpx] rounded-md",src:c(o)(e.cover_thumb_mid),mode:"aspectFill"},null,8,["src"]),d(a,{class:"flex flex-col flex-1 py-[4rpx] relative"},{default:i((()=>[d(a,{class:"text-sm font-bold truncate"},{default:i((()=>[x(f(e.goods_name),1)])),_:2},1024),d(a,{class:"text-xs text-[#626262] mt-[10rpx]"},{default:i((()=>[(n(!0),m(_,null,p(e.attr_name,((e,t)=>(n(),u(s,{class:"mr-[10rpx]"},{default:i((()=>[x(f(e),1)])),_:2},1024)))),256))])),_:2},1024),h(' <view class="text-color text-[26rpx] mt-[10rpx]">15分钟内可免费取消</view> '),d(a,{class:"flex items-center mt-auto text-[#F55246] text-base font-bold price-font"},{default:i((()=>[d(s,{class:"text-xs"},{default:i((()=>[x("￥")])),_:1}),x(" "+f(c(ve)(e))+" ",1),"member_price"==c(ge)(e)?(n(),u(I,{key:0,class:"h-[22rpx] ml-[6rpx] w-[55rpx]",src:c(o)("addon/tourism/VIP.png"),mode:"widthFix"},null,8,["src"])):h("v-if",!0)])),_:2},1024),e.stock?(n(),u(a,{key:0,class:"flex flex-col border-[2rpx] border-solid border-[#FC565F] border-md absolute right-0 bottom-[4rpx] rounded w-[90rpx]",onClick:g((t=>ie(e)),["stop"])},{default:i((()=>[d(s,{class:"bg-[#FC565F] font-bold text-white font-bold text-[34rpx] text-center py-[8rpx]"},{default:i((()=>[x(f(c(z)("rob")),1)])),_:1}),d(s,{class:"text-xs text-scale py-[2rpx] text-center text-[#FC565F]"},{default:i((()=>[x(f(c(z)("onlinePayment")),1)])),_:1})])),_:2},1032,["onClick"])):(n(),u(a,{key:1,class:"flex flex-col border-[2rpx] border-solid border-[#999] border-md absolute right-0 bottom-[4rpx] rounded w-[90rpx]",onClick:g((t=>ie(e,"empty")),["stop"])},{default:i((()=>[d(s,{class:"bg-[#999] font-bold text-white font-bold text-[34rpx] text-center py-[8rpx]"},{default:i((()=>[x(f(c(z)("rob")),1)])),_:1}),d(s,{class:"text-xs text-scale py-[2rpx] text-center text-[var(--text-color-light9)]"},{default:i((()=>[x(f(c(z)("onlinePayment")),1)])),_:1})])),_:2},1032,["onClick"]))])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):h("v-if",!0),h(" 酒店房型详情 "),Object.keys(c(ue)).length?(n(),u(r,{key:1,show:c(q),mode:"bottom",round:10,onClose:t[9]||(t[9]=e=>b(q)?q.value=!1:q=!1)},{default:i((()=>[d(a,{class:"h-[1000rpx] relative rounded-t-3xl bg-[#f8f8f8] overflow-hidden"},{default:i((()=>[d(a,{class:"text-base font-bold flex justify-between items-center h-[96rpx] px-[26rpx] bg-[#fff] absolute top-0 left-0 right-0 z-10"},{default:i((()=>[d(s,{class:"text-[30rpx]"},{default:i((()=>[x(f(c(ue).goods_name),1)])),_:1}),d(s,{class:"nc-iconfont nc-icon-guanbiV6xx text-[32rpx] text-[var(--text-color-light6)]",onClick:t[6]||(t[6]=e=>b(q)?q.value=!1:q=!1)})])),_:1}),d(S,{"scroll-y":"true",class:"flex h-[1000rpx] flex-col bg-[#f8f8f8] !rounded-none"},{default:i((()=>[d(a,{class:"pt-[96rpx]"}),d(I,{src:c(o)(c(ue).cover_thumb_big),class:"w-[750rpx] h-[218]",mode:"aspectFill"},null,8,["src"]),d(a,{class:"px-4 bg-[#fff]"},{default:i((()=>[d(a,{class:"flex justify-between border-0 border-b-1 border-[#F2F2F2] border-solid px-1 py-4"},{default:i((()=>[d(a,{class:"flex flex-col items-center justify-center"},{default:i((()=>[d(s,{class:"nc-iconfont nc-icon-chuangV6xx text-[36rpx] text-[#555] mb-1"}),d(s,{class:"text-xs font-bold"},{default:i((()=>[x(f(c(ue).room_bed||"双人床"),1)])),_:1})])),_:1}),d(a,{class:"flex flex-col items-center justify-center"},{default:i((()=>[d(s,{class:"nc-iconfont nc-icon-loucengV6xx text-[36rpx] text-[#555] mb-1"}),d(s,{class:"text-xs font-bold"},{default:i((()=>[x(f(c(ue).room_floor||"1层"),1)])),_:1})])),_:1}),d(a,{class:"flex flex-col items-center justify-center"},{default:i((()=>[d(s,{class:"nc-iconfont nc-icon-fangziV6xx text-[36rpx] text-[#555] mb-1"}),d(s,{class:"text-xs font-bold"},{default:i((()=>[x(f(c(ue).room_area||0)+"m²",1)])),_:1})])),_:1}),d(a,{class:"flex flex-col items-center justify-center"},{default:i((()=>[d(s,{class:"nc-iconfont nc-icon-jiamengV6xx text-[36rpx] text-[#555] mb-1"}),d(s,{class:"text-xs font-bold"},{default:i((()=>[x(f(c(ue).room_stay||"0人"),1)])),_:1})])),_:1}),d(a,{class:"flex flex-col items-center justify-center"},{default:i((()=>[d(s,{class:"nc-iconfont nc-icon-liebiaoV6xx text-[36rpx] text-[#555] mb-1"}),d(s,{class:"text-xs font-bold"},{default:i((()=>[x(f(c(ue).stock||"0间"),1)])),_:1})])),_:1})])),_:1}),c(ue).goods_attribute?(n(),u(a,{key:0,class:"flex items-baseline py-4"},{default:i((()=>[d(s,{class:"mr-3 text-sm"},{default:i((()=>[x("房间设施")])),_:1}),d(a,{class:"flex-1 flex flex-wrap"},{default:i((()=>[(n(!0),m(_,null,p(c(ue).goods_attribute.split(","),((e,t)=>{var l,a;return n(),u(s,{class:D(["mr-1 text-sm",{"class-select":t<(null==(a=null==(l=c(ue).goods_attribute)?void 0:l.split(","))?void 0:a.length)-1}])},{default:i((()=>[x(f(e),1)])),_:2},1032,["class"])})),256))])),_:1})])),_:1})):h("v-if",!0)])),_:1}),d(a,{class:"mt-2 px-3 bg-[#fff]"},{default:i((()=>[d(a,{class:"border-0 border-b-1 border-[#F2F2F2] border-solid py-3 text-[30rpx] font-bold"},{default:i((()=>[x(" 房型详情 ")])),_:1}),d(a,{class:"py-3 px-1"},{default:i((()=>[c(ue).goods_content?(n(),u(O,{key:0,content:c(ue).goods_content,tagStyle:{img:"vertical-align: top;"}},null,8,["content"])):(n(),u(a,{key:1},{default:i((()=>[x("暂无房型详情")])),_:1}))])),_:1})])),_:1}),d(a,{class:"h-[136rpx]"})])),_:1}),d(a,{class:"flex justify-between items-center px-4 py-3 mt-2 bg-[#fff] absolute bottom-0 left-0 right-0 z-10"},{default:i((()=>[d(s,{class:"text-[var(--price-color)] price-font"},{default:i((()=>[x(" ￥"+f(c(ve)(c(ue)))+" ",1),"member_price"==c(ge)(c(ue))?(n(),u(I,{key:0,class:"h-[22rpx] ml-[6rpx] w-[55rpx]",src:c(o)("addon/tourism/VIP.png"),mode:"widthFix"},null,8,["src"])):h("v-if",!0)])),_:1}),c(ue).stock?(n(),u(E,{key:0,type:"primary",class:"w-[276rpx] h-[88rpx] rounded-3xl flex items-center justify-center text-base m-0 !bg-[var(--primary-color)]",onClick:t[7]||(t[7]=g((e=>ie(c(ue))),["stop"]))},{default:i((()=>[x("立即抢购")])),_:1})):(n(),u(E,{key:1,type:"primary",class:"w-[276rpx] h-[88rpx] rounded-3xl flex items-center justify-center text-base m-0 !bg-[#999]",onClick:t[8]||(t[8]=g((e=>ie(c(ue),"empty")),["stop"]))},{default:i((()=>[x("立即抢购")])),_:1}))])),_:1})])),_:1})])),_:1},8,["show"])):h("v-if",!0)]})),_:1}),d(a,{class:"chunk-wrap pt-[34rpx] pb-[24rpx] scheduling"},{default:i((()=>[d(a,{class:"text-center text-[34rpx] font-bold"},{default:i((()=>[x("-- 酒店介绍 --")])),_:1}),d(a,{class:"scheduling-content"},{default:i((()=>[c(N).hotel_desc?(n(),u(O,{key:0,content:c(N).hotel_desc,tagStyle:{img:"vertical-align: top;"}},null,8,["content"])):(n(),u(a,{key:1},{default:i((()=>[x("暂无酒店介绍")])),_:1}))])),_:1})])),_:1})])),_:1})),d(U,{loading:c(Q)},null,8,["loading"]),c(te)?(n(),u(Y,{key:1,show:c(ee),mode:"range",onConfirm:oe,onClose:t[10]||(t[10]=e=>b(ee)?ee.value=!1:ee=!1),formatter:se,startText:c(z)("inHotel"),endText:c(z)("checkOut"),confirmDisabledText:c(z)("checkOutDate"),ref:"calendar",monthNum:"2"},null,8,["show","startText","endText","confirmDisabledText"])):h("v-if",!0),d(L,{ref_key:"sharePosterRef",ref:me,posterType:"tourism_hotel",posterId:c(N).poster_id,posterParam:c(_e),copyUrlParam:c(pe)},null,8,["posterId","posterParam","copyUrlParam"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-01bc709b"]]);export{N as default};
