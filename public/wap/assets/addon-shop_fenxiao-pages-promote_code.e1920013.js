import{d as a,r as e,p as s,t,a as o,s as l,H as n,bH as d,E as u,o as i,c as r,w as p,U as c,b as _,f,y as m,V as v,n as g,a3 as h,B as y,i as w,C as b,g as x,h as k,aA as C,_ as S}from"./index-71c7df08.js";import{_ as j}from"./loading-page.vue_vue_type_script_setup_true_lang.c7dc2256.js";const B=S(a({__name:"promote_code",setup(a){const S=e(!1),B=e(!0),H=()=>{S.value=!1};e(null);const{setShare:L}=h();s((a=>{if(!a.id)return t({title:"缺少参数id",icon:"none"}),void setTimeout((()=>{o({url:"/addon/shop/pages/index",mode:"reLaunch"})}),1e3);if(!l())return void n().setLoginBack({url:"/addon/shop_fenxiao/pages/promote_code",param:{id:a.id,mid:a.mid}});A(a.id);let e={title:"分销推广",desc:"分销推广"};L({wechat:{...e},weapp:{...e}})}));const z=e(""),A=a=>{B.value=!0,d({type:"fenxiao",param:{member_id:a}}).then((a=>{z.value=a.data&&u(a.data)||"",B.value=!1}))};return(a,e)=>{const s=y,t=w,o=b,l=x(k("u-popup"),C),n=x(k("loading-page"),j);return i(),r(t,{class:"container",style:g(a.themeColor())},{default:p((()=>[B.value?f("v-if",!0):(i(),c(v,{key:0},[_(t,{class:"poster-wrap"},{default:p((()=>[z.value?(i(),r(s,{key:0,src:z.value,mode:"widthFix","show-menu-by-longpress":!0},null,8,["src"])):f("v-if",!0)])),_:1}),_(t,{class:"tips"},{default:p((()=>[m("长按识别图中二维码")])),_:1}),_(l,{show:S.value,onClose:e[0]||(e[0]=a=>S.value=!1),mode:"center",round:"var(--rounded-big)","safe-area-inset-bottom":!1,customStyle:{overflow:"hidden"}},{default:p((()=>[_(t,{class:"dialog-popup"},{default:p((()=>[_(t,{class:"title"},{default:p((()=>[m("提示")])),_:1}),_(t,{class:"message"},{default:p((()=>[m("您拒绝了保存图片到相册的授权请求，无法保存图片到相册，如需正常使用，请授权之后再进行操作。")])),_:1}),_(t,{class:"action-wrap"},{default:p((()=>[_(t,{onClick:H},{default:p((()=>[m("取消")])),_:1}),_(t,{class:"flex items-end"},{default:p((()=>[_(o,{type:"default",class:"authorization-btn","open-type":"openSetting",onOpensetting:H,"hover-class":"none"},{default:p((()=>[m("立即授权")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["show","round"])],64)),_(n,{loading:B.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-a62a37de"]]);export{B as default};
