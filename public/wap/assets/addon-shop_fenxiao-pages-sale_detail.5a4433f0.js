import{d as e,r as a,j as t,H as r,a as l,o as s,c as d,w as o,u as n,I as x,b as i,y as f,n as u,z as p,f as _,K as c,J as m,g as b,h as g,i as v,E as h,D as w,l as y,Z as j,L as k}from"./index-d8a8f699.js";import{_ as N}from"./u--image.2df700b8.js";import{_ as z}from"./u-loading-page.c740ef13.js";import{d as C}from"./sale.f5548578.js";import{b as I}from"./fenxiao.966b2ea4.js";import{_ as T}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.e646392b.js";import"./u-icon.5ba98c98.js";import"./u-transition.db07fff7.js";import"./u-loading-icon.6808ae8c.js";const L=T(e({__name:"sale_detail",setup(e){const T=a({}),L=a([]);t((e=>{e.id?D(Number(e.id)):(r({title:"缺少销售奖励id",icon:"none"}),setTimeout((()=>{l({url:"/addon/shop_fenxiao/pages/sale",mode:"redirectTo"})}),1e3))}));let Z=a(!0);const D=e=>{C(e).then((a=>{T.value.id=e,T.value.is_settlement=a.data.is_settlement,T.value.order_money=a.data.order_money,T.value.reward_money=T.value.is_settlement?a.data.reward_money:a.data.diff_data.now_reward,T.value.sale_start_time=a.data.sale_start_time,T.value.sale_end_time=a.data.sale_end_time,T.value.is_settlement||(T.value.diff_data=a.data.diff_data),E()})).catch((()=>{Z.value=!1}))},E=()=>{I().then((e=>{T.value.condition_order_money=e.data.sale_config.condition.order_money,L.value=e.data.sale_config.reward.map(((a,t)=>(a.title=t?Number(e.data.sale_config.reward[t-1].end)+1!=Number(a.end)?"第 "+(Number(e.data.sale_config.reward[t-1].end)+1)+"-"+a.end:"第 "+a.end:a.end>1?"前 "+a.end:"第 "+a.end,a))),Z.value=!1})).catch((e=>{Z.value=!1}))},F=()=>{l({url:"/addon/shop_fenxiao/pages/sale_ranking",param:{id:T.value.id}})},H=()=>{l({url:"/addon/shop/pages/index",mode:"reLaunch"})};return(e,a)=>{const t=b(g("u--image"),N),r=v,l=h,C=w,I=b(g("u-loading-page"),z);return s(),d(r,{class:"bg-[#f8f8f8] min-h-[100vh]",style:u(e.themeColor())},{default:o((()=>[n(Z)?_("v-if",!0):(s(),x(c,{key:0},[i(r,{class:"w-[100%] h-[960rpx] relative background-size box-border",style:u({backgroundImage:"url("+n(y)("addon/shop_fenxiao/sale-detail-header.png")+")"})},{default:o((()=>[i(r,{class:"absolute top-[105rpx] left-0 right-0 flex justify-center"},{default:o((()=>[i(t,{width:"341rpx",height:"63rpx",src:n(y)("addon/shop_fenxiao/sale-detail-title.png"),model:"aspectFill"},null,8,["src"])])),_:1}),i(r,{class:"absolute top-[24rpx] right-[24rpx] text-[24rpx] text-[#fdf6ec] leading-[35rpx] h-[35rpx] bg-[rgba(0,0,0,0.2)] px-[17.5rpx] rounded-[17.5rpx]",onClick:F},{default:o((()=>[f("排行榜")])),_:1})])),_:1},8,["style"]),i(r,{class:"p-[24rpx] relative mt-[-560rpx] box-border"},{default:o((()=>[i(r,{class:"w-full box-border bg-[#fff] rounded-[10rpx] overflow-hidden"},{default:o((()=>[i(r,{class:"flex items-center justify-between bg-[#fdf6ec] px-[24rpx]"},{default:o((()=>[i(r,{class:"text-[30rpx] font-600 text-[#b88230] leading-[80rpx] flex-shrink-0"},{default:o((()=>[f("当前业绩")])),_:1}),i(r,{class:"flex items-center"},{default:o((()=>[i(r,{class:"text-[22rpx] text-[#b88230]"},{default:o((()=>[f("本次奖励周期：")])),_:1}),i(r,{class:"flex flex-col"},{default:o((()=>[i(r,{class:"text-[22rpx] text-[#b88230] leading-[30rpx]"},{default:o((()=>[f(p(T.value.sale_start_time),1)])),_:1}),i(r,{class:"text-[22rpx] text-[#b88230] leading-[30rpx]"},{default:o((()=>[f(p(T.value.sale_end_time),1)])),_:1})])),_:1})])),_:1})])),_:1}),i(r,{class:"w-full p-[35rpx] pt-[50rpx] flex justify-between box-border"},{default:o((()=>[i(r,{class:"max-w-[50%] flex-shrink-0 box-border px-[24rpx]"},{default:o((()=>[i(r,{class:"text-[24rpx] text-[#999] text-center"},{default:o((()=>[f("个人奖金（元）")])),_:1}),i(r,{class:"text-[50rpx] font-600 text-center mt-[10rpx]"},{default:o((()=>[f(p(n(j)(T.value.reward_money)),1)])),_:1})])),_:1}),i(r,{class:"max-w-[50%] flex-shrink-0 box-border px-[24rpx]"},{default:o((()=>[i(r,{class:"text-[24rpx] text-[#999] text-center"},{default:o((()=>[f("团队销售（元）")])),_:1}),i(r,{class:"text-[50rpx] font-600 text-center mt-[10rpx]"},{default:o((()=>[f(p(n(j)(T.value.order_money)),1)])),_:1})])),_:1})])),_:1}),!T.value.is_settlement&&T.value.diff_data.diff_order_money?(s(),d(r,{key:0,class:"w-full mt-[24rpx] flex justify-center"},{default:o((()=>[i(r,{class:"bg-[#fdf6ec] text-[24rpx] text-[#eebe77] h-[50rpx] leading-[50rpx] px-[25rpx] rounded-[25rpx]"},{default:o((()=>[f(" 再卖"+p(T.value.diff_data.diff_order_money)+"元可获得"+p(n(j)(T.value.diff_data.prev_reward))+"元 ",1)])),_:1})])),_:1})):_("v-if",!0),i(r,{class:"w-full pt-[24rpx] pb-[45rpx] flex justify-center"},{default:o((()=>[i(l,{class:"w-[538rpx] h-[80rpx] text-[32rpx] leading-[80rpx] rounded-[40rpx] !text-[#fff] m-0 wechat remove-border",shape:"circle",onClick:H},{default:o((()=>[f("去推广商品")])),_:1})])),_:1})])),_:1}),i(r,{class:"w-full px-[24rpx] box-border bg-[#fff] rounded-[10rpx] overflow-hidden mt-[24rpx]"},{default:o((()=>[i(r,{class:"text-[30rpx] font-600 py-[24rpx]"},{default:o((()=>[i(C,null,{default:o((()=>[f("排名奖励规则")])),_:1}),i(C,{class:"text-[22rpx] text-[#999]"},{default:o((()=>[f("（参与门槛：团队销售额"+p(n(j)(T.value.condition_order_money))+"元）",1)])),_:1})])),_:1}),(s(!0),x(c,null,m(L.value,((e,a)=>(s(),d(r,{class:k(["text-[26rpx] py-[24rpx] border-0 border-solid border-[#ddd]",{"border-b-[1rpx]":a!=L.value.length-1}])},{default:o((()=>[f("团队销售"+p(e.title)+" 名，奖金 "+p(n(j)(e.reward.commission))+" 元",1)])),_:2},1032,["class"])))),256))])),_:1})])),_:1})],64)),i(I,{"bg-color":"rgb(248,248,248)",loading:n(Z),loadingText:"",fontSize:"16",color:"#333"},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-f2375426"]]);export{L as default};
