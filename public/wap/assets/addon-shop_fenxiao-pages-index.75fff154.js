import{d as e,a6 as t,r as a,a7 as s,T as l,a as x,o as r,c as o,w as n,u as c,I as d,b as p,y as i,z as f,f as m,n as u,Y as _,K as h,g,h as b,i as w,D as k,Q as v,l as y,x as j,Z as C,H as F,U as O,V as z}from"./index-d8a8f699.js";import{_ as D}from"./u-avatar.f700209e.js";import{_ as E}from"./u-loading-page.c740ef13.js";import{_ as I}from"./tabbar.fdead755.js";import{a as T,b as A,c as S,d as V}from"./fenxiao.966b2ea4.js";import{_ as U}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.5ba98c98.js";import"./u-text.b9c32215.js";import"./u-loading-icon.6808ae8c.js";import"./u-transition.db07fff7.js";import"./u-badge.d38c6915.js";import"./u-tabbar.5fed7184.js";import"./u-safe-bottom.a4431b09.js";const Y=U(e({__name:"index",setup(e){const U=t();let Y=a({member:{},fenxiao_level:{}}),Z=a(!0);s((()=>{l((()=>U.siteAddons),((e,t)=>{e&&Object.keys(e).length&&(U.siteAddons.includes("shop_fenxiao")||(F({title:"该站点未安装分销插件",icon:"none"}),setTimeout((()=>{O().length>1?z({delta:1}):x({url:"/addon/shop/pages/member/index",mode:"reLaunch"})}),1500)))}),{deep:!0}),G(),K(),N(),T().then((e=>{let t=e.data;Object.keys(t).length?(Y.value=e.data,Z.value=!1):(Z.value=!0,x({url:"/addon/shop_fenxiao/pages/apply",mode:"redirectTo"}))}))}));const B=a({}),G=()=>{A().then((e=>{B.value=Object.assign(B.value,e.data.fenxiao_config)}))};let H=a(0);const K=()=>{S().then((e=>{H.value=e.data.length||0})).catch((()=>{H.value=0}))};let L=a(0);const N=()=>{V().then((e=>{L.value=e.data.direct.length+e.data.indirect.length||0})).catch((()=>{L.value=0}))},P=()=>{uni.setStorageSync("cashOutAccountType","commission"),x({url:"/app/pages/member/apply_cash_out"})},Q=()=>{x({url:"/app/pages/member/detailed_account",param:{type:"commission"}})},R=()=>{x({url:"/app/pages/member/commission"})};return(e,t)=>{const a=g(b("u-avatar"),D),s=w,l=k,F=v,O=g(b("u-loading-page"),E),z=g(b("tabbar"),I);return r(),o(s,{style:u(e.themeColor()),class:"bg-[#F6F6F6] min-h-[100vh]"},{default:n((()=>[c(Z)?m("v-if",!0):(r(),o(s,{key:0},{default:n((()=>[1==B.value.is_fenxiao?(r(),d(h,{key:0},[p(s,{class:"h-[320rpx] box-border px-[var(--sidebar-m)] pt-[44rpx] flex flex-col justify-between",style:u({background:"url("+c(y)("addon/shop_fenxiao/index/header_bg.png")+") left top / 100% 100% no-repeat"})},{default:n((()=>[p(s,{class:"flex items-center"},{default:n((()=>[p(s,{class:"!w-[120rpx] !h-[120rpx] rounded-full flex-shrink-0 overflow-hidden"},{default:n((()=>[c(Y).member.headimg?(r(),o(a,{key:0,"default-url":c(y)("static/resource/images/default_headimg.png"),src:c(y)(c(Y).member.headimg),size:"120rpx",leftIcon:"none"},null,8,["default-url","src"])):(r(),o(a,{key:1,src:c(y)("static/resource/images/default_headimg.png"),size:"120rpx",leftIcon:"none"},null,8,["src"]))])),_:1}),p(s,{class:"flex flex-col text-[#303133] ml-[32rpx]"},{default:n((()=>[p(s,{class:"text-[30rpx] truncate max-w-[520rpx]"},{default:n((()=>[p(l,{class:"font-bold whitespace-nowrap"},{default:n((()=>[i(f(c(Y).member.nickname),1)])),_:1})])),_:1}),c(Y).parent_fenxiao?(r(),o(s,{key:0,class:"text-[24rpx] mt-[20rpx]"},{default:n((()=>[i(" 上级分销商："+f(c(Y).parent_fenxiao.nickname),1)])),_:1})):m("v-if",!0)])),_:1}),m(' <view class="flex items-center text-[#fff] text-[24rpx] ml-auto">\r\n                            <text class="nc-iconfont nc-icon-bangzhuV6xx mr-[10rpx]"></text>\r\n                            <text>推广规则</text>\r\n                        </view> ')])),_:1}),p(s,{class:"flex items-center h-[140rpx] box-border rounded-t-[20rpx] p-[30rpx]",style:u({backgroundImage:"url("+c(y)("addon/shop_fenxiao/index/head_bg.png")+") ",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"cover"}),onClick:t[0]||(t[0]=e=>c(x)({url:"/addon/shop_fenxiao/pages/level"}))},{default:n((()=>[p(s,{class:"flex flex-col"},{default:n((()=>[p(s,{class:"flex items-center"},{default:n((()=>[p(F,{class:"w-[30rpx] h-[30rpx] mr-[10rpx]",src:c(y)("addon/shop_fenxiao/info_vip.png"),mode:"widthFix"},null,8,["src"]),p(l,{class:"text-[28rpx] truncate w-[320rpx] font-bold text-[#FDD6A1] font-bold"},{default:n((()=>[i(f(Object.keys(c(Y).fenxiao_level).length&&!c(Y).fenxiao_level.is_default?c(Y).fenxiao_level.level_name:"等级未解锁"),1)])),_:1})])),_:1}),p(l,{class:"text-[26rpx] text-[#E8D3B6] mt-[20rpx]"},{default:n((()=>[i("下单、邀请好友均可提升等级")])),_:1})])),_:1}),p(l,{class:"ml-auto level-wrap w-[140rpx] h-[46rpx] text-center rounded-[54rpx] text-[24rpx] leading-[48rpx] text-[#794200]"},{default:n((()=>[i("去升级")])),_:1})])),_:1},8,["style"])])),_:1},8,["style"]),p(s,{class:"commission-bg sidebar-marign my-[20rpx] rounded-[16rpx] pb-[35rpx]"},{default:n((()=>[p(s,{class:"flex justify-between h-[90rpx] px-[24rpx] items-center border-0 border-b-[1rpx] border-[#E0E0E0] border-solid"},{default:n((()=>[p(l,{class:"text-[28rpx] font-bold"},{default:n((()=>[i(f(c(j)("billingInformation")),1)])),_:1}),p(s,{class:"text-[#666] text-[26rpx]",onClick:Q},{default:n((()=>[p(l,null,{default:n((()=>[i("佣金明细")])),_:1}),p(l,{class:"nc-iconfont nc-icon-youV6xx text-[#666] !text-[26rpx]"})])),_:1})])),_:1}),p(s,{class:"flex mt-[50rpx] justify-around commission-content"},{default:n((()=>[p(s,{class:"flex flex-col items-center",onClick:R},{default:n((()=>[p(l,{class:"text-[22rpx] text-[#666]"},{default:n((()=>[i(f(c(j)("commissionGet")),1)])),_:1}),p(l,{class:"text-[#303133] text-[28rpx] font-bold mt-[20rpx]"},{default:n((()=>[i(f(c(C)(c(Y).member.commission_get)),1)])),_:1})])),_:1}),p(s,{class:"flex flex-col items-center",onClick:R},{default:n((()=>[p(l,{class:"text-[22rpx] text-[#666]"},{default:n((()=>[i(f(c(j)("commission")),1)])),_:1}),p(l,{class:"text-[#303133] text-[28rpx] font-bold mt-[20rpx]"},{default:n((()=>[i(f(c(C)(c(Y).member.commission)),1)])),_:1})])),_:1}),p(s,{class:"flex flex-col items-center",onClick:R},{default:n((()=>[p(l,{class:"text-[22rpx] text-[#666]"},{default:n((()=>[i("已提现")])),_:1}),p(l,{class:"text-[#303133] text-[28rpx] font-bold mt-[20rpx]"},{default:n((()=>[i(f(c(C)(c(Y).member.commission_get-c(Y).member.commission-c(Y).member.commission_cash_outing)),1)])),_:1})])),_:1}),p(s,{class:"flex flex-col items-center",onClick:R},{default:n((()=>[p(l,{class:"text-[22rpx] text-[#666]"},{default:n((()=>[i(f(c(j)("commissionCashOuting")),1)])),_:1}),p(l,{class:"text-[#303133] text-[28rpx] font-bold mt-[20rpx]"},{default:n((()=>[i(f(c(C)(c(Y).member.commission_cash_outing)),1)])),_:1})])),_:1})])),_:1}),p(s,{class:"text-center mt-[40rpx] mx-auto w-[570rpx] h-[76rpx] leading-[76rpx] level-wrap text-[#985400] rounded-[90rpx] text-[28rpx]",onClick:P},{default:n((()=>[i(f(c(j)("cashOut")),1)])),_:1})])),_:1}),p(s,{class:"flex"},{default:n((()=>[p(s,{class:"flex px-[30rpx] rounded-[16rpx] items-center flex-1 sidebar-marign h-[140rpx] team-bg",onClick:t[1]||(t[1]=_((e=>c(x)({url:"/addon/shop_fenxiao/pages/team"})),["stop"]))},{default:n((()=>[p(F,{class:"w-[80rpx] h-[80rpx] mr-[20rpx]",src:c(y)("addon/shop_fenxiao/index/team1.png"),mode:"widthFix"},null,8,["src"]),p(s,{class:"flex flex-col"},{default:n((()=>[p(l,{class:"text-[26rpx]"},{default:n((()=>[i("我的团队")])),_:1}),p(l,{class:"text-[#666] text-[24rpx] mt-[20rpx]"},{default:n((()=>[i(f(c(L))+"人",1)])),_:1})])),_:1})])),_:1}),p(s,{class:"flex px-[30rpx] rounded-[16rpx] items-center flex-1 mr-[var(--sidebar-m)] h-[140rpx] fenxiao-bg",onClick:t[2]||(t[2]=_((e=>c(x)({url:"/addon/shop_fenxiao/pages/child_fenxiao"})),["stop"]))},{default:n((()=>[p(F,{class:"w-[80rpx] h-[80rpx] mr-[24rpx]",src:c(y)("addon/shop_fenxiao/index/fenxiao.png"),mode:"widthFix"},null,8,["src"]),p(s,{class:"flex flex-col"},{default:n((()=>[p(l,{class:"text-[26rpx]"},{default:n((()=>[i("分销商")])),_:1}),p(l,{class:"text-[#666] text-[24rpx] mt-[10rpx]"},{default:n((()=>[i(f(c(H))+"人",1)])),_:1})])),_:1})])),_:1})])),_:1}),p(s,{class:"commission-bg pb-[35rpx] sidebar-marign my-[20rpx] rounded-[16rpx]"},{default:n((()=>[p(s,{class:"text-[32rpx] h-[90rpx] px-[24rpx] leading-[90rpx] border-0 border-b-[2rpx] border-solid border-[#E0E0E0] text-[28rpx] font-bold"},{default:n((()=>[i("常用功能")])),_:1}),p(s,{class:"flex flex-wrap common-module"},{default:n((()=>[p(s,{class:"flex items-center flex-col w-[33.3%] py-[20rpx]",onClick:t[3]||(t[3]=e=>c(x)({url:"/addon/shop_fenxiao/pages/promote"}))},{default:n((()=>[p(F,{class:"w-[60rpx] h-[60rpx]",src:c(y)("addon/shop_fenxiao/index/code.png"),mode:"widthFix"},null,8,["src"]),p(s,{class:"flex flex-col items-center mt-[12rpx]"},{default:n((()=>[p(l,{class:"text-[24rpx]"},{default:n((()=>[i("邀请好友")])),_:1}),p(l,{class:"text-[22rpx] text-[#aaa] mt-[12rpx]"},{default:n((()=>[i("邀好友赚好礼")])),_:1})])),_:1})])),_:1}),p(s,{class:"flex items-center flex-col w-[33.3%] py-[20rpx]",onClick:t[4]||(t[4]=e=>c(x)({url:"/addon/shop_fenxiao/pages/order"}))},{default:n((()=>[p(F,{class:"w-[60rpx] h-[60rpx]",src:c(y)("addon/shop_fenxiao/index/order.png"),mode:"widthFix"},null,8,["src"]),p(s,{class:"flex flex-col items-center mt-[12rpx]"},{default:n((()=>[p(l,{class:"text-[24rpx]"},{default:n((()=>[i("分销订单")])),_:1}),p(l,{class:"text-[22rpx] text-[#aaa] mt-[12rpx]"},{default:n((()=>[i("分销订单明细")])),_:1})])),_:1})])),_:1}),p(s,{class:"flex items-center flex-col w-[33.3%] py-[20rpx]",onClick:t[5]||(t[5]=e=>c(x)({url:"/addon/shop_fenxiao/pages/team_dividend"}))},{default:n((()=>[p(F,{class:"w-[60rpx] h-[60rpx]",src:c(y)("addon/shop_fenxiao/index/team2.png"),mode:"widthFix"},null,8,["src"]),p(s,{class:"flex flex-col items-center mt-[12rpx]"},{default:n((()=>[p(l,{class:"text-[24rpx]"},{default:n((()=>[i("团队分红")])),_:1}),p(l,{class:"text-[22rpx] text-[#aaa] mt-[12rpx]"},{default:n((()=>[i("团队分红")])),_:1})])),_:1})])),_:1}),p(s,{class:"flex items-center flex-col w-[33.3%] py-[20rpx]",onClick:t[6]||(t[6]=e=>c(x)({url:"/addon/shop_fenxiao/pages/agent_list"}))},{default:n((()=>[p(F,{class:"w-[60rpx] h-[60rpx]",src:c(y)("addon/shop_fenxiao/index/channel.png"),mode:"widthFix"},null,8,["src"]),p(s,{class:"flex flex-col items-center mt-[12rpx]"},{default:n((()=>[p(l,{class:"text-[24rpx]"},{default:n((()=>[i("渠道代理")])),_:1}),p(l,{class:"text-[22rpx] text-[#aaa] mt-[12rpx]"},{default:n((()=>[i("渠道代理")])),_:1})])),_:1})])),_:1}),p(s,{class:"flex items-center flex-col w-[33.3%] py-[20rpx]",onClick:t[7]||(t[7]=e=>c(x)({url:"/addon/shop_fenxiao/pages/task_rewards"}))},{default:n((()=>[p(F,{class:"w-[60rpx] h-[60rpx]",src:c(y)("addon/shop_fenxiao/index/task.png"),mode:"widthFix"},null,8,["src"]),p(s,{class:"flex flex-col items-center mt-[12rpx]"},{default:n((()=>[p(l,{class:"text-[24rpx]"},{default:n((()=>[i(f(c(j)("task")),1)])),_:1}),p(l,{class:"text-[22rpx] text-[#aaa] mt-[12rpx]"},{default:n((()=>[i(f(c(j)("taskDesc")),1)])),_:1})])),_:1})])),_:1}),p(s,{class:"flex items-center flex-col w-[33.3%] py-[20rpx]",onClick:t[8]||(t[8]=e=>c(x)({url:"/addon/shop_fenxiao/pages/sale"}))},{default:n((()=>[p(F,{class:"w-[60rpx] h-[60rpx]",src:c(y)("addon/shop_fenxiao/index/market.png"),mode:"widthFix"},null,8,["src"]),p(s,{class:"flex flex-col items-center mt-[12rpx]"},{default:n((()=>[p(l,{class:"text-[24rpx]"},{default:n((()=>[i(f(c(j)("sale")),1)])),_:1}),p(l,{class:"text-[22rpx] text-[#aaa] mt-[12rpx]"},{default:n((()=>[i(f(c(j)("saleDesc")),1)])),_:1})])),_:1})])),_:1}),p(s,{class:"flex items-center flex-col w-[33.3%] py-[20rpx]",onClick:t[9]||(t[9]=e=>c(x)({url:"/addon/shop_fenxiao/pages/goods"}))},{default:n((()=>[p(F,{class:"w-[60rpx] h-[60rpx]",src:c(y)("addon/shop_fenxiao/index/fenxiao_goods_01.png"),mode:"widthFix"},null,8,["src"]),p(s,{class:"flex flex-col items-center mt-[12rpx]"},{default:n((()=>[p(l,{class:"text-[24rpx]"},{default:n((()=>[i("分销商品")])),_:1}),p(l,{class:"text-[22rpx] text-[#aaa] mt-[12rpx]"},{default:n((()=>[i("分销商品")])),_:1})])),_:1})])),_:1}),m(' <view class="flex items-center flex-col w-[33.3%] py-[20rpx]" @click="redirect({ url: \'/addon/shop_fenxiao/pages/zone\' })">\r\n\t\t\t\t\t\t    <image class="w-[60rpx] h-[60rpx]" :src="img(\'addon/shop_fenxiao/index/fenxiao_prefecture.png\')" mode="widthFix"/>\r\n\t\t\t\t\t\t    <view class="flex flex-col items-center mt-[12rpx]">\r\n\t\t\t\t\t\t        <text class="text-[24rpx]">分销专区</text>\r\n\t\t\t\t\t\t        <text class="text-[22rpx] text-[#aaa] mt-[12rpx]">分销专区</text>\r\n\t\t\t\t\t\t    </view>\r\n\t\t\t\t\t\t</view> ')])),_:1})])),_:1})],64)):(r(),o(s,{key:1,class:"flex flex-col items-center justify-center noData"},{default:n((()=>[p(F,{class:"w-[260rpx] h-[152rpx]",mode:"widthFix",src:c(y)("addon/shop_fenxiao/unopened-fenxiao.png")},null,8,["src"]),p(s,{class:"mt-[40rpx] text-[24rpx]"},{default:n((()=>[i(f(c(j)("fenxiaoNotOpen")),1)])),_:1})])),_:1}))])),_:1})),p(O,{"bg-color":"rgb(248,248,248)",loading:c(Z),loadingText:"",fontSize:"16",color:"#333"},null,8,["loading"]),p(z,{addon:"shop"})])),_:1},8,["style"])}}}),[["__scopeId","data-v-f8bd3707"]]);export{Y as default};
