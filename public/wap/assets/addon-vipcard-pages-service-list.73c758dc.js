import{d as e,r as l,p as a,o as t,c as r,w as s,b as o,f as i,u as n,bV as u,P as c,a7 as d,Q as p,y as x,n as f,a8 as m,a9 as v,a5 as _,D as g,i as b,a6 as h,g as y,h as k,F as j,R as w,z as C,E,a as F,B as z,C as V}from"./index-7bf68536.js";import{_ as I}from"./u-popup.be4bfacd.js";import{_ as U}from"./loading-page.vue_vue_type_script_setup_true_lang.124ad65f.js";import{_ as M}from"./tabbar.e049672c.js";import{f as S,h as D}from"./vipcard.fb0aea23.js";import{M as P}from"./mescroll-body.b6d57b41.js";import{M as B}from"./mescroll-empty.fcefb74e.js";import{u as R}from"./useMescroll.26ccf5de.js";import{_ as A}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-transition.cdf87992.js";import"./u-icon.0c1c54c7.js";import"./u-safe-bottom.908eeae4.js";import"./u-loading-page.566c330a.js";import"./u-loading-icon.b37701e7.js";import"./u-badge.d8d91719.js";import"./u-tabbar.d98653fa.js";import"./cloneDeep.77735539.js";import"./mescroll-i18n.14e7fe02.js";/* empty css                                                                       */const H=A(e({__name:"list",setup(e){const{mescrollInit:A,downCallback:H,getMescroll:J}=R(v,m);let K=l([]),N=l(""),O=l(""),Q=l(!0),q=l(!1),G=l(!1);const L=e=>{q.value=!1;let l={page:e.num,limit:e.size,category_id:O.value,goods_name:N.value};D(l).then((l=>{let a=l.data.data;1==e.num&&(K.value=[]),K.value=K.value.concat(a),Q.value=!1,e.endSuccess(a.length),K.value.length||(q.value=!0)})).catch((()=>{Q.value=!1,q.value=!0,e.endErr()}))};a((()=>{W()}));const T=l([]),W=()=>{Q.value=!0,S().then((e=>{T.value=e.data,T.value&&T.value.length&&T.value.forEach(((e,l)=>{if(e.children&&e.children.length){let l={};l.category_id=e.category_id,l.category_name="全部",l.level=e.level,l.pid=e.pid,e.children.unshift(l)}})),O.value=e.data[0].children[0].category_id,Q.value=!1})).catch((()=>{Q.value=!1}))},X=l(0),Y=l(0);l(!0);const Z=(e,l)=>{Y.value=e,O.value=l.category_id,G.value=!1,J().resetUpScroll()},$=()=>{J().resetUpScroll()};return(e,l)=>{const a=_,m=g,v=b,S=h,D=y(k("u-popup"),I),R=z,H=V,W=y(k("loading-page"),U),ee=y(k("tabbar"),M);return t(),r(v,{class:"min-h-screen",style:f(e.themeColor())},{default:s((()=>[T.value.length?(t(),r(v,{key:0,class:"mescroll-box bg-[#f8f8f8]"},{default:s((()=>{var e;return[o(P,{ref:"mescrollRef",top:(null==(e=T.value[X.value])?void 0:e.children)?"197rpx":"105rpx",down:{use:!1},onInit:n(A),onUp:L},{default:s((()=>{var e;return[i(" 头部搜索 "),o(v,{class:"search-box z-10 bg-[#fff] fixed top-0 left-0 right-0"},{default:s((()=>[o(a,{class:"search-ipt text-sm",type:"text",modelValue:n(N),"onUpdate:modelValue":l[0]||(l[0]=e=>u(N)?N.value=e:N=e),placeholder:n(j)("searchNamePlaceholder")},null,8,["modelValue","placeholder"]),o(v,{class:"flex items-center z-2 h-[66rpx] absolute right-[48rpx] top-[18rpx]"},{default:s((()=>[o(m,{class:"nc-iconfont nc-icon-sousuoV6xx text-[30rpx]",onClick:$})])),_:1})])),_:1}),i(" 左侧切换 "),o(v,{class:"tabs-box z-10 fixed left-0 bg-[#fff] bottom-[100rpx] top-[105rpx] pb-ios"},{default:s((()=>[o(S,{"scroll-y":!0,class:"h-[100%]"},{default:s((()=>[(t(!0),c(p,null,d(T.value,((e,l)=>(t(),r(v,{class:w(["tab-item",{"tab-item-active":l==X.value,"bg-[#F6F8F8]":l!=X.value,"rounded-br-2xl":l==X.value-1,"rounded-tr-2xl":l==X.value+1}]),key:l,onClick:a=>((e,l)=>{X.value=e,G.value=!1,l.children&&l.children.length?Z(0,l.children[0]):(O.value=l.category_id,J().resetUpScroll())})(l,e)},{default:s((()=>[o(v,{class:"text-box"},{default:s((()=>[x(C(e.category_name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),i(" 二级菜单点击 "),(null==(e=T.value[X.value])?void 0:e.children)?(t(),r(v,{key:0,class:"sort-tabs flex items-center h-[92rpx] px-[24rpx] py-[20rpx] bg-[#fff] fixed left-[182rpx] right-0 top-[105rpx] box-border z-10"},{default:s((()=>[n(G)?(t(),c(p,{key:1},[o(v,{class:"flex-1 h-[48rpx] text-[22rpx] text-[#E2E2E2] px-[24rpx] leading-[48rpx]"},{default:s((()=>[x("全部分类")])),_:1}),o(m,{class:"nc-iconfont nc-icon-shangV6xx-1 transform text-[30rpx] rotate-180",onClick:l[2]||(l[2]=e=>u(G)?G.value=!1:G=!1)})],64)):(t(),c(p,{key:0},[o(S,{"scroll-x":!0,"scroll-with-animation":"","scroll-into-view":"id"+(Y.value?Y.value-1:0),class:"flex-1 box-border px-[24rpx] bg-white"},{default:s((()=>[o(v,{class:"h-[55rpx] items-center flex"},{default:s((()=>{var e;return[(t(!0),c(p,null,d(null==(e=T.value[X.value])?void 0:e.children,((e,l)=>(t(),r(m,{class:w(["flex-shrink-0 px-[24rpx] h-[48rpx] text-[22rpx] leading-[48rpx] border-[2rpx] border-[#E2E2E2] border-solid rounded-[24rpx] border-box mr-[20rpx]",{"sub-tab-active":l===Y.value}]),key:T.value[X.value].category_id,id:"id"+l,onClick:a=>Z(l,e)},{default:s((()=>[x(C(e.category_name),1)])),_:2},1032,["class","id","onClick"])))),128))]})),_:1})])),_:1},8,["scroll-into-view"]),o(m,{class:"nc-iconfont nc-icon-shangV6xx-1 text-[30rpx]",onClick:l[1]||(l[1]=e=>u(G)?G.value=!0:G=!0)})],64))])),_:1})):i("v-if",!0),i(" 二级菜单弹出层 "),o(v,{class:"labelPopup"},{default:s((()=>[o(D,{show:n(G),mode:"top",onClose:l[3]||(l[3]=e=>u(G)?G.value=!1:G=!1),duration:"0"},{default:s((()=>[o(v,{class:"flex flex-wrap py-[24rpx]"},{default:s((()=>{var e;return[(t(!0),c(p,null,d(null==(e=T.value[X.value])?void 0:e.children,((e,l)=>(t(),r(m,{class:w(["flex-shrink-0 w-[160rpx] ml-[22rpx] mb-[24rpx] text-center h-[48rpx] text-[22rpx] leading-[48rpx] border-solid rounded-[24rpx] border-[2rpx] box-border border-[#E2E2E2]",{"sub-tab-active":l===Y.value}]),key:T.value[X.value].category_id,onClick:a=>Z(l,e)},{default:s((()=>[x(C(e.category_name),1)])),_:2},1032,["class","onClick"])))),128))]})),_:1})])),_:1},8,["show"])])),_:1}),o(v,{class:"pl-[182rpx] pt-[20rpx]",style:{width:"calc(100% - 182rpx)"}},{default:s((()=>[(t(!0),c(p,null,d(n(K),((e,l)=>(t(),r(v,{class:w(["bg-white flex px-[24rpx] py-[30rpx] mx-[16rpx] border-0 border-solid border-[#F0F0F0] rounded-[12rpx] box-border",{"mt-[16rpx]":l}]),key:e.goods_id,onClick:l=>{return a=e.goods_id,void F({url:"/addon/vipcard/pages/service/detail",param:{id:a}});var a}},{default:s((()=>[o(R,{class:"w-[168rpx] h-[168rpx] mr-[20rpx] rounded-[12rpx]",src:n(E)(e.cover_thumb_mid),mode:"aspectFill"},null,8,["src"]),o(v,{class:"flex flex-col flex-1 py-[10rpx]"},{default:s((()=>[o(v,{class:"text-sm font-bold multi-hidden"},{default:s((()=>[x(C(e.goods_name),1)])),_:2},1024),o(v,{class:"flex items-center mt-2 text-[#F55246] text-xs"},{default:s((()=>[o(v,null,{default:s((()=>[x("￥"),o(m,{class:"text-base"},{default:s((()=>[x(C(e.price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),o(v,{class:"flex items-center mt-auto justify-between"},{default:s((()=>[o(m,{class:"text-sm text-[#888]"},{default:s((()=>[x(C(n(j)("soldOut"))+" "+C(e.sale_num),1)])),_:2},1024),o(H,{class:"text-[#fff] bg-[var(--primary-color)] px-[27rpx] self-end rounded-3xl text-[26rpx] h-[54rpx] leading-[54rpx] mx-0 mt-auto"},{default:s((()=>[x(C(n(j)("reserveBtn")),1)])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128)),n(K).length||n(Q)||!n(q)?i("v-if",!0):(t(),r(B,{key:0,option:{icon:n(E)("static/resource/images/empty.png")}},null,8,["option"]))])),_:1})]})),_:1},8,["top","onInit"])]})),_:1})):i("v-if",!0),T.value.length||n(Q)?i("v-if",!0):(t(),r(v,{key:1,class:"flex justify-center w-[100%]"},{default:s((()=>[o(B,{option:{icon:n(E)("static/resource/images/empty.png")}},null,8,["option"])])),_:1})),o(W,{loading:n(Q)},null,8,["loading"]),o(ee)])),_:1},8,["style"])}}}),[["__scopeId","data-v-f6ae6cda"]]);export{H as default};
