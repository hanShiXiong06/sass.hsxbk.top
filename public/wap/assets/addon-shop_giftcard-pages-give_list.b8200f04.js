import{d as e,r as a,o as r,c as t,w as l,b as d,U as o,ad as s,V as n,f as i,u as c,n as p,ae as f,af as u,i as _,g as m,h as g,E as x,W as v,y as b,z as h,a as y,B as w,D as j,aw as k,C}from"./index-71c7df08.js";import{_ as F}from"./loading-page.vue_vue_type_script_setup_true_lang.c7dc2256.js";import{a as M}from"./records.6378d415.js";import{M as z}from"./mescroll-body.49de0f6f.js";import{M as E}from"./mescroll-empty.95b8c17e.js";import{u as I}from"./useMescroll.26ccf5de.js";import"./mescroll-i18n.00218d15.js";/* empty css                                                                       */const V=e({__name:"give_list",setup(e){const{mescrollInit:V,downCallback:R,getMescroll:U}=I(u,f),q=a([]),B=a(!0),D=e=>{let a="";return a="balance"==e.card_info.giftcard.card_right_type?"addon/shop_giftcard/diy/index/value_card.jpg":"addon/shop_giftcard/diy/index/redemption_card.jpg",a},N=e=>{B.value=!0;let a={page:e.num,limit:e.size};M(a).then((a=>{let r=a.data.data;1==e.num&&(q.value=[]),q.value=q.value.concat(r),e.endSuccess(r.length),B.value=!1})).catch((()=>{B.value=!1,e.endErr()}))};return(e,a)=>{const f=w,u=j,M=_,I=m(g("u-avatar"),k),R=C,U=m(g("loading-page"),F);return r(),t(M,{class:"bg-[#f8f8f8] min-h-[100vh]",style:p(e.themeColor())},{default:l((()=>[d(z,{ref:"mescrollRef",onInit:c(V),down:{use:!1},onUp:N},{default:l((()=>[q.value.length?(r(),t(M,{key:0,class:"sidebar-margin pt-[var(--top-m)]"},{default:l((()=>[(r(!0),o(n,null,s(q.value,((e,a)=>(r(),t(M,{onClick:a=>{return r=e.member_card_id,void y({url:"/addon/shop_giftcard/pages/give_detail",param:{member_card_id:r}});var r},class:"h-[430rpx] mb-[var(--top-m)] rounded-[var(--rounded-big)] overflow-hidden box-border relative"},{default:l((()=>[e.card_info.card_cover?(r(),t(f,{key:0,class:"w-[100%] h-[100%] rounded-[var(--goods-rounded-big)] overflow-hidden",src:c(x)(e.card_info.card_cover||""),onError:a=>e.card_info.card_cover=D(e),mode:"aspectFill"},null,8,["src","onError"])):(r(),t(f,{key:1,class:"w-[100%] h-[100%] rounded-[var(--goods-rounded-big)] overflow-hidden",src:c(x)(D(e)),mode:"aspectFill"},null,8,["src"])),d(M,{class:"flex flex-col justify-between w-full h-[430rpx] mb-[var(--top-m)] rounded-[var(--rounded-big)] overflow-hidden box-border absolute left-0 top-0 z-5"},{default:l((()=>[d(M,{class:"flex py-[var(--pad-top-m)] px-[var(--pad-sidebar-m)]"},{default:l((()=>[d(M,{class:"flex h-[38rpx] px-[10rpx] bg-[rgba(255,255,255,0.9)] rounded-[19rpx]"},{default:l((()=>[d(u,{class:v(["mr-[8rpx] iconfont !text-[24rpx] !leading-[38rpx]",{"iconchuzhikaV6mm !text-[#EF000C]":"balance"==e.card_info.giftcard.card_right_type,"iconduihuankaV6mm-1 !text-[#FF7700]":"goods"==e.card_info.giftcard.card_right_type}])},null,8,["class"]),"balance"==e.card_info.giftcard.card_right_type?(r(),t(u,{key:0,class:"!text-[26rpx] font-500 !leading-[38rpx]"},{default:l((()=>[b(h(e.card_info.balance),1)])),_:2},1024)):i("v-if",!0),d(u,{class:"!text-[22rpx] font-400 !leading-[38rpx]"},{default:l((()=>["balance"==e.card_info.giftcard.card_right_type?(r(),t(u,{key:0},{default:l((()=>[b("元")])),_:1})):i("v-if",!0),b(h(e.card_info.giftcard.card_right_type_name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),d(M,{class:"flex items-center justify-between bg-[rgba(255,255,255,0.9)] h-[80rpx] px-[var(--pad-sidebar-m)] box-border"},{default:l((()=>[d(M,{class:"flex items-center"},{default:l((()=>[d(I,{src:c(x)(e.giveMember.headimg),size:"54rpx",leftIcon:"none","default-url":c(x)("static/resource/images/default_headimg.png")},null,8,["src","default-url"]),d(M,{class:"w-[250rpx] text-[28rpx] font-400 leading-[38rpx] ml-[8rpx] truncate"},{default:l((()=>[b(h(e.giveMember.nickname),1)])),_:2},1024)])),_:2},1024),d(M,{class:"flex items-center"},{default:l((()=>[d(R,{class:"h-[50rpx] font-500 text-[22rpx] leading-[46rpx] !text-[#333] !bg-transparent m-0 rounded-[25rpx] px-[22rpx] border-[2rpx] border-solid border-[var(--text-color-light9)] box-border ml-[20rpx]"},{default:l((()=>[b("查看详情")])),_:1})])),_:1}),i(' <view class="price-font flex items-baseline" v-if="item.card_info.giftcard.card_right_type==\'balance\'">\r\n\t\t\t\t\t\t\t\t<text class="text-[28rpx] font-400 mr-[4rpx]">￥</text>\r\n\t\t\t\t\t\t\t\t<text class="text-[48rpx] font-500">{{ parseFloat(item.card_info.balance)}}</text>\r\n\t\t\t\t\t\t\t</view> ')])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})):i("v-if",!0),q.value.length||B.value?i("v-if",!0):(r(),t(E,{key:1,option:{tip:"暂无卡记录",icon:c(x)("addon/shop_giftcard/empty.png")}},null,8,["option"]))])),_:1},8,["onInit"]),d(U,{loading:B.value},null,8,["loading"])])),_:1},8,["style"])}}});export{V as default};
