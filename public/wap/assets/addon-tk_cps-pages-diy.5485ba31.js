import{d as a,r as e,a_ as o,p as t,m as l,j as r,a9 as s,a$ as i,s as p,b0 as g,b1 as u,a6 as m,o as n,c as d,w as j,b as c,e as b,v,f,u as h,n as _,U as y,g as S,h as x,i as C,V as k}from"./index-e6ce9fbf.js";import{_ as B}from"./u-loading-page.76c2d95f.js";import{d as w,f as $}from"./index.ee9d8392.js";import{_ as D}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.39fd4711.js";import"./u-transition.6919b33f.js";import"./u-icon.c5d9cd81.js";import"./u-popup.b16d6e1d.js";import"./u-safe-bottom.1ba5bfba.js";import"./u-avatar.d1f888c3.js";import"./u-text.9aefeac5.js";import"./u-parse.eafe216c.js";import"./tabbar.2cc8e58f.js";import"./u-badge.7d0ca9d8.js";import"./u-tabbar.2615c204.js";import"./coupon.fd366af9.js";import"./u--image.2a363e1d.js";import"./u-image.c9386d77.js";import"./goods.9785a1d4.js";import"./point.6f048c3e.js";import"./order.22cff883.js";import"./article.c0ae3d6a.js";import"./goods.45ad32e1.js";import"./u--input.be1d3c0a.js";import"./u-input.b98e66b2.js";import"./technician.da0e3750.js";import"./fenxiao.ed07ad01.js";import"./share-poster.88ccab8c.js";import"./tkjhkd.d6e0286f.js";import"./u-line.ebbd60c6.js";import"./u-row.70d7f72b.js";import"./goto.a2656e8d.js";import"./u-tag.267269e3.js";import"./u-line-progress.ec723c6c.js";import"./mescroll-uni.8af333db.js";import"./mescroll-body.dc3de07c.js";import"./mescroll-uni-option.2f7b06f4.js";import"./mescroll-i18n.6025c811.js";import"./useMescroll.26ccf5de.js";import"./mescroll-empty.b423055b.js";/* empty css                                                                       */import"./bwc.83a8b07d.js";import"./common.828da18f.js";import"./tourism.b22998fc.js";import"./top-tabbar.2f439fc9.js";import"./manifest.78a5c925.js";import"./isArrayLike.512b2e7f.js";const M=D(a({__name:"diy",setup(a){const{setShare:D,onShareAppMessage:M,onShareTimeline:E}=y();M(),E();const A=e(!0),T=o(),I=e(0);let R=e(!1);const G=t({pageMode:"diy",title:"",global:{},value:[]}),H=l((()=>"decorate"==T.mode?T:G)),J=e(0),N=e("DIY_TK_CPS_DIY"),O=e("");r((a=>{T.mode=a.mode||"","decorate"==T.mode&&(A.value=!1),J.value=a.id||"",O.value=a.template||""})),s((()=>{"decorate"==T.mode?T.init():i({id:J.value,name:N.value,template:O.value}).then((a=>{if(a.data.value){let e=a.data;G.pageMode=e.mode,G.title=e.title;let o=JSON.parse(e.value);G.global=o.global,G.value=o.value,G.value.forEach(((a,e)=>{a.pageStyle="",a.pageStartBgColor&&(a.pageStartBgColor&&a.pageEndBgColor?a.pageStyle+=`background:linear-gradient(${a.pageGradientAngle},${a.pageStartBgColor},${a.pageEndBgColor});`:a.pageStyle+="background-color:"+a.pageStartBgColor+";"),a.margin&&(a.pageStyle+="padding-top:"+2*a.margin.top+"rpx;",a.pageStyle+="padding-bottom:"+2*a.margin.bottom+"rpx;",a.pageStyle+="padding-right:"+2*a.margin.both+"rpx;",a.pageStyle+="padding-left:"+2*a.margin.both+"rpx;")})),R.value=G.value.some((a=>a&&a.position&&"top_fixed"==a.position)),p({title:G.title})}let e=a.data.share?JSON.parse(a.data.share):null;D(e),A.value=!1}))}));const U=l((()=>{var a="";return H.value.global.pageStartBgColor&&H.value.global.pageEndBgColor?a+=`background:linear-gradient(${H.value.global.pageGradientAngle},${H.value.global.pageStartBgColor},${H.value.global.pageEndBgColor});`:a+="background-color:"+H.value.global.pageStartBgColor+";",a+="min-height:calc(100vh - 50px);",H.value.global.bgUrl&&(a+=`background-image:url('${k(H.value.global.bgUrl)}');`),H.value.global.bgHeightScale&&(a+=`background-size: 100% ${H.value.global.bgHeightScale}%;`),a}));return g((()=>{I.value++,u()})),m((a=>{T.scrollTop=a.scrollTop})),(a,e)=>{const o=S(x("u-loading-page"),B),t=C;return n(),d(t,{style:_(a.themeColor())},{default:j((()=>[c(o,{loading:A.value,loadingText:"","bg-color":"#f7f7f7"},null,8,["loading"]),b(c(t,null,{default:j((()=>[f(" 自定义模板渲染 "),"fixed"!=h(H).pageMode?(n(),d(t,{key:0,class:"diy-template-wrap bg-index",style:_(h(U))},{default:j((()=>[c(w,{data:h(H),pullDownRefreshCount:I.value},null,8,["data","pullDownRefreshCount"])])),_:1},8,["style"])):f("v-if",!0),f(" 固定模板渲染 "),"fixed"==h(H).pageMode?(n(),d(t,{key:1,class:"fixed-template-wrap"},{default:j((()=>[c($,{data:h(H),pullDownRefreshCount:I.value},null,8,["data","pullDownRefreshCount"])])),_:1})):f("v-if",!0)])),_:1},512),[[v,!A.value]])])),_:1},8,["style"])}}}),[["__scopeId","data-v-0bf29936"]]);export{M as default};
