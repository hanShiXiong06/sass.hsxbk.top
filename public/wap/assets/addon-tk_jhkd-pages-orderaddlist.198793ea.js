import{bu as e,d as a,r as t,j as s,o as l,I as o,b as r,w as d,u as n,c as u,K as i,J as c,f as p,a3 as f,a4 as m,i as _,a2 as k,g,h as v,L as j,y as h,z as b,l as x}from"./index-d8a8f699.js";import{_ as y}from"./tabbar.fdead755.js";import{_ as w}from"./pay.9a75868d.js";import{M as C}from"./mescroll-body.f9302aea.js";import{M as I}from"./mescroll-empty.2fe85dec.js";import{u as M}from"./useMescroll.26ccf5de.js";import{g as S}from"./goto.53a8b62a.js";import{_ as E}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.5ba98c98.js";import"./u-badge.d38c6915.js";import"./u-tabbar.5fed7184.js";import"./u-safe-bottom.a4431b09.js";import"./u-image.e646392b.js";import"./u-transition.db07fff7.js";import"./u-popup.0d48946e.js";import"./pay.974edcbe.js";import"./mescroll-i18n.49872024.js";const z=E(a({__name:"orderaddlist",setup(a){const E=t(null),z=t(!1),{mescrollInit:D,downCallback:U,getMescroll:O}=M(m,f);let R=t([]),Y=t(!1),Z=t(!1),$=t(""),A=t([]);t([]),s((e=>{$.value=e.status||"0",K()}));const B=async a=>{await function(a){return e.delete(`tk_jhkd/deleteorderadd/${a}`,{showSuccessMessage:!0,showErrorMessage:!0})}(a),O().resetUpScroll()},J=a=>{Y.value=!1;let t={page:a.num,limit:a.size,order_status:$.value};console.log($.value),function(a){return e.get("tk_jhkd/getorderaddlist",a)}(t).then((e=>{let t=e.data.data;1==a.num&&(R.value=[]),R.value=R.value.concat(t),a.endSuccess(t.length),Y.value=!0})).catch((()=>{Y.value=!0,a.endErr()}))},K=()=>{Z.value=!1,A.value=[],e.get("tk_jhkd/getorderaddstatus").then((e=>{Object.values(e.data).forEach(((e,a)=>{A.value.push(e)})),Z.value=!0})).catch((()=>{Z.value=!0}))};return(e,a)=>{const t=_,s=k,f=g(v("tabbar"),y),m=g(v("pay"),w);return l(),o(i,null,[r(t,{class:"bg-[#f8f8f8] min-h-screen overflow-hidden"},{default:d((()=>[n(Z)?(l(),u(t,{key:0,class:"fixed left-0 top-0 right-0 z-10"},{default:d((()=>[r(s,{"scroll-x":"true",class:"scroll-Y box-border px-[24rpx] bg-white"},{default:d((()=>[r(t,{class:"flex whitespace-nowrap justify-around"},{default:d((()=>[(l(!0),o(i,null,c(n(A),((e,a)=>(l(),u(t,{class:j(["text-sm leading-[90rpx]",{"class-select":n($)===e.status.toString()}]),onClick:a=>{return t=e.status,$.value=t.toString(),R.value=[],void O().resetUpScroll();var t}},{default:d((()=>[h(b(e.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1})):p("v-if",!0),r(C,{ref:"mescrollRef",top:"44rpx",onInit:n(D),onDown:n(U),onUp:J},{default:d((()=>[n(R).length>0?(l(!0),o(i,{key:0},c(n(R),((e,a)=>(l(),u(t,{class:"tk-card",key:"index"},{default:d((()=>[r(t,{class:"text-xs font-weight",onClick:a=>n(S)("/addon/tk_jhkd/pages/orderdetail?id="+e.orderInfo.id)},{default:d((()=>[h("订单号:"+b(e.order_id),1)])),_:2},1032,["onClick"]),r(t,{class:"fb items-center"},{default:d((()=>[r(t,{class:"text-xs"},{default:d((()=>[h(b(e.create_time),1)])),_:2},1024),0==e.order_status?(l(),u(t,{key:0,class:"tk-tag",onClick:a=>(e=>{var a;z.value=!0,null==(a=E.value)||a.open("jhkdOrderAddPay",e.id,"/addon/tk_jhkd/pages/orderaddlist")})(e)},{default:d((()=>[h("立即支付")])),_:2},1032,["onClick"])):p("v-if",!0),1==e.order_status?(l(),u(t,{key:1,class:"tk-tag",onClick:a=>B(e.id)},{default:d((()=>[h("删除订单")])),_:2},1032,["onClick"])):p("v-if",!0)])),_:2},1024)])),_:2},1024)))),128)):p("v-if",!0),!n(R).length&&n(Y)?(l(),u(I,{key:1,option:{icon:n(x)("static/resource/images/empty.png")}},null,8,["option"])):p("v-if",!0)])),_:1},8,["onInit","onDown"])])),_:1}),r(f,{addon:"tk_jhkd"}),r(m,{ref_key:"payRef",ref:E,onClose:a[0]||(a[0]=e=>z.value=!1)},null,512)],64)}}}),[["__scopeId","data-v-cbf82d75"]]);export{z as default};
