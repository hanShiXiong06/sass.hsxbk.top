import{d as e,l as t,r as l,p as a,u as r,o as s,c as p,w as o,b as n,P as x,a7 as i,Q as u,f as d,n as f,a8 as c,a9 as m,i as _,a6 as v,g,h,R as b,y,z as w,a as F,D as k,C as j}from"./index-7bf68536.js";import{_ as C}from"./pay.d2e850e8.js";import{f as B,h as z,c as E}from"./coupon.068511c5.js";import{M as S}from"./mescroll-body.b6d57b41.js";import{M as A}from"./mescroll-empty.fcefb74e.js";import{u as M}from"./useMescroll.26ccf5de.js";import{_ as D}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.e46f68ef.js";import"./u-icon.0c1c54c7.js";import"./u-transition.cdf87992.js";import"./u-popup.be4bfacd.js";import"./u-safe-bottom.908eeae4.js";import"./pay.2db06871.js";import"./mescroll-i18n.14e7fe02.js";/* empty css                                                                       */const I=D(e({__name:"my_coupon",setup(e){const D=t(),{mescrollInit:I,downCallback:H,getMescroll:R}=M(m,c),U=l([]),Q=l(!1),N=l([]),P=l(1),Y=e=>{Q.value=!1;let t={page:e.num,limit:e.size,status:P.value,type:G.value};z(t).then((t=>{let l=t.data.data;1==e.num&&(U.value=[]),U.value=U.value.concat(l),e.endSuccess(l.length),Q.value=!0})).catch((()=>{Q.value=!0,e.endErr()}))},q=l(0),G=l("all"),J=l([]);a((()=>{E().then((e=>{J.value.push({label:"全部",value:"all"}),J.value=J.value.concat(e.data)})),B().then((e=>{N.value=e.data.filter((e=>4!=e.status))}))}));return(e,t)=>{const l=_,a=v,c=k,m=j,B=g(h("pay"),C);return r(D).info?(s(),p(l,{key:0,class:"bg-[#f8f8f8] min-h-screen overflow-hidden",style:f(e.themeColor())},{default:o((()=>[n(l,{class:"fixed left-0 top-0 right-0 z-10"},{default:o((()=>[n(a,{"scroll-x":!0,class:"scroll-Y box-border px-[var(--sidebar-m)] bg-white"},{default:o((()=>[n(l,{class:"flex whitespace-nowrap justify-around items-center h-[88rpx]"},{default:o((()=>[(s(!0),x(u,null,i(N.value,((e,t)=>(s(),p(l,{class:b(["text-[28rpx] text-[#626779] h-[40rpx] leading-[40rpx]",{"class-select !text-primary":P.value===e.status}]),onClick:t=>{return l=e.status,P.value=l,U.value=[],void R().resetUpScroll();var l}},{default:o((()=>[y(w(e.status_name)+"("+w(e.count)+")",1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1}),n(a,{"scroll-x":!0,"scroll-with-animation":"","scroll-into-view":"id"+(q.value?q.value-1:0),class:"px-[var(--sidebar-m)] box-border bg-white"},{default:o((()=>[n(l,{class:"items-center flex h-[88rpx]"},{default:o((()=>[(s(!0),x(u,null,i(J.value,((e,t)=>(s(),p(c,{class:b(["flex-shrink-0 w-[120rpx] h-[50rpx] text-[24rpx] leading-[48rpx] text-center text-[#626779] bg-[#F8F9FD] rounded-[30rpx] box-border mr-[20rpx] border-[2rpx] border-solid border-[#F8F9FD]",{"!text-primary !border-primary !bg-[rgba(239,0,12,0.04)]":e.value==G.value}]),key:t,id:"id"+t,onClick:l=>((e,t)=>{q.value=e,G.value=t,U.value=[],R().resetUpScroll()})(t,e.value)},{default:o((()=>[y(w(e.label),1)])),_:2},1032,["class","id","onClick"])))),128))])),_:1})])),_:1},8,["scroll-into-view"])])),_:1}),n(S,{ref:"mescrollRef",top:"176rpx",onInit:r(I),down:{use:!1},onUp:Y},{default:o((()=>[U.value.length?(s(),p(l,{key:0,class:"py-[20rpx] px-[var(--sidebar-m)]"},{default:o((()=>[(s(!0),x(u,null,i(U.value,((e,t)=>(s(),x(u,null,[1!=P.value?(s(),p(l,{key:0,class:b(["flex items-center relative w-[100%] rounded-[16rpx] overflow-hidden bg-[#fff]",{"mt-[20rpx]":t}])},{default:o((()=>[n(l,{class:b(["w-[180rpx] h-[160rpx] flex flex-col items-center justify-center rounded-[16rpx] relative coupon-item",{"bg-[#ffb4b1]":2==P.value,"bg-[#ffe2e4]":3==P.value}])},{default:o((()=>[n(l,{class:b(["price-font flex items-baseline",{"text-[#fff]":2==P.value,"text-[#FFB4B1]":3==P.value}])},{default:o((()=>[n(c,{class:"text-[24rpx] leading-[34rpx] mr-[2rpx] text-center price-font font-500"},{default:o((()=>[y("￥")])),_:1}),n(c,{class:"text-[46rpx] font-500 leading-[58rpx] price-font truncate"},{default:o((()=>[y(w(e.coupon_price),1)])),_:2},1024)])),_:2},1032,["class"]),n(c,{class:b(["truncate max-w-[176rpx] mt-[6rpx] text-[22rpx] h-[32rpx] leading-[32rpx]",{"text-[#fff]":2==P.value,"text-[#FFB4B1]":3==P.value}])},{default:o((()=>[y(w(e.title),1)])),_:2},1032,["class"])])),_:2},1032,["class"]),n(l,{class:"ml-[30rpx] flex-1"},{default:o((()=>[n(l,{class:"text-[28rpx] leading-[40rpx] text-left font-500"},{default:o((()=>["0.00"===e.min_condition_money?(s(),p(c,{key:0},{default:o((()=>[y("无门槛")])),_:1})):(s(),p(c,{key:1},{default:o((()=>[y("满"+w(e.coupon_min_price)+"元可用",1)])),_:2},1024))])),_:2},1024),n(l,{class:"mt-[6rpx] flex items-center"},{default:o((()=>[n(c,{class:"bg-[#FFEFF0] whitespace-nowrap text-[#EF000C] text-[20rpx] h-[28rpx] leading-[28rpx] px-[10rpx] rounded-[14rpx] mr-[10rpx] flex-shrink-0"},{default:o((()=>[y(w(e.type_name),1)])),_:2},1024),n(c,{class:"truncate max-w-[226rpx] text-[24rpx] text-[#8288A2] leading-[34rpx]"},{default:o((()=>[y(w(e.title),1)])),_:2},1024)])),_:2},1024),n(l,{class:"w-[100%] mt-[6rpx] text-[24rpx] leading-[34rpx] text-[#8288A2]"},{default:o((()=>[n(c,null,{default:o((()=>[y("有效期至"),n(c,null,{default:o((()=>[y(w(e.expire_time?e.expire_time.slice(0,10):""),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),n(l,{class:"px-[20rpx]"},{default:o((()=>[2==P.value?(s(),p(m,{key:0,class:"rounded-full remove-border",style:{width:"120rpx",height:"54rpx",color:"#fff",fontSize:"26rpx",lineHeight:"54rpx",padding:"0",border:"none",backgroundColor:"#FFB4B1"}},{default:o((()=>[y("已使用")])),_:1})):d("v-if",!0),3==P.value?(s(),p(m,{key:1,class:"rounded-full remove-border",style:{width:"120rpx",height:"54rpx",color:"#FFB4B1",fontSize:"26rpx",lineHeight:"54rpx",padding:"0",border:"none",backgroundColor:"#FFE2E4"}},{default:o((()=>[y("已过期")])),_:1})):d("v-if",!0)])),_:1})])),_:2},1032,["class"])):(s(),p(l,{key:1,class:b(["flex items-center relative w-[100%] rounded-[16rpx] overflow-hidden bg-[#fff]",{"mt-[20rpx]":t}])},{default:o((()=>[n(l,{class:"coupon-bg w-[180rpx] h-[160rpx] flex flex-col items-center justify-center rounded-[16rpx] relative coupon-item"},{default:o((()=>[n(l,{class:"price-font flex items-baseline text-[#fff]"},{default:o((()=>[n(c,{class:"text-[24rpx] leading-[34rpx] mr-[2rpx] text-center price-font font-500"},{default:o((()=>[y("￥")])),_:1}),n(c,{class:"text-[46rpx] font-500 leading-[58rpx] price-font truncate"},{default:o((()=>[y(w(e.coupon_price),1)])),_:2},1024)])),_:2},1024),n(c,{class:"truncate max-w-[176rpx] mt-[6rpx] text-[22rpx] text-[#fff] h-[32rpx] leading-[32rpx]"},{default:o((()=>[y(w(e.title),1)])),_:2},1024)])),_:2},1024),n(l,{class:"ml-[30rpx] flex-1"},{default:o((()=>[n(l,{class:"text-[28rpx] leading-[40rpx] text-left font-500"},{default:o((()=>["0.00"===e.min_condition_money?(s(),p(c,{key:0},{default:o((()=>[y("无门槛")])),_:1})):(s(),p(c,{key:1},{default:o((()=>[y("满"+w(e.coupon_min_price)+"元可用",1)])),_:2},1024))])),_:2},1024),n(l,{class:"text-[20rpx] mt-[6rpx] flex items-center"},{default:o((()=>[n(c,{class:"bg-[#FFEFF0] whitespace-nowrap text-[#EF000C] text-[20rpx] h-[28rpx] leading-[28rpx] px-[10rpx] rounded-[14rpx] mr-[10rpx] flex-shrink-0"},{default:o((()=>[y(w(e.type_name),1)])),_:2},1024),n(c,{class:"truncate max-w-[226rpx] text-[24rpx] text-[#8288A2] leading-[34rpx]"},{default:o((()=>[y(w(e.title),1)])),_:2},1024)])),_:2},1024),n(l,{class:"w-[100%] mt-[6rpx] text-[24rpx] leading-[34rpx] text-[#8288A2]"},{default:o((()=>[n(c,null,{default:o((()=>[y("有效期至"),n(c,null,{default:o((()=>[y(w(e.expire_time?e.expire_time.slice(0,10):""),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),1===P.value?(s(),p(l,{key:0,class:"px-[20rpx]"},{default:o((()=>[n(m,{"hover-class":"none",class:"rounded-full remove-border primary-btn-bg",style:{width:"120rpx",height:"54rpx",color:"#fff",fontSize:"26rpx",lineHeight:"54rpx",padding:"0",border:"none"},onClick:t=>{return l=e.coupon_id,void F({url:"/addon/phone_shop/pages/goods/list",param:{coupon_id:l}});var l}},{default:o((()=>[y("去使用")])),_:2},1032,["onClick"])])),_:2},1024)):d("v-if",!0)])),_:2},1032,["class"]))],64)))),256))])),_:1})):d("v-if",!0),!U.value.length&&Q.value?(s(),p(l,{key:1,class:"noData my-[20rpx] mx-[24rpx] rounded-[20rpx] flex items-center justify-center"},{default:o((()=>[n(A,{option:{tip:"暂无优惠券"}})])),_:1})):d("v-if",!0)])),_:1},8,["onInit"]),n(B,{ref:"payRef"},null,512)])),_:1},8,["style"])):d("v-if",!0)}}}),[["__scopeId","data-v-63ea3adb"]]);export{I as default};
