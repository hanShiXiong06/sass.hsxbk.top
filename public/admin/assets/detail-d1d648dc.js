import{d as oe,x as ae,f as le,r as m,h as n,c as i,e as r,w as p,u as a,R as ne,s as b,a as s,t,q as o,B as d,F as R,T as L,A as ie,i as D,a5 as j,a3 as O,aR as re,a7 as pe,L as de,aN as ce,aO as _e,ad as ue,ae as xe,ab as me,M as ve,Y as fe,p as he,g as ye}from"./index-99f00cf3.js";/* empty css                   *//* empty css                *//* empty css                 *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                        *//* empty css               *//* empty css               *//* empty css               */import"./el-form-item-4ed993c7.js";/* empty css                *//* empty css                   *//* empty css                       */import{w as be,x as ge,y as ke}from"./order-b4e82541.js";import{p as we}from"./printer-3e218f66.js";import{_ as De}from"./delivery-action.vue_vue_type_style_index_0_lang-afea4db4.js";import{_ as Fe}from"./order-notes.vue_vue_type_style_index_0_lang-e53f049c.js";import{_ as Ce}from"./order-edit-address.vue_vue_type_style_index_0_lang-3d4f24ba.js";import{_ as Ee}from"./delivery-package.vue_vue_type_style_index_0_lang-09ba56e8.js";import{_ as Te}from"./adjust-money.vue_vue_type_style_index_0_lang-42975915.js";import{_ as Ae}from"./electronic-sheet-print.vue_vue_type_style_index_0_lang-906621ab.js";import{_ as Ne}from"./shop-active-refund.vue_vue_type_style_index_0_lang-38351ddf.js";import{_ as $e}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                 *//* empty css                  *//* empty css                  *//* empty css                       *//* empty css                 *//* empty css                 */import"./delivery-8329da8a.js";import"./weapp-3dcfdbcd.js";import"./electronic_sheet-55bf5788.js";import"./lodop-ed3e665c.js";import"./qqmap-011f3cfb.js";/* empty css                    */const Be=g=>(he("data-v-9c31cf41"),g=g(),ye(),g),Me={class:"main-container"},Re={class:"panel-title"},Ie={class:"input-width"},Se={class:"input-width"},Le={class:"input-width"},je={class:"input-width"},Oe={class:"input-width"},Pe={key:0},Ve={class:"input-width"},qe={class:"input-width"},ze={class:"input-width"},Ge={key:1},He={class:"input-width"},Ye={class:"input-width"},Je={class:"input-width"},Ke={class:"input-width"},Qe={class:"input-width line-feed"},Ue={class:"input-width line-feed"},We={class:"panel-title"},Xe={class:"mb-[20px]"},Ze={class:"ml-[30px] text-[14px] mr-[20px]"},et={class:"text-[14px]"},tt={class:"flex mt-[10px]"},st={key:8,class:"flex"},ot=["onClick"],at=["onClick"],lt={class:"flex ml-[30px] mt-[15px]"},nt={class:"text-[14px] text-[#ff7f5b]"},it={class:"ml-[10px]"},rt={class:"text-[14px] text-[#a4a4a4]"},pt={class:"text-[14px] text-[#a4a4a4]"},dt={class:"text-[14px] text-[#a4a4a4]"},ct={class:"panel-title"},_t={class:"flex"},ut={class:"flex items-center shrink-0"},xt=["src"],mt={class:"flex flex-col"},vt={class:"multi-hidden text-[14px]"},ft={class:"text-[12px] text-[#999]"},ht={class:"flex flex-col"},yt={key:0},bt={key:0},gt={key:1,class:"text-[13px]"},kt={key:2,class:"text-[13px] mt-[5px]"},wt={key:0},Dt={class:"text-[#999]"},Ft={key:1},Ct={key:3,class:"text-[13px] mt-[5px]"},Et={class:"py-[12px] px-[16px] border-b border-color flex justify-end"},Tt={class:"w-[310px] flex flex-col text-right"},At={class:"flex mb-[10px]"},Nt={class:"text-base flex-1"},$t={class:"text-base flex-1 pl-[30px]"},Bt={key:0,class:"text-[14px]"},Mt={key:0},Rt={key:1,class:"text-[14px]"},It={class:"flex mb-[10px]"},St={class:"text-base flex-1"},Lt={class:"text-base flex-1 pl-[30px]"},jt={class:"flex mb-[10px]"},Ot={class:"text-base flex-1"},Pt={class:"text-base flex-1 pl-[30px]"},Vt={class:"flex"},qt={class:"text-base flex-1"},zt={class:"text-base flex-1 pl-[30px] text-[red]"},Gt={key:0,class:"text-[14px]"},Ht={key:0},Yt={key:1,class:"text-[14px]"},Jt={key:0,class:"mt-[50px] mb-[20px]"},Kt={key:1,class:"mb-[100px]",style:{"min-height":"100px"}},Qt={class:"mr-[20px] min-w-[71px]"},Ut={class:"leading-[1] w-full text-[14px] w-[100px] flex justify-end"},Wt={class:"leading-[1] w-full text-[14px] w-[100px] flex justify-end mt-[15px]"},Xt=Be(()=>s("div",{class:"w-[16px] h-[16px] flex items-center bg-[#D1EBFF] border-[1px] border-[#0091FF] rounded-[999px]"},[s("div",{class:"w-[8px] h-[8px] mx-auto bg-[#0091FF] rounded-[999px]"})],-1)),Zt={key:0,class:"w-[2px] h-[50px] bg-[#D1EBFF] mx-auto"},es={class:"leading-[1] ml-[20px] text-[14px]"},ts={class:"leading-[1] ml-[20px] text-[14px] mt-[15px]"},ss={class:"ml-[10px]"},os=oe({__name:"detail",setup(g){const I=ae(),P=le(),V=I.meta.title,x=parseInt(I.query.order_id),f=m(!0),e=m(null),v=async(u=0)=>{f.value=!0,e.value=null,await be(u).then(({data:_})=>{e.value=_;let w=0;e.value.order_goods.forEach((h,c)=>{h.status==1&&w++}),e.value.is_refund_show=w>0,console.log("formData.value",e.value)}).catch(()=>{}),f.value=!1};x?v(x):f.value=!1;const q=()=>{j.confirm(o("orderCloseTips"),o("warning"),{confirmButtonText:o("confirm"),cancelButtonText:o("cancel"),type:"warning"}).then(()=>{ge(x).then(()=>{v(x)})})},F=m(null),z=()=>{F.value.setFormData(e.value),F.value.showDialog=!0},C=m(null),G=()=>{C.value.setFormData(e.value),C.value.showDialog=!0},E=m(null),H=()=>{E.value.setFormData(e.value),E.value.showDialog=!0},Y=()=>{j.confirm(o("orderFinishTips"),o("warning"),{confirmButtonText:o("confirm"),cancelButtonText:o("cancel"),type:"warning"}).then(()=>{ke(x).then(()=>{v(x)})})},T=m(null),S=(u,_)=>{T.value.setFormData(u,_),T.value.showDialog=!0},A=m(null),J=()=>{let u={print_type:"single"};Object.assign(u,O(e.value)),A.value.setFormData(u),A.value.showDialog=!0},k=m(!1),N=m(null),K=async()=>{let u=O(e.value);N.value.showDialog=!0,N.value.setFormData(u)},Q=()=>{e.value.order_id&&(k.value||(k.value=!0,we({type:"shopGoodsOrder",trigger:"manual",business:{order_id:e.value.order_id}}).then(u=>{k.value=!1}).catch(()=>{k.value=!1})))},$=m(null),U=()=>{$.value.setFormData(e.value),$.value.showDialog=!0};return(u,_)=>{const w=re,h=pe,c=de,B=ce,W=_e,M=ue,X=xe,Z=me,ee=ve,te=fe;return n(),i("div",Me,[r(h,{class:"card !border-none mb-[15px]",shadow:"never"},{default:p(()=>[r(w,{content:a(V),icon:u.ArrowLeft,onBack:_[0]||(_[0]=l=>a(P).push({path:"/shop/order/index"}))},null,8,["content","icon"])]),_:1}),ne((n(),b(ee,{model:e.value,"label-width":"100px",ref:"formRef",class:"page-form","label-position":"left"},{default:p(()=>[e.value?(n(),b(h,{key:0,class:"box-card !border-none relative",shadow:"never"},{default:p(()=>[s("h3",Re,t(a(o)("orderInfo")),1),r(W,{class:"row-bg px-[30px] mb-[20px]",gutter:20},{default:p(()=>[r(B,{span:8},{default:p(()=>[r(c,{label:a(o)("orderNo")},{default:p(()=>[s("div",Ie,t(e.value.order_no),1)]),_:1},8,["label"]),r(c,{label:a(o)("orderForm")},{default:p(()=>[s("div",Se,t(e.value.order_from_name),1)]),_:1},8,["label"]),e.value.out_trade_no?(n(),b(c,{key:0,label:a(o)("outTradeNo")},{default:p(()=>[s("div",Le,t(e.value.out_trade_no),1)]),_:1},8,["label"])):d("",!0),e.value.pay?(n(),b(c,{key:1,label:a(o)("payType")},{default:p(()=>[s("div",je,t(e.value.pay.type_name),1)]),_:1},8,["label"])):d("",!0)]),_:1}),r(B,{span:8},{default:p(()=>[r(c,{label:a(o)("deliveryType")},{default:p(()=>[s("div",Oe,t(e.value.delivery_type_name),1)]),_:1},8,["label"]),e.value.delivery_type=="express"||e.value.delivery_type=="local_delivery"?(n(),i("div",Pe,[r(c,{label:a(o)("takerName")},{default:p(()=>[s("div",Ve,t(e.value.taker_name),1)]),_:1},8,["label"]),r(c,{label:a(o)("takerMobile")},{default:p(()=>[s("div",qe,t(e.value.taker_mobile),1)]),_:1},8,["label"]),r(c,{label:a(o)("takerFullAddress")},{default:p(()=>[s("div",ze,t(e.value.taker_full_address),1)]),_:1},8,["label"])])):d("",!0),e.value.delivery_type=="store"?(n(),i("div",Ge,[r(c,{label:a(o)("storeName")},{default:p(()=>[s("div",He,t(e.value.store.store_name),1)]),_:1},8,["label"]),r(c,{label:a(o)("storeAddress")},{default:p(()=>[s("div",Ye,t(e.value.store.full_address),1)]),_:1},8,["label"]),r(c,{label:a(o)("storeMobile")},{default:p(()=>[s("div",Je,t(e.value.store.store_mobile),1)]),_:1},8,["label"]),r(c,{label:a(o)("tradeTime")},{default:p(()=>[s("div",Ke,t(e.value.store.trade_time),1)]),_:1},8,["label"])])):d("",!0)]),_:1}),r(B,{span:8},{default:p(()=>[r(c,{label:a(o)("memberRemark")},{default:p(()=>[s("div",Qe,t(e.value.member_remark??"--"),1)]),_:1},8,["label"]),r(c,{label:a(o)("notes")},{default:p(()=>[s("div",Ue,t(e.value.shop_remark??"--"),1)]),_:1},8,["label"])]),_:1})]),_:1}),s("h3",We,t(a(o)("orderStatus")),1),s("div",Xe,[s("p",null,[s("span",Ze,t(a(o)("orderStatus"))+"：",1),s("span",et,t(e.value.status_name.name),1)]),s("div",tt,[s("span",{class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#ff7f5b] bg-[#fff0e5] cursor-pointer",onClick:H},t(a(o)("notes")),1),e.value.status==2?(n(),i("span",{key:0,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:G},t(a(o)("delivery")),1)):d("",!0),e.value.status==1?(n(),i("span",{key:1,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:q},t(a(o)("close")),1)):d("",!0),e.value.status==1?(n(),i("span",{key:2,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:z},t(a(o)("editPrice")),1)):d("",!0),e.value.status==3?(n(),i("span",{key:3,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:Y},t(a(o)("finish")),1)):d("",!0),e.value.delivery_type=="express"&&e.value.status==3?(n(),i("span",{key:4,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:J},t(a(o)("electronicSheetPrintTitle")),1)):d("",!0),e.value.delivery_type=="virtual"&&(e.value.status==2||e.value.status==3||e.value.status==5)?(n(),i("span",{key:5,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:Q},t(a(o)("printTicket")),1)):d("",!0),e.value.status==1&&e.value.delivery_type!="virtual"&&e.value.activity_type!="giftcard"?(n(),i("span",{key:6,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:K},t(a(o)("editAddress")),1)):d("",!0),e.value.is_refund_show&&e.value.status!=1&&e.value.status!=-1&&e.value.is_enable_refund==1?(n(),i("span",{key:7,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:U},t(a(o)("voluntaryRefund")),1)):d("",!0),e.value.order_delivery?(n(),i("div",st,[(n(!0),i(R,null,L(e.value.order_delivery,(l,y)=>(n(),i(R,{key:y},[l.delivery_type=="express"&&l.sub_delivery_type=="express"?(n(),i("span",{key:0,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#ff7f5b] bg-[#fff0e5] cursor-pointer",onClick:se=>S(l.id,e.value.taker_mobile)},t(a(o)("package"))+t(y+1),9,ot)):d("",!0),l.delivery_type=="express"&&l.sub_delivery_type=="none_express"?(n(),i("span",{key:1,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#ff7f5b] bg-[#fff0e5] cursor-pointer",onClick:se=>S(l.id,e.value.taker_mobile)},t(a(o)("noLogisticsRequired")),9,at)):d("",!0)],64))),128))])):d("",!0)]),s("div",lt,[s("span",nt,t(a(o)("remind"))+"：",1),s("div",it,[s("p",rt,t(a(o)("remindTips1")),1),s("p",pt,t(a(o)("remindTips2")),1),s("p",dt,t(a(o)("remindTips3")),1)])])]),s("h3",ct,t(a(o)("goodsDetail")),1),r(X,{data:e.value.order_goods,size:"large"},{default:p(()=>[r(M,{label:a(o)("goodsName"),align:"left",width:"300"},{default:p(({row:l})=>[s("div",_t,[s("div",ut,[s("img",{class:"w-[50px] h-[50px] mr-[10px]",src:a(ie)(l.goods_image)},null,8,xt)]),s("div",mt,[s("p",vt,t(l.goods_name),1),s("span",ft,t(l.sku_name),1)])])]),_:1},8,["label"]),r(M,{label:a(o)("price"),"min-width":"50",align:"left"},{default:p(({row:l})=>[s("div",ht,[e.value.activity_type=="exchange"?(n(),i("span",yt,[D(t(l.extend.point)+t(a(o)("point"))+" ",1),parseFloat(l.price)?(n(),i("span",bt,"+￥"+t(l.price),1)):d("",!0)])):(n(),i("span",gt,"￥"+t(l.price),1)),l.extend&&l.extend.newcomer_price?(n(),i("span",kt,[parseFloat(l.extend.newcomer_price)&&l.num>1?(n(),i("span",wt,[D(t(l.num)+t(a(o)("piece")),1),s("span",Dt,"（第1"+t(a(o)("piece"))+"，￥"+t(parseFloat(l.extend.newcomer_price).toFixed(2))+"/"+t(a(o)("piece"))+"；第"+t(l.num>2?"2~"+l.num:"2")+t(a(o)("piece"))+"，￥"+t(parseFloat(l.price).toFixed(2))+"/"+t(a(o)("piece"))+"）",1)])):(n(),i("span",Ft,t(l.num)+t(a(o)("piece")),1))])):(n(),i("span",Ct,t(l.num)+t(a(o)("piece")),1))])]),_:1},8,["label"]),r(M,{prop:"num",label:a(o)("num"),"min-width":"50",align:"right"},null,8,["label"])]),_:1},8,["data"]),s("div",Et,[s("div",Tt,[s("div",At,[s("div",Nt,t(a(o)("goodsMoney")),1),s("div",$t,[e.value.activity_type=="exchange"?(n(),i("span",Bt,[D(t(e.value.point)+t(a(o)("point"))+" ",1),parseFloat(e.value.goods_money)?(n(),i("span",Mt,"+￥"+t(e.value.goods_money),1)):d("",!0)])):(n(),i("span",Rt,"￥"+t(e.value.goods_money),1))])]),s("div",It,[s("div",St,t(a(o)("discountMoney")),1),s("div",Lt,t(e.value.discount_money),1)]),s("div",jt,[s("div",Ot,t(a(o)("deliveryMoney")),1),s("div",Pt,t(e.value.delivery_money),1)]),s("div",Vt,[s("div",qt,t(a(o)("orderMoney")),1),s("div",zt,[e.value.activity_type=="exchange"?(n(),i("span",Gt,[D(t(e.value.point)+t(a(o)("point"))+" ",1),parseFloat(e.value.order_money)?(n(),i("span",Ht,"+￥"+t(e.value.order_money),1)):d("",!0)])):(n(),i("span",Yt,"￥"+t(e.value.order_money),1))])])])]),e.value.order_log.length>0?(n(),i("h3",Jt,t(a(o)("operateLog")),1)):d("",!0),e.value.order_log.length>0?(n(),i("div",Kt,[(n(!0),i(R,null,L(e.value.order_log,(l,y)=>(n(),i("div",{class:"flex",key:y},[s("div",Qt,[s("div",Ut,t(l.create_time&&l.create_time.split(" ")[0]),1),s("div",Wt,t(l.create_time&&l.create_time.split(" ")[1]),1)]),s("div",null,[Xt,y+1!=e.value.order_log.length?(n(),i("div",Zt)):d("",!0)]),s("div",null,[s("div",es,t(l.main_type_name)+t(l.main_name),1),s("div",ts,[s("span",null,t(l.type_name),1),s("span",ss,t(l.content),1)])])]))),128))])):d("",!0)]),_:1})):d("",!0),!f.value&&!e.value?(n(),b(h,{key:1,class:"box-card !border-none relative",shadow:"never"},{default:p(()=>[r(Z,{description:a(o)("orderInfoEmpty")},null,8,["description"])]),_:1})):d("",!0)]),_:1},8,["model"])),[[te,f.value]]),r(Te,{ref_key:"orderAdjustMoneyActionDialog",ref:F,onComplete:_[1]||(_[1]=l=>v(a(x)))},null,512),r(De,{ref_key:"deliveryActionDialog",ref:C,onComplete:_[2]||(_[2]=l=>v(a(x)))},null,512),r(Fe,{ref_key:"orderNotesDialog",ref:E,onComplete:_[3]||(_[3]=l=>v(a(x)))},null,512),r(Ee,{ref_key:"packageDialog",ref:T},null,512),r(Ae,{ref_key:"electronicSheetPrintDialog",ref:A,onComplete:u.loadOrderList},null,8,["onComplete"]),r(Ce,{ref_key:"orderEditAddressDialog",ref:N,onComplete:u.loadOrderList},null,8,["onComplete"]),r(Ne,{ref_key:"shopActiveRefundDialog",ref:$,onComplete:_[4]||(_[4]=l=>v(a(x)))},null,512)])}}});const Ys=$e(os,[["__scopeId","data-v-9c31cf41"]]);export{Ys as default};
