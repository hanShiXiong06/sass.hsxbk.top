import{d as U,x as L,f as R,n as j,r as y,h as C,c as I,e as t,w as i,a as d,t as s,u as e,i as c,q as o,R as S,s as q,a5 as K,aq as W,U as Y,E as A,ay as H,az as J,K as O,L as Q,M as X,a7 as Z,ad as ee,ae as te,W as ae,Y as oe}from"./index-99f00cf3.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                    *//* empty css                  */import{k as le,l as re,m as ne}from"./material-c5754327.js";import{_ as ie}from"./material-group-edit.vue_vue_type_style_index_0_lang-81c87ced.js";/* empty css                  *//* empty css                   */const se={class:"main-container"},pe={class:"flex justify-between items-center"},me={class:"text-lg"},de={class:"mt-[10px]"},ue={class:"mt-[16px] flex justify-end"},ze=U({__name:"material_group",setup(ce){const k=L(),E=R(),w=k.meta.title;let a=j({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{group_name:""}});const f=y(),p=(n=1)=>{a.loading=!0,a.page=n,le({page:a.page,limit:a.limit,...a.searchParam}).then(l=>{a.loading=!1,a.data=l.data.data,a.total=l.data.total}).catch(()=>{a.loading=!1})};p();const u=y(null),M=()=>{u.value.setFormData(),u.value.showDialog=!0},T=n=>{u.value.setFormData(n),u.value.showDialog=!0},B=n=>{K.confirm(o("materialGroupDeleteTips"),o("warning"),{confirmButtonText:o("confirm"),cancelButtonText:o("cancel"),type:"warning"}).then(()=>{re(n).then(()=>{p()}).catch(()=>{})})},D=W((n,l)=>{if(isNaN(n)||!/^\d{0,10}$/.test(n)){Y({type:"warning",message:`${o("sortTips")}`});return}n>99999999&&(l.sort=99999999),ne({group_id:l.group_id,sort:n}).then(m=>{})}),V=n=>{E.push({path:n})},G=n=>{n&&(n.resetFields(),p())};return(n,l)=>{const m=A,b=H,N=J,h=O,v=Q,P=X,x=Z,_=ee,$=te,F=ae,z=oe;return C(),I("div",se,[t(x,{class:"box-card !border-none",shadow:"never"},{default:i(()=>[d("div",pe,[d("span",me,s(e(w)),1),t(m,{type:"primary",onClick:M},{default:i(()=>[c(s(e(o)("addMaterialGroup")),1)]),_:1})]),t(N,{class:"demo-tabs","model-value":"/shop_giftcard/material/group",onTabChange:V},{default:i(()=>[t(b,{label:e(o)("list"),name:"/shop_giftcard/material"},null,8,["label"]),t(b,{label:e(o)("group"),name:"/shop_giftcard/material/group"},null,8,["label"])]),_:1}),t(x,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:i(()=>[t(P,{inline:!0,model:e(a).searchParam,ref_key:"searchFormRef",ref:f},{default:i(()=>[t(v,{label:e(o)("groupName"),prop:"group_name"},{default:i(()=>[t(h,{modelValue:e(a).searchParam.group_name,"onUpdate:modelValue":l[0]||(l[0]=r=>e(a).searchParam.group_name=r),modelModifiers:{trim:!0},placeholder:e(o)("groupNamePlaceholder"),maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(v,null,{default:i(()=>[t(m,{type:"primary",onClick:l[1]||(l[1]=r=>p())},{default:i(()=>[c(s(e(o)("search")),1)]),_:1}),t(m,{onClick:l[2]||(l[2]=r=>G(f.value))},{default:i(()=>[c(s(e(o)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),d("div",de,[S((C(),q($,{data:e(a).data,size:"large"},{empty:i(()=>[d("span",null,s(e(a).loading?"":e(o)("emptyData")),1)]),default:i(()=>[t(_,{prop:"group_name",label:e(o)("groupName"),"min-width":"200","show-overflow-tooltip":!0},null,8,["label"]),t(_,{prop:"sort",label:e(o)("sort"),"min-width":"150",sortable:"custom"},{default:i(({row:r})=>[t(h,{modelValue:r.sort,"onUpdate:modelValue":g=>r.sort=g,modelModifiers:{trim:!0},class:"!w-[120px]",maxlength:"6",onBlur:g=>e(D)(r.sort,r)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1},8,["label"]),t(_,{prop:"create_time",label:e(o)("createTime"),"min-width":"200",sortable:"custom"},{default:i(({row:r})=>[d("div",null,s(r.create_time),1)]),_:1},8,["label"]),t(_,{label:e(o)("operation"),fixed:"right",width:"150"},{default:i(({row:r})=>[t(m,{type:"primary",link:"",onClick:g=>T(r)},{default:i(()=>[c(s(e(o)("edit")),1)]),_:2},1032,["onClick"]),t(m,{type:"primary",link:"",onClick:g=>B(r.group_id)},{default:i(()=>[c(s(e(o)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[z,e(a).loading]]),d("div",ue,[t(F,{"current-page":e(a).page,"onUpdate:current-page":l[3]||(l[3]=r=>e(a).page=r),"page-size":e(a).limit,"onUpdate:page-size":l[4]||(l[4]=r=>e(a).limit=r),layout:"total, sizes, prev, pager, next, jumper",total:e(a).total,onSizeChange:l[5]||(l[5]=r=>p()),onCurrentChange:p},null,8,["current-page","page-size","total"])])]),t(ie,{ref_key:"editMaterialGroupDialog",ref:u,onComplete:p},null,512)]),_:1})])}}});export{ze as default};
