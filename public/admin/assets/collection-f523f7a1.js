import{d as S,x as U,f as O,r as x,n as j,h as g,c as q,e,w as a,u as o,aQ as L,a as l,t as i,q as n,i as u,R as M,s as E,B as H,aR as K,a7 as Q,bP as W,aN as Y,aO as A,K as G,L as J,E as X,M as Z,ad as ee,ae as te,W as ae,Y as oe}from"./index-99f00cf3.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                  */import"./el-form-item-4ed993c7.js";/* empty css               *//* empty css               *//* empty css                     *//* empty css                *//* empty css                   *//* empty css                       */import{h as le,i as se}from"./marketing-47e9cfd6.js";const ne={class:"main-container"},re={class:"statistic-card"},ie={class:"statistic-footer"},ce={class:"footer-item text-[14px] text-[#666]"},pe={class:"statistic-card"},de={class:"statistic-footer"},me={class:"footer-item text-[14px] text-[#666]"},ue={class:"statistic-card"},_e={class:"statistic-footer"},fe={class:"footer-item text-[14px] text-[#666]"},ve={class:"mt-[10px]"},be={class:"flex flex-col"},xe={class:"text-[12px] mt-[5px]"},ge={class:"text-[12px] mt-[5px]"},he={class:"mt-[16px] flex justify-end"},Qe=S({__name:"collection",setup(ye){const h=U(),I=O(),N=h.meta.title,y=parseInt(h.query.id),C=x(!1),s=j({page:1,limit:10,total:0,loading:!1,data:[],searchParam:{keywords:""}}),w=x(),d=x([]),m=()=>{s.loading=!0,le({page:s.page,limit:s.limit,id:y,...s.searchParam}).then(c=>{s.loading=!1,s.data=c.data.data,s.total=c.data.total}).catch(()=>{s.loading=!1}),se(y).then(c=>{d.value=c.data,C.value=!1}).catch(()=>{C.value=!1})};m();const P=c=>{I.push("/shop/order/detail?order_id="+c.trade_id)},R=c=>{c&&(c.resetFields(),m())};return(c,r)=>{const B=K,_=Q,f=W,v=Y,T=A,V=G,k=J,b=X,z=Z,p=ee,F=te,$=ae,D=oe;return g(),q("div",ne,[e(_,{class:"card !border-none",shadow:"never"},{default:a(()=>[e(B,{content:o(N),icon:o(L),onBack:r[0]||(r[0]=t=>c.$router.back())},null,8,["content","icon"])]),_:1}),e(_,{class:"box-card mt-[15px] !border-none",shadow:"never"},{default:a(()=>[l("div",null,[e(_,{class:"box-card !border-none !px-[35px]",shadow:"never"},{default:a(()=>[e(T,{class:"flex"},{default:a(()=>[e(v,{span:8,class:"min-w-[100px]"},{default:a(()=>[l("div",re,[e(f,{value:d.value.receive_count?Number.parseInt(d.value.receive_count):"0"},null,8,["value"]),l("div",ie,[l("div",ce,[l("span",null,i(o(n)("receiveCount")),1)])])])]),_:1}),e(v,{span:8,class:"min-w-[100px]"},{default:a(()=>[l("div",pe,[e(f,{value:d.value.receive_use_count?Number.parseInt(d.value.receive_use_count):"0"},null,8,["value"]),l("div",de,[l("div",me,[l("span",null,i(o(n)("receiveUseCount")),1)])])])]),_:1}),e(v,{span:8,class:"min-w-[100px]"},{default:a(()=>[l("div",ue,[e(f,{value:d.value.receive_expire_count?Number.parseInt(d.value.receive_expire_count):"0"},null,8,["value"]),l("div",_e,[l("div",fe,[l("span",null,i(o(n)("receiveExpireCount")),1)])])])]),_:1})]),_:1})]),_:1})]),l("div",null,[e(_,{class:"box-card !border-none mb-[10px] table-search-wrap",shadow:"never"},{default:a(()=>[e(z,{inline:!0,model:s.searchParam,ref_key:"searchFormRef",ref:w},{default:a(()=>[e(k,{label:o(n)("memberInfo"),prop:"keywords"},{default:a(()=>[e(V,{modelValue:s.searchParam.keywords,"onUpdate:modelValue":r[1]||(r[1]=t=>s.searchParam.keywords=t),modelModifiers:{trim:!0},class:"w-[240px]",placeholder:o(n)("memberInfoPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(k,null,{default:a(()=>[e(b,{type:"primary",onClick:r[2]||(r[2]=t=>m())},{default:a(()=>[u(i(o(n)("search")),1)]),_:1}),e(b,{onClick:r[3]||(r[3]=t=>R(w.value))},{default:a(()=>[u(i(o(n)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l("div",ve,[M((g(),E(F,{data:s.data,ref:"tableRef",size:"large"},{empty:a(()=>[l("span",null,i(s.loading?"":o(n)("emptyData")),1)]),default:a(()=>[e(p,{prop:"title",label:o(n)("title")},null,8,["label"]),e(p,{label:o(n)("userName")},{default:a(({row:t})=>[l("div",be,[l("span",xe,i(t.member.nickname),1),l("span",ge,i(t.member.mobile),1)])]),_:1},8,["label"]),e(p,{prop:"receive_type_name",label:o(n)("receiveType")},null,8,["label"]),e(p,{prop:"create_time",label:o(n)("createTime")},null,8,["label"]),e(p,{prop:"expire_time",label:o(n)("expireTime")},null,8,["label"]),e(p,{prop:"status_name",label:o(n)("status")},null,8,["label"]),e(p,{label:o(n)("useTime")},{default:a(({row:t})=>[u(i(t.use_time||"--"),1)]),_:1},8,["label"]),e(p,{label:o(n)("validity")},{default:a(({row:t})=>[u(i(t.create_time)+"è‡³"+i(t.expire_time),1)]),_:1},8,["label"]),e(p,{label:o(n)("operation"),fixed:"right",align:"right"},{default:a(({row:t})=>[t.use_time!=0?(g(),E(b,{key:0,type:"primary",link:"",onClick:Ce=>P(t)},{default:a(()=>[u(i(o(n)("showOrder")),1)]),_:2},1032,["onClick"])):H("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[D,s.loading]]),l("div",he,[e($,{"current-page":s.page,"onUpdate:current-page":r[4]||(r[4]=t=>s.page=t),"page-size":s.limit,"onUpdate:page-size":r[5]||(r[5]=t=>s.limit=t),layout:"total, sizes, prev, pager, next, jumper",total:s.total,onSizeChange:r[6]||(r[6]=t=>m()),onCurrentChange:m},null,8,["current-page","page-size","total"])])])])]),_:1})])}}});export{Qe as default};
