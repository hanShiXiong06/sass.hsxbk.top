import{d as $,x as j,f as D,r as b,n as S,h,c as U,e as t,w as n,a as e,u as a,t as r,q as s,i as _,R as q,s as E,B as L,bP as M,aM as O,aN as K,a6 as W,K as Y,L as A,E as G,M as H,ab as J,ac as Q,W as X,Y as Z}from"./index-f7a01263.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                     *//* empty css                  *//* empty css                *//* empty css               *//* empty css               *//* empty css                     */import{e as ee,f as te}from"./marketing-fa8c56a7.js";const ae={class:"main-container"},oe={class:"flex justify-between items-center"},se={class:"detail-head !m-0"},le=e("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1),ne={class:"ml-[1px]"},ie=e("span",{class:"adorn"},"|",-1),re={class:"right"},ce={class:"mt-[10px]"},pe={class:"statistic-card"},de={class:"statistic-footer"},ue={class:"footer-item text-[14px] text-[#666]"},_e={class:"statistic-card"},me={class:"statistic-footer"},fe={class:"footer-item text-[14px] text-[#666]"},ve={class:"statistic-card"},xe={class:"statistic-footer"},be={class:"footer-item text-[14px] text-[#666]"},he={class:"mt-[10px]"},ge={class:"flex flex-col"},Ce={class:"text-[12px] mt-[5px]"},ye={class:"text-[12px] mt-[5px]"},ke={class:"mt-[16px] flex justify-end"},Ye=$({__name:"collection",setup(we){const I=j(),g=D(),C=parseInt(I.query.id),y=b(!1),l=S({page:1,limit:10,total:0,loading:!1,data:[],searchParam:{keywords:""}}),k=b(),d=b([]),u=()=>{l.loading=!0,ee({page:l.page,limit:l.limit,id:C,...l.searchParam}).then(c=>{l.loading=!1,l.data=c.data.data,l.total=c.data.total}).catch(()=>{l.loading=!1}),te(C).then(c=>{d.value=c.data,y.value=!1}).catch(()=>{y.value=!1})};u();const P=c=>{g.push("/shop/order/detail?order_id="+c.trade_id)},N=c=>{c&&(c.resetFields(),u())};return(c,i)=>{const m=M,f=O,R=K,v=W,T=Y,w=A,x=G,z=H,p=J,V=Q,B=X,F=Z;return h(),U("div",ae,[t(v,{class:"box-card !border-none",shadow:"never"},{default:n(()=>[e("div",oe,[e("div",se,[e("div",{class:"left",onClick:i[0]||(i[0]=o=>a(g).push("/shop/marketing/coupon/list"))},[le,e("span",ne,r(a(s)("returnToPreviousPage")),1)]),ie,e("span",re,r(a(s)("collectionCoupon")),1)])]),e("div",ce,[t(v,{class:"box-card !border-none base-bg !px-[35px]",shadow:"never"},{default:n(()=>[t(R,{class:"flex"},{default:n(()=>[t(f,{span:8,class:"min-w-[100px]"},{default:n(()=>[e("div",pe,[t(m,{value:d.value.receive_count?Number.parseInt(d.value.receive_count):"0"},null,8,["value"]),e("div",de,[e("div",ue,[e("span",null,r(a(s)("receiveCount")),1)])])])]),_:1}),t(f,{span:8,class:"min-w-[100px]"},{default:n(()=>[e("div",_e,[t(m,{value:d.value.receive_use_count?Number.parseInt(d.value.receive_use_count):"0"},null,8,["value"]),e("div",me,[e("div",fe,[e("span",null,r(a(s)("receiveUseCount")),1)])])])]),_:1}),t(f,{span:8,class:"min-w-[100px]"},{default:n(()=>[e("div",ve,[t(m,{value:d.value.receive_expire_count?Number.parseInt(d.value.receive_expire_count):"0"},null,8,["value"]),e("div",xe,[e("div",be,[e("span",null,r(a(s)("receiveExpireCount")),1)])])])]),_:1})]),_:1})]),_:1})]),e("div",null,[t(v,{class:"box-card !border-none mb-[10px] table-search-wrap",shadow:"never"},{default:n(()=>[t(z,{inline:!0,model:l.searchParam,ref_key:"searchFormRef",ref:k},{default:n(()=>[t(w,{label:a(s)("memberInfo"),prop:"keywords"},{default:n(()=>[t(T,{modelValue:l.searchParam.keywords,"onUpdate:modelValue":i[1]||(i[1]=o=>l.searchParam.keywords=o),class:"w-[240px]",placeholder:a(s)("memberInfoPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(w,null,{default:n(()=>[t(x,{type:"primary",onClick:i[2]||(i[2]=o=>u())},{default:n(()=>[_(r(a(s)("search")),1)]),_:1}),t(x,{onClick:i[3]||(i[3]=o=>N(k.value))},{default:n(()=>[_(r(a(s)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e("div",he,[q((h(),E(V,{data:l.data,ref:"tableRef",size:"large"},{empty:n(()=>[e("span",null,r(l.loading?"":a(s)("emptyData")),1)]),default:n(()=>[t(p,{prop:"title",label:a(s)("title")},null,8,["label"]),t(p,{label:a(s)("userName")},{default:n(({row:o})=>[e("div",ge,[e("span",Ce,r(o.member.nickname),1),e("span",ye,r(o.member.mobile),1)])]),_:1},8,["label"]),t(p,{prop:"receive_type_name",label:a(s)("receiveType")},null,8,["label"]),t(p,{prop:"create_time",label:a(s)("createTime")},null,8,["label"]),t(p,{prop:"expire_time",label:a(s)("expireTime")},null,8,["label"]),t(p,{prop:"status_name",label:a(s)("status")},null,8,["label"]),t(p,{label:a(s)("useTime")},{default:n(({row:o})=>[_(r(o.use_time||"--"),1)]),_:1},8,["label"]),t(p,{label:a(s)("validity")},{default:n(({row:o})=>[_(r(o.create_time)+"è‡³"+r(o.expire_time),1)]),_:1},8,["label"]),t(p,{label:a(s)("operation"),fixed:"right",align:"right"},{default:n(({row:o})=>[o.use_time!=0?(h(),E(x,{key:0,type:"primary",link:"",onClick:Ee=>P(o)},{default:n(()=>[_(r(a(s)("showOrder")),1)]),_:2},1032,["onClick"])):L("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[F,l.loading]]),e("div",ke,[t(B,{"current-page":l.page,"onUpdate:current-page":i[4]||(i[4]=o=>l.page=o),"page-size":l.limit,"onUpdate:page-size":i[5]||(i[5]=o=>l.limit=o),layout:"total, sizes, prev, pager, next, jumper",total:l.total,onSizeChange:i[6]||(i[6]=o=>u()),onCurrentChange:u},null,8,["current-page","page-size","total"])])])])]),_:1})])}}});export{Ye as default};
