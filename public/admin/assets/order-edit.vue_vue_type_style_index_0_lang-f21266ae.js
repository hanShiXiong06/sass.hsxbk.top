import{O as p,d as N,r as f,n as B,l as C,q as e,h as _,s as g,w as d,a as $,e as o,br as I,i as q,t as U,u as t,R as j,c as L,F as E,T as M,K as W,L as K,ac as X,aD as Y,M as z,E as A,X as G,Y as H}from"./index-99f00cf3.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  */import"./el-form-item-4ed993c7.js";function ve(i){return p.get("tk_vip/order",{params:i})}function J(i){return p.get(`tk_vip/order/${i}`)}function Q(i){return p.post("tk_vip/order",i,{showErrorMessage:!0,showSuccessMessage:!0})}function Z(i){return p.put(`tk_vip/order/${i.id}`,i,{showErrorMessage:!0,showSuccessMessage:!0})}function Ve(i){return p.delete(`tk_vip/order/${i}`,{showErrorMessage:!0,showSuccessMessage:!0})}function ee(i){return p.get("tk_vip/member_all",{params:i})}function le(i){return p.get("tk_vip/member_level_all",{params:i})}const ae={class:"dialog-footer"},ye=N({__name:"order-edit",emits:["complete"],setup(i,{expose:O,emit:T}){let n=f(!1);const m=f(!1),v={id:"",member_id:"",order_from:"",order_id:"",body:"",level_id:"",sku_id:"",day:"",status:"",out_trade_no:"",pay_time:"",close_time:"",close_reason:"",remark:"",refund_status:""},r=B({...v}),V=f(),F=C(()=>({member_id:[{required:!0,message:e("memberIdPlaceholder"),trigger:"blur"}],order_from:[{required:!0,message:e("orderFromPlaceholder"),trigger:"blur"}],order_id:[{required:!0,message:e("orderIdPlaceholder"),trigger:"blur"}],body:[{required:!0,message:e("bodyPlaceholder"),trigger:"blur"}],level_id:[{required:!0,message:e("levelIdPlaceholder"),trigger:"blur"}],sku_id:[{required:!0,message:e("skuIdPlaceholder"),trigger:"blur"}],day:[{required:!0,message:e("dayPlaceholder"),trigger:"blur"}],status:[{required:!0,message:e("statusPlaceholder"),trigger:"blur"}],out_trade_no:[{required:!0,message:e("outTradeNoPlaceholder"),trigger:"blur"}],pay_time:[{required:!0,message:e("payTimePlaceholder"),trigger:"blur"}],close_time:[{required:!0,message:e("closeTimePlaceholder"),trigger:"blur"}],close_reason:[{required:!0,message:e("closeReasonPlaceholder"),trigger:"blur"}],remark:[{required:!0,message:e("remarkPlaceholder"),trigger:"blur"}],refund_status:[{required:!0,message:e("refundStatusPlaceholder"),trigger:"blur"}]})),D=async c=>{if(m.value||!c)return;let l=r.id?Z:Q;await c.validate(async s=>{s&&(m.value=!0,l(r).then(b=>{m.value=!1,n.value=!1,T("complete")}).catch(b=>{m.value=!1}))})},y=f([]);(async()=>{y.value=await(await ee({})).data})();const w=f([]);return(async()=>{w.value=await(await le({})).data})(),O({showDialog:n,setFormData:async(c=null)=>{if(Object.assign(r,v),m.value=!0,c){const l=await(await J(c.id)).data;l&&Object.keys(r).forEach(s=>{l[s]!=null&&(r[s]=l[s])})}m.value=!1}}),(c,l)=>{const s=W,u=K,b=X,k=Y,R=z,P=A,S=G,x=H;return _(),g(S,{modelValue:t(n),"onUpdate:modelValue":l[17]||(l[17]=a=>I(n)?n.value=a:n=a),title:r.id?t(e)("updateOrder"):t(e)("addOrder"),width:"50%",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:d(()=>[$("span",ae,[o(P,{onClick:l[15]||(l[15]=a=>I(n)?n.value=!1:n=!1)},{default:d(()=>[q(U(t(e)("cancel")),1)]),_:1}),o(P,{type:"primary",loading:m.value,onClick:l[16]||(l[16]=a=>D(V.value))},{default:d(()=>[q(U(t(e)("confirm")),1)]),_:1},8,["loading"])])]),default:d(()=>[j((_(),g(R,{model:r,"label-width":"120px",ref_key:"formRef",ref:V,rules:t(F),class:"page-form"},{default:d(()=>[o(u,{label:t(e)("siteId")},{default:d(()=>[o(s,{modelValue:r.site_id,"onUpdate:modelValue":l[0]||(l[0]=a=>r.site_id=a),clearable:"",placeholder:t(e)("siteIdPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(u,{label:t(e)("memberId")},{default:d(()=>[o(k,{class:"input-width",modelValue:r.member_id,"onUpdate:modelValue":l[1]||(l[1]=a=>r.member_id=a),clearable:"",placeholder:t(e)("memberIdPlaceholder")},{default:d(()=>[o(b,{label:"请选择",value:""}),(_(!0),L(E,null,M(y.value,(a,h)=>(_(),g(b,{key:h,label:a.nickname,value:a.member_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),o(u,{label:t(e)("orderFrom")},{default:d(()=>[o(s,{modelValue:r.order_from,"onUpdate:modelValue":l[2]||(l[2]=a=>r.order_from=a),clearable:"",placeholder:t(e)("orderFromPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(u,{label:t(e)("orderId")},{default:d(()=>[o(s,{modelValue:r.order_id,"onUpdate:modelValue":l[3]||(l[3]=a=>r.order_id=a),clearable:"",placeholder:t(e)("orderIdPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(u,{label:t(e)("body")},{default:d(()=>[o(s,{modelValue:r.body,"onUpdate:modelValue":l[4]||(l[4]=a=>r.body=a),clearable:"",placeholder:t(e)("bodyPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(u,{label:t(e)("levelId")},{default:d(()=>[o(k,{class:"input-width",modelValue:r.level_id,"onUpdate:modelValue":l[5]||(l[5]=a=>r.level_id=a),clearable:"",placeholder:t(e)("levelIdPlaceholder")},{default:d(()=>[o(b,{label:"请选择",value:""}),(_(!0),L(E,null,M(w.value,(a,h)=>(_(),g(b,{key:h,label:a.level_name,value:a.level_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),o(u,{label:t(e)("skuId")},{default:d(()=>[o(s,{modelValue:r.sku_id,"onUpdate:modelValue":l[6]||(l[6]=a=>r.sku_id=a),clearable:"",placeholder:t(e)("skuIdPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(u,{label:t(e)("day")},{default:d(()=>[o(s,{modelValue:r.day,"onUpdate:modelValue":l[7]||(l[7]=a=>r.day=a),clearable:"",placeholder:t(e)("dayPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(u,{label:t(e)("status")},{default:d(()=>[o(s,{modelValue:r.status,"onUpdate:modelValue":l[8]||(l[8]=a=>r.status=a),clearable:"",placeholder:t(e)("statusPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(u,{label:t(e)("outTradeNo")},{default:d(()=>[o(s,{modelValue:r.out_trade_no,"onUpdate:modelValue":l[9]||(l[9]=a=>r.out_trade_no=a),clearable:"",placeholder:t(e)("outTradeNoPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(u,{label:t(e)("payTime")},{default:d(()=>[o(s,{modelValue:r.pay_time,"onUpdate:modelValue":l[10]||(l[10]=a=>r.pay_time=a),clearable:"",placeholder:t(e)("payTimePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(u,{label:t(e)("closeTime")},{default:d(()=>[o(s,{modelValue:r.close_time,"onUpdate:modelValue":l[11]||(l[11]=a=>r.close_time=a),clearable:"",placeholder:t(e)("closeTimePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(u,{label:t(e)("closeReason")},{default:d(()=>[o(s,{modelValue:r.close_reason,"onUpdate:modelValue":l[12]||(l[12]=a=>r.close_reason=a),clearable:"",placeholder:t(e)("closeReasonPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(u,{label:t(e)("remark")},{default:d(()=>[o(s,{modelValue:r.remark,"onUpdate:modelValue":l[13]||(l[13]=a=>r.remark=a),clearable:"",placeholder:t(e)("remarkPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(u,{label:t(e)("refundStatus")},{default:d(()=>[o(s,{modelValue:r.refund_status,"onUpdate:modelValue":l[14]||(l[14]=a=>r.refund_status=a),clearable:"",placeholder:t(e)("refundStatusPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[x,m.value]])]),_:1},8,["modelValue","title"])}}});export{ye as _,ee as a,le as b,Ve as d,ve as g};
