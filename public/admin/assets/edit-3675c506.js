import{x as ge,f as ye,r as G,n as j,a$ as ie,l as be,q as l,U as se,a3 as ne,d as he,a2 as ve,h as f,c as h,e as s,w as d,u as e,aQ as xe,s as C,F as N,T as L,v as ce,a as u,t as m,B as M,i as b,R as V,b$ as U,a0 as k,cX as ue,c9 as pe,A as De,aR as Ve,a7 as ke,L as we,K as Ee,ac as Re,aD as Te,au as Be,av as Pe,bO as je,aw as Ce,c2 as Ne,aT as Se,a1 as Ue,M as Ge,ay as Ie,ad as Fe,ae as Le,J as Me,E as Ke,az as qe,p as $e,g as Ae}from"./index-99f00cf3.js";/* empty css                    */import{_ as Oe}from"./index.vue_vue_type_script_setup_true_lang-2f14504d.js";/* empty css                  *//* empty css                 *//* empty css                        *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                        *//* empty css               *//* empty css                *//* empty css                  *//* empty css                          *//* empty css                       *//* empty css                 *//* empty css                       *//* empty css                 *//* empty css                  *//* empty css                  */import"./el-form-item-4ed993c7.js";/* empty css                *//* empty css                   *//* empty css                       */import{_ as fe}from"./goods_default-995568ac.js";import{S as me}from"./sortable.esm-be94e56d.js";import{d as Ze,e as ze,f as He,h as We,i as Je}from"./giftcard-f0fd540a.js";import{g as Qe}from"./category-de093071.js";import{j as Xe}from"./poster-a2e7062d.js";import{r as _e}from"./range-463f6550.js";import Ye from"./goods-select-popup-4022fc08.js";import ea from"./material-select-popup-923612fd.js";import{_ as aa}from"./_plugin-vue_export-helper-c27b6911.js";import"./index.vue_vue_type_style_index_0_lang-2e54ab99.js";/* empty css                  *//* empty css                   */import"./attachment-6fc096d0.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-a59c79e6.js";/* empty css                      *//* empty css               *//* empty css               *//* empty css                    *//* empty css                    */import"./el-dropdown-item-4ed993c7.js";import"./index.vue_vue_type_script_setup_true_lang-bde8c802.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-49ab6f2c.js";/* empty css                          */import"./goods-4a8ebb3e.js";import"./material-select.vue_vue_type_style_index_0_lang-8b24e69d.js";import"./material-c5754327.js";function ta(K={}){const Y=ge(),I=ye(),S=G(!1),n=j({giftcard_id:0,type:"virtual",card_name:"",category_id:"",cover:"",material_ids:"",card_price:0,is_give:1,receive_validity_time:24,blessing_json:[],validity_type:"forever",validity_day:30,validity_time:"",status:1,sort:"",card_right_type:"balance",balance_json:[],delivery_way:"all",card_goods_type:"all",card_goods_count:"",card_key_way:["0-9"],card_key_length:6,card_no_length:6,card_prefix:"",card_suffix:"",instruction:"",card_desc:"",goods_sku_relation:[]});j([]);const B=j([]),a=j([]);n.giftcard_id=G(Y.query.giftcard_id||0);const q=j({}),i=K.getFormRef;ie(()=>{let p=i();for(let c in p)q[c]=p[c]});const ee=G("basic"),ae=(p,c)=>{},_=j([]),x=p=>{n.type=p.type};Ze({}).then(p=>{const c=p.data;if(c)for(const r in c)_.push(c[r])});const Z=j([]);ze({}).then(p=>{const c=p.data;if(c)for(const r in c)Z.push(c[r])});const $=j([]),E=()=>{const p=I.resolve({path:"/shop_giftcard/category"});window.open(p.href)},F=(p=!1)=>{Qe({}).then(c=>{const r=c.data;r&&($.splice(0,$.length,...r),p&&se({message:l("refreshSuccess"),type:"success"}))})};F();const z=j([]),H=()=>{const p=I.resolve({path:"/poster/list"});window.open(p.href)},te=(p=!1)=>{Xe({type:"shop_giftcard_give"}).then(c=>{const r=c.data;r&&(z.splice(0,z.length,...r),p&&se({message:l("refreshSuccess"),type:"success"}))})};te();const le=()=>{He({giftcard_id:n.giftcard_id}).then(p=>{const c=p.data;if(c){if(Object.assign(n,c),n.card_right_type=="balance"){let r=[];n.balance_json.forEach(o=>{o.balance&&r.push(ne(o))})}else n.card_right_type=="goods"&&(B.splice(0,B.length),a.splice(0,a.length),n.goods_sku_relation.forEach(r=>{B.push(r.sku_id)}),c.goods_sku_list.forEach(r=>{let o=0;for(let g=0;g<n.goods_sku_relation.length;g++)if(n.goods_sku_relation[g].sku_id==r.sku_id){o=n.goods_sku_relation[g].num;break}a.push({goods_id:r.goods_id,sku_id:r.sku_id,goods_type_name:r.goods.goods_type_name,price:r.price,sku_image:r.sku_image,goods_name:r.goods.goods_name,sku_name:r.sku_name,stock:r.stock,num:o})}));n.validity_type=="date"&&(n.validity_time=new Date(n.validity_time)),ie(()=>{J(),R()})}})};n.giftcard_id&&le();const W=(p=5)=>Number(Math.random().toString().substr(3,p)+Date.now()).toString(36),J=()=>{if(!i().cardBlessingRef)return;const p=i().cardBlessingRef,c=me.create(p,{group:"draggable-element",animation:200,onEnd:r=>{const o=n.blessing_json[r.oldIndex];n.blessing_json.splice(r.oldIndex,1),n.blessing_json.splice(r.newIndex,0,o),ie(()=>{c.sort(_e(n.blessing_json.length).map(g=>g.toString()))})}})},A=()=>{if(n.blessing_json.length>10){se({type:"warning",message:`${l("maxAddBlessingTips")}`});return}n.blessing_json.push({id:W(),blessing:""}),J()},Q=p=>{n.blessing_json.splice(p,1)},R=()=>{if(!i().cardRightBalanceRef)return;const p=i().cardRightBalanceRef,c=me.create(p,{group:"draggable-element",animation:200,onEnd:r=>{const o=n.balance_json[r.oldIndex];n.balance_json.splice(r.oldIndex,1),n.balance_json.splice(r.newIndex,0,o),ie(()=>{c.sort(_e(n.balance_json.length).map(g=>g.toString()))})}})},re=()=>{if(n.balance_json.length>10){se({type:"warning",message:`${l("maxAddBalanceTips")}`});return}n.balance_json.push({id:W(),balance:"",price:""}),R()},de=p=>{n.balance_json.splice(p,1)},X=p=>{a.splice(0,a.length);for(let c in p){let r=p[c],o={goods_id:r.goods_id,sku_id:r.sku_id,goods_type_name:r.goods_type_name,price:r.price,sku_image:r.sku_image,goods_name:r.goods_name,sku_name:r.sku_name,stock:r.stock,num:1};a.push(o)}},oe=(p,c)=>{a.splice(c,1),B.splice(B.indexOf(p.sku_id),1)},T={required:/[\S]+/,number:/^\d{0,10}$/,digit:/^\d{0,10}(.?\d{0,2})$/,special:/^\d{0,10}(.?\d{0,3})$/},t=be(()=>({card_name:[{required:!0,trigger:"blur",validator:(c,r,o)=>{r===""&&o(new Error(l("cardNamePlaceholder"))),r.length>20?o(new Error(l("cardNameMaxLengthTips"))):o()}}],category_id:[{required:!0,message:l("categoryIdPlaceholder"),trigger:"blur"}],cover:[{required:!0,message:l("coverPlaceholder"),trigger:"blur"}],sort:[{trigger:"blur",validator:(c,r,o)=>{isNaN(r)||!T.number.test(r)?o(new Error(l("sortTips"))):o()}}],card_price:[{trigger:"blur",validator:(c,r,o)=>{n.card_right_type=="goods"&&(r===""?o(new Error(l("cardPricePlaceholder"))):isNaN(r)||!T.digit.test(r)?o(new Error(l("cardPriceTips"))):r<0&&o(new Error(l("cardPriceNotZeroTips")))),o()}}],validity_day:[{required:!0,trigger:"blur",validator:(c,r,o)=>{n.validity_type=="day"?r===""?o(new Error(l("validityDayPlaceholder"))):isNaN(r)||!T.digit.test(r)?o(new Error(l("validityDayTips"))):r<=0?o(new Error(l("validityDayNotZeroTips"))):o():o()}}],validity_time:[{required:!0,trigger:"blur",validator:(c,r,o)=>{n.validity_type=="date"?r===""?o(new Error(l("validityTimePlaceholder"))):n.validity_time<=Date.now()?o(new Error(l("validityTimeVerify"))):o():o()}}],card_key_way:[{required:!0,trigger:"blur",validator:(c,r,o)=>{n.type=="real"&&r===""?o(new Error(l("cardKeyWayPlaceholder"))):o()}}],card_no_length:[{required:!0,trigger:"blur",validator:(c,r,o)=>{n.type=="real"?r===""?o(new Error(l("cardNoLengthPlaceholder"))):isNaN(r)||!T.digit.test(r)?o(new Error(l("cardNoLengthInputTips"))):r<6?o(new Error(l("cardNoLengthNotZeroTips"))):r>20?o(new Error(l("cardNoLengthMaxTips"))):o():o()}}],card_key_length:[{required:!0,trigger:"blur",validator:(c,r,o)=>{n.type=="real"?r===""?o(new Error(l("cardKeyLengthPlaceholder"))):isNaN(r)||!T.digit.test(r)?o(new Error(l("cardKeyLengthInputTips"))):r<6?o(new Error(l("cardKeyLengthNotZeroTips"))):r>20?o(new Error(l("cardKeyLengthMaxTips"))):o():o()}}],receive_validity_time:[{required:!0,trigger:"blur",validator:(c,r,o)=>{if(n.is_give)return r==""?o(new Error(l("receiveValidityTimePlaceholder"))):Number(r)>=1&&Number(r)<=24?o():o(new Error(l("receiveValidityTimeRangeTips")));o()}}],card_blessing:[{required:!0,trigger:"blur",validator:(c,r,o)=>{if(n.is_give){let g=[],v=!1,y="";for(let w=0;w<n.blessing_json.length;w++)if(n.blessing_json[w].blessing)if(g.indexOf(n.blessing_json[w].blessing)==-1)g.push(n.blessing_json[w].blessing);else{y=l("cardBlessingRepeatTips"),v=!0;break}else{y=l("cardBlessingPlaceholder"),v=!0;break}v&&o(new Error(y))}o()}}],card_right_balance:[{required:!0,trigger:"blur",validator:(c,r,o)=>{if(n.card_right_type=="balance")if(n.balance_json.length==0)o(new Error(l("cardRightBalanceEmpty")));else{let g=[],v=!1,y="";for(let w=0;w<n.balance_json.length;w++)if(n.balance_json[w].balance){if(isNaN(n.balance_json[w].balance)||!T.number.test(n.balance_json[w].balance)){y=l("cardRightBalancePriceTips"),v=!0;break}if(g.indexOf(n.balance_json[w].balance)==-1)g.push(n.balance_json[w].balance);else{y=l("cardRightBalanceRepeatTips"),v=!0;break}}else{y=l("cardRightBalancePlaceholder"),v=!0;break}v&&o(new Error(y))}o()}}],card_right_balance_price:[{required:!0,trigger:"blur",validator:(c,r,o)=>{if(n.card_right_type=="balance"){let g=!1,v="";for(let y=0;y<n.balance_json.length;y++)if(n.balance_json[y].price){if(isNaN(n.balance_json[y].price)||!T.digit.test(n.balance_json[y].price)){v=l("cardBalancePriceTips"),g=!0;break}if(n.balance_json[y].price<0){v=l("cardBalancePriceNotZeroTips"),g=!0;break}}else{v=l("cardBalancePricePlaceholder"),g=!0;break}g&&o(new Error(v))}o()}}],card_goods_count:[{required:!0,trigger:"blur",validator:(c,r,o)=>{n.card_goods_type=="diy"&&(r===""?o(new Error(l("cardGoodsCountPlaceholder"))):isNaN(r)||!T.digit.test(r)?o(new Error(l("cardGoodsTips"))):r<0?o(new Error(l("cardGoodsNotZeroTips"))):r==0&&o(new Error(l("cardGoodsMustBeGreaterZeroTips")))),o()}}],card_right_select_goods:[{required:!0,trigger:"blur",validator:(c,r,o)=>{if(n.card_right_type=="goods"){if(a.length==0)o(new Error(l("cardRightGoodsEmpty")));else if(n.card_goods_type=="all"){let g=!1,v="";for(let y=0;y<a.length;y++){if(a[y].num==""){g=!0,v=l("cardRightGoodsPlaceholder");break}if(a[y].num>a[y].stock){g=!0,v=l("cardRightGoodsNumOverStock");break}}g&&o(new Error(v))}}o()}}],instruction:[{required:!1,trigger:["blur","change"],validator:(c,r,o)=>{if(r.length>5e4)return o(new Error(l("cardInstructionMaxTips"))),!1;o()}}],card_desc:[{required:!1,trigger:["blur","change"],validator:(c,r,o)=>{if(r.length>5e4)return o(new Error(l("giftcardDescMaxTips"))),!1;o()}}]})),D=p=>{let c=[{key:"basic",verify:!1,ref:q.basicFormRef}];c.push({key:"card_right",verify:!1,ref:q.cardRightFormRef},{key:"detail",verify:!1,ref:q.detailFormRef}),c.forEach((r,o)=>{r&&r.ref&&r.ref.validate(g=>{r.verify=g})}),setTimeout(()=>{let r=!0;for(let o=0;o<c.length;o++)if(c[o].verify==!1){ee.value=c[o].key,r=!1;break}r&&p&&p()},10)};return{formData:n,activeName:ee,tabHandleClick:ae,giftcardType:_,changeGiftcardType:x,giftcardCardRightType:Z,categoryOptions:$,toCategoryEvent:E,refreshCategory:F,posterOptions:z,toPosterEvent:H,refreshPoster:te,formRules:t,addBlessing:A,deleteBlessing:Q,addBalance:re,deleteBalance:de,goodsSelect:X,deleteGoodsEvent:oe,goodsIds:B,goodsSkuList:a,save:(p=null)=>{D(()=>{if(S.value)return;S.value=!0;const c=n.giftcard_id?We:Je,r=ne(n);r.card_right_type=="balance"||r.card_right_type=="goods"&&(r.goods_sku_relation.splice(0,r.goods_sku_relation.length),a.forEach(o=>{r.goods_sku_relation.push({goods_id:o.goods_id,sku_id:o.sku_id,num:parseInt(o.num)})})),c(r).then(o=>{S.value=!1,I.push("/shop_giftcard/giftcard/list")}).catch(()=>{S.value=!1})})},back:()=>{I.push("/shop_giftcard/giftcard/list")},filterSpecial:p=>{p.target.value=p.target.value.replace(/[^\u4e00-\u9fa5a-zA-Z0-9\s]/g,""),p.target.value=p.target.value.replace(/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、]/g,"")},handleBlur:p=>{var c;(c=q.detailFormRef.value)==null||c.validateField("goods_desc")}}}const O=K=>($e("data-v-935de5a5"),K=K(),Ae(),K),la={class:"main-container"},ra={class:"type-name"},oa={class:"type-desc"},ia=O(()=>u("div",{class:"triangle"},null,-1)),sa=O(()=>u("div",{class:"selected"},"✓",-1)),da=["onClick"],na={class:"type-name"},ca={class:"type-desc"},ua=O(()=>u("div",{class:"triangle"},null,-1)),pa=O(()=>u("div",{class:"selected"},"✓",-1)),ma={class:"ml-[10px]"},_a={class:"flex items-center px-[5px]"},fa={class:"w-[220px] pl-[5px]"},ga={class:"mt-[10px] text-[12px] text-[#999] leading-[20px]"},ya={class:"mt-[10px] text-[12px] text-[#999] leading-[20px]"},ba={class:"ml-[10px]"},ha={class:"ml-[120px] mb-[10px] text-[12px] text-[#999] leading-[20px]"},va={class:"mt-[10px] text-[12px] text-[#999] leading-[20px]"},xa={class:"!text-sm"},Da=O(()=>u("span",null,"小时",-1)),Va={class:"text-[12px] text-[#a9a9a9] leading-normal mt-[5px]"},ka={class:"card-blessing-wrap"},wa={class:"blessing-item-wrap"},Ea={class:"mt-[10px] text-[12px] text-[#999] leading-[20px]"},Ra={class:"card-right-balance-wrap"},Ta={class:"balance-item-wrap"},Ba={key:0},Pa={key:1},ja={class:"mt-[10px] text-[12px] text-[#999] leading-[20px]"},Ca={class:"flex items-center cursor-pointer"},Na={class:"min-w-[60px] h-[60px] flex items-center justify-center"},Sa=O(()=>u("div",{class:"image-slot"},[u("img",{class:"w-[60px] h-[60px]",src:fe})],-1)),Ua={key:1,class:"w-[70px] h-[60px]",src:fe,fit:"contain"},Ga={class:"ml-2"},Ia=["title"],Fa={class:"text-primary text-[12px]"},La={class:"fixed-footer-wrap"},Ma={class:"fixed-footer"},Ka=he({__name:"edit",setup(K){const Y=G(),I=G(),S=G(),n=G(),B=G(),a=ta({getFormRef(){return{basicFormRef:Y.value,cardRightFormRef:I.value,detailFormRef:S.value,cardBlessingRef:n.value,cardRightBalanceRef:B.value}}});return(q,i)=>{const ee=Ve,ae=ke,_=we,x=Ee,Z=Re,$=Te,E=Be,F=Pe,z=je,H=Ce,te=Ne,le=Se,W=ve("CircleCloseFilled"),J=Ue,A=Ge,Q=Ie,R=Fe,re=Le,de=Me,X=Ke,oe=Oe,T=qe;return f(),h("div",la,[s(ae,{class:"box-card !border-none",shadow:"never"},{default:d(()=>[s(ee,{content:e(a).formData.giftcard_id?e(l)("updateGiftcard"):e(l)("addGiftcard"),icon:e(xe),onBack:e(a).back},null,8,["content","icon","onBack"])]),_:1}),s(ae,{class:"box-card mt-[15px] !border-none",shadow:"never"},{default:d(()=>[s(T,{modelValue:e(a).activeName,"onUpdate:modelValue":i[40]||(i[40]=t=>e(a).activeName=t),onTabClick:e(a).tabHandleClick},{default:d(()=>[s(Q,{label:e(l)("basicInfoTab"),name:"basic"},{default:d(()=>[s(A,{model:e(a).formData,"label-width":"120px",ref_key:"basicFormRef",ref:Y,rules:e(a).formRules,class:"page-form"},{default:d(()=>[e(a).formData.giftcard_id?(f(),C(_,{key:0,label:e(l)("giftcardType")},{default:d(()=>[(f(!0),h(N,null,L(e(a).giftcardType,t=>(f(),h("div",{key:t.type,class:ce(["giftcard-type-wrap",[e(a).formData.type==t.type?"selected":"disabled"]])},[u("div",ra,m(t.name),1),u("div",oa,"("+m(t.desc)+")",1),e(a).formData.type==t.type?(f(),h(N,{key:0},[ia,sa],64)):M("",!0)],2))),128))]),_:1},8,["label"])):(f(),C(_,{key:1,label:e(l)("giftcardType")},{default:d(()=>[(f(!0),h(N,null,L(e(a).giftcardType,t=>(f(),h("div",{key:t.type,class:ce(["giftcard-type-wrap",{selected:e(a).formData.type==t.type}]),onClick:D=>e(a).changeGiftcardType(t)},[u("div",na,m(t.name),1),u("div",ca,"("+m(t.desc)+")",1),e(a).formData.type==t.type?(f(),h(N,{key:0},[ua,pa],64)):M("",!0)],10,da))),128))]),_:1},8,["label"])),s(_,{label:e(l)("cardName"),prop:"card_name"},{default:d(()=>[s(x,{modelValue:e(a).formData.card_name,"onUpdate:modelValue":i[0]||(i[0]=t=>e(a).formData.card_name=t),modelModifiers:{trim:!0},clearable:"",placeholder:e(l)("cardNamePlaceholder"),class:"input-width",maxlength:"20","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(_,{label:e(l)("categoryId"),prop:"category_id"},{default:d(()=>[s($,{modelValue:e(a).formData.category_id,"onUpdate:modelValue":i[1]||(i[1]=t=>e(a).formData.category_id=t),placeholder:e(l)("categoryIdPlaceholder"),clearable:""},{default:d(()=>[(f(!0),h(N,null,L(e(a).categoryOptions,t=>(f(),C(Z,{key:t.category_id,label:t.category_name,value:t.category_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),u("div",ma,[u("span",{class:"cursor-pointer text-primary mr-[10px]",onClick:i[2]||(i[2]=t=>e(a).refreshCategory(!0))},m(e(l)("refresh")),1),u("span",{class:"cursor-pointer text-primary",onClick:i[3]||(i[3]=(...t)=>e(a).toCategoryEvent&&e(a).toCategoryEvent(...t))},m(e(l)("addCategory")),1)])]),_:1},8,["label"]),s(_,{label:e(l)("cover"),prop:"cover"},{default:d(()=>[s(ea,{modelValue:e(a).formData.cover,"onUpdate:modelValue":i[4]||(i[4]=t=>e(a).formData.cover=t),limit:10},null,8,["modelValue"])]),_:1},8,["label"]),s(_,{label:e(l)("validityType")},{default:d(()=>[s(F,{modelValue:e(a).formData.validity_type,"onUpdate:modelValue":i[5]||(i[5]=t=>e(a).formData.validity_type=t)},{default:d(()=>[s(E,{label:"forever"},{default:d(()=>[b(m(e(l)("validityForever")),1)]),_:1}),s(E,{label:"day"},{default:d(()=>[b(m(e(l)("validityDay")),1)]),_:1}),s(E,{label:"date"},{default:d(()=>[b(m(e(l)("validityDate")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),V(s(_,{prop:"validity_day"},{default:d(()=>[b(" 购买后立即生效， "),u("div",_a,[s(x,{modelValue:e(a).formData.validity_day,"onUpdate:modelValue":i[6]||(i[6]=t=>e(a).formData.validity_day=t),modelModifiers:{trim:!0},onKeyup:i[7]||(i[7]=t=>e(U)(t)),clearable:"",class:"input-width-short",maxlength:"3"},null,8,["modelValue"])]),b(" 天有效 ")]),_:1},512),[[k,e(a).formData.validity_type=="day"]]),V(s(_,{prop:"validity_time"},{default:d(()=>[b(" 购买后立即生效，使用时间截止为 "),u("div",fa,[s(z,{modelValue:e(a).formData.validity_time,"onUpdate:modelValue":i[8]||(i[8]=t=>e(a).formData.validity_time=t),type:"datetime"},null,8,["modelValue"])])]),_:1},512),[[k,e(a).formData.validity_type=="date"]]),V(s(_,{label:e(l)("cardNoLength"),prop:"card_no_length"},{default:d(()=>[u("div",null,[s(x,{modelValue:e(a).formData.card_no_length,"onUpdate:modelValue":i[9]||(i[9]=t=>e(a).formData.card_no_length=t),modelModifiers:{trim:!0},clearable:"",placeholder:e(l)("cardNoLengthPlaceholder"),class:"input-width-short",maxlength:"2",onKeyup:i[10]||(i[10]=t=>e(U)(t))},null,8,["modelValue","placeholder"]),u("div",ga,m(e(l)("cardNoLengthTips")),1)])]),_:1},8,["label"]),[[k,e(a).formData.type=="real"]]),V(s(_,{label:e(l)("cardPrefix")},{default:d(()=>[s(x,{modelValue:e(a).formData.card_prefix,"onUpdate:modelValue":i[11]||(i[11]=t=>e(a).formData.card_prefix=t),modelModifiers:{trim:!0},clearable:"",placeholder:e(l)("cardPrefixPlaceholder"),class:"input-width",maxlength:"10"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),[[k,e(a).formData.type=="real"]]),V(s(_,{label:e(l)("cardSuffix")},{default:d(()=>[s(x,{modelValue:e(a).formData.card_suffix,"onUpdate:modelValue":i[12]||(i[12]=t=>e(a).formData.card_suffix=t),modelModifiers:{trim:!0},clearable:"",placeholder:e(l)("cardSuffixPlaceholder"),class:"input-width",maxlength:"10"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),[[k,e(a).formData.type=="real"]]),V(s(_,{label:e(l)("cardKeyWay"),prop:"card_key_way"},{default:d(()=>[s(te,{modelValue:e(a).formData.card_key_way,"onUpdate:modelValue":i[13]||(i[13]=t=>e(a).formData.card_key_way=t)},{default:d(()=>[s(H,{label:"0-9"},{default:d(()=>[b("0-9")]),_:1}),s(H,{label:"a-z"},{default:d(()=>[b("a-z")]),_:1}),s(H,{label:"A-Z"},{default:d(()=>[b("A-Z")]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),[[k,e(a).formData.type=="real"]]),V(s(_,{label:e(l)("cardKeyLength"),prop:"card_key_length"},{default:d(()=>[u("div",null,[s(x,{modelValue:e(a).formData.card_key_length,"onUpdate:modelValue":i[14]||(i[14]=t=>e(a).formData.card_key_length=t),modelModifiers:{trim:!0},clearable:"",placeholder:e(l)("cardKeyLengthPlaceholder"),class:"input-width-short",maxlength:"2",onKeyup:i[15]||(i[15]=t=>e(U)(t))},null,8,["modelValue","placeholder"]),u("div",ya,m(e(l)("cardKeyLengthTips")),1)])]),_:1},8,["label"]),[[k,e(a).formData.type=="real"]]),s(_,{label:e(l)("poster")},{default:d(()=>[s($,{modelValue:e(a).formData.poster_id,"onUpdate:modelValue":i[16]||(i[16]=t=>e(a).formData.poster_id=t),placeholder:e(l)("posterPlaceholder"),clearable:""},{default:d(()=>[(f(!0),h(N,null,L(e(a).posterOptions,t=>(f(),C(Z,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),u("div",ba,[u("span",{class:"cursor-pointer text-primary mr-[10px]",onClick:i[17]||(i[17]=t=>e(a).refreshPoster(!0))},m(e(l)("refresh")),1),u("span",{class:"cursor-pointer text-primary",onClick:i[18]||(i[18]=(...t)=>e(a).toPosterEvent&&e(a).toPosterEvent(...t))},m(e(l)("addPoster")),1)])]),_:1},8,["label"]),u("div",ha,m(e(l)("posterTips")),1),s(_,{label:e(l)("status")},{default:d(()=>[s(le,{modelValue:e(a).formData.status,"onUpdate:modelValue":i[19]||(i[19]=t=>e(a).formData.status=t),modelModifiers:{trim:!0},"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1},8,["label"]),s(_,{label:e(l)("isGive")},{default:d(()=>[u("div",null,[s(le,{modelValue:e(a).formData.is_give,"onUpdate:modelValue":i[20]||(i[20]=t=>e(a).formData.is_give=t),"active-value":1,"inactive-value":0},null,8,["modelValue"]),u("div",va,m(e(l)("isGiveTips")),1)])]),_:1},8,["label"]),V(s(_,{label:e(l)("receiveValidityTime"),prop:"receive_validity_time"},{default:d(()=>[u("div",null,[u("p",xa,[s(x,{modelValue:e(a).formData.receive_validity_time,"onUpdate:modelValue":i[21]||(i[21]=t=>e(a).formData.receive_validity_time=t),class:"!w-[120px] mr-[10px]",onKeyup:i[22]||(i[22]=t=>e(U)(t)),clearable:"",maxlength:"4"},null,8,["modelValue"]),Da]),u("p",Va,m(e(l)("receiveValidityTimeRangeDefaultTips")),1)])]),_:1},8,["label"]),[[k,e(a).formData.is_give]]),V(u("div",null,[s(_,{label:e(l)("cardBlessing"),prop:"card_blessing"},{default:d(()=>[u("div",ka,[u("div",wa,[e(a).formData.blessing_json.length?(f(),h("ul",{key:0,ref_key:"cardBlessingRef",ref:n},[(f(!0),h(N,null,L(e(a).formData.blessing_json,(t,D)=>(f(),h("li",{class:"draggable-element",key:t.id},[s(x,{modelValue:t.blessing,"onUpdate:modelValue":P=>t.blessing=P,modelModifiers:{trim:!0},clearable:"",placeholder:e(l)("cardBlessingPlaceholder"),class:"input-width","suffix-icon":e(ue),maxlength:"20"},null,8,["modelValue","onUpdate:modelValue","placeholder","suffix-icon"]),s(J,{class:"icon",size:20,color:"#7b7b7b",onClick:P=>e(a).deleteBlessing(D)},{default:d(()=>[s(W)]),_:2},1032,["onClick"])]))),128))],512)):M("",!0),V(u("span",{class:"text-primary text-[14px] add-value",onClick:i[23]||(i[23]=(...t)=>e(a).addBlessing&&e(a).addBlessing(...t))},m(e(l)("addBlessing")),513),[[k,e(a).formData.blessing_json.length==0||e(a).formData.blessing_json.length<10]])]),u("div",Ea,m(e(l)("cardBlessingTips")),1)])]),_:1},8,["label"])],512),[[k,e(a).formData.is_give]]),s(_,{label:e(l)("sort")},{default:d(()=>[s(x,{modelValue:e(a).formData.sort,"onUpdate:modelValue":i[24]||(i[24]=t=>e(a).formData.sort=t),modelModifiers:{trim:!0},clearable:"",placeholder:e(l)("sortPlaceholder"),class:"input-width-mid","show-word-limit":"",maxlength:"6",onKeyup:i[25]||(i[25]=t=>e(U)(t))},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["label"]),s(Q,{label:e(l)("cardRightTab"),name:"card_right"},{default:d(()=>[s(A,{model:e(a).formData,"label-width":"120px",ref_key:"cardRightFormRef",ref:I,rules:e(a).formRules,class:"page-form"},{default:d(()=>[s(_,{label:e(l)("cardRightType")},{default:d(()=>[s(F,{modelValue:e(a).formData.card_right_type,"onUpdate:modelValue":i[26]||(i[26]=t=>e(a).formData.card_right_type=t)},{default:d(()=>[(f(!0),h(N,null,L(e(a).giftcardCardRightType,t=>(f(),C(E,{key:t.type,label:t.type,disabled:e(a).formData.giftcard_id},{default:d(()=>[b(m(t.name),1)]),_:2},1032,["label","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),V(u("div",null,[s(_,{label:e(l)("cardRightBalance"),prop:"card_right_balance"},{default:d(()=>[u("div",Ra,[u("div",Ta,[e(a).formData.balance_json.length?(f(),h("ul",{key:0,ref_key:"cardRightBalanceRef",ref:B},[(f(!0),h(N,null,L(e(a).formData.balance_json,(t,D)=>(f(),h("li",{class:"draggable-element",key:t.id},[s(x,{modelValue:t.balance,"onUpdate:modelValue":P=>t.balance=P,modelModifiers:{trim:!0},clearable:"",placeholder:e(l)("cardRightBalancePlaceholder"),class:"input-width","suffix-icon":e(ue),maxlength:"6",onKeyup:i[27]||(i[27]=P=>e(U)(P))},null,8,["modelValue","onUpdate:modelValue","placeholder","suffix-icon"]),s(J,{class:"icon",size:20,color:"#7b7b7b",onClick:P=>e(a).deleteBalance(D)},{default:d(()=>[s(W)]),_:2},1032,["onClick"])]))),128))],512)):M("",!0),V(u("span",{class:"text-primary text-[14px] add-balance-value",onClick:i[28]||(i[28]=(...t)=>e(a).addBalance&&e(a).addBalance(...t))},m(e(l)("addBalance")),513),[[k,e(a).formData.balance_json.length==0||e(a).formData.balance_json.length<9]])])])]),_:1},8,["label"]),e(a).formData.balance_json.length?(f(),C(_,{key:0,prop:"card_right_balance_price"},{default:d(()=>[s(re,{data:e(a).formData.balance_json,size:"large","max-height":"600",style:{"max-width":"350px"}},{default:d(()=>[s(R,{label:e(l)("cardRightBalance"),"min-width":"120"},{default:d(({row:t})=>[t.balance?(f(),h("div",Ba,"￥"+m(t.balance),1)):(f(),h("div",Pa,"--"))]),_:1},8,["label"]),s(R,{label:e(l)("cardBalancePrice"),"min-width":"200"},{default:d(({row:t})=>[s(x,{modelValue:t.price,"onUpdate:modelValue":D=>t.price=D,modelModifiers:{trim:!0},clearable:"",placeholder:"0.00",class:"!w-[180px]",maxlength:"8",onKeyup:i[29]||(i[29]=D=>e(pe)(D))},{append:d(()=>[b(m(e(l)("yuan")),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})):M("",!0)],512),[[k,e(a).formData.card_right_type=="balance"]]),V(u("div",null,[s(_,{label:e(l)("cardPrice"),prop:"card_price"},{default:d(()=>[s(x,{modelValue:e(a).formData.card_price,"onUpdate:modelValue":i[30]||(i[30]=t=>e(a).formData.card_price=t),modelModifiers:{trim:!0},clearable:"",placeholder:"0.00",class:"input-width-mid",maxlength:"8",onKeyup:i[31]||(i[31]=t=>e(pe)(t))},{append:d(()=>[b(m(e(l)("yuan")),1)]),_:1},8,["modelValue"])]),_:1},8,["label"]),s(_,{label:e(l)("deliveryWay")},{default:d(()=>[s(F,{modelValue:e(a).formData.delivery_way,"onUpdate:modelValue":i[32]||(i[32]=t=>e(a).formData.delivery_way=t),disabled:e(a).formData.giftcard_id},{default:d(()=>[s(E,{label:"all"},{default:d(()=>[b(m(e(l)("deliveryAll")),1)]),_:1}),s(E,{label:"batch"},{default:d(()=>[b(m(e(l)("deliveryBatch")),1)]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1},8,["label"]),s(_,{label:e(l)("deliveryGoods")},{default:d(()=>[u("div",null,[s(F,{modelValue:e(a).formData.card_goods_type,"onUpdate:modelValue":i[33]||(i[33]=t=>e(a).formData.card_goods_type=t),disabled:e(a).formData.giftcard_id},{default:d(()=>[s(E,{label:"all"},{default:d(()=>[b(m(e(l)("deliveryGoodsAll")),1)]),_:1}),s(E,{label:"diy"},{default:d(()=>[b(m(e(l)("deliveryGoodsDiy")),1)]),_:1})]),_:1},8,["modelValue","disabled"]),u("div",ja,m(e(l)("deliveryGoodsTips")),1)])]),_:1},8,["label"]),V(s(_,{prop:"card_goods_count",label:e(l)("cardGoodsCount")},{default:d(()=>[s(x,{modelValue:e(a).formData.card_goods_count,"onUpdate:modelValue":i[34]||(i[34]=t=>e(a).formData.card_goods_count=t),modelModifiers:{trim:!0},clearable:"",placeholder:"0",class:"!w-[140px]",maxlength:"2",onKeyup:i[35]||(i[35]=t=>e(U)(t))},{append:d(()=>[b(m(e(l)("unit")),1)]),_:1},8,["modelValue"])]),_:1},8,["label"]),[[k,e(a).formData.card_goods_type=="diy"]]),s(_,{label:e(l)("selectGoods"),prop:"card_right_select_goods"},{default:d(()=>[s(Ye,{ref:"goodsSelectPopupRef",modelValue:e(a).goodsIds,"onUpdate:modelValue":i[36]||(i[36]=t=>e(a).goodsIds=t),onGoodsSelect:e(a).goodsSelect,way:"single",mode:"sku",min:1,max:99},null,8,["modelValue","onGoodsSelect"])]),_:1},8,["label"]),e(a).goodsSkuList&&e(a).goodsSkuList.length?(f(),C(_,{key:0},{default:d(()=>[s(re,{data:e(a).goodsSkuList,size:"large","max-height":"400"},{default:d(()=>[s(R,{prop:"goods_id",label:e(l)("goodsSelectPopupGoodsInfo"),"min-width":"300"},{default:d(({row:t})=>[u("div",Ca,[u("div",Na,[t.sku_image?(f(),C(de,{key:0,class:"w-[60px] h-[60px]",src:e(De)(t.sku_image),fit:"contain"},{error:d(()=>[Sa]),_:2},1032,["src"])):(f(),h("img",Ua))]),u("div",Ga,[u("span",{title:t.sku_name,class:"multi-hidden"},m(t.sku_name?t.goods_name+" "+t.sku_name:t.goods_name),9,Ia),u("span",Fa,m(t.goods_type_name),1)])])]),_:1},8,["label"]),s(R,{prop:"price",label:e(l)("goodsSelectPopupPrice"),"min-width":"120"},{default:d(({row:t})=>[u("div",null,"￥"+m(t.price),1)]),_:1},8,["label"]),e(a).formData.card_goods_type=="all"?(f(),C(R,{key:0,prop:"price",label:e(l)("num"),"min-width":"120"},{default:d(({row:t})=>[s(x,{modelValue:t.num,"onUpdate:modelValue":D=>t.num=D,modelModifiers:{trim:!0},clearable:"",onKeyup:i[37]||(i[37]=D=>e(U)(D)),placeholder:"0",maxlength:"8"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"])):M("",!0),s(R,{prop:"stock",label:e(l)("goodsSelectPopupStock"),"min-width":"120",align:"right"},null,8,["label"]),s(R,{label:e(l)("operation"),align:"right","min-width":"160"},{default:d(({row:t,$index:D})=>[s(X,{type:"primary",link:"",onClick:P=>e(a).deleteGoodsEvent(t,D)},{default:d(()=>[b(m(e(l)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})):M("",!0)],512),[[k,e(a).formData.card_right_type=="goods"]])]),_:1},8,["model","rules"])]),_:1},8,["label"]),s(Q,{label:e(l)("giftcardDesc"),name:"detail"},{default:d(()=>[s(A,{model:e(a).formData,"label-width":"120px",ref_key:"detailFormRef",ref:S,rules:e(a).formRules,class:"page-form"},{default:d(()=>[s(_,{label:e(l)("cardInstruction"),prop:"instruction"},{default:d(()=>[s(oe,{modelValue:e(a).formData.instruction,"onUpdate:modelValue":i[38]||(i[38]=t=>e(a).formData.instruction=t),height:400,class:"editor-width"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),s(A,{model:e(a).formData,"label-width":"120px",ref_key:"detailFormRef",ref:S,rules:e(a).formRules,class:"page-form"},{default:d(()=>[s(_,{label:e(l)("cardDesc"),prop:"card_desc"},{default:d(()=>[s(oe,{modelValue:e(a).formData.card_desc,"onUpdate:modelValue":i[39]||(i[39]=t=>e(a).formData.card_desc=t),height:400,class:"editor-width"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["label"])]),_:1},8,["modelValue","onTabClick"])]),_:1}),u("div",La,[u("div",Ma,[s(X,{type:"primary",onClick:i[41]||(i[41]=t=>e(a).save())},{default:d(()=>[b(m(e(l)("save")),1)]),_:1}),s(X,{onClick:i[42]||(i[42]=t=>e(a).back())},{default:d(()=>[b(m(e(l)("cancel")),1)]),_:1})])])])}}});const Ot=aa(Ka,[["__scopeId","data-v-935de5a5"]]);export{Ot as default};
