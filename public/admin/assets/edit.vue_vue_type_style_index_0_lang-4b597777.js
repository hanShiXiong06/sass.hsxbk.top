import{d as P,r as c,n as q,l as B,q as a,h as y,s as h,w as i,a as w,e as n,i as b,t as p,u as o,R as C,K as R,L as U,M as I,E as M,X as N,Y as T}from"./index-29db729d.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                     *//* empty css                 */import{e as $,a as j,g as L}from"./dict-06dbcb15.js";const O={class:"form-tip"},z={class:"dialog-footer"},W=P({__name:"edit",emits:["complete"],setup(A,{expose:V,emit:k}){const m=c(!1),s=c(!1),f={id:"",name:"",key:"",memo:""},l=q({...f}),_=c(),D=B(()=>({name:[{required:!0,message:a("namePlaceholder"),trigger:"blur"}],key:[{required:!0,message:a("keyPlaceholder"),trigger:"blur"},{validator:(d,e,t)=>{/^[a-zA-Z_]+$/.test(e)?t():t(new Error(a("keyFormatTips")))},trigger:"blur"}],data:[{required:!0,message:a("dataPlaceholder"),trigger:"blur"}]})),x=async d=>{if(s.value||!d)return;const e=l.id?$:j;await d.validate(async t=>{t&&(s.value=!0,e(l).then(g=>{s.value=!1,m.value=!1,k("complete")}).catch(()=>{s.value=!1}))})};return V({showDialog:m,setFormData:async(d=null)=>{if(Object.assign(l,f),s.value=!0,d){const e=await(await L(d.id)).data;e&&Object.keys(l).forEach(t=>{e[t]!=null&&(l[t]=e[t])})}s.value=!1}}),(d,e)=>{const t=R,u=U,g=I,v=M,E=N,F=T;return y(),h(E,{modelValue:m.value,"onUpdate:modelValue":e[5]||(e[5]=r=>m.value=r),title:l.id?o(a)("updateDict"):o(a)("addDict"),width:"480",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:i(()=>[w("span",z,[n(v,{onClick:e[3]||(e[3]=r=>m.value=!1)},{default:i(()=>[b(p(o(a)("cancel")),1)]),_:1}),n(v,{type:"primary",loading:s.value,onClick:e[4]||(e[4]=r=>x(_.value))},{default:i(()=>[b(p(o(a)("confirm")),1)]),_:1},8,["loading"])])]),default:i(()=>[C((y(),h(g,{model:l,"label-width":"120px",ref_key:"formRef",ref:_,rules:o(D),class:"page-form"},{default:i(()=>[n(u,{label:o(a)("name"),prop:"name"},{default:i(()=>[n(t,{modelValue:l.name,"onUpdate:modelValue":e[0]||(e[0]=r=>l.name=r),modelModifiers:{trim:!0},clearable:"",maxlength:"40","show-word-limit":"",placeholder:o(a)("namePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(u,{label:o(a)("key"),prop:"key"},{default:i(()=>[n(t,{modelValue:l.key,"onUpdate:modelValue":e[1]||(e[1]=r=>l.key=r),modelModifiers:{trim:!0},clearable:"",maxlength:"40","show-word-limit":"",placeholder:o(a)("keyPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"]),w("p",O,p(o(a)("keyFormatTips")),1)]),_:1},8,["label"]),n(u,{label:o(a)("memo")},{default:i(()=>[n(t,{modelValue:l.memo,"onUpdate:modelValue":e[2]||(e[2]=r=>l.memo=r),type:"textarea",clearable:"",placeholder:o(a)("memoPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[F,s.value]])]),_:1},8,["modelValue","title"])}}});export{W as _};
