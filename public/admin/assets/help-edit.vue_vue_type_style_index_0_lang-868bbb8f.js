import{O as p,d as F,r as _,n as R,l as S,q as a,h as w,s as k,w as u,a as q,e as c,br as b,i as y,t as V,u as o,R as B,K as C,L as P,M as $,E as I,X as L,Y as N}from"./index-2a89d409.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 */function ee(t){return p.get("tk_jhkd/help",{params:t})}function te(){return p.get("tk_jhkd/asynchelp",{showErrorMessage:!0,showSuccessMessage:!0})}function O(t){return p.get(`tk_jhkd/help/${t}`)}function U(t){return p.post("tk_jhkd/help",t,{showErrorMessage:!0,showSuccessMessage:!0})}function K(t){return p.put(`tk_jhkd/help/${t.id}`,t,{showErrorMessage:!0,showSuccessMessage:!0})}function le(t){return p.delete(`tk_jhkd/help/${t}`,{showErrorMessage:!0,showSuccessMessage:!0})}const T={class:"dialog-footer"},ae=F({__name:"help-edit",emits:["complete"],setup(t,{expose:E,emit:M}){let s=_(!1);const r=_(!1),g={id:"",title:"",content:""},l=R({...g}),h=_(),j=S(()=>({title:[{required:!0,message:a("titlePlaceholder"),trigger:"blur"}],content:[{required:!0,message:a("contentPlaceholder"),trigger:"blur"}]})),D=async d=>{if(r.value||!d)return;let e=l.id?K:U;await d.validate(async n=>{n&&(r.value=!0,e(l).then(f=>{r.value=!1,s.value=!1,M("complete")}).catch(f=>{r.value=!1}))})};return E({showDialog:s,setFormData:async(d=null)=>{if(Object.assign(l,g),r.value=!0,d){const e=await(await O(d.id)).data;e&&Object.keys(l).forEach(n=>{e[n]!=null&&(l[n]=e[n])})}r.value=!1}}),(d,e)=>{const n=C,m=P,f=$,v=I,H=L,x=N;return w(),k(H,{modelValue:o(s),"onUpdate:modelValue":e[4]||(e[4]=i=>b(s)?s.value=i:s=i),title:l.id?o(a)("updateHelp"):o(a)("addHelp"),width:"50%",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:u(()=>[q("span",T,[c(v,{onClick:e[2]||(e[2]=i=>b(s)?s.value=!1:s=!1)},{default:u(()=>[y(V(o(a)("cancel")),1)]),_:1}),c(v,{type:"primary",loading:r.value,onClick:e[3]||(e[3]=i=>D(h.value))},{default:u(()=>[y(V(o(a)("confirm")),1)]),_:1},8,["loading"])])]),default:u(()=>[B((w(),k(f,{model:l,"label-width":"120px",ref_key:"formRef",ref:h,rules:o(j),class:"page-form"},{default:u(()=>[c(m,{label:o(a)("title")},{default:u(()=>[c(n,{modelValue:l.title,"onUpdate:modelValue":e[0]||(e[0]=i=>l.title=i),clearable:"",placeholder:o(a)("titlePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),c(m,{label:o(a)("content")},{default:u(()=>[c(n,{modelValue:l.content,"onUpdate:modelValue":e[1]||(e[1]=i=>l.content=i),type:"textarea",rows:"4",clearable:"",placeholder:o(a)("contentPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[x,r.value]])]),_:1},8,["modelValue","title"])}}});export{ae as _,te as a,le as d,ee as g};
