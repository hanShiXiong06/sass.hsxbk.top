import{d as K,x as O,n as J,r as f,f as Q,h as b,c as X,e as a,w as s,a as d,t as r,u as l,i as m,q as o,R as Z,s as k,A as ee,B as T,U as D,E as te,K as ae,L as le,bO as oe,M as ne,a7 as se,aw as ie,ad as re,ae as de,W as me,Y as pe}from"./index-99f00cf3.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                *//* empty css                       *//* empty css                  */import"./el-form-item-4ed993c7.js";import{b as ce,a8 as ue}from"./tourism-22ca545e.js";import{A as _e}from"./member-470daffe.js";import fe from"./goods-member-price-popup-fe6b24f7.js";import ge from"./goods-day-member-price-popup-105af5e3.js";import{_ as ye}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                  *//* empty css                   *//* empty css                       *//* empty css                 */const he={class:"main-container"},ve={class:"flex justify-between items-center"},be={class:"text-page-title"},we={class:"mt-[10px]"},Ce={class:"mb-[10px] flex items-center"},Pe={class:"flex items-center cursor-pointer"},ke={class:"min-w-[60px] h-[60px] flex items-center justify-center"},xe=["src"],Ee=["title"],Ve={class:"mt-[16px] flex justify-end"},Me=K({__name:"list",setup(Le){const R=O().meta.title,n=J({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{way_name:"",start_city:"",end_city:"",create_time:""}}),x=f(),u=(i=1)=>{n.loading=!0,n.page=i,ce({page:n.page,limit:n.limit,...n.searchParam}).then(t=>{n.loading=!1,n.data=t.data.data,n.total=t.data.total}).catch(()=>{n.loading=!1})};u();const E=Q(),$=()=>{E.push("/tourism/product/way/edit")},z=i=>{E.push("/tourism/product/way/edit?id="+i.way_id)},A=i=>{i&&(i.resetFields(),u())},V=(i,t)=>{ue({way_status:i,way_id:t}).then(()=>{u()})},y=f([]);(()=>{_e().then(i=>{y.value=i.data?i.data:[]})})();const w=f(null),F=i=>{i.goods_type="way",w.value.show(i,y.value)},N=()=>{if(_.value.length==0){D({type:"warning",message:`${o("batchEmptySelectedGoodsTips")}`});return}const i=[];_.value.forEach(t=>{i.push(t.goods_id)}),w.value.show({goods_id:i.toString(),goods_type:"way"},y.value)},M=f(null),U=()=>{if(_.value.length==0){D({type:"warning",message:`${o("batchEmptySelectedGoodsTips")}`});return}const i=[];_.value.forEach(t=>{i.push(t.goods_id)}),M.value.show({goods_id:i.toString()},y.value)},h=f(),v=f(!1),I=i=>{v.value=!1,L.value.toggleAllSelection()},L=f(),_=f([]),B=i=>{_.value=i,h.value=!1,_.value.length>0&&_.value.length<n.data.length?v.value=!0:v.value=!1,_.value.length==n.data.length&&(h.value=!0)};return(i,t)=>{const p=te,C=ae,g=le,W=oe,j=ne,S=se,Y=ie,c=re,G=de,H=me,q=pe;return b(),X("div",he,[a(S,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[d("div",ve,[d("span",be,r(l(R)),1),a(p,{type:"primary",class:"w-[100px]",onClick:$},{default:s(()=>[m(r(l(o)("addTourismWay")),1)]),_:1})]),a(S,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:s(()=>[a(j,{inline:!0,model:n.searchParam,ref_key:"searchFormRef",ref:x},{default:s(()=>[a(g,{label:l(o)("wayName"),prop:"way_name"},{default:s(()=>[a(C,{modelValue:n.searchParam.way_name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchParam.way_name=e),modelModifiers:{trim:!0},placeholder:l(o)("wayNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(g,{label:l(o)("startCity"),prop:"start_city"},{default:s(()=>[a(C,{modelValue:n.searchParam.start_city,"onUpdate:modelValue":t[1]||(t[1]=e=>n.searchParam.start_city=e),modelModifiers:{trim:!0},placeholder:l(o)("startCityPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(g,{label:l(o)("endCity"),prop:"end_city"},{default:s(()=>[a(C,{modelValue:n.searchParam.end_city,"onUpdate:modelValue":t[2]||(t[2]=e=>n.searchParam.end_city=e),modelModifiers:{trim:!0},placeholder:l(o)("endCityPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(g,{label:l(o)("createTime"),prop:"create_time"},{default:s(()=>[a(W,{modelValue:n.searchParam.create_time,"onUpdate:modelValue":t[3]||(t[3]=e=>n.searchParam.create_time=e),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":l(o)("startDate"),"end-placeholder":l(o)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),a(g,null,{default:s(()=>[a(p,{type:"primary",onClick:t[4]||(t[4]=e=>u())},{default:s(()=>[m(r(l(o)("search")),1)]),_:1}),a(p,{onClick:t[5]||(t[5]=e=>A(x.value))},{default:s(()=>[m(r(l(o)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),d("div",we,[d("div",Ce,[a(Y,{modelValue:h.value,"onUpdate:modelValue":t[6]||(t[6]=e=>h.value=e),size:"large",class:"px-[14px]",onChange:I,indeterminate:v.value},null,8,["modelValue","indeterminate"]),a(p,{onClick:t[7]||(t[7]=e=>N()),size:"small"},{default:s(()=>[m(r(l(o)("memberPrice")),1)]),_:1}),a(p,{onClick:t[8]||(t[8]=e=>U()),size:"small"},{default:s(()=>[m(r(l(o)("dayMemberPrice")),1)]),_:1})]),Z((b(),k(G,{data:n.data,size:"large",ref_key:"goodsListTableRef",ref:L,onSelectionChange:B},{empty:s(()=>[d("span",null,r(n.loading?"":l(o)("emptyData")),1)]),default:s(()=>[a(c,{type:"selection",width:"55"}),a(c,{label:l(o)("wayInfo"),"min-width":"240",align:"left","show-overflow-tooltip":""},{default:s(({row:e})=>[d("div",Pe,[d("div",ke,[d("img",{class:"max-w-[60px] max-h-[60px]",src:l(ee)(e.goods.cover_thumb_small)},null,8,xe)]),d("a",{href:"javascript:;",title:e.way_name,class:"multi-hidden ml-2"},r(e.way_name),9,Ee)])]),_:1},8,["label"]),a(c,{label:l(o)("wayCity"),"min-width":"200",align:"left"},{default:s(({row:e})=>[d("div",null,[d("span",null,r(l(o)("startCity"))+"："+r(e.start_city),1)]),d("div",null,[d("span",null,r(l(o)("endCity"))+"："+r(e.end_city),1)])]),_:1},8,["label"]),a(c,{label:l(o)("price"),"min-width":"120",align:"left"},{default:s(({row:e})=>[m(r(e.goods.price),1)]),_:1},8,["label"]),a(c,{label:l(o)("stock"),"min-width":"120",align:"left"},{default:s(({row:e})=>[m(r(e.goods.stock),1)]),_:1},8,["label"]),a(c,{label:l(o)("saleNum"),"min-width":"120",align:"left"},{default:s(({row:e})=>[m(r(e.sell_sum),1)]),_:1},8,["label"]),a(c,{label:l(o)("createTime"),"min-width":"180",align:"center"},{default:s(({row:e})=>[m(r(e.create_time||""),1)]),_:1},8,["label"]),a(c,{prop:"status_name",label:l(o)("wayStatus"),"min-width":"120"},null,8,["label"]),a(c,{label:l(o)("operation"),fixed:"right","min-width":"120",align:"right"},{default:s(({row:e})=>[e.way_status==1?(b(),k(p,{key:0,type:"primary",link:"",onClick:P=>V(0,e.way_id)},{default:s(()=>[m(r(l(o)("down")),1)]),_:2},1032,["onClick"])):T("",!0),e.way_status==0?(b(),k(p,{key:1,type:"primary",link:"",onClick:P=>V(1,e.way_id)},{default:s(()=>[m(r(l(o)("up")),1)]),_:2},1032,["onClick"])):T("",!0),a(p,{type:"primary",link:"",onClick:P=>F(e)},{default:s(()=>[m(r(l(o)("memberPrice")),1)]),_:2},1032,["onClick"]),a(p,{type:"primary",link:"",onClick:P=>z(e)},{default:s(()=>[m(r(l(o)("edit")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[q,n.loading]]),d("div",Ve,[a(H,{"current-page":n.page,"onUpdate:current-page":t[9]||(t[9]=e=>n.page=e),"page-size":n.limit,"onUpdate:page-size":t[10]||(t[10]=e=>n.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:n.total,onSizeChange:t[11]||(t[11]=e=>u()),onCurrentChange:u},null,8,["current-page","page-size","total"])])])]),_:1}),a(fe,{ref_key:"memberPricePopupRef",ref:w,onLoad:u},null,512),a(ge,{ref_key:"memberDayPricePopupRef",ref:M,onLoad:u},null,512)])}}});const nt=ye(Me,[["__scopeId","data-v-9931f6e4"]]);export{nt as default};
