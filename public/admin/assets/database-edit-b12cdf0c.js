import{d as N,x as z,f as I,n as O,h as p,c as h,e as t,w as a,i as d,a as s,u as v,s as V,B as y,R as b,b6 as w,F as $,T as j,ae as q,af as K,a7 as L,K as M,E as A,ac as G,ab as H,aC as J,aS as P,ad as Q}from"./index-2a89d409.js";/* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                        *//* empty css                  *//* empty css                *//* empty css                             */import{u as W,g as X}from"./tkdevtool-52fb9537.js";const Y={class:"main-container p-4"},Z={class:"flex"},ee=s("span",{class:"text-[#7a7a7a] font-thin text-sm"}," 数据表名称 ",-1),te={class:"ml-12"},ae=s("span",{class:"text-[#7a7a7a] font-thin text-sm"}," 描述 ",-1),le={class:"mt-4"},oe=["onUpdate:modelValue"],ne=["onUpdate:modelValue"],se=["onUpdate:modelValue"],de={class:"fixed-footer-wrap"},ie={class:"fixed-footer"},Ce=N({__name:"database-edit",setup(me){const x=z(),k=I(),u=x.query.name||"",n=O({name:"",fields:[],comment:"",type:0}),U=()=>{k.push("/tk_devtool_admin_database")},g=async()=>{await W(n)},E=[{value:"int",label:"int"},{value:"varchar",label:"varchar"},{value:"text",label:"text"},{value:"longtext",label:"longtext"},{value:"datatime",label:"datatime"}],C=m=>{n.fields.splice(m,1)},T=()=>{n.fields.push({name:"请修改为您的字段",type:"varchar",comment:"默认描述",length:"13",not_null:!1})};return u&&(async m=>{const o=await X({name:m});Object.assign(n,o.data)})(u),(m,o)=>{const c=q,B=K,_=L,f=M,r=A,i=G,D=H,R=J,S=P,F=Q;return p(),h("div",Y,[t(_,null,{default:a(()=>[t(B,{title:"数据表编辑/新增使用说明",column:"1"},{default:a(()=>[t(c,{label:"字段id"},{default:a(()=>[d("如果存在/添加字段id,默认会设置为主键并自动递增")]),_:1}),t(c,{label:"数据库名称"},{default:a(()=>[d("需要填写完整的名称包含前缀")]),_:1}),t(c,{label:"温馨提示"},{default:a(()=>[d("数据表操作属于敏感操作，操作前请随时做好数据备份，不可完全依赖，部分字段未兼容请注意甄别")]),_:1})]),_:1})]),_:1}),t(_,{class:"mt-4"},{default:a(()=>[s("div",Z,[s("div",null,[ee,v(u)==""?(p(),V(f,{key:0,modelValue:n.name,"onUpdate:modelValue":o[0]||(o[0]=e=>n.name=e),class:"w-52 mt-2"},null,8,["modelValue"])):y("",!0),v(u)!==""?(p(),V(f,{key:1,disabled:"true",modelValue:n.name,"onUpdate:modelValue":o[1]||(o[1]=e=>n.name=e),class:"w-52 mt-2"},null,8,["modelValue"])):y("",!0)]),s("div",te,[ae,t(f,{modelValue:n.comment,"onUpdate:modelValue":o[2]||(o[2]=e=>n.comment=e),class:"w-52 mt-2"},null,8,["modelValue"])])]),t(r,{class:"mt-8",type:"primary",onClick:T},{default:a(()=>[d("新增字段")]),_:1}),t(_,{class:"box-card !border-none",shadow:"never"},{default:a(()=>[s("div",le,[t(F,{data:n.fields,stripe:"",style:{width:"100%"},editable:!0},{default:a(()=>[t(i,{prop:"name",label:"字段",width:"220"},{default:a(e=>[b(s("input",{type:"text",autosize:"",minlength:"24","onUpdate:modelValue":l=>e.row.name=l},null,8,oe),[[w,e.row.name]])]),_:1}),t(i,{prop:"comment",label:"描述",width:"220"},{default:a(e=>[b(s("input",{type:"text",autosize:"",minlength:"24","onUpdate:modelValue":l=>e.row.comment=l},null,8,ne),[[w,e.row.comment]])]),_:1}),t(i,{prop:"type",label:"类型",width:"220"},{default:a(e=>[t(R,{modelValue:e.row.type,"onUpdate:modelValue":l=>e.row.type=l,placeholder:"Select",class:"w-44"},{default:a(()=>[(p(),h($,null,j(E,l=>t(D,{key:l.value,label:l.label,value:l.value,disabled:l.disabled},null,8,["label","value","disabled"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),t(i,{prop:"length",label:"长度",width:"120"},{default:a(e=>[b(s("input",{type:"text",autosize:"",width:"8","onUpdate:modelValue":l=>e.row.length=l},null,8,se),[[w,e.row.length]])]),_:1}),t(i,{prop:"not_null",label:"不为空",width:"120"},{default:a(e=>[t(S,{modelValue:e.row.not_null,"onUpdate:modelValue":l=>e.row.not_null=l},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(i,{label:"操作",width:"360"},{default:a(({row:e})=>[t(r,{type:"primary",link:"",onClick:o[3]||(o[3]=l=>C(m.index))},{default:a(()=>[d("删除")]),_:1})]),_:1}),d("/> ")]),_:1},8,["data"])])]),_:1})]),_:1}),s("div",de,[s("div",ie,[t(r,{onClick:o[4]||(o[4]=e=>U())},{default:a(()=>[d("返回")]),_:1}),t(r,{type:"primary",onClick:o[5]||(o[5]=e=>g())},{default:a(()=>[d("保存")]),_:1})])])])}}});export{Ce as default};
