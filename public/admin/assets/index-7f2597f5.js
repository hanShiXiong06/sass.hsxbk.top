import{O as q,d as F,r as g,n as B,l as M,h as w,s as V,w as l,a as p,e as t,i as c,t as h,u as _,q as D,R as N,c9 as O,ca as $,aW as j,at as A,au as G,L,K as T,E as J,a7 as K,M as W,X,Y}from"./index-5a756a51.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                *//* empty css                *//* empty css                  *//* empty css                 */import"./el-form-item-4ed993c7.js";/* empty css                       *//* empty css                 *//* empty css                 */function z(){return q.get("tk_pan/adddriver",{showErrorMessage:!0,showSuccessMessage:!0})}const H={style:{width:"520px"}},P=p("div",{class:"ml-2 text-[#666]"}," 域名组成：https://vip.123pan.cn/会员uid/目录 ",-1),Q=p("a",{href:"https://www.123pan.com/s/Ggx9-gAmJv.html",target:"_blank"},"123网盘注册",-1),Z=p("a",{href:"https://www.123pan.com/developer",target:"_blank"},"开放平台申请",-1),ee={class:"dialog-footer"},fe=F({__name:"index",emits:["complete"],setup(te,{expose:x,emit:E}){const d=g(!1),r=g(!0),v={storage_type:"",clientID:"",clientSecret:"",dir:"",domain:"https://vip.123pan.cn/id/dir",is_use:"0"},a=B({...v}),b=g(),y=M(()=>({clientID:[{required:!0,message:"client_id必须填写",trigger:"blur"}],clientSecret:[{required:!0,message:"client_secret必须填写",trigger:"blur"}],dir:[{required:!0,message:"目录名称必须填写",trigger:"blur"}]})),S=async n=>{r.value||!n||await n.validate(async e=>{e&&(r.value=!0,O(a).then(f=>{r.value=!1,d.value=!1,E("complete")}).catch(()=>{r.value=!1}))})};return x({showDialog:d,setFormData:async(n=null)=>{if(r.value=!0,Object.assign(a,v),n){const e=await(await $(n.storage_type)).data;Object.keys(a).forEach(s=>{e[s]!=null&&(a[s]=e[s]),e.params[s]!=null&&(a[s]=e.params[s].value)})}r.value=!1}}),(n,e)=>{const s=j,f=A,I=G,i=L,m=T,u=J,C=K,R=W,U=X,k=Y;return w(),V(U,{modelValue:d.value,"onUpdate:modelValue":e[8]||(e[8]=o=>d.value=o),title:"123盘",width:"580px","destroy-on-close":!0},{footer:l(()=>[p("span",ee,[t(u,{onClick:e[6]||(e[6]=o=>d.value=!1)},{default:l(()=>[c(h(_(D)("cancel")),1)]),_:1}),t(u,{type:"primary",loading:r.value,onClick:e[7]||(e[7]=o=>S(b.value))},{default:l(()=>[c(h(_(D)("confirm")),1)]),_:1},8,["loading"])])]),default:l(()=>[N((w(),V(R,{model:a,"label-width":"140px",ref_key:"formRef",ref:b,rules:_(y),class:"page-form"},{default:l(()=>[t(C,{class:"box-card !border-none",shadow:"never"},{default:l(()=>[p("div",H,[t(s,{type:"warning",title:"本存储需使用123盘直链功能，会员/超级会员才可使用，直链流量50元/T",closable:!1,"show-icon":""})]),t(i,{label:"是否启用"},{default:l(()=>[t(I,{modelValue:a.is_use,"onUpdate:modelValue":e[0]||(e[0]=o=>a.is_use=o)},{default:l(()=>[t(f,{label:"1"},{default:l(()=>[c("启用")]),_:1}),t(f,{label:"0"},{default:l(()=>[c("停用")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(i,{label:"clientID",prop:"clientID"},{default:l(()=>[t(m,{modelValue:a.clientID,"onUpdate:modelValue":e[1]||(e[1]=o=>a.clientID=o),placeholder:"请填写client_id",class:"input-width",clearable:""},null,8,["modelValue"])]),_:1}),t(i,{label:"clientSecret",prop:"clientSecret"},{default:l(()=>[t(m,{modelValue:a.clientSecret,"onUpdate:modelValue":e[2]||(e[2]=o=>a.clientSecret=o),placeholder:"请填写client_secret",class:"input-width",clearable:""},null,8,["modelValue"])]),_:1}),t(i,{label:"上传目录",prop:"dir"},{default:l(()=>[t(m,{modelValue:a.dir,"onUpdate:modelValue":e[3]||(e[3]=o=>a.dir=o),placeholder:"如oss,根目录下需要不存在这个目录",class:"input-width",clearable:""},null,8,["modelValue"])]),_:1}),t(i,{label:"域名前缀",prop:"domain"},{default:l(()=>[t(m,{modelValue:a.domain,"onUpdate:modelValue":e[4]||(e[4]=o=>a.domain=o),placeholder:"进入123盘的直链空间获取地址",class:"input-width",clearable:""},null,8,["modelValue"]),P]),_:1}),t(i,{label:"快速导航"},{default:l(()=>[t(u,null,{default:l(()=>[Q]),_:1}),t(u,null,{default:l(()=>[Z]),_:1}),t(u,{type:"primary",onClick:e[5]||(e[5]=o=>_(z)())},{default:l(()=>[c(" 注入驱动 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[k,r.value]])]),_:1},8,["modelValue"])}}});export{fe as default};
