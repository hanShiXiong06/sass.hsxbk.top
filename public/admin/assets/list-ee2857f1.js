import{d as G,x as H,n as M,r as w,f as O,h as g,c as y,e as t,w as n,a as c,t as i,u as a,i as p,q as o,R as q,s as k,A,B as h,E as K,K as W,L as J,bO as Q,ac as X,aD as Z,M as ee,a7 as te,ad as ae,aF as oe,ae as le,W as se,Y as ne}from"./index-99f00cf3.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                        *//* empty css                *//* empty css                *//* empty css                       *//* empty css                  */import"./el-form-item-4ed993c7.js";import{j as re,s as ie,k as de}from"./vipcard-cf1e419a.js";import{_ as pe}from"./card-spread-popup.vue_vue_type_script_setup_true_lang-aee4e5db.js";/* empty css                  *//* empty css                   *//* empty css                 *//* empty css                        */import"./browser-a1ac24ac.js";const me={class:"main-container"},ce={class:"flex justify-between items-center"},ue={class:"text-page-title"},_e={class:"mt-[10px]"},ge={class:"flex items-center"},fe=["src"],he=["title"],be={key:0},ve={key:1},ye={class:"mt-[16px] flex justify-end"},We=G({__name:"list",setup(ke){const P=H().meta.title,s=M({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{goods_name:"",create_time:"",status:""}}),C=w(),_=(r=1)=>{s.loading=!0,s.page=r,re({page:s.page,limit:s.limit,...s.searchParam}).then(l=>{s.loading=!1,s.data=l.data.data,s.total=l.data.total}).catch(()=>{s.loading=!1})};_();const b=O(),D=()=>{b.push("/vipcard/goods/card/edit")},$=r=>{b.push("/vipcard/goods/card/edit?id="+r.goods_id)},N=r=>{b.push("/vipcard/goods/card/record_list?id="+r.goods_id)},x=w(null),U=r=>{x.value.show(r)},R=r=>{const l={};l.goods_id=r.goods_id,l.sort=r.sort,ie({...l}).then(d=>{})},E=(r,l)=>{de({goods_id:r.goods_id,status:l}).then(()=>{_()})},F=r=>{r&&(r.resetFields(),_())};return(r,l)=>{const d=K,S=W,f=J,T=Q,v=X,j=Z,z=ee,V=te,m=ae,B=oe,Y=le,I=se,L=ne;return g(),y("div",me,[t(V,{class:"box-card !border-none",shadow:"never"},{default:n(()=>[c("div",ce,[c("span",ue,i(a(P)),1),t(d,{type:"primary",class:"w-[100px]",onClick:D},{default:n(()=>[p(i(a(o)("addGoods")),1)]),_:1})]),t(V,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:n(()=>[t(z,{inline:!0,model:s.searchParam,ref_key:"searchFormRef",ref:C},{default:n(()=>[t(f,{label:a(o)("goodsName"),prop:"goods_name"},{default:n(()=>[t(S,{modelValue:s.searchParam.goods_name,"onUpdate:modelValue":l[0]||(l[0]=e=>s.searchParam.goods_name=e),placeholder:a(o)("goodsNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(f,{label:a(o)("createTime"),prop:"create_time"},{default:n(()=>[t(T,{modelValue:s.searchParam.create_time,"onUpdate:modelValue":l[1]||(l[1]=e=>s.searchParam.create_time=e),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":a(o)("startDate"),"end-placeholder":a(o)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),t(f,{label:"卡项状态",prop:"status"},{default:n(()=>[t(j,{modelValue:s.searchParam.status,"onUpdate:modelValue":l[2]||(l[2]=e=>s.searchParam.status=e),clearable:"",class:"input-width"},{default:n(()=>[t(v,{label:"全部",value:""}),t(v,{label:a(o)("tooUp"),value:"1"},null,8,["label"]),t(v,{label:a(o)("tooDown"),value:"0"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1}),t(f,null,{default:n(()=>[t(d,{type:"primary",onClick:l[3]||(l[3]=e=>_())},{default:n(()=>[p(i(a(o)("search")),1)]),_:1}),t(d,{onClick:l[4]||(l[4]=e=>F(C.value))},{default:n(()=>[p(i(a(o)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),c("div",_e,[q((g(),k(Y,{data:s.data,size:"large"},{empty:n(()=>[c("span",null,i(s.loading?"":a(o)("emptyData")),1)]),default:n(()=>[t(m,{"show-overflow-tooltip":!0,label:a(o)("goodsInfo"),"min-width":"240",align:"left"},{default:n(({row:e})=>[c("div",ge,[c("img",{class:"max-w-[60px] w-[60px] max-h-[60px]",src:a(A)(e.cover_thumb_small)},null,8,fe),c("a",{href:"javascript:;",class:"flex-1 multi-hidden ml-2",title:e.goods_name},i(e.goods_name),9,he)])]),_:1},8,["label"]),t(m,{prop:"card_type_name",label:a(o)("cardType"),"min-width":"120"},{default:n(({row:e})=>[p(i(e.card_type_name.name),1)]),_:1},8,["label"]),t(m,{prop:"price",label:a(o)("price"),"min-width":"120"},null,8,["label"]),t(m,{prop:"sale_num",label:a(o)("saleNum"),"min-width":"120"},null,8,["label"]),t(m,{prop:"sort",label:a(o)("sort"),"min-width":"120"},{default:n(({row:e})=>[t(B,{modelValue:e.sort,"onUpdate:modelValue":u=>e.sort=u,class:"!w-[90%]",min:0,"controls-position":"right",onChange:u=>R(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1},8,["label"]),t(m,{prop:"status",label:a(o)("status"),"min-width":"120"},{default:n(({row:e})=>[e.status==1?(g(),y("span",be,i(a(o)("tooUp")),1)):h("",!0),e.status==0?(g(),y("span",ve,i(a(o)("tooDown")),1)):h("",!0)]),_:1},8,["label"]),t(m,{prop:"create_time",label:a(o)("createTime"),"min-width":"150"},null,8,["label"]),t(m,{label:a(o)("operation"),fixed:"right","min-width":"235",align:"right"},{default:n(({row:e})=>[t(d,{type:"primary",link:"",onClick:u=>U(e)},{default:n(()=>[p(i(a(o)("spread")),1)]),_:2},1032,["onClick"]),t(d,{type:"primary",link:"",onClick:u=>N(e)},{default:n(()=>[p(i(a(o)("collectionRecord")),1)]),_:2},1032,["onClick"]),e.status==1?(g(),k(d,{key:0,type:"primary",link:"",onClick:u=>E(e,0)},{default:n(()=>[p(i(a(o)("down")),1)]),_:2},1032,["onClick"])):h("",!0),e.status==0?(g(),k(d,{key:1,type:"primary",link:"",onClick:u=>E(e,1)},{default:n(()=>[p(i(a(o)("up")),1)]),_:2},1032,["onClick"])):h("",!0),t(d,{type:"primary",link:"",onClick:u=>$(e)},{default:n(()=>[p(i(a(o)("edit")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[L,s.loading]]),c("div",ye,[t(I,{"current-page":s.page,"onUpdate:current-page":l[5]||(l[5]=e=>s.page=e),"page-size":s.limit,"onUpdate:page-size":l[6]||(l[6]=e=>s.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:s.total,onSizeChange:l[7]||(l[7]=e=>_()),onCurrentChange:_},null,8,["current-page","page-size","total"])])])]),_:1}),t(pe,{ref_key:"cardSpreadPopupRef",ref:x},null,512)])}}});export{We as default};
