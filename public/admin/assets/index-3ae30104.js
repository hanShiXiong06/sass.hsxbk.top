import{O as U,d as A,r as S,x as $,n as v,q as a,h as c,c as F,a as d,t as r,u as l,R as M,s as g,w as i,e as s,B as y,i as V,U as z,aS as G,L as j,K,aD as O,ab as Y,E as H,ac as J,a6 as Q,M as W,Y as X}from"./index-6ea097a6.js";/* empty css                   *//* empty css                     *//* empty css                *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                  *//* empty css                        *//* empty css               *//* empty css                 *//* empty css                        *//* empty css                  */function Z(){return U.get("dailysignin/index")}function tt(x){return U.post("/dailysignin/create",x,{showSuccessMessage:!0})}const et={class:"main-container"},at={class:"flex ml-[18px] justify-between items-center mt-[20px]"},lt={class:"text-page-title"},ot={class:"form-tip"},nt={class:"form-tip"},st={class:"text-base"},it={class:"ml-2"},dt={class:"ml-2"},rt={class:"form-tip"},ut={class:"form-tip pt-5"},pt={class:"fixed-footer-wrap"},mt={class:"fixed-footer"},Et=A({__name:"index",setup(x){const I=S(),D=$().meta.title,p=S(!0),t=v({status:!1,cycle:"0",point:"0",growth:"0",isSupplement:"0",adUnitId:"",data:[]}),u=v({data:[]}),k=v({cycle:[{required:!0,message:a("signInPeriodNotEmpty"),trigger:"blur"}],point:[{required:!0,message:a("everyDayPointNotEmpty"),trigger:"blur"}],growth:[{required:!0,message:a("everyDayGrowthNotEmpty"),trigger:"blur"}]}),E=()=>{p.value=!1,Z().then(n=>{u.data=n.data.value.data.slice(1),t.cycle=n.data.value.cycle.toString(),n.data.value.data.length>0&&(t.point=n.data.value.data[0].point,t.growth=n.data.value.data[0].growth),n.data.status===1&&(t.status=!0),n.data.value.isSupplement&&(t.isSupplement=!0,t.adUnitId=n.data.value.adUnitId),t.data=n.data.value.data}).finally(()=>{p.value=!1})},C=n=>{u.data.splice(n,1),u.data.length==1&&(u.data[0].day=2)},N=()=>{var h;let n=1;u.data.length==0?n=2:n=(((h=u.data[u.data.length-1])==null?void 0:h.day)||0)+1;const o={day:n.toString(),point:"",growth:""};u.data.push(o)};E();const R=async n=>{p.value||!n||await n.validate(o=>{if(o){if(t.isSupplement==!0&&(console.log(t.adUnitId),t.adUnitId==""))return z({message:"激励广告位ID不能为空",type:"warning"}),!1;t.data[0].point=t.point,t.data[0].growth=t.growth,t.data=t.status===!0?[t.data[0],...u.data]:[],tt(t).then(()=>{p.value=!1}).catch(()=>{p.value=!1})}})};return(n,o)=>{const h=G,m=j,T=K,f=O,w=Y,b=H,B=J,q=Q,L=W,P=X;return c(),F("div",et,[d("div",at,[d("span",lt,r(l(D)),1)]),M((c(),g(L,{model:t,"label-width":"200px",ref_key:"formRef",ref:I,rules:k,class:"page-form"},{default:i(()=>[s(q,{class:"box-card !border-none",shadow:"never"},{default:i(()=>[s(m,{label:l(a)("status")},{default:i(()=>[s(h,{modelValue:t.status,"onUpdate:modelValue":o[0]||(o[0]=e=>t.status=e)},null,8,["modelValue"])]),_:1},8,["label"]),t.status?(c(),g(m,{key:0,label:l(a)("isSupplement")},{default:i(()=>[s(h,{modelValue:t.isSupplement,"onUpdate:modelValue":o[1]||(o[1]=e=>t.isSupplement=e),disabled:t.isSupplement&&t.adUnitId!=""},null,8,["modelValue","disabled"])]),_:1},8,["label"])):y("",!0),t.isSupplement&&t.status?(c(),g(m,{key:1,label:l(a)("stimulateVideoAd"),prop:"adUnitId"},{default:i(()=>[s(T,{modelValue:t.adUnitId,"onUpdate:modelValue":o[2]||(o[2]=e=>t.adUnitId=e),style:{width:"150px"},placeholder:l(a)("inputAdUintIDPlaceholder"),clearable:""},null,8,["modelValue","placeholder"]),d("div",ot,r(l(a)("inputAdUintIDTops")),1)]),_:1},8,["label"])):y("",!0),t.status?(c(),g(m,{key:2,label:l(a)("signInPeriod"),prop:"cycle",class:"pt-[10px]"},{default:i(()=>[s(f,{modelValue:t.cycle,"onUpdate:modelValue":o[3]||(o[3]=e=>t.cycle=e),"controls-position":"right",min:7,max:100},null,8,["modelValue"]),d("div",nt,r(l(a)("periodLengthTips")),1)]),_:1},8,["label"])):y("",!0),t.status?(c(),g(m,{key:3,label:l(a)("everyDaySignIn"),prop:"point",class:"pt-[20px]"},{default:i(()=>[d("span",st,r(l(a)("bonusForDailySignIn")),1),s(f,{modelValue:t.point,"onUpdate:modelValue":o[4]||(o[4]=e=>t.point=e),"controls-position":"right",class:"ml-2",min:1},null,8,["modelValue"]),d("span",it,r(l(a)("point")),1)]),_:1},8,["label"])):y("",!0),t.status?(c(),g(m,{key:4,prop:"growth"},{default:i(()=>[s(f,{modelValue:t.growth,"onUpdate:modelValue":o[5]||(o[5]=e=>t.growth=e),"controls-position":"right",class:"ml-[120px]",min:1},null,8,["modelValue"]),d("span",dt,r(l(a)("growth")),1),d("div",rt,r(l(a)("everyDayTips")),1)]),_:1})):y("",!0),t.status?(c(),g(m,{key:5,label:l(a)("continuousSignIn"),class:"pt-[20px]"},{default:i(()=>[s(B,{size:"large",data:u.data},{empty:i(()=>[d("span",null,r(p.value?"":l(a)("emptyData")),1)]),default:i(()=>[s(w,{label:l(a)("continuousSignInDay"),"min-width":"120",align:"left","header-align":"left"},{default:i(e=>[s(f,{modelValue:e.row.day,"onUpdate:modelValue":_=>e.row.day=_,"controls-position":"right",min:e.row.day},null,8,["modelValue","onUpdate:modelValue","min"])]),_:1},8,["label"]),s(w,{label:l(a)("awardPoint"),"min-width":"120",align:"left","header-align":"left"},{default:i(e=>[s(f,{modelValue:e.row.point,"onUpdate:modelValue":_=>e.row.point=_,"controls-position":"right",min:1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),s(w,{label:l(a)("awardGrowth"),"min-width":"120",align:"left","header-align":"left"},{default:i(e=>[s(f,{modelValue:e.row.growth,"onUpdate:modelValue":_=>e.row.growth=_,"controls-position":"right",min:1},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),s(w,{label:l(a)("actions"),"min-width":"120",align:"center","header-align":"center"},{default:i(e=>[s(b,{type:"danger",size:"mini",onClick:_=>C(e.$index)},{default:i(()=>[V(r(l(a)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"]),s(b,{class:"el-button el-button--success mt-[25px] w-[220px]",onClick:o[6]||(o[6]=e=>N())},{default:i(()=>[V(r(l(a)("saveContinuosSignInAward")),1)]),_:1}),d("div",ut,r(l(a)("continuosSignInDescribe")),1)]),_:1},8,["label"])):y("",!0)]),_:1})]),_:1},8,["model","rules"])),[[P,p.value]]),d("div",pt,[d("div",mt,[s(b,{class:"el-button el-button--primary w-[200px]",align:"center",loading:p.value,onClick:o[7]||(o[7]=e=>R(I.value))},{default:i(()=>[V(r(l(a)("save")),1)]),_:1},8,["loading"])])])])}}});export{Et as default};
