import{_ as C}from"./index.vue_vue_type_style_index_0_lang-56f89855.js";import{d as R,r as n,l as V,b9 as k,G as H,h as U,c as $,e as i,u as m,br as x,bC as D,F,A as c}from"./index-a3bdc7eb.js";const B=R({__name:"index",props:{modelValue:{type:String,default:""},mode:{type:String,default:"simple"},height:{type:Number,default:600}},emits:["update:modelValue","handleBlur"],setup(f,{emit:p}){const s=f,g=n(),l=n(null),u=n(null),a=V({get(){return s.modelValue},set(e){const t=e.replace(/src="[^"]*(https:\/\/[^"]+)"/g,'src="$1"');p("update:modelValue",t)}});let o=null;const r={};r.token=k(),r["site-id"]=H.get("siteId")||0;const _="/adminapi/".substr(-1)=="/"?"/adminapi/":"/adminapi//",h=n({debug:!1,UEDITOR_HOME_URL:"/admin/ueditor/",serverUrl:`${_}sys/ueditor`,serverHeaders:r,autoHeightEnabled:!1,initialFrameHeight:s.height,initialFrameWidth:"100%",toolbarCallback:function(e,t){switch(o=t,e){case"insertimage":return l.value.showDialog=!0,!0;case"insertvideo":return u.value.showDialog=!0,!0}}}),v=e=>{console.log(1112),e.forEach(t=>{o==null||o.execCommand("insertHtml",`<img src="${c(t.url)}">`)})},b=e=>{o==null||o.execCommand("insertHtml",`<video src="${c(e.url)}">`)};return(e,t)=>{const d=C;return U(),$(F,null,[i(d,{type:"image",ref_key:"imageRef",ref:l,limit:10,onConfirm:v},null,512),i(d,{type:"video",ref_key:"videoRef",ref:u,onConfirm:b},null,512),i(m(D),{modelValue:m(a),"onUpdate:modelValue":t[0]||(t[0]=y=>x(a)?a.value=y:null),config:h.value,editorDependencies:["ueditor.config.js","ueditor.all.js"],ref_key:"editorRef",ref:g},null,8,["modelValue","config","editorDependencies"])],64)}}});export{B as _};
