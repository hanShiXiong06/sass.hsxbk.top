import{d as X,x as Z,r as v,h as s,c as _,e as l,w as n,a,t,u as d,i as u,q as r,F as E,T as B,$ as P,R as I,s as y,B as h,a5 as ee,E as te,K as ae,L as oe,M as se,a7 as ne,bg as re,bh as le,bi as ce,Y as ie,p as de,g as _e}from"./index-99f00cf3.js";/* empty css                   *//* empty css                  *//* empty css                    *//* empty css                  *//* empty css                     */import"./el-dropdown-item-4ed993c7.js";/* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 */import{O as ve,P as ue,Q as pe,R as me}from"./vipcard-cf1e419a.js";import{_ as fe}from"./add-reserve.vue_vue_type_script_setup_true_lang-d105e490.js";import{_ as he}from"./reserve-detail.vue_vue_type_script_setup_true_lang-a6983810.js";import{_ as ge}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                  *//* empty css                   *//* empty css                       *//* empty css               *//* empty css                  *//* empty css                  */const ke=w=>(de("data-v-3b2b6c85"),w=w(),_e(),w),xe={class:"main-container"},ye={class:"flex justify-between items-center"},we={class:"text-page-title"},Ce={class:"flex items-center mt-5"},De={class:"text-sm"},Re={class:"text-sm"},Ee={key:0,class:"time-data mt-3"},Be={class:"flex justify-center items-center text-lg"},Fe={class:"mx-6"},Se={class:"time-data-head"},$e={class:"time-data-body"},Ve={class:"my-1"},je={class:"name"},Ne=ke(()=>a("span",{class:"item-btn iconfont icongengduo"},null,-1)),Te=X({__name:"index",setup(w){const z=Z().meta.title,q=v(),V=v([]),j=v({"-1":"#ccc",1:"#8558fa",2:"#1475fa",3:"#fa5b14",4:"#10c610"});(async()=>{const o=await(await ve()).data;V.value=o})();const C=v(!0),p=v([]),F=v(""),D=v(0),m=(o=0)=>{C.value=!0;const c={length:o,search_name:F.value};ue(c).then(R=>{p.value=R.data,C.value=!1}).catch(()=>{C.value=!1})};m();const N=o=>{o=="add"?D.value++:o=="sub"&&D.value--,m(D.value)},g=v(null),A=()=>{g.value.setFormData(),g.value.showDialog=!0},K=o=>{g.value.setFormData(o),g.value.showDialog=!0},S=v(null),O=o=>{S.value.setFormData(o),S.value.showDialog=!0},Q=o=>{ee.confirm(r("vipcardReserveDeleteTips"),r("warning"),{confirmButtonText:r("confirm"),cancelButtonText:r("cancel"),type:"warning"}).then(()=>{pe(o).then(()=>{m()})})},$=(o,c)=>{me({reserve_id:o,reserve_state:c}).then(()=>{m()})};return(o,c)=>{const R=te,U=ae,T=oe,W=se,b=ne,f=re,Y=le,G=ce,H=ie;return s(),_("div",xe,[l(b,{class:"box-card !border-none",shadow:"never"},{default:n(()=>{var L;return[a("div",ye,[a("span",we,t(d(z)),1),l(R,{type:"primary",class:"w-[100px]",onClick:A},{default:n(()=>[u(t(d(r)("addReserve")),1)]),_:1})]),a("div",Ce,[a("span",De,t(d(r)("reserveStatus")),1),(s(!0),_(E,null,B(V.value,(i,k)=>(s(),_("div",{key:k,class:"flex items-center"},[a("span",{class:"w-[16px] h-[16px] ml-[30px] mr-[10px]",style:P({backgroundColor:j.value[i.status]})},null,4),a("span",Re,t(i.name),1)]))),128))]),l(b,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:n(()=>[l(W,{inline:!0,model:o.searchParam,ref_key:"searchFormRef",ref:q},{default:n(()=>[l(T,{label:d(r)("client"),prop:"reserve_state"},{default:n(()=>[l(U,{placeholder:d(r)("clientPlaceholder"),modelValue:F.value,"onUpdate:modelValue":c[0]||(c[0]=i=>F.value=i),class:"w-[200px]"},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),l(T,null,{default:n(()=>[l(R,{type:"primary",onClick:c[1]||(c[1]=i=>m(D.value))},{default:n(()=>[u(t(d(r)("search")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),(L=p.value)!=null&&L.length?(s(),_("div",Ee,[a("div",Be,[a("span",{class:"iconfont iconxiangzuojiantou font-bold cursor-pointer",onClick:c[2]||(c[2]=i=>N("sub"))}),a("div",Fe,t(p.value[0].date)+" - "+t(p.value[p.value.length-1].date),1),a("span",{class:"iconfont iconxiangyoujiantou font-bold cursor-pointer",onClick:c[3]||(c[3]=i=>N("add"))})]),I((s(),_("div",null,[a("div",Se,[(s(!0),_(E,null,B(p.value,(i,k)=>(s(),_("div",{key:k},[a("span",null,t(i.week)+" "+t(i.date),1)]))),128))]),a("div",$e,[(s(!0),_(E,null,B(p.value,(i,k)=>(s(),_("div",{class:"flex flex-col common-scrollbar",key:k},[(s(!0),_(E,null,B(i.data,(e,J)=>{var M;return s(),_("div",{class:"project-item",style:P({borderColor:j.value[e.reserve_state]}),key:J},[a("p",null,t(e.reserve_name),1),a("span",Ve,t(e==null?void 0:e.reserve_date.split(" ")[1]),1),a("p",je,t((M=e==null?void 0:e.goods)==null?void 0:M.goods_name),1),l(G,null,{dropdown:n(()=>[l(Y,null,{default:n(()=>[l(f,{onClick:x=>O(e)},{default:n(()=>[u(t(d(r)("reserveDetail")),1)]),_:2},1032,["onClick"]),e.reserve_state!=-1&&e.reserve_state!=3?(s(),y(f,{key:0,onClick:x=>K(e)},{default:n(()=>[u(t(d(r)("editReserve")),1)]),_:2},1032,["onClick"])):h("",!0),e.reserve_state!=-1&&e.reserve_state!=3?(s(),y(f,{key:1,onClick:x=>$(e.reserve_id,-1)},{default:n(()=>[u(t(d(r)("closeReserve")),1)]),_:2},1032,["onClick"])):h("",!0),e.reserve_state==1?(s(),y(f,{key:2,onClick:x=>$(e.reserve_id,2)},{default:n(()=>[u(t(d(r)("arrivedAtTheStore")),1)]),_:2},1032,["onClick"])):h("",!0),e.reserve_state==2?(s(),y(f,{key:3,onClick:x=>$(e.reserve_id,3)},{default:n(()=>[u(t(d(r)("completed")),1)]),_:2},1032,["onClick"])):h("",!0),e.reserve_state==-1?(s(),y(f,{key:4,onClick:x=>Q(e.reserve_id)},{default:n(()=>[u(t(d(r)("deleteReserve")),1)]),_:2},1032,["onClick"])):h("",!0)]),_:2},1024)]),default:n(()=>[Ne]),_:2},1024)],4)}),128))]))),128))])])),[[H,C.value]])])):h("",!0)]}),_:1}),l(fe,{ref_key:"addReserveDialog",ref:g,onComplete:m},null,512),l(he,{ref_key:"reserveDetailDialog",ref:S,onComplete:m},null,512)])}}});const st=ge(Te,[["__scopeId","data-v-3b2b6c85"]]);export{st as default};
