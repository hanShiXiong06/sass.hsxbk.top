import{d as K,x as W,f as Z,n as D,r as k,h as p,c as g,e as t,w as s,a as u,t as i,u as r,i as _,q as l,F as H,T as J,s as h,R as Q,$ as X,A as ee,B as ae,a5 as te,aq as le,U as oe,E as ne,ay as re,az as se,K as ie,L as pe,ac as de,aD as me,M as ce,a7 as ue,ad as _e,al as be,ae as ge,W as fe,Y as he}from"./index-99f00cf3.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                    *//* empty css                  */import{Y as ye,Z as ve,_ as xe,$ as ke,a0 as Ce}from"./goods-4a8ebb3e.js";import{_ as Le}from"./label-edit.vue_vue_type_style_index_0_lang-f0f59016.js";/* empty css                  *//* empty css                   *//* empty css                  */import"./index-015c0c3e.js";/* empty css                        */import"./index.vue_vue_type_style_index_0_lang-2e54ab99.js";import"./attachment-6fc096d0.js";import"./index.vue_vue_type_script_setup_true_lang-a59c79e6.js";/* empty css                 *//* empty css               *//* empty css               *//* empty css                    *//* empty css                    */import"./el-dropdown-item-4ed993c7.js";import"./index.vue_vue_type_script_setup_true_lang-bde8c802.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-49ab6f2c.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./sortable.esm-be94e56d.js";/* empty css                        *//* empty css                       *//* empty css                 */const Ee={class:"main-container"},Pe={class:"flex justify-between items-center"},Te={class:"text-page-title"},Ve={class:"mt-[10px]"},De=["src"],$e={key:0},Ne={key:1},Be={class:"mt-[16px] flex justify-end"},Ca=K({__name:"label_list",setup(Fe){const $=W(),N=Z(),B=$.meta.title,F=n=>{N.push({path:n})},o=D({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{label_name:"",group_id:"",order:"",sort:""}}),y=D([]),C=k(),w=n=>{let a="";n.order=="ascending"?a="asc":n.order=="descending"&&(a="desc"),a&&(o.searchParam.order=n.prop,o.searchParam.sort=a),d()},d=(n=1)=>{o.loading=!0,o.page=n,ye({page:o.page,limit:o.limit,...o.searchParam}).then(a=>{o.loading=!1,o.data=a.data.data,o.total=a.data.total}).catch(()=>{o.loading=!1})};(()=>{ve({}).then(n=>{const a=n.data;a&&y.push(...a)}),d()})();const f=k(null),j=()=>{f.value.setFormData(),f.value.showDialog=!0},z=n=>{f.value.setFormData(n),f.value.showDialog=!0},S=n=>{te.confirm(l("labelDeleteTips"),l("warning"),{confirmButtonText:l("confirm"),cancelButtonText:l("cancel"),type:"warning"}).then(()=>{xe(n).then(()=>{d()}).catch(()=>{})})},U=le((n,a)=>{if(isNaN(n)||!/^\d{0,8}$/.test(n)){oe({type:"warning",message:`${l("sortTips")}`});return}n>99999999&&(a.sort=99999999),ke({label_id:a.label_id,sort:n}).then(m=>{})}),v=k(!1),L=(n,a)=>{v.value||(v.value=!0,Ce({label_id:n,status:a}).then(m=>{d(),v.value=!1}))},R=n=>{n&&(n.resetFields(),d())};return(n,a)=>{const m=ne,E=re,M=se,P=ie,x=pe,G=de,I=me,O=ce,T=ue,c=_e,V=be,q=ge,Y=fe,A=he;return p(),g("div",Ee,[t(T,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[u("div",Pe,[u("span",Te,i(r(B)),1),t(m,{type:"primary",onClick:j},{default:s(()=>[_(i(r(l)("addLabel")),1)]),_:1})]),t(M,{"model-value":"/shop/goods/label",onTabChange:F},{default:s(()=>[t(E,{label:r(l)("tabGoodsLabel"),name:"/shop/goods/label"},null,8,["label"]),t(E,{label:r(l)("tabGoodsLabelGroup"),name:"/shop/goods/label/group"},null,8,["label"])]),_:1}),t(T,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:s(()=>[t(O,{inline:!0,model:o.searchParam,ref_key:"searchFormRef",ref:C},{default:s(()=>[t(x,{label:r(l)("labelName"),prop:"label_name"},{default:s(()=>[t(P,{modelValue:o.searchParam.label_name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.searchParam.label_name=e),modelModifiers:{trim:!0},placeholder:r(l)("labelNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(x,{label:r(l)("groupName"),prop:"group_id"},{default:s(()=>[t(I,{modelValue:o.searchParam.group_id,"onUpdate:modelValue":a[1]||(a[1]=e=>o.searchParam.group_id=e),placeholder:r(l)("groupNamePlaceholder"),clearable:""},{default:s(()=>[(p(!0),g(H,null,J(y,e=>(p(),h(G,{key:e.group_id,label:e.group_name,value:e.group_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(x,null,{default:s(()=>[t(m,{type:"primary",onClick:a[2]||(a[2]=e=>d())},{default:s(()=>[_(i(r(l)("search")),1)]),_:1}),t(m,{onClick:a[3]||(a[3]=e=>R(C.value))},{default:s(()=>[_(i(r(l)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),u("div",Ve,[Q((p(),h(q,{data:o.data,size:"large",onSortChange:w},{empty:s(()=>[u("span",null,i(o.loading?"":r(l)("emptyData")),1)]),default:s(()=>[t(c,{prop:"label_name",label:r(l)("label"),"min-width":"120"},{default:s(({row:e})=>[e.style_type=="diy"?(p(),g("div",{key:0,class:"inline-block px-[10px] text-[12px] rounded-[4px] box-border whitespace-nowrap h-[28px] leading-[28px]",style:X({color:e.color_json.text_color,backgroundColor:e.color_json.bg_color,border:e.color_json.border_color?"1px solid "+e.color_json.border_color:"none"})},[u("span",null,i(e.label_name),1)],4)):e.style_type=="icon"?(p(),g("img",{key:1,class:"block h-[28px] rounded-[4px] object-cover",src:r(ee)(e.icon)},null,8,De)):ae("",!0)]),_:1},8,["label"]),t(c,{prop:"group_name",label:r(l)("groupName"),"min-width":"120"},{default:s(({row:e})=>[e.group?(p(),g("span",$e,i(e.group.group_name),1)):(p(),g("span",Ne,"--"))]),_:1},8,["label"]),t(c,{prop:"status",label:r(l)("status"),"min-width":"80","show-overflow-tooltip":!0},{default:s(({row:e})=>[e.status==1?(p(),h(V,{key:0,type:"success",onClick:b=>L(e.label_id,0),class:"cursor-pointer"},{default:s(()=>[_(i(r(l)("statusOn")),1)]),_:2},1032,["onClick"])):(p(),h(V,{key:1,type:"info",onClick:b=>L(e.label_id,1),class:"cursor-pointer"},{default:s(()=>[_(i(r(l)("statusOff")),1)]),_:2},1032,["onClick"]))]),_:1},8,["label"]),t(c,{prop:"memo",label:r(l)("memo"),"min-width":"200"},null,8,["label"]),t(c,{prop:"sort",label:r(l)("sort"),"min-width":"120",sortable:"custom"},{default:s(({row:e})=>[t(P,{modelValue:e.sort,"onUpdate:modelValue":b=>e.sort=b,modelModifiers:{trim:!0},class:"!w-[100px]",maxlength:"8",onBlur:b=>r(U)(e.sort,e)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1},8,["label"]),t(c,{prop:"create_time",label:r(l)("createTime"),"min-width":"100",sortable:"custom"},{default:s(({row:e})=>[u("div",null,i(e.create_time),1)]),_:1},8,["label"]),t(c,{label:r(l)("operation"),fixed:"right",align:"right","min-width":"120"},{default:s(({row:e})=>[t(m,{type:"primary",link:"",onClick:b=>z(e)},{default:s(()=>[_(i(r(l)("edit")),1)]),_:2},1032,["onClick"]),t(m,{type:"primary",link:"",onClick:b=>S(e.label_id)},{default:s(()=>[_(i(r(l)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[A,o.loading]]),u("div",Be,[t(Y,{"current-page":o.page,"onUpdate:current-page":a[4]||(a[4]=e=>o.page=e),"page-size":o.limit,"onUpdate:page-size":a[5]||(a[5]=e=>o.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:o.total,onSizeChange:a[6]||(a[6]=e=>d()),onCurrentChange:d},null,8,["current-page","page-size","total"])])]),t(Le,{ref_key:"editLabelDialog",ref:f,onComplete:d,groupList:y},null,8,["groupList"])]),_:1})])}}});export{Ca as default};
