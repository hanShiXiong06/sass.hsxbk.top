import{d as W,x as K,f as Z,r as x,n as G,a2 as H,h as c,c as w,e as n,w as o,a as r,t as p,u as t,i,q as s,F as E,T as P,s as m,B as f,Z as g,A as J,a5 as z,E as Q,K as X,L as ee,ac as te,aD as ae,bO as oe,M as le,a7 as ne,al as se,cz as re,W as de}from"./index-99f00cf3.js";/* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                  *//* empty css                *//* empty css                *//* empty css                       *//* empty css                  */import"./el-form-item-4ed993c7.js";import{g as ce,a as ie,s as pe,b as me,d as ue}from"./addon-73351360.js";import{_ as _e}from"./_plugin-vue_export-helper-c27b6911.js";const fe={class:"main-container"},ye={class:"flex justify-between items-center"},ge={class:"text-lg"},he={class:"mt-[40px]"},ve={class:"flex flex-wrap ml-8 mt-4 mb-4"},be={class:"hover:bg-gray-100 cursor-pointer w-[320px] rounded-lg shadow-md p-4 mr-6 mb-8"},xe={class:"flex items-center justify-between mb-4"},ke={class:"flex"},we=["onClick"],Ce={class:"flex flex-col w-[220px]"},Ee=["onClick"],Pe={class:"font-bold truncate overflow-hidden whitespace-nowrap"},Ve=["onClick"],Te={class:"text-gray-400 text-xs truncate overflow-hidden whitespace-nowrap ml-2"},Be={class:"flex justify-between mt-3"},De={class:"mt-[10px]"},Ie={class:"mt-[16px] flex justify-end"},$e=W({__name:"addon",setup(ze){const F=K(),V=Z(),L=F.meta.title,T=x([]);(async()=>{T.value=await(await ie({})).data})();const B=x();ce().then(d=>{d.data&&(B.value=d.data)});const A=async d=>{try{await z.confirm("即将进行消息发送，请核对消息内容及消息接收人",s("warning"),{confirmButtonText:s("confirm"),cancelButtonText:s("cancel"),type:"warning"}),await pe(d),u()}catch{}};let a=G({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{name:"",image:"",type:"",category_id:"",create_time:[]}});const D=x();x([]);const u=(d=1)=>{a.loading=!0,a.page=d,me({page:a.page,limit:a.limit,...a.searchParam}).then(l=>{a.loading=!1,a.data=l.data.data,a.total=l.data.total}).catch(()=>{a.loading=!1})};u(),x(null);const N=()=>{V.push("/qf_notice/addon/addon_edit")},k=d=>{V.push("/qf_notice/addon/addon_edit?id="+d.id)},U=d=>{z.confirm(s("addonDeleteTips"),s("warning"),{confirmButtonText:s("confirm"),cancelButtonText:s("cancel"),type:"warning"}).then(()=>{ue(d).then(()=>{u()}).catch(()=>{})})},j=d=>{d&&(d.resetFields(),u())};return(d,l)=>{const y=Q,M=X,h=ee,C=te,I=ae,R=oe,Y=le,$=ne,_=se,q=re,S=H("block"),O=de;return c(),w("div",fe,[n($,{class:"box-card !border-none",shadow:"never"},{default:o(()=>[r("div",ye,[r("span",ge,p(t(L)),1),n(y,{type:"primary",onClick:N},{default:o(()=>[i(p(t(s)("addAddon")),1)]),_:1})]),n($,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:o(()=>[n(Y,{inline:!0,model:t(a).searchParam,ref_key:"searchFormRef",ref:D},{default:o(()=>[n(h,{label:t(s)("name"),prop:"name"},{default:o(()=>[n(M,{modelValue:t(a).searchParam.name,"onUpdate:modelValue":l[0]||(l[0]=e=>t(a).searchParam.name=e),placeholder:t(s)("namePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(h,{label:t(s)("categoryId"),prop:"category_id"},{default:o(()=>[n(I,{class:"w-[280px]",modelValue:t(a).searchParam.category_id,"onUpdate:modelValue":l[1]||(l[1]=e=>t(a).searchParam.category_id=e),clearable:"",placeholder:t(s)("categoryIdPlaceholder")},{default:o(()=>[(c(!0),w(E,null,P(T.value,(e,v)=>(c(),m(C,{key:v,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(h,{label:t(s)("type"),prop:"type"},{default:o(()=>[n(I,{class:"",modelValue:t(a).searchParam.type,"onUpdate:modelValue":l[2]||(l[2]=e=>t(a).searchParam.type=e),clearable:"",placeholder:t(s)("typePlaceholder")},{default:o(()=>[n(C,{label:"全部",value:""}),(c(!0),w(E,null,P(B.value,(e,v)=>(c(),m(C,{key:v,label:e.name,value:e.status},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(h,{label:t(s)("createTime"),prop:"create_time"},{default:o(()=>[n(R,{modelValue:t(a).searchParam.create_time,"onUpdate:modelValue":l[3]||(l[3]=e=>t(a).searchParam.create_time=e),type:"datetimerange",format:"YYYY-MM-DD hh:mm:ss","start-placeholder":t(s)("startDate"),"end-placeholder":t(s)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),n(h,null,{default:o(()=>[n(y,{type:"primary",onClick:l[4]||(l[4]=e=>u())},{default:o(()=>[i(p(t(s)("search")),1)]),_:1}),n(y,{onClick:l[5]||(l[5]=e=>j(D.value))},{default:o(()=>[i(p(t(s)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),r("div",he,[r("div",ve,[(c(!0),w(E,null,P(t(a).data,(e,v)=>(c(),m(S,{key:v,class:""},{default:o(()=>[r("div",be,[r("div",xe,[r("div",null,"ID: "+p(e.id),1),r("div",null,[e.type=="sms"?(c(),m(_,{key:0,effect:"plain",type:"error"},{default:o(()=>[i(p(e.type_name),1)]),_:2},1024)):f("",!0),e.type=="wechat"?(c(),m(_,{key:1,effect:"plain",type:"warning"},{default:o(()=>[i(p(e.type_name),1)]),_:2},1024)):f("",!0),e.type=="email"?(c(),m(_,{key:2,effect:"plain"},{default:o(()=>[i(p(e.type_name),1)]),_:2},1024)):f("",!0)])]),r("div",ke,[r("div",{onClick:g(b=>k(e),["stop"]),class:"mr-4"},[n(q,{size:50,src:t(J)(e.image)},null,8,["src"])],8,we),r("div",Ce,[r("div",{onClick:g(b=>k(e),["stop"]),class:"flex items-center"},[r("h2",Pe,p(e.name),1)],8,Ee),r("div",{onClick:g(b=>k(e),["stop"]),class:"flex items-center mt-1 mb-2"},[e.is_main==1?(c(),m(_,{key:0,type:"info"},{default:o(()=>[i("系统会员")]),_:1})):f("",!0),e.is_main==0?(c(),m(_,{key:1,type:"primary"},{default:o(()=>[i("用户列表")]),_:1})):f("",!0),r("h2",Te,p(e.desc),1)],8,Ve)])]),r("div",Be,[r("div",null,[e.status==0?(c(),m(_,{key:0,effect:"plain",type:"error"},{default:o(()=>[i("禁用")]),_:1})):f("",!0),e.status==1?(c(),m(_,{key:1,effect:"plain"},{default:o(()=>[i("启用")]),_:1})):f("",!0)]),r("div",null,[n(y,{type:"primary",link:"",onClick:g(b=>k(e),["stop"])},{default:o(()=>[i(p(t(s)("edit")),1)]),_:2},1032,["onClick"]),n(y,{type:"info",link:"",onClick:g(b=>U(e.id),["stop"])},{default:o(()=>[i(p(t(s)("delete")),1)]),_:2},1032,["onClick"]),n(y,{type:"primary",round:"",size:"small",onClick:g(b=>A(e.id),["stop"])},{default:o(()=>[i("发送")]),_:2},1032,["onClick"])])])])]),_:2},1024))),128))])]),r("div",De,[r("div",Ie,[n(O,{"current-page":t(a).page,"onUpdate:current-page":l[6]||(l[6]=e=>t(a).page=e),"page-size":t(a).limit,"onUpdate:page-size":l[7]||(l[7]=e=>t(a).limit=e),layout:"total, sizes, prev, pager, next, jumper",total:t(a).total,onSizeChange:l[8]||(l[8]=e=>u()),onCurrentChange:u},null,8,["current-page","page-size","total"])])])]),_:1})])}}});const Je=_e($e,[["__scopeId","data-v-ce6eb562"]]);export{Je as default};
