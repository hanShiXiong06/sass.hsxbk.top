import{d as S,f as M,x as U,n as q,r as E,h as s,c,e as a,w as n,a as m,t as i,u as o,i as _,q as t,R as G,s as y,F as K,B as k,a5 as T,E as W,K as Y,L as A,M as H,a7 as J,ac as O,ad as Q,W as X,Y as Z}from"./index-5a756a51.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                  */import{g as ee,j as te,k as ae}from"./marketing-1513f89c.js";import{_ as ne}from"./coupon-spread-popup.vue_vue_type_script_setup_true_lang-d2291013.js";/* empty css                  *//* empty css                   *//* empty css                 *//* empty css                        */import"./browser-a1ac24ac.js";const oe={class:"main-container"},le={class:"flex justify-between items-center"},ie={class:"text-page-title"},se={class:"mt-[10px]"},pe={key:0},re={key:1},ce={key:0},de={key:1},me={key:0},ue={key:1},_e={key:0},he={key:1},fe={key:1},ye={key:0},ge={key:0,class:"flex flex-col"},ke={key:1},ve={key:1},be={class:"mt-[16px] flex justify-end"},He=S({__name:"list",setup(Ce){const g=M(),B=U().meta.title,l=q({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{title:""}}),v=E(),h=(p=1)=>{l.loading=!0,l.page=p,ee({page:l.page,limit:l.limit,...l.searchParam}).then(r=>{l.loading=!1,l.data=r.data.data,l.total=r.data.total}).catch(()=>{l.loading=!1})};h();const b=E(null),P=p=>{b.value.show(p)},$=()=>{g.push("/shop/marketing/coupon/add")},F=p=>{g.push("/shop/marketing/coupon/edit?id="+p.id)},R=p=>{g.push("/shop/marketing/coupon/collection?id="+p.id)},V=p=>{T.confirm(t("couponDeleteTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{te(p.id).then(()=>{h()}).catch(()=>{})})},z=p=>{T.confirm(t("couponColseTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{ae(p.id).then(()=>{h()}).catch(()=>{})})},N=p=>{p&&(p.resetFields(),h())};return(p,r)=>{const u=W,D=Y,C=A,j=H,x=J,d=O,w=Q,I=X,L=Z;return s(),c("div",oe,[a(x,{class:"box-card !border-none",shadow:"never"},{default:n(()=>[m("div",le,[m("span",ie,i(o(B)),1),a(u,{type:"primary",onClick:$},{default:n(()=>[_(i(o(t)("addCoupon")),1)]),_:1})]),a(x,{class:"box-card !border-none my-[20px] table-search-wrap",shadow:"never"},{default:n(()=>[a(j,{inline:!0,model:l.searchParam,ref_key:"searchFormRef",ref:v},{default:n(()=>[a(C,{label:o(t)("title"),prop:"title"},{default:n(()=>[a(D,{modelValue:l.searchParam.title,"onUpdate:modelValue":r[0]||(r[0]=e=>l.searchParam.title=e),modelModifiers:{trim:!0},placeholder:o(t)("titlePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(C,null,{default:n(()=>[a(u,{type:"primary",onClick:r[1]||(r[1]=e=>h())},{default:n(()=>[_(i(o(t)("search")),1)]),_:1}),a(u,{onClick:r[2]||(r[2]=e=>N(v.value))},{default:n(()=>[_(i(o(t)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),m("div",se,[G((s(),y(w,{data:l.data,size:"large"},{empty:n(()=>[m("span",null,i(l.loading?"":o(t)("emptyData")),1)]),default:n(()=>[a(d,{prop:"title",label:o(t)("title"),"min-width":"130"},null,8,["label"]),a(d,{prop:"type_name",label:o(t)("type"),"min-width":"130"},null,8,["label"]),a(d,{prop:"price",label:o(t)("price"),"min-width":"130"},{default:n(({row:e})=>[m("span",null,"¥"+i(e.price),1)]),_:1},8,["label"]),a(d,{label:o(t)("receiveType"),"min-width":"130"},{default:n(({row:e})=>[e.receive_type==1?(s(),c("span",pe,"是")):(s(),c("span",re,"否"))]),_:1},8,["label"]),a(d,{label:o(t)("sumCount"),"min-width":"160"},{default:n(({row:e})=>[e.receive_type==1&&e.sum_count!="-1"?(s(),c("span",ce,i(e.remain_count||"")+" / "+i(e.sum_count||""),1)):(s(),c("span",de,"不限量"))]),_:1},8,["label"]),a(d,{label:o(t)("remainCount"),"min-width":"140"},{default:n(({row:e})=>[m("span",null,i(e.receive_count||0)+" / "+i(e.receive_use_count||0),1)]),_:1},8,["label"]),a(d,{label:o(t)("threshold"),"min-width":"130"},{default:n(({row:e})=>[e.min_condition_money=="0.00"?(s(),c("span",me,"无门槛")):(s(),c("span",ue,"满"+i(e.min_condition_money)+"元可用",1))]),_:1},8,["label"]),a(d,{label:o(t)("validType"),"min-width":"210"},{default:n(({row:e})=>[e.receive_type==1?(s(),c(K,{key:0},[e.valid_type==1?(s(),c("span",_e," 领取之日起"+i(e.length||"")+" 天内有效",1)):(s(),c("span",he," 使用截止时间至"+i(e.valid_end_time||""),1))],64)):(s(),c("span",fe,"--"))]),_:1},8,["label"]),a(d,{label:o(t)("receiveTypeTime"),"min-width":"210"},{default:n(({row:e})=>[e.receive_type==1?(s(),c("div",ye,[parseInt(e.start_time)!=0&&parseInt(e.end_time)!=0?(s(),c("div",ge,[m("span",null,"开始时间："+i(e.start_time),1),m("span",null,"结束时间："+i(e.end_time),1)])):(s(),c("div",ke,"不限时"))])):(s(),c("span",ve,"--"))]),_:1},8,["label"]),a(d,{prop:"status_name",label:o(t)("statusName"),"min-width":"130"},null,8,["label"]),a(d,{label:o(t)("operation"),fixed:"right",align:"right","min-width":"160"},{default:n(({row:e})=>[a(u,{type:"primary",link:"",onClick:f=>P(e)},{default:n(()=>[_(i(o(t)("spreadGoods")),1)]),_:2},1032,["onClick"]),e.status==1?(s(),y(u,{key:0,type:"primary",link:"",onClick:f=>F(e)},{default:n(()=>[_(i(o(t)("edit")),1)]),_:2},1032,["onClick"])):k("",!0),e.status!=1?(s(),y(u,{key:1,type:"primary",link:"",onClick:f=>V(e)},{default:n(()=>[_(i(o(t)("delete")),1)]),_:2},1032,["onClick"])):k("",!0),e.status==1?(s(),y(u,{key:2,type:"primary",link:"",onClick:f=>z(e)},{default:n(()=>[_(i(o(t)("close")),1)]),_:2},1032,["onClick"])):k("",!0),a(u,{type:"primary",link:"",onClick:f=>R(e)},{default:n(()=>[_(i(o(t)("receive")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[L,l.loading]]),m("div",be,[a(I,{"current-page":l.page,"onUpdate:current-page":r[3]||(r[3]=e=>l.page=e),"page-size":l.limit,"onUpdate:page-size":r[4]||(r[4]=e=>l.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:l.total,onSizeChange:r[5]||(r[5]=e=>h()),onCurrentChange:h},null,8,["current-page","page-size","total"])])])]),_:1}),a(ne,{ref_key:"couponSpreadPopupRef",ref:b},null,512)])}}});export{He as default};
