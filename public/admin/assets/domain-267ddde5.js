import{d as A,x as G,aP as H,n as J,r as g,h as i,c as _,e as a,w as o,a as y,t as u,u as r,i as d,q as t,F as k,T as C,s as v,R as Q,B as D,U,a5 as X,E as Z,K as ee,L as ae,ac as te,aD as le,bO as oe,M as ne,a7 as re,ad as se,al as ie,ae as pe,W as ue,Y as de}from"./index-99f00cf3.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                *//* empty css                       *//* empty css                  */import"./el-form-item-4ed993c7.js";import{_ as me,g as ce,d as _e}from"./domain-edit.vue_vue_type_style_index_0_lang-a52a5c31.js";import{_ as ve}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                  *//* empty css                   *//* empty css                       *//* empty css                 */const fe={class:"main-container"},be={class:"flex justify-between items-center"},he={class:"text-lg"},ge={class:"mt-[10px]"},ye={class:"mt-[16px] flex justify-end"},we=A({__name:"domain",setup(xe){const L=G().meta.title,{copy:Ce,isSupported:$}=H(),z=p=>{$.value||U({message:t("notSupportCopy"),type:"warning"}),R(p)},n=J({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{name:"",number:"",scope:"",status:"",create_time:[]}}),E=g();g([]);const P=g([{value:"1",name:"启用"},{value:"0",name:"禁用"}]),V=g([{value:"snsapi_base",name:"静默授权"},{value:"snsapi_userinfo",name:"弹出授权"}]),c=(p=1)=>{n.loading=!0,n.page=p,ce({page:n.page,limit:n.limit,...n.searchParam}).then(l=>{n.loading=!1,n.data=l.data.data,n.total=l.data.total}).catch(()=>{n.loading=!1})};c();const b=g(null),M=()=>{b.value.setFormData(),b.value.showDialog=!0},N=p=>{b.value.setFormData(p),b.value.showDialog=!0},S=p=>{X.confirm(t("domainDeleteTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{_e(p).then(()=>{c()}).catch(()=>{})})},Y=p=>{p&&(p.resetFields(),c())},R=p=>{var l=document.createElement("textarea");l.style.position="fixed",l.style.opacity="0",l.value=p,document.body.appendChild(l),l.select(),document.execCommand("copy"),document.body.removeChild(l),U({message:"复制成功",type:"success"})};return(p,l)=>{const f=Z,T=ee,h=ae,w=te,F=le,j=oe,I=ne,B=re,m=se,x=ie,O=pe,q=ue,K=de;return i(),_("div",fe,[a(B,{class:"box-card !border-none",shadow:"never"},{default:o(()=>[y("div",be,[y("span",he,u(r(L)),1),a(f,{type:"primary",onClick:M},{default:o(()=>[d(u(r(t)("addDomain")),1)]),_:1})]),a(B,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:o(()=>[a(I,{inline:!0,model:n.searchParam,ref_key:"searchFormRef",ref:E},{default:o(()=>[a(h,{label:r(t)("name"),prop:"name"},{default:o(()=>[a(T,{modelValue:n.searchParam.name,"onUpdate:modelValue":l[0]||(l[0]=e=>n.searchParam.name=e),placeholder:r(t)("namePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(h,{label:r(t)("scope"),prop:"scope"},{default:o(()=>[a(F,{class:"w-[280px]",modelValue:n.searchParam.scope,"onUpdate:modelValue":l[1]||(l[1]=e=>n.searchParam.scope=e),clearable:"",placeholder:r(t)("scopePlaceholder")},{default:o(()=>[a(w,{label:"全部",value:""}),(i(!0),_(k,null,C(V.value,(e,s)=>(i(),v(w,{key:s,label:e.name,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(h,{label:r(t)("status"),prop:"status"},{default:o(()=>[a(F,{class:"w-[280px]",modelValue:n.searchParam.status,"onUpdate:modelValue":l[2]||(l[2]=e=>n.searchParam.status=e),clearable:"",placeholder:r(t)("statusPlaceholder")},{default:o(()=>[a(w,{label:"全部",value:""}),(i(!0),_(k,null,C(P.value,(e,s)=>(i(),v(w,{key:s,label:e.name,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(h,{label:r(t)("createTime"),prop:"create_time"},{default:o(()=>[a(j,{modelValue:n.searchParam.create_time,"onUpdate:modelValue":l[3]||(l[3]=e=>n.searchParam.create_time=e),type:"datetimerange",format:"YYYY-MM-DD hh:mm:ss","start-placeholder":r(t)("startDate"),"end-placeholder":r(t)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),a(h,null,{default:o(()=>[a(f,{type:"primary",onClick:l[4]||(l[4]=e=>c())},{default:o(()=>[d(u(r(t)("search")),1)]),_:1}),a(f,{onClick:l[5]||(l[5]=e=>Y(E.value))},{default:o(()=>[d(u(r(t)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),y("div",ge,[Q((i(),v(O,{data:n.data,size:"large"},{empty:o(()=>[y("span",null,u(n.loading?"":r(t)("emptyData")),1)]),default:o(()=>[a(m,{prop:"name",label:r(t)("name"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),a(m,{prop:"scope",label:r(t)("scope"),"min-width":"120","show-overflow-tooltip":!0},{default:o(({row:e})=>[(i(!0),_(k,null,C(V.value,(s,W)=>(i(),_("div",null,[s.value=="snsapi_base"&&e.scope==s.value?(i(),v(x,{key:0,type:"info"},{default:o(()=>[d(u(s.name),1)]),_:2},1024)):D("",!0),s.value=="snsapi_userinfo"&&e.scope==s.value?(i(),v(x,{key:1},{default:o(()=>[d(u(s.name),1)]),_:2},1024)):D("",!0)]))),256))]),_:1},8,["label"]),a(m,{prop:"domain",label:r(t)("domain"),"min-width":"300","show-overflow-tooltip":!0},null,8,["label"]),a(m,{prop:"auth_url",label:r(t)("authUrl"),"min-width":"390","show-overflow-tooltip":!0},{default:o(({row:e})=>[a(T,{readonly:"",value:e.auth_url,class:"!w-[390px]"},{append:o(()=>[a(f,{onClick:s=>z(e.auth_url),class:"bg-primary copy"},{default:o(()=>[d(u(r(t)("copy")),1)]),_:2},1032,["onClick"])]),_:2},1032,["value"])]),_:1},8,["label"]),a(m,{prop:"number",label:r(t)("number"),align:"center","min-width":"80","show-overflow-tooltip":!0},null,8,["label"]),a(m,{label:r(t)("status"),"min-width":"100",align:"center","show-overflow-tooltip":!0},{default:o(({row:e})=>[(i(!0),_(k,null,C(P.value,(s,W)=>(i(),_("div",null,[s.value=="1"&&e.status==s.value?(i(),v(x,{key:0,type:"primary"},{default:o(()=>[d(u(s.name),1)]),_:2},1024)):D("",!0),s.value=="0"&&e.status==s.value?(i(),v(x,{key:1,type:"danger"},{default:o(()=>[d(u(s.name),1)]),_:2},1024)):D("",!0)]))),256))]),_:1},8,["label"]),a(m,{label:r(t)("createTime"),"min-width":"180",align:"center","show-overflow-tooltip":!0},{default:o(({row:e})=>[d(u(e.create_time||""),1)]),_:1},8,["label"]),a(m,{label:r(t)("operation"),fixed:"right","min-width":"120"},{default:o(({row:e})=>[a(f,{type:"primary",link:"",onClick:s=>N(e)},{default:o(()=>[d(u(r(t)("edit")),1)]),_:2},1032,["onClick"]),a(f,{type:"primary",link:"",onClick:s=>S(e.id)},{default:o(()=>[d(u(r(t)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[K,n.loading]]),y("div",ye,[a(q,{"current-page":n.page,"onUpdate:current-page":l[6]||(l[6]=e=>n.page=e),"page-size":n.limit,"onUpdate:page-size":l[7]||(l[7]=e=>n.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:n.total,onSizeChange:l[8]||(l[8]=e=>c()),onCurrentChange:c},null,8,["current-page","page-size","total"])])]),a(me,{ref_key:"editDomainDialog",ref:b,onComplete:c},null,512)]),_:1})])}}});const He=ve(we,[["__scopeId","data-v-2053a3b3"]]);export{He as default};
