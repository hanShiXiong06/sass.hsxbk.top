import{d as $,x as T,f as M,r as h,n as G,l as H,q as l,h as c,c as U,e as t,w as n,u as r,R as K,s as C,F as Q,T as Y,i as _,t as f,a as k,U as z,aQ as J,a7 as W,K as X,L as Z,ab as ee,aC as te,at as le,au as ae,aE as oe,M as re,E as ne,Y as se}from"./index-6f32d09b.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                 *//* empty css                        *//* empty css                       *//* empty css                 */import{_ as ie}from"./index.vue_vue_type_script_setup_true_lang-edd497b7.js";import de from"./index-4df26bee.js";/* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  */import"./el-form-item-4ed993c7.js";/* empty css                *//* empty css                   *//* empty css                       */import{f as ue,h as me,i as pe,j as ce}from"./article-36fb2082.js";import{_ as _e}from"./_plugin-vue_export-helper-c27b6911.js";import"./index.vue_vue_type_style_index_0_lang-972988e5.js";/* empty css                  *//* empty css                   */import"./attachment-503e95ee.js";import"./index.vue_vue_type_script_setup_true_lang-bee7eaa7.js";/* empty css                        *//* empty css                      *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css               *//* empty css               *//* empty css                    *//* empty css                    */import"./el-dropdown-item-4ed993c7.js";import"./index.vue_vue_type_script_setup_true_lang-ad575143.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-0724e2f9.js";import"./sortable.esm-be94e56d.js";const fe={class:"main-container"},ge={class:"fixed-footer-wrap"},be={class:"fixed-footer"},he=$({__name:"edit",setup(ve){const v=T(),g=M(),b=parseInt(v.query.id||"0"),d=h(!1),V=h([]),I=v.meta.title,y={id:"",category_id:"",title:"",intro:"",summary:"",image:"",author:"",content:"",visit:"",visit_virtual:"",is_show:1,sort:0},a=G({...y});b&&(async(u=0)=>{if(d.value=!0,Object.assign(a,y),u){const e=await(await ue(u)).data;if(!e||Object.keys(e).length==0)return z.error(l("articleNull")),setTimeout(()=>{g.go(-1)},2e3),!1;Object.keys(a).forEach(i=>{e[i]!=null&&(a[i]=e[i])}),d.value=!1}else d.value=!1})(b),(async()=>{V.value=await(await me({})).data})();const w=h(),R=H(()=>({title:[{required:!0,message:l("titlePlaceholder"),trigger:"blur"}],category_id:[{required:!0,message:l("categoryIdPlaceholder"),trigger:"blur"}],content:[{required:!0,message:l("contentPlaceholder"),trigger:"blur"},{validator:(u,e,i)=>{!e.replace(/<[^<>]+>/g,"").replace(/&nbsp;/gi,"")&&e.indexOf("img")===-1?i(new Error(l("contentPlaceholder"))):i()},trigger:["blur","change"]}]})),F=async u=>{d.value||!u||await u.validate(async e=>{e&&(d.value=!0,(b?pe:ce)(a).then(m=>{d.value=!1,x()}).catch(()=>{d.value=!1}))})},x=()=>{g.push({path:"/cms/article/list"})};return(u,e)=>{const i=J,p=W,m=X,s=Z,L=ee,N=te,A=de,B=ie,E=le,D=ae,q=oe,O=re,P=ne,S=se;return c(),U("div",fe,[t(p,{class:"card !border-none mb-[15px]",shadow:"never"},{default:n(()=>[t(i,{content:r(I),icon:u.ArrowLeft,onBack:e[0]||(e[0]=o=>r(g).push({path:"/cms/article/list"}))},null,8,["content","icon"])]),_:1}),t(p,{class:"box-card !border-none",shadow:"never"},{default:n(()=>[K((c(),C(O,{model:a,"label-width":"90px",ref_key:"formRef",ref:w,rules:r(R),class:"page-form"},{default:n(()=>[t(s,{label:r(l)("title"),prop:"title"},{default:n(()=>[t(m,{modelValue:a.title,"onUpdate:modelValue":e[1]||(e[1]=o=>a.title=o),clearable:"",placeholder:r(l)("titlePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(s,{label:r(l)("categoryName"),prop:"category_id"},{default:n(()=>[t(N,{modelValue:a.category_id,"onUpdate:modelValue":e[2]||(e[2]=o=>a.category_id=o),clearable:"",placeholder:r(l)("categoryIdPlaceholder"),class:"input-width"},{default:n(()=>[(c(!0),U(Q,null,Y(V.value,(o,j)=>(c(),C(L,{label:o.name,value:o.category_id,key:j},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(s,{label:r(l)("intro"),prop:"intro"},{default:n(()=>[t(m,{modelValue:a.intro,"onUpdate:modelValue":e[3]||(e[3]=o=>a.intro=o),type:"textarea",rows:"4",clearable:"",placeholder:r(l)("introPlaceholder"),class:"input-width",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(s,{label:r(l)("summary"),prop:"summary"},{default:n(()=>[t(m,{modelValue:a.summary,"onUpdate:modelValue":e[4]||(e[4]=o=>a.summary=o),type:"textarea",rows:"4",clearable:"",placeholder:r(l)("summaryPlaceholder"),class:"input-width",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(s,{label:r(l)("image")},{default:n(()=>[t(A,{modelValue:a.image,"onUpdate:modelValue":e[5]||(e[5]=o=>a.image=o)},null,8,["modelValue"])]),_:1},8,["label"]),t(s,{label:r(l)("author"),prop:"author"},{default:n(()=>[t(m,{modelValue:a.author,"onUpdate:modelValue":e[6]||(e[6]=o=>a.author=o),clearable:"",placeholder:r(l)("authorPlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(s,{label:r(l)("content"),prop:"content"},{default:n(()=>[t(B,{modelValue:a.content,"onUpdate:modelValue":e[7]||(e[7]=o=>a.content=o)},null,8,["modelValue"])]),_:1},8,["label"]),t(s,{label:r(l)("visitVirtual")},{default:n(()=>[t(m,{modelValue:a.visit_virtual,"onUpdate:modelValue":e[8]||(e[8]=o=>a.visit_virtual=o),clearable:"",placeholder:r(l)("visitVirtualPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(s,{label:r(l)("isShow")},{default:n(()=>[t(D,{modelValue:a.is_show,"onUpdate:modelValue":e[9]||(e[9]=o=>a.is_show=o),placeholder:r(l)("isShowPlaceholder")},{default:n(()=>[t(E,{label:1},{default:n(()=>[_(f(r(l)("show")),1)]),_:1}),t(E,{label:0},{default:n(()=>[_(f(r(l)("hidden")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(s,{label:r(l)("sort"),prop:"sort"},{default:n(()=>[t(q,{modelValue:a.sort,"onUpdate:modelValue":e[10]||(e[10]=o=>a.sort=o),min:0},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[S,d.value]])]),_:1}),k("div",ge,[k("div",be,[t(P,{type:"primary",onClick:e[11]||(e[11]=o=>F(w.value))},{default:n(()=>[_(f(r(l)("save")),1)]),_:1}),t(P,{onClick:e[12]||(e[12]=o=>x())},{default:n(()=>[_(f(r(l)("cancel")),1)]),_:1})])])])}}});const it=_e(he,[["__scopeId","data-v-a1225775"]]);export{it as default};
