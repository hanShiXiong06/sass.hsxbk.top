import{d as q,x as A,f as H,r as v,n as I,h as c,c as _,e,w as i,a as d,t as a,u as o,q as s,i as D,R as G,F as W,T as J,B as y,A as K,s as Q,a3 as X,bO as Z,L as ee,ac as te,aD as ae,E as oe,M as se,a7 as le,ad as ne,ae as re,ab as ie,W as de,Y as me}from"./index-99f00cf3.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                *//* empty css                  */import"./el-form-item-4ed993c7.js";/* empty css                       */import{g as ce,a as _e,b as pe}from"./order-b4e82541.js";import{k as ue}from"./agent-1304272f.js";import{_ as he}from"./_plugin-vue_export-helper-c27b6911.js";const be={class:"main-container"},fe={class:"flex justify-between items-center"},ge={class:"text-page-title"},xe={class:"table-body min-h-[150px]"},ye={key:0},ve={class:"flex items-center justify-between h-[35px] mt-[10px] px-3 text-[12px] text-[#666] border-solid border-b-[1px] border-[var(--el-border-color)] bg-[var(--el-color-info-light-9)]"},ke={class:"ml-5"},we={key:0,class:"ml-5"},De={class:"ml-5"},Ce={class:"flex cursor-pointer"},Ee={class:"flex items-center min-w-[50px] mr-[10px]"},Pe=["src"],Fe={key:1,class:"w-[50px] h-[50px]",src:"",alt:""},Te={class:"flex flex-col w-[308px]"},Ve={class:"multi-hidden text-[14px]"},Se={class:"text-[12px] text-[#999]"},ze={class:"flex flex-col"},Ne={class:"text-[13px]"},Oe={class:"text-[13px] mt-[5px]"},Re={class:"text-[13px]"},$e={key:0,class:"flex flex-col"},je=["onClick"],Be={key:0},Le={key:1},Ue=["title","onClick"],Ye=["title","onClick"],Me={key:0},qe={key:1},Ae={key:0},He={key:0,class:"text-[14px] h-[30px] leading-[30px] px-3 bg-[#fff0e5] text-[#ff7f5b]"},Ie={class:"mr-[5px]"},Ge={class:"mt-[16px] flex justify-end"},We=q({__name:"order",setup(Je){const V=A(),k=H(),S=V.meta.title,z=v([]),N=v([]),O=v([]);(async()=>{z.value=await(await ce()).data,N.value=await(await _e()).data,O.value=await(await pe()).data})();const n=I({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{is_settlement:"",create_time:[]}}),C=v(),g=(p=1)=>{n.loading=!0,n.page=p,ue({page:n.page,limit:n.limit,...n.searchParam}).then(l=>{n.loading=!1,n.data=l.data.data.map(h=>{let u=0;return h.goods_list=[],h.shop_order.order_goods.forEach(b=>{u+=b.fenxiao_order_goods.length,b.fenxiao_order_goods.forEach((w,x)=>{let f=X(Object.assign(b,w));delete f.fenxiao_order_goods,f.goodsRowspan=x?0:b.fenxiao_order_goods.length,f.rowspan=0,h.goods_list.push(f)})}),h.goods_list[0].rowspan=u,h}),n.total=l.data.total}).catch(()=>{n.loading=!1})};g();const R=({row:p,column:l,rowIndex:h,columnIndex:u})=>u<2?[p.goodsRowspan,p.goodsRowspan?1:0]:u==2||u>6?[p.rowspan,p.rowspan?1:0]:[1,1],$=p=>{const l=k.resolve("/shop/order/detail?order_id="+p.order_id);window.open(l.href,"_blank")},E=p=>{const l=k.resolve({path:"/shop_fenxiao/detail",query:{id:p.fenxiao_member_id}});window.open(l.href,"_blank")},j=p=>{const l=k.resolve({path:"/member/detail",query:{id:p}});window.open(l.href,"_blank")},B=p=>{p&&(p.resetFields(),g())};return(p,l)=>{const h=Z,u=ee,b=te,w=ae,x=oe,f=se,P=le,m=ne,F=re,L=ie,U=de,Y=me;return c(),_("div",be,[e(P,{class:"card !border-none",shadow:"never"},{default:i(()=>[d("div",fe,[d("span",ge,a(o(S)),1)]),e(P,{class:"card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:i(()=>[e(f,{inline:!0,model:n.searchParam,ref_key:"searchFormRef",ref:C},{default:i(()=>[e(u,{label:o(s)("createTime"),prop:"create_time"},{default:i(()=>[e(h,{modelValue:n.searchParam.create_time,"onUpdate:modelValue":l[0]||(l[0]=r=>n.searchParam.create_time=r),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":o(s)("startDate"),"end-placeholder":o(s)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),e(u,{label:o(s)("orderStatus"),prop:"is_settlement"},{default:i(()=>[e(w,{modelValue:n.searchParam.is_settlement,"onUpdate:modelValue":l[1]||(l[1]=r=>n.searchParam.is_settlement=r),placeholder:o(s)("orderStatusPlaceholder"),clearable:""},{default:i(()=>[e(b,{label:"已结算",value:1}),e(b,{label:"待结算",value:0})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(u,null,{default:i(()=>[e(x,{type:"primary",onClick:l[2]||(l[2]=r=>g())},{default:i(()=>[D(a(o(s)("search")),1)]),_:1}),e(x,{onClick:l[3]||(l[3]=r=>B(C.value))},{default:i(()=>[D(a(o(s)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),d("div",null,[e(F,{size:"large",class:"table-top"},{default:i(()=>[e(m,{label:o(s)("orderGoods"),width:"350"},null,8,["label"]),e(m,{label:o(s)("goodsPriceNumber"),"min-width":"150"},null,8,["label"]),e(m,{label:o(s)("refundStatus"),"min-width":"100"},null,8,["label"]),e(m,{label:o(s)("buyInfo"),"min-width":"120"},null,8,["label"]),e(m,{label:o(s)("agentLevel"),"min-width":"120"},null,8,["label"]),e(m,{label:o(s)("agentName"),"min-width":"120"},null,8,["label"]),e(m,{label:o(s)("agentDiscount"),"min-width":"120"},null,8,["label"]),e(m,{label:o(s)("goodsAgentPrice"),"min-width":"120",align:"right"},null,8,["label"]),e(m,{label:o(s)("orderStatus"),"min-width":"120"},null,8,["label"]),e(m,{label:o(s)("operation"),fixed:"right",align:"right","min-width":"120"},null,8,["label"])]),_:1}),G((c(),_("div",xe,[n.loading?y("",!0):(c(),_("div",ye,[n.data.length?(c(!0),_(W,{key:0},J(n.data,(r,M)=>(c(),_("div",{key:M},[d("div",ve,[d("div",null,[d("span",null,a(o(s)("orderNo"))+"："+a(r.order_no),1),d("span",ke,a(o(s)("createTime"))+"："+a(r.create_time),1),r.pay?(c(),_("span",we,a(o(s)("payType"))+"："+a(r.pay.type_name),1)):y("",!0),d("span",De,a(o(s)("countPrice"))+"：￥"+a(r.commission_agent),1)])]),e(F,{data:r.goods_list,size:"large","show-header":!1,"span-method":R,ref_for:!0,ref:"multipleTable"},{default:i(()=>[e(m,{align:"left",width:"350"},{default:i(({row:t})=>[d("div",Ce,[d("div",Ee,[t.goods_image_thumb_mid?(c(),_("img",{key:0,class:"w-[50px] h-[50px]",src:o(K)(t.goods_image_thumb_mid),alt:""},null,8,Pe)):(c(),_("img",Fe))]),d("div",Te,[d("p",Ve,a(t.goods_name),1),d("span",Se,a(t.sku_name),1)])])]),_:1}),e(m,{"min-width":"150"},{default:i(({row:t})=>[d("div",ze,[d("span",Ne,"￥"+a(t.goods_money),1),d("span",Oe,a(t.num)+a(o(s)("price")),1)])]),_:1}),e(m,{"min-width":"100"},{default:i(({row:t})=>[d("span",Re,a(t.status!=1&&t.status_name?t.status_name:"--"),1)]),_:1}),e(m,{"min-width":"120","class-name":"border-0 border-l-[1px] border-solid border-[var(--el-table-border-color)]"},{default:i(()=>[r.shop_order.member?(c(),_("div",$e,[d("span",{class:"text-[12px] text-primary cursor-pointer",onClick:t=>j(r.shop_order.member.member_id)},a(r.shop_order.member.nickname),9,je)])):y("",!0)]),_:2},1024),e(m,{"min-width":"120","class-name":"border-0 border-l-[1px] border-solid border-[var(--el-table-border-color)]"},{default:i(({row:t})=>[t.commission_level?(c(),_("span",Be,a(t.commission_level)+"级",1)):(c(),_("span",Le,"--"))]),_:1}),e(m,{"min-width":"120"},{default:i(({row:t})=>[t.member.nickname?(c(),_("span",{key:0,title:t.member.nickname,class:"multi-hidden text-primary cursor-pointer",onClick:T=>E(t)},a(t.member.nickname),9,Ue)):(c(),_("span",{key:1,title:t.member.nickname,class:"multi-hidden text-primary cursor-pointer",onClick:T=>E(t)},a(t.member.username),9,Ye))]),_:1}),e(m,{"min-width":"120"},{default:i(({row:t})=>[t.agent_discount?(c(),_("span",Me,a(t.agent_discount)+" 折",1)):(c(),_("span",qe,"--"))]),_:1}),e(m,{"min-width":"120",align:"right"},{default:i(({row:t})=>[t.commission?(c(),_("span",Ae,"￥"+a(t.commission||"0.00"),1)):y("",!0)]),_:1}),e(m,{"min-width":"120","class-name":"border-0 border-l-[1px] border-solid border-[var(--el-table-border-color)]"},{default:i(({row:t})=>[d("span",null,a(t.is_settlement?"已结算":"待结算"),1)]),_:1}),e(m,{align:"right","min-width":"120"},{default:i(({row:t})=>[e(x,{type:"primary",link:"",onClick:T=>$(t)},{default:i(()=>[D(a(o(s)("orderDetail")),1)]),_:2},1032,["onClick"])]),_:1})]),_:2},1032,["data"]),r.shop_remark?(c(),_("div",He,[d("span",Ie,a(o(s)("notes"))+"：",1),d("span",null,a(r.shop_remark),1)])):y("",!0)]))),128)):(c(),Q(L,{key:1,"image-size":1,description:o(s)("emptyData")},null,8,["description"]))]))])),[[Y,n.loading]]),d("div",Ge,[e(U,{"current-page":n.page,"onUpdate:current-page":l[4]||(l[4]=r=>n.page=r),"page-size":n.limit,"onUpdate:page-size":l[5]||(l[5]=r=>n.limit=r),layout:"total, sizes, prev, pager, next, jumper",total:n.total,onSizeChange:l[6]||(l[6]=r=>g()),onCurrentChange:g},null,8,["current-page","page-size","total"])])])]),_:1})])}}});const xt=he(We,[["__scopeId","data-v-f217fe34"]]);export{xt as default};
