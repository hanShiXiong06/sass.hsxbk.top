import{d as xe,x as he,f as ye,r as v,n as Y,l as A,q as e,h as i,c as m,a,u as l,t as r,R as G,s as x,w as t,e as o,B as c,F as $,T as M,A as P,i as F,a4 as be,L as ge,aM as we,aN as ke,J as Re,ab as Fe,ac as Ve,a6 as Ee,a9 as De,M as Ce,K as Te,E as Be,X as Ne,aa as Ie,aB as Se,Y as Ue,p as qe,g as Ae}from"./index-6ea097a6.js";/* empty css                   *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                 *//* empty css                        *//* empty css               *//* empty css               */import{_ as $e}from"./goods_default-995568ac.js";import{v as Me,w as H,x as Q}from"./order-d7ffe8c0.js";import{f as Pe}from"./shop_address-15b82c11.js";import{_ as Le}from"./_plugin-vue_export-helper-c27b6911.js";const N=D=>(qe("data-v-8a68c215"),D=D(),Ae(),D),je={class:"main-container"},Oe={class:"detail-head"},ze=N(()=>a("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1)),Je={class:"ml-[1px]"},Ke=N(()=>a("span",{class:"adorn"},"|",-1)),Xe={class:"right"},Ye={class:"panel-title"},Ge={class:"input-width"},He={class:"input-width"},Qe={class:"input-width"},We={class:"input-width"},Ze={class:"input-width"},el={class:"input-width"},ll={class:"input-width"},al={class:"input-width"},tl={class:"input-width line-feed"},sl={class:"panel-title"},ol={class:"input-width"},rl={class:"input-width"},nl={class:"input-width"},dl={class:"input-width"},ul={class:"input-width"},il={key:0,class:"input-width flex"},pl=N(()=>a("div",{class:"image-slot"},[a("img",{class:"w-[70px] h-[70px]",src:$e})],-1)),_l={class:"max-w-[100%] break-all"},cl={key:0,class:"panel-title"},fl={class:"input-width"},ml={class:"input-width"},vl={class:"input-width"},xl={class:"panel-title"},hl={class:"mb-[20px]"},yl={class:"ml-[30px] text-[14px] mr-[20px]"},bl={class:"text-[14px]"},gl={class:"flex mt-[10px]"},wl={class:"flex ml-[30px] mt-[15px]"},kl={class:"text-[14px] text-[#ff7f5b]"},Rl={class:"ml-[10px]"},Fl={class:"text-[14px] text-[#a4a4a4]"},Vl={class:"text-[14px] text-[#a4a4a4]"},El={class:"text-[14px] text-[#a4a4a4]"},Dl={class:"panel-title"},Cl={class:"flex"},Tl={class:"flex items-center w-[50px] h-[50px] mr-[10px]"},Bl=["src"],Nl={class:"flex flex-col flex-1"},Il={key:2,class:"mt-[50px] mb-[20px]"},Sl={class:"mb-[100px]",style:{"min-height":"100px"}},Ul={class:"mr-[20px] min-w-[71px]"},ql={class:"leading-[1] w-full text-[14px] w-[100px] flex justify-end"},Al={class:"leading-[1] w-full text-[14px] w-[100px] flex justify-end mt-[15px]"},$l=N(()=>a("div",{class:"w-[16px] h-[16px] flex items-center bg-[#D1EBFF] border-[1px] border-[#0091FF] rounded-[999px]"},[a("div",{class:"w-[8px] h-[8px] mx-auto bg-[#0091FF] rounded-[999px]"})],-1)),Ml={key:0,class:"w-[2px] h-[50px] bg-[#D1EBFF] mx-auto"},Pl={class:"leading-[1] ml-[20px] text-[14px]"},Ll={class:"leading-[1] ml-[20px] text-[14px] mt-[15px]"},jl={class:"dialog-footer"},Ol={class:"dialog-footer"},zl={class:"dialog-footer"},Jl=xe({__name:"refund_detail",setup(D){const L=he(),I=ye(),W=L.meta.title,y=parseInt(L.query.refund_id),b=v(!0),f=v(!1),s=v(null),V=async(_=0)=>{b.value=!0,s.value=null,await Me(_).then(({data:n})=>{s.value=n,s.value.order_goods=[n.order_goods]}).catch(()=>{}),b.value=!1};y?V(y):b.value=!1;const g=v(!1),p=Y({...{shop_reason:"",refund_address_id:"",money:"",type:"",apply_money:0,refund_type:1}}),j=v(),O=v(),Z=A(()=>({money:[{required:!0,message:e("moneyPlaceholder"),trigger:"blur"}],refund_address_id:[{required:!0,message:e("refundaddressPlaceholder"),trigger:"blur"}]})),ee=A(()=>({shop_reason:[{required:!0,message:e("shopReasonPlaceholder"),trigger:"blur"}]})),E=v(!1),le=()=>{p.type="agree",p.refund_type=s.value.refund_type,p.apply_money=s.value.apply_money,p.money=s.value.apply_money,E.value=!0,s.value.refund_type==2&&ae()},z=v([]),ae=()=>{Pe().then(_=>{z.value=_.data,_.data.forEach(n=>{n.is_refund_address==1&&(p.refund_address_id=n.id)})})},te=async _=>{f.value||!_||await _.validate(async n=>{n&&(f.value=!0,H({order_refund_no:s.value.order_refund_no,money:p.money,is_agree:1,refund_address_id:p.refund_address_id}).then(()=>{E.value=!1,f.value=!1,V(y)}).catch(()=>{f.value=!1}))})},se=()=>{p.type="refuse",p.shop_reason="",g.value=!0},oe=async _=>{f.value||!_||await _.validate(async n=>{n&&(f.value=!0,H({order_refund_no:s.value.order_refund_no,is_agree:0,shop_reason:p.shop_reason}).then(u=>{V(y),f.value=!1,g.value=!1}).catch(()=>{f.value=!1,g.value=!1}))})},re=()=>{be.confirm(e("orderDeliveryTips"),e("warning"),{confirmButtonText:e("confirm"),cancelButtonText:e("cancel"),type:"warning"}).then(()=>{Q({order_refund_no:s.value.order_refund_no,is_agree:1}).then(()=>{V(y)})})},w=v(!1),C=Y({shop_reason:""}),J=v(),ne=A(()=>({shop_reason:[{required:!0,message:e("shopReasonPlaceholder"),trigger:"blur"}]})),de=async _=>{f.value||!_||await _.validate(async n=>{n&&(f.value=!0,Q({order_refund_no:s.value.order_refund_no,is_agree:0,shop_reason:C.shop_reason}).then(u=>{V(y),f.value=!1,w.value=!1}).catch(()=>{f.value=!1,w.value=!1}))})},ue=()=>{p.type="refuse",p.shop_reason="",w.value=!0},ie=()=>{const _=I.resolve({path:"/member/refund/detail",query:{refund_no:s.value.refund_no}});window.open(_.href,"_blank")},pe=_=>{const n=I.resolve({path:"/shop/order/detail",query:{order_id:_}});window.open(n.href,"_blank")};return(_,n)=>{const u=ge,h=we,T=ke,_e=Re,S=Fe,ce=Ve,K=Ee,fe=De,B=Ce,U=Te,k=Be,q=Ne,me=Ie,ve=Se,X=Ue;return i(),m("div",je,[a("div",Oe,[a("div",{class:"left",onClick:n[0]||(n[0]=d=>l(I).push({path:"/shop/order/refund"}))},[ze,a("span",Je,r(l(e)("returnToPreviousPage")),1)]),Ke,a("span",Xe,r(l(W)),1)]),G((i(),x(B,{model:s.value,"label-width":"100px",class:"page-form","label-position":"left"},{default:t(()=>[s.value?(i(),x(K,{key:0,class:"box-card !border-none relative",shadow:"never"},{default:t(()=>[a("h3",Ye,r(l(e)("orderInfo")),1),o(T,{class:"row-bg px-[30px] mb-[20px]",gutter:20},{default:t(()=>[o(h,{span:8},{default:t(()=>[o(u,{label:l(e)("orderNo")},{default:t(()=>[a("div",{class:"input-width text-primary cursor-pointer",onClick:n[1]||(n[1]=d=>pe(s.value.order_id))},r(s.value.order_main.order_no),1)]),_:1},8,["label"]),o(u,{label:l(e)("orderForm")},{default:t(()=>[a("div",Ge,r(s.value.order_main.order_from_name),1)]),_:1},8,["label"]),s.value.order_main.out_trade_no?(i(),x(u,{key:0,label:l(e)("outTradeNo")},{default:t(()=>[a("div",He,r(s.value.order_main.out_trade_no),1)]),_:1},8,["label"])):c("",!0),s.value.pay_refund?(i(),x(u,{key:1,label:l(e)("payType")},{default:t(()=>[a("div",Qe,r(s.value.pay_refund.type_name),1)]),_:1},8,["label"])):c("",!0)]),_:1}),o(h,{span:8},{default:t(()=>[o(u,{label:l(e)("deliveryType")},{default:t(()=>[a("div",We,r(s.value.order_main.delivery_type_name),1)]),_:1},8,["label"]),a("div",null,[o(u,{label:l(e)("takerName")},{default:t(()=>[a("div",Ze,r(s.value.order_main.taker_name),1)]),_:1},8,["label"]),o(u,{label:l(e)("takerMobile")},{default:t(()=>[a("div",el,r(s.value.order_main.taker_mobile),1)]),_:1},8,["label"]),o(u,{label:l(e)("takerFullAddress")},{default:t(()=>[a("div",ll,r(s.value.order_main.taker_full_address),1)]),_:1},8,["label"])])]),_:1}),o(h,{span:8},{default:t(()=>[o(u,{label:l(e)("memberRemark")},{default:t(()=>[a("div",al,r(s.value.order_main.member_remark),1)]),_:1},8,["label"]),o(u,{label:l(e)("notes")},{default:t(()=>[a("div",tl,r(s.value.order_main.shop_remark),1)]),_:1},8,["label"])]),_:1})]),_:1}),a("h3",sl,r(l(e)("afterSales")),1),o(T,{class:"row-bg px-[30px] mb-[20px]",gutter:20},{default:t(()=>[o(h,{span:8},{default:t(()=>[o(u,{label:l(e)("orderRefundNo")},{default:t(()=>[a("div",ol,r(s.value.order_refund_no),1)]),_:1},8,["label"]),o(u,{label:l(e)("refundType")},{default:t(()=>[a("div",rl,r(s.value.refund_type_name),1)]),_:1},8,["label"]),o(u,{label:l(e)("createTime")},{default:t(()=>[a("div",nl,r(s.value.create_time),1)]),_:1},8,["label"])]),_:1}),o(h,{span:8},{default:t(()=>[o(u,{label:l(e)("refundMoney")},{default:t(()=>[a("div",dl,"￥"+r(s.value.apply_money),1)]),_:1},8,["label"]),o(u,{label:l(e)("refundReason")},{default:t(()=>[a("div",ul,r(s.value.reason),1)]),_:1},8,["label"])]),_:1})]),_:1}),o(T,{class:"row-bg px-[30px] mb-[20px]",gutter:20},{default:t(()=>[o(h,{span:8},{default:t(()=>[o(u,{label:l(e)("refundVoucher")},{default:t(()=>[s.value.voucher?(i(),m("div",il,[(i(!0),m($,null,M(s.value.voucher,(d,R)=>(i(),m("div",{class:"mr-3",key:R},[d?(i(),x(_e,{key:0,class:"w-[70px] h-[70px]",src:l(P)(d),fit:"contain","preview-src-list":[l(P)(d)]},{error:t(()=>[pl]),_:2},1032,["src","preview-src-list"])):c("",!0)]))),128))])):c("",!0)]),_:1},8,["label"]),o(u,{label:l(e)("refundRemark")},{default:t(()=>[a("div",_l,r(s.value.remark),1)]),_:1},8,["label"])]),_:1})]),_:1}),s.value.status==4?(i(),m("h3",cl,"买家退货信息")):c("",!0),s.value.status==4?(i(),x(T,{key:1,class:"row-bg px-[30px] mb-[20px]",gutter:20},{default:t(()=>[o(h,{span:8},{default:t(()=>[o(u,{label:l(e)("expressCompany")},{default:t(()=>[a("div",fl,r(s.value.delivery.express_company),1)]),_:1},8,["label"])]),_:1}),o(h,{span:8},{default:t(()=>[o(u,{label:l(e)("expressNumber")},{default:t(()=>[a("div",ml,r(s.value.delivery.express_number),1)]),_:1},8,["label"])]),_:1}),o(h,{span:8},{default:t(()=>[o(u,{label:l(e)("expressRemark")},{default:t(()=>[a("div",vl,r(s.value.delivery.remark),1)]),_:1},8,["label"])]),_:1})]),_:1})):c("",!0),a("h3",xl,r(l(e)("refundStatus")),1),a("div",hl,[a("p",null,[a("span",yl,r(l(e)("refundStatus"))+"：",1),a("span",bl,r(s.value.status_name),1)]),a("div",gl,[s.value.status==1?(i(),m("span",{key:0,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:le},r(l(e)("agree")),1)):c("",!0),s.value.status==1?(i(),m("span",{key:1,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:se},r(l(e)("refuse")),1)):c("",!0),s.value.status==4&&s.value.refund_type==2?(i(),m("span",{key:2,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:re},r(l(e)("confirmDelivery")),1)):c("",!0),s.value.status==4&&s.value.refund_type==2?(i(),m("span",{key:3,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:ue},r(l(e)("refuse")),1)):c("",!0),s.value.status==6?(i(),m("span",{key:4,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:ie},r(l(e)("transferAccounts")),1)):c("",!0)]),a("div",wl,[a("span",kl,r(l(e)("remind"))+"：",1),a("div",Rl,[a("p",Fl,r(l(e)("remindTips1")),1),a("p",Vl,r(l(e)("remindTips2")),1),a("p",El,r(l(e)("remindTips3")),1)])])]),a("h3",Dl,r(l(e)("goodsDetail")),1),o(ce,{data:s.value.order_goods,size:"large"},{default:t(()=>[o(S,{label:l(e)("goodsName"),align:"left",width:"300"},{default:t(({row:d})=>[a("div",Cl,[a("div",Tl,[a("img",{class:"w-[50px] h-[50px]",src:l(P)(d.goods_image)},null,8,Bl)]),a("div",Nl,[a("span",null,r(d.goods_name),1)])])]),_:1},8,["label"]),o(S,{prop:"price",label:l(e)("price"),"min-width":"50",align:"left"},null,8,["label"]),o(S,{prop:"num",label:l(e)("num"),"min-width":"50",align:"right"},null,8,["label"])]),_:1},8,["data"]),s.value.refund_log.length>0?(i(),m("h3",Il,r(l(e)("operateLog")),1)):c("",!0),a("div",Sl,[s.value.refund_log.length>0?(i(!0),m($,{key:0},M(s.value.refund_log,(d,R)=>(i(),m("div",{class:"flex",key:R},[a("div",Ul,[a("div",ql,r(d.create_time.split(" ")[0]),1),a("div",Al,r(d.create_time.split(" ")[1]),1)]),a("div",null,[$l,R+1!=s.value.refund_log.length?(i(),m("div",Ml)):c("",!0)]),a("div",null,[a("div",Pl,r(d.main_type_name)+r(d.main_name),1),a("div",Ll,r(d.type_name),1)])]))),128)):c("",!0)])]),_:1})):c("",!0),!b.value&&!s.value?(i(),x(K,{key:1,class:"box-card !border-none relative",shadow:"never"},{default:t(()=>[o(fe,{description:l(e)("orderInfoEmpty")},null,8,["description"])]),_:1})):c("",!0)]),_:1},8,["model"])),[[X,b.value]]),o(q,{modelValue:g.value,"onUpdate:modelValue":n[5]||(n[5]=d=>g.value=d),title:l(e)("orderRefundRefuse"),width:"460px",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:t(()=>[a("span",jl,[o(k,{onClick:n[3]||(n[3]=d=>g.value=!1)},{default:t(()=>[F(r(l(e)("cancel")),1)]),_:1}),o(k,{type:"primary",loading:f.value,onClick:n[4]||(n[4]=d=>oe(O.value))},{default:t(()=>[F(r(l(e)("confirm")),1)]),_:1},8,["loading"])])]),default:t(()=>[o(B,{model:p,"label-width":"90px",ref_key:"refuseFormRef",ref:O,rules:l(ee),class:"page-form"},{default:t(()=>[o(u,{label:l(e)("refuseReason"),prop:"shop_reason"},{default:t(()=>[o(U,{modelValue:p.shop_reason,"onUpdate:modelValue":n[2]||(n[2]=d=>p.shop_reason=d),type:"textarea",rows:"4",clearable:"",class:"input-width",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),o(q,{modelValue:E.value,"onUpdate:modelValue":n[10]||(n[10]=d=>E.value=d),title:l(e)("orderRefundAgree"),width:"460px",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:t(()=>[a("span",Ol,[o(k,{onClick:n[8]||(n[8]=d=>E.value=!1)},{default:t(()=>[F(r(l(e)("cancel")),1)]),_:1}),o(k,{type:"primary",loading:f.value,onClick:n[9]||(n[9]=d=>te(j.value))},{default:t(()=>[F(r(l(e)("confirm")),1)]),_:1},8,["loading"])])]),default:t(()=>[G((i(),x(B,{model:p,"label-width":"120px",ref_key:"formRef",ref:j,rules:l(Z),class:"page-form"},{default:t(()=>[o(u,{label:l(e)("applyMoney")},{default:t(()=>[a("span",null,"￥"+r(p.apply_money),1)]),_:1},8,["label"]),o(u,{label:l(e)("agreeMoney"),prop:"money"},{default:t(()=>[o(U,{modelValue:p.money,"onUpdate:modelValue":n[6]||(n[6]=d=>p.money=d),clearable:"",class:"input-width"},null,8,["modelValue"])]),_:1},8,["label"]),p.refund_type==2?(i(),x(u,{key:0,label:l(e)("refundDeliveryAddress"),prop:"refund_address_id"},{default:t(()=>[o(ve,{modelValue:p.refund_address_id,"onUpdate:modelValue":n[7]||(n[7]=d=>p.refund_address_id=d),clearable:"",class:"input-item"},{default:t(()=>[(i(!0),m($,null,M(z.value,(d,R)=>(i(),x(me,{key:R,label:d.full_address,value:d.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])):c("",!0)]),_:1},8,["model","rules"])),[[X,b.value]])]),_:1},8,["modelValue","title"]),o(q,{modelValue:w.value,"onUpdate:modelValue":n[14]||(n[14]=d=>w.value=d),title:l(e)("orderRefundRefuse"),width:"460px",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:t(()=>[a("span",zl,[o(k,{onClick:n[12]||(n[12]=d=>w.value=!1)},{default:t(()=>[F(r(l(e)("cancel")),1)]),_:1}),o(k,{type:"primary",loading:f.value,onClick:n[13]||(n[13]=d=>de(J.value))},{default:t(()=>[F(r(l(e)("confirm")),1)]),_:1},8,["loading"])])]),default:t(()=>[o(B,{model:C,"label-width":"90px",ref_key:"deliveryRefuseFormRef",ref:J,rules:l(ne),class:"page-form"},{default:t(()=>[o(u,{label:l(e)("refuseReason"),prop:"shop_reason"},{default:t(()=>[o(U,{modelValue:C.shop_reason,"onUpdate:modelValue":n[11]||(n[11]=d=>C.shop_reason=d),type:"textarea",rows:"4",clearable:"",class:"input-width",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});const ya=Le(Jl,[["__scopeId","data-v-8a68c215"]]);export{ya as default};
