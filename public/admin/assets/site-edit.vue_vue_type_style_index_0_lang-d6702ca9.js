import{O as P,d as K,r as _,n as Q,l as X,q as l,Q as V,h as o,s as g,w as u,a as Y,e as r,br as B,i as f,t as v,u as s,R as z,c as w,F as S,T as L,K as A,L as H,au as J,av as W,M as Z,E as ee,X as te,Y as ae}from"./index-99f00cf3.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                       *//* empty css                 */import"./el-form-item-4ed993c7.js";/* empty css                 */import{u as D}from"./dict-1df0bad2.js";function De(i){return P.get("phone_shop/site",{params:i})}function le(i){return P.get(`phone_shop/site/${i}`)}function se(i){return P.post("phone_shop/site",i,{showErrorMessage:!0,showSuccessMessage:!0})}function ue(i){return P.put(`phone_shop/site/${i.id}`,i,{showErrorMessage:!0,showSuccessMessage:!0})}function Pe(i){return P.delete(`phone_shop/site/${i}`,{showErrorMessage:!0,showSuccessMessage:!0})}const re={class:"dialog-footer"},Ee=K({__name:"site-edit",emits:["complete"],setup(i,{expose:I,emit:C}){let c=_(!1);const m=_(!1),R={id:"",site_id:"",site_name:"",client:"",category_status:"",brand_status:"",label_group_status:"",label_status:"",service_status:"",price_statusList:""},t=Q({...R}),x=_(),G=X(()=>({site_name:[{required:!0,message:l("siteNamePlaceholder"),trigger:"blur"}],client:[{required:!0,message:l("clientPlaceholder"),trigger:"blur"}],category_status:[{required:!0,message:l("categoryStatusPlaceholder"),trigger:"blur"}],brand_status:[{required:!0,message:l("brandStatusPlaceholder"),trigger:"blur"}],label_group_status:[{required:!0,message:l("labelGroupStatusPlaceholder"),trigger:"blur"}],label_status:[{required:!0,message:l("labelStatusPlaceholder"),trigger:"blur"}],service_status:[{required:!0,message:l("serviceStatusPlaceholder"),trigger:"blur"}],price_status:[{required:!0,message:l("serviceStatusPlaceholder"),trigger:"blur"}]})),$=async h=>{if(m.value||!h)return;let a=t.id?ue:se;await h.validate(async p=>{p&&(m.value=!0,a(t).then(b=>{m.value=!1,c.value=!1,C("complete")}).catch(b=>{m.value=!1}))})};let E=_([]);(async()=>{E.value=await(await D("status")).data.dictionary})(),V(()=>E.value,()=>{t.category_status=E.value[0].value});let k=_([]);(async()=>{k.value=await(await D("status")).data.dictionary})(),V(()=>k.value,()=>{t.brand_status=k.value[0].value});let q=_([]);(async()=>{q.value=await(await D("status")).data.dictionary})(),V(()=>q.value,()=>{t.label_group_status=q.value[0].value});let U=_([]);(async()=>{U.value=await(await D("status")).data.dictionary})(),V(()=>U.value,()=>{t.label_status=U.value[0].value});let F=_([]);(async()=>{F.value=await(await D("status")).data.dictionary})(),V(()=>F.value,()=>{t.service_status=F.value[0].value});let M=_([]);return(async()=>{M.value=await(await D("status")).data.dictionary})(),V(()=>M.value,()=>{t.price_status=M.value[0].value}),I({showDialog:c,setFormData:async(h=null)=>{if(Object.assign(t,R),m.value=!0,h){const a=await(await le(h.id)).data;a&&Object.keys(t).forEach(p=>{a[p]!=null&&(t[p]=a[p])})}m.value=!1}}),(h,a)=>{const p=A,n=H,b=J,y=W,O=Z,N=ee,j=te,T=ae;return o(),g(j,{modelValue:s(c),"onUpdate:modelValue":a[11]||(a[11]=e=>B(c)?c.value=e:c=e),title:t.id?s(l)("updateSite"):s(l)("addSite"),width:"50%",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:u(()=>[Y("span",re,[r(N,{onClick:a[9]||(a[9]=e=>B(c)?c.value=!1:c=!1)},{default:u(()=>[f(v(s(l)("cancel")),1)]),_:1}),r(N,{type:"primary",loading:m.value,onClick:a[10]||(a[10]=e=>$(x.value))},{default:u(()=>[f(v(s(l)("confirm")),1)]),_:1},8,["loading"])])]),default:u(()=>[z((o(),g(O,{model:t,"label-width":"120px",ref_key:"formRef",ref:x,rules:s(G),class:"page-form"},{default:u(()=>[r(n,{label:s(l)("siteId"),prop:"site_id"},{default:u(()=>[r(p,{modelValue:t.site_id,"onUpdate:modelValue":a[0]||(a[0]=e=>t.site_id=e),clearable:"",placeholder:s(l)("siteIdPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:s(l)("siteName"),prop:"site_name"},{default:u(()=>[r(p,{modelValue:t.site_name,"onUpdate:modelValue":a[1]||(a[1]=e=>t.site_name=e),clearable:"",placeholder:s(l)("siteNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:s(l)("client"),prop:"client"},{default:u(()=>[r(p,{modelValue:t.client,"onUpdate:modelValue":a[2]||(a[2]=e=>t.client=e),clearable:"",placeholder:s(l)("clientPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:s(l)("categoryStatus"),prop:"category_status"},{default:u(()=>[r(y,{modelValue:t.category_status,"onUpdate:modelValue":a[3]||(a[3]=e=>t.category_status=e),placeholder:s(l)("categoryStatusPlaceholder")},{default:u(()=>[(o(!0),w(S,null,L(s(E),(e,d)=>(o(),g(b,{key:d,label:e.value},{default:u(()=>[f(v(e.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:s(l)("brandStatus"),prop:"brand_status"},{default:u(()=>[r(y,{modelValue:t.brand_status,"onUpdate:modelValue":a[4]||(a[4]=e=>t.brand_status=e),placeholder:s(l)("brandStatusPlaceholder")},{default:u(()=>[(o(!0),w(S,null,L(s(k),(e,d)=>(o(),g(b,{key:d,label:e.value},{default:u(()=>[f(v(e.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:s(l)("labelGroupStatus"),prop:"label_group_status"},{default:u(()=>[r(y,{modelValue:t.label_group_status,"onUpdate:modelValue":a[5]||(a[5]=e=>t.label_group_status=e),placeholder:s(l)("labelGroupStatusPlaceholder")},{default:u(()=>[(o(!0),w(S,null,L(s(q),(e,d)=>(o(),g(b,{key:d,label:e.value},{default:u(()=>[f(v(e.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:s(l)("labelStatus"),prop:"label_status"},{default:u(()=>[r(y,{modelValue:t.label_status,"onUpdate:modelValue":a[6]||(a[6]=e=>t.label_status=e),placeholder:s(l)("labelStatusPlaceholder")},{default:u(()=>[(o(!0),w(S,null,L(s(U),(e,d)=>(o(),g(b,{key:d,label:e.value},{default:u(()=>[f(v(e.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:s(l)("serviceStatus"),prop:"service_status"},{default:u(()=>[r(y,{modelValue:t.service_status,"onUpdate:modelValue":a[7]||(a[7]=e=>t.service_status=e),placeholder:s(l)("serviceStatusPlaceholder")},{default:u(()=>[(o(!0),w(S,null,L(s(F),(e,d)=>(o(),g(b,{key:d,label:e.value},{default:u(()=>[f(v(e.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:s(l)("priceStatus"),prop:"price_status"},{default:u(()=>[r(y,{modelValue:t.price_status,"onUpdate:modelValue":a[8]||(a[8]=e=>t.price_status=e),placeholder:s(l)("priceStatusPlaceholder")},{default:u(()=>[(o(!0),w(S,null,L(s(M),(e,d)=>(o(),g(b,{key:d,label:e.value},{default:u(()=>[f(v(e.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[T,m.value]])]),_:1},8,["modelValue","title"])}}});export{Ee as _,Pe as d,De as g};
