import{d as W,x as J,f as X,r as x,n as Z,a2 as ee,h as p,c as m,e,w as n,a as d,t as s,u as a,q as t,F as w,T as V,s as U,i as v,R as ae,B as P,A as te,ac as le,aD as oe,K as se,L as re,bO as ne,E as de,M as ie,a7 as pe,ay as me,az as ce,ad as _e,ae as ue,a1 as be,aa as he,W as fe,Y as ye}from"./index-99f00cf3.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css                    *//* empty css                        *//* empty css                    *//* empty css                *//* empty css                *//* empty css                  *//* empty css                       */import"./el-form-item-4ed993c7.js";import{_ as ge}from"./goods_default-995568ac.js";import{g as xe,a as ve,b as ke,c as we}from"./order-b4e82541.js";import{_ as Ve}from"./_plugin-vue_export-helper-c27b6911.js";const Pe={class:"main-container"},Fe={class:"flex justify-between items-center"},Te={class:"text-page-title"},De={class:"table-body min-h-[150px]"},Ee={key:0},Ce={class:"flex items-center justify-between bg-[#f7f8fa] mt-[10px] border-[#e4e7ed] border-solid border-b-[1px] px-3 h-[35px] text-[12px] text-[#666]"},Ne={class:"ml-5"},Me={key:0,class:"ml-5"},Ue={class:"flex cursor-pointer"},Ye={class:"flex items-center min-w-[50px] mr-[10px]"},ze=["src"],Se={key:1,class:"w-[50px] h-[50px]",src:ge,alt:""},Be={class:"flex flex-col"},Oe={class:"multi-hidden text-[14px]"},Le={class:"text-[12px] text-[#999]"},Re={style:{display:"inline-flex","align-items":"center"}},je={class:"mr-[5px]"},He={class:"flex flex-col"},Ie={class:"text-[13px]"},$e={key:0,class:"text-[13px] mt-[5px]"},qe={key:0},Qe={class:"text-[#999]"},Ae={key:1},Ge={key:1,class:"text-[13px] mt-[5px]"},Ke={class:"text-[14px]"},We={class:"text-[14px]"},Je={class:"mt-[16px] flex justify-end"},Xe=W({__name:"order_list",setup(Ze){const Y=J(),z=X(),S=Y.meta.title,F=x(""),B=x([]),T=x([]),D=x([]);(async()=>{B.value=await(await xe()).data,T.value=await(await ve()).data,D.value=await(await ke()).data})();const l=Z({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{search_type:"order_no",search_name:"",pay_type:"",order_from:"",status:"",create_time:[],pay_time:[],activity_type:"newcomer_discount"}}),E=x(),h=(c=1)=>{l.loading=!0,l.page=c,we({page:l.page,limit:l.limit,...l.searchParam}).then(r=>{l.loading=!1,l.data=r.data.data.map(_=>(_.order_goods.forEach(b=>{b.rowNum=_.order_goods.length}),_)),l.total=r.data.total}).catch(()=>{l.loading=!1})};h();const O=({row:c,column:r,rowIndex:_,columnIndex:b})=>_===0?b>1?[c.rowNum,1]:[1,1]:b>1?[0,0]:[1,1],L=c=>{l.searchParam.status=c,h()},R=c=>{const r=z.resolve({path:"/shop/order/detail",query:{order_id:c.order_id}});window.open(r.href)},j=c=>{c&&(c.resetFields(),h())};return(c,r)=>{const _=le,b=oe,H=se,f=re,C=ne,k=de,I=ie,N=pe,g=me,$=ce,u=_e,M=ue,q=ee("QuestionFilled"),Q=be,A=he,G=fe,K=ye;return p(),m("div",Pe,[e(N,{class:"box-card !border-none",shadow:"never"},{default:n(()=>[d("div",Fe,[d("span",Te,s(a(S)),1)]),e(N,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:n(()=>[e(I,{inline:!0,model:l.searchParam,ref_key:"searchFormRef",ref:E},{default:n(()=>[e(f,{label:a(t)("orderInfo"),prop:"search_name"},{default:n(()=>[e(b,{modelValue:l.searchParam.search_type,"onUpdate:modelValue":r[0]||(r[0]=o=>l.searchParam.search_type=o),clearable:"",class:"input-item"},{default:n(()=>[e(_,{label:a(t)("orderNo"),value:"order_no"},null,8,["label"]),e(_,{label:a(t)("outTradeNo"),value:"out_trade_no"},null,8,["label"])]),_:1},8,["modelValue"]),e(H,{class:"input-item ml-3",modelValue:l.searchParam.search_name,"onUpdate:modelValue":r[1]||(r[1]=o=>l.searchParam.search_name=o),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),e(f,{label:a(t)("payType"),prop:"pay_type"},{default:n(()=>[e(b,{modelValue:l.searchParam.pay_type,"onUpdate:modelValue":r[2]||(r[2]=o=>l.searchParam.pay_type=o),clearable:"",class:"input-item"},{default:n(()=>[(p(!0),m(w,null,V(T.value,(o,y)=>(p(),U(_,{key:y,label:o.name,value:o.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(f,{label:a(t)("fromType"),prop:"order_from"},{default:n(()=>[e(b,{modelValue:l.searchParam.order_from,"onUpdate:modelValue":r[3]||(r[3]=o=>l.searchParam.order_from=o),clearable:"",class:"input-item"},{default:n(()=>[(p(!0),m(w,null,V(D.value,(o,y)=>(p(),U(_,{key:y,label:o,value:y},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(f,{label:a(t)("createTime"),prop:"create_time"},{default:n(()=>[e(C,{modelValue:l.searchParam.create_time,"onUpdate:modelValue":r[4]||(r[4]=o=>l.searchParam.create_time=o),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":a(t)("startDate"),"end-placeholder":a(t)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),e(f,{label:a(t)("payTime"),prop:"pay_time"},{default:n(()=>[e(C,{modelValue:l.searchParam.pay_time,"onUpdate:modelValue":r[5]||(r[5]=o=>l.searchParam.pay_time=o),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":a(t)("startDate"),"end-placeholder":a(t)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),e(f,null,{default:n(()=>[e(k,{type:"primary",onClick:r[6]||(r[6]=o=>h())},{default:n(()=>[v(s(a(t)("search")),1)]),_:1}),e(k,{onClick:r[7]||(r[7]=o=>j(E.value))},{default:n(()=>[v(s(a(t)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e($,{modelValue:F.value,"onUpdate:modelValue":r[8]||(r[8]=o=>F.value=o),class:"demo-tabs",onTabChange:L},{default:n(()=>[e(g,{label:a(t)("all"),name:""},null,8,["label"]),e(g,{label:a(t)("toBeShipped"),name:"2"},null,8,["label"]),e(g,{label:a(t)("shipped"),name:"3"},null,8,["label"]),e(g,{label:a(t)("completed"),name:"5"},null,8,["label"]),e(g,{label:a(t)("closed"),name:"-1"},null,8,["label"])]),_:1},8,["modelValue"]),d("div",null,[e(M,{data:l.data,size:"large",class:"table-top"},{default:n(()=>[e(u,{label:a(t)("orderGoods"),"min-width":"200"},null,8,["label"]),e(u,{label:a(t)("goodsPriceNumber"),"min-width":"150"},null,8,["label"]),e(u,{label:a(t)("orderMoney"),"min-width":"150"},null,8,["label"]),e(u,{label:a(t)("orderStatus"),"min-width":"100"},null,8,["label"]),e(u,{label:a(t)("operation"),fixed:"right",align:"right","min-width":"100"},null,8,["label"])]),_:1},8,["data"])]),ae((p(),m("div",De,[l.loading?P("",!0):(p(),m("div",Ee,[l.data.length?(p(!0),m(w,{key:0},V(l.data,(o,y)=>(p(),m("div",{key:y},[d("div",Ce,[d("div",null,[d("span",null,s(a(t)("orderNo"))+"："+s(o.order_no),1),d("span",Ne,s(a(t)("createTime"))+"："+s(o.create_time),1),o.pay?(p(),m("span",Me,s(a(t)("payType"))+"："+s(o.pay.type_name),1)):P("",!0)])]),e(M,{data:o.order_goods,size:"large","show-header":!1,"span-method":O},{empty:n(()=>[d("span",null,s(l.loading?"":a(t)("emptyData")),1)]),default:n(()=>[e(u,{"min-width":"200"},{default:n(({row:i})=>[d("div",Ue,[d("div",Ye,[i.goods_image_thumb_small?(p(),m("img",{key:0,class:"w-[50px] h-[50px]",src:a(te)(i.goods_image_thumb_small),alt:""},null,8,ze)):(p(),m("img",Se))]),d("div",Be,[d("p",Oe,s(i.goods_name),1),d("span",Le,s(i.sku_name),1)])])]),_:1}),e(u,{"min-width":"150"},{header:n(()=>[d("div",Re,[d("span",je,s(a(t)("goodsPriceNumber")),1),e(A,{class:"box-item",effect:"light",placement:"top"},{content:n(()=>[v(s(a(t)("goodsPriceNumberTips")),1)]),default:n(()=>[e(Q,{color:"#666"},{default:n(()=>[e(q)]),_:1})]),_:1})])]),default:n(({row:i})=>[d("div",He,[d("span",Ie,"￥"+s(i.price),1),i.extend&&i.extend.newcomer_price?(p(),m("span",$e,[parseFloat(i.extend.newcomer_price)&&i.num>1?(p(),m("span",qe,[v(s(i.num)+s(a(t)("piece")),1),d("span",Qe,"（第1"+s(a(t)("piece"))+"，￥"+s(parseFloat(i.extend.newcomer_price).toFixed(2))+"/"+s(a(t)("piece"))+"；第"+s(i.num>2?"2~"+i.num:"2")+s(a(t)("piece"))+"，￥"+s(parseFloat(i.price).toFixed(2))+"/"+s(a(t)("piece"))+"）",1)])):(p(),m("span",Ae,s(i.num)+s(a(t)("piece")),1))])):(p(),m("span",Ge,s(i.num)+s(a(t)("piece")),1))])]),_:1}),e(u,{label:a(t)("orderMoney"),"min-width":"150","class-name":"border-0 border-l-[1px] border-solid border-[var(--el-table-border-color)]"},{default:n(({row:i})=>[d("span",Ke,"￥"+s(o.order_money),1)]),_:2},1032,["label"]),e(u,{label:a(t)("orderStatus"),"min-width":"100"},{default:n(({row:i})=>[d("span",We,s(o.status_name.name),1)]),_:2},1032,["label"]),e(u,{label:a(t)("operation"),fixed:"right",align:"right","min-width":"100"},{default:n(({row:i})=>[e(k,{type:"primary",link:"",onClick:aa=>R(o)},{default:n(()=>[v(s(a(t)("info")),1)]),_:2},1032,["onClick"])]),_:2},1032,["label"])]),_:2},1032,["data"])]))),128)):P("",!0)]))])),[[K,l.loading]]),d("div",Je,[e(G,{"current-page":l.page,"onUpdate:current-page":r[9]||(r[9]=o=>l.page=o),"page-size":l.limit,"onUpdate:page-size":r[10]||(r[10]=o=>l.limit=o),layout:"total, sizes, prev, pager, next, jumper",total:l.total,onSizeChange:r[11]||(r[11]=o=>h()),onCurrentChange:h},null,8,["current-page","page-size","total"])])]),_:1})])}}});const Va=Ve(Xe,[["__scopeId","data-v-7a60c0aa"]]);export{Va as default};
