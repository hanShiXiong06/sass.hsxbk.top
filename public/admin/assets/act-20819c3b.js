import{O as te,d as ae,x as le,r as v,n as oe,aO as se,a2 as ie,h as d,c as w,e,w as l,a as i,u as s,E as C,i as p,q as _,t as c,R as O,s as f,B as m,A as ne,U as W,aW as de,a7 as pe,K as re,L as ce,ab as me,aC as ue,M as _e,ac as ve,ak as fe,cy as ge,ad as he,W as ye,a1 as be,X as we,Y as ke,p as Ce,g as xe}from"./index-a3bdc7eb.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                        *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                *//* empty css                 */import{_ as Ee,s as Ve,g as $e,a as De,b as Ie}from"./act-edit.vue_vue_type_style_index_0_lang-800cb63b.js";import{_ as Ae}from"./_plugin-vue_export-helper-c27b6911.js";import"./index.vue_vue_type_script_setup_true_lang-4c5f2230.js";import"./index.vue_vue_type_style_index_0_lang-56f89855.js";/* empty css                  */import"./attachment-00d8a467.js";import"./index.vue_vue_type_script_setup_true_lang-58bfacba.js";/* empty css                        *//* empty css                 *//* empty css               *//* empty css               *//* empty css                    *//* empty css                    */import"./el-dropdown-item-4ed993c7.js";import"./index.vue_vue_type_script_setup_true_lang-d51e8a6d.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-d42256f5.js";import"./index-a76a08b7.js";import"./sortable.esm-be94e56d.js";function Pe(){return te.get("tk_cps/getwapdomain")}const u=V=>(Ce("data-v-2c3121bc"),V=V(),xe(),V),Fe={class:"main-container"},Se={class:"flex mt-4 ml-4"},Ue={class:"mt-[10px]"},Ne={class:"mt-[16px] flex justify-end"},ze={key:0,class:"mb-2"},Be={class:"font-bold"},Te={class:"mt-2"},Le=u(()=>i("span",{class:"font-bold"},"支持渠道",-1)),Re={key:1,class:"flex mt-2"},Oe=u(()=>i("div",{class:"font-bold mr-4"},"页面链接",-1)),We={key:2,class:"flex mt-2"},je=u(()=>i("div",{class:"font-bold mr-4"},"网页链接",-1)),qe={key:3,class:"flex mt-2"},Me=u(()=>i("div",{class:"font-bold mr-2"},"h5链接",-1)),Ke={class:"multi-hidden w-[340px]"},Xe={class:"flex mt-2"},Ye={key:0,class:"mr-2 p-4 rounded-md statistic-card bg-gradient-to-r from-indigo-50 from-10% via-sky-50 via-10% to-emerald-50 to-10%"},Ge=u(()=>i("div",{class:"font-bold"},"微信小程序信息",-1)),He={key:0,class:"mt-2"},Je=u(()=>i("div",{class:"font-bold"},"原始id:",-1)),Qe={class:"mt-2"},Ze=u(()=>i("div",{class:"font-bold"},"appid:",-1)),et={class:"mt-2"},tt=u(()=>i("div",{class:"font-bold"},"页面路径:",-1)),at={class:"whitespace-normal w-[360px] break-words"},lt={key:1,class:"p-4 rounded-md statistic-card bg-gradient-to-r from-indigo-50 from-10% via-sky-50 via-10% to-emerald-50 to-10%"},ot=u(()=>i("div",{class:"font-bold"},"支付宝小程序",-1)),st={class:"mt-2"},it=u(()=>i("div",{class:"font-bold"},"appid:",-1)),nt={class:"mt-2"},dt=u(()=>i("div",{class:"font-bold"},"页面路径:",-1)),pt={class:"whitespace-normal w-[360px] break-words"},rt=u(()=>i("span",null,"正在保存,保存成功会自动关闭本弹窗",-1)),ct=ae({__name:"act",setup(V){le().meta.title;const $=v(!1),N=v(!1),x=v(!1);let n=oe({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{act_id:"",act_name:"",type:"",desc:"",img:"",icon:"",poster:"",commission_rate:"",introduce:"",attribution_explain:"",settlement_time:"",start_date:"",end_date:"",create_time:""}});const{copy:j,isSupported:q,copied:ut}=se(),g=r=>{if(!q.value){W({message:"当前浏览器不支持一键复制，请手动复制",type:"warning"});return}j(r),W({message:"复制成功",type:"success"})},a=v(),D=v(),I=v(),z=v(),M=async r=>{x.value=!0,(await Ve(r)).code==1&&(x.value=!1)},K=async r=>{n.loading=!0;const t=await $e(r),P=await Pe();n.loading=!1,$.value=!0,N.value=!0,a.value=t.data,I.value=P.data+"/addon/tk_cps/pages/index?type="+a.value.type+"&act_id="+a.value.act_id,D.value="/addon/tk_cps/pages/index?type="+a.value.type+"&act_id="+a.value.act_id+"&style=embedded"};v([]);const k=(r=1)=>{n.loading=!0,n.page=r,De({page:n.page,limit:n.limit,...n.searchParam}).then(t=>{n.loading=!1,n.data=t.data.data,n.total=t.data.total}).catch(()=>{n.loading=!1})};k();const A=v(null),X=async()=>{n.loading=!0,await Ie(),k(),n.loading=!1},Y=r=>{A.value.setFormData(r),A.value.showDialog=!0},G=r=>{r&&(r.resetFields(),k())};return(r,t)=>{const P=de,F=pe,H=re,S=ce,U=me,J=ue,Q=_e,h=ve,E=fe,B=ge,Z=he,ee=ye,y=ie("DocumentCopy"),b=be,T=we,L=ke;return d(),w("div",Fe,[e(F,{class:"box-card !border-none",shadow:"never"},{default:l(()=>[e(F,{class:"!border-none",shadow:"never",style:{width:"640px"}},{default:l(()=>[e(P,{type:"warning",title:"使用前请同步活动，部分活动下线了将不能正常生成推广链接；点击立即推广可以生成并获取到最新的推广信息；保存素材可以将素材保存到素材库，方便装修时候直接使用",closable:!1,"show-icon":""}),i("div",Se,[e(s(C),{type:"primary",plain:"",onClick:t[0]||(t[0]=o=>X())},{default:l(()=>[p("同步活动")]),_:1})])]),_:1}),e(F,{class:"box-card !border-none -translate-y-[-6] table-search-wrap",shadow:"never"},{default:l(()=>[e(Q,{inline:!0,model:s(n).searchParam,ref_key:"searchFormRef",ref:z},{default:l(()=>[e(S,{label:s(_)("actName"),prop:"act_name"},{default:l(()=>[e(H,{modelValue:s(n).searchParam.act_name,"onUpdate:modelValue":t[1]||(t[1]=o=>s(n).searchParam.act_name=o),placeholder:s(_)("actNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(S,{label:s(_)("type"),prop:"type"},{default:l(()=>[e(J,{class:"w-[280px]",modelValue:s(n).searchParam.type,"onUpdate:modelValue":t[2]||(t[2]=o=>s(n).searchParam.type=o),clearable:"",placeholder:"请选择"},{default:l(()=>[e(U,{label:"全部",value:""}),e(U,{label:"聚推客",value:"0"}),e(U,{label:"蚂蚁星球",value:"1"})]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(S,null,{default:l(()=>[e(s(C),{type:"primary",onClick:t[3]||(t[3]=o=>k())},{default:l(()=>[p(c(s(_)("search")),1)]),_:1}),e(s(C),{onClick:t[4]||(t[4]=o=>G(z.value))},{default:l(()=>[p(c(s(_)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),i("div",Ue,[O((d(),f(Z,{data:s(n).data,size:"large"},{empty:l(()=>[i("span",null,c(s(n).loading?"":s(_)("emptyData")),1)]),default:l(()=>[e(h,{prop:"act_name",label:s(_)("actName"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),e(h,{prop:"type",label:"渠道","min-width":"120","show-overflow-tooltip":!0},{default:l(({row:o})=>[o.type==0?(d(),f(E,{key:0},{default:l(()=>[p(" 聚推客 ")]),_:1})):m("",!0),o.type==1?(d(),f(E,{key:1},{default:l(()=>[p(" 蚂蚁星球 ")]),_:1})):m("",!0)]),_:1}),e(h,{label:s(_)("icon"),width:"100",align:"left"},{default:l(({row:o})=>[o.icon?(d(),f(B,{key:0,src:s(ne)(o.icon)},null,8,["src"])):(d(),f(B,{key:1,icon:"UserFilled"}))]),_:1},8,["label"]),e(h,{prop:"commission_rate",label:s(_)("commissionRate"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),e(h,{prop:"settlement_time",label:s(_)("settlementTime"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),e(h,{prop:"start_date",label:"开始时间","min-width":"120","show-overflow-tooltip":!0}),e(h,{prop:"end_date",label:"结束时间","min-width":"120","show-overflow-tooltip":!0}),e(h,{label:s(_)("operation"),fixed:"right","min-width":"120"},{default:l(({row:o})=>[e(s(C),{type:"primary",link:"",onClick:R=>Y(o)},{default:l(()=>[p("详情")]),_:2},1032,["onClick"]),e(s(C),{type:"primary",link:"",onClick:R=>K(o.id)},{default:l(()=>[p("立即推广")]),_:2},1032,["onClick"]),e(s(C),{type:"primary",link:"",loading:x.value,onClick:R=>M(o.id)},{default:l(()=>[p("保存素材")]),_:2},1032,["loading","onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[L,s(n).loading]]),i("div",Ne,[e(ee,{"current-page":s(n).page,"onUpdate:current-page":t[5]||(t[5]=o=>s(n).page=o),"page-size":s(n).limit,"onUpdate:page-size":t[6]||(t[6]=o=>s(n).limit=o),layout:"total, sizes, prev, pager, next, jumper",total:s(n).total,onSizeChange:t[7]||(t[7]=o=>k()),onCurrentChange:k},null,8,["current-page","page-size","total"])])]),e(Ee,{ref_key:"editActDialog",ref:A,onComplete:k},null,512)]),_:1}),O((d(),f(T,{"element-loading-text":"Loading...",modelValue:$.value,"onUpdate:modelValue":t[16]||(t[16]=o=>$.value=o),title:"推广详情",width:"60%","before-close":r.handleClose},{default:l(()=>[a.value?(d(),w("div",ze,[i("span",Be,"活动名称:"+c(a.value.act_name),1)])):m("",!0),i("div",Te,[Le,a.value&&a.value.h5!=""?(d(),f(E,{key:0,class:"ml-2"},{default:l(()=>[p("h5")]),_:1})):m("",!0),a.value&&a.value.weapp.appid!=""?(d(),f(E,{key:1,class:"ml-2"},{default:l(()=>[p("微信小程序")]),_:1})):m("",!0),a.value&&a.value.aliapp.appid!=""?(d(),f(E,{key:2,class:"ml-2"},{default:l(()=>[p("支付宝小程序")]),_:1})):m("",!0)]),a.value&&a.value.h5!=""||a.value.weapp.appid!=""||a.value.aliapp.appid!=""?(d(),w("div",Re,[Oe,i("div",null,c(D.value),1),e(b,{class:"ml-2",onClick:t[8]||(t[8]=o=>g(D.value))},{default:l(()=>[e(y)]),_:1})])):m("",!0),a.value&&a.value.h5!=""?(d(),w("div",We,[je,i("div",null,c(I.value),1),e(b,{class:"ml-2",onClick:t[9]||(t[9]=o=>g(I.value))},{default:l(()=>[e(y)]),_:1})])):m("",!0),a.value&&a.value.h5!=""?(d(),w("div",qe,[Me,i("div",Ke,c(a.value.h5),1),e(b,{class:"ml-2",onClick:t[10]||(t[10]=o=>g(a.value.h5))},{default:l(()=>[e(y)]),_:1})])):m("",!0),i("div",Xe,[a.value&&a.value.weapp.appid!=""?(d(),w("div",Ye,[Ge,a.value.weapp.original_id?(d(),w("div",He,[Je,i("div",null,[p(c(a.value.weapp.original_id)+" ",1),e(b,{class:"ml-2",onClick:t[11]||(t[11]=o=>g(a.value.weapp.original_id))},{default:l(()=>[e(y)]),_:1})])])):m("",!0),i("div",Qe,[Ze,i("div",null,[p(c(a.value.weapp.appid)+" ",1),e(b,{class:"ml-2",onClick:t[12]||(t[12]=o=>g(a.value.weapp.appid))},{default:l(()=>[e(y)]),_:1})])]),i("div",et,[tt,i("div",at,[p(c(a.value.weapp.pagepath)+" ",1),e(b,{class:"ml-2",onClick:t[13]||(t[13]=o=>g(a.value.weapp.pagepath))},{default:l(()=>[e(y)]),_:1})])])])):m("",!0),a.value&&a.value.aliapp.appid!=""?(d(),w("div",lt,[ot,i("div",st,[it,i("div",null,[p(c(a.value.aliapp.appid)+" ",1),e(b,{class:"ml-2",onClick:t[14]||(t[14]=o=>g(a.value.aliapp.appid))},{default:l(()=>[e(y)]),_:1})])]),i("div",nt,[dt,i("div",pt,[p(c(a.value.aliapp.pagepath)+" ",1),e(b,{class:"ml-2",onClick:t[15]||(t[15]=o=>g(a.value.aliapp.pagepath))},{default:l(()=>[e(y)]),_:1})])])])):m("",!0)])]),_:1},8,["modelValue","before-close"])),[[L,N.value]]),e(T,{modelValue:x.value,"onUpdate:modelValue":t[17]||(t[17]=o=>x.value=o),title:"正在保存",width:"500","show-close":"false","align-center":""},{default:l(()=>[rt]),_:1},8,["modelValue"])])}}});const Zt=Ae(ct,[["__scopeId","data-v-2c3121bc"]]);export{Zt as default};
