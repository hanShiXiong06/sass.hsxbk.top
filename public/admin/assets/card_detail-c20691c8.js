import{d as K,x as Q,f as U,r as T,h as d,c,e as s,w as a,u as l,R,s as u,F as E,a as t,t as o,q as i,B as r,A as S,v as Y,T as G,i as I,aQ as J,a7 as W,L as X,aM as Z,aN as ee,bP as te,ac as ae,ad as le,E as se,aa as oe,M as ie,Y as de,p as ne,g as re}from"./index-6f32d09b.js";/* empty css                   *//* empty css                *//* empty css                 *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                        *//* empty css               *//* empty css                     *//* empty css               *//* empty css               */import"./el-form-item-4ed993c7.js";/* empty css                *//* empty css                   *//* empty css                       */import{g as ce}from"./card-03c636ad.js";import{_ as _e}from"./_plugin-vue_export-helper-c27b6911.js";const ue=y=>(ne("data-v-965d4374"),y=y(),re(),y),pe={class:"main-container"},he={class:"panel-title"},me={class:"input-width"},ve={class:"input-width"},ge={class:"input-width"},fe={class:"input-width"},xe={class:"input-width"},be={class:"input-width"},ye={class:"input-width"},we={key:0,class:"input-width"},ke={key:1,class:"input-width"},Ee={class:"input-width"},Ne={class:"input-width"},Ce={class:"input-width"},Be={class:"panel-title"},Te={class:"text-[14px]"},Fe={class:"text-[14px]"},De={class:"text-[14px]"},Le={class:"panel-title"},Re={key:0,class:"text-[14px]"},Se={key:1,class:"text-[14px]"},Ge={key:1,class:"text-[14px]"},Ie={class:"panel-title"},Me={class:"flex"},qe={class:"flex items-center shrink-0"},ze=["src"],Ve={class:"flex flex-col"},$e={class:"multi-hidden text-[14px]"},je={class:"text-[12px] text-[#999]"},Ae={class:"text-[14px]"},Oe={class:"text-[14px]"},Pe={class:"text-[14px]"},He={class:"text-[14px]"},Ke={class:"panel-title"},Qe={key:0},Ue={class:"flex"},Ye={class:"flex items-center shrink-0"},Je=["src"],We={class:"flex flex-col"},Xe={class:"multi-hidden text-[14px]"},Ze={class:"text-[12px] text-[#999]"},et={class:"text-[14px]"},tt={class:"text-[14px]"},at={class:"text-[14px]"},lt={key:0,class:"panel-title"},st={key:1,class:"mb-[50px]",style:{"min-height":"100px"}},ot={class:"mr-[20px] min-w-[71px]"},it={class:"leading-[1] w-full text-[14px] w-[100px] flex justify-end"},dt={class:"leading-[1] w-full text-[14px] w-[100px] flex justify-end mt-[15px]"},nt=ue(()=>t("div",{class:"w-[16px] h-[16px] flex items-center bg-[#D1EBFF] border-[1px] border-[#0091FF] rounded-[999px]"},[t("div",{class:"w-[8px] h-[8px] mx-auto bg-[#0091FF] rounded-[999px]"})],-1)),rt={key:0,class:"w-[2px] h-[50px] bg-[#D1EBFF] mx-auto"},ct={class:"leading-[1] ml-[20px] text-[14px]"},_t={class:"leading-[1] ml-[20px] text-[14px] mt-[15px]"},ut={class:"ml-[10px]"},pt=K({__name:"card_detail",setup(y){const F=Q(),w=U(),M=F.meta.title,q=T(F.query.card_id||0),x=T(!0),e=T(null);(()=>{ce(q.value).then(h=>{h.data&&(e.value=h.data,e.value.use_records_list=e.value.use_records_list.map(p=>(p.recordsGoods.forEach(b=>{b.rowNum=p.recordsGoods.length}),p)),x.value=!1)}).catch(()=>{x.value=!1})})();const z=({row:h,column:p,rowIndex:b,columnIndex:g})=>b===0?g>1?[h.rowNum,1]:[1,1]:g>1?[0,0]:[1,1],V=()=>{e.value&&w.push(`/shop_giftcard/giftcard/detail?giftcard_id=${e.value.giftcard_id}`)},$=h=>{const p=w.resolve({path:"/member/detail",query:{id:h}});window.open(p.href)},j=h=>{const p=w.resolve({path:"/shop/order/detail",query:{order_id:h.order_id}});window.open(p.href)},A=h=>{const p=w.resolve({path:"/member/balance",query:{id:h.member_id}});window.open(p.href)};return(h,p)=>{const b=J,g=W,m=X,f=Z,N=ee,C=te,_=ae,B=le,D=se,O=oe,P=ie,L=de;return d(),c("div",pe,[s(g,{class:"card !border-none mb-[15px]",shadow:"never"},{default:a(()=>[s(b,{content:l(M),icon:h.ArrowLeft,onBack:V},null,8,["content","icon"])]),_:1}),R((d(),u(P,{model:e.value,"label-width":"100px",ref:"formRef",class:"page-form","label-position":"left"},{default:a(()=>[e.value?(d(),c(E,{key:0},[s(g,{class:"box-card !border-none relative",shadow:"never"},{default:a(()=>[t("h3",he,o(l(i)("giftcardInfoTitle")),1),s(N,{class:"row-bg px-[30px]",gutter:20},{default:a(()=>[s(f,{span:8},{default:a(()=>[s(m,{label:l(i)("cardType")},{default:a(()=>[t("div",me,o(e.value.giftcard.type_name),1)]),_:1},8,["label"]),s(m,{label:l(i)("cardNo")},{default:a(()=>[t("div",ve,o(e.value.card_no),1)]),_:1},8,["label"]),e.value.giftcard.type=="real"?(d(),u(m,{key:0,label:l(i)("cardKey")},{default:a(()=>[t("div",ge,o(e.value.card_key),1)]),_:1},8,["label"])):r("",!0),s(m,{label:l(i)("formMember")},{default:a(()=>[t("div",{class:"input-width text-primary cursor-pointer",onClick:p[0]||(p[0]=n=>$(e.value.member.member_id))},o(e.value.member.nickname),1)]),_:1},8,["label"]),s(m,{label:l(i)("status")},{default:a(()=>[t("div",fe,o(e.value.status_name),1)]),_:1},8,["label"])]),_:1}),s(f,{span:8},{default:a(()=>[s(m,{label:l(i)("cardRightType")},{default:a(()=>[t("div",xe,o(e.value.giftcard.card_right_type_name),1)]),_:1},8,["label"]),e.value.giftcard.card_right_type=="balance"?(d(),u(m,{key:0,label:l(i)("cardBalance")},{default:a(()=>[t("div",be,"￥"+o(e.value.balance),1)]),_:1},8,["label"])):r("",!0),s(m,{label:l(i)("createTime")},{default:a(()=>[t("div",ye,o(e.value.create_time),1)]),_:1},8,["label"]),s(m,{label:l(i)("validityTime")},{default:a(()=>[e.value.validity_time?(d(),c("div",we,o(e.value.validity_time),1)):(d(),c("div",ke,o(l(i)("validityForever")),1))]),_:1},8,["label"])]),_:1}),s(f,{span:8},{default:a(()=>[e.value.giftcard.type=="real"?(d(),u(m,{key:0,label:l(i)("activateTime")},{default:a(()=>[t("div",Ee,o(e.value.activate_time),1)]),_:1},8,["label"])):r("",!0),s(m,{label:l(i)("isGive")},{default:a(()=>[t("div",Ne,o(e.value.giftcard.is_give==1?"是":"否"),1)]),_:1},8,["label"]),s(m,{label:l(i)("cardSource")},{default:a(()=>[t("div",Ce,o(e.value.source_name),1)]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),s(g,{class:"box-card !border-none relative",shadow:"never"},{default:a(()=>[t("h3",Be,o(l(i)("dataStatisticsTitle")),1),s(N,{class:"row-bg px-[30px]",gutter:20},{default:a(()=>[s(f,{span:8},{default:a(()=>[s(C,{value:e.value.total_num},{title:a(()=>[t("span",Te,o(e.value.giftcard.card_right_type=="balance"?l(i)("totalNum"):l(i)("canExchangeNum")),1)]),_:1},8,["value"])]),_:1}),s(f,{span:8},{default:a(()=>[s(C,{value:e.value.use_num},{title:a(()=>[t("span",Fe,o(e.value.giftcard.card_right_type=="balance"?l(i)("useCount"):l(i)("hasExchangeNum")),1)]),_:1},8,["value"])]),_:1}),s(f,{span:8},{default:a(()=>[s(C,{value:e.value.total_num-e.value.use_num},{title:a(()=>[t("span",De,o(e.value.giftcard.card_right_type=="balance"?l(i)("notUseCount"):l(i)("notExchangeNum")),1)]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),s(g,{class:"box-card !border-none relative",shadow:"never"},{default:a(()=>[t("h3",Le,o(l(i)("useRuleTitle")),1),s(N,{class:"row-bg px-[30px]",gutter:20},{default:a(()=>[s(f,{span:8},{default:a(()=>[e.value.giftcard.card_right_type=="goods"?(d(),c(E,{key:0},[e.value.giftcard.card_goods_type=="all"?(d(),c("p",Re,"持卡人兑换时，可从按照商品列表中商品数量进行兑换")):r("",!0),e.value.giftcard.card_goods_type=="diy"?(d(),c("p",Se,"持卡人兑换时，可从以下商品列表中任选"+o(e.value.giftcard.card_goods_count)+"件",1)):r("",!0)],64)):r("",!0),e.value.giftcard.card_right_type=="balance"?(d(),c("p",Ge,"持卡人兑换时，将储值卡的储值余额充值到账户余额中")):r("",!0)]),_:1})]),_:1})]),_:1}),e.value.giftcard.card_right_type=="goods"?(d(),u(g,{key:0,class:"box-card !border-none relative",shadow:"never"},{default:a(()=>[t("h3",Ie,o(l(i)("goodsSkuListTitle")),1),s(B,{data:e.value.cardGoods,size:"large",border:"","max-height":"400",style:{"max-width":"1000px"}},{default:a(()=>[s(_,{label:l(i)("goodsName"),align:"left",width:"350"},{default:a(({row:n})=>[t("div",Me,[t("div",qe,[t("img",{class:"w-[50px] h-[50px] mr-[10px]",src:l(S)(n.sku_image)},null,8,ze)]),t("div",Ve,[t("p",$e,o(n.goods_name),1),t("span",je,o(n.sku_name),1)])])]),_:1},8,["label"]),s(_,{label:l(i)("price"),"min-width":"120",align:"center"},{default:a(({row:n})=>[t("span",Ae,"￥"+o(n.price),1)]),_:1},8,["label"]),e.value.giftcard.card_goods_type=="all"?(d(),u(_,{key:0,label:l(i)("canExchangeNum"),"min-width":"120",align:"center"},{default:a(({row:n})=>[t("span",Oe,o(n.total_num),1)]),_:1},8,["label"])):r("",!0),s(_,{label:l(i)("hasExchangeNum"),"min-width":"120",align:"center"},{default:a(({row:n})=>[t("span",Pe,o(n.use_num),1)]),_:1},8,["label"]),e.value.giftcard.card_goods_type=="all"?(d(),u(_,{key:1,label:l(i)("notExchangeNum"),"min-width":"120",align:"center"},{default:a(({row:n})=>[t("span",He,o(n.total_num-n.use_num),1)]),_:1},8,["label"])):r("",!0)]),_:1},8,["data"])]),_:1})):r("",!0),s(g,{class:"box-card !border-none relative",shadow:"never"},{default:a(()=>[t("h3",Ke,o(l(i)("useRecordsList")),1),s(B,{size:"large",class:"table-top",border:"","max-height":"400"},{default:a(()=>[e.value.giftcard.card_right_type=="goods"?(d(),u(_,{key:0,label:l(i)("goodsName"),width:"350"},null,8,["label"])):r("",!0),e.value.giftcard.card_right_type=="balance"?(d(),u(_,{key:1,label:l(i)("cardBalance"),align:"center","min-width":"120"},null,8,["label"])):r("",!0),s(_,{label:e.value.giftcard.card_right_type=="balance"?l(i)("useNum"):l(i)("exchangeNum"),align:"center","min-width":"120"},null,8,["label"]),s(_,{label:l(i)("useTime"),align:"center","min-width":"120"},null,8,["label"]),s(_,{label:l(i)("operation"),fixed:"right",align:"center","min-width":"120"},null,8,["label"])]),_:1}),R((d(),c("div",{class:Y(e.value.use_records_list.length>0?"":"border-l-[1px] border-r-[1px] border-b-[1px] border-solid border-[var(--el-border-color-lighter)]")},[x.value?r("",!0):(d(),c("div",Qe,[e.value.use_records_list.length?(d(!0),c(E,{key:0},G(e.value.use_records_list,(n,k)=>(d(),c("div",{key:k},[s(B,{data:n.recordsGoods,size:"large",border:"","show-header":!1,"span-method":z,"max-height":"400"},{default:a(()=>[e.value.giftcard.card_right_type=="goods"?(d(),u(_,{key:0,align:"left",width:"350"},{default:a(({row:v})=>[t("div",Ue,[t("div",Ye,[t("img",{class:"w-[50px] h-[50px] mr-[10px]",src:l(S)(v.sku_image)},null,8,Je)]),t("div",We,[t("p",Xe,o(v.goods_name),1),t("span",Ze,o(v.sku_name),1)])])]),_:1})):r("",!0),e.value.giftcard.card_right_type=="balance"?(d(),u(_,{key:1,align:"center","min-width":"120"},{default:a(({row:v})=>[t("span",et,"￥"+o(v.balance),1)]),_:1})):r("",!0),s(_,{align:"center","min-width":"120"},{default:a(({row:v})=>[t("span",tt,o(v.use_num),1)]),_:1}),s(_,{align:"center","min-width":"120"},{default:a(({row:v})=>[t("span",at,o(v.create_time),1)]),_:1}),s(_,{align:"center","min-width":"120"},{default:a(({row:v})=>[e.value.giftcard.card_right_type=="goods"?(d(),u(D,{key:0,type:"primary",link:"",onClick:H=>j(v)},{default:a(()=>[I(o(l(i)("toRelationOrder")),1)]),_:2},1032,["onClick"])):(d(),u(D,{key:1,type:"primary",link:"",onClick:H=>A(n)},{default:a(()=>[I(o(l(i)("toMemberBalanceList")),1)]),_:2},1032,["onClick"]))]),_:2},1024)]),_:2},1032,["data"])]))),128)):(d(),u(O,{key:1,"image-size":1,description:l(i)("emptyData")},null,8,["description"]))]))],2)),[[L,x.value]])]),_:1}),s(g,{class:"box-card !border-none relative",shadow:"never"},{default:a(()=>[e.value.giftcard_log.length>0?(d(),c("h3",lt,o(l(i)("cardLogList")),1)):r("",!0),e.value.giftcard_log.length>0?(d(),c("div",st,[(d(!0),c(E,null,G(e.value.giftcard_log,(n,k)=>(d(),c("div",{class:"flex",key:k},[t("div",ot,[t("div",it,o(n.create_time&&n.create_time.split(" ")[0]),1),t("div",dt,o(n.create_time&&n.create_time.split(" ")[1]),1)]),t("div",null,[nt,k+1!=e.value.giftcard_log.length?(d(),c("div",rt)):r("",!0)]),t("div",null,[t("div",ct,o(n.name),1),t("div",_t,[t("span",null,o(n.type_name),1),t("span",ut,o(n.remark),1)])])]))),128))])):r("",!0)]),_:1})],64)):r("",!0)]),_:1},8,["model"])),[[L,x.value]])])}}});const Mt=_e(pt,[["__scopeId","data-v-965d4374"]]);export{Mt as default};
