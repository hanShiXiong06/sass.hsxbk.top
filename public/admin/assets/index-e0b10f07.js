import{d as $,l as q,r as y,a2 as D,h as v,c as h,a as i,b as z,e as l,w as t,Z as G,u as n,s as M,q as o,i as O,t as L,F as E,T as X,v as Z,B as P,a3 as C,U as k,a1 as Q,K as W,V as ee,L as le,M as ae,E as te,X as oe}from"./index-99f00cf3.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                     *//* empty css                 */import{g as se}from"./diy-a3190996.js";const ne=["onClick"],ue={class:"flex items-start"},ie=["onClick"],de={class:"mb-[16px]"},re={class:"mb-[16px]"},pe=i("div",{class:"text-sm text-gray-400 select-text"}," 路径必须以“/”开头，例：/app/pages/index/index ",-1),ce=i("div",{class:"text-sm text-gray-400 select-text"}," 跳转外部链接“http”或“https”开头，例：https://baidu.com ",-1),ve={class:"mb-[16px]"},me={class:"mb-[16px]"},_e=i("div",{class:"text-sm text-gray-400 select-text"}," 仅支持小程序之间的跳转，不支持从其他渠道跳转小程序 ",-1),fe=i("div",{class:"text-sm text-gray-400 select-text"}," 小程序路径格式如：app/pages/index/index ",-1),ge={class:"mb-[16px]"},ye=i("div",{class:"text-sm text-gray-400 select-text"}," 电话号码支持手机号码和固定电话 ",-1),he={class:"dialog-footer"},we=$({__name:"index",props:{modelValue:{type:Object,default:()=>{}},ignore:{type:Array,default:[]}},emits:["update:modelValue","confirm","success"],setup(T,{expose:Y,emit:x}){const b=T,p=q({get(){return b.modelValue},set(d){x("update:modelValue",d)}}),m=y(!1),_=y(!1),c=y([]),a=y(""),N=y([]),e=y([]),B=()=>{F(()=>{if(p.value.name!=""){e.value=C(p.value),a.value=e.value.parent;for(let d in c.value)c.value[d].name==a.value&&A(c.value[d])}m.value=!0,_.value=!0,x("confirm",_.value)})},F=(d=null)=>{se({}).then(u=>{if(c.value=u.data,b.ignore&&b.ignore.length){for(let V in c.value)for(let f=0;f<b.ignore.length;f++)if(V==b.ignore[f]){delete c.value[V];break}}N.value=Object.values(c.value)[0].child_list,p.value.name!=""?e.value=C(p.value):e.value={parent:Object.values(c.value)[0].name},a.value=e.value.parent,d&&d()})},A=d=>{N.value=d.child_list,a.value=d.name},K=()=>{p.value={name:"",parent:"",title:"",url:""}},H=()=>{if(a.value==="DIY_LINK"){if(!e.value.title){k({message:o("diyLinkNameNotEmpty"),type:"warning"});return}if(!e.value.url){k({message:o("diyLinkUrlNotEmpty"),type:"warning"});return}e.value.parent=a.value,e.value.name=a.value,e.value.action="",delete e.value.appid,delete e.value.mobile}else if(a.value=="DIY_PAGE")e.value.name=a.value,e.value.parent=a.value,e.value.action="decorate",delete e.value.appid,delete e.value.mobile;else if(a.value=="DIY_JUMP_OTHER_APPLET"){if(!e.value.appid){k({message:o("diyAppletIdNotEmpty"),type:"warning"});return}if(!e.value.page){k({message:o("diyAppletPageNotEmpty"),type:"warning"});return}e.value.name=a.value,e.value.parent=a.value,e.value.title="微信小程序-"+e.value.appid,e.value.action="",delete e.value.url,delete e.value.mobile}else if(a.value=="DIY_MAKE_PHONE_CALL"){if(!e.value.mobile){k({message:o("diyMakePhoneNotEmpty"),type:"warning"});return}e.value.name=a.value,e.value.parent=a.value,e.value.title="拨打电话："+e.value.mobile,e.value.action="",delete e.value.url,delete e.value.appid}p.value=C(e.value),m.value=!1,_.value=!1,x("confirm",_.value),x("success")},w=()=>{m.value=!1,_.value=!1,x("confirm",_.value)};return Y({showDialog:m}),(d,u)=>{const V=D("Close"),f=Q,R=D("ArrowRight"),g=W,I=ee,r=le,j=ae,U=te,S=oe;return v(),h("div",null,[i("div",{onClick:B},[z(d.$slots,"default",{},()=>[l(g,{modelValue:n(p).title,"onUpdate:modelValue":u[0]||(u[0]=s=>n(p).title=s),placeholder:n(o)("linkPlaceholder"),readonly:"",class:"link-input"},{suffix:t(()=>[i("div",{onClick:G(K,["stop"])},[n(p).name?(v(),M(f,{key:0},{default:t(()=>[l(V)]),_:1})):(v(),M(f,{key:1},{default:t(()=>[l(R)]),_:1}))],8,ne)]),_:1},8,["modelValue","placeholder"])])]),l(S,{modelValue:m.value,"onUpdate:modelValue":u[6]||(u[6]=s=>m.value=s),title:n(o)("selectLinkTips"),width:"40%","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1,onClose:w},{footer:t(()=>[i("span",he,[l(U,{onClick:w},{default:t(()=>[O(L(n(o)("cancel")),1)]),_:1}),l(U,{type:"primary",onClick:H},{default:t(()=>[O(L(n(o)("confirm")),1)]),_:1})])]),default:t(()=>[i("div",ue,[l(I,{class:"w-[140px] border-r h-[350px]"},{default:t(()=>[(v(!0),h(E,null,X(c.value,(s,J)=>(v(),h("div",{key:J,class:Z(["h-[40px] leading-[40px] cursor-pointer hover:bg-primary-light-9 px-[10px] hover:text-primary",[s.name==a.value?"bg-primary-light-9 text-primary":""]]),onClick:xe=>A(s)},L(s.title),11,ie))),128))]),_:1}),l(I,{class:"pl-4 h-[350px] flex-1"},{default:t(()=>[l(j,{"label-width":"100px",class:"px-[10px]"},{default:t(()=>[a.value=="DIY_LINK"?(v(),h(E,{key:0},[i("div",de,[l(r,{label:n(o)("diyLinkName")},{default:t(()=>[l(g,{modelValue:e.value.title,"onUpdate:modelValue":u[1]||(u[1]=s=>e.value.title=s),placeholder:n(o)("diyLinkNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),i("div",re,[l(r,{label:n(o)("diyLinkUrl")},{default:t(()=>[l(g,{modelValue:e.value.url,"onUpdate:modelValue":u[2]||(u[2]=s=>e.value.url=s),placeholder:n(o)("diyLinkUrlPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),l(r,{label:" "},{default:t(()=>[pe]),_:1}),l(r,{label:" "},{default:t(()=>[ce]),_:1})],64)):P("",!0),a.value=="DIY_JUMP_OTHER_APPLET"?(v(),h(E,{key:1},[i("div",ve,[l(r,{label:n(o)("diyAppletId")},{default:t(()=>[l(g,{modelValue:e.value.appid,"onUpdate:modelValue":u[3]||(u[3]=s=>e.value.appid=s),placeholder:n(o)("diyAppletIdPlaceholder"),clearable:"",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),i("div",me,[l(r,{label:n(o)("diyAppletPage")},{default:t(()=>[l(g,{modelValue:e.value.page,"onUpdate:modelValue":u[4]||(u[4]=s=>e.value.page=s),placeholder:n(o)("diyAppletPagePlaceholder"),clearable:"",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),l(r,{label:" "},{default:t(()=>[_e]),_:1}),l(r,{label:" "},{default:t(()=>[fe]),_:1})],64)):P("",!0),a.value=="DIY_MAKE_PHONE_CALL"?(v(),h(E,{key:2},[i("div",ge,[l(r,{label:n(o)("diyMakePhone")},{default:t(()=>[l(g,{modelValue:e.value.mobile,"onUpdate:modelValue":u[5]||(u[5]=s=>e.value.mobile=s),placeholder:n(o)("diyMakePhonePlaceholder"),clearable:"",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),l(r,{label:" "},{default:t(()=>[ye]),_:1})],64)):P("",!0)]),_:1})]),_:1})])]),_:1},8,["modelValue","title"])])}}});export{we as default};
