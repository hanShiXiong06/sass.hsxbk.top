import{d as ve,r as h,x as be,f as xe,n as L,a2 as ge,h as p,s as y,w as l,R as S,c as v,e,a,t as d,u as n,q as s,A as Y,d3 as x,B as P,v as H,i as K,F as he,T as ye,a5 as ke,U as Z,ay as we,az as Fe,J as Ce,L as Ee,aN as Le,a1 as De,aO as Te,M as ze,ad as Ve,ae as Se,W as Pe,ac as Ie,aD as Be,E as Ue,X as $e,bQ as je,Y as Re,a3 as Ne}from"./index-99f00cf3.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                  *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                      *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css               *//* empty css               */import"./el-form-item-4ed993c7.js";/* empty css                 *//* empty css                        *//* empty css                    */import{_ as D}from"./member_head-d9fd7b2c.js";import{a as Oe,b as Ae,e as Me,c as qe}from"./fenxiao-da4aead7.js";import{g as Ge}from"./level-0d08fb21.js";import{_ as Je}from"./fenxiao-of-select-popup.vue_vue_type_script_setup_true_lang-bbc80cb8.js";const Qe={class:"main-container"},We={class:"text-[14px] min-w-[110px] border-solid border-l-[3px] border-[var(--el-color-primary)] pl-[5px]"},Xe={class:"flex px-[30px] mt-[20px] mb-[20px]"},Ye={class:"input-width"},He=a("div",{class:"image-slot"},[a("img",{class:"w-[70px] h-[70px] rounded-full",src:D,alt:""})],-1),Ke={key:1,class:"w-[70px] h-[70px] rounded-full",src:D,alt:""},Ze={class:"input-width"},ea=["title"],aa=["title"],la={class:"input-width"},ta={class:"input-width"},na={class:"text-[14px] min-w-[110px] border-solid border-l-[3px] border-[var(--el-color-primary)] pl-[5px]"},oa={class:"flex px-[30px] mt-[20px] mb-[20px]"},sa={class:"input-width"},ia={class:"input-width"},da={class:"input-width"},ra={class:"input-width"},ma={class:"input-width"},pa={class:"input-width"},ca={class:"input-width"},ua={class:"input-width"},_a={key:1},fa={class:"mt-[16px] flex justify-end"},va={key:2},ba={class:"flex mb-[10px] text-[14px]"},xa={class:"flex items-center"},ga={class:"min-w-[50px] h-[50px] flex items-center justify-center"},ha=a("div",{class:"image-slot"},[a("img",{class:"w-[50px] h-[50px] rounded-full",src:D,alt:""})],-1),ya={key:1,class:"w-[50px] h-[50px] rounded-full",src:D,alt:""},ka={class:"ml-2"},wa=["title"],Fa=["title"],Ca={class:"text-[12px]"},Ea={class:"mt-[16px] flex justify-end"},La={class:"dialog-footer"},ol=ve({__name:"fenxiao-detail",emits:["load"],setup(Da,{expose:ee,emit:ae}){const F=h(!1),C=h(!1);be();const le=xe(),g=h("fenxiaoInfo"),r=h({});let k="";const te=i=>{ae("load"),g.value="fenxiaoInfo",F.value=!1},ne=i=>{g.value=i},c=L({page:1,limit:10,total:0,loading:!1,data:[]}),m=L({page:1,limit:10,total:0,loading:!1,data:[],searchParam:{type:"direct"}}),I=i=>{C.value=!0,qe(i).then(o=>{r.value=o.data,C.value=!1}).catch(()=>{C.value=!1})},T=()=>{c.loading=!0,Oe({page:c.page,limit:c.limit,id:k}).then(i=>{c.data=i.data.data,c.total=i.data.total,c.loading=!1}).catch(()=>{c.loading=!1})},E=(i=1)=>{m.loading=!0,m.page=i,Ae({page:m.page,limit:m.limit,...m.searchParam,id:k}).then(o=>{m.data=o.data.data,m.total=o.data.total,m.loading=!1}).catch(()=>{m.loading=!1})},B=i=>{m.searchParam.type=i,E()},U=L({not_in:r.parent,is_agent:"all"}),$=()=>{const i=Ne(r.value);f.id=i.member_id,f.level_id=i.level_id,f.parent=i.parent,U.not_in=i.child_ids?[i.parent,i.member_id,...i.child_ids]:[i.parent,i.member_id],f.status=i.status},j=h(),oe=i=>{var o;$(),(o=j.value)==null||o.show()},se=i=>{f.parent=i.member.member_id,f.parent_name=i.member.nickname,ke.confirm(s("editSupFenxiaoTip"),s("warning"),{confirmButtonText:s("confirm"),cancelButtonText:s("cancel"),type:"warning"}).then(()=>{O()})},R=h([]),f=L({id:0,level_id:null,parent:null,status:1}),N=(i=!1)=>{Ge({page:1,limit:11}).then(o=>{R.value=o.data.data,i&&Z({message:s("refreshSuccess"),type:"success"})})};N();const w=h(!1),ie=i=>{$(),w.value=!0},de=()=>{if(w.value=!1,!f.level_id){Z.error(s("fenxiaoLevelPlaceholder"));return}O()},O=()=>{Me(f).then(()=>{I(k)})},re=()=>{const i=le.resolve("/shop_fenxiao/management/level");window.open(i.href,"_blank")};return ee({showDialog:F,setFormData:(i=null)=>{k=i.id,I(k),T(),E()}}),(i,o)=>{const z=we,me=Fe,A=Ce,u=Ee,_=Le,M=ge("EditPen"),q=De,G=Te,pe=ze,b=Ve,J=Se,Q=Pe,ce=Ie,ue=Be,W=Ue,_e=$e,fe=je,V=Re;return p(),y(fe,{modelValue:F.value,"onUpdate:modelValue":o[15]||(o[15]=t=>F.value=t),title:"分销商详情",direction:"rtl","before-close":te,class:"member-detail-drawer"},{default:l(()=>[S((p(),v("div",Qe,[e(me,{modelValue:g.value,"onUpdate:modelValue":o[0]||(o[0]=t=>g.value=t),class:"pb-[10px]",onTabChange:ne},{default:l(()=>[e(z,{label:"分销商信息",name:"fenxiaoInfo"}),e(z,{label:"佣金账户",name:"commission"}),e(z,{label:"团队信息",name:"team"})]),_:1},8,["modelValue"]),g.value=="fenxiaoInfo"&&Object.keys(r.value).length&&Object.keys(r.value.member).length?(p(),y(pe,{key:0,class:"page-form",model:r.value,"label-width":"100px",ref:"formRef","label-position":"left"},{default:l(()=>[a("div",We,d(n(s)("baseInfo")),1),a("div",Xe,[e(G,null,{default:l(()=>[e(_,{span:8},{default:l(()=>[e(u,{label:n(s)("logo")},{default:l(()=>[a("div",Ye,[r.value.member&&r.value.member.headimg?(p(),y(A,{key:0,class:"w-[70px] h-[70px]",src:n(Y)(r.value.member.headimg),fit:"contain"},{error:l(()=>[He]),_:1},8,["src"])):(p(),v("img",Ke))])]),_:1},8,["label"])]),_:1}),e(_,{span:8},{default:l(()=>[e(u,{label:n(s)("nickname")},{default:l(()=>[a("div",Ze,[r.value.member.nickname?(p(),v("span",{key:0,title:r.value.member.nickname,class:"multi-hidden"},d(r.value.member.nickname),9,ea)):(p(),v("span",{key:1,title:r.value.member.nickname,class:"multi-hidden"},d(r.value.member.username),9,aa))])]),_:1},8,["label"])]),_:1}),e(_,{span:8},{default:l(()=>[e(u,{label:n(s)("mobile")},{default:l(()=>[a("div",la,[a("span",null,d(r.value.member.mobile),1)])]),_:1},8,["label"])]),_:1}),e(_,{span:8},{default:l(()=>[e(u,{label:n(s)("fenxiaoNo")},{default:l(()=>[a("div",ta,[a("span",null,d(r.value.fenxiao_no),1)])]),_:1},8,["label"])]),_:1}),e(_,{span:8},{default:l(()=>[e(u,{label:n(s)("fenxiaoLevel")},{default:l(()=>[a("div",{class:"cursor-pointer price-wrap input-width",onClick:o[1]||(o[1]=t=>ie(i.row))},[a("span",null,d(r.value.fenxiaoLevel.level_name||"--"),1),e(q,{class:"ml-[5px]",size:14},{default:l(()=>[e(M)]),_:1})])]),_:1},8,["label"])]),_:1}),e(_,{span:8},{default:l(()=>[e(u,{label:n(s)("supFenxiao")},{default:l(()=>{var t,X;return[a("div",{class:"cursor-pointer price-wrap input-width",onClick:o[2]||(o[2]=za=>oe(i.row))},[a("span",null,d(((t=r.value.parentFenxiao)==null?void 0:t.nickname)||((X=r.value.parentFenxiao)==null?void 0:X.username)||"无"),1),e(q,{class:"ml-[5px]",size:14},{default:l(()=>[e(M)]),_:1})])]}),_:1},8,["label"])]),_:1})]),_:1})]),a("div",na,d(n(s)("accountStatistics")),1),a("div",oa,[e(G,null,{default:l(()=>[e(_,{span:8},{default:l(()=>[e(u,{label:n(s)("commission")},{default:l(()=>[a("div",sa,[a("span",null,d(n(x)(r.value.member.commission)),1)])]),_:1},8,["label"])]),_:1}),e(_,{span:8},{default:l(()=>[e(u,{label:n(s)("commissionGet")},{default:l(()=>[a("div",ia,[a("span",null,d(n(x)(r.value.member.commission_get)),1)])]),_:1},8,["label"])]),_:1}),e(_,{span:8},{default:l(()=>[e(u,{label:n(s)("taking")},{default:l(()=>[a("div",da,[a("span",null,d(n(x)(r.value.member.commission_cash_outing)),1)])]),_:1},8,["label"])]),_:1}),e(_,{span:8},{default:l(()=>[e(u,{label:n(s)("distributionCommission")},{default:l(()=>[a("div",ra,[a("span",null,d(n(x)(r.value.fenxiao_commission)),1)])]),_:1},8,["label"])]),_:1}),e(_,{span:8},{default:l(()=>[e(u,{label:n(s)("agentCommission")},{default:l(()=>[a("div",ma,[a("span",null,d(n(x)(r.value.agent_commission)),1)])]),_:1},8,["label"])]),_:1}),e(_,{span:8},{default:l(()=>[e(u,{label:n(s)("reward")},{default:l(()=>[a("div",pa,[a("span",null,d(n(x)(r.value.sale_commission)),1)])]),_:1},8,["label"])]),_:1}),e(_,{span:8},{default:l(()=>[e(u,{label:n(s)("teamDividends")},{default:l(()=>[a("div",ca,[a("span",null,d(n(x)(r.value.team_commission)),1)])]),_:1},8,["label"])]),_:1}),e(_,{span:8},{default:l(()=>[e(u,{label:n(s)("taskRewards")},{default:l(()=>[a("div",ua,[a("span",null,d(n(x)(r.value.task_commission)),1)])]),_:1},8,["label"])]),_:1})]),_:1})])]),_:1},8,["model"])):P("",!0),g.value=="commission"?(p(),v("div",_a,[S((p(),y(J,{data:c.data,size:"large"},{empty:l(()=>[a("span",null,d(c.loading?"":n(s)("emptyData")),1)]),default:l(()=>[e(b,{label:n(s)("accountMoney"),"min-width":"120"},{default:l(({row:t})=>[a("div",null,d(t.account_data),1)]),_:1},8,["label"]),e(b,{label:n(s)("source"),"min-width":"120"},{default:l(({row:t})=>[a("div",null,d(t.from_type_name),1)]),_:1},8,["label"]),e(b,{label:n(s)("accountSum"),"min-width":"120"},{default:l(({row:t})=>[a("div",null,d(t.account_sum),1)]),_:1},8,["label"]),e(b,{prop:"create_time",label:n(s)("createTime"),"min-width":"120"},null,8,["label"]),e(b,{prop:"memo",label:n(s)("memo"),"min-width":"120"},null,8,["label"])]),_:1},8,["data"])),[[V,c.loading]]),a("div",fa,[e(Q,{"current-page":c.page,"onUpdate:current-page":o[3]||(o[3]=t=>c.page=t),"page-size":c.limit,"onUpdate:page-size":o[4]||(o[4]=t=>c.limit=t),layout:"total, sizes, prev, pager, next, jumper",total:c.total,onSizeChange:o[5]||(o[5]=t=>T()),onCurrentChange:T},null,8,["current-page","page-size","total"])])])):P("",!0),g.value=="team"?(p(),v("div",va,[a("div",ba,[a("span",{class:H(["px-[30px] py-[10px] border-[1px] border-solid border-[#f1f1f1] cursor-pointer",{"bg-[#F2F3F5] text-primary":m.searchParam.type=="direct"}]),onClick:o[6]||(o[6]=t=>B("direct"))},"直推",2),a("span",{class:H(["px-[30px] py-[10px] border-[1px] border-solid border-[#f1f1f1] cursor-pointer",{"bg-[#F2F3F5] text-primary":m.searchParam.type=="indirect"}]),onClick:o[7]||(o[7]=t=>B("indirect"))},"间推",2)]),S((p(),y(J,{data:m.data,size:"large"},{empty:l(()=>[a("span",null,d(m.loading?"":n(s)("emptyData")),1)]),default:l(()=>[e(b,{label:n(s)("accountInfo"),"min-width":"120"},{default:l(({row:t})=>[a("div",xa,[a("div",ga,[t.headimg&&t.headimg?(p(),y(A,{key:0,class:"w-[50px] h-[50px]",src:n(Y)(t.headimg),fit:"contain"},{error:l(()=>[ha]),_:2},1032,["src"])):(p(),v("img",ya))]),a("div",ka,[t.nickname?(p(),v("span",{key:0,title:t.nickname,class:"multi-hidden"},d(t.nickname),9,wa)):(p(),v("span",{key:1,title:t.nickname,class:"multi-hidden"},d(t.username),9,Fa)),a("span",Ca,d(t.mobile?t.mobile:"--"),1)])])]),_:1},8,["label"]),e(b,{label:n(s)("isFenxiao"),"min-width":"150"},{default:l(({row:t})=>[a("div",null,d(Object.keys(t.fenxiao).length?"是":"否"),1)]),_:1},8,["label"]),e(b,{label:n(s)("type"),"min-width":"150"},{default:l(({row:t})=>[a("div",null,d(t.is_direct?"直推":"间推"),1)]),_:1},8,["label"]),e(b,{label:n(s)("addTime"),"min-width":"150"},{default:l(({row:t})=>[a("div",null,d(t.fenxiao.create_time?t.fenxiao.create_time:"--"),1)]),_:1},8,["label"])]),_:1},8,["data"])),[[V,m.loading]]),a("div",Ea,[e(Q,{"current-page":m.page,"onUpdate:current-page":o[8]||(o[8]=t=>m.page=t),"page-size":m.limit,"onUpdate:page-size":o[9]||(o[9]=t=>m.limit=t),layout:"total, sizes, prev, pager, next, jumper",total:m.total,onSizeChange:o[10]||(o[10]=t=>E()),onCurrentChange:E},null,8,["current-page","page-size","total"])])])):P("",!0)])),[[V,C.value]]),e(_e,{modelValue:w.value,"onUpdate:modelValue":o[14]||(o[14]=t=>w.value=t),title:n(s)("editFenxiaoLevelTitle"),width:"470px","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1},{footer:l(()=>[a("span",La,[e(W,{onClick:o[13]||(o[13]=t=>w.value=!1)},{default:l(()=>[K(d(n(s)("cancel")),1)]),_:1}),e(W,{type:"primary",onClick:de},{default:l(()=>[K(d(n(s)("confirm")),1)]),_:1})])]),default:l(()=>[a("div",null,[e(u,{label:n(s)("fenxiaoLevel")},{default:l(()=>[e(ue,{modelValue:f.level_id,"onUpdate:modelValue":o[11]||(o[11]=t=>f.level_id=t),class:"input-width",clearable:"",placeholder:n(s)("fenxiaoLevelPlaceholder")},{default:l(()=>[(p(!0),v(he,null,ye(R.value,t=>(p(),y(ce,{key:t.value,label:t.level_name,value:t.level_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),a("span",{class:"text-[var(--el-color-primary)] ml-[10px] cursor-pointer",onClick:o[12]||(o[12]=t=>N(!0))},"刷新"),a("span",{class:"text-[var(--el-color-primary)] ml-[10px] cursor-pointer",onClick:re},"添加等级")]),_:1},8,["label"])])]),_:1},8,["modelValue","title"]),e(Je,{title:n(s)("editSupFenxiaoTitle"),ref_key:"fenxiaoOfSelectPopupRef",ref:j,params:U,onLoad:se},null,8,["title","params"])]),_:1},8,["modelValue"])}}});export{ol as _};
