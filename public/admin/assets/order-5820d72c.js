import{d as q,x as H,f as I,r as v,n as A,h as _,c,e as t,w as i,a as d,t as a,u as o,q as s,i as C,R as G,F as W,T as J,B as y,A as K,s as Q,a3 as X,bO as Z,L as ee,ac as te,aD as ae,E as oe,M as se,a7 as le,ad as re,ae as ne,ab as ie,W as de,Y as me}from"./index-99f00cf3.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                *//* empty css                  */import"./el-form-item-4ed993c7.js";/* empty css                       */import{g as _e,a as ce,b as pe}from"./order-b4e82541.js";import{a as ue}from"./team-3aa0e21a.js";import{_ as he}from"./_plugin-vue_export-helper-c27b6911.js";const be={class:"main-container"},fe={class:"flex justify-between items-center"},ge={class:"text-page-title"},xe={class:"table-body min-h-[150px]"},ye={key:0},ve={class:"flex items-center justify-between h-[35px] mt-[10px] px-3 text-[12px] text-[#666] border-solid border-b-[1px] border-[var(--el-border-color)] bg-[var(--el-color-info-light-9)]"},ke={class:"ml-5"},we={key:0,class:"ml-5"},Ce={class:"ml-5"},De={class:"flex cursor-pointer"},Ee={class:"flex items-center min-w-[50px] mr-[10px]"},Fe=["src"],Pe={key:1,class:"w-[50px] h-[50px]",src:"",alt:""},Te={class:"flex flex-col w-[308px]"},Ve={class:"multi-hidden text-[14px]"},Re={class:"text-[12px] text-[#999]"},Se={class:"flex flex-col"},ze={class:"text-[13px]"},Ne={class:"text-[13px] mt-[5px]"},Oe={class:"text-[13px]"},$e={key:0,class:"flex flex-col"},je=["onClick"],Be=["title","onClick"],Le=["title","onClick"],Ue={key:0},Ye={key:1},Me={key:0},qe={key:1},He={key:0},Ie={key:0,class:"text-[14px] h-[30px] leading-[30px] px-3 bg-[#fff0e5] text-[#ff7f5b]"},Ae={class:"mr-[5px]"},Ge={class:"mt-[16px] flex justify-end"},We=q({__name:"order",setup(Je){const V=H(),k=I(),R=V.meta.title,S=v([]),z=v([]),N=v([]);(async()=>{S.value=await(await _e()).data,z.value=await(await ce()).data,N.value=await(await pe()).data})();const r=A({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{is_settlement:"",create_time:[]}}),D=v(),g=(p=1)=>{r.loading=!0,r.page=p,ue({page:r.page,limit:r.limit,...r.searchParam}).then(l=>{r.loading=!1,r.data=l.data.data.map(h=>{let u=0;return h.goods_list=[],h.shop_order.order_goods.forEach(b=>{u+=b.fenxiao_order_goods.length,b.fenxiao_order_goods.forEach((w,x)=>{let f=X(Object.assign(b,w));delete f.fenxiao_order_goods,f.goodsRowspan=x?0:b.fenxiao_order_goods.length,f.rowspan=0,h.goods_list.push(f)})}),h.goods_list[0].rowspan=u,h}),r.total=l.data.total}).catch(()=>{r.loading=!1})};g();const O=({row:p,column:l,rowIndex:h,columnIndex:u})=>u<2?[p.goodsRowspan,p.goodsRowspan?1:0]:u==2||u>6?[p.rowspan,p.rowspan?1:0]:[1,1],$=p=>{const l=k.resolve("/shop/order/detail?order_id="+p.order_id);window.open(l.href,"_blank")},j=p=>{const l=k.resolve({path:"/member/detail",query:{id:p}});window.open(l.href,"_blank")},B=p=>{p&&(p.resetFields(),g())},E=p=>{const l=k.resolve({path:"/shop_fenxiao/detail",query:{id:p.fenxiao_member_id}});window.open(l.href,"_blank")};return(p,l)=>{const h=Z,u=ee,b=te,w=ae,x=oe,f=se,F=le,m=re,P=ne,L=ie,U=de,Y=me;return _(),c("div",be,[t(F,{class:"card !border-none",shadow:"never"},{default:i(()=>[d("div",fe,[d("span",ge,a(o(R)),1)]),t(F,{class:"card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:i(()=>[t(f,{inline:!0,model:r.searchParam,ref_key:"searchFormRef",ref:D},{default:i(()=>[t(u,{label:o(s)("createTime"),prop:"create_time"},{default:i(()=>[t(h,{modelValue:r.searchParam.create_time,"onUpdate:modelValue":l[0]||(l[0]=n=>r.searchParam.create_time=n),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":o(s)("startDate"),"end-placeholder":o(s)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),t(u,{label:o(s)("orderStatus"),prop:"is_settlement"},{default:i(()=>[t(w,{modelValue:r.searchParam.is_settlement,"onUpdate:modelValue":l[1]||(l[1]=n=>r.searchParam.is_settlement=n),placeholder:o(s)("orderStatusPlaceholder"),clearable:""},{default:i(()=>[t(b,{label:"已结算",value:1}),t(b,{label:"待结算",value:0})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,null,{default:i(()=>[t(x,{type:"primary",onClick:l[2]||(l[2]=n=>g())},{default:i(()=>[C(a(o(s)("search")),1)]),_:1}),t(x,{onClick:l[3]||(l[3]=n=>B(D.value))},{default:i(()=>[C(a(o(s)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),d("div",null,[t(P,{size:"large",class:"table-top"},{default:i(()=>[t(m,{label:o(s)("orderGoods"),width:"350"},null,8,["label"]),t(m,{label:o(s)("goodsPriceNumber"),"min-width":"150"},null,8,["label"]),t(m,{label:o(s)("refundStatus"),"min-width":"100"},null,8,["label"]),t(m,{label:o(s)("buyInfo"),"min-width":"120"},null,8,["label"]),t(m,{label:o(s)("fenxiaoName"),"min-width":"120"},null,8,["label"]),t(m,{label:o(s)("fenxiaoLevel"),"min-width":"120"},null,8,["label"]),t(m,{label:o(s)("teamRate"),"min-width":"120"},null,8,["label"]),t(m,{label:o(s)("goodsFenxiaoPrice"),"min-width":"120",align:"right"},null,8,["label"]),t(m,{label:o(s)("orderStatus"),"min-width":"120"},null,8,["label"]),t(m,{label:o(s)("operation"),fixed:"right",align:"right","min-width":"120"},null,8,["label"])]),_:1}),G((_(),c("div",xe,[r.loading?y("",!0):(_(),c("div",ye,[r.data.length?(_(!0),c(W,{key:0},J(r.data,(n,M)=>(_(),c("div",{key:M},[d("div",ve,[d("div",null,[d("span",null,a(o(s)("orderNo"))+"："+a(n.order_no),1),d("span",ke,a(o(s)("createTime"))+"："+a(n.create_time),1),n.pay?(_(),c("span",we,a(o(s)("payType"))+"："+a(n.pay.type_name),1)):y("",!0),d("span",Ce,a(o(s)("countPrice"))+"：￥"+a(n.commission_team),1)])]),t(P,{data:n.goods_list,size:"large","show-header":!1,"span-method":O,ref_for:!0,ref:"multipleTable"},{default:i(()=>[t(m,{align:"left",width:"350"},{default:i(({row:e})=>[d("div",De,[d("div",Ee,[e.goods_image_thumb_mid?(_(),c("img",{key:0,class:"w-[50px] h-[50px]",src:o(K)(e.goods_image_thumb_mid),alt:""},null,8,Fe)):(_(),c("img",Pe))]),d("div",Te,[d("p",Ve,a(e.goods_name),1),d("span",Re,a(e.sku_name),1)])])]),_:1}),t(m,{"min-width":"150"},{default:i(({row:e})=>[d("div",Se,[d("span",ze,"￥"+a(e.goods_money),1),d("span",Ne,a(e.num)+a(o(s)("price")),1)])]),_:1}),t(m,{"min-width":"100"},{default:i(({row:e})=>[d("span",Oe,a(e.status!=1&&e.status_name?e.status_name:"--"),1)]),_:1}),t(m,{"min-width":"120","class-name":"border-0 border-l-[1px] border-solid border-[var(--el-table-border-color)]"},{default:i(()=>[n.shop_order.member?(_(),c("div",$e,[d("span",{class:"text-[12px] text-primary cursor-pointer",onClick:e=>j(n.shop_order.member.member_id)},a(n.shop_order.member.nickname),9,je)])):y("",!0)]),_:2},1024),t(m,{"min-width":"120","class-name":"border-0 border-l-[1px] border-solid border-[var(--el-table-border-color)]"},{default:i(({row:e})=>[e.member.nickname?(_(),c("span",{key:0,title:e.member.nickname,class:"multi-hidden text-primary cursor-pointer",onClick:T=>E(e)},a(e.member.nickname),9,Be)):(_(),c("span",{key:1,title:e.member.nickname,class:"multi-hidden text-primary cursor-pointer",onClick:T=>E(e)},a(e.member.username),9,Le))]),_:1}),t(m,{"min-width":"120"},{default:i(({row:e})=>[e.commission_level?(_(),c("span",Ue,a(e.commission_level)+"级",1)):(_(),c("span",Ye,"--"))]),_:1}),t(m,{"min-width":"120"},{default:i(({row:e})=>[e.commission_rate||e.team_flat_rate?(_(),c("span",Me,a(e.team_flat_rate>0?e.team_flat_rate+"%(平级分红比率)":e.commission_rate+"%"),1)):(_(),c("span",qe,"--"))]),_:1}),t(m,{"min-width":"120",align:"right"},{default:i(({row:e})=>[e.commission?(_(),c("span",He,"￥"+a(e.commission||"0.00"),1)):y("",!0)]),_:1}),t(m,{"min-width":"120","class-name":"border-0 border-l-[1px] border-solid border-[var(--el-table-border-color)]"},{default:i(({row:e})=>[d("span",null,a(e.is_settlement?"已结算":"待结算"),1)]),_:1}),t(m,{align:"right","min-width":"120"},{default:i(({row:e})=>[t(x,{type:"primary",link:"",onClick:T=>$(e)},{default:i(()=>[C(a(o(s)("orderDetail")),1)]),_:2},1032,["onClick"])]),_:1})]),_:2},1032,["data"]),n.shop_remark?(_(),c("div",Ie,[d("span",Ae,a(o(s)("notes"))+"：",1),d("span",null,a(n.shop_remark),1)])):y("",!0)]))),128)):(_(),Q(L,{key:1,"image-size":1,description:o(s)("emptyData")},null,8,["description"]))]))])),[[Y,r.loading]]),d("div",Ge,[t(U,{"current-page":r.page,"onUpdate:current-page":l[4]||(l[4]=n=>r.page=n),"page-size":r.limit,"onUpdate:page-size":l[5]||(l[5]=n=>r.limit=n),layout:"total, sizes, prev, pager, next, jumper",total:r.total,onSizeChange:l[6]||(l[6]=n=>g()),onCurrentChange:g},null,8,["current-page","page-size","total"])])])]),_:1})])}}});const xt=he(We,[["__scopeId","data-v-db163dc2"]]);export{xt as default};
