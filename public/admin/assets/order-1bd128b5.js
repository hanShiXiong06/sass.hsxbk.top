import{d as pe,r as i,x as ce,n as _e,a2 as fe,h as d,c as _,a as m,e as t,w as r,i as p,u as a,q as n,F as y,T as g,s as c,t as h,R as ve,al as C,B as V,a5 as be,E as he,K as ke,ac as ye,aD as we,L as ge,bO as Ve,M as Pe,a7 as De,ad as xe,a1 as Ce,ae as Ee,W as Le,X as Fe,Y as Ue}from"./index-99f00cf3.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                *//* empty css                       *//* empty css                  */import"./el-form-item-4ed993c7.js";import{u as F}from"./dict-1df0bad2.js";import{r as Oe,i as Ie,s as Te,j as $e,k as Be,l as Se,m as Re,n as je,b as Me}from"./order-442c45cb.js";import{_ as We}from"./order-edit.vue_vue_type_style_index_0_lang-703d5af9.js";import{_ as ze}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                 *//* empty css                         *//* empty css                  *//* empty css                   *//* empty css                   */const Ye={class:"main-container"},Ne={class:"mt-2 mb-2 ml-4"},qe={class:"mt-[10px]"},Ke={class:"text-red"},Xe={class:"mt-[16px] flex justify-end"},Ae={class:"mt-2"},Ge=["src"],He={class:""},Je={class:"mt-[24px]"},Qe=pe({__name:"order",setup(Ze){const P=i(null),S=i(),K=u=>{S.value=u,L.value=u.remark,E.value=!0},E=i(!1),L=i(""),X=async()=>{await Oe({id:S.value.id,remark:L.value}),E.value=!1,v()},A=()=>{P.value.contentWindow&&P.value.contentWindow.history.back()},G=()=>{P.value.contentWindow&&P.value.contentWindow.location.reload()},U=i(!1),H=()=>{U.value=!0},R=i();(async()=>{R.value=await(await Ie()).msg})(),ce().meta.title;const J=i([]),j=i([]),Q=async u=>{await Te(u),v()},Z=async u=>{await $e({id:u}),v()};(async()=>{J.value=await(await Be()).data,j.value=await(await Se()).data})();let o=_e({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{member_id:"",order_from:"",order_id:"",out_trade_no:"",is_send:"",order_status:"",refund_status:"",remark:"",create_time:[]}});const M=i();i([]);const O=i([]);(async()=>{O.value=await(await F("jhkd_is_send")).data.dictionary})();const ee=i([]);(async()=>{ee.value=await(await F("jhkd_is_pick")).data.dictionary})();const I=i([]);(async()=>{I.value=await(await F("jhkd_order_status")).data.dictionary})();const T=i([]);(async()=>{T.value=await(await F("jhkd_refund_status")).data.dictionary})();const v=(u=1)=>{o.loading=!0,o.page=u,Re({page:o.page,limit:o.limit,...o.searchParam}).then(l=>{o.loading=!1,o.data=l.data.data,o.total=l.data.total}).catch(()=>{o.loading=!1})};v();const $=i(null),ae=u=>{$.value.setFormData(u),$.value.showDialog=!0},te=u=>{be.confirm(n("orderDeleteTips"),n("warning"),{confirmButtonText:n("confirm"),cancelButtonText:n("cancel"),type:"warning"}).then(()=>{je(u).then(()=>{v()}).catch(()=>{})})},le=()=>{z()},B=i(),W=i([]),z=async()=>{W.value=await(await Me({keyword:B.value})).data.data};z();const re=u=>{u&&(u.resetFields(),v())};return(u,l)=>{const w=he,D=ke,k=ye,x=we,b=ge,oe=Ve,ne=Pe,Y=De,f=xe,se=fe("EditPen"),de=Ce,ie=Ee,ue=Le,N=Fe,me=Ue;return d(),_(y,null,[m("div",Ye,[t(Y,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[t(w,{type:"primary",onClick:l[0]||(l[0]=e=>H())},{default:r(()=>[p("新增订单")]),_:1}),t(Y,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:r(()=>[t(ne,{inline:!0,model:a(o).searchParam,ref_key:"searchFormRef",ref:M},{default:r(()=>[t(b,{label:"会员",prop:"member_id"},{default:r(()=>[t(x,{class:"input-width",modelValue:a(o).searchParam.member_id,"onUpdate:modelValue":l[2]||(l[2]=e=>a(o).searchParam.member_id=e),clearable:"",placeholder:a(n)("memberIdPlaceholder")},{default:r(()=>[m("div",Ne,[t(D,{onChange:le,modelValue:B.value,"onUpdate:modelValue":l[1]||(l[1]=e=>B.value=e),style:{width:"200px"},placeholder:"搜索会员支持昵称/会员名"},{append:r(()=>[p("搜索 ")]),_:1},8,["modelValue"])]),t(k,{label:"请选择",value:""}),(d(!0),_(y,null,g(W.value,(e,s)=>(d(),c(k,{key:s,label:e.nickname,value:e.member_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),t(b,{label:a(n)("orderFrom"),prop:"order_from"},{default:r(()=>[t(x,{modelValue:a(o).searchParam.order_from,"onUpdate:modelValue":l[3]||(l[3]=e=>a(o).searchParam.order_from=e),clearable:"",class:"input-item"},{default:r(()=>[(d(!0),_(y,null,g(j.value,(e,s)=>(d(),c(k,{key:s,label:e,value:s},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(b,{label:"订单号",prop:"order_id"},{default:r(()=>[t(D,{modelValue:a(o).searchParam.order_id,"onUpdate:modelValue":l[4]||(l[4]=e=>a(o).searchParam.order_id=e),placeholder:"请输入订单号"},null,8,["modelValue"])]),_:1}),t(b,{label:"支付单号",prop:"out_trade_no"},{default:r(()=>[t(D,{modelValue:a(o).searchParam.out_trade_no,"onUpdate:modelValue":l[5]||(l[5]=e=>a(o).searchParam.out_trade_no=e),placeholder:"请输入支付单号"},null,8,["modelValue"])]),_:1}),t(b,{label:"发单状态",prop:"is_send"},{default:r(()=>[t(x,{class:"w-[280px]",modelValue:a(o).searchParam.is_send,"onUpdate:modelValue":l[6]||(l[6]=e=>a(o).searchParam.is_send=e),clearable:"",placeholder:a(n)("isSendPlaceholder")},{default:r(()=>[t(k,{label:"全部",value:""}),(d(!0),_(y,null,g(O.value,(e,s)=>(d(),c(k,{key:s,label:e.name,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),t(b,{label:a(n)("orderStatus"),prop:"order_status"},{default:r(()=>[t(x,{class:"w-[280px]",modelValue:a(o).searchParam.order_status,"onUpdate:modelValue":l[7]||(l[7]=e=>a(o).searchParam.order_status=e),clearable:"",placeholder:a(n)("orderStatusPlaceholder")},{default:r(()=>[t(k,{label:"全部",value:""}),(d(!0),_(y,null,g(I.value,(e,s)=>(d(),c(k,{key:s,label:e.name,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(b,{label:a(n)("refundStatus"),prop:"refund_status"},{default:r(()=>[t(x,{class:"w-[280px]",modelValue:a(o).searchParam.refund_status,"onUpdate:modelValue":l[8]||(l[8]=e=>a(o).searchParam.refund_status=e),clearable:"",placeholder:a(n)("refundStatusPlaceholder")},{default:r(()=>[t(k,{label:"全部",value:""}),(d(!0),_(y,null,g(T.value,(e,s)=>(d(),c(k,{key:s,label:e.name,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(b,{label:a(n)("remark"),prop:"remark"},{default:r(()=>[t(D,{modelValue:a(o).searchParam.remark,"onUpdate:modelValue":l[9]||(l[9]=e=>a(o).searchParam.remark=e),placeholder:a(n)("remarkPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(b,{label:a(n)("createTime"),prop:"create_time"},{default:r(()=>[t(oe,{modelValue:a(o).searchParam.create_time,"onUpdate:modelValue":l[10]||(l[10]=e=>a(o).searchParam.create_time=e),type:"datetimerange",format:"YYYY-MM-DD hh:mm:ss","start-placeholder":a(n)("startDate"),"end-placeholder":a(n)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),t(b,null,{default:r(()=>[t(w,{type:"primary",onClick:l[11]||(l[11]=e=>v())},{default:r(()=>[p(h(a(n)("search")),1)]),_:1}),t(w,{onClick:l[12]||(l[12]=e=>re(M.value))},{default:r(()=>[p(h(a(n)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),m("div",qe,[ve((d(),c(ie,{data:a(o).data,size:"large"},{empty:r(()=>[m("span",null,h(a(o).loading?"":a(n)("emptyData")),1)]),default:r(()=>[t(f,{prop:"order_id",label:"订单号","min-width":"160","show-overflow-tooltip":!0}),t(f,{prop:"order_from",label:a(n)("orderFrom"),"min-width":"80","show-overflow-tooltip":!0},null,8,["label"]),t(f,{prop:"member_id_name",label:a(n)("memberId"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),t(f,{prop:"order_money",label:a(n)("orderMoney"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),t(f,{prop:"out_trade_no",label:"支付单号","min-width":"120","show-overflow-tooltip":!0}),t(f,{label:"发单状态","min-width":"80",align:"center","show-overflow-tooltip":!0},{default:r(({row:e})=>[(d(!0),_(y,null,g(O.value,(s,q)=>(d(),_("div",null,[s.value==e.is_send?(d(),c(a(C),{key:0},{default:r(()=>[p(h(s.name),1)]),_:2},1024)):V("",!0)]))),256))]),_:1}),t(f,{label:a(n)("orderStatus"),"min-width":"120",align:"center","show-overflow-tooltip":!0},{default:r(({row:e})=>[(d(!0),_(y,null,g(I.value,(s,q)=>(d(),_("div",null,[s.value==e.order_status&&e.order_status!=-1?(d(),c(a(C),{key:0},{default:r(()=>[p(h(s.name),1)]),_:2},1024)):V("",!0),s.value==e.order_status&&e.order_status==-1?(d(),c(a(C),{key:1,type:"warning"},{default:r(()=>[p(h(s.name),1)]),_:2},1024)):V("",!0)]))),256)),e.addorderInfo&&e.addorderInfo.order_status==0?(d(),c(a(C),{key:0,class:"mt-1",type:"error"},{default:r(()=>[p(" 需补差价")]),_:1})):V("",!0)]),_:1},8,["label"]),t(f,{label:a(n)("refundStatus"),"min-width":"80",align:"center","show-overflow-tooltip":!0},{default:r(({row:e})=>[(d(!0),_(y,null,g(T.value,(s,q)=>(d(),_("div",null,[s.value==e.refund_status?(d(),c(a(C),{key:0},{default:r(()=>[p(h(s.name),1)]),_:2},1024)):V("",!0)]))),256))]),_:1},8,["label"]),t(f,{label:"关闭原因",prop:"close_reason","min-width":"120",align:"center","show-overflow-tooltip":!0},{default:r(({row:e})=>[m("div",Ke,h(e.close_reason),1)]),_:1}),t(f,{prop:"remark",label:a(n)("remark"),"min-width":"120","show-overflow-tooltip":!0},{default:r(({row:e})=>[m("div",null,h(e.remark),1),t(de,{onClick:s=>K(e)},{default:r(()=>[t(se)]),_:2},1032,["onClick"])]),_:1},8,["label"]),t(f,{label:a(n)("operation"),fixed:"right","min-width":"220"},{default:r(({row:e})=>[t(w,{type:"primary",link:"",onClick:s=>ae(e)},{default:r(()=>[p("详情")]),_:2},1032,["onClick"]),e.order_status==-1||e.order_status==0?(d(),c(w,{key:0,type:"primary",link:"",onClick:s=>te(e.id)},{default:r(()=>[p(h(a(n)("delete")),1)]),_:2},1032,["onClick"])):V("",!0),e.order_status==1&&e.is_send==0?(d(),c(w,{key:1,type:"primary",link:"",onClick:s=>Q(e.order_id)},{default:r(()=>[p("发单")]),_:2},1032,["onClick"])):V("",!0),e.order_status==1?(d(),c(w,{key:2,type:"primary",link:"",onClick:s=>Z(e.id)},{default:r(()=>[p("取消")]),_:2},1032,["onClick"])):V("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[me,a(o).loading]]),m("div",Xe,[t(ue,{"current-page":a(o).page,"onUpdate:current-page":l[13]||(l[13]=e=>a(o).page=e),"page-size":a(o).limit,"onUpdate:page-size":l[14]||(l[14]=e=>a(o).limit=e),layout:"total, sizes, prev, pager, next, jumper",total:a(o).total,onSizeChange:l[15]||(l[15]=e=>v()),onCurrentChange:v},null,8,["current-page","page-size","total"])])]),t(We,{ref_key:"editOrderDialog",ref:$,onComplete:v},null,512)]),_:1})]),t(N,{modelValue:U.value,"onUpdate:modelValue":l[16]||(l[16]=e=>U.value=e),title:"使用移动端账号登录",width:"420",height:"740","align-center":""},{default:r(()=>[m("div",{class:"mt-[-24px]"},[m("button",{onClick:A,class:"mr-2"},"返回"),m("button",{onClick:G},"刷新")]),m("div",Ae,[m("iframe",{ref_key:"myIframeRef",ref:P,src:R.value,width:"375",height:"667"},null,8,Ge)])]),_:1},8,["modelValue"]),t(N,{modelValue:E.value,"onUpdate:modelValue":l[19]||(l[19]=e=>E.value=e),title:"订单备注","align-center":"",width:"300px"},{default:r(()=>[m("div",He,[t(D,{style:{width:"200px"},modelValue:L.value,"onUpdate:modelValue":l[17]||(l[17]=e=>L.value=e)},null,8,["modelValue"])]),m("div",Je,[t(w,{type:"primary",onClick:l[18]||(l[18]=e=>X()),class:"mr-2"},{default:r(()=>[p("确认")]),_:1})])]),_:1},8,["modelValue"])],64)}}});const Ba=ze(Qe,[["__scopeId","data-v-ac1a8ea1"]]);export{Ba as default};
