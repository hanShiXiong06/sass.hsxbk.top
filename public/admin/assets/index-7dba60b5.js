import{d as B,r as c,n as I,h as f,s as v,w as t,a as g,e as l,i as d,t as b,u as w,q as h,R as N,ca as O,cb as j,aW as L,au as U,av as $,L as k,a7 as q,M as A,E as G,X as J,Y as M}from"./index-99f00cf3.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                       *//* empty css                 *//* empty css                 */const T={style:{width:"520px"}},W={class:"dialog-footer"},le=B({__name:"index",emits:["complete"],setup(X,{expose:E,emit:V}){const n=c(!1),s=c(!0),u={storage_type:"",site_id:"",is_use:"0",domain:"https://baidu.com"},a=I({...u}),_=c(),x=async i=>{s.value||!i||await i.validate(async e=>{e&&(s.value=!0,a.domain="https://baidu.com",a.site_id=JSON.parse(localStorage.getItem("site.siteInfo")).site_id,O(a).then(m=>{s.value=!1,n.value=!1,V("complete")}).catch(()=>{s.value=!1}))})};return E({showDialog:n,setFormData:async(i=null)=>{if(s.value=!0,Object.assign(a,u),i){const e=await(await j(i.storage_type)).data;Object.keys(a).forEach(o=>{e[o]!=null&&(a[o]=e[o]),e.params[o]!=null&&(a[o]=e.params[o].value)})}s.value=!1}}),(i,e)=>{const o=L,m=U,y=$,D=k,R=q,C=A,p=G,F=J,S=M;return f(),v(F,{modelValue:n.value,"onUpdate:modelValue":e[3]||(e[3]=r=>n.value=r),title:"跟随平台存储",width:"580px","destroy-on-close":!0},{footer:t(()=>[g("span",W,[l(p,{onClick:e[1]||(e[1]=r=>n.value=!1)},{default:t(()=>[d(b(w(h)("cancel")),1)]),_:1}),l(p,{type:"primary",loading:s.value,onClick:e[2]||(e[2]=r=>x(_.value))},{default:t(()=>[d(b(w(h)("confirm")),1)]),_:1},8,["loading"])])]),default:t(()=>[N((f(),v(C,{model:a,"label-width":"140px",ref_key:"formRef",ref:_,rules:i.formRules,class:"page-form"},{default:t(()=>[l(R,{class:"box-card !border-none",shadow:"never"},{default:t(()=>[g("div",T,[l(o,{type:"info",title:"使用平台端提供的云存储，无需额外配置",closable:!1,"show-icon":""})]),l(D,{label:"是否启用"},{default:t(()=>[l(y,{modelValue:a.is_use,"onUpdate:modelValue":e[0]||(e[0]=r=>a.is_use=r)},{default:t(()=>[l(m,{label:"1"},{default:t(()=>[d("启用")]),_:1}),l(m,{label:"0"},{default:t(()=>[d("停用")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[S,s.value]])]),_:1},8,["modelValue"])}}});export{le as default};
