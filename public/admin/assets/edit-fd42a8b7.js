import{d as fe,bD as ge,x as xe,f as we,r as w,n as J,Q as be,bu as he,a2 as ye,h as d,c as g,e as s,w as i,a as l,t as m,u as o,q as a,F as C,T as D,s as h,i as $,B as k,$ as Q,v as Ce,Z as M,aY as K,A as ke,a4 as ee,an as oe,a1 as Ve,aa as ze,aB as Te,E as Ee,bE as Pe,bA as Me,bB as Ie,V as Se,aU as Be,L as qe,bz as De,bv as $e,as as Ue,at as Ne,M as je,a6 as Fe,X as Le,p as Re,g as Oe}from"./index-6ea097a6.js";/* empty css                  *//* empty css                   *//* empty css                *//* empty css                     *//* empty css                       *//* empty css                 *//* empty css                        *//* empty css                 *//* empty css                  *//* empty css                  *//* empty css                        */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                         */import{_ as Ae}from"./index.vue_vue_type_script_setup_true_lang-3cb6d3b1.js";/* empty css               *//* empty css                  *//* empty css                  */import{_ as Ze}from"./edit-draw-f8d32fab.js";import{_ as Ge}from"./edit-headimg-dcd1470a.js";import{_ as He}from"./edit-image-1967b811.js";import{_ as We}from"./edit-nickname-a244032f.js";import{_ as Xe}from"./edit-page-27ab1926.js";import{_ as Ye}from"./edit-qrcode-88939207.js";import{_ as Je}from"./edit-text-08df525d.js";import{_ as Qe}from"./preview-draw-0e91a5a5.js";import{_ as Ke}from"./preview-headimg-15863b9f.js";import{_ as eo}from"./preview-image-75da7752.js";import{_ as oo}from"./preview-nickname-36536a67.js";import{_ as to}from"./preview-qrcode-8b31f273.js";import{_ as no}from"./preview-text-ddd5c4d8.js";import{_ as so}from"./edit-o2o-goods-image-40f67d06.js";import{_ as lo}from"./edit-o2o-goods-name-7b4d55c4.js";import{_ as ao}from"./edit-o2o-goods-price-dcd4d7ca.js";import{_ as io}from"./preview-o2o-goods-image-60f1ebab.js";import{_ as ro}from"./preview-o2o-goods-name-d1442178.js";import{_ as po}from"./preview-o2o-goods-price-7f24e912.js";import{_ as co}from"./edit-goods-image-b520df1e.js";import{_ as mo}from"./edit-goods-market-price-1e423498.js";import{_ as _o}from"./edit-goods-name-595b3359.js";import{_ as uo}from"./edit-goods-price-cd64f126.js";import{_ as vo}from"./preview-goods-image-e15f4dcd.js";import{_ as fo}from"./preview-goods-market-price-999eafed.js";import{_ as go}from"./preview-goods-name-9c6272ee.js";import{_ as xo}from"./preview-goods-price-57d6c030.js";import{_ as wo}from"./edit-tourism-goods-image-5d40067b.js";import{_ as bo}from"./edit-tourism-goods-name-81a7c12d.js";import{_ as ho}from"./edit-tourism-goods-price-58413246.js";import{_ as yo}from"./preview-tourism-goods-image-b13b6459.js";import{_ as Co}from"./preview-tourism-goods-name-65a20f8b.js";import{_ as ko}from"./preview-tourism-goods-price-dd0ddad0.js";import{u as Vo}from"./poster-917b4e97.js";import{i as zo,g as To,e as Eo,a as Po,b as Mo}from"./poster-7b21cc99.js";import{_ as Io}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-a6a5e859.js";/* empty css                        */import"./index.vue_vue_type_style_index_0_lang-b4429e25.js";import"./attachment-eff12253.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-5136f203.js";/* empty css                      *//* empty css                    *//* empty css                 *//* empty css               *//* empty css               *//* empty css                    *//* empty css                    */import"./el-dropdown-item-4ed993c7.js";import"./index.vue_vue_type_script_setup_true_lang-7edbe634.js";/* empty css                   */import"./sortable.esm-be94e56d.js";/* empty css                  */import"./default_headimg-a897263d.js";import"./goods_default-664bb559.js";import"./goods_default-995568ac.js";const O=I=>(Re("data-v-a30efbac"),I=I(),Oe(),I),So={class:"main-container flex-1"},Bo={class:"pl-[5px] text-[14px]"},qo={class:"text-white ml-[10px] mr-[20px] flex items-center"},Do=O(()=>l("span",{class:"mr-[5px] text-[rgba(255,255,255,.5)]"},"｜",-1)),$o={class:"mr-[5px] text-[14px]"},Uo={class:"text-white mr-[10px] text-base"},No=O(()=>l("div",{class:"flex-1"},null,-1)),jo={class:"full-container flex flex-row flex-1 bg-page"},Fo={class:"component-list w-[290px]"},Lo={class:"flex flex-row flex-wrap"},Ro=["title","onClick"],Oo={class:"block text-[12px] truncate"},Ao={class:"preview-wrap flex-1 relative mt-[20px]"},Zo={class:"diy-view-wrap w-[360px] shadow-lg mx-auto"},Go={class:"content-wrap"},Ho={class:"title-wrap text-center text-[14px]"},Wo={class:"preview-block relative"},Xo={class:"quick-action absolute text-center -right-[70px] top-[20px] w-[42px] rounded shadow-md"},Yo=["id","onMousedown","onClick"],Jo=["onMousedown"],Qo=["onMousedown"],Ko=["onMousedown"],et=["onMousedown"],ot={class:"edit-attribute-wrap w-[400px]"},tt={class:"card-header flex justify-between items-center"},nt={class:"title flex-1"},st={class:"edit-component-wrap"},lt={class:"edit-attr-item-wrap"},at={class:"mb-[10px]"},it=O(()=>l("div",{class:"my-[10px]"},null,-1)),rt={class:"ml-[92px] mb-[18px] text-sm text-gray-400"},pt={key:0},dt=["src"],ct=fe({__name:"edit",setup(I){ge("setLayout")("decorate");const e=Vo(),u=xe(),te=we();u.query.id=u.query.id||0,u.query.type=u.query.type||"",u.query.name=u.query.name||"",u.query.back=u.query.back||"/site/poster/list";const S=u.query.back,B=w(""),A=w(""),V=w([]),Z=J([]);w("");const G=w(Z),ne=p=>{},se=w(!0),le=()=>{se.value?(location.href=`${location.origin}${S}`,te.push(S)):ee.confirm(a("leavePageTitleTips"),a("leavePageContentTips"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning",autofocus:!1}).then(()=>{location.href=`${location.origin}${S}`}).catch(()=>{})},H=Object.assign({"./components/edit-draw.vue":Ze,"./components/edit-headimg.vue":Ge,"./components/edit-image.vue":He,"./components/edit-nickname.vue":We,"./components/edit-page.vue":Xe,"./components/edit-qrcode.vue":Ye,"./components/edit-text.vue":Je,"./components/preview-draw.vue":Qe,"./components/preview-headimg.vue":Ke,"./components/preview-image.vue":eo,"./components/preview-nickname.vue":oo,"./components/preview-qrcode.vue":to,"./components/preview-text.vue":no}),W=Object.assign({"/src/addon/o2o/views/poster/components/edit-o2o-goods-image.vue":so,"/src/addon/o2o/views/poster/components/edit-o2o-goods-name.vue":lo,"/src/addon/o2o/views/poster/components/edit-o2o-goods-price.vue":ao,"/src/addon/o2o/views/poster/components/preview-o2o-goods-image.vue":io,"/src/addon/o2o/views/poster/components/preview-o2o-goods-name.vue":ro,"/src/addon/o2o/views/poster/components/preview-o2o-goods-price.vue":po,"/src/addon/shop/views/poster/components/edit-goods-image.vue":co,"/src/addon/shop/views/poster/components/edit-goods-market-price.vue":mo,"/src/addon/shop/views/poster/components/edit-goods-name.vue":_o,"/src/addon/shop/views/poster/components/edit-goods-price.vue":uo,"/src/addon/shop/views/poster/components/preview-goods-image.vue":vo,"/src/addon/shop/views/poster/components/preview-goods-market-price.vue":fo,"/src/addon/shop/views/poster/components/preview-goods-name.vue":go,"/src/addon/shop/views/poster/components/preview-goods-price.vue":xo,"/src/addon/tourism/views/poster/components/edit-tourism-goods-image.vue":wo,"/src/addon/tourism/views/poster/components/edit-tourism-goods-name.vue":bo,"/src/addon/tourism/views/poster/components/edit-tourism-goods-price.vue":ho,"/src/addon/tourism/views/poster/components/preview-tourism-goods-image.vue":yo,"/src/addon/tourism/views/poster/components/preview-tourism-goods-name.vue":Co,"/src/addon/tourism/views/poster/components/preview-tourism-goods-price.vue":ko});W&&Object.assign(H,W);const U={};for(const[p,t]of Object.entries(H)){const r=p.split("/").pop().split(".")[0];U[r]=t.default}const z=J([]),ae=()=>{To({addon:e.addon,type:e.type}).then(p=>{p.data&&z.splice(0,z.length,...p.data)})};be(()=>B.value,(p,t)=>{A.value=t});const ie=p=>{if(e.value.length)ee.confirm(a("changeTemplatePosterTips"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{if(e.changeCurrentIndex(-99),p!==""){let t=z[p].data;e.global=t.global,t.value.length&&(e.value=t.value)}else e.init()}).catch(()=>{B.value=A.value});else if(p!==""){let t=z[p].data;e.global=t.global,t.value.length&&(e.value=t.value)}else e.init()};zo({id:u.query.id,type:u.query.type,name:u.query.name}).then(async p=>{const t=p.data;if(e.init(),e.id=t.id,e.name=t.name,e.channel=t.channel,e.status=t.status,e.isDefault=t.is_default,e.addon=t.addon,e.type=t.type,e.typeName=t.poster_type.name,t.value){const v=t.value;e.global=v.global,v.value.length&&(e.value=v.value)}V.value=t.component;for(const v in V.value){Z.push(v);for(const r in V.value[v].list){const f=he(V.value[v].list[r]);f.id=e.generateRandom(),f.componentName=r,f.componentTitle=f.title,delete f.title,delete f.icon,e.components.push(f)}}ae()});const b=w(!1),re=p=>{if(!e.verify()||b.value)return;b.value=!0,e.value.forEach((r,f)=>{const T=document.getElementById(r.id);if(T&&(r.width=T.offsetWidth,r.height=T.offsetHeight,r.type=="draw")){let E=[r.x*2,r.y*2],F=[(r.x+r.width)*2,r.y*2],x=[(r.x+r.width)*2,(r.y+r.height)*2],L=[r.x*2,(r.y+r.height)*2];r.points=[E,F,x,L]}delete r.verify});let t={id:e.id,name:e.name,type:e.type,status:e.status,is_default:e.isDefault,channel:e.channel,addon:e.addon,value:JSON.stringify({global:oe(e.global),value:oe(e.value)})};(e.id?Eo:Po)(t).then(r=>{b.value=!1,r.code==1&&(e.id?b.value=!1:location.href=`${location.origin}${S}`,p&&p(r.data.id))}).catch(()=>{b.value=!1})},N=w(!1),j=w(""),pe=()=>{b.value||(b.value=!0,Mo({id:e.id,type:e.type}).then(p=>{p.data&&(j.value=p.data,N.value=!0),b.value=!1}))};return(p,t)=>{const v=ye("ArrowLeft"),r=Ve,f=ze,T=Te,E=Ee,F=Pe,x=Ae,L=Me,de=Ie,R=Se,P=Be,y=qe,q=De,X=$e,ce=Ue,me=Ne,_e=je,ue=Fe,ve=Le;return d(),g("div",So,[s(F,{class:"flex items-center h-[60px] bg-primary px-[20px]"},{default:i(()=>[l("div",{class:"text-white cursor-pointer flex items-center",onClick:le},[s(r,{size:"14"},{default:i(()=>[s(v)]),_:1}),l("span",Bo,m(o(a)("back")),1)]),l("div",qo,[Do,l("span",$o,m(o(a)("decorating"))+"："+m(o(e).typeName),1)]),l("div",null,[l("span",Uo,m(o(a)("templatePosterPlaceholder")),1),s(T,{size:"small",modelValue:B.value,"onUpdate:modelValue":t[0]||(t[0]=n=>B.value=n),class:"w-[180px]",placeholder:o(a)("templatePosterPlaceholder"),onChange:ie},{default:i(()=>[s(f,{label:o(a)("templatePosterEmpty"),value:""},null,8,["label"]),(d(!0),g(C,null,D(z,(n,_)=>(d(),h(f,{label:n.name,value:_,key:_},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),No,o(e).id?(d(),h(E,{key:0,onClick:t[1]||(t[1]=n=>pe())},{default:i(()=>[$(m(o(a)("preview")),1)]),_:1})):k("",!0),s(E,{onClick:t[2]||(t[2]=n=>re())},{default:i(()=>[$(m(o(a)("save")),1)]),_:1})]),_:1}),l("div",jo,[l("div",Fo,[s(R,{class:"px-[10px]"},{default:i(()=>[s(de,{modelValue:G.value,"onUpdate:modelValue":t[3]||(t[3]=n=>G.value=n),onChange:ne},{default:i(()=>[(d(!0),g(C,null,D(V.value,(n,_)=>(d(),h(L,{key:_,title:n.title,name:_},{default:i(()=>[l("ul",Lo,[(d(!0),g(C,null,D(n.list,(c,Y)=>(d(),g("li",{key:Y,class:"w-2/6 text-center cursor-pointer h-[65px]",title:c.title,onClick:_t=>o(e).addComponent(Y,c)},[c.icon?(d(),h(x,{key:0,name:c.icon,size:"20px",class:"inline-block mt-[3px]"},null,8,["name"])):(d(),h(x,{key:1,name:"iconfont iconkaifazujian",size:"20px",class:"inline-block mt-[3px]"})),l("span",Oo,m(c.title),1)],8,Ro))),128))])]),_:2},1032,["title","name"]))),128))]),_:1},8,["modelValue"])]),_:1})]),l("div",Ao,[s(R,null,{default:i(()=>[s(E,{class:"page-btn absolute right-[20px]",onClick:t[4]||(t[4]=n=>o(e).changeCurrentIndex(-99))},{default:i(()=>[$(m(o(a)("posterSet")),1)]),_:1}),l("div",Zo,[l("div",{class:"preview-head bg-no-repeat bg-center bg-cover cursor-pointer h-[64px]",onClick:t[5]||(t[5]=n=>o(e).changeCurrentIndex(-99))},[l("div",Go,[l("div",Ho,m(o(e).name),1)])]),l("div",Wo,[l("ul",Xo,[s(P,{effect:"light",content:o(a)("moveUpComponentZIndex"),placement:"right"},{default:i(()=>[s(x,{name:"iconfont iconjiantoushang",size:"20px",class:"block cursor-pointer leading-[40px]",onClick:o(e).moveUpComponent},null,8,["onClick"])]),_:1},8,["content"]),s(P,{effect:"light",content:o(a)("moveDownComponentZIndex"),placement:"right"},{default:i(()=>[s(x,{name:"iconfont iconjiantouxia",size:"20px",class:"block cursor-pointer leading-[40px]",onClick:o(e).moveDownComponent},null,8,["onClick"])]),_:1},8,["content"]),s(P,{effect:"light",content:o(a)("copyComponent"),placement:"right"},{default:i(()=>[s(x,{name:"iconfont iconcopy-line",size:"20px",class:"block cursor-pointer leading-[40px]",onClick:o(e).copyComponent},null,8,["onClick"])]),_:1},8,["content"]),s(P,{effect:"light",content:o(a)("delComponent"),placement:"right"},{default:i(()=>[s(x,{name:"iconfont icondelete-line",size:"20px",class:"block cursor-pointer leading-[40px]",onClick:o(e).delComponent},null,8,["onClick"])]),_:1},8,["content"]),s(P,{effect:"light",content:o(a)("resetComponent"),placement:"right"},{default:i(()=>[s(x,{name:"iconfont iconloader-line",size:"20px",class:"block cursor-pointer leading-[40px]",onClick:o(e).resetComponent},null,8,["onClick"])]),_:1},8,["content"])]),l("div",{class:"preview-iframe",style:Q(o(e).getGlobalStyle()),onClick:t[6]||(t[6]=n=>o(e).changeCurrentIndex(-99))},[(d(!0),g(C,null,D(o(e).value,(n,_)=>(d(),g("div",{class:Ce(["item-wrap area-box select-none max-w-[360px] cursor-move",{selected:o(e).currentIndex==_}]),id:n.id,key:n.id,style:Q({top:n.y+"px",left:n.x+"px",zIndex:n.zIndex,transform:"rotate("+n.angle+"deg)"}),onMousedown:c=>o(e).mouseDown(c,n.id,_),onClick:M(c=>o(e).changeCurrentIndex(_,n),["stop"])},[(d(),h(K(U["preview-"+n.path]),{value:n},null,8,["value"])),l("span",{class:"box1",onMousedown:M(c=>o(e).resizeMouseDown(c,n,_),["stop"])},null,40,Jo),l("span",{class:"box2",onMousedown:M(c=>o(e).resizeMouseDown(c,n,_),["stop"])},null,40,Qo),l("span",{class:"box3",onMousedown:M(c=>o(e).resizeMouseDown(c,n,_),["stop"])},null,40,Ko),l("span",{class:"box4",onMousedown:M(c=>o(e).resizeMouseDown(c,n,_),["stop"])},null,40,et)],46,Yo))),128))],4)])])]),_:1})]),l("div",ot,[s(R,null,{default:i(()=>[s(ue,{class:"box-card",shadow:"never"},{header:i(()=>[l("div",tt,[l("span",nt,m(o(e).currentIndex==-99?o(a)("posterSet"):o(e).editComponent.componentTitle),1)])]),default:i(()=>[l("div",st,[o(e).currentComponent?(d(),h(K(U[o(e).currentComponent]),{key:0,value:o(e).value[o(e).currentIndex]},{common:i(()=>[l("div",lt,[l("h3",at,m(o(a)("componentStyleTitle")),1),s(_e,{"label-width":"80px",class:"px-[10px]"},{default:i(()=>[s(y,{label:o(a)("zIndex")},{default:i(()=>[l("span",null,m(o(e).editComponent.zIndex),1)]),_:1},8,["label"]),s(y,{label:o(a)("coordinate")},{default:i(()=>[s(q,{modelValue:o(e).editComponent.x,"onUpdate:modelValue":t[7]||(t[7]=n=>o(e).editComponent.x=n),"show-input":"",size:"small",class:"ml-[10px]",min:0,max:o(e).getMaxX()},null,8,["modelValue","max"]),it,s(q,{modelValue:o(e).editComponent.y,"onUpdate:modelValue":t[8]||(t[8]=n=>o(e).editComponent.y=n),"show-input":"",size:"small",class:"ml-[10px]",min:0,max:o(e).getMaxY()},null,8,["modelValue","max"])]),_:1},8,["label"]),l("div",rt,m(o(a)("coordinateTips")),1),o(e).editComponent.type=="text"?(d(),g(C,{key:0},[s(y,{label:o(a)("textFontSize")},{default:i(()=>[s(q,{modelValue:o(e).editComponent.fontSize,"onUpdate:modelValue":t[9]||(t[9]=n=>o(e).editComponent.fontSize=n),"show-input":"",size:"small",class:"ml-[10px]",min:14,max:36},null,8,["modelValue"])]),_:1},8,["label"]),s(y,{label:o(a)("textColor")},{default:i(()=>[s(X,{modelValue:o(e).editComponent.fontColor,"onUpdate:modelValue":t[10]||(t[10]=n=>o(e).editComponent.fontColor=n)},null,8,["modelValue"])]),_:1},8,["label"])],64)):k("",!0),o(e).editComponent.type=="image"?(d(),h(y,{key:1,label:o(a)("width")},{default:i(()=>[s(q,{modelValue:o(e).editComponent.width,"onUpdate:modelValue":t[11]||(t[11]=n=>o(e).editComponent.width=n),"show-input":"",size:"small",class:"ml-[10px]",min:30,max:o(e).getMaxWidth()},null,8,["modelValue","max"])]),_:1},8,["label"])):k("",!0),o(e).editComponent.type=="draw"?(d(),g(C,{key:2},[s(y,{label:o(a)("drawType")},{default:i(()=>[s(me,{modelValue:o(e).editComponent.drawType,"onUpdate:modelValue":t[12]||(t[12]=n=>o(e).editComponent.drawType=n)},{default:i(()=>[s(ce,{label:"Polygon"},{default:i(()=>[$(m(o(a)("polygon")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),s(y,{label:o(a)("bgColor")},{default:i(()=>[s(X,{modelValue:o(e).editComponent.bgColor,"onUpdate:modelValue":t[13]||(t[13]=n=>o(e).editComponent.bgColor=n)},null,8,["modelValue"])]),_:1},8,["label"])],64)):k("",!0)]),_:1})])]),_:1},8,["value"])):k("",!0)])]),_:1})]),_:1})])]),s(ve,{modelValue:N.value,"onUpdate:modelValue":t[14]||(t[14]=n=>N.value=n),title:o(a)("previewDialogTitle"),width:"400px",height:"640px"},{default:i(()=>[j.value?(d(),g("div",pt,[l("img",{src:o(ke)(j.value),class:"w-[360px] h-[640px]"},null,8,dt)])):k("",!0)]),_:1},8,["modelValue","title"])])}}});const Nn=Io(ct,[["__scopeId","data-v-a30efbac"]]);export{Nn as default};
