import{d as R,r as v,n as M,h as c,c as y,e as o,w as l,i as u,t as r,u as s,q as n,B as k,R as q,s as x,a as i,A,a3 as G,a$ as J,U as K,K as O,L as W,E as X,M as Y,ac as H,J as Q,ad as Z,W as ee,X as ae,Y as te}from"./index-2a89d409.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css                        *//* empty css                        *//* empty css                *//* empty css                  */import"./el-form-item-4ed993c7.js";import{_ as D}from"./member_head-d9fd7b2c.js";import{g as le}from"./fenxiao-1539816f.js";const oe={class:"flex items-center cursor-pointer"},se={class:"min-w-[50px] h-[50px] flex items-center justify-center"},ne=i("div",{class:"image-slot"},[i("img",{class:"w-[50px] h-[50px] rounded-full",src:D,alt:""})],-1),ie={key:1,class:"w-[50px] h-[50px] rounded-full",src:D,alt:""},re={class:"ml-2"},me=["title"],pe={class:"text-primary text-[12px]"},de={class:"cursor-pointer price-wrap"},ce={class:"mt-[16px] flex justify-end"},ue={key:0,class:"dialog-footer"},je=R({__name:"fenxiao-of-select-popup",props:{title:{type:String,default:""},max:{type:Number,default:1},params:{type:Object,default:()=>({is_agent:"all"})}},emits:["load"],setup(N,{expose:P,emit:C}){const p=N,d=v(!1),a=M({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{search:""}}),_=(m=1)=>{a.loading=!0,a.page=m;const t=G(a.searchParam);le({page:a.page,limit:a.limit,...p.params,...t}).then(h=>{a.loading=!1,a.data=h.data.data,a.total=h.data.total}).catch(()=>{a.loading=!1})};let E=v();const S=m=>{m&&(a.searchParam.search="",_())};let b=v([]);const F=m=>{b.value=m},L=m=>{J(()=>{_(),d.value=!0})},$=()=>{if(b.value.length>p.max){K.error(`最多选择${p.max}个分销商`);return}C("load",b.value),d.value=!1},z=m=>{C("load",m),d.value=!1};return P({showDialog:d,show:L}),(m,t)=>{const h=O,V=W,f=X,B=Y,g=H,T=Q,U=Z,j=ee,w=ae,I=te;return c(),y("div",null,[o(w,{modelValue:d.value,"onUpdate:modelValue":t[7]||(t[7]=e=>d.value=e),title:p.title,width:"800px","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1},{footer:l(()=>[p.max>1?(c(),y("span",ue,[o(f,{onClick:t[6]||(t[6]=e=>d.value=!1)},{default:l(()=>[u(r(s(n)("cancel")),1)]),_:1}),o(f,{type:"primary",onClick:$},{default:l(()=>[u(r(s(n)("confirm")),1)]),_:1})])):k("",!0)]),default:l(()=>[o(B,{inline:!0,model:a.searchParam,ref_key:"searchFormRef",ref:E},{default:l(()=>[o(V,{label:s(n)("fenxiaoName")},{default:l(()=>[o(h,{modelValue:a.searchParam.search,"onUpdate:modelValue":t[0]||(t[0]=e=>a.searchParam.search=e),placeholder:s(n)("fenxiaoNamePlaceholder"),maxlength:"60"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(V,null,{default:l(()=>[o(f,{type:"primary",onClick:t[1]||(t[1]=e=>_())},{default:l(()=>[u(r(s(n)("search")),1)]),_:1}),o(f,{onClick:t[2]||(t[2]=e=>S(s(E)))},{default:l(()=>[u(r(s(n)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"]),q((c(),x(U,{data:a.data,size:"large","max-height":"400",onSelectionChange:F},{empty:l(()=>[i("span",null,r(a.loading?"":s(n)("emptyData")),1)]),default:l(()=>[p.max>1?(c(),x(g,{key:0,type:"selection",width:"55"})):k("",!0),o(g,{prop:"goods_id",label:s(n)("fenxiaoName"),"min-width":"200"},{default:l(({row:e})=>[i("div",oe,[i("div",se,[e.member&&e.member.headimg?(c(),x(T,{key:0,class:"w-[50px] h-[50px]",src:s(A)(e.member.headimg),fit:"contain"},{error:l(()=>[ne]),_:2},1032,["src"])):(c(),y("img",ie))]),i("div",re,[i("span",{title:e.member&&e.member.nickname||e.member&&e.member.username,class:"multi-hidden"},r(e.member&&e.member.nickname||e.member&&e.member.username),9,me),i("span",pe,r(e.member&&e.member.mobile),1)])])]),_:1},8,["label"]),o(g,{label:s(n)("fenxiaoLevel"),"min-width":"120"},{default:l(({row:e})=>[i("div",de,[i("span",null,r(e.fenxiaoLevel?e.fenxiaoLevel.level_name:"--"),1)])]),_:1},8,["label"]),o(g,{prop:"sort",label:s(n)("currentState"),"min-width":"100"},{default:l(({row:e})=>[u(r(e.status_name),1)]),_:1},8,["label"]),p.max==1?(c(),x(g,{key:1,label:s(n)("operation"),fixed:"right",align:"right"},{default:l(({row:e})=>[o(f,{type:"primary",onClick:_e=>z(e)},{default:l(()=>[u(r(s(n)("select")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])):k("",!0)]),_:1},8,["data"])),[[I,a.loading]]),i("div",ce,[o(j,{"current-page":a.page,"onUpdate:current-page":t[3]||(t[3]=e=>a.page=e),"page-size":a.limit,"onUpdate:page-size":t[4]||(t[4]=e=>a.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:a.total,onSizeChange:t[5]||(t[5]=e=>_()),onCurrentChange:_},null,8,["current-page","page-size","total"])])]),_:1},8,["modelValue","title"])])}}});export{je as _};
