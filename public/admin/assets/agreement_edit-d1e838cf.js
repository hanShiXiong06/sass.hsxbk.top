import{d as S,c0 as j,x as N,f as P,r as k,c7 as T,n as $,l as q,q as n,h as x,c as A,a as s,u as o,t as p,R as I,s as L,w as m,e as l,i as y,K as O,L as U,M as z,a6 as K,E as M,Y}from"./index-f7a01263.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                     */import{_ as G}from"./index.vue_vue_type_script_setup_true_lang-6490c353.js";/* empty css                 */import{a as H,e as J}from"./agreement-321889d3.js";import"./index.vue_vue_type_style_index_0_lang-0595c85c.js";/* empty css                  *//* empty css                   */import"./attachment-893e498c.js";import"./index.vue_vue_type_script_setup_true_lang-473c7dda.js";/* empty css                        *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                      *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css               *//* empty css               *//* empty css                    *//* empty css                    */import"./el-dropdown-item-4ed993c7.js";import"./index.vue_vue_type_script_setup_true_lang-a36ce1b6.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-73e73d1c.js";import"./_plugin-vue_export-helper-c27b6911.js";const Q={class:"main-container"},W={class:"detail-head"},X=s("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1),Z={class:"ml-[1px]"},ee=s("span",{class:"adorn"},"|",-1),te={class:"right"},oe={class:"fixed-footer-wrap"},ae={class:"fixed-footer"},Ae=S({__name:"agreement_edit",setup(se){j();const d=N(),_=P(),f=d.query.key||"",r=k(!1),w=T(),V=d.meta.title,g={agreement_key:"",content:"",title:"",agreement_key_name:""},t=$({...g});r.value=!0,f&&(async(c="")=>{Object.assign(t,g);const e=await(await H(c)).data;Object.keys(t).forEach(a=>{e[a]!=null&&(t[a]=e[a])}),console.log(t),r.value=!1})(f);const v=k(),E=q(()=>({title:[{required:!0,message:n("titlePlaceholder"),trigger:"blur"}]})),C=async c=>{r.value||!c||await c.validate(async e=>{if(e){r.value=!0;const a=t;a.key=t.agreement_key,J(a).then(u=>{r.value=!1,h()}).catch(()=>{r.value=!1})}})},h=()=>{w.removeTab(d.path),_.push({path:"/tk_jhkd/baseconfig/agreement"})};return(c,e)=>{const a=O,u=U,D=G,R=z,B=K,b=M,F=Y;return x(),A("div",Q,[s("div",W,[s("div",{class:"left",onClick:e[0]||(e[0]=i=>o(_).push({path:"/setting/agreement"}))},[X,s("span",Z,p(o(n)("returnToPreviousPage")),1)]),ee,s("span",te,p(o(V)),1)]),I((x(),L(B,{class:"box-card !border-none",shadow:"never"},{default:m(()=>[l(R,{model:t,"label-width":"90px",ref_key:"formRef",ref:v,rules:o(E),class:"page-form"},{default:m(()=>[l(u,{label:o(n)("title"),prop:"title"},{default:m(()=>[l(a,{modelValue:t.title,"onUpdate:modelValue":e[1]||(e[1]=i=>t.title=i),clearable:"",placeholder:o(n)("titlePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(u,{label:o(n)("content")},{default:m(()=>[l(D,{modelValue:t.content,"onUpdate:modelValue":e[2]||(e[2]=i=>t.content=i)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1})),[[F,r.value]]),s("div",oe,[s("div",ae,[l(b,{type:"primary",onClick:e[3]||(e[3]=i=>C(v.value))},{default:m(()=>[y(p(o(n)("save")),1)]),_:1}),l(b,{onClick:e[4]||(e[4]=i=>h())},{default:m(()=>[y(p(o(n)("cancel")),1)]),_:1})])])])}}});export{Ae as default};
