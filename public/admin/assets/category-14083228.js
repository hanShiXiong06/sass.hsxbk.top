import{d as L,x as M,n as R,r as h,h as f,c as j,e as n,w as s,a as u,t as i,u as e,i as c,q as r,R as I,s as v,a5 as q,aq as O,U as K,E as W,K as Y,L as A,M as G,a7 as H,ad as J,al as Q,ae as X,W as Z,Y as ee}from"./index-99f00cf3.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                  */import{a as te,d as ae,m as oe,b as le}from"./category-de093071.js";import{_ as re}from"./category-edit.vue_vue_type_style_index_0_lang-498b54cc.js";/* empty css                  *//* empty css                   *//* empty css                  */const ne={class:"main-container"},se={class:"flex justify-between items-center"},ie={class:"text-lg"},de={class:"mt-[10px]"},me={class:"mt-[16px] flex justify-end"},Se=L({__name:"category",setup(ce){const $=M().meta.title;let a=R({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{category_name:"",order:"",sort:""}});const C=h(),d=(l=1)=>{a.loading=!0,a.page=l,te({page:a.page,limit:a.limit,...a.searchParam}).then(t=>{a.loading=!1,a.data=t.data.data,a.total=t.data.total}).catch(()=>{a.loading=!1})};d();const g=h(null),B=()=>{g.value.setFormData(),g.value.showDialog=!0},D=l=>{g.value.setFormData(l),g.value.showDialog=!0},P=l=>{q.confirm(r("categoryDeleteTips"),r("warning"),{confirmButtonText:r("confirm"),cancelButtonText:r("cancel"),type:"warning"}).then(()=>{ae(l).then(()=>{d()}).catch(()=>{})})},T=O((l,t)=>{if(isNaN(l)||!/^\d{0,10}$/.test(l)){K({type:"warning",message:`${r("sortTips")}`});return}l>99999999&&(t.sort=99999999),oe({category_id:t.category_id,sort:l}).then(m=>{})}),y=h(!1),b=(l,t)=>{y.value||(y.value=!0,le({category_id:l,status:t}).then(m=>{d(),y.value=!1}))},V=l=>{l&&(l.resetFields(),d())},N=l=>{let t="";l.order=="ascending"?t="asc":l.order=="descending"&&(t="desc"),t&&(a.searchParam.order=l.prop,a.searchParam.sort=t),d()};return(l,t)=>{const m=W,x=Y,k=A,F=G,E=H,_=J,w=Q,z=X,S=Z,U=ee;return f(),j("div",ne,[n(E,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[u("div",se,[u("span",ie,i(e($)),1),n(m,{type:"primary",onClick:B},{default:s(()=>[c(i(e(r)("addCategory")),1)]),_:1})]),n(E,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:s(()=>[n(F,{inline:!0,model:e(a).searchParam,ref_key:"searchFormRef",ref:C},{default:s(()=>[n(k,{label:e(r)("categoryName"),prop:"category_name"},{default:s(()=>[n(x,{modelValue:e(a).searchParam.category_name,"onUpdate:modelValue":t[0]||(t[0]=o=>e(a).searchParam.category_name=o),modelModifiers:{trim:!0},placeholder:e(r)("categoryNamePlaceholder"),maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(k,null,{default:s(()=>[n(m,{type:"primary",onClick:t[1]||(t[1]=o=>d())},{default:s(()=>[c(i(e(r)("search")),1)]),_:1}),n(m,{onClick:t[2]||(t[2]=o=>V(C.value))},{default:s(()=>[c(i(e(r)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),u("div",de,[I((f(),v(z,{data:e(a).data,size:"large",onSortChange:N},{empty:s(()=>[u("span",null,i(e(a).loading?"":e(r)("emptyData")),1)]),default:s(()=>[n(_,{prop:"category_name",label:e(r)("categoryName"),"min-width":"300","show-overflow-tooltip":!0},null,8,["label"]),n(_,{prop:"status",label:e(r)("status"),width:"200","show-overflow-tooltip":!0},{default:s(({row:o})=>[o.status==1?(f(),v(w,{key:0,type:"success",onClick:p=>b(o.category_id,0),class:"cursor-pointer"},{default:s(()=>[c(i(e(r)("statusOn")),1)]),_:2},1032,["onClick"])):(f(),v(w,{key:1,type:"info",onClick:p=>b(o.category_id,1),class:"cursor-pointer"},{default:s(()=>[c(i(e(r)("statusOff")),1)]),_:2},1032,["onClick"]))]),_:1},8,["label"]),n(_,{prop:"sort",label:e(r)("sort"),"min-width":"200",sortable:"custom"},{default:s(({row:o})=>[n(x,{modelValue:o.sort,"onUpdate:modelValue":p=>o.sort=p,modelModifiers:{trim:!0},class:"!w-[120px]",maxlength:"6",onBlur:p=>e(T)(o.sort,o)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1},8,["label"]),n(_,{prop:"create_time",label:e(r)("createTime"),"min-width":"200",sortable:"custom"},{default:s(({row:o})=>[u("div",null,i(o.create_time),1)]),_:1},8,["label"]),n(_,{label:e(r)("operation"),fixed:"right",align:"right",width:"150"},{default:s(({row:o})=>[n(m,{type:"primary",link:"",onClick:p=>D(o)},{default:s(()=>[c(i(e(r)("edit")),1)]),_:2},1032,["onClick"]),n(m,{type:"primary",link:"",onClick:p=>P(o.category_id)},{default:s(()=>[c(i(e(r)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[U,e(a).loading]]),u("div",me,[n(S,{"current-page":e(a).page,"onUpdate:current-page":t[3]||(t[3]=o=>e(a).page=o),"page-size":e(a).limit,"onUpdate:page-size":t[4]||(t[4]=o=>e(a).limit=o),layout:"total, sizes, prev, pager, next, jumper",total:e(a).total,onSizeChange:t[5]||(t[5]=o=>d()),onCurrentChange:d},null,8,["current-page","page-size","total"])])]),n(re,{ref_key:"editCategoryDialog",ref:g,onComplete:d},null,512)]),_:1})])}}});export{Se as default};
