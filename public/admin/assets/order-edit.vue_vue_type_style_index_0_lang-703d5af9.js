import{d as K,r as u,aP as Q,a2 as w,h as s,c as d,e as r,w as a,s as v,a as t,t as o,B as l,i as c,F as g,T as D,u as Y,A as Z,U as B,a1 as ee,al as te,E as oe,d1 as se,cz as ae,a8 as le,a9 as re,a7 as de,X as ne,aW as ie,ac as ce,aD as _e}from"./index-99f00cf3.js";/* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                  *//* empty css                   *//* empty css                *//* empty css                         *//* empty css                  *//* empty css                   *//* empty css                  */import{u as ue}from"./dict-1df0bad2.js";import{c as ve,g as me,a as fe}from"./order-442c45cb.js";/* empty css                   */const pe={class:"flex items-center mt-4"},ye={key:0,class:"mr-[28px] p-4 pl-12 pr-12 rounded-md statistic-card bg-gradient-to-r from-indigo-50 from-10% via-sky-50 via-10% to-emerald-50 to-10%"},he=t("div",{class:"font-bold text-slate-400"},"订单金额",-1),Ie={class:"text-2xl"},ge={key:1,class:"mr-[28px] p-4 pl-12 pr-12 rounded-md statistic-card bg-gradient-to-r from-indigo-50 from-10% via-sky-50 via-10% to-emerald-50 to-10%"},ke=t("div",{class:"font-bold text-slate-400"},"优惠金额",-1),xe={class:"text-2xl"},be={class:"flex mt-4"},we={class:"mr-4"},De=t("span",null,"订单号：",-1),Ee={class:"font-bold"},Ce={class:"mr-4"},Ve=t("span",null,"运单号：",-1),Ne={class:"font-bold"},Se={class:"mr-2"},Be=t("span",null,"创建时间：",-1),Ue={class:""},Le={key:0,class:"flex mt-6"},Oe=t("span",null,"用户：",-1),Re={class:"font-bold"},Te={class:"bg-cyan-50 rounded-md pl-2 pr-2 mr-4"},Fe={key:0},je={class:"mt-4 flex"},Ae=t("div",{class:"mr-4"},"支付信息",-1),Je={key:2},Me={key:0,class:"mt-4 flex items-center"},$e=t("div",{class:"mr-4"},"计价规则",-1),ze={key:1,class:"mt-4 flex items-center"},Pe=t("div",{class:"mr-4"},"补差详情",-1),We={key:0,class:"flex mr-2"},Xe={class:"mt-4 flex items-center"},qe=t("div",{class:"mr-4"},"订单状态",-1),Ge={class:"ml-4 font-bold"},He={key:2,class:"mt-4 flex items-center"},Ke=t("div",{class:"mr-4"},"订单备注",-1),Qe={class:"ml-4 font-bold"},Ye={class:"flex items-center mt-4"},Ze={key:0,class:"mr-[28px] p-4 rounded-md statistic-card bg-gradient-to-r from-indigo-50 from-10% via-sky-50 via-10% to-emerald-50 to-10%"},et={class:"font-bold"},tt={class:"flex text-xs text-current"},ot={class:"mr-2"},st={class:"text-current font-bold"},at={key:1,class:"p-4 rounded-md statistic-card bg-gradient-to-r from-indigo-50 from-10% via-sky-50 via-10% to-emerald-50 to-10%"},lt={class:"font-bold"},rt={class:"flex text-xs text-current"},dt={class:"mr-2"},nt={class:"text-current font-bold"},it={class:"mt-2"},ct={class:"flex items-center mb-4"},_t={class:"ml-1 p-2"},ut={key:0},vt={class:"font-bold"},mt={key:1,class:"ml-8"},ft={class:"flex"},pt={class:"mr-2"},yt={class:""},ht={key:0},It={class:"mb-2"},gt={class:"w-[320px]"},Pt=K({__name:"order-edit",emits:["complete"],setup(kt,{expose:U,emit:xt}){const E=u([]);(async()=>{E.value=await(await ue("jhkd_order_status")).data.dictionary})();const k=u(),h=u(!1),L=()=>{h.value=!0},O=async()=>{await ve({order_id:e.value.order_id,order_status:k.value}),h.value=!1},{copy:R,isSupported:T,copied:wt}=Q(),F=f=>{if(console.log("ddddddd"),!T.value){B({message:"当前浏览器不支持一键复制，请手动复制",type:"warning"});return}R(f),B({message:"复制成功",type:"success"})},x=u(!1),C=u(!1),e=u(),b=u(),p=u(),m=u(),y=u(),j=async f=>{const i=await fe(f);b.value=i.data};return U({showDialog:x,setFormData:async(f=null)=>{if(C.value=!0,f){const i=await(await me(f.id)).data;e.value=i,m.value=JSON.parse(e.value.orderInfo.start_address),y.value=JSON.parse(e.value.orderInfo.end_address),e.value.orderInfo.courier_context&&(p.value=JSON.parse(e.value.orderInfo.courier_context)),e.value.orderInfo.delivery_id&&j(e.value.orderInfo.delivery_id)}C.value=!1}}),(f,i)=>{const A=w("DocumentCopy"),V=ee,_=te,J=w("block"),N=oe,M=w("Right"),$=se,z=ae,P=le,W=re,X=de,S=ne,q=ie,G=ce,H=_e;return s(),d(g,null,[r(S,{modelValue:x.value,"onUpdate:modelValue":i[2]||(i[2]=n=>x.value=n),title:"订单详情",width:"50%",class:"diy-dialog-wrap","destroy-on-close":""},{default:a(()=>[e.value?(s(),v(X,{key:0},{default:a(()=>[t("div",null,[t("div",pe,[m.value?(s(),d("div",ye,[he,t("div",Ie,o(e.value.order_money),1)])):l("",!0),m.value?(s(),d("div",ge,[ke,t("div",xe,o(e.value.order_discount_money),1)])):l("",!0)]),t("div",be,[t("div",we,[De,t("span",Ee,o(e.value.order_id),1)]),t("div",Ce,[Ve,t("span",Ne,o(e.value.orderInfo.delivery_id),1),r(V,{class:"ml-2",onClick:i[0]||(i[0]=n=>F(e.value.orderInfo.delivery_id))},{default:a(()=>[r(A)]),_:1})]),t("div",Se,[Be,t("span",Ue,o(e.value.create_time),1)])]),e.value.memberInfo?(s(),d("div",Le,[Oe,t("span",Re,o(e.value.memberInfo.nickname),1),r(_,{class:"ml-2 mr-12"},{default:a(()=>[c(o(e.value.order_from),1)]),_:1}),t("span",Te,o(e.value.orderInfo.goods)+"-"+o(e.value.orderInfo.weight)+"kg-"+o(e.value.orderInfo.long)+"x"+o(e.value.orderInfo.width)+"x"+o(e.value.orderInfo.height)+"cm ",1),e.value.orderInfo.bj_price?(s(),d("div",Fe," 保价："+o(e.value.orderInfo.bj_price),1)):l("",!0)])):l("",!0)]),t("div",je,[Ae,e.value.payInfo.status_name?(s(),v(_,{key:0,class:"mr-4",type:"info"},{default:a(()=>[c(o(e.value.payInfo.status_name),1)]),_:1})):l("",!0),e.value.payInfo.type_name?(s(),v(_,{key:1,class:"mr-4",type:"success"},{default:a(()=>[c(o(e.value.payInfo.type_name),1)]),_:1})):l("",!0),e.value.payInfo.pay_time?(s(),d("div",Je,o(e.value.payInfo.pay_time),1)):l("",!0)]),e.value.orderInfo.price_rule?(s(),d("div",Me,[$e,r(_,{class:"mr-2"},{default:a(()=>[c(" 首重： "+o(e.value.orderInfo.price_rule.start)+"kg;价格:"+o(e.value.orderInfo.price_rule.first)+"元 ",1)]),_:1}),r(_,{class:"mr-2"},{default:a(()=>[c(" 续重： "+o(e.value.orderInfo.price_rule.add)+"元/kg ",1)]),_:1})])):l("",!0),e.value.addorderInfo?(s(),d("div",ze,[Pe,r(_,{class:"mr-2"},{default:a(()=>[c(" 通知次数: "+o(e.value.orderInfo.notice_num)+"次 ",1)]),_:1}),r(_,{class:"mr-2"},{default:a(()=>[c(" 下单重量: "+o(e.value.orderInfo.weight)+"kg ",1)]),_:1}),e.value.addorderInfo?(s(),d("div",We,[t("div",null," 超重: "+o(Math.ceil(e.value.deliveryRealInfo.fee_weight-e.value.orderInfo.weight))+"kg;￥"+o(Math.ceil(e.value.deliveryRealInfo.fee_weight-e.value.orderInfo.weight)*e.value.orderInfo.price_rule.add)+"; ",1),(s(!0),d(g,null,D(e.value.deliveryRealInfo.fee_blockList,(n,I)=>(s(),v(J,null,{default:a(()=>[t("div",null,o(n.name)+":"+o(n.fee)+"元;",1)]),_:2},1024))),256)),r(_,{class:"mr-2",type:"error"},{default:a(()=>[c(" 需补金额： "+o(e.value.addorderInfo.order_money)+"元 ",1)]),_:1})])):l("",!0)])):l("",!0),t("div",Xe,[qe,r(_,{class:"mr-2"},{default:a(()=>[c(o(e.value.order_status_arr.name),1)]),_:1}),e.value.is_send==1?(s(),v(_,{key:0},{default:a(()=>[c(" 已发单 ")]),_:1})):l("",!0),e.value.is_send==0?(s(),v(_,{key:1,type:"info"},{default:a(()=>[c(" 未发单 ")]),_:1})):l("",!0),t("span",Ge,o(e.value.close_reason),1),r(N,{class:"ml-4",onClick:i[1]||(i[1]=n=>L())},{default:a(()=>[c("更改状态")]),_:1})]),e.value.remark?(s(),d("div",He,[Ke,t("span",Qe,o(e.value.remark),1)])):l("",!0),t("div",Ye,[m.value?(s(),d("div",Ze,[t("div",et,o(m.value.address),1),t("div",null,o(m.value.full_address),1),t("div",tt,[t("div",ot,o(m.value.name),1),t("div",st,o(m.value.mobile),1)])])):l("",!0),r(V,{class:"mr-[28px]",size:"28"},{default:a(()=>[r(M)]),_:1}),y.value?(s(),d("div",at,[t("div",lt,o(y.value.address),1),t("div",null,o(y.value.full_address),1),t("div",rt,[t("div",dt,o(y.value.name),1),t("div",nt,o(y.value.mobile),1)])])):l("",!0)]),b.value?(s(),v($,{key:3,class:"mt-4","content-position":"left"},{default:a(()=>[c("轨迹跟踪")]),_:1})):l("",!0),t("div",it,[t("div",ct,[e.value&&e.value.orderInfo&&e.value.orderInfo.delivery_arry&&e.value.orderInfo.delivery_arry.logo?(s(),v(z,{key:0,src:Y(Z)(e.value.orderInfo.delivery_arry.logo)},null,8,["src"])):l("",!0),t("div",_t,[e.value&&e.value.orderInfo&&e.value.orderInfo.delivery_arry?(s(),d("div",ut,o(e.value.orderInfo.delivery_arry.name),1)):l("",!0),t("div",vt,o(e.value.orderInfo.delivery_id),1)]),p.value?(s(),d("div",mt,[t("div",ft,[t("div",pt,"揽件员:"+o(p.value.courierName),1),t("div",yt,"联系电话:"+o(p.value.courierPhone),1)]),p.value.pickUpCode?(s(),d("div",ht," 取件码:"+o(p.value.pickUpCode),1)):l("",!0)])):l("",!0),r(_,{class:"ml-8 font-bold"},{default:a(()=>[c(o(e.value.orderInfo.order_status_desc?e.value.orderInfo.order_status_desc:"未取件"),1)]),_:1})]),r(W,null,{default:a(()=>[(s(!0),d(g,null,D(b.value,(n,I)=>(s(),v(P,{key:I,timestamp:n.time},{default:a(()=>[c(o(n.desc),1)]),_:2},1032,["timestamp"]))),128))]),_:1})])]),_:1})):l("",!0)]),_:1},8,["modelValue"]),r(S,{modelValue:h.value,"onUpdate:modelValue":i[5]||(i[5]=n=>h.value=n),title:"更改状态",width:"400"},{default:a(()=>[t("div",It,[r(q,{type:"info",title:"这里更改状态仅更新订单状态，不会有额外操作，请谨慎修改",closable:!1,"show-icon":""})]),t("div",gt,[r(H,{modelValue:k.value,"onUpdate:modelValue":i[3]||(i[3]=n=>k.value=n),placeholder:"请选择订单状态"},{default:a(()=>[(s(!0),d(g,null,D(E.value,(n,I)=>(s(),v(G,{key:I,label:n.name,value:n.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),r(N,{type:"primary",onClick:i[4]||(i[4]=n=>O()),class:"mt-4"},{default:a(()=>[c("确定")]),_:1})]),_:1},8,["modelValue"])],64)}}});export{Pt as _};
