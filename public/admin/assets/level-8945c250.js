import{d as L,f as S,r as E,h as V,c as U,R as N,s as k,w as a,e as l,a as u,t as _,u as t,q as o,i as f,c9 as w,U as T,au as M,av as I,L as K,ad as j,K as $,ae as q,a7 as z,M as G,E as O,Y}from"./index-99f00cf3.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css               */import"./el-form-item-4ed993c7.js";/* empty css                       *//* empty css                 */import{g as A,s as H}from"./team-3aa0e21a.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";const P={class:"main-container"},Q={class:"text text-[14px] leading-[25px]"},W={class:"fixed-footer-wrap"},X={class:"fixed-footer"},Z=L({__name:"level",setup(ee){S();const v=E(!1),i=E({is_open:"0",level:[],loading:!1}),b=()=>{v.value=!0,A().then(e=>{i.value.is_open=e.data.is_open.toString(),i.value.level=e.data.level,v.value=!1})};b();const h=(e,s,m)=>{const d=/^([1-9]\d*|0)(\.\d+)?$|^0\.(?!0+\b)\d+(\d*[1-9])?$/;if(!e)return!1;e=Number(e),d.test(e)||(T.error(o("teamTips")),e=0),parseFloat(e)>100&&(T.error(o("teamTipsNumericalRange")),e=100),i.value.level.forEach((p,c)=>{p.level_id==m.level_id&&(p[s]=parseFloat(e).toFixed(2))})};let g=!1;const y=()=>{let e={};if(e.is_open=i.value.is_open,e.level=[],i.value.level.forEach((s,m)=>{let d={};d.level_id=s.level_id,d.team_rate=s.team_rate,d.team_flat_rate=s.team_flat_rate,e.level.push(d)}),g)return!1;g=!0,H(e).then(s=>{b(),g=!1})};return(e,s)=>{const m=M,d=I,p=K,c=j,x=$,R=q,C=z,B=G,D=O,F=Y;return V(),U("div",P,[N((V(),k(C,{class:"card !border-none",shadow:"never"},{default:a(()=>[l(B,{class:"page-form",model:e.formData,"label-width":"180px",rules:e.formRules,ref:"formRef"},{default:a(()=>[u("div",Q,_(t(o)("baseTitle")),1),l(C,{class:"card !border-none",shadow:"never"},{default:a(()=>[l(p,{label:t(o)("isEnable")},{default:a(()=>[l(d,{modelValue:i.value.is_open,"onUpdate:modelValue":s[0]||(s[0]=n=>i.value.is_open=n)},{default:a(()=>[l(m,{label:"1"},{default:a(()=>[f(_(t(o)("are")),1)]),_:1}),l(m,{label:"0"},{default:a(()=>[f(_(t(o)("no")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(p,{label:t(o)("teamLevel")},{default:a(()=>[l(R,{data:i.value.level,size:"large",ref:"goodsListTableRef",onSelectionChange:e.handleSelectionChange},{empty:a(()=>[u("span",null,_(t(o)("emptyData")),1)]),default:a(()=>[l(c,{prop:"level_name",label:t(o)("fenxiaoLevel"),"min-width":"200"},{default:a(({row:n})=>[u("div",null,_(n.level_name),1)]),_:1},8,["label"]),l(c,{prop:"team_rate",label:t(o)("bonus"),"min-width":"200"},{default:a(({row:n})=>[l(x,{modelValue:n.team_rate,"onUpdate:modelValue":r=>n.team_rate=r,modelModifiers:{trim:!0},maxlength:"6","show-word-limit":"",onChange:r=>h(r,"team_rate",n),clearable:"",class:"!w-[180px]",onKeyup:s[1]||(s[1]=r=>t(w)(r)),placeholder:t(o)("setBonus")},{append:a(()=>[f("%")]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","placeholder"])]),_:1},8,["label"]),l(c,{prop:"team_flat_rate",label:t(o)("bonus_flat"),"min-width":"300"},{default:a(({row:n})=>[l(x,{modelValue:n.team_flat_rate,"onUpdate:modelValue":r=>n.team_flat_rate=r,modelModifiers:{trim:!0},maxlength:"6","show-word-limit":"",onChange:r=>h(r,"team_flat_rate",n),clearable:"",class:"!w-[180px]",onKeyup:s[2]||(s[2]=r=>t(w)(r)),placeholder:t(o)("setBonus")},{append:a(()=>[f("%")]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","placeholder"])]),_:1},8,["label"])]),_:1},8,["data","onSelectionChange"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model","rules"])]),_:1})),[[F,v.value]]),u("div",W,[u("div",X,[l(D,{type:"primary",onClick:y},{default:a(()=>[f(_(t(o)("save")),1)]),_:1})])])])}}});const he=J(Z,[["__scopeId","data-v-4047202f"]]);export{he as default};
