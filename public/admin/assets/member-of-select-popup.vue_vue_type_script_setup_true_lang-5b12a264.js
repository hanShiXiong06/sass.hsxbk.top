import{d as T,r as v,n as L,h as p,c as b,e as o,w as l,i as c,t as i,u as r,q as n,B as y,Z as R,R as j,s as k,a as g,A as q,a3 as A,U as K,K as W,L as X,E as Y,M as Z,ad as G,ae as H,W as J,X as O,Y as Q}from"./index-99f00cf3.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                  */import"./el-form-item-4ed993c7.js";import{_ as ee}from"./member_head-d9fd7b2c.js";import{f as te}from"./fenxiao-da4aead7.js";const ae={class:"flex items-center"},le=["src"],oe={key:1,class:"w-[50px] h-[50px] mr-[10px] rounded-full",src:ee,alt:""},re={class:"flex flex flex-col"},ne={class:"mt-[16px] flex justify-end"},se={key:0,class:"dialog-footer"},Se=T({__name:"member-of-select-popup",props:{title:{type:String,default:""},max:{type:Number,default:1}},emits:["load"],setup(V,{expose:P,emit:C}){const d=V,m=v(!1),e=L({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{search:""}}),u=(s=1)=>{e.loading=!0,e.page=s;const t=A(e.searchParam);te({page:e.page,limit:e.limit,...t}).then(_=>{e.loading=!1,e.data=_.data.data,e.total=_.data.total}).catch(()=>{e.loading=!1})};let w=v();const D=s=>{s&&(e.searchParam.search="",u())};let x=v([]);const S=s=>{x.value=s},M=s=>{u(),m.value=!0},z=()=>{if(x.value.length>d.max){K.error(`最多选择${d.max}个会员`);return}C("load",x.value),m.value=!1},B=s=>{C("load",s),m.value=!1};return P({showDialog:m,show:M}),(s,t)=>{const _=W,E=X,f=Y,F=Z,h=G,N=H,$=J,U=O,I=Q;return p(),b("div",null,[o(U,{modelValue:m.value,"onUpdate:modelValue":t[8]||(t[8]=a=>m.value=a),title:d.title,width:"800px","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1},{footer:l(()=>[d.max>1?(p(),b("span",se,[o(f,{onClick:t[7]||(t[7]=a=>m.value=!1)},{default:l(()=>[c(i(r(n)("cancel")),1)]),_:1}),o(f,{type:"primary",onClick:z},{default:l(()=>[c(i(r(n)("confirm")),1)]),_:1})])):y("",!0)]),default:l(()=>[o(F,{inline:!0,model:e.searchParam,ref_key:"searchFormRef",ref:w,onSubmit:t[3]||(t[3]=R(()=>{},["prevent"]))},{default:l(()=>[o(E,{label:r(n)("memberInfo")},{default:l(()=>[o(_,{modelValue:e.searchParam.search,"onUpdate:modelValue":t[0]||(t[0]=a=>e.searchParam.search=a),modelModifiers:{trim:!0},placeholder:r(n)("memberNamePlaceholder"),maxlength:"60"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(E,null,{default:l(()=>[o(f,{type:"primary",onClick:t[1]||(t[1]=a=>u())},{default:l(()=>[c(i(r(n)("search")),1)]),_:1}),o(f,{onClick:t[2]||(t[2]=a=>D(r(w)))},{default:l(()=>[c(i(r(n)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"]),j((p(),k(N,{data:e.data,size:"large","max-height":"400",onSelectionChange:S},{empty:l(()=>[g("span",null,i(e.loading?"":r(n)("emptyData")),1)]),default:l(()=>[d.max>1?(p(),k(h,{key:0,type:"selection",width:"55"})):y("",!0),o(h,{prop:"nickname","show-overflow-tooltip":!0,label:r(n)("memberInfo"),"min-width":"170"},{default:l(({row:a})=>[g("div",ae,[a.member.headimg?(p(),b("img",{key:0,class:"w-[50px] h-[50px] mr-[10px]",src:r(q)(a.member.headimg),alt:""},null,8,le)):(p(),b("img",oe)),g("div",re,[g("span",null,i(a.member.nickname||a.member.username||""),1)])])]),_:1},8,["label"]),o(h,{prop:"mobile",label:r(n)("mobile"),"min-width":"120"},{default:l(({row:a})=>[c(i(a.member.mobile),1)]),_:1},8,["label"]),d.max==1?(p(),k(h,{key:1,label:r(n)("operation"),fixed:"right",align:"right"},{default:l(({row:a})=>[o(f,{type:"primary",onClick:ie=>B(a)},{default:l(()=>[c(i(r(n)("select")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])):y("",!0)]),_:1},8,["data"])),[[I,e.loading]]),g("div",ne,[o($,{"current-page":e.page,"onUpdate:current-page":t[4]||(t[4]=a=>e.page=a),"page-size":e.limit,"onUpdate:page-size":t[5]||(t[5]=a=>e.limit=a),layout:"total, sizes, prev, pager, next, jumper",total:e.total,onSizeChange:t[6]||(t[6]=a=>u()),onCurrentChange:u},null,8,["current-page","page-size","total"])])]),_:1},8,["modelValue","title"])])}}});export{Se as _};
