import{d as I,r as v,n as R,h as c,c as y,e as o,w as l,i as u,t as r,u as s,q as n,B as k,Z as q,R as A,s as x,a as i,A as G,a3 as J,a$ as K,U as O,K as W,L as X,E as Y,M as Z,ad as H,J as Q,ae as ee,W as te,X as ae,Y as le}from"./index-99f00cf3.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css                        *//* empty css                        *//* empty css                *//* empty css                  */import"./el-form-item-4ed993c7.js";import{_ as S}from"./member_head-d9fd7b2c.js";import{g as oe}from"./fenxiao-da4aead7.js";const se={class:"flex items-center cursor-pointer"},ne={class:"min-w-[50px] h-[50px] flex items-center justify-center"},ie=i("div",{class:"image-slot"},[i("img",{class:"w-[50px] h-[50px] rounded-full",src:S,alt:""})],-1),re={key:1,class:"w-[50px] h-[50px] rounded-full",src:S,alt:""},me={class:"ml-2"},pe=["title"],de={class:"text-primary text-[12px]"},ce={class:"cursor-pointer price-wrap"},ue={class:"mt-[16px] flex justify-end"},_e={key:0,class:"dialog-footer"},we=I({__name:"fenxiao-of-select-popup",props:{title:{type:String,default:""},max:{type:Number,default:1},params:{type:Object,default:()=>({is_agent:"all"})}},emits:["load"],setup(D,{expose:N,emit:C}){const p=D,d=v(!1),t=R({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{search:""}}),_=(m=1)=>{t.loading=!0,t.page=m;const a=J(t.searchParam);oe({page:t.page,limit:t.limit,...p.params,...a}).then(h=>{t.loading=!1,t.data=h.data.data,t.total=h.data.total}).catch(()=>{t.loading=!1})};let E=v();const P=m=>{m&&(t.searchParam.search="",_())};let b=v([]);const F=m=>{b.value=m},L=m=>{K(()=>{_(),d.value=!0})},$=()=>{if(b.value.length>p.max){O.error(`最多选择${p.max}个分销商`);return}C("load",b.value),d.value=!1},z=m=>{C("load",m),d.value=!1};return N({showDialog:d,show:L}),(m,a)=>{const h=W,V=X,f=Y,B=Z,g=H,T=Q,U=ee,j=te,w=ae,M=le;return c(),y("div",null,[o(w,{modelValue:d.value,"onUpdate:modelValue":a[8]||(a[8]=e=>d.value=e),title:p.title,width:"800px","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1},{footer:l(()=>[p.max>1?(c(),y("span",_e,[o(f,{onClick:a[7]||(a[7]=e=>d.value=!1)},{default:l(()=>[u(r(s(n)("cancel")),1)]),_:1}),o(f,{type:"primary",onClick:$},{default:l(()=>[u(r(s(n)("confirm")),1)]),_:1})])):k("",!0)]),default:l(()=>[o(B,{inline:!0,model:t.searchParam,ref_key:"searchFormRef",ref:E,onSubmit:a[3]||(a[3]=q(()=>{},["prevent"]))},{default:l(()=>[o(V,{label:s(n)("fenxiaoName")},{default:l(()=>[o(h,{modelValue:t.searchParam.search,"onUpdate:modelValue":a[0]||(a[0]=e=>t.searchParam.search=e),modelModifiers:{trim:!0},placeholder:s(n)("fenxiaoNamePlaceholder"),maxlength:"60"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(V,null,{default:l(()=>[o(f,{type:"primary",onClick:a[1]||(a[1]=e=>_())},{default:l(()=>[u(r(s(n)("search")),1)]),_:1}),o(f,{onClick:a[2]||(a[2]=e=>P(s(E)))},{default:l(()=>[u(r(s(n)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"]),A((c(),x(U,{data:t.data,size:"large","max-height":"400",onSelectionChange:F},{empty:l(()=>[i("span",null,r(t.loading?"":s(n)("emptyData")),1)]),default:l(()=>[p.max>1?(c(),x(g,{key:0,type:"selection",width:"55"})):k("",!0),o(g,{prop:"goods_id",label:s(n)("fenxiaoName"),"min-width":"200"},{default:l(({row:e})=>[i("div",se,[i("div",ne,[e.member&&e.member.headimg?(c(),x(T,{key:0,class:"w-[50px] h-[50px]",src:s(G)(e.member.headimg),fit:"contain"},{error:l(()=>[ie]),_:2},1032,["src"])):(c(),y("img",re))]),i("div",me,[i("span",{title:e.member&&e.member.nickname||e.member&&e.member.username,class:"multi-hidden"},r(e.member&&e.member.nickname||e.member&&e.member.username),9,pe),i("span",de,r(e.member&&e.member.mobile),1)])])]),_:1},8,["label"]),o(g,{label:s(n)("fenxiaoLevel"),"min-width":"120"},{default:l(({row:e})=>[i("div",ce,[i("span",null,r(e.fenxiaoLevel?e.fenxiaoLevel.level_name:"--"),1)])]),_:1},8,["label"]),o(g,{prop:"sort",label:s(n)("currentState"),"min-width":"100"},{default:l(({row:e})=>[u(r(e.status_name),1)]),_:1},8,["label"]),p.max==1?(c(),x(g,{key:1,label:s(n)("operation"),fixed:"right",align:"right"},{default:l(({row:e})=>[o(f,{type:"primary",onClick:fe=>z(e)},{default:l(()=>[u(r(s(n)("select")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])):k("",!0)]),_:1},8,["data"])),[[M,t.loading]]),i("div",ue,[o(j,{"current-page":t.page,"onUpdate:current-page":a[4]||(a[4]=e=>t.page=e),"page-size":t.limit,"onUpdate:page-size":a[5]||(a[5]=e=>t.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:t.total,onSizeChange:a[6]||(a[6]=e=>_()),onCurrentChange:_},null,8,["current-page","page-size","total"])])]),_:1},8,["modelValue","title"])])}}});export{we as _};
