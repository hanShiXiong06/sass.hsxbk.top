import{d as fe,x as ve,f as be,r as h,n as T,a2 as xe,R as S,h as c,c as v,e as a,w as e,u as n,aQ as ge,s as x,a as t,t as d,q as s,A as Y,B as k,d3 as g,v as K,i as Z,F as he,T as ke,a5 as ye,U as ee,aR as we,a7 as Fe,J as Ce,L as Ee,aN as Le,a1 as Te,aO as ze,M as De,ay as Pe,az as Se,ad as Ve,ae as $e,W as Be,ac as Ne,aD as Re,E as je,X as Ue,Y as Oe,a3 as Ie}from"./index-99f00cf3.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                      *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                    *//* empty css                *//* empty css               *//* empty css               */import"./el-form-item-4ed993c7.js";/* empty css                 *//* empty css                        *//* empty css                *//* empty css                   *//* empty css                       */import{_ as z}from"./member_head-d9fd7b2c.js";import{c as Ae,a as Me,b as qe,e as Ge}from"./fenxiao-da4aead7.js";import{g as He}from"./level-0d08fb21.js";import{_ as Je}from"./fenxiao-of-select-popup.vue_vue_type_script_setup_true_lang-bbc80cb8.js";const Qe={class:"main-container"},We={class:"text text-[14px] leading-[25px]"},Xe={class:"flex px-[30px] mt-[20px] mb-[20px]"},Ye={class:"input-width"},Ke=t("div",{class:"image-slot"},[t("img",{class:"w-[70px] h-[70px] rounded-full",src:z,alt:""})],-1),Ze={key:1,class:"w-[70px] h-[70px] rounded-full",src:z,alt:""},ea={class:"input-width"},aa=["title"],ta=["title"],la={class:"input-width"},na={class:"input-width"},oa={class:"text text-[14px] leading-[25px]"},sa={class:"flex px-[30px] mt-[20px] mb-[20px]"},ia={class:"input-width"},da={class:"input-width"},ra={class:"input-width"},ma={class:"input-width"},ca={class:"input-width"},pa={class:"input-width"},ua={class:"input-width"},_a={class:"input-width"},fa={key:0},va={class:"mt-[16px] flex justify-end"},ba={key:1},xa={class:"flex mb-[10px] text-[14px]"},ga={class:"flex items-center"},ha={class:"min-w-[50px] h-[50px] flex items-center justify-center"},ka=t("div",{class:"image-slot"},[t("img",{class:"w-[50px] h-[50px] rounded-full",src:z,alt:""})],-1),ya={key:1,class:"w-[50px] h-[50px] rounded-full",src:z,alt:""},wa={class:"ml-2"},Fa=["title"],Ca=["title"],Ea={class:"text-[12px]"},La={class:"mt-[16px] flex justify-end"},Ta={class:"dialog-footer"},it=fe({__name:"detail",setup(za){const V=ve(),ae=be(),te=V.meta.title,r=h({}),C=h(!1),p=T({page:1,limit:10,total:0,loading:!1,data:[]}),m=T({page:1,limit:10,total:0,loading:!1,data:[],searchParam:{type:"direct"}}),$=i=>{C.value=!0,Ae(i).then(o=>{r.value=o.data,C.value=!1}).catch(()=>{C.value=!1})},E=Number(V.query.id);$(E);const D=()=>{p.loading=!0,Me({page:p.page,limit:p.limit,id:E}).then(i=>{p.data=i.data.data,p.total=i.data.total,p.loading=!1}).catch(()=>{p.loading=!1})};D();const L=(i=1)=>{m.loading=!0,m.page=i,qe({page:m.page,limit:m.limit,...m.searchParam,id:E}).then(o=>{m.data=o.data.data,m.total=o.data.total,m.loading=!1}).catch(()=>{m.loading=!1})};L();const y=h("commission"),le=i=>{y.value=i},B=i=>{m.searchParam.type=i,L()},N=T({not_in:r.parent,is_agent:"all"}),R=()=>{const i=Ie(r.value);f.id=i.member_id,f.level_id=i.level_id,f.parent=i.parent,N.not_in=i.child_ids?[i.parent,i.member_id,...i.child_ids]:[i.parent,i.member_id],f.status=i.status},j=h(),ne=i=>{var o;R(),(o=j.value)==null||o.show()},oe=i=>{f.parent=i.member.member_id,f.parent_name=i.member.nickname,ye.confirm(s("editSupFenxiaoTip"),s("warning"),{confirmButtonText:s("confirm"),cancelButtonText:s("cancel"),type:"warning"}).then(()=>{I()})},U=h([]),f=T({id:0,level_id:null,parent:null,status:1}),O=(i=!1)=>{He({page:1,limit:11}).then(o=>{U.value=o.data.data,i&&ee({message:s("refreshSuccess"),type:"success"})})};O();const w=h(!1),se=i=>{R(),w.value=!0},ie=()=>{if(w.value=!1,!f.level_id){ee.error(s("fenxiaoLevelPlaceholder"));return}I()},I=()=>{Ge(f).then(()=>{$(E)})},de=()=>{const i=ae.resolve("/shop_fenxiao/management/level");window.open(i.href,"_blank")};return(i,o)=>{const re=we,F=Fe,A=Ce,u=Ee,_=Le,M=xe("EditPen"),q=Te,G=ze,me=De,H=Pe,ce=Se,b=Ve,J=$e,Q=Be,pe=Ne,ue=Re,W=je,_e=Ue,P=Oe;return S((c(),v("div",Qe,[a(F,{class:"card !border-none",shadow:"never"},{default:e(()=>[a(re,{content:n(te),icon:n(ge),onBack:o[0]||(o[0]=l=>i.$router.back())},null,8,["content","icon"])]),_:1}),a(F,{class:"card mt-[15px] !border-none",shadow:"never"},{default:e(()=>[Object.keys(r.value).length?(c(),x(me,{key:0,class:"page-form",model:r.value,"label-width":"100px",ref:"formRef","label-position":"left"},{default:e(()=>[r.value?(c(),x(F,{key:0,class:"card !border-none",shadow:"never"},{default:e(()=>[t("div",We,d(n(s)("baseInfo")),1),t("div",Xe,[a(G,null,{default:e(()=>[a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("logo")},{default:e(()=>[t("div",Ye,[r.value.member.headimg?(c(),x(A,{key:0,class:"w-[70px] h-[70px]",src:n(Y)(r.value.member.headimg),fit:"contain"},{error:e(()=>[Ke]),_:1},8,["src"])):(c(),v("img",Ze))])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("nickname")},{default:e(()=>[t("div",ea,[r.value.member.nickname?(c(),v("span",{key:0,title:r.value.member.nickname,class:"multi-hidden"},d(r.value.member.nickname),9,aa)):(c(),v("span",{key:1,title:r.value.member.nickname,class:"multi-hidden"},d(r.value.member.username),9,ta))])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("mobile")},{default:e(()=>[t("div",la,[t("span",null,d(r.value.member.mobile),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("fenxiaoNo")},{default:e(()=>[t("div",na,[t("span",null,d(r.value.fenxiao_no),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("fenxiaoLevel")},{default:e(()=>[t("div",{class:"cursor-pointer price-wrap input-width",onClick:o[1]||(o[1]=l=>se(i.row))},[t("span",null,d(r.value.fenxiaoLevel.level_name||"--"),1),a(q,{class:"ml-[5px]",size:14},{default:e(()=>[a(M)]),_:1})])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("supFenxiao")},{default:e(()=>{var l,X;return[t("div",{class:"cursor-pointer price-wrap input-width",onClick:o[2]||(o[2]=Da=>ne(i.row))},[t("span",null,d(((l=r.value.parentFenxiao)==null?void 0:l.nickname)||((X=r.value.parentFenxiao)==null?void 0:X.username)||"无"),1),a(q,{class:"ml-[5px]",size:14},{default:e(()=>[a(M)]),_:1})])]}),_:1},8,["label"])]),_:1})]),_:1})])]),_:1})):k("",!0),r.value?(c(),x(F,{key:1,class:"card !border-none",shadow:"never"},{default:e(()=>[t("div",oa,d(n(s)("accountStatistics")),1),t("div",sa,[a(G,null,{default:e(()=>[a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("commission")},{default:e(()=>[t("div",ia,[t("span",null,d(n(g)(r.value.member.commission)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("commissionGet")},{default:e(()=>[t("div",da,[t("span",null,d(n(g)(r.value.member.commission_get)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("taking")},{default:e(()=>[t("div",ra,[t("span",null,d(n(g)(r.value.member.commission_cash_outing)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("distributionCommission")},{default:e(()=>[t("div",ma,[t("span",null,d(n(g)(r.value.fenxiao_commission)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("agentCommission")},{default:e(()=>[t("div",ca,[t("span",null,d(n(g)(r.value.agent_commission)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("reward")},{default:e(()=>[t("div",pa,[t("span",null,d(n(g)(r.value.sale_commission)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("teamDividends")},{default:e(()=>[t("div",ua,[t("span",null,d(n(g)(r.value.team_commission)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("taskRewards")},{default:e(()=>[t("div",_a,[t("span",null,d(n(g)(r.value.task_commission)),1)])]),_:1},8,["label"])]),_:1})]),_:1})])]),_:1})):k("",!0)]),_:1},8,["model"])):k("",!0),Object.keys(r.value).length?(c(),x(F,{key:1,class:"card !border-none",shadow:"never"},{default:e(()=>[a(ce,{modelValue:y.value,"onUpdate:modelValue":o[3]||(o[3]=l=>y.value=l),onTabChange:le},{default:e(()=>[a(H,{label:"佣金账户",name:"commission"}),a(H,{label:"团队信息",name:"team"})]),_:1},8,["modelValue"]),y.value=="commission"?(c(),v("div",fa,[S((c(),x(J,{data:p.data,size:"large"},{empty:e(()=>[t("span",null,d(p.loading?"":n(s)("emptyData")),1)]),default:e(()=>[a(b,{label:n(s)("accountMoney"),"min-width":"120"},{default:e(({row:l})=>[t("div",null,d(l.account_data),1)]),_:1},8,["label"]),a(b,{label:n(s)("source"),"min-width":"120"},{default:e(({row:l})=>[t("div",null,d(l.from_type_name),1)]),_:1},8,["label"]),a(b,{label:n(s)("accountSum"),"min-width":"120"},{default:e(({row:l})=>[t("div",null,d(l.account_sum),1)]),_:1},8,["label"]),a(b,{prop:"create_time",label:n(s)("createTime"),"min-width":"120"},null,8,["label"]),a(b,{prop:"memo",label:n(s)("memo"),"min-width":"120"},null,8,["label"])]),_:1},8,["data"])),[[P,p.loading]]),t("div",va,[a(Q,{"current-page":p.page,"onUpdate:current-page":o[4]||(o[4]=l=>p.page=l),"page-size":p.limit,"onUpdate:page-size":o[5]||(o[5]=l=>p.limit=l),layout:"total, sizes, prev, pager, next, jumper",total:p.total,onSizeChange:o[6]||(o[6]=l=>D()),onCurrentChange:D},null,8,["current-page","page-size","total"])])])):k("",!0),y.value=="team"?(c(),v("div",ba,[t("div",xa,[t("span",{class:K(["px-[30px] py-[10px] border-[1px] border-solid border-[#f1f1f1] cursor-pointer",{"bg-[#F2F3F5] text-primary":m.searchParam.type=="direct"}]),onClick:o[7]||(o[7]=l=>B("direct"))},"直推",2),t("span",{class:K(["px-[30px] py-[10px] border-[1px] border-solid border-[#f1f1f1] cursor-pointer",{"bg-[#F2F3F5] text-primary":m.searchParam.type=="indirect"}]),onClick:o[8]||(o[8]=l=>B("indirect"))},"间推",2)]),S((c(),x(J,{data:m.data,size:"large"},{empty:e(()=>[t("span",null,d(m.loading?"":n(s)("emptyData")),1)]),default:e(()=>[a(b,{label:n(s)("accountInfo"),"min-width":"120"},{default:e(({row:l})=>[t("div",ga,[t("div",ha,[l.headimg&&l.headimg?(c(),x(A,{key:0,class:"w-[50px] h-[50px]",src:n(Y)(l.headimg),fit:"contain"},{error:e(()=>[ka]),_:2},1032,["src"])):(c(),v("img",ya))]),t("div",wa,[l.nickname?(c(),v("span",{key:0,title:l.nickname,class:"multi-hidden"},d(l.nickname),9,Fa)):(c(),v("span",{key:1,title:l.nickname,class:"multi-hidden"},d(l.username),9,Ca)),t("span",Ea,d(l.mobile?l.mobile:"--"),1)])])]),_:1},8,["label"]),a(b,{label:n(s)("isFenxiao"),"min-width":"150"},{default:e(({row:l})=>[t("div",null,d(Object.keys(l.fenxiao).length?"是":"否"),1)]),_:1},8,["label"]),a(b,{label:n(s)("type"),"min-width":"150"},{default:e(({row:l})=>[t("div",null,d(l.is_direct?"直推":"间推"),1)]),_:1},8,["label"]),a(b,{label:n(s)("addTime"),"min-width":"150"},{default:e(({row:l})=>[t("div",null,d(l.fenxiao.create_time?l.fenxiao.create_time:"--"),1)]),_:1},8,["label"])]),_:1},8,["data"])),[[P,m.loading]]),t("div",La,[a(Q,{"current-page":m.page,"onUpdate:current-page":o[9]||(o[9]=l=>m.page=l),"page-size":m.limit,"onUpdate:page-size":o[10]||(o[10]=l=>m.limit=l),layout:"total, sizes, prev, pager, next, jumper",total:m.total,onSizeChange:o[11]||(o[11]=l=>L()),onCurrentChange:L},null,8,["current-page","page-size","total"])])])):k("",!0)]),_:1})):k("",!0)]),_:1}),a(_e,{modelValue:w.value,"onUpdate:modelValue":o[15]||(o[15]=l=>w.value=l),title:n(s)("editFenxiaoLevelTitle"),width:"470px","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1},{footer:e(()=>[t("span",Ta,[a(W,{onClick:o[14]||(o[14]=l=>w.value=!1)},{default:e(()=>[Z(d(n(s)("cancel")),1)]),_:1}),a(W,{type:"primary",onClick:ie},{default:e(()=>[Z(d(n(s)("confirm")),1)]),_:1})])]),default:e(()=>[t("div",null,[a(u,{label:n(s)("fenxiaoLevel")},{default:e(()=>[a(ue,{modelValue:f.level_id,"onUpdate:modelValue":o[12]||(o[12]=l=>f.level_id=l),class:"input-width",clearable:"",placeholder:n(s)("fenxiaoLevelPlaceholder")},{default:e(()=>[(c(!0),v(he,null,ke(U.value,l=>(c(),x(pe,{key:l.value,label:l.level_name,value:l.level_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),t("span",{class:"text-[var(--el-color-primary)] ml-[10px] cursor-pointer",onClick:o[13]||(o[13]=l=>O(!0))},"刷新"),t("span",{class:"text-[var(--el-color-primary)] ml-[10px] cursor-pointer",onClick:de},"添加等级")]),_:1},8,["label"])])]),_:1},8,["modelValue","title"]),a(Je,{title:n(s)("editSupFenxiaoTitle"),ref_key:"fenxiaoOfSelectPopupRef",ref:j,params:N,onLoad:oe},null,8,["title","params"])])),[[P,C.value]])}}});export{it as default};
