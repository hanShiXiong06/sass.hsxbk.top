import{d as J,x as Q,r as p,n as Z,a2 as ee,h as _,c as F,a as s,e as t,w as l,t as f,u as a,q as n,i,F as O,T as te,s as k,R as ae,B as U,a5 as oe,K as le,ab as re,aC as ne,L as de,bO as se,E as ie,M as me,a7 as pe,ac as ue,ak as ce,a1 as _e,ad as fe,W as ve,X as he,Y as be}from"./index-a3bdc7eb.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                *//* empty css                  *//* empty css                       */import"./el-form-item-4ed993c7.js";import{u as ge}from"./dict-712f00e1.js";import{o as we,p as ke,q as ye,t as xe,b as Ve}from"./order-d5bfa42c.js";import{_ as Ce}from"./orderadd-edit.vue_vue_type_style_index_0_lang-f7c731c4.js";import{_ as Ee}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                         *//* empty css                  *//* empty css                   *//* empty css                   */const De={class:"main-container"},Pe={class:"flex justify-between items-center"},Le={class:"text-[20px]"},Te={class:"mt-2 mb-2 ml-4"},Be={class:"mt-[10px]"},Fe={class:"mt-[16px] flex justify-end"},Oe={class:""},Ue={class:"mt-[24px]"},$e=J({__name:"orderadd",setup(Ae){const $=Q().meta.title,C=p(),A=d=>{C.value=d,g.value=d.remark,b.value=!0},b=p(!1),g=p(""),I=async()=>{await ke({id:C.value.id,remark:g.value}),b.value=!1,m()};let r=Z({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{member_id:"",order_id:"",order_status:"",create_time:[]}});const E=p();p([]);const z=p([]);(async()=>{z.value=await(await ge("jhkd_order_status")).data.dictionary})();const m=(d=1)=>{r.loading=!0,r.page=d,ye({page:r.page,limit:r.limit,...r.searchParam}).then(o=>{r.loading=!1,r.data=o.data.data,r.total=o.data.total}).catch(()=>{r.loading=!1})};m();const y=p(null),M=d=>{y.value.setFormData(d),y.value.showDialog=!0},N=d=>{oe.confirm(n("orderAddDeleteTips"),n("warning"),{confirmButtonText:n("confirm"),cancelButtonText:n("cancel"),type:"warning"}).then(()=>{xe(d).then(()=>{m()}).catch(()=>{})})},R=()=>{P(),m()},x=p(),D=p([]),P=async()=>{D.value=await(await Ve({keyword:x.value})).data.data};P();const S=d=>{d&&(d.resetFields(),m())};return(d,o)=>{const V=le,w=re,L=ne,v=de,Y=se,c=ie,j=me,T=pe,u=ue,B=ce,q=ee("EditPen"),W=_e,K=fe,X=ve,G=he,H=be;return _(),F(O,null,[s("div",De,[t(T,{class:"box-card !border-none",shadow:"never"},{default:l(()=>[s("div",Pe,[s("span",Le,f(a($)),1)]),t(T,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:l(()=>[t(j,{inline:!0,model:a(r).searchParam,ref_key:"searchFormRef",ref:E},{default:l(()=>[t(v,{label:"会员",prop:"member_id"},{default:l(()=>[t(L,{class:"input-width",modelValue:a(r).searchParam.member_id,"onUpdate:modelValue":o[1]||(o[1]=e=>a(r).searchParam.member_id=e),clearable:"",placeholder:a(n)("memberIdPlaceholder")},{default:l(()=>[s("div",Te,[t(V,{onChange:R,modelValue:x.value,"onUpdate:modelValue":o[0]||(o[0]=e=>x.value=e),style:{width:"200px"},placeholder:"搜索会员支持昵称/会员名"},{append:l(()=>[i("搜索 ")]),_:1},8,["modelValue"])]),t(w,{label:"请选择",value:""}),(_(!0),F(O,null,te(D.value,(e,h)=>(_(),k(w,{key:h,label:e.nickname,value:e.member_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),t(v,{label:"订单号",prop:"order_id"},{default:l(()=>[t(V,{modelValue:a(r).searchParam.order_id,"onUpdate:modelValue":o[2]||(o[2]=e=>a(r).searchParam.order_id=e),placeholder:a(n)("orderIdPlaceholder")},null,8,["modelValue","placeholder"])]),_:1}),t(v,{label:a(n)("orderStatus"),prop:"order_status"},{default:l(()=>[t(L,{class:"w-[280px]",modelValue:a(r).searchParam.order_status,"onUpdate:modelValue":o[3]||(o[3]=e=>a(r).searchParam.order_status=e),clearable:"",placeholder:a(n)("orderStatusPlaceholder")},{default:l(()=>[t(w,{label:"未支付",value:"0"}),t(w,{label:"已支付",value:"1"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(v,{label:a(n)("createTime"),prop:"create_time"},{default:l(()=>[t(Y,{modelValue:a(r).searchParam.create_time,"onUpdate:modelValue":o[4]||(o[4]=e=>a(r).searchParam.create_time=e),type:"datetimerange",format:"YYYY-MM-DD hh:mm:ss","start-placeholder":a(n)("startDate"),"end-placeholder":a(n)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),t(v,null,{default:l(()=>[t(c,{type:"primary",onClick:o[5]||(o[5]=e=>m())},{default:l(()=>[i(f(a(n)("search")),1)]),_:1}),t(c,{onClick:o[6]||(o[6]=e=>S(E.value))},{default:l(()=>[i(f(a(n)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),s("div",Be,[ae((_(),k(K,{data:a(r).data,size:"large"},{empty:l(()=>[s("span",null,f(a(r).loading?"":a(n)("emptyData")),1)]),default:l(()=>[t(u,{prop:"member_id_name",label:"会员昵称","min-width":"120","show-overflow-tooltip":!0}),t(u,{prop:"order_id",label:"订单号","min-width":"120","show-overflow-tooltip":!0}),t(u,{label:a(n)("orderStatus"),"min-width":"180",align:"center","show-overflow-tooltip":!0},{default:l(({row:e})=>[e.order_status==0?(_(),k(B,{key:0},{default:l(()=>[i("未支付")]),_:1})):U("",!0),e.order_status==1?(_(),k(B,{key:1},{default:l(()=>[i("已支付")]),_:1})):U("",!0)]),_:1},8,["label"]),t(u,{prop:"notice_num",label:"通知次数","min-width":"120","show-overflow-tooltip":!0}),t(u,{prop:"remark",label:"备注","min-width":"120","show-overflow-tooltip":!0},{default:l(({row:e})=>[s("div",null,f(e.remark),1),t(W,{onClick:h=>A(e)},{default:l(()=>[t(q)]),_:2},1032,["onClick"])]),_:1}),t(u,{label:a(n)("createTime"),"min-width":"180",align:"center","show-overflow-tooltip":!0},{default:l(({row:e})=>[i(f(e.create_time||""),1)]),_:1},8,["label"]),t(u,{label:a(n)("operation"),fixed:"right","min-width":"220"},{default:l(({row:e})=>[t(c,{type:"primary",link:"",onClick:h=>a(we)(e.order_id)},{default:l(()=>[i("发送通知")]),_:2},1032,["onClick"]),t(c,{type:"primary",link:"",onClick:h=>M(e)},{default:l(()=>[i("订单信息")]),_:2},1032,["onClick"]),t(c,{type:"primary",link:"",onClick:h=>N(e.id)},{default:l(()=>[i("删除")]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[H,a(r).loading]]),s("div",Fe,[t(X,{"current-page":a(r).page,"onUpdate:current-page":o[7]||(o[7]=e=>a(r).page=e),"page-size":a(r).limit,"onUpdate:page-size":o[8]||(o[8]=e=>a(r).limit=e),layout:"total, sizes, prev, pager, next, jumper",total:a(r).total,onSizeChange:o[9]||(o[9]=e=>m()),onCurrentChange:m},null,8,["current-page","page-size","total"])])]),t(Ce,{ref_key:"editOrderAddDialog",ref:y,onComplete:m},null,512)]),_:1})]),t(G,{modelValue:b.value,"onUpdate:modelValue":o[12]||(o[12]=e=>b.value=e),title:"补差订单备注","align-center":"",width:"300px"},{default:l(()=>[s("div",Oe,[t(V,{style:{width:"200px"},modelValue:g.value,"onUpdate:modelValue":o[10]||(o[10]=e=>g.value=e)},null,8,["modelValue"])]),s("div",Ue,[t(c,{type:"primary",onClick:o[11]||(o[11]=e=>I()),class:"mr-2"},{default:l(()=>[i("确认")]),_:1})])]),_:1},8,["modelValue"])],64)}}});const ct=Ee($e,[["__scopeId","data-v-3d5af06f"]]);export{ct as default};
