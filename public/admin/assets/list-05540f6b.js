import{d as Y,x as $,f as j,n as q,r as I,h as d,c as _,e as t,w as s,a as i,t as r,u as a,i as u,q as o,R as H,s as S,A as w,B as A,a5 as K,E as O,K as W,L as G,bO as J,M as Q,a7 as X,ac as Z,ak as ee,ad as te,W as ae,Y as le}from"./index-6f32d09b.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                *//* empty css                       *//* empty css                  */import"./el-form-item-4ed993c7.js";import{i as oe,j as ne}from"./technician-58e7674a.js";const C=""+new URL("default_headimg-1e927329.png",import.meta.url).href,se={class:"main-container"},ie={class:"flex justify-between items-center"},re={class:"text-page-title"},me={class:"mt-[10px]"},ce={class:"flex items-center"},de={class:"w-[60px] max-h-[60px] mr-[10px]"},pe=["src"],_e={key:1,class:"w-[60px] h-[60px]",src:C,alt:""},ue={class:"flex flex-wrap"},he={class:"w-[100%] truncate"},fe={class:"w-[150px] truncate self-end text-[14px] text-[#999]"},xe=["onClick"],be={class:"w-[60px] max-h-[60px] mr-[10px]"},ge=["src"],ve={key:1,class:"w-[60px] h-[60px]",src:C,alt:""},ke={class:"flex flex-wrap"},ye={class:"w-[100%] truncate"},we={class:"w-[150px] truncate self-end text-[14px] text-[#999]"},Ce={class:"mt-[16px] flex justify-end"},Ae=Y({__name:"list",setup(Ee){const b=$(),x=j(),E=b.meta.title,P=b.query.name||"",l=q({page:1,limit:10,total:0,loading:!1,data:[],searchParam:{name:P??"",mobile:"",create_time:[]}}),g=I(),T=()=>{x.push("/o2o/technician/edit")},p=(m=1)=>{l.loading=!0,l.page=m,oe({page:l.page,limit:l.limit,...l.searchParam}).then(n=>{l.loading=!1,l.data=n.data.data,l.total=n.data.total}).catch(()=>{l.loading=!1})};p();const V=m=>{m&&(m.resetFields(),p())},B=m=>{x.push("/o2o/technician/edit?id="+m.id)},D=m=>{K.confirm("确认删除这条数据吗?","删除",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{ne(m).then(n=>{p()}).catch(()=>{})})},F=m=>{const n=x.resolve({path:"/member/detail",query:{id:m}});window.open(n.href)};return(m,n)=>{const h=O,v=W,f=G,z=J,M=Q,k=X,c=Z,R=ee,U=te,L=ae,N=le;return d(),_("div",se,[t(k,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[i("div",ie,[i("span",re,r(a(E)),1),t(h,{type:"primary",class:"w-[100px]",onClick:T},{default:s(()=>[u(r(a(o)("addTechnician")),1)]),_:1})]),t(k,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:s(()=>[t(M,{inline:!0,model:l.searchParam,ref_key:"searchFormRef",ref:g},{default:s(()=>[t(f,{label:a(o)("name"),prop:"name"},{default:s(()=>[t(v,{modelValue:l.searchParam.name,"onUpdate:modelValue":n[0]||(n[0]=e=>l.searchParam.name=e),modelModifiers:{trim:!0},placeholder:a(o)("namePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(f,{label:a(o)("mobile"),prop:"mobile"},{default:s(()=>[t(v,{modelValue:l.searchParam.mobile,"onUpdate:modelValue":n[1]||(n[1]=e=>l.searchParam.mobile=e),modelModifiers:{trim:!0},placeholder:a(o)("mobilePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(f,{label:a(o)("createTime"),prop:"create_time"},{default:s(()=>[t(z,{modelValue:l.searchParam.create_time,"onUpdate:modelValue":n[2]||(n[2]=e=>l.searchParam.create_time=e),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":a(o)("startDate"),"end-placeholder":a(o)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),t(f,null,{default:s(()=>[t(h,{type:"primary",onClick:n[3]||(n[3]=e=>p())},{default:s(()=>[u(r(a(o)("search")),1)]),_:1}),t(h,{onClick:n[4]||(n[4]=e=>V(g.value))},{default:s(()=>[u(r(a(o)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),i("div",me,[H((d(),S(U,{data:l.data,size:"large"},{empty:s(()=>[i("span",null,r(l.loading?"":a(o)("emptyData")),1)]),default:s(()=>[t(c,{"show-overflow-tooltip":!0,label:a(o)("technicianInfo"),"min-width":"300",align:"left"},{default:s(({row:e})=>[i("div",ce,[i("div",de,[e.headimg_mid?(d(),_("img",{key:0,class:"max-w-[60px] w-[60px] max-h-[60px] flex-shrink-0",src:a(w)(e.headimg_mid)},null,8,pe)):(d(),_("img",_e))]),i("div",ue,[i("p",he,r(e.name),1),i("p",fe,r(e.label),1)])])]),_:1},8,["label"]),t(c,{"show-overflow-tooltip":!0,label:a(o)("member"),"min-width":"300",align:"left"},{default:s(({row:e})=>[e.member?(d(),_("div",{key:0,class:"flex items-center cursor-pointer",onClick:y=>F(e.member.member_id)},[i("div",be,[e.member.headimg?(d(),_("img",{key:0,class:"max-w-[60px] w-[60px] max-h-[60px] flex-shrink-0",src:a(w)(e.member.headimg)},null,8,ge)):(d(),_("img",ve))]),i("div",ke,[i("p",ye,r(e.member.nickname),1),i("p",we,r(e.member.mobile),1)])],8,xe)):A("",!0)]),_:1},8,["label"]),t(c,{label:a(o)("sex"),"min-width":"120"},{default:s(({row:e})=>[i("div",null,r(e.sex==1?"男":e.sex==2?"女":"保密"),1)]),_:1},8,["label"]),t(c,{prop:"position_name",label:a(o)("position"),"min-width":"120"},null,8,["label"]),t(c,{prop:"working_age",label:a(o)("seniority"),"min-width":"120"},null,8,["label"]),t(c,{prop:"mobile",label:a(o)("mobile"),"min-width":"120"},null,8,["label"]),t(c,{prop:"status",label:a(o)("status"),"min-width":"120"},{default:s(({row:e})=>[t(R,{type:e.status==1?"success":e.status==-1?"danger":"info"},{default:s(()=>[u(r(e.status==1?"在职":e.status==-1?"离职":"休息中"),1)]),_:2},1032,["type"])]),_:1},8,["label"]),t(c,{prop:"create_time",label:a(o)("createTime"),"min-width":"150"},null,8,["label"]),t(c,{label:a(o)("operation"),fixed:"right","min-width":"200",align:"right"},{default:s(({row:e})=>[t(h,{type:"primary",link:"",onClick:y=>B(e)},{default:s(()=>[u(r(a(o)("edit")),1)]),_:2},1032,["onClick"]),t(h,{type:"primary",link:"",onClick:y=>D(e.id)},{default:s(()=>[u(r(a(o)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[N,l.loading]]),i("div",Ce,[t(L,{"current-page":l.page,"onUpdate:current-page":n[5]||(n[5]=e=>l.page=e),"page-size":l.limit,"onUpdate:page-size":n[6]||(n[6]=e=>l.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:l.total,onSizeChange:p,onCurrentChange:p},null,8,["current-page","page-size","total"])])])]),_:1})])}}});export{Ae as default};
