import{d as T,r as p,n as N,l as B,q as o,h,s as v,w as n,a as C,e as i,i as c,t as f,u as t,R,b$ as y,K as $,L as k,M as q,E as K,X as M,Y as j}from"./index-99f00cf3.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                */import I from"./index-015c0c3e.js";import"./el-form-item-4ed993c7.js";/* empty css                 */import{a1 as L,a2 as O}from"./vipcard-cf1e419a.js";const S={class:"dialog-footer"},ae=T({__name:"add-technician",emits:["complete"],setup(X,{expose:w,emit:x}){const u=p(!1),s=p(!1),b={id:"",name:"",mobile:"",seniority:"0",number:"",position:"",headimg:""},l=N({...b}),g=p(),D=B(()=>({name:[{required:!0,message:o("namePlaceholder"),trigger:"blur"}],mobile:[{required:!0,message:o("mobilePlaceholder"),trigger:"blur"},{trigger:"blur",validator:(d,e,r)=>{e&&!/^1[3-9]\d{9}$/.test(e)&&r(new Error(o("mobileNumberFormatTips"))),r()}}]})),E=async d=>{if(s.value||!d)return;const e=l.id?L:O;await d.validate(async r=>{r&&(s.value=!0,e(l).then(_=>{s.value=!1,u.value=!1,x("complete")}).catch(()=>{s.value=!1}))})};return w({showDialog:u,setFormData:async(d=null)=>{Object.assign(l,b),d&&d&&Object.keys(l).forEach(e=>{d[e]!=null&&(l[e]=d[e])}),s.value=!1}}),(d,e)=>{const r=$,m=k,_=I,P=q,V=K,U=M,F=j;return h(),v(U,{modelValue:u.value,"onUpdate:modelValue":e[10]||(e[10]=a=>u.value=a),title:l.id?t(o)("updateTechnician"):t(o)("addTechnician"),width:"500px","destroy-on-close":!0},{footer:n(()=>[C("span",S,[i(V,{onClick:e[8]||(e[8]=a=>u.value=!1)},{default:n(()=>[c(f(t(o)("cancel")),1)]),_:1}),i(V,{type:"primary",loading:s.value,onClick:e[9]||(e[9]=a=>E(g.value))},{default:n(()=>[c(f(t(o)("confirm")),1)]),_:1},8,["loading"])])]),default:n(()=>[R((h(),v(P,{model:l,"label-width":"90px",ref_key:"formRef",ref:g,rules:t(D),class:"page-form"},{default:n(()=>[i(m,{label:t(o)("name"),prop:"name"},{default:n(()=>[i(r,{maxlength:"30","show-word-limit":"",modelValue:l.name,"onUpdate:modelValue":e[0]||(e[0]=a=>l.name=a),modelModifiers:{trim:!0},clearable:"",placeholder:t(o)("namePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(m,{label:t(o)("headimg")},{default:n(()=>[i(_,{modelValue:l.headimg,"onUpdate:modelValue":e[1]||(e[1]=a=>l.headimg=a)},null,8,["modelValue"])]),_:1},8,["label"]),i(m,{label:t(o)("mobile"),prop:"mobile"},{default:n(()=>[i(r,{modelValue:l.mobile,"onUpdate:modelValue":e[2]||(e[2]=a=>l.mobile=a),modelModifiers:{trim:!0},clearable:"",maxlength:"11",placeholder:t(o)("mobilePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(m,{label:t(o)("seniority"),prop:""},{default:n(()=>[i(r,{modelValue:l.seniority,"onUpdate:modelValue":e[3]||(e[3]=a=>l.seniority=a),clearable:"",placeholder:t(o)("seniorityPlaceholder"),class:"input-width",onKeyup:e[4]||(e[4]=a=>t(y)(a))},{append:n(()=>[c(f(t(o)("year")),1)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),i(m,{label:t(o)("number"),prop:""},{default:n(()=>[i(r,{modelValue:l.number,"onUpdate:modelValue":e[5]||(e[5]=a=>l.number=a),clearable:"",placeholder:t(o)("numberPlaceholder"),class:"input-width",onKeyup:e[6]||(e[6]=a=>t(y)(a))},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(m,{label:t(o)("position"),prop:""},{default:n(()=>[i(r,{modelValue:l.position,"onUpdate:modelValue":e[7]||(e[7]=a=>l.position=a),clearable:"",placeholder:t(o)("positionPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[F,s.value]])]),_:1},8,["modelValue","title"])}}});export{ae as _};
