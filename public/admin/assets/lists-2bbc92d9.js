import{O as H,d as A,x as G,f as W,r as k,n as J,h as m,c as _,e as t,w as i,a as s,t as a,u as o,q as l,i as E,R as K,F as V,T as Q,B as v,A as X,s as Z,bu as ee,bO as te,L as ae,aa as oe,aB as se,E as le,M as ne,a6 as re,ab as ie,ac as de,a9 as ce,W as me,Y as _e,p as pe,g as ue}from"./index-f7a01263.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                     *//* empty css                  *//* empty css                       */import{g as he,a as be,b as fe}from"./order-1274d9d3.js";import{_ as ge}from"./_plugin-vue_export-helper-c27b6911.js";function xe(f){return H.get("shop_fenxiao/order",{params:f})}const ye=f=>(pe("data-v-5a468a6f"),f=f(),ue(),f),ve={class:"main-container"},ke={class:"flex justify-between items-center"},we={class:"text-page-title"},Ce={class:"table-body min-h-[150px]"},Ee={key:0},De={class:"flex items-center justify-between h-[35px] mt-[10px] px-3 text-[12px] text-[#666] border-solid border-b-[1px] border-[var(--el-border-color)] bg-[var(--el-color-info-light-9)]"},Fe={class:"ml-5"},Pe={key:0,class:"ml-5"},Se={class:"ml-5"},Te={class:"flex cursor-pointer"},Ve={class:"flex items-center min-w-[50px] mr-[10px]"},Ne=["src"],Oe={key:1,class:"w-[50px] h-[50px]",src:"",alt:""},ze={class:"flex flex-col w-[308px]"},Re={class:"multi-hidden text-[14px]"},Be={class:"text-[12px] text-[#999]"},$e={class:"flex flex-col"},je={class:"text-[13px]"},Le={class:"text-[13px] mt-[5px]"},Ue={class:"text-[13px]"},Ie={class:"text-[13px]"},Ye={class:"flex flex-col"},qe=["onClick"],Me={key:0},He={key:1},Ae=["title","onClick"],Ge=["title","onClick"],We={key:1},Je={key:0},Ke=ye(()=>s("span",null,"：",-1)),Qe={key:0},Xe={key:0,class:"text-[14px] h-[30px] leading-[30px] px-3 bg-[#fff0e5] text-[#ff7f5b]"},Ze={class:"mr-[5px]"},et={class:"mt-[16px] flex justify-end"},tt=A({__name:"lists",setup(f){const N=G(),w=W(),O=N.meta.title,z=k([]),R=k([]),B=k([]);(async()=>{z.value=await(await he()).data,R.value=await(await be()).data,B.value=await(await fe()).data})();const r=J({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{is_settlement:"",create_time:[]}}),D=k(),x=(p=1)=>{r.loading=!0,r.page=p,xe({page:r.page,limit:r.limit,...r.searchParam}).then(n=>{r.loading=!1,n.data.data.forEach(h=>{let u=0;h.goods_list=[],h.shop_order.order_goods.forEach(b=>{u+=b.fenxiao_order_goods.length,b.fenxiao_order_goods.forEach((C,y)=>{let g=ee(Object.assign(b,C));delete g.fenxiao_order_goods,g.goodsRowspan=y?0:b.fenxiao_order_goods.length,g.rowspan=0,h.goods_list.push(g)})}),h.goods_list[0].rowspan=u,r.data.push(h)}),r.total=n.data.total}).catch(()=>{r.loading=!1})};x();const F=p=>{const n=w.resolve({path:"/shop_fenxiao/detail",query:{id:p.fenxiao_member_id}});window.open(n.href,"_blank")},$=({row:p,column:n,rowIndex:h,columnIndex:u})=>u<=2?[p.goodsRowspan,p.goodsRowspan?1:0]:u==3||u>7?[p.rowspan,p.rowspan?1:0]:[1,1],j=p=>{const n=w.resolve("/shop/order/detail?order_id="+p.order_id);window.open(n.href,"_blank")},L=p=>{const n=w.resolve({path:"/member/detail",query:{id:p}});window.open(n.href,"_blank")},U=p=>{p&&(p.resetFields(),x())};return(p,n)=>{const h=te,u=ae,b=oe,C=se,y=le,g=ne,P=re,d=ie,S=de,I=ce,Y=me,q=_e;return m(),_("div",ve,[t(P,{class:"card !border-none",shadow:"never"},{default:i(()=>[s("div",ke,[s("span",we,a(o(O)),1)]),t(P,{class:"card my-[10px] !border-none table-search-wrap",shadow:"never"},{default:i(()=>[t(g,{inline:!0,model:r.searchParam,ref_key:"searchFormRef",ref:D},{default:i(()=>[t(u,{label:o(l)("createTime"),prop:"create_time"},{default:i(()=>[t(h,{modelValue:r.searchParam.create_time,"onUpdate:modelValue":n[0]||(n[0]=c=>r.searchParam.create_time=c),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":o(l)("startDate"),"end-placeholder":o(l)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),t(u,{label:o(l)("orderStatus"),prop:"is_settlement"},{default:i(()=>[t(C,{modelValue:r.searchParam.is_settlement,"onUpdate:modelValue":n[1]||(n[1]=c=>r.searchParam.is_settlement=c),placeholder:o(l)("orderStatusPlaceholder"),clearable:""},{default:i(()=>[t(b,{label:"已结算",value:1}),t(b,{label:"待结算",value:0})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,null,{default:i(()=>[t(y,{type:"primary",onClick:n[2]||(n[2]=c=>x())},{default:i(()=>[E(a(o(l)("search")),1)]),_:1}),t(y,{onClick:n[3]||(n[3]=c=>U(D.value))},{default:i(()=>[E(a(o(l)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),s("div",null,[t(S,{size:"large",class:"table-top"},{default:i(()=>[t(d,{label:o(l)("orderGoods"),width:"320"},null,8,["label"]),t(d,{label:o(l)("goodsPriceNumber"),"min-width":"120"},null,8,["label"]),t(d,{label:o(l)("refundStatus"),"min-width":"100"},null,8,["label"]),t(d,{label:o(l)("goodsFenxiaoPriceNumber"),"min-width":"120"},null,8,["label"]),t(d,{label:o(l)("buyInfo"),"min-width":"120"},null,8,["label"]),t(d,{label:o(l)("fenxiaoLevel"),"min-width":"70"},null,8,["label"]),t(d,{label:o(l)("fenxiaoName"),"min-width":"120"},null,8,["label"]),t(d,{label:o(l)("calculateType"),"min-width":"130"},null,8,["label"]),t(d,{label:o(l)("goodsFenxiaoPrice"),"min-width":"120",align:"right"},null,8,["label"]),t(d,{label:o(l)("orderStatus"),"min-width":"120"},null,8,["label"]),t(d,{label:o(l)("operation"),fixed:"right",align:"right","min-width":"120"},null,8,["label"])]),_:1}),K((m(),_("div",Ce,[r.loading?v("",!0):(m(),_("div",Ee,[r.data.length?(m(!0),_(V,{key:0},Q(r.data,(c,M)=>(m(),_("div",{key:M},[s("div",De,[s("div",null,[s("span",null,a(o(l)("orderNo"))+"："+a(c.order_no),1),s("span",Fe,a(o(l)("createTime"))+"："+a(c.create_time),1),c.pay?(m(),_("span",Pe,a(o(l)("payType"))+"："+a(c.pay.type_name),1)):v("",!0),s("span",Se,a(o(l)("countPrice"))+"：￥"+a(c.commission_fenxiao),1)])]),t(S,{data:c.goods_list,size:"large","show-header":!1,"span-method":$,ref_for:!0,ref:"multipleTable"},{default:i(()=>[t(d,{align:"left",width:"320"},{default:i(({row:e})=>[s("div",Te,[s("div",Ve,[e.goods_image_thumb_mid?(m(),_("img",{key:0,class:"w-[50px] h-[50px]",src:o(X)(e.goods_image_thumb_mid),alt:""},null,8,Ne)):(m(),_("img",Oe))]),s("div",ze,[s("p",Re,a(e.goods_name),1),s("span",Be,a(e.sku_name),1)])])]),_:1}),t(d,{"min-width":"120"},{default:i(({row:e})=>[s("div",$e,[s("span",je,"￥"+a(e.goods_money),1),s("span",Le,a(e.num)+a(o(l)("price")),1)])]),_:1}),t(d,{"min-width":"100"},{default:i(({row:e})=>[s("span",Ue,a(e.status!=1&&e.status_name?e.status_name:"--"),1)]),_:1}),t(d,{"min-width":"120"},{default:i(({row:e})=>[s("span",Ie,"￥"+a(e.order_goods_money),1)]),_:1}),t(d,{"min-width":"120","class-name":"border-0 border-l-[1px] border-solid border-[var(--el-table-border-color)]"},{default:i(()=>[s("div",Ye,[s("span",{class:"text-[12px] text-primary cursor-pointer",onClick:e=>L(c.shop_order.member.member_id)},a(c.shop_order.member.nickname),9,qe)])]),_:2},1024),t(d,{"min-width":"70","class-name":"border-0 border-l-[1px] border-solid border-[var(--el-table-border-color)]"},{default:i(({row:e})=>[e.commission_level?(m(),_("span",Me,a(e.commission_level)+"级",1)):(m(),_("span",He,"--"))]),_:1}),t(d,{"min-width":"120"},{default:i(({row:e})=>[e.member.nickname?(m(),_(V,{key:0},[e.member.nickname?(m(),_("span",{key:0,title:e.member.nickname,class:"multi-hidden text-primary cursor-pointer",onClick:T=>F(e)},a(e.member.nickname),9,Ae)):(m(),_("span",{key:1,title:e.member.nickname,class:"multi-hidden text-primary cursor-pointer",onClick:T=>F(e)},a(e.member.username),9,Ge))],64)):(m(),_("span",We,"--"))]),_:1}),t(d,{"min-width":"150"},{default:i(({row:e})=>[e.calculate_type?(m(),_("span",Je,[s("span",null,a(e.calculate_type_name),1),Ke,s("span",null,a(e.calculate_type!=1?"￥"+e.commission:e.commission_rate+"%"),1)])):v("",!0)]),_:1}),t(d,{"min-width":"120",align:"right"},{default:i(({row:e})=>[e.commission?(m(),_("span",Qe,"￥"+a(e.commission||"0.00"),1)):v("",!0)]),_:1}),t(d,{"min-width":"120","class-name":"border-0 border-l-[1px] border-solid border-[var(--el-table-border-color)]"},{default:i(({row:e})=>[s("span",null,a(e.is_settlement?"已结算":"待结算"),1)]),_:1}),t(d,{align:"right","min-width":"120"},{default:i(({row:e})=>[t(y,{type:"primary",link:"",onClick:T=>j(e)},{default:i(()=>[E(a(o(l)("orderDetail")),1)]),_:2},1032,["onClick"])]),_:1})]),_:2},1032,["data"]),c.shop_remark?(m(),_("div",Xe,[s("span",Ze,a(o(l)("notes"))+"：",1),s("span",null,a(c.shop_remark),1)])):v("",!0)]))),128)):(m(),Z(I,{key:1,"image-size":1,description:o(l)("emptyData")},null,8,["description"]))]))])),[[q,r.loading]]),s("div",et,[t(Y,{"current-page":r.page,"onUpdate:current-page":n[4]||(n[4]=c=>r.page=c),"page-size":r.limit,"onUpdate:page-size":n[5]||(n[5]=c=>r.limit=c),layout:"total, sizes, prev, pager, next, jumper",total:r.total,onSizeChange:n[6]||(n[6]=c=>x()),onCurrentChange:x},null,8,["current-page","page-size","total"])])])]),_:1})])}}});const wt=ge(tt,[["__scopeId","data-v-5a468a6f"]]);export{wt as default};
