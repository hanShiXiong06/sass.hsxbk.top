import{d as G,x as H,f as Q,r as u,n as T,a2 as Z,h,c as S,e as o,w as i,a as r,t as m,u as t,q as a,i as f,R as ee,s as V,A as ae,c$ as te,br as B,bu as ne,a4 as D,K as oe,L as le,E as ie,M as se,a6 as re,ab as me,J as pe,a1 as ce,ac as de,W as _e,bN as ue,X as fe,Y as be}from"./index-6ea097a6.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                          *//* empty css                 *//* empty css                  *//* empty css               *//* empty css                    *//* empty css                 *//* empty css                     *//* empty css                      *//* empty css                  *//* empty css                  *//* empty css                 */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css                        *//* empty css                        *//* empty css                *//* empty css                     *//* empty css                  */import{_ as R}from"./default_headimg-a897263d.js";import{l as xe,s as ge,e as he}from"./fenxiao-7bf894e4.js";import{_ as ve}from"./fenxiao-of-select-popup.vue_vue_type_script_setup_true_lang-77512113.js";const ke={class:"main-container"},ye={class:"flex justify-between items-center"},Fe={class:"text-page-title"},Ce=["onClick"],Ee={class:"min-w-[50px] h-[50px] flex items-center justify-center"},Pe=r("div",{class:"image-slot"},[r("img",{class:"w-[50px] h-[50px]",src:R})],-1),Te={key:1,class:"w-[50px] h-[50px]",src:R,fit:"contain"},Se={class:"ml-2"},Ve=["title"],Be={class:"text-primary text-[12px]"},De=["onClick"],Re={class:"mt-[16px] flex justify-end"},Ne={class:"dialog-footer"},ia=G({__name:"lists",setup($e){const N=H(),$=Q(),z=N.meta.title;let b=u({}),I=u(""),M=u([]),c=u(!1);const s=T({page:1,limit:10,total:0,loading:!1,data:[],searchParam:{search:""}}),d=(n=1)=>{s.loading=!0;const l=ne(s.searchParam);xe({page:s.page,limit:s.limit,...l}).then(g=>{s.data=g.data.data,s.total=g.data.total,s.loading=!1})};d();const k=u(),L=n=>{n&&(n.resetFields(),d())},y=n=>{let l=$.resolve(`/member/detail?id=${n}`);window.open(l.href," blank")};let p=T({});const F=u();let C=u(0);const U=n=>{var l;b.value={},p={},C=n.is_fenxiao,n.is_fenxiao?(b.value.not_in=n.child_ids?[n.member_id,n.parent_fenxiao.member_id,...n.child_ids]:[n.member_id,n.parent_fenxiao.member_id],b.value.is_agent="all",p.id=n.member_id):(b.value.not_in=n.member_id,p.member_id=n.member_id),(l=F.value)==null||l.show()},j=n=>{C?(p.parent=n.member.member_id,p.parent_name=n.member.nickname,D.confirm(a("editSupFenxiaoTip"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{he(p).then(()=>{d()})})):(p.fenxiao_member_id=n.member_id,D.confirm(a("editSupFenxiaoTip"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{ge(p).then(()=>{d()})}))};return(n,l)=>{const g=oe,v=le,x=ie,w=se,E=re,_=me,O=pe,q=Z("EditPen"),A=ce,J=de,K=_e,W=ue,X=fe,Y=be;return h(),S("div",ke,[o(E,{class:"card !border-none",shadow:"never"},{default:i(()=>[r("div",ye,[r("span",Fe,m(t(z)),1)]),o(E,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:i(()=>[o(w,{inline:!0,model:s.searchParam,ref_key:"searchFormRef",ref:k},{default:i(()=>[o(v,{label:t(a)("memberName"),prop:"search"},{default:i(()=>[o(g,{modelValue:s.searchParam.search,"onUpdate:modelValue":l[0]||(l[0]=e=>s.searchParam.search=e),placeholder:t(a)("memberNamePlaceholder"),maxlength:"60"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(v,null,{default:i(()=>[o(x,{type:"primary",onClick:l[1]||(l[1]=e=>d())},{default:i(()=>[f(m(t(a)("search")),1)]),_:1}),o(x,{onClick:l[2]||(l[2]=e=>L(k.value))},{default:i(()=>[f(m(t(a)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),ee((h(),V(J,{data:s.data,size:"large",ref:"goodsListTableRef"},{empty:i(()=>[r("span",null,m(s.loading?"":t(a)("emptyData")),1)]),default:i(()=>[o(_,{type:"selection",width:"55"}),o(_,{prop:"goods_id",label:t(a)("memberInfo"),"min-width":"200"},{default:i(({row:e})=>[r("div",{class:"flex items-center cursor-pointer",onClick:P=>y(e.member_id)},[r("div",Ee,[e.member.headimg?(h(),V(O,{key:0,class:"w-[50px] h-[50px]",src:t(ae)(e.member.headimg),fit:"contain"},{error:i(()=>[Pe]),_:2},1032,["src"])):(h(),S("img",Te))]),r("div",Se,[r("span",{title:e.member.nickname||e.member.username,class:"multi-hidden"},m(e.member.nickname||e.member.username),9,Ve),r("span",Be,m(e.member.mobile||"--"),1)])],8,Ce)]),_:1},8,["label"]),o(_,{label:t(a)("isFenxiao"),"min-width":"120"},{default:i(({row:e})=>[f(m(e.is_fenxiao?t(a)("are"):t(a)("no")),1)]),_:1},8,["label"]),o(_,{label:t(a)("bindingSupFenxiao"),"min-width":"120"},{default:i(({row:e})=>[r("div",{class:"cursor-pointer stock-wrap",onClick:P=>U(e)},[r("span",null,m(e.parent_fenxiao&&e.parent_fenxiao.nickname||e.parent_fenxiao&&e.parent_fenxiao.username||"--"),1),o(A,{class:"ml-[5px]",size:14},{default:i(()=>[o(q)]),_:1})],8,De)]),_:1},8,["label"]),o(_,{prop:"order_num",label:t(a)("consumptionNumber"),"min-width":"100",sortable:"custom"},null,8,["label"]),o(_,{label:t(a)("consumptionMoney"),"min-width":"100",sortable:"custom"},{default:i(({row:e})=>[f(m(t(te)(e.order_money_sum)),1)]),_:1},8,["label"]),o(_,{label:t(a)("operation"),fixed:"right",align:"right","min-width":"120"},{default:i(({row:e})=>[o(x,{type:"primary",link:"",onClick:P=>y(e.member_id)},{default:i(()=>[f(m(t(a)("detail")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[Y,s.loading]]),r("div",Re,[o(K,{"current-page":s.page,"onUpdate:current-page":l[3]||(l[3]=e=>s.page=e),"page-size":s.limit,"onUpdate:page-size":l[4]||(l[4]=e=>s.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:s.total,onSizeChange:d,onCurrentChange:d},null,8,["current-page","page-size","total"])])]),_:1}),o(X,{modelValue:t(c),"onUpdate:modelValue":l[7]||(l[7]=e=>B(c)?c.value=e:c=e),title:t(a)("editSupFenxiaoTitle"),width:"400px","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1},{footer:i(()=>[r("span",Ne,[o(x,{onClick:l[6]||(l[6]=e=>B(c)?c.value=!1:c=!1)},{default:i(()=>[f(m(t(a)("cancel")),1)]),_:1}),o(x,{type:"primary",onClick:n.save},{default:i(()=>[f(m(t(a)("confirm")),1)]),_:1},8,["onClick"])])]),default:i(()=>[r("div",null,[o(v,{label:t(a)("supFenxiao"),prop:"sup_fenxiao"},{default:i(()=>[o(W,{props:t(I),modelValue:n.fenxiaoTable.searchParam.sup_fenxiao,"onUpdate:modelValue":l[5]||(l[5]=e=>n.fenxiaoTable.searchParam.sup_fenxiao=e),options:t(M),placeholder:t(a)("supFenxiaoPlaceholder"),clearable:"",filterable:""},null,8,["props","modelValue","options","placeholder"])]),_:1},8,["label"])])]),_:1},8,["modelValue","title"]),o(ve,{title:t(a)("editSupFenxiaoTitle"),ref_key:"fenxiaoOfSelectPopupRef",ref:F,params:t(b),onLoad:j},null,8,["title","params"])])}}});export{ia as default};
