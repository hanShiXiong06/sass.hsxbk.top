import{d as le,f as ne,x as se,r as _,n as re,h as r,c as d,e as t,w as o,a as s,t as i,u as c,q as p,F as b,T as y,$ as z,B as F,i as k,R as q,s as W,K as ie,L as de,E as ce,M as pe,a7 as ue,bg as me,bh as _e,bi as ve,ac as fe,ad as he,W as xe,X as ge,Y as be,p as ye,g as ke}from"./index-5a756a51.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                  *//* empty css                    */import"./el-dropdown-item-4ed993c7.js";/* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";import{b as we,e as Ce,c as Se}from"./order-0e43ae5c.js";import{g as Ve}from"./technician-87774a10.js";import{_ as Ee}from"./_plugin-vue_export-helper-c27b6911.js";const Fe=w=>(ye("data-v-9798da08"),w=w(),ke(),w),Ne={class:"main-container"},Te={class:"flex items-center"},Be={class:"text-page-title"},$e={class:"flex items-center mt-5"},je={class:"text-[14px] leading-[16px]"},ze={key:1,class:"text-[14px] leading-[16px]"},De={key:0,class:"time-data mt-3"},Re={class:"flex justify-center items-center text-lg"},Le={class:"mx-6"},Oe={class:"time-data-head"},Ue={class:"time-data-body"},Me={key:0,class:"text-[14px]"},Pe={class:"flex my-[5px]"},qe={class:"mb-[5px]"},We={class:"mb-[5px] multi-hidden"},Ge=Fe(()=>s("span",{class:"item-btn iconfont icongengduo"},null,-1)),Ke={class:"mt-[16px] flex justify-end"},Xe=le({__name:"reserve",setup(w){const G=ne(),K=se().meta.title,D=_(),R=_([]),N=_({wait_pay:"#ccc",dispatch:"#8558fa",wait_service:"#1475fa",in_service:"#fa5b14",finish:"#10c610",close:"#fa1414"});(async(n=0)=>{const e=await(await we()).data;R.value=e})();const v=_({orderName:"",technician_search_text:"",member_search_text:""}),C=_(!1),f=_([]),T=_(0),h=(n=0)=>{C.value=!0;const e={length:n,...v.value};Ce(e).then(x=>{f.value=x.data,C.value=!1}).catch(()=>{C.value=!1})};h();const L=n=>{n=="add"?T.value++:n=="sub"&&T.value--,h(T.value)},l=re({page:1,limit:10,total:0,id:0,loading:!1,data:[]}),B=(n=1)=>{l.loading=!0,l.page=n,Ve({page:l.page,limit:l.limit,id:l.id}).then(e=>{l.loading=!1,l.total=e.data.total,l.data=e.data.data}).catch(()=>{l.loading=!1})},$=_({order_id:"",technician_id:""}),S=_(!1),X=n=>{l.id=n.item[0].goods_id,B(),S.value=!0,$.value.order_id=n.order_id},Y=n=>{$.value.technician_id=n.id,Se($.value).then(e=>{S.value=!1,h()})},A=n=>{const e=G.resolve({path:"/o2o/order/detail",query:{order_id:n.order_id}});window.open(e.href)},H=n=>{n&&(n.resetFields(),h())};return(n,e)=>{const x=ie,V=de,j=ce,J=pe,O=ue,U=me,Q=_e,Z=ve,E=fe,I=he,ee=xe,te=ge,M=be;return r(),d("div",Ne,[t(O,{class:"box-card !border-none",shadow:"never"},{default:o(()=>{var m;return[s("div",Te,[s("span",Be,i(c(K)),1)]),s("div",$e,[s("span",je,i(c(p)("orderStatus")),1),(r(!0),d(b,null,y(R.value,(a,g)=>(r(),d("div",{key:g,class:"flex items-center"},[a.status!="close"?(r(),d("span",{key:0,class:"w-[16px] h-[16px] ml-[30px] mr-[10px]",style:z({backgroundColor:N.value[a.status]})},null,4)):F("",!0),a.status!="close"?(r(),d("span",ze,i(a.name),1)):F("",!0)]))),128))]),t(O,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:o(()=>[t(J,{inline:!0,model:v.value,ref_key:"searchFormRef",ref:D},{default:o(()=>[t(V,{label:c(p)("orderName"),prop:"orderName"},{default:o(()=>[t(x,{placeholder:c(p)("orderNamePlaceholder"),modelValue:v.value.orderName,"onUpdate:modelValue":e[0]||(e[0]=a=>v.value.orderName=a),modelModifiers:{trim:!0},class:"w-[200px]"},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),t(V,{label:c(p)("technicianSearchText"),prop:"technician_search_text"},{default:o(()=>[t(x,{modelValue:v.value.technician_search_text,"onUpdate:modelValue":e[1]||(e[1]=a=>v.value.technician_search_text=a),modelModifiers:{trim:!0},placeholder:c(p)("technicianSearchTextPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(V,{label:c(p)("memberSearchText"),prop:"member_search_text"},{default:o(()=>[t(x,{modelValue:v.value.member_search_text,"onUpdate:modelValue":e[2]||(e[2]=a=>v.value.member_search_text=a),modelModifiers:{trim:!0},placeholder:c(p)("memberSearchTextPlaceholder"),class:"!w-[210px]"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(V,null,{default:o(()=>[t(j,{type:"primary",onClick:e[3]||(e[3]=a=>h())},{default:o(()=>[k(i(c(p)("search")),1)]),_:1}),t(j,{onClick:e[4]||(e[4]=a=>H(D.value))},{default:o(()=>[k(i(c(p)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),(m=f.value)!=null&&m.length?(r(),d("div",De,[s("div",Re,[s("span",{class:"iconfont iconxiangzuojiantou font-bold cursor-pointer",onClick:e[5]||(e[5]=a=>L("sub"))}),s("div",Le,i(f.value[0].date)+" - "+i(f.value[f.value.length-1].date),1),s("span",{class:"iconfont iconxiangyoujiantou font-bold cursor-pointer",onClick:e[6]||(e[6]=a=>L("add"))})]),q((r(),d("div",null,[s("div",Oe,[(r(!0),d(b,null,y(f.value,(a,g)=>(r(),d("div",{key:g},[s("span",null,i(a.week)+" "+i(a.date),1)]))),128))]),s("div",Ue,[(r(!0),d(b,null,y(f.value,(a,g)=>(r(),d("div",{class:"flex flex-col common-scrollbar",key:g},[(r(!0),d(b,null,y(a.data,(u,ae)=>(r(),d("div",{class:"project-item",style:z({borderColor:N.value[u.order_status]}),key:ae},[u.member?(r(),d("p",Me,i(u.member.nickname),1)):F("",!0),s("p",Pe,[s("span",{class:"text-[#fff] px-[6px] py-[2px] text-[12px] rounded-[2px]",style:z({backgroundColor:N.value[u.order_status_info.status]})},i(u.reserve_service_time),5)]),s("p",qe,i(u.technician_info?u.technician_info.name:""),1),s("p",We,i(u.item[0].item_name),1),t(Z,null,{dropdown:o(()=>[t(Q,null,{default:o(()=>[t(U,{onClick:P=>A(u)},{default:o(()=>[k(i(c(p)("detail")),1)]),_:2},1032,["onClick"]),(r(!0),d(b,null,y(u.order_status_info.action,(P,oe)=>(r(),W(U,{onClick:He=>X(u),key:oe},{default:o(()=>[k(i(P.name),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),default:o(()=>[Ge]),_:2},1024)],4))),128))]))),128))])])),[[M,C.value]])])):F("",!0)]}),_:1}),t(te,{modelValue:S.value,"onUpdate:modelValue":e[9]||(e[9]=m=>S.value=m),title:"请选择技师",width:"600px"},{default:o(()=>[q((r(),W(I,{data:l.data,class:"technician-table"},{empty:o(()=>[s("span",null,i(l.loading?"":c(p)("emptyData")),1)]),default:o(()=>[t(E,{prop:"name",label:"姓名",width:"180"}),t(E,{prop:"position_name",label:"职位"}),t(E,{prop:"mobile",label:"手机号",width:"180"}),t(E,{label:c(p)("operation"),fixed:"right","min-width":"50",align:"right"},{default:o(({row:m})=>[t(j,{type:"primary",link:"",onClick:a=>Y(m)},{default:o(()=>[k("确定")]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[M,l.loading]]),s("div",Ke,[t(ee,{"current-page":l.page,"onUpdate:current-page":e[7]||(e[7]=m=>l.page=m),"page-size":l.limit,"onUpdate:page-size":e[8]||(e[8]=m=>l.limit=m),layout:"total, sizes, prev, pager, next, jumper",total:l.total,onSizeChange:B,onCurrentChange:B},null,8,["current-page","page-size","total"])])]),_:1},8,["modelValue"])])}}});const bt=Ee(Xe,[["__scopeId","data-v-9798da08"]]);export{bt as default};
