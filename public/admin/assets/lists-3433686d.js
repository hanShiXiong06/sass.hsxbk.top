import{d as se,x as ne,r as h,f as ie,n as $,h as c,c as k,e as l,w as s,a as i,t as d,u as o,q as a,F as re,T as de,s as x,i as _,R as pe,A as ce,d3 as me,B as C,a5 as O,U as _e,a3 as ue,K as ge,L as fe,bF as he,ac as ye,aD as ve,E as xe,M as be,a7 as ke,aw as Ce,ad as Te,J as Ee,al as Pe,aa as we,ae as Ve,W as Fe,Y as Se,p as De,g as $e}from"./index-99f00cf3.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css                        *//* empty css                        *//* empty css                *//* empty css                *//* empty css                  *//* empty css                          *//* empty css                 */import"./el-form-item-4ed993c7.js";import{_ as M}from"./goods_default-247a7f2b.js";import{_ as ze}from"./fenxiao-goods-detail.vue_vue_type_style_index_0_lang-0f13194d.js";import{g as Be,b as Ie}from"./goods-4a8ebb3e.js";import{e as j,a as Le}from"./goods-3588b4d5.js";import{_ as Ne}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                  *//* empty css                   *//* empty css                    */const z=T=>(De("data-v-8d9b568a"),T=T(),$e(),T),Ge={class:"main-container"},Ue={class:"flex justify-between items-center"},Re={class:"text-page-title"},Oe={class:"mt-[10px]"},je={class:"mb-[10px] flex items-center"},Me={class:"flex items-center"},Ae={class:"min-w-[70px] h-[70px] flex items-center justify-center"},qe=z(()=>i("div",{class:"image-slot"},[i("img",{class:"w-[70px] h-[70px]",src:M,fit:"contain"})],-1)),Je={key:1,class:"w-[70px] h-[70px]",src:M,fit:"contain"},Ke={class:"ml-2"},We=["title"],Ye={class:"text-primary text-[12px]"},He={key:0},Qe={key:1},Xe=z(()=>i("div",{class:"max-w-[300px]"},[i("p",{class:"leading-[25px]"},"1. 分销规则可以是默认规则和单独设置"),i("p",{class:"leading-[25px]"},"2. 商品可以设置分销计算价，设置之后按照计算价作为商品业绩计算比率，默认按照商品卖价作为商品业绩然后通过比率计算佣金"),i("p",{class:"leading-[25px]"},"3. 商品佣金比率也可以单独设置，设置之后按照商品佣金比率计算")],-1)),Ze=z(()=>i("span",{class:"iconfont iconwenhao ml-[5px]"},null,-1)),et={class:"mt-[16px] flex"},tt={class:"flex items-center flex-1"},at=se({__name:"lists",setup(T){const A=ne().meta.title,E=h(!1),q=ie(),n=$({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{goods_name:"",goods_category:[],goods_type:""}}),F=h(null),B=h(),S=$([]),J={checkStrictly:!0},I=$([]);(()=>{Be().then(r=>{const t=r.data;if(t){const p=[];t.forEach(u=>{const w=[];u.child_list&&u.child_list.forEach(V=>{w.push({value:V.category_id,label:V.category_name})}),p.push({value:u.category_id,label:u.category_name,children:w})}),S.splice(0,S.length,...p)}}),Ie().then(r=>{const t=r.data;if(t)for(const p in t)I.push(t[p])})})();const y=h(),b=h(!1),L=r=>{b.value=!1,N.value.toggleAllSelection()},N=h(),v=h([]),K=r=>{v.value=r,y.value=!1,v.value.length>0&&v.value.length<n.data.length?b.value=!0:b.value=!1,v.value.length==n.data.length&&(y.value=!0)},W=(r,t)=>{O.confirm(t?a("participateTip"):a("offParticipateTip"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{E.value||(E.value=!0,j({goods_ids:[r.goods_id],is_fenxiao:t}).then(p=>{E.value=!1,f()}).catch(()=>{E.value=!1}))}).catch(()=>{})},P=r=>{if(v.value.length==0){_e({type:"warning",message:`${a("batchEmptySelectedGoodsTips")}`});return}const t=[];v.value.forEach(p=>{t.push(p.goods_id)}),O.confirm(r?a("participateTip"):a("offParticipateTip"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{j({goods_ids:t,is_fenxiao:r}).then(p=>{f()})}).catch(()=>{})},f=(r=1)=>{n.loading=!0,n.page=r;const t=ue(n.searchParam);Le({page:n.page,limit:n.limit,...t}).then(p=>{n.loading=!1,n.data=p.data.data,n.total=p.data.total}).catch(()=>{n.loading=!1})};f();const G=r=>{q.push("/shop_fenxiao/management/goods_config?goods_id="+r)},Y=r=>{let t={id:r};F.value.setFormData(t),F.value.showDialog=!0},H=r=>{r&&(r.resetFields(),f())};return(r,t)=>{const p=ge,u=fe,w=he,V=ye,Q=ve,g=xe,X=be,U=ke,R=Ce,m=Te,Z=Ee,ee=Pe,te=we,ae=Ve,oe=Fe,le=Se;return c(),k("div",Ge,[l(U,{class:"card !border-none",shadow:"never"},{default:s(()=>[i("div",Ue,[i("span",Re,d(o(A)),1)]),l(U,{class:"card my-[10px] !border-none table-search-wrap",shadow:"never"},{default:s(()=>[l(X,{inline:!0,model:n.searchParam,ref_key:"searchFormRef",ref:B},{default:s(()=>[l(u,{label:o(a)("goodsName"),prop:"goods_name"},{default:s(()=>[l(p,{modelValue:n.searchParam.goods_name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchParam.goods_name=e),modelModifiers:{trim:!0},placeholder:o(a)("goodsNamePlaceholder"),maxlength:"60"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(u,{label:o(a)("goodsCategory"),prop:"goods_category"},{default:s(()=>[l(w,{props:J,modelValue:n.searchParam.goods_category,"onUpdate:modelValue":t[1]||(t[1]=e=>n.searchParam.goods_category=e),options:S,placeholder:o(a)("goodsCategoryPlaceholder"),clearable:"",filterable:""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"]),l(u,{label:o(a)("goodsType"),prop:"goods_type"},{default:s(()=>[l(Q,{modelValue:n.searchParam.goods_type,"onUpdate:modelValue":t[2]||(t[2]=e=>n.searchParam.goods_type=e),placeholder:o(a)("goodsTypePlaceholder"),clearable:""},{default:s(()=>[(c(!0),k(re,null,de(I,e=>(c(),x(V,{key:e.type,label:e.name,value:e.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(u,null,{default:s(()=>[l(g,{type:"primary",onClick:t[3]||(t[3]=e=>f())},{default:s(()=>[_(d(o(a)("search")),1)]),_:1}),l(g,{onClick:t[4]||(t[4]=e=>H(B.value))},{default:s(()=>[_(d(o(a)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),i("div",Oe,[i("div",je,[l(R,{modelValue:y.value,"onUpdate:modelValue":t[5]||(t[5]=e=>y.value=e),size:"large",class:"px-[14px]",onChange:L,indeterminate:b.value},null,8,["modelValue","indeterminate"]),l(g,{onClick:t[6]||(t[6]=e=>P(1)),size:"small"},{default:s(()=>[_(d(o(a)("participate")),1)]),_:1}),l(g,{onClick:t[7]||(t[7]=e=>P(0)),size:"small"},{default:s(()=>[_(d(o(a)("offParticipate")),1)]),_:1})]),pe((c(),x(ae,{data:n.data,size:"large",ref_key:"goodsListTableRef",ref:N,onSelectionChange:K},{empty:s(()=>[i("span",null,d(n.loading?"":o(a)("emptyData")),1)]),default:s(()=>[l(m,{type:"selection",width:"55"}),l(m,{prop:"goods_id",label:o(a)("goodsInfo"),"min-width":"300"},{default:s(({row:e})=>[i("div",Me,[i("div",Ae,[e.goods_cover_thumb_small?(c(),x(Z,{key:0,class:"w-[70px] h-[70px]",src:o(ce)(e.goods_cover_thumb_small),fit:"contain"},{error:s(()=>[qe]),_:2},1032,["src"])):(c(),k("img",Je))]),i("div",Ke,[i("span",{title:e.goods_name,class:"multi-hidden"},d(e.goods_name),9,We),i("span",Ye,d(e.goods_type_name),1)])])]),_:1},8,["label"]),l(m,{prop:"goods_type_name",label:o(a)("goodsTypeName"),"min-width":"120",align:"right"},null,8,["label"]),l(m,{prop:"price",label:o(a)("skuPrice"),"min-width":"120",align:"right"},{default:s(({row:e})=>[i("span",null,"￥"+d(o(me)(e.goodsSku.price)),1)]),_:1},8,["label"]),l(m,{prop:"stock",label:o(a)("stock"),"min-width":"120"},null,8,["label"]),l(m,{prop:"sale_num",label:o(a)("saleNum"),"min-width":"100"},null,8,["label"]),l(m,{label:o(a)("status"),"min-width":"100"},{default:s(({row:e})=>[e.status==1?(c(),k("div",He,d(o(a)("statusOn")),1)):C("",!0),e.status==0?(c(),k("div",Qe,d(o(a)("statusOff")),1)):C("",!0)]),_:1},8,["label"]),l(m,{label:o(a)("isParticipate"),"min-width":"150"},{default:s(({row:e})=>[l(ee,{class:"cursor-pointer",type:e.is_set_fenxiao?"success":"info",onClick:D=>W(e,e.is_set_fenxiao?0:1)},{default:s(()=>[_(d(e.is_set_fenxiao?o(a)("yes"):o(a)("no")),1)]),_:2},1032,["type","onClick"])]),_:1},8,["label"]),l(m,{prop:"","min-width":"150"},{header:s(()=>[i("span",null,d(o(a)("ParticipateType")),1),l(te,{class:"box-item",effect:"light",placement:"bottom-end"},{content:s(()=>[Xe]),default:s(()=>[Ze]),_:1})]),default:s(({row:e})=>[i("span",null,d(e.fenxiao_type==1?o(a)("typeLabelOne"):o(a)("typeLabelTwo")),1)]),_:1}),l(m,{label:o(a)("operation"),fixed:"right",align:"right","min-width":"120"},{default:s(({row:e})=>[e.is_set_fenxiao==0?(c(),x(g,{key:0,type:"primary",link:"",onClick:D=>G(e.goods_id)},{default:s(()=>[_(d(o(a)("commissionSettings")),1)]),_:2},1032,["onClick"])):C("",!0),e.is_set_fenxiao?(c(),x(g,{key:1,type:"primary",link:"",onClick:D=>Y(e.goods_id)},{default:s(()=>[_(d(o(a)("detail")),1)]),_:2},1032,["onClick"])):C("",!0),e.is_set_fenxiao?(c(),x(g,{key:2,type:"primary",link:"",onClick:D=>G(e.goods_id)},{default:s(()=>[_(d(o(a)("commissionSettings")),1)]),_:2},1032,["onClick"])):C("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[le,n.loading]]),i("div",et,[i("div",tt,[l(R,{modelValue:y.value,"onUpdate:modelValue":t[8]||(t[8]=e=>y.value=e),size:"large",class:"px-[14px]",onChange:L,indeterminate:b.value},null,8,["modelValue","indeterminate"]),l(g,{onClick:t[9]||(t[9]=e=>P(1)),size:"small"},{default:s(()=>[_(d(o(a)("participate")),1)]),_:1}),l(g,{onClick:t[10]||(t[10]=e=>P(0)),size:"small"},{default:s(()=>[_(d(o(a)("offParticipate")),1)]),_:1})]),l(oe,{"current-page":n.page,"onUpdate:current-page":t[11]||(t[11]=e=>n.page=e),"page-size":n.limit,"onUpdate:page-size":t[12]||(t[12]=e=>n.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:n.total,onSizeChange:t[13]||(t[13]=e=>f()),onCurrentChange:f},null,8,["current-page","page-size","total"])])])]),_:1}),l(ze,{ref_key:"fenxiaoGoodsDetailDialog",ref:F},null,512)])}}});const Bt=Ne(at,[["__scopeId","data-v-8d9b568a"]]);export{Bt as default};
