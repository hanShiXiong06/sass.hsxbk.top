import{d as Be,f as Ge,x as Le,r as f,n as E,a2 as Ue,h as p,c as x,e as n,w as r,a as d,t as c,u as l,i as m,q as t,F,T as z,s as b,R as T,c8 as B,b6 as G,B as V,A as Re,a5 as L,U as y,ap as Ie,a3 as De,E as Oe,K as Fe,L as ze,bF as Ae,ab as Me,aC as Ke,M as je,a7 as qe,ax as We,ay as Ye,av as He,ac as Je,J as Xe,a1 as Ze,ad as Qe,W as ea,Y as aa,p as ta,g as oa}from"./index-a3bdc7eb.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css                        *//* empty css                        *//* empty css                    *//* empty css                *//* empty css                *//* empty css                          *//* empty css                 */import"./el-form-item-4ed993c7.js";/* empty css                  */import{_ as re}from"./goods_default-995568ac.js";import sa from"./goods-member-price-popup-e5f1b4fa.js";import la from"./goods-stock-edit-popup-30b2facd.js";import na from"./goods-price-edit-popup-ab4c3560.js";import{_ as ra}from"./goods-spread-popup.vue_vue_type_script_setup_true_lang-c3571be5.js";import{g as ia,b as da,U as ca,V as pa,W as A,X as ne,Y as ua,Z as ma,_ as _a}from"./goods-6b98b344.js";import{A as ga}from"./member-c164d00b.js";import{_ as ha}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                  *//* empty css                   *//* empty css                       */import"./browser-a1ac24ac.js";const M=w=>(ta("data-v-c25eeb48"),w=w(),oa(),w),fa={class:"main-container"},ba={class:"flex justify-between items-center"},va={class:"text-page-title"},ya={class:"region-input"},Pa=["placeholder"],ka=M(()=>d("span",{class:"separator"},"-",-1)),xa=["placeholder"],Ca={class:"region-input"},Ea=["placeholder"],Ta=M(()=>d("span",{class:"separator"},"-",-1)),Va=["placeholder"],wa={class:"mt-[10px]"},$a={class:"mb-[10px] flex items-center"},Sa=["onClick"],Na={class:"min-w-[70px] h-[70px] flex items-center justify-center"},Ba=M(()=>d("div",{class:"image-slot"},[d("img",{class:"w-[70px] h-[70px]",src:re})],-1)),Ga={key:1,class:"w-[70px] h-[70px]",src:re,fit:"contain"},La={class:"ml-2"},Ua=["title"],Ra={class:"text-primary text-[12px]"},Ia=["onClick"],Da=["onClick"],Oa={key:0},Fa={key:1},za={class:"mt-[16px] flex justify-end"},Aa=Be({__name:"list",setup(w){const U=Ge(),K=Le(),ie=K.meta.title,_=f(!1),o=E({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{goods_name:"",goods_category:[],goods_type:"",brand_id:"",label_ids:"",start_sale_num:"",end_sale_num:"",start_price:"",end_price:"",status:K.query.status||"1",order:"",sort:""}}),j=f(),C={number:/^\d{0,10}$/,digit:/^\d{0,10}(.?\d{0,2})$/},R=E([]),q=E([]),W=E([]),Y=E([]);(()=>{ia().then(s=>{const a=s.data;if(a){const i=[];a.forEach(k=>{const h=[];k.child_list&&k.child_list.forEach(N=>{h.push({value:N.category_id,label:N.category_name})}),i.push({value:k.category_id,label:k.category_name,children:h})}),R.splice(0,R.length,...i)}}),da().then(s=>{const a=s.data;if(a)for(const i in a)q.push(a[i])}),ca({}).then(s=>{const a=s.data;a&&W.push(...a)}),pa({}).then(s=>{const a=s.data;a&&Y.push(...a)})})();const de=(s,a)=>{o.searchParam.status=s.props.name,u()},$=f(),S=f(!1),ce=s=>{S.value=!1,H.value.toggleAllSelection()},H=f(),P=f([]),pe=s=>{P.value=s,$.value=!1,P.value.length>0&&P.value.length<o.data.length?S.value=!0:S.value=!1,P.value.length==o.data.length&&($.value=!0)},ue=s=>{const a=U.resolve({path:"/preview/wap",query:{page:`/addon/shop/pages/goods/detail?goods_id=${s.goods_id}`}});window.open(a.href)},me=s=>{let a="";s.order=="ascending"?a="asc":s.order=="descending"&&(a="desc"),a&&(o.searchParam.order=s.prop,o.searchParam.sort=a),u()},J=(s,a)=>{a?A({goods_ids:s.goods_id,status:a}).then(i=>{u()}):L.confirm(t("statusChangeTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{A({goods_ids:s.goods_id,status:a}).then(i=>{u()})})},X=s=>{if(P.value.length==0){y({type:"warning",message:`${t("batchEmptySelectedGoodsTips")}`});return}const a=[];P.value.forEach(i=>{a.push(i.goods_id)}),A({goods_ids:a,status:s}).then(i=>{u()})},_e=()=>{if(P.value.length==0){y({type:"warning",message:`${t("batchEmptySelectedGoodsTips")}`});return}L.confirm(t("batchGoodsDeleteTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{if(_.value)return;_.value=!0;const s=[];P.value.forEach(a=>{s.push(a.goods_id)}),ne({goods_ids:s}).then(()=>{u(),_.value=!1}).catch(()=>{_.value=!1})})},ge=Ie((s,a)=>{if(isNaN(s)||!C.number.test(s)){y({type:"warning",message:`${t("sortTips")}`});return}s>99999999&&(a.sort=99999999),ua({goods_id:a.goods_id,sort:s}).then(i=>{})}),u=(s=1)=>{if(o.searchParam.start_sale_num&&!C.digit.test(o.searchParam.start_sale_num)){y({type:"warning",message:`${t("startSaleNumTips")}`});return}if(o.searchParam.end_sale_num&&!C.digit.test(o.searchParam.end_sale_num)){y({type:"warning",message:`${t("endSaleNumTips")}`});return}if(Number(o.searchParam.start_sale_num)>Number(o.searchParam.end_sale_num)){y({type:"warning",message:`${t("shopSaleNumTips")}`});return}if(o.searchParam.start_price&&!C.digit.test(o.searchParam.start_price)){y({type:"warning",message:`${t("startPriceTips")}`});return}if(o.searchParam.end_price&&!C.digit.test(o.searchParam.end_price)){y({type:"warning",message:`${t("endPriceTips")}`});return}if(Number(o.searchParam.start_price)>Number(o.searchParam.end_price)){y({type:"warning",message:`${t("shopPriceTips")}`});return}o.loading=!0,o.page=s;const a=De(o.searchParam);ma({page:o.page,limit:o.limit,...a}).then(i=>{o.loading=!1,o.data=i.data.data,o.total=i.data.total}).catch(()=>{o.loading=!1})};u();const he=()=>{U.push("/shop/goods/real_edit")},fe=s=>{U.push(s.goods_edit_path+"?goods_id="+s.goods_id)},Z=f(null),be=s=>{Z.value.show(s)},Q=f(null),ve=s=>{Q.value.show(s)},ee=f(null),ye=s=>{ee.value.show(s)},ae=f([]);(()=>{ga().then(s=>{ae.value=s.data?s.data:[]})})();const te=f(null),Pe=s=>{te.value.show(s,ae.value)},ke=s=>{L.confirm(t("goodsCopyTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{_.value||(_.value=!0,_a({goods_id:s.goods_id}).then(a=>{a.code==1&&u(),_.value=!1}).catch(a=>{_.value=!1}))})},xe=s=>{L.confirm(t("goodsDeleteTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{_.value||(_.value=!0,ne({goods_ids:s}).then(()=>{u(),_.value=!1}).catch(()=>{_.value=!1}))})},Ce=s=>{s&&(s.resetFields(),o.searchParam.start_price="",o.searchParam.end_price="",o.searchParam.start_sale_num="",o.searchParam.end_sale_num="",u())};return(s,a)=>{const i=Oe,k=Fe,h=ze,N=Ae,I=Me,D=Ke,Ee=je,oe=qe,O=We,Te=Ye,Ve=He,v=Je,we=Xe,se=Ue("EditPen"),le=Ze,$e=Qe,Se=ea,Ne=aa;return p(),x("div",fa,[n(oe,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[d("div",ba,[d("span",va,c(l(ie)),1),n(i,{type:"primary",onClick:he},{default:r(()=>[m(c(l(t)("addGoods")),1)]),_:1})]),n(oe,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:r(()=>[n(Ee,{inline:!0,model:o.searchParam,ref_key:"searchFormRef",ref:j},{default:r(()=>[n(h,{label:l(t)("goodsName"),prop:"goods_name"},{default:r(()=>[n(k,{modelValue:o.searchParam.goods_name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.searchParam.goods_name=e),modelModifiers:{trim:!0},placeholder:l(t)("goodsNamePlaceholder"),maxlength:"60"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(h,{label:l(t)("goodsCategory"),prop:"goods_category"},{default:r(()=>[n(N,{modelValue:o.searchParam.goods_category,"onUpdate:modelValue":a[1]||(a[1]=e=>o.searchParam.goods_category=e),options:R,placeholder:l(t)("goodsCategoryPlaceholder"),clearable:"",props:{value:"value",label:"label",emitPath:!1}},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"]),n(h,{label:l(t)("goodsType"),prop:"goods_type"},{default:r(()=>[n(D,{modelValue:o.searchParam.goods_type,"onUpdate:modelValue":a[2]||(a[2]=e=>o.searchParam.goods_type=e),placeholder:l(t)("goodsTypePlaceholder"),clearable:""},{default:r(()=>[(p(!0),x(F,null,z(q,e=>(p(),b(I,{key:e.type,label:e.name,value:e.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(h,{label:l(t)("brand"),prop:"brand_id"},{default:r(()=>[n(D,{modelValue:o.searchParam.brand_id,"onUpdate:modelValue":a[3]||(a[3]=e=>o.searchParam.brand_id=e),placeholder:l(t)("brandPlaceholder"),clearable:""},{default:r(()=>[(p(!0),x(F,null,z(W,e=>(p(),b(I,{key:e.brand_id,label:e.brand_name,value:e.brand_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(h,{label:l(t)("labelIds"),prop:"label_ids"},{default:r(()=>[n(D,{modelValue:o.searchParam.label_ids,"onUpdate:modelValue":a[4]||(a[4]=e=>o.searchParam.label_ids=e),placeholder:l(t)("labelIdsPlaceholder"),clearable:""},{default:r(()=>[(p(!0),x(F,null,z(Y,e=>(p(),b(I,{key:e.label_id,label:e.label_name,value:e.label_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(h,{label:l(t)("saleNum"),prop:"sale_num"},{default:r(()=>[d("div",ya,[T(d("input",{type:"text",placeholder:l(t)("startSaleNumPlaceholder"),maxlength:"10","onUpdate:modelValue":a[5]||(a[5]=e=>o.searchParam.start_sale_num=e),onKeyup:a[6]||(a[6]=e=>l(B)(e))},null,40,Pa),[[G,o.searchParam.start_sale_num,void 0,{trim:!0}]]),ka,T(d("input",{type:"text",placeholder:l(t)("endSaleNumPlaceholder"),maxlength:"10","onUpdate:modelValue":a[7]||(a[7]=e=>o.searchParam.end_sale_num=e),onKeyup:a[8]||(a[8]=e=>l(B)(e))},null,40,xa),[[G,o.searchParam.end_sale_num,void 0,{trim:!0}]])])]),_:1},8,["label"]),n(h,{label:l(t)("skuPrice"),prop:"sku_price"},{default:r(()=>[d("div",Ca,[T(d("input",{type:"text",placeholder:l(t)("startPricePlaceholder"),maxlength:"10","onUpdate:modelValue":a[9]||(a[9]=e=>o.searchParam.start_price=e),onKeyup:a[10]||(a[10]=e=>l(B)(e))},null,40,Ea),[[G,o.searchParam.start_price,void 0,{trim:!0}]]),Ta,T(d("input",{type:"text",placeholder:l(t)("endPricePlaceholder"),maxlength:"10","onUpdate:modelValue":a[11]||(a[11]=e=>o.searchParam.end_price=e),onKeyup:a[12]||(a[12]=e=>l(B)(e))},null,40,Va),[[G,o.searchParam.end_price,void 0,{trim:!0}]])])]),_:1},8,["label"]),n(h,null,{default:r(()=>[n(i,{type:"primary",onClick:a[13]||(a[13]=e=>u())},{default:r(()=>[m(c(l(t)("search")),1)]),_:1}),n(i,{onClick:a[14]||(a[14]=e=>Ce(j.value))},{default:r(()=>[m(c(l(t)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),d("div",wa,[n(Te,{modelValue:o.searchParam.status,"onUpdate:modelValue":a[15]||(a[15]=e=>o.searchParam.status=e),class:"goods-tabs",onTabClick:de},{default:r(()=>[n(O,{label:l(t)("statusOn"),name:"1"},null,8,["label"]),n(O,{label:l(t)("statusOff"),name:"0"},null,8,["label"]),n(O,{label:l(t)("statusAll"),name:""},null,8,["label"])]),_:1},8,["modelValue"]),d("div",$a,[n(Ve,{modelValue:$.value,"onUpdate:modelValue":a[16]||(a[16]=e=>$.value=e),size:"large",class:"px-[14px]",onChange:ce,indeterminate:S.value},null,8,["modelValue","indeterminate"]),o.searchParam.status!="1"?(p(),b(i,{key:0,onClick:a[17]||(a[17]=e=>X(1)),size:"small"},{default:r(()=>[m(c(l(t)("batchOnGoods")),1)]),_:1})):V("",!0),o.searchParam.status!="0"?(p(),b(i,{key:1,onClick:a[18]||(a[18]=e=>X(0)),size:"small"},{default:r(()=>[m(c(l(t)("batchOffGoods")),1)]),_:1})):V("",!0),n(i,{onClick:_e,size:"small"},{default:r(()=>[m(c(l(t)("batchDeleteGoods")),1)]),_:1})]),T((p(),b($e,{data:o.data,size:"large",ref_key:"goodsListTableRef",ref:H,onSortChange:me,onSelectionChange:pe},{empty:r(()=>[d("span",null,c(o.loading?"":l(t)("emptyData")),1)]),default:r(()=>[n(v,{type:"selection",width:"55"}),n(v,{prop:"goods_id",label:l(t)("goodsInfo"),"min-width":"300"},{default:r(({row:e})=>[d("div",{class:"flex items-center cursor-pointer",onClick:g=>ue(e)},[d("div",Na,[e.goods_cover_thumb_small?(p(),b(we,{key:0,class:"w-[70px] h-[70px]",src:l(Re)(e.goods_cover_thumb_small),fit:"contain"},{error:r(()=>[Ba]),_:2},1032,["src"])):(p(),x("img",Ga))]),d("div",La,[d("span",{title:e.goods_name,class:"multi-hidden"},c(e.goods_name),9,Ua),d("span",Ra,c(e.goods_type_name),1)])],8,Sa)]),_:1},8,["label"]),n(v,{prop:"price",label:l(t)("skuPrice"),"min-width":"120",align:"right",sortable:"custom"},{default:r(({row:e})=>[d("div",{class:"cursor-pointer price-wrap",onClick:g=>be(e)},[d("span",null,"￥"+c(e.goodsSku.price),1),n(le,{class:"icon-wrap ml-[5px] invisible"},{default:r(()=>[n(se)]),_:1})],8,Ia)]),_:1},8,["label"]),n(v,{prop:"stock",label:l(t)("stock"),"min-width":"120",sortable:"custom"},{default:r(({row:e})=>[d("div",{class:"cursor-pointer stock-wrap",onClick:g=>ve(e)},[d("span",null,c(e.stock),1),n(le,{class:"icon-wrap ml-[5px] invisible"},{default:r(()=>[n(se)]),_:1})],8,Da)]),_:1},8,["label"]),n(v,{prop:"sale_num",label:l(t)("saleNum"),"min-width":"100",sortable:"custom"},null,8,["label"]),n(v,{prop:"status",label:l(t)("status"),"min-width":"100"},{default:r(({row:e})=>[e.status==1?(p(),x("div",Oa,c(l(t)("statusOn")),1)):V("",!0),e.status==0?(p(),x("div",Fa,c(l(t)("statusOff")),1)):V("",!0)]),_:1},8,["label"]),n(v,{prop:"sort",label:l(t)("sort"),"min-width":"120",sortable:"custom"},{default:r(({row:e})=>[n(k,{modelValue:e.sort,"onUpdate:modelValue":g=>e.sort=g,class:"w-[70px]",maxlength:"8",onBlur:g=>l(ge)(e.sort,e)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1},8,["label"]),n(v,{prop:"create_time",label:l(t)("createTime"),"min-width":"150",sortable:"custom"},{default:r(({row:e})=>[d("div",null,c(e.create_time),1)]),_:1},8,["label"]),n(v,{label:l(t)("operation"),fixed:"right",align:"right","min-width":"120"},{default:r(({row:e})=>[n(i,{type:"primary",link:"",onClick:g=>fe(e)},{default:r(()=>[m(c(l(t)("edit")),1)]),_:2},1032,["onClick"]),n(i,{type:"primary",link:"",onClick:g=>ye(e)},{default:r(()=>[m(c(l(t)("spreadGoods")),1)]),_:2},1032,["onClick"]),n(i,{type:"primary",link:"",onClick:g=>Pe(e)},{default:r(()=>[m(c(l(t)("memberPrice")),1)]),_:2},1032,["onClick"]),e.status==1?(p(),b(i,{key:0,type:"primary",link:"",onClick:g=>J(e,0)},{default:r(()=>[m(c(l(t)("statusActionOff")),1)]),_:2},1032,["onClick"])):(p(),b(i,{key:1,type:"primary",link:"",onClick:g=>J(e,1)},{default:r(()=>[m(c(l(t)("statusActionOn")),1)]),_:2},1032,["onClick"])),n(i,{type:"primary",link:"",onClick:g=>ke(e)},{default:r(()=>[m(c(l(t)("copyGoods")),1)]),_:2},1032,["onClick"]),e.status!=1?(p(),b(i,{key:2,type:"primary",link:"",onClick:g=>xe(e.goods_id)},{default:r(()=>[m(c(l(t)("delete")),1)]),_:2},1032,["onClick"])):V("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[Ne,o.loading]]),d("div",za,[n(Se,{"current-page":o.page,"onUpdate:current-page":a[19]||(a[19]=e=>o.page=e),"page-size":o.limit,"onUpdate:page-size":a[20]||(a[20]=e=>o.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:o.total,onSizeChange:a[21]||(a[21]=e=>u()),onCurrentChange:u},null,8,["current-page","page-size","total"])])])]),_:1}),n(la,{ref_key:"goodsStockEditPopupRef",ref:Q,onLoad:u},null,512),n(na,{ref_key:"goodsPriceEditPopupRef",ref:Z,onLoad:u},null,512),n(ra,{ref_key:"goodsSpreadPopupRef",ref:ee},null,512),n(sa,{ref_key:"memberPricePopupRef",ref:te,onLoad:u},null,512)])}}});const Et=ha(Aa,[["__scopeId","data-v-c25eeb48"]]);export{Et as default};
