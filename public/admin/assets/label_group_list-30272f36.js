import{d as M,x as R,f as S,n as j,r as x,h as C,c as I,e as o,w as r,a as u,t as p,u as s,i as c,q as l,R as q,s as W,a5 as K,aq as X,U as Y,E as A,ay as H,az as J,K as O,L as Q,M as Z,a7 as ee,ad as ae,ae as te,W as oe,Y as le}from"./index-99f00cf3.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                    *//* empty css                  */import{V as ne,W as re,X as se}from"./goods-4a8ebb3e.js";import{_ as ie}from"./label-group-edit.vue_vue_type_style_index_0_lang-d828b1b0.js";/* empty css                  *//* empty css                   */const pe={class:"main-container"},de={class:"flex justify-between items-center"},me={class:"text-page-title"},ue={class:"mt-[10px]"},ce={class:"mt-[16px] flex justify-end"},Ue=M({__name:"label_group_list",setup(_e){const E=R(),k=S(),L=E.meta.title,w=t=>{k.push({path:t})},a=j({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{group_name:"",order:"",sort:""}}),f=x(),G=t=>{let e="";t.order=="ascending"?e="asc":t.order=="descending"&&(e="desc"),e&&(a.searchParam.order=t.prop,a.searchParam.sort=e),i()},i=(t=1)=>{a.loading=!0,a.page=t,ne({page:a.page,limit:a.limit,...a.searchParam}).then(e=>{a.loading=!1,a.data=e.data.data,a.total=e.data.total}).catch(()=>{a.loading=!1})};i();const m=x(null),P=()=>{m.value.setFormData(),m.value.showDialog=!0},T=t=>{m.value.setFormData(t),m.value.showDialog=!0},V=t=>{K.confirm(l("labelGroupDeleteTips"),l("warning"),{confirmButtonText:l("confirm"),cancelButtonText:l("cancel"),type:"warning"}).then(()=>{re(t).then(()=>{i()}).catch(()=>{})})},B=X((t,e)=>{if(isNaN(t)||!/^\d{0,8}$/.test(t)){Y({type:"warning",message:`${l("sortTips")}`});return}t>99999999&&(e.sort=99999999),se({group_id:e.group_id,sort:t}).then(d=>{})}),D=t=>{t&&(t.resetFields(),i())};return(t,e)=>{const d=A,b=H,N=J,h=O,v=Q,$=Z,y=ee,g=ae,F=te,z=oe,U=le;return C(),I("div",pe,[o(y,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[u("div",de,[u("span",me,p(s(L)),1),o(d,{type:"primary",onClick:P},{default:r(()=>[c(p(s(l)("addLabelGroup")),1)]),_:1})]),o(N,{"model-value":"/shop/goods/label/group",onTabChange:w},{default:r(()=>[o(b,{label:s(l)("tabGoodsLabel"),name:"/shop/goods/label"},null,8,["label"]),o(b,{label:s(l)("tabGoodsLabelGroup"),name:"/shop/goods/label/group"},null,8,["label"])]),_:1}),o(y,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:r(()=>[o($,{inline:!0,model:a.searchParam,ref_key:"searchFormRef",ref:f},{default:r(()=>[o(v,{label:s(l)("groupName"),prop:"group_name"},{default:r(()=>[o(h,{modelValue:a.searchParam.group_name,"onUpdate:modelValue":e[0]||(e[0]=n=>a.searchParam.group_name=n),modelModifiers:{trim:!0},placeholder:s(l)("groupNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(v,null,{default:r(()=>[o(d,{type:"primary",onClick:e[1]||(e[1]=n=>i())},{default:r(()=>[c(p(s(l)("search")),1)]),_:1}),o(d,{onClick:e[2]||(e[2]=n=>D(f.value))},{default:r(()=>[c(p(s(l)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),u("div",ue,[q((C(),W(F,{data:a.data,size:"large",onSortChange:G},{empty:r(()=>[u("span",null,p(a.loading?"":s(l)("emptyData")),1)]),default:r(()=>[o(g,{prop:"group_name",label:s(l)("groupName"),"min-width":"120"},null,8,["label"]),o(g,{prop:"sort",label:s(l)("sort"),"min-width":"120",sortable:"custom"},{default:r(({row:n})=>[o(h,{modelValue:n.sort,"onUpdate:modelValue":_=>n.sort=_,modelModifiers:{trim:!0},class:"!w-[100px]",maxlength:"8",onBlur:_=>s(B)(n.sort,n)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1},8,["label"]),o(g,{label:s(l)("operation"),fixed:"right",align:"right","min-width":"120"},{default:r(({row:n})=>[o(d,{type:"primary",link:"",onClick:_=>T(n)},{default:r(()=>[c(p(s(l)("edit")),1)]),_:2},1032,["onClick"]),o(d,{type:"primary",link:"",onClick:_=>V(n.group_id)},{default:r(()=>[c(p(s(l)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[U,a.loading]]),u("div",ce,[o(z,{"current-page":a.page,"onUpdate:current-page":e[3]||(e[3]=n=>a.page=n),"page-size":a.limit,"onUpdate:page-size":e[4]||(e[4]=n=>a.limit=n),layout:"total, sizes, prev, pager, next, jumper",total:a.total,onSizeChange:e[5]||(e[5]=n=>i()),onCurrentChange:i},null,8,["current-page","page-size","total"])])]),o(ie,{ref_key:"editLabelGroupDialog",ref:m,onComplete:i},null,512)]),_:1})])}}});export{Ue as default};
