import{d as L,f as S,r as E,h as V,c as U,R as N,s as k,w as a,e as l,a as u,t as _,u as t,q as o,i as c,c8 as w,U as T,at as I,au as K,L as j,ac as M,K as $,ad as q,a7 as z,M as G,E as O,Y}from"./index-37fee5a0.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css               */import"./el-form-item-4ed993c7.js";/* empty css                       *//* empty css                 */import{g as A,s as H}from"./team-118c31ba.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";const P={class:"main-container"},Q={class:"text text-[14px] leading-[25px]"},W={class:"fixed-footer-wrap"},X={class:"fixed-footer"},Z=L({__name:"level",setup(ee){S();const v=E(!1),i=E({is_open:"0",level:[],loading:!1}),b=()=>{v.value=!0,A().then(e=>{i.value.is_open=e.data.is_open.toString(),i.value.level=e.data.level,v.value=!1})};b();const h=(e,n,m)=>{const d=/^([1-9]\d*|0)(\.\d+)?$|^0\.(?!0+\b)\d+(\d*[1-9])?$/;if(!e)return!1;e=Number(e),d.test(e)||(T.error(o("teamTips")),e=0),parseFloat(e)>100&&(T.error(o("teamTipsNumericalRange")),e=100),i.value.level.forEach((p,f)=>{p.level_id==m.level_id&&(p[n]=parseFloat(e).toFixed(2))})};let g=!1;const y=()=>{let e={};if(e.is_open=i.value.is_open,e.level=[],i.value.level.forEach((n,m)=>{let d={};d.level_id=n.level_id,d.team_rate=n.team_rate,d.team_flat_rate=n.team_flat_rate,e.level.push(d)}),g)return!1;g=!0,H(e).then(n=>{b(),g=!1})};return(e,n)=>{const m=I,d=K,p=j,f=M,x=$,R=q,C=z,B=G,D=O,F=Y;return V(),U("div",P,[N((V(),k(C,{class:"card !border-none",shadow:"never"},{default:a(()=>[l(B,{class:"page-form",model:e.formData,"label-width":"180px",rules:e.formRules,ref:"formRef"},{default:a(()=>[u("div",Q,_(t(o)("baseTitle")),1),l(C,{class:"card !border-none",shadow:"never"},{default:a(()=>[l(p,{label:t(o)("isEnable")},{default:a(()=>[l(d,{modelValue:i.value.is_open,"onUpdate:modelValue":n[0]||(n[0]=s=>i.value.is_open=s)},{default:a(()=>[l(m,{label:"1"},{default:a(()=>[c(_(t(o)("are")),1)]),_:1}),l(m,{label:"0"},{default:a(()=>[c(_(t(o)("no")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(p,{label:t(o)("teamLevel")},{default:a(()=>[l(R,{data:i.value.level,size:"large",ref:"goodsListTableRef",onSelectionChange:e.handleSelectionChange},{empty:a(()=>[u("span",null,_(t(o)("emptyData")),1)]),default:a(()=>[l(f,{prop:"level_name",label:t(o)("fenxiaoLevel"),"min-width":"200"},{default:a(({row:s})=>[u("div",null,_(s.level_name),1)]),_:1},8,["label"]),l(f,{prop:"team_rate",label:t(o)("bonus"),"min-width":"200"},{default:a(({row:s})=>[l(x,{modelValue:s.team_rate,"onUpdate:modelValue":r=>s.team_rate=r,maxlength:"6","show-word-limit":"",onChange:r=>h(r,"team_rate",s),clearable:"",class:"!w-[180px]",onKeyup:n[1]||(n[1]=r=>t(w)(r)),placeholder:t(o)("setBonus")},{append:a(()=>[c("%")]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","placeholder"])]),_:1},8,["label"]),l(f,{prop:"team_flat_rate",label:t(o)("bonus_flat"),"min-width":"300"},{default:a(({row:s})=>[l(x,{modelValue:s.team_flat_rate,"onUpdate:modelValue":r=>s.team_flat_rate=r,maxlength:"6","show-word-limit":"",onChange:r=>h(r,"team_flat_rate",s),clearable:"",class:"!w-[180px]",onKeyup:n[2]||(n[2]=r=>t(w)(r)),placeholder:t(o)("setBonus")},{append:a(()=>[c("%")]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","placeholder"])]),_:1},8,["label"])]),_:1},8,["data","onSelectionChange"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model","rules"])]),_:1})),[[F,v.value]]),u("div",W,[u("div",X,[l(D,{type:"primary",onClick:y},{default:a(()=>[c(_(t(o)("save")),1)]),_:1})])])])}}});const he=J(Z,[["__scopeId","data-v-62ca26f9"]]);export{he as default};
