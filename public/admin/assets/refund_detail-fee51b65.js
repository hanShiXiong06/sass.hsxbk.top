import{d as he,x as ye,f as be,r as v,n as Q,l as M,q as e,h as i,c as m,e as t,w as l,u as a,R as X,s as x,a as s,t as r,B as c,F as $,T as L,A as P,i as E,Z as ge,a5 as we,aQ as ke,a7 as Re,L as Ee,aM as Fe,aN as Ve,J as De,ac as Ce,ad as Te,aa as Be,M as Ne,K as Se,E as Ae,X as Ie,ab as Ue,aC as qe,Y as Me,p as $e,g as Le}from"./index-5a756a51.js";/* empty css                   *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                 *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                 *//* empty css                        *//* empty css               *//* empty css               */import"./el-form-item-4ed993c7.js";/* empty css                *//* empty css                   *//* empty css                       */import{_ as Pe}from"./goods_default-665e448a.js";import{A as Oe,B as Y,C as Z}from"./order-dc33c81d.js";import{f as je}from"./shop_address-0cd5276b.js";import{_ as ze}from"./_plugin-vue_export-helper-c27b6911.js";const G=D=>($e("data-v-144d6305"),D=D(),Le(),D),He={class:"main-container"},Je={class:"panel-title"},Ke={class:"input-width"},Qe={class:"input-width"},Xe={class:"input-width"},Ye={class:"input-width"},Ze={class:"input-width"},Ge={class:"input-width"},We={class:"input-width"},el={class:"input-width"},ll={class:"input-width line-feed"},al={class:"panel-title"},tl={class:"input-width"},sl={class:"input-width"},ol={class:"input-width"},rl={class:"input-width"},nl={class:"input-width"},dl={key:0,class:"input-width flex"},ul=G(()=>s("div",{class:"image-slot"},[s("img",{class:"w-[70px] h-[70px]",src:Pe})],-1)),il={class:"max-w-[100%] break-all"},pl={key:0,class:"panel-title"},_l={class:"input-width"},cl={class:"input-width"},fl={class:"input-width"},ml={class:"panel-title"},vl={class:"mb-[20px]"},xl={class:"ml-[30px] text-[14px] mr-[20px]"},hl={class:"text-[14px]"},yl={class:"flex mt-[10px]"},bl={class:"flex ml-[30px] mt-[15px]"},gl={class:"text-[14px] text-[#ff7f5b]"},wl={class:"ml-[10px]"},kl={class:"text-[14px] text-[#a4a4a4]"},Rl={class:"text-[14px] text-[#a4a4a4]"},El={class:"text-[14px] text-[#a4a4a4]"},Fl={class:"panel-title"},Vl={class:"flex"},Dl={class:"flex items-center w-[50px] h-[50px] mr-[10px]"},Cl=["src"],Tl={class:"flex flex-col flex-1"},Bl={key:2,class:"mt-[50px] mb-[20px]"},Nl={class:"mb-[100px]",style:{"min-height":"100px"}},Sl={class:"mr-[20px] min-w-[71px]"},Al={class:"leading-[1] w-full text-[14px] w-[100px] flex justify-end"},Il={class:"leading-[1] w-full text-[14px] w-[100px] flex justify-end mt-[15px]"},Ul=G(()=>s("div",{class:"w-[16px] h-[16px] flex items-center bg-[#D1EBFF] border-[1px] border-[#0091FF] rounded-[999px]"},[s("div",{class:"w-[8px] h-[8px] mx-auto bg-[#0091FF] rounded-[999px]"})],-1)),ql={key:0,class:"w-[2px] h-[50px] bg-[#D1EBFF] mx-auto"},Ml={class:"leading-[1] ml-[20px] text-[14px]"},$l={class:"leading-[1] ml-[20px] text-[14px] mt-[15px]"},Ll={class:"dialog-footer"},Pl={class:"dialog-footer"},Ol={class:"dialog-footer"},jl=he({__name:"refund_detail",setup(D){const O=ye(),N=be(),W=O.meta.title,y=parseInt(O.query.refund_id),b=v(!0),f=v(!1),o=v(null),F=async(_=0)=>{b.value=!0,o.value=null,await Oe(_).then(({data:n})=>{o.value=n,o.value.order_goods=[n.order_goods]}).catch(()=>{}),b.value=!1};y?F(y):b.value=!1;const g=v(!1),p=Q({...{shop_reason:"",refund_address_id:"",money:"",type:"",apply_money:0,refund_type:1}}),j=v(),z=v(),ee=M(()=>({money:[{required:!0,message:e("moneyPlaceholder"),trigger:"blur"}],refund_address_id:[{required:!0,message:e("refundaddressPlaceholder"),trigger:"blur"}]})),le=M(()=>({shop_reason:[{required:!0,message:e("shopReasonPlaceholder"),trigger:"blur"}]})),V=v(!1),ae=()=>{p.type="agree",p.refund_type=o.value.refund_type,p.apply_money=o.value.apply_money,p.money=o.value.apply_money,V.value=!0,o.value.refund_type==2&&te()},H=v([]),te=()=>{je().then(_=>{H.value=_.data,_.data.forEach(n=>{n.is_refund_address==1&&(p.refund_address_id=n.id)})})},se=async _=>{f.value||!_||await _.validate(async n=>{n&&(f.value=!0,Y({order_refund_no:o.value.order_refund_no,money:p.money,is_agree:1,refund_address_id:p.refund_address_id}).then(()=>{V.value=!1,f.value=!1,F(y)}).catch(()=>{f.value=!1}))})},oe=()=>{p.type="refuse",p.shop_reason="",g.value=!0},re=async _=>{f.value||!_||await _.validate(async n=>{n&&(f.value=!0,Y({order_refund_no:o.value.order_refund_no,is_agree:0,shop_reason:p.shop_reason}).then(S=>{F(y),f.value=!1,g.value=!1}).catch(()=>{f.value=!1,g.value=!1}))})},ne=()=>{we.confirm(e("orderDeliveryTips"),e("warning"),{confirmButtonText:e("confirm"),cancelButtonText:e("cancel"),type:"warning"}).then(()=>{Z({order_refund_no:o.value.order_refund_no,is_agree:1}).then(()=>{F(y)})})},w=v(!1),C=Q({shop_reason:""}),J=v(),de=M(()=>({shop_reason:[{required:!0,message:e("shopReasonPlaceholder"),trigger:"blur"}]})),ue=async _=>{f.value||!_||await _.validate(async n=>{n&&(f.value=!0,Z({order_refund_no:o.value.order_refund_no,is_agree:0,shop_reason:C.shop_reason}).then(S=>{F(y),f.value=!1,w.value=!1}).catch(()=>{f.value=!1,w.value=!1}))})},ie=()=>{p.type="refuse",p.shop_reason="",w.value=!0},pe=()=>{const _=N.resolve({path:"/member/refund/detail",query:{refund_no:o.value.refund_no}});window.open(_.href,"_blank")},_e=_=>{const n=N.resolve({path:"/phone_shop/order/detail",query:{order_id:_}});window.open(n.href,"_blank")};return(_,n)=>{const S=ke,A=Re,u=Ee,h=Fe,T=Ve,ce=De,I=Ce,fe=Te,me=Be,B=Ne,U=Se,k=Ae,q=Ie,ve=Ue,xe=qe,K=Me;return i(),m("div",He,[t(A,{class:"card !border-none mb-[15px]",shadow:"never"},{default:l(()=>[t(S,{content:a(W),icon:_.ArrowLeft,onBack:n[0]||(n[0]=d=>a(N).push({path:"/phone_shop/order/refund"}))},null,8,["content","icon"])]),_:1}),X((i(),x(B,{model:o.value,"label-width":"100px",class:"page-form","label-position":"left"},{default:l(()=>[o.value?(i(),x(A,{key:0,class:"box-card !border-none relative",shadow:"never"},{default:l(()=>[s("h3",Je,r(a(e)("orderInfo")),1),t(T,{class:"row-bg px-[30px] mb-[20px]",gutter:20},{default:l(()=>[t(h,{span:8},{default:l(()=>[t(u,{label:a(e)("orderNo")},{default:l(()=>[s("div",{class:"input-width text-primary cursor-pointer",onClick:n[1]||(n[1]=d=>_e(o.value.order_id))},r(o.value.order_main.order_no),1)]),_:1},8,["label"]),t(u,{label:a(e)("orderForm")},{default:l(()=>[s("div",Ke,r(o.value.order_main.order_from_name),1)]),_:1},8,["label"]),o.value.order_main.out_trade_no?(i(),x(u,{key:0,label:a(e)("outTradeNo")},{default:l(()=>[s("div",Qe,r(o.value.order_main.out_trade_no),1)]),_:1},8,["label"])):c("",!0),o.value.pay_refund?(i(),x(u,{key:1,label:a(e)("payType")},{default:l(()=>[s("div",Xe,r(o.value.pay_refund.type_name),1)]),_:1},8,["label"])):c("",!0)]),_:1}),t(h,{span:8},{default:l(()=>[t(u,{label:a(e)("deliveryType")},{default:l(()=>[s("div",Ye,r(o.value.order_main.delivery_type_name),1)]),_:1},8,["label"]),s("div",null,[t(u,{label:a(e)("takerName")},{default:l(()=>[s("div",Ze,r(o.value.order_main.taker_name),1)]),_:1},8,["label"]),t(u,{label:a(e)("takerMobile")},{default:l(()=>[s("div",Ge,r(o.value.order_main.taker_mobile),1)]),_:1},8,["label"]),t(u,{label:a(e)("takerFullAddress")},{default:l(()=>[s("div",We,r(o.value.order_main.taker_full_address),1)]),_:1},8,["label"])])]),_:1}),t(h,{span:8},{default:l(()=>[t(u,{label:a(e)("memberRemark")},{default:l(()=>[s("div",el,r(o.value.order_main.member_remark),1)]),_:1},8,["label"]),t(u,{label:a(e)("notes")},{default:l(()=>[s("div",ll,r(o.value.order_main.shop_remark),1)]),_:1},8,["label"])]),_:1})]),_:1}),s("h3",al,r(a(e)("afterSales")),1),t(T,{class:"row-bg px-[30px] mb-[20px]",gutter:20},{default:l(()=>[t(h,{span:8},{default:l(()=>[t(u,{label:a(e)("orderRefundNo")},{default:l(()=>[s("div",tl,r(o.value.order_refund_no),1)]),_:1},8,["label"]),t(u,{label:a(e)("refundType")},{default:l(()=>[s("div",sl,r(o.value.refund_type_name),1)]),_:1},8,["label"]),t(u,{label:a(e)("createTime")},{default:l(()=>[s("div",ol,r(o.value.create_time),1)]),_:1},8,["label"])]),_:1}),t(h,{span:8},{default:l(()=>[t(u,{label:a(e)("refundMoney")},{default:l(()=>[s("div",rl,"￥"+r(o.value.apply_money),1)]),_:1},8,["label"]),t(u,{label:a(e)("refundReason")},{default:l(()=>[s("div",nl,r(o.value.reason),1)]),_:1},8,["label"])]),_:1})]),_:1}),t(T,{class:"row-bg px-[30px] mb-[20px]",gutter:20},{default:l(()=>[t(h,{span:8},{default:l(()=>[t(u,{label:a(e)("refundVoucher")},{default:l(()=>[o.value.voucher?(i(),m("div",dl,[(i(!0),m($,null,L(o.value.voucher,(d,R)=>(i(),m("div",{class:"mr-3",key:R},[d?(i(),x(ce,{key:0,class:"w-[70px] h-[70px]",src:a(P)(d),fit:"contain","preview-src-list":[a(P)(d)]},{error:l(()=>[ul]),_:2},1032,["src","preview-src-list"])):c("",!0)]))),128))])):c("",!0)]),_:1},8,["label"]),t(u,{label:a(e)("refundRemark")},{default:l(()=>[s("div",il,r(o.value.remark),1)]),_:1},8,["label"])]),_:1})]),_:1}),o.value.status==4?(i(),m("h3",pl,"买家退货信息")):c("",!0),o.value.status==4?(i(),x(T,{key:1,class:"row-bg px-[30px] mb-[20px]",gutter:20},{default:l(()=>[t(h,{span:8},{default:l(()=>[t(u,{label:a(e)("expressCompany")},{default:l(()=>[s("div",_l,r(o.value.delivery.express_company),1)]),_:1},8,["label"])]),_:1}),t(h,{span:8},{default:l(()=>[t(u,{label:a(e)("expressNumber")},{default:l(()=>[s("div",cl,r(o.value.delivery.express_number),1)]),_:1},8,["label"])]),_:1}),t(h,{span:8},{default:l(()=>[t(u,{label:a(e)("expressRemark")},{default:l(()=>[s("div",fl,r(o.value.delivery.remark),1)]),_:1},8,["label"])]),_:1})]),_:1})):c("",!0),s("h3",ml,r(a(e)("refundStatus")),1),s("div",vl,[s("p",null,[s("span",xl,r(a(e)("refundStatus"))+"：",1),s("span",hl,r(o.value.status_name),1)]),s("div",yl,[o.value.status==1?(i(),m("span",{key:0,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:ae},r(a(e)("agree")),1)):c("",!0),o.value.status==1?(i(),m("span",{key:1,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:oe},r(a(e)("refuse")),1)):c("",!0),o.value.status==4&&o.value.refund_type==2?(i(),m("span",{key:2,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:ne},r(a(e)("confirmDelivery")),1)):c("",!0),o.value.status==4&&o.value.refund_type==2?(i(),m("span",{key:3,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:ie},r(a(e)("refuse")),1)):c("",!0),o.value.status==6?(i(),m("span",{key:4,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:pe},r(a(e)("transferAccounts")),1)):c("",!0)]),s("div",bl,[s("span",gl,r(a(e)("remind"))+"：",1),s("div",wl,[s("p",kl,r(a(e)("remindTips1")),1),s("p",Rl,r(a(e)("remindTips2")),1),s("p",El,r(a(e)("remindTips3")),1)])])]),s("h3",Fl,r(a(e)("goodsDetail")),1),t(fe,{data:o.value.order_goods,size:"large"},{default:l(()=>[t(I,{label:a(e)("goodsName"),align:"left",width:"300"},{default:l(({row:d})=>[s("div",Vl,[s("div",Dl,[s("img",{class:"w-[50px] h-[50px]",src:a(P)(d.goods_image)},null,8,Cl)]),s("div",Tl,[s("span",null,r(d.goods_name),1)])])]),_:1},8,["label"]),t(I,{prop:"price",label:a(e)("price"),"min-width":"50",align:"left"},null,8,["label"]),t(I,{prop:"num",label:a(e)("num"),"min-width":"50",align:"right"},null,8,["label"])]),_:1},8,["data"]),o.value.refund_log.length>0?(i(),m("h3",Bl,r(a(e)("operateLog")),1)):c("",!0),s("div",Nl,[o.value.refund_log.length>0?(i(!0),m($,{key:0},L(o.value.refund_log,(d,R)=>(i(),m("div",{class:"flex",key:R},[s("div",Sl,[s("div",Al,r(d.create_time.split(" ")[0]),1),s("div",Il,r(d.create_time.split(" ")[1]),1)]),s("div",null,[Ul,R+1!=o.value.refund_log.length?(i(),m("div",ql)):c("",!0)]),s("div",null,[s("div",Ml,r(d.main_type_name)+r(d.main_name),1),s("div",$l,r(d.type_name),1)])]))),128)):c("",!0)])]),_:1})):c("",!0),!b.value&&!o.value?(i(),x(A,{key:1,class:"box-card !border-none relative",shadow:"never"},{default:l(()=>[t(me,{description:a(e)("orderInfoEmpty")},null,8,["description"])]),_:1})):c("",!0)]),_:1},8,["model"])),[[K,b.value]]),t(q,{modelValue:g.value,"onUpdate:modelValue":n[5]||(n[5]=d=>g.value=d),title:a(e)("orderRefundRefuse"),width:"460px",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:l(()=>[s("span",Ll,[t(k,{onClick:n[3]||(n[3]=d=>g.value=!1)},{default:l(()=>[E(r(a(e)("cancel")),1)]),_:1}),t(k,{type:"primary",loading:f.value,onClick:n[4]||(n[4]=d=>re(z.value))},{default:l(()=>[E(r(a(e)("confirm")),1)]),_:1},8,["loading"])])]),default:l(()=>[t(B,{model:p,"label-width":"90px",ref_key:"refuseFormRef",ref:z,rules:a(le),class:"page-form"},{default:l(()=>[t(u,{label:a(e)("refuseReason"),prop:"shop_reason"},{default:l(()=>[t(U,{modelValue:p.shop_reason,"onUpdate:modelValue":n[2]||(n[2]=d=>p.shop_reason=d),type:"textarea",rows:"4",clearable:"",class:"input-width",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),t(q,{modelValue:V.value,"onUpdate:modelValue":n[10]||(n[10]=d=>V.value=d),title:a(e)("orderRefundAgree"),width:"460px",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:l(()=>[s("span",Pl,[t(k,{onClick:n[8]||(n[8]=d=>V.value=!1)},{default:l(()=>[E(r(a(e)("cancel")),1)]),_:1}),t(k,{type:"primary",loading:f.value,onClick:n[9]||(n[9]=d=>se(j.value))},{default:l(()=>[E(r(a(e)("confirm")),1)]),_:1},8,["loading"])])]),default:l(()=>[X((i(),x(B,{onSubmit:ge(_.onSubmit,["prevent"]),model:p,"label-width":"120px",ref_key:"formRef",ref:j,rules:a(ee),class:"page-form"},{default:l(()=>[t(u,{label:a(e)("applyMoney")},{default:l(()=>[s("span",null,"￥"+r(p.apply_money),1)]),_:1},8,["label"]),t(u,{label:a(e)("agreeMoney"),prop:"money"},{default:l(()=>[t(U,{modelValue:p.money,"onUpdate:modelValue":n[6]||(n[6]=d=>p.money=d),clearable:"",class:"input-width"},null,8,["modelValue"])]),_:1},8,["label"]),p.refund_type==2?(i(),x(u,{key:0,label:a(e)("refundDeliveryAddress"),prop:"refund_address_id"},{default:l(()=>[t(xe,{modelValue:p.refund_address_id,"onUpdate:modelValue":n[7]||(n[7]=d=>p.refund_address_id=d),clearable:"",class:"input-item"},{default:l(()=>[(i(!0),m($,null,L(H.value,(d,R)=>(i(),x(ve,{key:R,label:d.full_address,value:d.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])):c("",!0)]),_:1},8,["onSubmit","model","rules"])),[[K,b.value]])]),_:1},8,["modelValue","title"]),t(q,{modelValue:w.value,"onUpdate:modelValue":n[14]||(n[14]=d=>w.value=d),title:a(e)("orderRefundRefuse"),width:"460px",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:l(()=>[s("span",Ol,[t(k,{onClick:n[12]||(n[12]=d=>w.value=!1)},{default:l(()=>[E(r(a(e)("cancel")),1)]),_:1}),t(k,{type:"primary",loading:f.value,onClick:n[13]||(n[13]=d=>ue(J.value))},{default:l(()=>[E(r(a(e)("confirm")),1)]),_:1},8,["loading"])])]),default:l(()=>[t(B,{model:C,"label-width":"90px",ref_key:"deliveryRefuseFormRef",ref:J,rules:a(de),class:"page-form"},{default:l(()=>[t(u,{label:a(e)("refuseReason"),prop:"shop_reason"},{default:l(()=>[t(U,{modelValue:C.shop_reason,"onUpdate:modelValue":n[11]||(n[11]=d=>C.shop_reason=d),type:"textarea",rows:"4",clearable:"",class:"input-width",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});const ba=ze(jl,[["__scopeId","data-v-144d6305"]]);export{ba as default};
