import{d as te,r as u,x as le,n as re,h as d,c,a as v,e as t,w as l,i as p,u as a,q as n,F as h,T as w,s as m,t as y,R as oe,aj as x,B as D,a4 as ne,E as se,aa as de,aB as ie,L as ue,K as me,bO as ce,M as pe,a6 as _e,ab as fe,ac as ve,W as be,X as he,Y as ye}from"./index-6ea097a6.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                     *//* empty css                       *//* empty css                  */import{u as L}from"./dict-2a23ae74.js";import{j as ke,s as ge,k as we,l as De,m as Ve,n as Pe,o as xe,c as Le}from"./order-b2fe754c.js";import{_ as Ce}from"./order-edit.vue_vue_type_style_index_0_lang-8c8d0f54.js";import{_ as Ee}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                         *//* empty css                  *//* empty css                   *//* empty css                   */const Fe={class:"main-container"},Oe={class:"mt-[10px]"},Te={class:"mt-[16px] flex justify-end"},Be={class:"mt-2"},Se=["src"],Ue=te({__name:"order",setup(Ie){const V=u(null),M=()=>{V.value.contentWindow&&V.value.contentWindow.history.back()},W=()=>{V.value.contentWindow&&V.value.contentWindow.location.reload()},C=u(!1),z=()=>{C.value=!0},B=u();(async()=>{B.value=await(await ke()).msg})(),le().meta.title;const R=u([]),S=u([]),Y=async i=>{await ge(i),f()},N=async i=>{await we({id:i}),f()};(async()=>{R.value=await(await De()).data,S.value=await(await Ve()).data})();let r=re({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{member_id:"",order_from:"",order_id:"",is_send:"",order_status:"",refund_status:"",remark:"",create_time:[]}});const U=u();u([]);const E=u([]);(async()=>{E.value=await(await L("jhkd_is_send")).data.dictionary})();const q=u([]);(async()=>{q.value=await(await L("jhkd_is_pick")).data.dictionary})();const F=u([]);(async()=>{F.value=await(await L("jhkd_order_status")).data.dictionary})();const O=u([]);(async()=>{O.value=await(await L("jhkd_refund_status")).data.dictionary})();const f=(i=1)=>{r.loading=!0,r.page=i,Pe({page:r.page,limit:r.limit,...r.searchParam}).then(o=>{r.loading=!1,r.data=o.data.data,r.total=o.data.total}).catch(()=>{r.loading=!1})};f();const T=u(null),K=i=>{T.value.setFormData(i),T.value.showDialog=!0},X=i=>{ne.confirm(n("orderDeleteTips"),n("warning"),{confirmButtonText:n("confirm"),cancelButtonText:n("cancel"),type:"warning"}).then(()=>{xe(i).then(()=>{f()}).catch(()=>{})})},A=u([]);(async()=>{A.value=await(await Le({})).data})();const G=i=>{i&&(i.resetFields(),f())};return(i,o)=>{const k=se,g=de,P=ie,b=ue,I=me,H=ce,J=pe,$=_e,_=fe,Q=ve,Z=be,ee=he,ae=ye;return d(),c(h,null,[v("div",Fe,[t($,{class:"box-card !border-none",shadow:"never"},{default:l(()=>[t(k,{type:"primary",onClick:o[0]||(o[0]=e=>z())},{default:l(()=>[p("新增订单")]),_:1}),t($,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:l(()=>[t(J,{inline:!0,model:a(r).searchParam,ref_key:"searchFormRef",ref:U},{default:l(()=>[t(b,{label:a(n)("orderFrom"),prop:"order_from"},{default:l(()=>[t(P,{modelValue:a(r).searchParam.order_from,"onUpdate:modelValue":o[1]||(o[1]=e=>a(r).searchParam.order_from=e),clearable:"",class:"input-item"},{default:l(()=>[(d(!0),c(h,null,w(S.value,(e,s)=>(d(),m(g,{key:s,label:e,value:s},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(b,{label:"订单号",prop:"order_id"},{default:l(()=>[t(I,{modelValue:a(r).searchParam.order_id,"onUpdate:modelValue":o[2]||(o[2]=e=>a(r).searchParam.order_id=e),placeholder:"请输入订单号"},null,8,["modelValue"])]),_:1}),t(b,{label:"发单状态",prop:"is_send"},{default:l(()=>[t(P,{class:"w-[280px]",modelValue:a(r).searchParam.is_send,"onUpdate:modelValue":o[3]||(o[3]=e=>a(r).searchParam.is_send=e),clearable:"",placeholder:a(n)("isSendPlaceholder")},{default:l(()=>[t(g,{label:"全部",value:""}),(d(!0),c(h,null,w(E.value,(e,s)=>(d(),m(g,{key:s,label:e.name,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),t(b,{label:a(n)("orderStatus"),prop:"order_status"},{default:l(()=>[t(P,{class:"w-[280px]",modelValue:a(r).searchParam.order_status,"onUpdate:modelValue":o[4]||(o[4]=e=>a(r).searchParam.order_status=e),clearable:"",placeholder:a(n)("orderStatusPlaceholder")},{default:l(()=>[t(g,{label:"全部",value:""}),(d(!0),c(h,null,w(F.value,(e,s)=>(d(),m(g,{key:s,label:e.name,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(b,{label:a(n)("refundStatus"),prop:"refund_status"},{default:l(()=>[t(P,{class:"w-[280px]",modelValue:a(r).searchParam.refund_status,"onUpdate:modelValue":o[5]||(o[5]=e=>a(r).searchParam.refund_status=e),clearable:"",placeholder:a(n)("refundStatusPlaceholder")},{default:l(()=>[t(g,{label:"全部",value:""}),(d(!0),c(h,null,w(O.value,(e,s)=>(d(),m(g,{key:s,label:e.name,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(b,{label:a(n)("remark"),prop:"remark"},{default:l(()=>[t(I,{modelValue:a(r).searchParam.remark,"onUpdate:modelValue":o[6]||(o[6]=e=>a(r).searchParam.remark=e),placeholder:a(n)("remarkPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(b,{label:a(n)("createTime"),prop:"create_time"},{default:l(()=>[t(H,{modelValue:a(r).searchParam.create_time,"onUpdate:modelValue":o[7]||(o[7]=e=>a(r).searchParam.create_time=e),type:"datetimerange",format:"YYYY-MM-DD hh:mm:ss","start-placeholder":a(n)("startDate"),"end-placeholder":a(n)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),t(b,null,{default:l(()=>[t(k,{type:"primary",onClick:o[8]||(o[8]=e=>f())},{default:l(()=>[p(y(a(n)("search")),1)]),_:1}),t(k,{onClick:o[9]||(o[9]=e=>G(U.value))},{default:l(()=>[p(y(a(n)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),v("div",Oe,[oe((d(),m(Q,{data:a(r).data,size:"large"},{empty:l(()=>[v("span",null,y(a(r).loading?"":a(n)("emptyData")),1)]),default:l(()=>[t(_,{prop:"order_id",label:"订单号","min-width":"160","show-overflow-tooltip":!0}),t(_,{prop:"order_from",label:a(n)("orderFrom"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),t(_,{prop:"member_id_name",label:a(n)("memberId"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),t(_,{prop:"order_money",label:a(n)("orderMoney"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),t(_,{prop:"order_discount_money",label:"优惠金额","min-width":"120","show-overflow-tooltip":!0}),t(_,{label:"发单状态","min-width":"180",align:"center","show-overflow-tooltip":!0},{default:l(({row:e})=>[(d(!0),c(h,null,w(E.value,(s,j)=>(d(),c("div",null,[s.value==e.is_send?(d(),m(a(x),{key:0},{default:l(()=>[p(y(s.name),1)]),_:2},1024)):D("",!0)]))),256))]),_:1}),t(_,{label:a(n)("orderStatus"),"min-width":"180",align:"center","show-overflow-tooltip":!0},{default:l(({row:e})=>[(d(!0),c(h,null,w(F.value,(s,j)=>(d(),c("div",null,[s.value==e.order_status&&e.order_status!=-1?(d(),m(a(x),{key:0},{default:l(()=>[p(y(s.name),1)]),_:2},1024)):D("",!0),s.value==e.order_status&&e.order_status==-1?(d(),m(a(x),{key:1,type:"warning"},{default:l(()=>[p(y(s.name),1)]),_:2},1024)):D("",!0)]))),256))]),_:1},8,["label"]),t(_,{label:a(n)("refundStatus"),"min-width":"180",align:"center","show-overflow-tooltip":!0},{default:l(({row:e})=>[(d(!0),c(h,null,w(O.value,(s,j)=>(d(),c("div",null,[s.value==e.refund_status?(d(),m(a(x),{key:0},{default:l(()=>[p(y(s.name),1)]),_:2},1024)):D("",!0)]))),256))]),_:1},8,["label"]),t(_,{prop:"remark",label:a(n)("remark"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),t(_,{label:a(n)("operation"),fixed:"right","min-width":"220"},{default:l(({row:e})=>[t(k,{type:"primary",link:"",onClick:s=>K(e)},{default:l(()=>[p("详情")]),_:2},1032,["onClick"]),e.order_status==-1||e.order_status==0?(d(),m(k,{key:0,type:"primary",link:"",onClick:s=>X(e.id)},{default:l(()=>[p(y(a(n)("delete")),1)]),_:2},1032,["onClick"])):D("",!0),e.order_status==1&&e.is_send==0?(d(),m(k,{key:1,type:"primary",link:"",onClick:s=>Y(e.order_id)},{default:l(()=>[p("发单")]),_:2},1032,["onClick"])):D("",!0),e.order_status==1?(d(),m(k,{key:2,type:"primary",link:"",onClick:s=>N(e.id)},{default:l(()=>[p("取消")]),_:2},1032,["onClick"])):D("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[ae,a(r).loading]]),v("div",Te,[t(Z,{"current-page":a(r).page,"onUpdate:current-page":o[10]||(o[10]=e=>a(r).page=e),"page-size":a(r).limit,"onUpdate:page-size":o[11]||(o[11]=e=>a(r).limit=e),layout:"total, sizes, prev, pager, next, jumper",total:a(r).total,onSizeChange:o[12]||(o[12]=e=>f()),onCurrentChange:f},null,8,["current-page","page-size","total"])])]),t(Ce,{ref_key:"editOrderDialog",ref:T,onComplete:f},null,512)]),_:1})]),t(ee,{modelValue:C.value,"onUpdate:modelValue":o[13]||(o[13]=e=>C.value=e),title:"使用移动端账号登录",width:"420",height:"740","align-center":""},{default:l(()=>[v("div",{class:"mt-[-24px]"},[v("button",{onClick:M,class:"mr-2"},"返回"),v("button",{onClick:W},"刷新")]),v("div",Be,[v("iframe",{ref_key:"myIframeRef",ref:V,src:B.value,width:"375",height:"667"},null,8,Se)])]),_:1},8,["modelValue"])],64)}}});const ha=Ee(Ue,[["__scopeId","data-v-c783a821"]]);export{ha as default};
