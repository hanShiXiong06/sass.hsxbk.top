import{d as S,x as j,f as q,n as W,r as E,h as g,c as K,e as l,w as r,a as u,t as p,u as n,i as c,q as s,R as Y,s as b,j as h,B as L,a5 as A,aq as H,U as J,E as O,ay as Q,az as X,K as Z,L as ee,M as te,a7 as ae,ad as oe,ae as le,W as ne,Y as se}from"./index-99f00cf3.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                    *//* empty css                  */import{U as re,V as ie,W as pe}from"./goods-c64a9d59.js";import{_ as de}from"./label-group-edit.vue_vue_type_style_index_0_lang-b77ca818.js";/* empty css                  *//* empty css                   */const me={class:"main-container"},ue={class:"flex justify-between items-center"},ce={class:"text-page-title"},_e={class:"mt-[10px]"},ge={class:"mt-[16px] flex justify-end"},Me=S({__name:"label_group_list",setup(fe){const V=j(),B=q(),G=V.meta.title,P=a=>{B.push({path:a})},t=W({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{group_name:"",order:"",sort:""}}),v=E(),T=a=>{let e="";a.order=="ascending"?e="asc":a.order=="descending"&&(e="desc"),e&&(t.searchParam.order=a.prop,t.searchParam.sort=e),i()},i=(a=1)=>{t.loading=!0,t.page=a,re({page:t.page,limit:t.limit,...t.searchParam}).then(e=>{t.loading=!1,t.data=e.data.data,t.total=e.data.total}).catch(()=>{t.loading=!1})};i();const m=E(null),D=()=>{m.value.setFormData(),m.value.showDialog=!0},N=a=>{m.value.setFormData(a),m.value.showDialog=!0},$=a=>{A.confirm(s("labelGroupDeleteTips"),s("warning"),{confirmButtonText:s("confirm"),cancelButtonText:s("cancel"),type:"warning"}).then(()=>{ie(a).then(()=>{i()}).catch(()=>{})})},w=H((a,e)=>{if(isNaN(a)||!/^\d{0,8}$/.test(a)){J({type:"warning",message:`${s("sortTips")}`});return}a>99999999&&(e.sort=99999999),pe({group_id:e.group_id,sort:a}).then(d=>{})}),F=a=>{a&&(a.resetFields(),i())};return(a,e)=>{const d=O,y=Q,U=X,x=Z,C=ee,z=te,k=ae,f=oe,I=le,M=ne,R=se;return g(),K("div",me,[l(k,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[u("div",ue,[u("span",ce,p(n(G)),1),l(d,{type:"primary",onClick:D},{default:r(()=>[c(p(n(s)("addLabelGroup")),1)]),_:1})]),l(U,{"model-value":"/phone_shop/goods/label/group",onTabChange:P},{default:r(()=>[l(y,{label:n(s)("tabGoodsLabel"),name:"/phone_shop/goods/label"},null,8,["label"]),l(y,{label:n(s)("tabGoodsLabelGroup"),name:"/phone_shop/goods/label/group"},null,8,["label"])]),_:1}),l(k,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:r(()=>[l(z,{inline:!0,model:t.searchParam,ref_key:"searchFormRef",ref:v},{default:r(()=>[l(C,{label:n(s)("groupName"),prop:"group_name"},{default:r(()=>[l(x,{modelValue:t.searchParam.group_name,"onUpdate:modelValue":e[0]||(e[0]=o=>t.searchParam.group_name=o),modelModifiers:{trim:!0},placeholder:n(s)("groupNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(C,null,{default:r(()=>[l(d,{type:"primary",onClick:e[1]||(e[1]=o=>i())},{default:r(()=>[c(p(n(s)("search")),1)]),_:1}),l(d,{onClick:e[2]||(e[2]=o=>F(v.value))},{default:r(()=>[c(p(n(s)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),u("div",_e,[Y((g(),b(I,{data:t.data,size:"large",onSortChange:T},{empty:r(()=>[u("span",null,p(t.loading?"":n(s)("emptyData")),1)]),default:r(()=>[l(f,{prop:"group_name",label:n(s)("groupName"),"min-width":"120"},null,8,["label"]),l(f,{prop:"sort",label:n(s)("sort"),"min-width":"120",sortable:"custom"},{default:r(({row:o})=>[l(x,{modelValue:o.sort,"onUpdate:modelValue":_=>o.sort=_,modelModifiers:{trim:!0},disabled:n(h)().siteInfo.site_id!==o.site_id,class:"!w-[100px]",maxlength:"8",onBlur:_=>n(w)(o.sort,o)},null,8,["modelValue","onUpdate:modelValue","disabled","onBlur"])]),_:1},8,["label"]),l(f,{label:n(s)("operation"),fixed:"right",align:"right","min-width":"120"},{default:r(({row:o})=>[n(h)().siteInfo.site_id==o.site_id?(g(),b(d,{key:0,type:"primary",link:"",onClick:_=>N(o)},{default:r(()=>[c(p(n(s)("edit")),1)]),_:2},1032,["onClick"])):L("",!0),n(h)().siteInfo.site_id==o.site_id?(g(),b(d,{key:1,type:"primary",link:"",onClick:_=>$(o.group_id)},{default:r(()=>[c(p(n(s)("delete")),1)]),_:2},1032,["onClick"])):L("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[R,t.loading]]),u("div",ge,[l(M,{"current-page":t.page,"onUpdate:current-page":e[3]||(e[3]=o=>t.page=o),"page-size":t.limit,"onUpdate:page-size":e[4]||(e[4]=o=>t.limit=o),layout:"total, sizes, prev, pager, next, jumper",total:t.total,onSizeChange:e[5]||(e[5]=o=>i()),onCurrentChange:i},null,8,["current-page","page-size","total"])])]),l(de,{ref_key:"editLabelGroupDialog",ref:m,onComplete:i},null,512)]),_:1})])}}});export{Me as default};
