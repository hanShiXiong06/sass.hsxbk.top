import{d as S,x as T,f as $,r as h,n as M,l as z,q as t,h as c,c as U,a as u,u as o,t as p,e as r,w as s,R as G,s as C,F as K,T as Y,i as _,U as H,K as J,L as Q,ab as W,aC as X,at as Z,au as ee,aE as te,M as le,a7 as ae,E as oe,Y as re}from"./index-2a89d409.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                *//* empty css                 *//* empty css                        *//* empty css                       *//* empty css                 */import{_ as se}from"./index.vue_vue_type_script_setup_true_lang-1e5c6518.js";import ie from"./index-deaeeb3b.js";/* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  */import"./el-form-item-4ed993c7.js";import{f as ne,h as de,i as ue,j as me}from"./article-7260e973.js";import"./index.vue_vue_type_style_index_0_lang-5224d015.js";/* empty css                  *//* empty css                   */import"./attachment-851184b5.js";import"./index.vue_vue_type_script_setup_true_lang-bee04220.js";/* empty css                        *//* empty css                      *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css               *//* empty css               *//* empty css                    *//* empty css                    */import"./el-dropdown-item-4ed993c7.js";import"./index.vue_vue_type_script_setup_true_lang-f1303253.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-4e818418.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./sortable.esm-be94e56d.js";const pe={class:"main-container"},ce={class:"detail-head"},_e=u("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1),fe={class:"ml-[1px]"},ge=u("span",{class:"adorn"},"|",-1),he={class:"right"},be={class:"fixed-footer-wrap"},ve={class:"fixed-footer"},it=S({__name:"edit",setup(Ve){const b=T(),f=$(),g=parseInt(b.query.id||"0"),d=h(!1),v=h([]),k=b.meta.title,V={id:"",category_id:"",title:"",intro:"",summary:"",image:"",author:"",content:"",visit:"",visit_virtual:"",is_show:1,sort:0},l=M({...V});g&&(async(m=0)=>{if(d.value=!0,Object.assign(l,V),m){const e=await(await ne(m)).data;if(!e||Object.keys(e).length==0)return H.error(t("articleNull")),setTimeout(()=>{f.go(-1)},2e3),!1;Object.keys(l).forEach(i=>{e[i]!=null&&(l[i]=e[i])}),d.value=!1}else d.value=!1})(g),(async()=>{v.value=await(await de({})).data})();const y=h(),R=z(()=>({title:[{required:!0,message:t("titlePlaceholder"),trigger:"blur"}],category_id:[{required:!0,message:t("categoryIdPlaceholder"),trigger:"blur"}],content:[{required:!0,message:t("contentPlaceholder"),trigger:"blur"},{validator:(m,e,i)=>{!e.replace(/<[^<>]+>/g,"").replace(/&nbsp;/gi,"")&&e.indexOf("img")===-1?i(new Error(t("contentPlaceholder"))):i()},trigger:["blur","change"]}]})),F=async m=>{d.value||!m||await m.validate(async e=>{e&&(d.value=!0,(g?ue:me)(l).then(x=>{d.value=!1,w()}).catch(()=>{d.value=!1}))})},w=()=>{f.push({path:"/cms/article/list"})};return(m,e)=>{const i=J,n=Q,x=W,I=X,N=ie,D=se,E=Z,L=ee,j=te,q=le,A=ae,P=oe,B=re;return c(),U("div",pe,[u("div",ce,[u("div",{class:"left",onClick:e[0]||(e[0]=a=>o(f).push({path:"/cms/article/list"}))},[_e,u("span",fe,p(o(t)("returnToPreviousPage")),1)]),ge,u("span",he,p(o(k)),1)]),r(A,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[G((c(),C(q,{model:l,"label-width":"90px",ref_key:"formRef",ref:y,rules:o(R),class:"page-form"},{default:s(()=>[r(n,{label:o(t)("title"),prop:"title"},{default:s(()=>[r(i,{modelValue:l.title,"onUpdate:modelValue":e[1]||(e[1]=a=>l.title=a),clearable:"",placeholder:o(t)("titlePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:o(t)("categoryName"),prop:"category_id"},{default:s(()=>[r(I,{modelValue:l.category_id,"onUpdate:modelValue":e[2]||(e[2]=a=>l.category_id=a),clearable:"",placeholder:o(t)("categoryIdPlaceholder"),class:"input-width"},{default:s(()=>[(c(!0),U(K,null,Y(v.value,(a,O)=>(c(),C(x,{label:a.name,value:a.category_id,key:O},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:o(t)("intro"),prop:"intro"},{default:s(()=>[r(i,{modelValue:l.intro,"onUpdate:modelValue":e[3]||(e[3]=a=>l.intro=a),type:"textarea",rows:"4",clearable:"",placeholder:o(t)("introPlaceholder"),class:"input-width",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:o(t)("summary"),prop:"summary"},{default:s(()=>[r(i,{modelValue:l.summary,"onUpdate:modelValue":e[4]||(e[4]=a=>l.summary=a),type:"textarea",rows:"4",clearable:"",placeholder:o(t)("summaryPlaceholder"),class:"input-width",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:o(t)("image")},{default:s(()=>[r(N,{modelValue:l.image,"onUpdate:modelValue":e[5]||(e[5]=a=>l.image=a)},null,8,["modelValue"])]),_:1},8,["label"]),r(n,{label:o(t)("author"),prop:"author"},{default:s(()=>[r(i,{modelValue:l.author,"onUpdate:modelValue":e[6]||(e[6]=a=>l.author=a),clearable:"",placeholder:o(t)("authorPlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:o(t)("content"),prop:"content"},{default:s(()=>[r(D,{modelValue:l.content,"onUpdate:modelValue":e[7]||(e[7]=a=>l.content=a)},null,8,["modelValue"])]),_:1},8,["label"]),r(n,{label:o(t)("visitVirtual")},{default:s(()=>[r(i,{modelValue:l.visit_virtual,"onUpdate:modelValue":e[8]||(e[8]=a=>l.visit_virtual=a),clearable:"",placeholder:o(t)("visitVirtualPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:o(t)("isShow")},{default:s(()=>[r(L,{modelValue:l.is_show,"onUpdate:modelValue":e[9]||(e[9]=a=>l.is_show=a),placeholder:o(t)("isShowPlaceholder")},{default:s(()=>[r(E,{label:1},{default:s(()=>[_(p(o(t)("show")),1)]),_:1}),r(E,{label:0},{default:s(()=>[_(p(o(t)("hidden")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:o(t)("sort"),prop:"sort"},{default:s(()=>[r(j,{modelValue:l.sort,"onUpdate:modelValue":e[10]||(e[10]=a=>l.sort=a),min:0},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[B,d.value]])]),_:1}),u("div",be,[u("div",ve,[r(P,{type:"primary",onClick:e[11]||(e[11]=a=>F(y.value))},{default:s(()=>[_(p(o(t)("save")),1)]),_:1}),r(P,{onClick:e[12]||(e[12]=a=>w())},{default:s(()=>[_(p(o(t)("cancel")),1)]),_:1})])])])}}});export{it as default};
