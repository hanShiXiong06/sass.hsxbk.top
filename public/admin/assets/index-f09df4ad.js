import{d as D,x as E,f as C,r as d,l as S,n as U,h as f,c as R,R as q,s as A,w as s,e as a,u as y,a as c,i as g,t as B,q as N,aW as F,a6 as P,K as J,L,M as O,E as $,Y as K}from"./index-6ea097a6.js";/* empty css                   *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                *//* empty css                 */import{c as M,a as T,b as W}from"./config-d27ea2c4.js";const Y={class:"main-container"},j={class:"!border-none mt-4",shadow:"never",style:{width:"640px"}},z={class:"fixed-footer-wrap"},G={class:"fixed-footer"},ne=D({__name:"index",setup(H){const b=E(),k=C();b.meta.title,d();const v=d(!1),l=d(!0),w=async()=>{l.value=!0;try{await M(),k.push("/channel/weapp/code")}catch{}finally{l.value=!1}},m=d();(()=>{let r="00",e="-1";localStorage.getItem("admin.userinfo")&&(r=JSON.parse(localStorage.getItem("admin.userinfo")).uid),localStorage.getItem("site.userinfo")&&(e=JSON.parse(localStorage.getItem("site.userinfo")).uid),r===e&&(v.value=!0)})();const h=S(()=>({pub_id:[{required:!0,message:"聚推客pub_id必须填写",trigger:"blur"}],api_key:[{required:!0,message:"聚推客apikey必须填写",trigger:"blur"}],mapi_key:[{required:!0,message:"蚂蚁星球apikey必须填写",trigger:"blur"}],secret:[{required:!0,message:"蚂蚁星球secret必须填写",trigger:"blur"}]})),t=U({...{pub_id:"",api_key:"",mapi_key:"",secret:"",site_key:""}});(async()=>{l.value=!0;const r=await T();for(const e in t)t[e]=r.data[e];l.value=!1})();const V=async r=>{l.value||!r||await r.validate(async e=>{e&&(l.value=!0,W(t).then(p=>{l.value=!1}).catch(()=>{l.value=!1}))})};return(r,e)=>{const u=F,p=P,i=J,n=L,x=O,_=$,I=K;return f(),R("div",Y,[q((f(),A(x,{model:t,"label-width":"140px",ref_key:"formRef",ref:m,rules:y(h),class:"page-form"},{default:s(()=>[a(p,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[a(p,{class:"!border-none",shadow:"never",style:{width:"640px"}},{default:s(()=>[a(u,{type:"warning",title:"请完善接口信息为自己后台信息",closable:!1,"show-icon":""})]),_:1}),a(n,{label:"聚推客pub_id",prop:"pub_id"},{default:s(()=>[a(i,{modelValue:t.pub_id,"onUpdate:modelValue":e[0]||(e[0]=o=>t.pub_id=o),placeholder:"聚推客pub_id后台身份ID",class:"input-width",clearable:""},null,8,["modelValue"])]),_:1}),a(n,{label:"聚推客apikey",prop:"api_key"},{default:s(()=>[a(i,{modelValue:t.api_key,"onUpdate:modelValue":e[1]||(e[1]=o=>t.api_key=o),placeholder:"聚推客apikey",class:"input-width",clearable:""},null,8,["modelValue"])]),_:1}),a(n,{label:"蚂蚁星球apikey",prop:"mapi_key"},{default:s(()=>[a(i,{modelValue:t.mapi_key,"onUpdate:modelValue":e[2]||(e[2]=o=>t.mapi_key=o),placeholder:"蚂蚁星球apikey",class:"input-width",clearable:""},null,8,["modelValue"])]),_:1}),a(n,{label:"蚂蚁星球secret",prop:"secret"},{default:s(()=>[a(i,{modelValue:t.secret,"onUpdate:modelValue":e[3]||(e[3]=o=>t.secret=o),placeholder:"蚂蚁星球secret",class:"input-width",clearable:""},null,8,["modelValue"])]),_:1}),a(n,{label:"站点key",prop:"site_key"},{default:s(()=>[a(i,{disabled:"true",modelValue:t.site_key,"onUpdate:modelValue":e[4]||(e[4]=o=>t.site_key=o),placeholder:"站点key",class:"input-width",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[I,l.value]]),c("div",j,[a(u,{type:"info",title:"这里上传的是带插件的小程序，请先在渠道-微信小程序里面配置好小程序APPID、密钥和上传密钥，小程序需要关闭白名单或者放行IP",closable:!1,"show-icon":""}),a(_,{loading:l.value,class:"mb-6 ml-6",type:"primary",onClick:e[5]||(e[5]=o=>w())},{default:s(()=>[g(" 云上传小程序 ")]),_:1},8,["loading"])]),c("div",z,[c("div",G,[a(_,{type:"primary",loading:l.value,onClick:e[6]||(e[6]=o=>V(m.value))},{default:s(()=>[g(B(y(N)("confirm")),1)]),_:1},8,["loading"])])])])}}});export{ne as default};
