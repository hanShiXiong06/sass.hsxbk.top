import{d as Q,x as X,f as Z,r as h,n as ee,h as d,c as m,e as a,w as n,a as p,t as r,u as l,q as s,F as T,T as E,s as D,i as v,R as ae,B as k,A as te,aa as le,aB as oe,K as se,L as re,bO as ne,E as de,M as ie,a6 as pe,aw as me,ax as ce,ab as _e,ac as ue,a9 as fe,W as he,Y as be}from"./index-f7a01263.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                    *//* empty css                *//* empty css                     *//* empty css                  *//* empty css                       */import{g as ye,a as ge,b as xe,c as ve}from"./order-1274d9d3.js";import{_ as ke}from"./_plugin-vue_export-helper-c27b6911.js";const we={class:"main-container"},Ve={class:"flex justify-between items-center"},Pe={class:"text-page-title"},Te={class:"table-body min-h-[150px]"},Ee={key:0},De={class:"flex items-center justify-between bg-[#f7f8fa] mt-[10px] border-[#e4e7ed] border-solid border-b-[1px] px-3 h-[35px] text-[12px] text-[#666]"},Ce={class:"ml-5"},Fe={key:0,class:"ml-5"},Ne={class:"flex cursor-pointer"},Se={class:"flex items-center min-w-[50px] mr-[10px]"},Ue=["src"],Ye={key:1,class:"w-[50px] h-[50px]",src:"",alt:""},ze={class:"flex flex-col"},Be={class:"multi-hidden text-[14px]"},Me={class:"text-[12px] text-[#999]"},Oe={class:"flex flex-col"},Re={key:0},je={key:0},Le={key:1,class:"text-[13px]"},Ae={class:"text-[13px] mt-[5px]"},He={key:0,class:"text-[14px]"},$e={key:0},qe={key:1,class:"text-[14px]"},Ge={class:"text-[14px]"},Ie={key:0,class:"text-[14px] min-h-[30px] leading-[30px] px-3 bg-[#fff0e5] text-[#ff7f5b]"},Ke={class:"mr-[5px]"},We={class:"mt-[16px] flex justify-end"},Je=Q({__name:"order_list",setup(Qe){const B=X(),M=Z(),O=B.meta.title,C=h(""),R=h([]),F=h([]),N=h([]);(async()=>{R.value=await(await ye()).data,F.value=await(await ge()).data,N.value=await(await xe()).data})();const w=h(null),V=h(!1),j=()=>{if(V.value==!1){V.value=!0;for(const i in t.data)for(const o in t.data[i].order_goods)w.value[i].toggleRowSelection(t.data[i].order_goods[o],!0)}else{V.value=!1;for(const i in t.data)for(const o in t.data[i].order_goods)w.value[i].clearSelection()}},t=ee({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{search_type:"order_no",search_name:"",pay_type:"",order_from:"",status:"",create_time:[],pay_time:[],activity_type:"exchange"}}),S=h(),b=(i=1)=>{t.loading=!0,t.page=i,ve({page:t.page,limit:t.limit,...t.searchParam}).then(o=>{t.loading=!1,t.data=o.data.data.map(_=>(_.order_goods.forEach(u=>{u.rowNum=_.order_goods.length}),_)),t.total=o.data.total}).catch(()=>{t.loading=!1})};b();const L=i=>{t.searchParam.status=i,b()},A=({row:i,column:o,rowIndex:_,columnIndex:u})=>_===0?u===0?[i.rowNum,1]:u>3?[i.rowNum,1]:[1,1]:u===0?[0,0]:u>3?[0,0]:[1,1],H=i=>{M.push("/shop/order/detail?order_id="+i.order_id)},$=i=>{i&&(i.resetFields(),b())};return(i,o)=>{const _=le,u=oe,q=se,y=re,U=ne,P=de,G=ie,Y=pe,x=me,I=ce,f=_e,z=ue,K=fe,W=he,J=be;return d(),m("div",we,[a(Y,{class:"box-card !border-none",shadow:"never"},{default:n(()=>[p("div",Ve,[p("span",Pe,r(l(O)),1)]),a(Y,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:n(()=>[a(G,{inline:!0,model:t.searchParam,ref_key:"searchFormRef",ref:S},{default:n(()=>[a(y,{label:l(s)("orderInfo"),prop:"search_name"},{default:n(()=>[a(u,{modelValue:t.searchParam.search_type,"onUpdate:modelValue":o[0]||(o[0]=e=>t.searchParam.search_type=e),clearable:"",class:"input-item"},{default:n(()=>[a(_,{label:l(s)("orderNo"),value:"order_no"},null,8,["label"]),a(_,{label:l(s)("outTradeNo"),value:"out_trade_no"},null,8,["label"])]),_:1},8,["modelValue"]),a(q,{class:"input-item ml-3",modelValue:t.searchParam.search_name,"onUpdate:modelValue":o[1]||(o[1]=e=>t.searchParam.search_name=e),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),a(y,{label:l(s)("payType"),prop:"pay_type"},{default:n(()=>[a(u,{modelValue:t.searchParam.pay_type,"onUpdate:modelValue":o[2]||(o[2]=e=>t.searchParam.pay_type=e),clearable:"",class:"input-item"},{default:n(()=>[(d(!0),m(T,null,E(F.value,(e,g)=>(d(),D(_,{key:g,label:e.name,value:e.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),a(y,{label:l(s)("fromType"),prop:"from_type"},{default:n(()=>[a(u,{modelValue:t.searchParam.order_from,"onUpdate:modelValue":o[3]||(o[3]=e=>t.searchParam.order_from=e),clearable:"",class:"input-item"},{default:n(()=>[(d(!0),m(T,null,E(N.value,(e,g)=>(d(),D(_,{key:g,label:e,value:g},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),a(y,{label:l(s)("createTime"),prop:"create_time"},{default:n(()=>[a(U,{modelValue:t.searchParam.create_time,"onUpdate:modelValue":o[4]||(o[4]=e=>t.searchParam.create_time=e),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":l(s)("startDate"),"end-placeholder":l(s)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),a(y,{label:l(s)("payTime"),prop:"pay_time"},{default:n(()=>[a(U,{modelValue:t.searchParam.pay_time,"onUpdate:modelValue":o[5]||(o[5]=e=>t.searchParam.pay_time=e),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":l(s)("startDate"),"end-placeholder":l(s)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),a(y,null,{default:n(()=>[a(P,{type:"primary",onClick:o[6]||(o[6]=e=>b())},{default:n(()=>[v(r(l(s)("search")),1)]),_:1}),a(P,{onClick:o[7]||(o[7]=e=>$(S.value))},{default:n(()=>[v(r(l(s)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(I,{modelValue:C.value,"onUpdate:modelValue":o[8]||(o[8]=e=>C.value=e),class:"demo-tabs",onTabChange:L},{default:n(()=>[a(x,{label:l(s)("all"),name:""},null,8,["label"]),a(x,{label:l(s)("toBeShipped"),name:"2"},null,8,["label"]),a(x,{label:l(s)("shipped"),name:"3"},null,8,["label"]),a(x,{label:l(s)("completed"),name:"5"},null,8,["label"]),a(x,{label:l(s)("closed"),name:"-1"},null,8,["label"])]),_:1},8,["modelValue"]),p("div",null,[a(z,{data:t.data,size:"large",class:"table-top",onSelectAll:j},{default:n(()=>[a(f,{type:"selection",width:"40"}),a(f,{label:l(s)("orderGoods"),"min-width":"200"},null,8,["label"]),a(f,{label:l(s)("goodsPriceNumber"),"min-width":"120"},null,8,["label"]),a(f,{label:l(s)("orderMoney"),"min-width":"120"},null,8,["label"]),a(f,{label:l(s)("orderStatus"),"min-width":"100"},null,8,["label"])]),_:1},8,["data"]),ae((d(),m("div",Te,[t.loading?k("",!0):(d(),m("div",Ee,[t.data.length?(d(!0),m(T,{key:0},E(t.data,(e,g)=>(d(),m("div",{key:g},[p("div",De,[p("div",null,[p("span",null,r(l(s)("orderNo"))+"："+r(e.order_no),1),p("span",Ce,r(l(s)("createTime"))+"："+r(e.create_time),1),e.pay?(d(),m("span",Fe,r(l(s)("payType"))+"："+r(e.pay.type_name),1)):k("",!0)]),p("div",null,[a(P,{type:"primary",link:"",onClick:c=>H(e)},{default:n(()=>[v(r(l(s)("info")),1)]),_:2},1032,["onClick"])])]),a(z,{data:e.order_goods,size:"large","show-header":!1,"span-method":A,ref_for:!0,ref_key:"multipleTable",ref:w},{default:n(()=>[a(f,{type:"selection",width:"40"}),a(f,{align:"left","min-width":"200"},{default:n(({row:c})=>[p("div",Ne,[p("div",Se,[c.goods_image?(d(),m("img",{key:0,class:"w-[50px] h-[50px]",src:l(te)(c.goods_image),alt:""},null,8,Ue)):(d(),m("img",Ye))]),p("div",ze,[p("p",Be,r(c.goods_name),1),p("span",Me,r(c.sku_name),1)])])]),_:1}),a(f,{"min-width":"120"},{default:n(({row:c})=>[p("div",Oe,[e.activity_type=="exchange"?(d(),m("span",Re,[v(r(c.extend.point)+r(l(s)("point"))+" ",1),parseFloat(c.price)?(d(),m("span",je,"+￥"+r(c.price),1)):k("",!0)])):(d(),m("span",Le,"￥"+r(c.price),1)),p("span",Ae,r(c.num)+r(l(s)("piece")),1)])]),_:2},1024),a(f,{"min-width":"120","class-name":"border-0 border-l-[1px] border-solid border-[var(--el-table-border-color)]"},{default:n(()=>[e.activity_type=="exchange"?(d(),m("span",He,[v(r(e.point)+r(l(s)("point"))+" ",1),parseFloat(e.order_money)?(d(),m("span",$e,"+￥"+r(e.order_money),1)):k("",!0)])):(d(),m("span",qe,"￥"+r(e.order_money),1))]),_:2},1024),a(f,{"min-width":"100"},{default:n(()=>[p("span",Ge,r(e.status_name.name),1)]),_:2},1024)]),_:2},1032,["data"]),e.shop_remark?(d(),m("div",Ie,[p("span",Ke,r(l(s)("notes"))+"：",1),p("span",null,r(e.shop_remark),1)])):k("",!0)]))),128)):(d(),D(K,{key:1,"image-size":1,description:l(s)("emptyData")},null,8,["description"]))]))])),[[J,t.loading]]),p("div",We,[a(W,{"current-page":t.page,"onUpdate:current-page":o[9]||(o[9]=e=>t.page=e),"page-size":t.limit,"onUpdate:page-size":o[10]||(o[10]=e=>t.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:t.total,onSizeChange:o[11]||(o[11]=e=>b()),onCurrentChange:b},null,8,["current-page","page-size","total"])])])]),_:1})])}}});const xa=ke(Je,[["__scopeId","data-v-551e8ecd"]]);export{xa as default};
