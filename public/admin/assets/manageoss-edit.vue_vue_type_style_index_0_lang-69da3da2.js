import{d as U,r as d,n as N,l as j,q as l,h as c,s as p,w as o,a as T,e as m,br as D,i as g,t as v,u as r,R as G,c as E,F as L,T as S,ac as K,aD as W,K as X,L as Y,aw as $,c2 as A,M as H,E as J,X as Q,Y as Z}from"./index-99f00cf3.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                          *//* empty css                    */import"./el-form-item-4ed993c7.js";/* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  */import{g as ee,e as ae,a as te,b as le,c as se}from"./manageoss-d3da6c56.js";const oe={class:"dialog-footer"},Ee=U({__name:"manageoss-edit",emits:["complete"],setup(ie,{expose:C,emit:I}){let i=d(!1);const n=d(!1),b=d([]);(()=>{ee({type:2}).then(s=>{b.value=s.data})})(),d(!1),d(!0),d([]);const O=s=>{t.value=s},h={id:"",value:[],size:"",use_size:"",limit:"",site_id:""},t=N({...h}),w=d(),F=j(()=>({value:[{required:!0,message:l("valuePlaceholder"),trigger:"blur"}],size:[{required:!0,message:l("sizePlaceholder"),trigger:"blur"}],use_size:[{required:!0,message:l("useSizePlaceholder"),trigger:"blur"}],limit:[{required:!0,message:l("limitPlaceholder"),trigger:"blur"}]})),z=async s=>{if(n.value||!s)return;let e=t.id?ae:te;await s.validate(async u=>{u&&(n.value=!0,e(t).then(_=>{n.value=!1,i.value=!1,I("complete")}).catch(_=>{n.value=!1}))})},y=d([]);return(async()=>{y.value=await(await le({})).data})(),C({showDialog:i,setFormData:async(s=null)=>{if(Object.assign(t,h),n.value=!0,s){const e=await(await se(s.id)).data;e&&Object.keys(t).forEach(u=>{e[u]!=null&&(t[u]=e[u])})}n.value=!1}}),(s,e)=>{const u=K,V=W,_=X,k=Y,M=$,q=A,B=H,x=J,P=Q,R=Z;return c(),p(P,{modelValue:r(i),"onUpdate:modelValue":e[5]||(e[5]=a=>D(i)?i.value=a:i=a),title:t.id?r(l)("updateManageOss"):r(l)("addManageOss"),width:"50%",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:o(()=>[T("span",oe,[m(x,{onClick:e[3]||(e[3]=a=>D(i)?i.value=!1:i=!1)},{default:o(()=>[g(v(r(l)("cancel")),1)]),_:1}),m(x,{type:"primary",loading:n.value,onClick:e[4]||(e[4]=a=>z(w.value))},{default:o(()=>[g(v(r(l)("confirm")),1)]),_:1},8,["loading"])])]),default:o(()=>[G((c(),p(B,{model:t,"label-width":"120px",ref_key:"formRef",ref:w,rules:r(F),class:"page-form"},{default:o(()=>[m(k,{label:r(l)("siteId")},{default:o(()=>[m(V,{class:"input-width",modelValue:t.site_id,"onUpdate:modelValue":e[0]||(e[0]=a=>t.site_id=a),clearable:"",placeholder:r(l)("siteIdPlaceholder"),filterable:"","allow-create":"","default-first-option":""},{default:o(()=>[m(u,{label:"请选择",value:""}),(c(!0),E(L,null,S(y.value,(a,f)=>(c(),p(u,{key:f,label:a.site_name,value:a.site_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),m(_,{modelValue:t.site_id,"onUpdate:modelValue":e[1]||(e[1]=a=>t.site_id=a),class:"w-[80px] ml-2",clearable:"",placeholder:"请输入或选择站点ID",style:{width:"120px"}},null,8,["modelValue"])]),_:1},8,["label"]),m(k,{label:r(l)("value"),prop:"value"},{default:o(()=>[m(q,{modelValue:t.value,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value=a),onChange:O},{default:o(()=>[(c(!0),E(L,null,S(b.value,(a,f)=>(c(),p(M,{key:f,label:a.name,value:a.storage_type},{default:o(()=>[g(v(a.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[R,n.value]])]),_:1},8,["modelValue","title"])}}});export{Ee as _};
