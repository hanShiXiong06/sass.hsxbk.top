import{d as se,x as le,r as v,f as ne,n as $,h as c,c as k,e as s,w as l,a as i,t as d,u as o,q as a,F as ie,T as re,s as x,i as _,R as de,A as pe,c$ as ce,B as C,a5 as O,U as me,a3 as _e,K as ue,L as ge,bF as fe,ab as he,aC as ye,E as ve,M as xe,a7 as be,av as ke,ac as Ce,J as Te,ak as Ee,aU as Pe,ad as Ve,W as we,Y as Se,p as Fe,g as $e}from"./index-6f32d09b.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css                        *//* empty css                        *//* empty css                *//* empty css                *//* empty css                  *//* empty css                          *//* empty css                 */import"./el-form-item-4ed993c7.js";import{_ as M}from"./goods_default-247a7f2b.js";import{g as ze,b as Be}from"./goods-8f7103ad.js";import{e as j,a as Ie}from"./goods-9c7738ee.js";import{_ as Le}from"./_plugin-vue_export-helper-c27b6911.js";const z=T=>(Fe("data-v-8b840417"),T=T(),$e(),T),Ne={class:"main-container"},Ue={class:"flex justify-between items-center"},De={class:"text-page-title"},Re={class:"mt-[10px]"},Ge={class:"mb-[10px] flex items-center"},Oe={class:"flex items-center"},je={class:"min-w-[70px] h-[70px] flex items-center justify-center"},Me=z(()=>i("div",{class:"image-slot"},[i("img",{class:"w-[70px] h-[70px]",src:M,fit:"contain"})],-1)),Ae={key:1,class:"w-[70px] h-[70px]",src:M,fit:"contain"},qe={class:"ml-2"},Je=["title"],Ke={class:"text-primary text-[12px]"},We={key:0},Ye={key:1},He=z(()=>i("div",{class:"max-w-[300px]"},[i("p",{class:"leading-[25px]"},"1. 分销规则可以是默认规则和单独设置"),i("p",{class:"leading-[25px]"},"2. 商品可以设置分销计算价，设置之后按照计算价作为商品业绩计算比率，默认按照商品卖价作为商品业绩然后通过比率计算佣金"),i("p",{class:"leading-[25px]"},"3. 商品佣金比率也可以单独设置，设置之后按照商品佣金比率计算")],-1)),Qe=z(()=>i("span",{class:"iconfont iconwenhao ml-[5px]"},null,-1)),Xe={class:"mt-[16px] flex"},Ze={class:"flex items-center flex-1"},et=se({__name:"lists",setup(T){const A=le().meta.title,E=v(!1),B=ne(),n=$({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{goods_name:"",goods_category:[],goods_type:""}}),I=v(),S=$([]),q={checkStrictly:!0},L=$([]);(()=>{ze().then(r=>{const t=r.data;if(t){const p=[];t.forEach(u=>{const V=[];u.child_list&&u.child_list.forEach(w=>{V.push({value:w.category_id,label:w.category_name})}),p.push({value:u.category_id,label:u.category_name,children:V})}),S.splice(0,S.length,...p)}}),Be().then(r=>{const t=r.data;if(t)for(const p in t)L.push(t[p])})})();const h=v(),b=v(!1),N=r=>{b.value=!1,U.value.toggleAllSelection()},U=v(),y=v([]),J=r=>{y.value=r,h.value=!1,y.value.length>0&&y.value.length<n.data.length?b.value=!0:b.value=!1,y.value.length==n.data.length&&(h.value=!0)},K=(r,t)=>{O.confirm(t?a("participateTip"):a("offParticipateTip"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{E.value||(E.value=!0,j({goods_ids:[r.goods_id],is_fenxiao:t}).then(p=>{E.value=!1,f()}).catch(()=>{E.value=!1}))}).catch(()=>{})},P=r=>{if(y.value.length==0){me({type:"warning",message:`${a("batchEmptySelectedGoodsTips")}`});return}const t=[];y.value.forEach(p=>{t.push(p.goods_id)}),O.confirm(r?a("participateTip"):a("offParticipateTip"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{j({goods_ids:t,is_fenxiao:r}).then(p=>{f()})}).catch(()=>{})},f=(r=1)=>{n.loading=!0,n.page=r;const t=_e(n.searchParam);Ie({page:n.page,limit:n.limit,...t}).then(p=>{n.loading=!1,n.data=p.data.data,n.total=p.data.total}).catch(()=>{n.loading=!1})};f();const D=r=>{B.push("/shop_fenxiao/management/goods_config?goods_id="+r)},W=r=>{B.push("/shop_fenxiao/management/goods_detail?goods_id="+r)},Y=r=>{r&&(r.resetFields(),f())};return(r,t)=>{const p=ue,u=ge,V=fe,w=he,H=ye,g=ve,Q=xe,R=be,G=ke,m=Ce,X=Te,Z=Ee,ee=Pe,te=Ve,ae=we,oe=Se;return c(),k("div",Ne,[s(R,{class:"card !border-none",shadow:"never"},{default:l(()=>[i("div",Ue,[i("span",De,d(o(A)),1)]),s(R,{class:"card my-[10px] !border-none table-search-wrap",shadow:"never"},{default:l(()=>[s(Q,{inline:!0,model:n.searchParam,ref_key:"searchFormRef",ref:I},{default:l(()=>[s(u,{label:o(a)("goodsName"),prop:"goods_name"},{default:l(()=>[s(p,{modelValue:n.searchParam.goods_name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchParam.goods_name=e),placeholder:o(a)("goodsNamePlaceholder"),maxlength:"60"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(u,{label:o(a)("goodsCategory"),prop:"goods_category"},{default:l(()=>[s(V,{props:q,modelValue:n.searchParam.goods_category,"onUpdate:modelValue":t[1]||(t[1]=e=>n.searchParam.goods_category=e),options:S,placeholder:o(a)("goodsCategoryPlaceholder"),clearable:"",filterable:""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"]),s(u,{label:o(a)("goodsType"),prop:"goods_type"},{default:l(()=>[s(H,{modelValue:n.searchParam.goods_type,"onUpdate:modelValue":t[2]||(t[2]=e=>n.searchParam.goods_type=e),placeholder:o(a)("goodsTypePlaceholder"),clearable:""},{default:l(()=>[(c(!0),k(ie,null,re(L,e=>(c(),x(w,{key:e.type,label:e.name,value:e.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),s(u,null,{default:l(()=>[s(g,{type:"primary",onClick:t[3]||(t[3]=e=>f())},{default:l(()=>[_(d(o(a)("search")),1)]),_:1}),s(g,{onClick:t[4]||(t[4]=e=>Y(I.value))},{default:l(()=>[_(d(o(a)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),i("div",Re,[i("div",Ge,[s(G,{modelValue:h.value,"onUpdate:modelValue":t[5]||(t[5]=e=>h.value=e),size:"large",class:"px-[14px]",onChange:N,indeterminate:b.value},null,8,["modelValue","indeterminate"]),s(g,{onClick:t[6]||(t[6]=e=>P(1)),size:"small"},{default:l(()=>[_(d(o(a)("participate")),1)]),_:1}),s(g,{onClick:t[7]||(t[7]=e=>P(0)),size:"small"},{default:l(()=>[_(d(o(a)("offParticipate")),1)]),_:1})]),de((c(),x(te,{data:n.data,size:"large",ref_key:"goodsListTableRef",ref:U,onSelectionChange:J},{empty:l(()=>[i("span",null,d(n.loading?"":o(a)("emptyData")),1)]),default:l(()=>[s(m,{type:"selection",width:"55"}),s(m,{prop:"goods_id",label:o(a)("goodsInfo"),"min-width":"300"},{default:l(({row:e})=>[i("div",Oe,[i("div",je,[e.goods_cover_thumb_small?(c(),x(X,{key:0,class:"w-[70px] h-[70px]",src:o(pe)(e.goods_cover_thumb_small),fit:"contain"},{error:l(()=>[Me]),_:2},1032,["src"])):(c(),k("img",Ae))]),i("div",qe,[i("span",{title:e.goods_name,class:"multi-hidden"},d(e.goods_name),9,Je),i("span",Ke,d(e.goods_type_name),1)])])]),_:1},8,["label"]),s(m,{prop:"goods_type_name",label:o(a)("goodsTypeName"),"min-width":"120",align:"right"},null,8,["label"]),s(m,{prop:"price",label:o(a)("skuPrice"),"min-width":"120",align:"right"},{default:l(({row:e})=>[i("span",null,"￥"+d(o(ce)(e.goodsSku.price)),1)]),_:1},8,["label"]),s(m,{prop:"stock",label:o(a)("stock"),"min-width":"120"},null,8,["label"]),s(m,{prop:"sale_num",label:o(a)("saleNum"),"min-width":"100"},null,8,["label"]),s(m,{label:o(a)("status"),"min-width":"100"},{default:l(({row:e})=>[e.status==1?(c(),k("div",We,d(o(a)("statusOn")),1)):C("",!0),e.status==0?(c(),k("div",Ye,d(o(a)("statusOff")),1)):C("",!0)]),_:1},8,["label"]),s(m,{label:o(a)("isParticipate"),"min-width":"150"},{default:l(({row:e})=>[s(Z,{class:"cursor-pointer",type:e.is_set_fenxiao?"success":"info",onClick:F=>K(e,e.is_set_fenxiao?0:1)},{default:l(()=>[_(d(e.is_set_fenxiao?o(a)("yes"):o(a)("no")),1)]),_:2},1032,["type","onClick"])]),_:1},8,["label"]),s(m,{prop:"","min-width":"150"},{header:l(()=>[i("span",null,d(o(a)("ParticipateType")),1),s(ee,{class:"box-item",effect:"light",placement:"bottom-end"},{content:l(()=>[He]),default:l(()=>[Qe]),_:1})]),default:l(({row:e})=>[i("span",null,d(e.fenxiao_type==1?o(a)("typeLabelOne"):o(a)("typeLabelTwo")),1)]),_:1}),s(m,{label:o(a)("operation"),fixed:"right",align:"right","min-width":"120"},{default:l(({row:e})=>[e.is_set_fenxiao==0?(c(),x(g,{key:0,type:"primary",link:"",onClick:F=>D(e.goods_id)},{default:l(()=>[_(d(o(a)("commissionSettings")),1)]),_:2},1032,["onClick"])):C("",!0),e.is_set_fenxiao?(c(),x(g,{key:1,type:"primary",link:"",onClick:F=>W(e.goods_id)},{default:l(()=>[_(d(o(a)("detail")),1)]),_:2},1032,["onClick"])):C("",!0),e.is_set_fenxiao?(c(),x(g,{key:2,type:"primary",link:"",onClick:F=>D(e.goods_id)},{default:l(()=>[_(d(o(a)("commissionSettings")),1)]),_:2},1032,["onClick"])):C("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[oe,n.loading]]),i("div",Xe,[i("div",Ze,[s(G,{modelValue:h.value,"onUpdate:modelValue":t[8]||(t[8]=e=>h.value=e),size:"large",class:"px-[14px]",onChange:N,indeterminate:b.value},null,8,["modelValue","indeterminate"]),s(g,{onClick:t[9]||(t[9]=e=>P(1)),size:"small"},{default:l(()=>[_(d(o(a)("participate")),1)]),_:1}),s(g,{onClick:t[10]||(t[10]=e=>P(0)),size:"small"},{default:l(()=>[_(d(o(a)("offParticipate")),1)]),_:1})]),s(ae,{"current-page":n.page,"onUpdate:current-page":t[11]||(t[11]=e=>n.page=e),"page-size":n.limit,"onUpdate:page-size":t[12]||(t[12]=e=>n.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:n.total,onSizeChange:t[13]||(t[13]=e=>f()),onCurrentChange:f},null,8,["current-page","page-size","total"])])])]),_:1})])}}});const wt=Le(et,[["__scopeId","data-v-8b840417"]]);export{wt as default};
