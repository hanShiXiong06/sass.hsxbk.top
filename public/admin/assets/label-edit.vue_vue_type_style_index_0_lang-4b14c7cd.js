import{d as F,r as p,n as B,l as k,q as t,h as g,s as V,w as n,a as C,e as i,i as w,t as h,u as o,R as M,b_ as P,K as R,L as U,M as I,E as j,X as q,Y as K}from"./index-37fee5a0.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 */import{E as O,F as $,G}from"./goods-26f79dea.js";const S={class:"dialog-footer"},le=F({__name:"label-edit",emits:["complete"],setup(T,{expose:y,emit:x}){const m=p(!1),r=p(!1),f=p(""),_={label_id:"",label_name:"",memo:"",sort:""},l=B({..._}),b=p(),D=k(()=>({label_name:[{required:!0,message:t("labelNamePlaceholder"),trigger:"blur"}]})),E=async d=>{if(r.value||!d)return;const e=l.label_id?O:$;await d.validate(async s=>{s&&(r.value=!0,e(l).then(c=>{r.value=!1,m.value=!1,x("complete")}).catch(c=>{r.value=!1}))})};return y({showDialog:m,setFormData:async(d=null)=>{if(Object.assign(l,_),r.value=!0,d){const e=await(await G(d.label_id)).data;f.value=t("updateLabel"),e&&Object.keys(l).forEach(s=>{e[s]!=null&&(l[s]=e[s])})}else f.value=t("addLabel");r.value=!1}}),(d,e)=>{const s=R,u=U,c=I,v=j,L=q,N=K;return g(),V(L,{modelValue:m.value,"onUpdate:modelValue":e[7]||(e[7]=a=>m.value=a),title:f.value,width:"500px",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:n(()=>[C("span",S,[i(v,{onClick:e[5]||(e[5]=a=>m.value=!1)},{default:n(()=>[w(h(o(t)("cancel")),1)]),_:1}),i(v,{type:"primary",loading:r.value,onClick:e[6]||(e[6]=a=>E(b.value))},{default:n(()=>[w(h(o(t)("confirm")),1)]),_:1},8,["loading"])])]),default:n(()=>[M((g(),V(c,{model:l,"label-width":"120px",ref_key:"formRef",ref:b,rules:o(D),class:"page-form"},{default:n(()=>[i(u,{label:o(t)("labelName"),prop:"label_name"},{default:n(()=>[i(s,{modelValue:l.label_name,"onUpdate:modelValue":e[0]||(e[0]=a=>l.label_name=a),modelModifiers:{trim:!0},clearable:"",placeholder:o(t)("labelNamePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(u,{label:o(t)("memo")},{default:n(()=>[i(s,{modelValue:l.memo,"onUpdate:modelValue":e[1]||(e[1]=a=>l.memo=a),modelModifiers:{trim:!0},type:"textarea",clearable:"",placeholder:o(t)("memoPlaceholder"),class:"input-width",maxlength:"200"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(u,{label:o(t)("sort")},{default:n(()=>[i(s,{modelValue:l.sort,"onUpdate:modelValue":e[2]||(e[2]=a=>l.sort=a),modelModifiers:{trim:!0},clearable:"",placeholder:o(t)("sortPlaceholder"),class:"input-width",onKeyup:e[3]||(e[3]=a=>o(P)(a)),maxlength:"6","show-word-limit":"",onBlur:e[4]||(e[4]=a=>l.sort=a.target.value)},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[N,r.value]])]),_:1},8,["modelValue","title"])}}});export{le as _};
