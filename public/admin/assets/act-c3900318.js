import{O as te,d as ae,x as le,r as v,n as oe,aO as se,a2 as ie,h as d,c as w,e,w as l,a as i,u as s,E as C,i as p,q as c,t as m,R as j,s as f,B as u,A as ne,U as O,aW as de,a6 as pe,K as re,L as ce,aa as me,aB as ue,M as _e,ab as ve,aj as fe,aI as ge,ac as he,W as ye,a1 as be,X as we,Y as ke,p as Ce,g as xe}from"./index-f7a01263.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                        *//* empty css                     *//* empty css                *//* empty css                 */import{_ as Ee,s as Ve,g as $e,a as Ie,b as De}from"./act-edit.vue_vue_type_style_index_0_lang-70ed605f.js";import{_ as Pe}from"./_plugin-vue_export-helper-c27b6911.js";import"./index.vue_vue_type_script_setup_true_lang-6490c353.js";import"./index.vue_vue_type_style_index_0_lang-0595c85c.js";/* empty css                  */import"./attachment-893e498c.js";import"./index.vue_vue_type_script_setup_true_lang-473c7dda.js";/* empty css                        *//* empty css                 *//* empty css               *//* empty css               *//* empty css                    *//* empty css                    */import"./el-dropdown-item-4ed993c7.js";import"./index.vue_vue_type_script_setup_true_lang-a36ce1b6.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-73e73d1c.js";import"./index-e6c6f5a6.js";import"./sortable.esm-be94e56d.js";function Ae(){return te.get("tk_cps/getwapdomain")}const _=V=>(Ce("data-v-36a1b05f"),V=V(),xe(),V),Se={class:"main-container"},Fe={class:"flex mt-4 ml-4"},Ue={class:"mt-[10px]"},Be={class:"mt-[16px] flex justify-end"},Ne={key:0,class:"mb-2"},ze={class:"font-bold"},Te={class:"mt-2"},Le=_(()=>i("span",{class:"font-bold"},"支持渠道",-1)),Re={key:1,class:"flex mt-2"},je=_(()=>i("div",{class:"font-bold mr-4"},"页面链接",-1)),Oe={key:2,class:"flex mt-2"},We=_(()=>i("div",{class:"font-bold mr-4"},"网页链接",-1)),qe={key:3,class:"flex mt-2"},Me=_(()=>i("div",{class:"font-bold mr-2"},"h5链接",-1)),Ke={class:"multi-hidden w-[340px]"},Xe={class:"flex mt-2"},Ye={key:0,class:"mr-2 p-4 rounded-md statistic-card bg-gradient-to-r from-indigo-50 from-10% via-sky-50 via-10% to-emerald-50 to-10%"},Ge=_(()=>i("div",{class:"font-bold"},"微信小程序信息",-1)),He={key:0,class:"mt-2"},Je=_(()=>i("div",{class:"font-bold"},"原始id:",-1)),Qe={class:"mt-2"},Ze=_(()=>i("div",{class:"font-bold"},"appid:",-1)),et={class:"mt-2"},tt=_(()=>i("div",{class:"font-bold"},"页面路径:",-1)),at={class:"whitespace-normal w-[360px] break-words"},lt={key:1,class:"p-4 rounded-md statistic-card bg-gradient-to-r from-indigo-50 from-10% via-sky-50 via-10% to-emerald-50 to-10%"},ot=_(()=>i("div",{class:"font-bold"},"支付宝小程序",-1)),st={class:"mt-2"},it=_(()=>i("div",{class:"font-bold"},"appid:",-1)),nt={class:"mt-2"},dt=_(()=>i("div",{class:"font-bold"},"页面路径:",-1)),pt={class:"whitespace-normal w-[360px] break-words"},rt=_(()=>i("span",null,"正在保存,保存成功会自动关闭本弹窗",-1)),ct=ae({__name:"act",setup(V){le().meta.title;const $=v(!1),B=v(!1),x=v(!1);let n=oe({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{act_id:"",act_name:"",type:"",desc:"",img:"",icon:"",poster:"",commission_rate:"",introduce:"",attribution_explain:"",settlement_time:"",start_date:"",end_date:"",create_time:""}});const{copy:W,isSupported:q,copied:ut}=se(),g=r=>{if(!q.value){O({message:"当前浏览器不支持一键复制，请手动复制",type:"warning"});return}W(r),O({message:"复制成功",type:"success"})},a=v(),I=v(),D=v(),N=v(),M=async r=>{x.value=!0,(await Ve(r)).code==1&&(x.value=!1)},K=async r=>{n.loading=!0;const t=await $e(r),A=await Ae();n.loading=!1,$.value=!0,B.value=!0,a.value=t.data,D.value=A.data+"/addon/tk_cps/pages/index?type="+a.value.type+"&act_id="+a.value.act_id,I.value="/addon/tk_cps/pages/index?type="+a.value.type+"&act_id="+a.value.act_id+"&style=embedded"};v([]);const k=(r=1)=>{n.loading=!0,n.page=r,Ie({page:n.page,limit:n.limit,...n.searchParam}).then(t=>{n.loading=!1,n.data=t.data.data,n.total=t.data.total}).catch(()=>{n.loading=!1})};k();const P=v(null),X=async()=>{n.loading=!0,await De(),k(),n.loading=!1},Y=r=>{P.value.setFormData(r),P.value.showDialog=!0},G=r=>{r&&(r.resetFields(),k())};return(r,t)=>{const A=de,S=pe,H=re,F=ce,U=me,J=ue,Q=_e,h=ve,E=fe,z=ge,Z=he,ee=ye,y=ie("DocumentCopy"),b=be,T=we,L=ke;return d(),w("div",Se,[e(S,{class:"box-card !border-none",shadow:"never"},{default:l(()=>[e(S,{class:"!border-none",shadow:"never",style:{width:"640px"}},{default:l(()=>[e(A,{type:"warning",title:"使用前请同步活动，部分活动下线了将不能正常生成推广链接；点击立即推广可以生成并获取到最新的推广信息；保存素材可以将素材保存到素材库，方便装修时候直接使用",closable:!1,"show-icon":""}),i("div",Fe,[e(s(C),{type:"primary",plain:"",onClick:t[0]||(t[0]=o=>X())},{default:l(()=>[p("同步活动")]),_:1})])]),_:1}),e(S,{class:"box-card !border-none -translate-y-[-6] table-search-wrap",shadow:"never"},{default:l(()=>[e(Q,{inline:!0,model:s(n).searchParam,ref_key:"searchFormRef",ref:N},{default:l(()=>[e(F,{label:s(c)("actName"),prop:"act_name"},{default:l(()=>[e(H,{modelValue:s(n).searchParam.act_name,"onUpdate:modelValue":t[1]||(t[1]=o=>s(n).searchParam.act_name=o),placeholder:s(c)("actNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(F,{label:s(c)("type"),prop:"type"},{default:l(()=>[e(J,{class:"w-[280px]",modelValue:s(n).searchParam.type,"onUpdate:modelValue":t[2]||(t[2]=o=>s(n).searchParam.type=o),clearable:"",placeholder:s(c)("isSendPlaceholder")},{default:l(()=>[e(U,{label:"全部",value:""}),e(U,{label:"聚推客",value:"0"}),e(U,{label:"蚂蚁星球",value:"1"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(F,null,{default:l(()=>[e(s(C),{type:"primary",onClick:t[3]||(t[3]=o=>k())},{default:l(()=>[p(m(s(c)("search")),1)]),_:1}),e(s(C),{onClick:t[4]||(t[4]=o=>G(N.value))},{default:l(()=>[p(m(s(c)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),i("div",Ue,[j((d(),f(Z,{data:s(n).data,size:"large"},{empty:l(()=>[i("span",null,m(s(n).loading?"":s(c)("emptyData")),1)]),default:l(()=>[e(h,{prop:"act_name",label:s(c)("actName"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),e(h,{prop:"type",label:"渠道","min-width":"120","show-overflow-tooltip":!0},{default:l(({row:o})=>[o.type==0?(d(),f(E,{key:0},{default:l(()=>[p(" 聚推客 ")]),_:1})):u("",!0),o.type==1?(d(),f(E,{key:1},{default:l(()=>[p(" 蚂蚁星球 ")]),_:1})):u("",!0)]),_:1}),e(h,{label:s(c)("icon"),width:"100",align:"left"},{default:l(({row:o})=>[o.icon?(d(),f(z,{key:0,src:s(ne)(o.icon)},null,8,["src"])):(d(),f(z,{key:1,icon:"UserFilled"}))]),_:1},8,["label"]),e(h,{prop:"commission_rate",label:s(c)("commissionRate"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),e(h,{prop:"settlement_time",label:s(c)("settlementTime"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),e(h,{prop:"start_date",label:"开始时间","min-width":"120","show-overflow-tooltip":!0}),e(h,{prop:"end_date",label:"结束时间","min-width":"120","show-overflow-tooltip":!0}),e(h,{label:s(c)("operation"),fixed:"right","min-width":"120"},{default:l(({row:o})=>[e(s(C),{type:"primary",link:"",onClick:R=>Y(o)},{default:l(()=>[p("详情")]),_:2},1032,["onClick"]),e(s(C),{type:"primary",link:"",onClick:R=>K(o.id)},{default:l(()=>[p("立即推广")]),_:2},1032,["onClick"]),e(s(C),{type:"primary",link:"",loading:x.value,onClick:R=>M(o.id)},{default:l(()=>[p("保存素材")]),_:2},1032,["loading","onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[L,s(n).loading]]),i("div",Be,[e(ee,{"current-page":s(n).page,"onUpdate:current-page":t[5]||(t[5]=o=>s(n).page=o),"page-size":s(n).limit,"onUpdate:page-size":t[6]||(t[6]=o=>s(n).limit=o),layout:"total, sizes, prev, pager, next, jumper",total:s(n).total,onSizeChange:t[7]||(t[7]=o=>k()),onCurrentChange:k},null,8,["current-page","page-size","total"])])]),e(Ee,{ref_key:"editActDialog",ref:P,onComplete:k},null,512)]),_:1}),j((d(),f(T,{"element-loading-text":"Loading...",modelValue:$.value,"onUpdate:modelValue":t[16]||(t[16]=o=>$.value=o),title:"推广详情",width:"60%","before-close":r.handleClose},{default:l(()=>[a.value?(d(),w("div",Ne,[i("span",ze,"活动名称:"+m(a.value.act_name),1)])):u("",!0),i("div",Te,[Le,a.value&&a.value.h5!=""?(d(),f(E,{key:0,class:"ml-2"},{default:l(()=>[p("h5")]),_:1})):u("",!0),a.value&&a.value.weapp.appid!=""?(d(),f(E,{key:1,class:"ml-2"},{default:l(()=>[p("微信小程序")]),_:1})):u("",!0),a.value&&a.value.aliapp.appid!=""?(d(),f(E,{key:2,class:"ml-2"},{default:l(()=>[p("支付宝小程序")]),_:1})):u("",!0)]),a.value&&a.value.h5!=""||a.value.weapp.appid!=""||a.value.aliapp.appid!=""?(d(),w("div",Re,[je,i("div",null,m(I.value),1),e(b,{class:"ml-2",onClick:t[8]||(t[8]=o=>g(I.value))},{default:l(()=>[e(y)]),_:1})])):u("",!0),a.value&&a.value.h5!=""?(d(),w("div",Oe,[We,i("div",null,m(D.value),1),e(b,{class:"ml-2",onClick:t[9]||(t[9]=o=>g(D.value))},{default:l(()=>[e(y)]),_:1})])):u("",!0),a.value&&a.value.h5!=""?(d(),w("div",qe,[Me,i("div",Ke,m(a.value.h5),1),e(b,{class:"ml-2",onClick:t[10]||(t[10]=o=>g(a.value.h5))},{default:l(()=>[e(y)]),_:1})])):u("",!0),i("div",Xe,[a.value&&a.value.weapp.appid!=""?(d(),w("div",Ye,[Ge,a.value.weapp.original_id?(d(),w("div",He,[Je,i("div",null,[p(m(a.value.weapp.original_id)+" ",1),e(b,{class:"ml-2",onClick:t[11]||(t[11]=o=>g(a.value.weapp.original_id))},{default:l(()=>[e(y)]),_:1})])])):u("",!0),i("div",Qe,[Ze,i("div",null,[p(m(a.value.weapp.appid)+" ",1),e(b,{class:"ml-2",onClick:t[12]||(t[12]=o=>g(a.value.weapp.appid))},{default:l(()=>[e(y)]),_:1})])]),i("div",et,[tt,i("div",at,[p(m(a.value.weapp.pagepath)+" ",1),e(b,{class:"ml-2",onClick:t[13]||(t[13]=o=>g(a.value.weapp.pagepath))},{default:l(()=>[e(y)]),_:1})])])])):u("",!0),a.value&&a.value.aliapp.appid!=""?(d(),w("div",lt,[ot,i("div",st,[it,i("div",null,[p(m(a.value.aliapp.appid)+" ",1),e(b,{class:"ml-2",onClick:t[14]||(t[14]=o=>g(a.value.aliapp.appid))},{default:l(()=>[e(y)]),_:1})])]),i("div",nt,[dt,i("div",pt,[p(m(a.value.aliapp.pagepath)+" ",1),e(b,{class:"ml-2",onClick:t[15]||(t[15]=o=>g(a.value.aliapp.pagepath))},{default:l(()=>[e(y)]),_:1})])])])):u("",!0)])]),_:1},8,["modelValue","before-close"])),[[L,B.value]]),e(T,{modelValue:x.value,"onUpdate:modelValue":t[17]||(t[17]=o=>x.value=o),title:"正在保存",width:"500","show-close":"false","align-center":""},{default:l(()=>[rt]),_:1},8,["modelValue"])])}}});const Qt=Pe(ct,[["__scopeId","data-v-36a1b05f"]]);export{Qt as default};
