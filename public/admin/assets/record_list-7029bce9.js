import{d as M,x as U,r as y,n as Y,f as L,h as u,c as w,e as t,w as s,a as n,t as i,u as l,q as r,F as $,T as j,s as E,i as _,R as q,A as k,K as H,L as O,bO as A,ac as K,aD as W,E as G,M as J,a7 as Q,ad as X,ae as Z,W as ee,Y as ae}from"./index-99f00cf3.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                *//* empty css                  *//* empty css                       */import"./el-form-item-4ed993c7.js";import{m as te,a0 as le}from"./vipcard-cf1e419a.js";const oe={class:"main-container"},se={class:"flex justify-between items-center"},re={class:"text-page-title"},ne={class:"mt-[10px]"},ie={class:"flex"},de=["src"],me={class:"flex flex flex-col ml-2"},ce={class:"flex"},pe=["src"],ue={class:"flex flex flex-col ml-2"},_e={class:"mt-[16px] flex justify-end"},Ie=M({__name:"record_list",setup(fe){const g=U(),P=parseInt(g.query.id),V=g.meta.title,b=y([]);(async()=>{b.value=await(await te()).data})();const a=Y({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{create_time:"",status:"",order_no:""}}),h=y(),c=(m=1)=>{a.loading=!0,a.page=m,le({page:a.page,limit:a.limit,goods_id:P,...a.searchParam}).then(o=>{a.loading=!1,a.data=o.data.data,a.total=o.data.total}).catch(()=>{a.loading=!1})};c();const C=L(),D=m=>{C.push("/vipcard/goods/service/record_info?id="+m.card_id)};return(m,o)=>{const R=H,p=O,F=A,N=K,T=W,f=G,z=J,v=Q,d=X,S=Z,B=ee,I=ae;return u(),w("div",oe,[t(v,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[n("div",se,[n("span",re,i(l(V)),1)]),t(v,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:s(()=>[t(z,{inline:!0,model:a.searchParam,ref_key:"searchFormRef",ref:h},{default:s(()=>[t(p,{label:l(r)("orderNo")},{default:s(()=>[t(R,{modelValue:a.searchParam.order_no,"onUpdate:modelValue":o[0]||(o[0]=e=>a.searchParam.order_no=e),placeholder:l(r)("orderNoPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(p,{label:l(r)("createTime")},{default:s(()=>[t(F,{modelValue:a.searchParam.create_time,"onUpdate:modelValue":o[1]||(o[1]=e=>a.searchParam.create_time=e),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":l(r)("startDate"),"end-placeholder":l(r)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),t(p,{label:l(r)("status"),prop:"member_label"},{default:s(()=>[t(T,{modelValue:a.searchParam.status,"onUpdate:modelValue":o[2]||(o[2]=e=>a.searchParam.status=e),"collapse-tags":"",clearable:"",placeholder:l(r)("statusPlaceholder"),class:"input-width"},{default:s(()=>[(u(!0),w($,null,j(b.value,(e,x)=>(u(),E(N,{label:e.name,value:e.status,key:x},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(p,null,{default:s(()=>[t(f,{type:"primary",onClick:o[3]||(o[3]=e=>c())},{default:s(()=>[_(i(l(r)("search")),1)]),_:1}),t(f,{onClick:o[4]||(o[4]=e=>m.resetForm(h.value))},{default:s(()=>[_(i(l(r)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),n("div",ne,[q((u(),E(S,{data:a.data,size:"large"},{empty:s(()=>[n("span",null,i(a.loading?"":l(r)("emptyData")),1)]),default:s(()=>[t(d,{label:l(r)("orderNo"),"min-width":"200",align:"left"},{default:s(({row:e})=>[_(i(e.order.order_no),1)]),_:1},8,["label"]),t(d,{label:l(r)("serviceInfo"),"min-width":"240",align:"left"},{default:s(({row:e})=>[n("div",ie,[n("img",{class:"w-[50px] h-[50px]",src:l(k)(e.goods.cover_thumb_small)},null,8,de),n("div",me,[n("span",null,i(e.goods.goods_name),1)])])]),_:1},8,["label"]),t(d,{label:l(r)("memberInfo"),"min-width":"200",align:"left"},{default:s(({row:e})=>[n("div",ce,[n("img",{class:"w-[50px] h-[50px]",src:l(k)(e.member.headimg)},null,8,pe),n("div",ue,[n("span",null,i(e.member.nickname),1),n("span",null,i(e.member.mobile),1)])])]),_:1},8,["label"]),t(d,{prop:"status_name",label:l(r)("status"),"min-width":"150"},null,8,["label"]),t(d,{prop:"create_time",label:l(r)("createTime"),"min-width":"150"},null,8,["label"]),t(d,{label:l(r)("operation"),fixed:"right","min-width":"100",align:"right"},{default:s(({row:e})=>[t(f,{type:"primary",link:"",onClick:x=>D(e)},{default:s(()=>[_(i(l(r)("detail")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[I,a.loading]]),n("div",_e,[t(B,{"current-page":a.page,"onUpdate:current-page":o[5]||(o[5]=e=>a.page=e),"page-size":a.limit,"onUpdate:page-size":o[6]||(o[6]=e=>a.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:a.total,onSizeChange:o[7]||(o[7]=e=>c()),onCurrentChange:c},null,8,["current-page","page-size","total"])])])]),_:1})])}}});export{Ie as default};
