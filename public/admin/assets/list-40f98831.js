import{d as fe,x as he,f as ye,r as u,n as be,h as d,c as m,e as a,w as i,a as p,t as o,u as l,q as t,F as B,T as N,s as v,i as f,R as xe,B as h,A as ge,a4 as $,aa as ve,aB as ke,K as we,L as Ce,bO as De,E as Te,M as Pe,a6 as Ve,aw as Ee,ax as Fe,ab as Be,ac as Ne,a9 as $e,W as Se,Y as Ue}from"./index-f7a01263.js";/* empty css                   */import{_ as Me}from"./index.vue_vue_type_script_setup_true_lang-ddfebf7a.js";/* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                    *//* empty css                *//* empty css                     *//* empty css                  *//* empty css                       */import{g as Ye,a as ze,b as Oe,c as Ae,l as Re,m as je,p as Le}from"./order-1274d9d3.js";import{_ as He}from"./delivery-action.vue_vue_type_style_index_0_lang-8b5cf319.js";import{_ as qe}from"./order-notes.vue_vue_type_style_index_0_lang-c0b51d10.js";import{_ as Ge}from"./order-export-select.vue_vue_type_script_setup_true_lang-dc493e13.js";import{_ as Ie}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                  *//* empty css                   *//* empty css                       *//* empty css                 *//* empty css                 */import"./delivery-3ed9abb1.js";import"./weapp-e18c2e8e.js";const Ke={class:"main-container"},We={class:"flex justify-between items-center"},Je={class:"text-page-title"},Qe={class:"table-body min-h-[150px]"},Xe={key:0},Ze={class:"flex items-center justify-between bg-[#f7f8fa] mt-[10px] border-[#e4e7ed] border-solid border-b-[1px] px-3 h-[35px] text-[12px] text-[#666]"},et={class:"ml-5"},tt={key:0,class:"ml-5"},at={class:"flex cursor-pointer"},lt={class:"flex items-center min-w-[50px] mr-[10px]"},ot=["src"],st={key:1,class:"w-[50px] h-[50px]",src:"",alt:""},rt={class:"flex flex-col"},nt={class:"multi-hidden text-[14px]"},it={class:"text-[12px] text-[#999]"},dt={key:0,class:"text-[12px] text-[#999]"},pt={class:"flex flex-col"},ct={key:0},mt={key:0},_t={key:1,class:"text-[13px]"},ut={class:"text-[13px] mt-[5px]"},ft={class:"flex flex-col"},ht={key:0},yt={key:0,class:"text-[14px]"},bt={key:0},xt={key:1,class:"text-[14px]"},gt={class:"flex flex-col"},vt=["onClick"],kt={class:"text-[12px] mt-[5px]"},wt={class:"text-[12px] mt-[5px]"},Ct={class:"text-[14px]"},Dt={class:"text-[14px]"},Tt={key:0,class:"text-[14px] min-h-[30px] leading-[30px] px-3 bg-[#fff0e5] text-[#ff7f5b]"},Pt={class:"mr-[5px]"},Vt={class:"mt-[16px] flex justify-end"},Et=fe({__name:"list",setup(Ft){const L=he(),D=ye(),H=L.meta.title,S=u(""),q=u([]),U=u([]),M=u([]);(async()=>{q.value=await(await Ye()).data,U.value=await(await ze()).data,M.value=await(await Oe()).data})();const T=u(null),P=u(!1),G=()=>{if(P.value==!1){P.value=!0;for(const r in s.data)for(const n in s.data[r].order_goods)T.value[r].toggleRowSelection(s.data[r].order_goods[n],!0)}else{P.value=!1;for(const r in s.data)for(const n in s.data[r].order_goods)T.value[r].clearSelection()}},s=be({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{search_type:"order_no",search_name:"",pay_type:"",order_from:"",status:"",create_time:[],pay_time:[]}}),Y=u(),y=(r=1)=>{s.loading=!0,s.page=r,Ae({page:s.page,limit:s.limit,...s.searchParam}).then(n=>{s.loading=!1,s.data=n.data.data.map(b=>(b.order_goods.forEach(x=>{x.rowNum=b.order_goods.length}),b)),s.total=n.data.total}).catch(()=>{s.loading=!1})};y();const I=r=>{s.searchParam.status=r,y()},K=({row:r,column:n,rowIndex:b,columnIndex:x})=>b===0?x===0?[r.rowNum,1]:x>3?[r.rowNum,1]:[1,1]:x===0?[0,0]:x>3?[0,0]:[1,1],W=u(null),z=u(""),V=u(!1),J=r=>{V.value=r},Q=r=>{z.value=r,V.value=!0},O=u(null),X=()=>{O.value.showDialog=!0},Z=r=>{D.push("/shop/order/detail?order_id="+r.order_id)},ee=r=>{const n=D.resolve({path:"/member/detail",query:{id:r}});window.open(n.href,"_blank")},te=r=>{$.confirm(t("orderCloseTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{Re(r.order_id).then(()=>{y()})})},E=u(null),ae=r=>{E.value.setFormData(r),E.value.showDialog=!0},le=r=>D.push("/thkd_shop_order/list"),F=u(null),oe=r=>{F.value.setFormData(r),F.value.showDialog=!0},se=r=>{$.confirm(t("orderFinishTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{je(r.order_id).then(()=>{y()})})},re=r=>{r&&(r.resetFields(),y())},ne=r=>{$.confirm(t("确定用户已完成付款了吗?"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{Le({order_id:r.order_id}).then(()=>{y()})})};return(r,n)=>{const b=ve,x=ke,ie=we,k=Ce,A=De,g=Te,de=Pe,R=Ve,w=Ee,pe=Fe,_=Be,j=Ne,ce=$e,me=Se,_e=Me,ue=Ue;return d(),m("div",Ke,[a(R,{class:"box-card !border-none",shadow:"never"},{default:i(()=>[p("div",We,[p("span",Je,o(l(H)),1)]),a(R,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:i(()=>[a(de,{inline:!0,model:s.searchParam,ref_key:"searchFormRef",ref:Y},{default:i(()=>[a(k,{label:l(t)("orderInfo"),prop:"search_name"},{default:i(()=>[a(x,{modelValue:s.searchParam.search_type,"onUpdate:modelValue":n[0]||(n[0]=e=>s.searchParam.search_type=e),clearable:"",class:"input-item"},{default:i(()=>[a(b,{label:l(t)("orderNo"),value:"order_no"},null,8,["label"]),a(b,{label:l(t)("outTradeNo"),value:"out_trade_no"},null,8,["label"])]),_:1},8,["modelValue"]),a(ie,{class:"input-item ml-3",modelValue:s.searchParam.search_name,"onUpdate:modelValue":n[1]||(n[1]=e=>s.searchParam.search_name=e),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),a(k,{label:l(t)("payType"),prop:"pay_type"},{default:i(()=>[a(x,{modelValue:s.searchParam.pay_type,"onUpdate:modelValue":n[2]||(n[2]=e=>s.searchParam.pay_type=e),clearable:"",class:"input-item"},{default:i(()=>[(d(!0),m(B,null,N(U.value,(e,C)=>(d(),v(b,{key:C,label:e.name,value:e.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),a(k,{label:l(t)("fromType"),prop:"from_type"},{default:i(()=>[a(x,{modelValue:s.searchParam.order_from,"onUpdate:modelValue":n[3]||(n[3]=e=>s.searchParam.order_from=e),clearable:"",class:"input-item"},{default:i(()=>[(d(!0),m(B,null,N(M.value,(e,C)=>(d(),v(b,{key:C,label:e,value:C},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),a(k,{label:l(t)("createTime"),prop:"create_time"},{default:i(()=>[a(A,{modelValue:s.searchParam.create_time,"onUpdate:modelValue":n[4]||(n[4]=e=>s.searchParam.create_time=e),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":l(t)("startDate"),"end-placeholder":l(t)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),a(k,{label:l(t)("payTime"),prop:"pay_time"},{default:i(()=>[a(A,{modelValue:s.searchParam.pay_time,"onUpdate:modelValue":n[5]||(n[5]=e=>s.searchParam.pay_time=e),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":l(t)("startDate"),"end-placeholder":l(t)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),a(k,null,{default:i(()=>[a(g,{type:"primary",onClick:n[6]||(n[6]=e=>y())},{default:i(()=>[f(o(l(t)("search")),1)]),_:1}),a(g,{onClick:n[7]||(n[7]=e=>re(Y.value))},{default:i(()=>[f(o(l(t)("reset")),1)]),_:1}),a(g,{type:"primary",onClick:X},{default:i(()=>[f(o(l(t)("export")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(pe,{modelValue:S.value,"onUpdate:modelValue":n[8]||(n[8]=e=>S.value=e),class:"demo-tabs",onTabChange:I},{default:i(()=>[a(w,{label:l(t)("all"),name:""},null,8,["label"]),a(w,{label:l(t)("toBePaid"),name:"1"},null,8,["label"]),a(w,{label:l(t)("toBeShipped"),name:"2"},null,8,["label"]),a(w,{label:l(t)("shipped"),name:"3"},null,8,["label"]),a(w,{label:l(t)("completed"),name:"5"},null,8,["label"]),a(w,{label:l(t)("closed"),name:"-1"},null,8,["label"])]),_:1},8,["modelValue"]),p("div",null,[a(j,{data:s.data,size:"large",class:"table-top",onSelectAll:G},{default:i(()=>[a(_,{type:"selection",width:"40"}),a(_,{label:l(t)("orderGoods"),"min-width":"200"},null,8,["label"]),a(_,{label:l(t)("goodsPriceNumber"),"min-width":"120"},null,8,["label"]),a(_,{label:l(t)("rightsProtection"),"min-width":"120"},null,8,["label"]),a(_,{label:l(t)("orderMoney"),"min-width":"120"},null,8,["label"]),a(_,{label:l(t)("buyInfo"),"min-width":"120"},null,8,["label"]),a(_,{label:l(t)("deliveryType"),"min-width":"100"},null,8,["label"]),a(_,{label:l(t)("orderStatus"),"min-width":"100"},null,8,["label"]),a(_,{label:l(t)("operation"),fixed:"right",align:"right","min-width":"120"},null,8,["label"])]),_:1},8,["data"]),xe((d(),m("div",Qe,[s.loading?h("",!0):(d(),m("div",Xe,[s.data.length?(d(!0),m(B,{key:0},N(s.data,(e,C)=>(d(),m("div",{key:C},[p("div",Ze,[p("div",null,[p("span",null,o(l(t)("orderNo"))+"："+o(e.order_no),1),p("span",et,o(l(t)("createTime"))+"："+o(e.create_time),1),e.pay?(d(),m("span",tt,o(l(t)("payType"))+"："+o(e.pay.type_name),1)):h("",!0)]),p("div",null,[a(g,{type:"primary",link:"",onClick:c=>Z(e)},{default:i(()=>[f(o(l(t)("info")),1)]),_:2},1032,["onClick"]),a(g,{type:"primary",link:"",onClick:c=>oe(e)},{default:i(()=>[f(o(l(t)("notes")),1)]),_:2},1032,["onClick"])])]),a(j,{data:e.order_goods,size:"large","show-header":!1,"span-method":K,ref_for:!0,ref_key:"multipleTable",ref:T},{default:i(()=>[a(_,{type:"selection",width:"40"}),a(_,{align:"left","min-width":"200"},{default:i(({row:c})=>[p("div",at,[p("div",lt,[c.goods_image?(d(),m("img",{key:0,class:"w-[50px] h-[50px]",src:l(ge)(c.goods_image),alt:""},null,8,ot)):(d(),m("img",st))]),p("div",rt,[p("p",nt,o(c.goods_name),1),p("span",it,o(c.sku_name),1),c.sku_no?(d(),m("span",dt,o(l(t)("商品编号"))+": "+o(c.sku_no),1)):h("",!0)])])]),_:1}),a(_,{"min-width":"120"},{default:i(({row:c})=>[p("div",pt,[e.activity_type=="exchange"?(d(),m("span",ct,[f(o(c.extend.point)+o(l(t)("point"))+" ",1),parseFloat(c.price)?(d(),m("span",mt,"+￥"+o(c.price),1)):h("",!0)])):(d(),m("span",_t,"￥"+o(c.price),1)),p("span",ut,o(c.num)+o(l(t)("piece")),1)])]),_:2},1024),a(_,{"min-width":"120"},{default:i(({row:c})=>[p("div",ft,[c.status!=1?(d(),m("span",ht,o(c.status_name),1)):h("",!0)])]),_:1}),a(_,{"min-width":"120","class-name":"border-0 border-l-[1px] border-solid border-[var(--el-table-border-color)]"},{default:i(()=>[e.activity_type=="exchange"?(d(),m("span",yt,[f(o(e.point)+o(l(t)("point"))+" ",1),parseFloat(e.order_money)?(d(),m("span",bt,"+￥"+o(e.order_money),1)):h("",!0)])):(d(),m("span",xt,"￥"+o(e.order_money),1))]),_:2},1024),a(_,{"min-width":"120"},{default:i(()=>[p("div",gt,[p("span",{class:"text-[12px] text-primary cursor-pointer",onClick:c=>ee(e.member.member_id)},o(e.member.nickname),9,vt),p("span",kt,o(e.taker_name)+" "+o(e.taker_mobile),1),p("span",wt,o(e.taker_full_address),1)])]),_:2},1024),a(_,{"min-width":"100"},{default:i(()=>[p("span",Ct,o(e.delivery_type_name),1)]),_:2},1024),a(_,{"min-width":"100"},{default:i(()=>[p("span",Dt,o(e.status_name.name),1)]),_:2},1024),a(_,{align:"right","min-width":"120"},{default:i(()=>[e.status==1?(d(),v(g,{key:0,type:"primary",link:"",onClick:c=>te(e)},{default:i(()=>[f(o(l(t)("orderClose")),1)]),_:2},1032,["onClick"])):h("",!0),e.status==1?(d(),v(g,{key:1,type:"primary",link:"",onClick:c=>ne(e)},{default:i(()=>[f(o(l(t)("已付款")),1)]),_:2},1032,["onClick"])):h("",!0),e.status==2?(d(),v(g,{key:2,type:"primary",link:"",onClick:c=>ae(e)},{default:i(()=>[f(o(l(t)("sendOutGoods")),1)]),_:2},1032,["onClick"])):h("",!0),e.status==2?(d(),v(g,{key:3,type:"primary",link:"",onClick:c=>le(e)},{default:i(()=>[f(o(l(t)("聚合快递发货")),1)]),_:2},1032,["onClick"])):h("",!0),e.status==3?(d(),v(g,{key:4,type:"primary",link:"",onClick:c=>se(e)},{default:i(()=>[f(o(l(t)("confirmTakeDelivery")),1)]),_:2},1032,["onClick"])):h("",!0)]),_:2},1024)]),_:2},1032,["data"]),e.shop_remark?(d(),m("div",Tt,[p("span",Pt,o(l(t)("notes"))+"：",1),p("span",null,o(e.shop_remark),1)])):h("",!0)]))),128)):(d(),v(ce,{key:1,"image-size":1,description:l(t)("emptyData")},null,8,["description"]))]))])),[[ue,s.loading]]),p("div",Vt,[a(me,{"current-page":s.page,"onUpdate:current-page":n[9]||(n[9]=e=>s.page=e),"page-size":s.limit,"onUpdate:page-size":n[10]||(n[10]=e=>s.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:s.total,onSizeChange:n[11]||(n[11]=e=>y()),onCurrentChange:y},null,8,["current-page","page-size","total"])])])]),_:1}),a(He,{ref_key:"deliveryActionDialog",ref:E,onComplete:y},null,512),a(qe,{ref_key:"orderNotesDialog",ref:F,onComplete:y},null,512),a(Ge,{ref_key:"selectExportDialog",ref:O,onComplete:Q},null,512),a(_e,{ref_key:"exportSureDialog",ref:W,show:V.value,type:z.value,searchParam:s.searchParam,onClose:J},null,8,["show","type","searchParam"])])}}});const pa=Ie(Et,[["__scopeId","data-v-d89a259f"]]);export{pa as default};
