import{d as B,r as m,Q as C,n as T,l as L,q as t,h as D,s as E,w as s,a as j,e as r,br as h,i as _,t as c,u as l,R as O,aD as A,L as G,K,aE as M,at as Q,au as X,M as Y,E as $,X as z,Y as H}from"./index-2a89d409.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                       *//* empty css                 *//* empty css                 *//* empty css                        */import"./el-form-item-4ed993c7.js";/* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                *//* empty css                    *//* empty css                       */import{e as J,f as W,h as Z}from"./data_scope-a8bd6013.js";const ee={class:"dialog-footer"},Ee=B({__name:"sysdept-edit",props:{menuTree:{type:Array,default:[]}},emits:["complete"],setup(w,{expose:N,emit:S}){const x=w;let d=m(!1);const p=m(!1),f=m([]);C(()=>x.menuTree,async n=>{f.value=[{dept_name:"顶级",dept_id:0}],f.value.push(...n)});const v={dept_id:"",p_dept_id:"",dept_name:"",sort:20,status:1},a=T({...v}),b=m(),I=L(()=>({p_dept_id:[{required:!0,message:t("pDeptIdPlaceholder"),trigger:"blur"}],dept_name:[{required:!0,message:t("deptNamePlaceholder"),trigger:"blur"}],sort:[{required:!0,message:t("sortPlaceholder"),trigger:"blur"}],status:[{required:!0,message:t("statusPlaceholder"),trigger:"blur"}]})),R=async n=>{if(p.value||!n)return;let e=a.dept_id?J:W;await n.validate(async i=>{i&&(p.value=!0,e(a).then(g=>{p.value=!1,d.value=!1,S("complete")}).catch(g=>{p.value=!1}))})};return N({showDialog:d,setFormData:async(n=null)=>{if(Object.assign(a,v),p.value=!0,n){const e=await(await Z(n.dept_id)).data;e&&Object.keys(a).forEach(i=>{e[i]!=null&&(a[i]=e[i])})}p.value=!1}}),(n,e)=>{const i=A,u=G,g=K,P=M,y=Q,q=X,F=Y,V=$,U=z,k=H;return D(),E(U,{modelValue:l(d),"onUpdate:modelValue":e[6]||(e[6]=o=>h(d)?d.value=o:d=o),title:a.dept_id?l(t)("updateSysDept"):l(t)("addSysDept"),width:"50%",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:s(()=>[j("span",ee,[r(V,{onClick:e[4]||(e[4]=o=>h(d)?d.value=!1:d=!1)},{default:s(()=>[_(c(l(t)("cancel")),1)]),_:1}),r(V,{type:"primary",loading:p.value,onClick:e[5]||(e[5]=o=>R(b.value))},{default:s(()=>[_(c(l(t)("confirm")),1)]),_:1},8,["loading"])])]),default:s(()=>[O((D(),E(F,{model:a,"label-width":"120px",ref_key:"formRef",ref:b,rules:l(I),class:"page-form"},{default:s(()=>[r(u,{label:l(t)("pDeptId")},{default:s(()=>[r(i,{modelValue:a.p_dept_id,"onUpdate:modelValue":e[0]||(e[0]=o=>a.p_dept_id=o),props:{label:"dept_name",value:"dept_id"},data:f.value,"render-after-expand":!1},null,8,["modelValue","data"])]),_:1},8,["label"]),r(u,{label:l(t)("deptName"),prop:"dept_name"},{default:s(()=>[r(g,{modelValue:a.dept_name,"onUpdate:modelValue":e[1]||(e[1]=o=>a.dept_name=o),clearable:"",placeholder:l(t)("deptNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(u,{label:l(t)("sort")},{default:s(()=>[r(P,{modelValue:a.sort,"onUpdate:modelValue":e[2]||(e[2]=o=>a.sort=o),clearable:"",placeholder:l(t)("sortPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(u,{label:l(t)("status")},{default:s(()=>[r(q,{modelValue:a.status,"onUpdate:modelValue":e[3]||(e[3]=o=>a.status=o)},{default:s(()=>[r(y,{label:1},{default:s(()=>[_(c(l(t)("statusNormal")),1)]),_:1}),r(y,{label:0},{default:s(()=>[_(c(l(t)("statusStop")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[k,p.value]])]),_:1},8,["modelValue","title"])}}});export{Ee as _};
