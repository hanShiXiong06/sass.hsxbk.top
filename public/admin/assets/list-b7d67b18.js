import{d as he,x as be,f as ge,r as _,n as ve,h as d,c as m,e,w as i,a as p,t as r,u as l,q as a,F as D,T as A,s as C,i as y,R as xe,B as v,A as ke,a4 as H,aa as we,aB as Ce,K as De,L as Ee,bO as Pe,E as Te,M as Ve,a6 as Fe,aw as $e,ax as Ne,ab as Ae,ac as Be,a9 as Se,W as Me,Y as Ue}from"./index-6ea097a6.js";/* empty css                   */import{_ as Ye}from"./index.vue_vue_type_script_setup_true_lang-edd377c9.js";/* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                    *//* empty css                *//* empty css                     *//* empty css                  *//* empty css                       */import{g as je,a as ze,b as Oe,c as Re,q as Le,r as He}from"./order-d7ffe8c0.js";import{_ as qe}from"./delivery-action.vue_vue_type_style_index_0_lang-96d33a5e.js";import{_ as Ge}from"./order-notes.vue_vue_type_style_index_0_lang-fcb3ad91.js";import{_ as Ie}from"./order-export-select.vue_vue_type_script_setup_true_lang-cb3fd688.js";import{_ as Ke}from"./order-edit-address.vue_vue_type_style_index_0_lang-2c9e23f0.js";import{_ as We}from"./adjust-money.vue_vue_type_style_index_0_lang-2be91958.js";import{_ as Je}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                  *//* empty css                   *//* empty css                       *//* empty css                 *//* empty css                 */import"./delivery-057b70d4.js";import"./weapp-d2a52090.js";import"./qqmap-011f3cfb.js";const Qe={class:"main-container"},Xe={class:"flex justify-between items-center"},Ze={class:"text-page-title"},et={class:"table-body min-h-[150px]"},tt={key:0},at={class:"flex items-center justify-between bg-[#f7f8fa] mt-[10px] border-[#e4e7ed] border-solid border-b-[1px] px-3 h-[35px] text-[12px] text-[#666]"},lt={class:"ml-5"},ot={key:0,class:"ml-5"},rt={class:"flex cursor-pointer"},st={class:"flex items-center min-w-[50px] mr-[10px]"},nt=["src"],it={key:1,class:"w-[50px] h-[50px]",src:"",alt:""},dt={class:"flex flex-col"},pt={class:"multi-hidden text-[14px]"},ct={class:"text-[12px] text-[#999]"},mt={class:"flex flex-col"},ut={key:0},_t={key:0},ft={key:1,class:"text-[13px]"},yt={class:"text-[13px] mt-[5px]"},ht={class:"flex flex-col"},bt={key:0},gt={key:0,class:"text-[14px]"},vt={key:0},xt={key:1,class:"text-[14px]"},kt={class:"flex flex-col"},wt=["onClick"],Ct={class:"text-[12px] mt-[5px]"},Dt={class:"text-[12px] mt-[5px]"},Et={class:"text-[14px]"},Pt={class:"text-[14px]"},Tt={key:0,class:"text-[14px] min-h-[30px] leading-[30px] px-3 bg-[#fff0e5] text-[#ff7f5b]"},Vt={class:"mr-[5px]"},Ft={class:"mt-[16px] flex justify-end"},$t=he({__name:"list",setup(Nt){const q=be(),B=ge(),G=q.meta.title,S=_(""),I=_([]),M=_([]),U=_([]);(async()=>{I.value=await(await je()).data,M.value=await(await ze()).data,U.value=await(await Oe()).data})();const E=_(null),P=_(!1),K=()=>{if(P.value==!1){P.value=!0;for(const s in o.data)for(const n in o.data[s].order_goods)E.value[s].toggleRowSelection(o.data[s].order_goods[n],!0)}else{P.value=!1;for(const s in o.data)for(const n in o.data[s].order_goods)E.value[s].clearSelection()}},o=ve({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{search_type:"order_no",search_name:"",pay_type:"",order_from:"",status:"",create_time:[],pay_time:[]}}),Y=_(),f=(s=1)=>{o.loading=!0,o.page=s,Re({page:o.page,limit:o.limit,...o.searchParam}).then(n=>{o.loading=!1,o.data=n.data.data.map(h=>(h.order_goods.forEach(b=>{b.rowNum=h.order_goods.length}),h)),o.total=n.data.total}).catch(()=>{o.loading=!1})};f();const W=s=>{o.searchParam.status=s,f()},J=({row:s,column:n,rowIndex:h,columnIndex:b})=>h===0?b===0?[s.rowNum,1]:b>3?[s.rowNum,1]:[1,1]:b===0?[0,0]:b>3?[0,0]:[1,1],Q=_(null),j=_(""),T=_(!1),X=s=>{T.value=s},Z=s=>{j.value=s,T.value=!0},z=_(null),ee=()=>{z.value.showDialog=!0},te=s=>{B.push("/shop/order/detail?order_id="+s.order_id)},ae=s=>{const n=B.resolve({path:"/member/detail",query:{id:s}});window.open(n.href,"_blank")},le=s=>{H.confirm(a("orderCloseTips"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{Le(s.order_id).then(()=>{f()})})},V=_(null),oe=s=>{V.value.setFormData(s),V.value.showDialog=!0},F=_(null),re=s=>{F.value.setFormData(s),F.value.showDialog=!0},$=_(null),se=s=>{$.value.setFormData(s),$.value.showDialog=!0},ne=s=>{H.confirm(a("orderFinishTips"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{He(s.order_id).then(()=>{f()})})},ie=s=>{s&&(s.resetFields(),f())},N=_(null),de=async s=>{N.value.showDialog=!0,N.value.setFormData(s)};return(s,n)=>{const h=we,b=Ce,pe=De,x=Ee,O=Pe,g=Te,ce=Ve,R=Fe,k=$e,me=Ne,u=Ae,L=Be,ue=Se,_e=Me,fe=Ye,ye=Ue;return d(),m("div",Qe,[e(R,{class:"box-card !border-none",shadow:"never"},{default:i(()=>[p("div",Xe,[p("span",Ze,r(l(G)),1)]),e(R,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:i(()=>[e(ce,{inline:!0,model:o.searchParam,ref_key:"searchFormRef",ref:Y},{default:i(()=>[e(x,{label:l(a)("orderInfo"),prop:"search_name"},{default:i(()=>[e(b,{modelValue:o.searchParam.search_type,"onUpdate:modelValue":n[0]||(n[0]=t=>o.searchParam.search_type=t),clearable:"",class:"input-item"},{default:i(()=>[e(h,{label:l(a)("orderNo"),value:"order_no"},null,8,["label"]),e(h,{label:l(a)("outTradeNo"),value:"out_trade_no"},null,8,["label"])]),_:1},8,["modelValue"]),e(pe,{class:"input-item ml-3",modelValue:o.searchParam.search_name,"onUpdate:modelValue":n[1]||(n[1]=t=>o.searchParam.search_name=t),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),e(x,{label:l(a)("payType"),prop:"pay_type"},{default:i(()=>[e(b,{modelValue:o.searchParam.pay_type,"onUpdate:modelValue":n[2]||(n[2]=t=>o.searchParam.pay_type=t),clearable:"",class:"input-item"},{default:i(()=>[(d(!0),m(D,null,A(M.value,(t,w)=>(d(),C(h,{key:w,label:t.name,value:t.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(x,{label:l(a)("fromType"),prop:"from_type"},{default:i(()=>[e(b,{modelValue:o.searchParam.order_from,"onUpdate:modelValue":n[3]||(n[3]=t=>o.searchParam.order_from=t),clearable:"",class:"input-item"},{default:i(()=>[(d(!0),m(D,null,A(U.value,(t,w)=>(d(),C(h,{key:w,label:t,value:w},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(x,{label:l(a)("createTime"),prop:"create_time"},{default:i(()=>[e(O,{modelValue:o.searchParam.create_time,"onUpdate:modelValue":n[4]||(n[4]=t=>o.searchParam.create_time=t),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":l(a)("startDate"),"end-placeholder":l(a)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),e(x,{label:l(a)("payTime"),prop:"pay_time"},{default:i(()=>[e(O,{modelValue:o.searchParam.pay_time,"onUpdate:modelValue":n[5]||(n[5]=t=>o.searchParam.pay_time=t),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":l(a)("startDate"),"end-placeholder":l(a)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),e(x,null,{default:i(()=>[e(g,{type:"primary",onClick:n[6]||(n[6]=t=>f())},{default:i(()=>[y(r(l(a)("search")),1)]),_:1}),e(g,{onClick:n[7]||(n[7]=t=>ie(Y.value))},{default:i(()=>[y(r(l(a)("reset")),1)]),_:1}),e(g,{type:"primary",onClick:ee},{default:i(()=>[y(r(l(a)("export")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(me,{modelValue:S.value,"onUpdate:modelValue":n[8]||(n[8]=t=>S.value=t),class:"demo-tabs",onTabChange:W},{default:i(()=>[e(k,{label:l(a)("all"),name:""},null,8,["label"]),e(k,{label:l(a)("toBePaid"),name:"1"},null,8,["label"]),e(k,{label:l(a)("toBeShipped"),name:"2"},null,8,["label"]),e(k,{label:l(a)("shipped"),name:"3"},null,8,["label"]),e(k,{label:l(a)("completed"),name:"5"},null,8,["label"]),e(k,{label:l(a)("closed"),name:"-1"},null,8,["label"])]),_:1},8,["modelValue"]),p("div",null,[e(L,{data:o.data,size:"large",class:"table-top",onSelectAll:K},{default:i(()=>[e(u,{type:"selection",width:"40"}),e(u,{label:l(a)("orderGoods"),"min-width":"200"},null,8,["label"]),e(u,{label:l(a)("goodsPriceNumber"),"min-width":"120"},null,8,["label"]),e(u,{label:l(a)("rightsProtection"),"min-width":"120"},null,8,["label"]),e(u,{label:l(a)("orderMoney"),"min-width":"120"},null,8,["label"]),e(u,{label:l(a)("buyInfo"),"min-width":"120"},null,8,["label"]),e(u,{label:l(a)("deliveryType"),"min-width":"100"},null,8,["label"]),e(u,{label:l(a)("orderStatus"),"min-width":"100"},null,8,["label"]),e(u,{label:l(a)("operation"),fixed:"right",align:"right","min-width":"120"},null,8,["label"])]),_:1},8,["data"]),xe((d(),m("div",et,[o.loading?v("",!0):(d(),m("div",tt,[o.data.length?(d(!0),m(D,{key:0},A(o.data,(t,w)=>(d(),m("div",{key:w},[p("div",at,[p("div",null,[p("span",null,r(l(a)("orderNo"))+"："+r(t.order_no),1),p("span",lt,r(l(a)("createTime"))+"："+r(t.create_time),1),t.pay?(d(),m("span",ot,r(l(a)("payType"))+"："+r(t.pay.type_name),1)):v("",!0)]),p("div",null,[e(g,{type:"primary",link:"",onClick:c=>te(t)},{default:i(()=>[y(r(l(a)("info")),1)]),_:2},1032,["onClick"]),e(g,{type:"primary",link:"",onClick:c=>se(t)},{default:i(()=>[y(r(l(a)("notes")),1)]),_:2},1032,["onClick"])])]),e(L,{data:t.order_goods,size:"large","show-header":!1,"span-method":J,ref_for:!0,ref_key:"multipleTable",ref:E},{default:i(()=>[e(u,{type:"selection",width:"40"}),e(u,{align:"left","min-width":"200"},{default:i(({row:c})=>[p("div",rt,[p("div",st,[c.goods_image?(d(),m("img",{key:0,class:"w-[50px] h-[50px]",src:l(ke)(c.goods_image),alt:""},null,8,nt)):(d(),m("img",it))]),p("div",dt,[p("p",pt,r(c.goods_name),1),p("span",ct,r(c.sku_name),1)])])]),_:1}),e(u,{"min-width":"120"},{default:i(({row:c})=>[p("div",mt,[t.activity_type=="exchange"?(d(),m("span",ut,[y(r(c.extend.point)+r(l(a)("point"))+" ",1),parseFloat(c.price)?(d(),m("span",_t,"+￥"+r(c.price),1)):v("",!0)])):(d(),m("span",ft,"￥"+r(c.price),1)),p("span",yt,r(c.num)+r(l(a)("piece")),1)])]),_:2},1024),e(u,{"min-width":"120"},{default:i(({row:c})=>[p("div",ht,[c.status!=1?(d(),m("span",bt,r(c.status_name),1)):v("",!0)])]),_:1}),e(u,{"min-width":"120","class-name":"border-0 border-l-[1px] border-solid border-[var(--el-table-border-color)]"},{default:i(()=>[t.activity_type=="exchange"?(d(),m("span",gt,[y(r(t.point)+r(l(a)("point"))+" ",1),parseFloat(t.order_money)?(d(),m("span",vt,"+￥"+r(t.order_money),1)):v("",!0)])):(d(),m("span",xt,"￥"+r(t.order_money),1))]),_:2},1024),e(u,{"min-width":"120"},{default:i(()=>[p("div",kt,[p("span",{class:"text-[12px] text-primary cursor-pointer",onClick:c=>ae(t.member.member_id)},r(t.member.nickname),9,wt),p("span",Ct,r(t.taker_name)+" "+r(t.taker_mobile),1),p("span",Dt,r(t.taker_full_address),1)])]),_:2},1024),e(u,{"min-width":"100"},{default:i(()=>[p("span",Et,r(t.delivery_type_name),1)]),_:2},1024),e(u,{"min-width":"100"},{default:i(()=>[p("span",Pt,r(t.status_name.name),1)]),_:2},1024),e(u,{align:"right","min-width":"120"},{default:i(()=>[t.status==1?(d(),m(D,{key:0},[e(g,{type:"primary",link:"",onClick:c=>le(t)},{default:i(()=>[y(r(l(a)("orderClose")),1)]),_:2},1032,["onClick"]),e(g,{type:"primary",link:"",onClick:c=>oe(t)},{default:i(()=>[y(r(l(a)("editPrice")),1)]),_:2},1032,["onClick"]),t.delivery_type!="virtual"?(d(),C(g,{key:0,type:"primary",link:"",onClick:c=>de(t)},{default:i(()=>[y(r(l(a)("editAddress")),1)]),_:2},1032,["onClick"])):v("",!0)],64)):v("",!0),t.status==2?(d(),C(g,{key:1,type:"primary",link:"",onClick:c=>re(t)},{default:i(()=>[y(r(l(a)("sendOutGoods")),1)]),_:2},1032,["onClick"])):v("",!0),t.status==3?(d(),C(g,{key:2,type:"primary",link:"",onClick:c=>ne(t)},{default:i(()=>[y(r(l(a)("confirmTakeDelivery")),1)]),_:2},1032,["onClick"])):v("",!0)]),_:2},1024)]),_:2},1032,["data"]),t.shop_remark?(d(),m("div",Tt,[p("span",Vt,r(l(a)("notes"))+"：",1),p("span",null,r(t.shop_remark),1)])):v("",!0)]))),128)):(d(),C(ue,{key:1,"image-size":1,description:l(a)("emptyData")},null,8,["description"]))]))])),[[ye,o.loading]]),p("div",Ft,[e(_e,{"current-page":o.page,"onUpdate:current-page":n[9]||(n[9]=t=>o.page=t),"page-size":o.limit,"onUpdate:page-size":n[10]||(n[10]=t=>o.limit=t),layout:"total, sizes, prev, pager, next, jumper",total:o.total,onSizeChange:n[11]||(n[11]=t=>f()),onCurrentChange:f},null,8,["current-page","page-size","total"])])])]),_:1}),e(We,{ref_key:"orderAdjustMoneyActionDialog",ref:V,onComplete:f},null,512),e(qe,{ref_key:"deliveryActionDialog",ref:F,onComplete:f},null,512),e(Ge,{ref_key:"orderNotesDialog",ref:$,onComplete:f},null,512),e(Ie,{ref_key:"selectExportDialog",ref:z,onComplete:Z},null,512),e(fe,{ref_key:"exportSureDialog",ref:Q,show:T.value,type:j.value,searchParam:o.searchParam,onClose:X},null,8,["show","type","searchParam"]),e(Ke,{ref_key:"orderEditAddressDialog",ref:N,onComplete:f},null,512)])}}});const fa=Je($t,[["__scopeId","data-v-799ae252"]]);export{fa as default};
