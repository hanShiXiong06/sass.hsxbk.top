import{d as Be,f as Ge,x as Le,r as f,n as T,a2 as Ue,h as p,c as x,e as n,w as r,a as d,t as c,u as s,i as m,q as t,F as z,T as F,s as b,R as V,c9 as B,b6 as G,B as w,A as Re,a5 as L,U as P,aq as Ie,a3 as De,E as Oe,K as ze,L as Fe,bF as Me,ac as Ae,aD as Ke,M as je,a7 as qe,ay as He,az as Je,aw as We,ad as Ye,J as Qe,a1 as Xe,ae as Ze,W as ea,Y as aa,p as ta,g as oa}from"./index-99f00cf3.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css                        *//* empty css                        *//* empty css                    *//* empty css                *//* empty css                *//* empty css                          *//* empty css                 */import"./el-form-item-4ed993c7.js";/* empty css                  */import{_ as re}from"./goods_default-995568ac.js";import la from"./goods-member-price-popup-9351aa24.js";import sa from"./goods-stock-edit-popup-75dc6190.js";import na from"./goods-price-edit-popup-40c2cce5.js";import{_ as ra}from"./goods-spread-popup.vue_vue_type_script_setup_true_lang-4b1b7eb1.js";import{g as ia,b as da,a1 as ca,a2 as pa,a3 as M,a4 as ne,a5 as ua,a6 as ma,a7 as _a}from"./goods-4a8ebb3e.js";import{A as ga}from"./member-470daffe.js";import{_ as ha}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                  *//* empty css                   *//* empty css                       */import"./browser-a1ac24ac.js";const A=$=>(ta("data-v-8f65ef83"),$=$(),oa(),$),fa={class:"main-container"},ba={class:"flex justify-between items-center"},va={class:"text-page-title"},ya={class:"region-input"},Pa=["placeholder"],ka=A(()=>d("span",{class:"separator"},"-",-1)),xa=["placeholder"],Ca={class:"region-input"},Ea=["placeholder"],Ta=A(()=>d("span",{class:"separator"},"-",-1)),Va=["placeholder"],wa={class:"mt-[10px]"},$a={class:"mb-[10px] flex items-center"},Sa=["onClick"],Na={class:"min-w-[70px] h-[70px] flex items-center justify-center"},Ba=A(()=>d("div",{class:"image-slot"},[d("img",{class:"w-[70px] h-[70px]",src:re})],-1)),Ga={key:1,class:"w-[70px] h-[70px]",src:re,fit:"contain"},La={class:"ml-2"},Ua=["title"],Ra={class:"text-primary text-[12px]"},Ia=["onClick"],Da=["onClick"],Oa={key:0},za={key:1},Fa={class:"mt-[16px] flex justify-end"},Ma=Be({__name:"list",setup($){const U=Ge(),K=Le(),ie=K.meta.title,_=f(!1),o=T({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{goods_name:"",goods_category:[],goods_type:"",brand_id:"",label_ids:"",start_sale_num:"",end_sale_num:"",start_price:"",end_price:"",status:K.query.status||"1",order:"",sort:""}}),j=f(),C={number:/^\d{0,10}$/,digit:/^\d{0,10}(.?\d{0,2})$/},R=T([]),q=T([]),H=T([]),J=T([]);(()=>{ia().then(l=>{const a=l.data;if(a){const i=[];i.push({value:"",label:"全部",children:[]}),a.forEach(k=>{const g=[];k.child_list&&(g.push({value:k.category_id,label:"全部"}),k.child_list.forEach(N=>{g.push({value:N.category_id,label:N.category_name})})),i.push({value:k.category_id,label:k.category_name,children:g})}),R.splice(0,R.length,...i)}}),da().then(l=>{const a=l.data;if(a)for(const i in a)q.push(a[i])}),ca({}).then(l=>{const a=l.data;a&&H.push(...a)}),pa({}).then(l=>{const a=l.data;a&&J.push(...a)})})();const de=(l,a)=>{o.searchParam.status=l.props.name,u()},E=f(),S=f(!1),ce=l=>{S.value=!1,W.value.toggleAllSelection()},W=f(),v=f([]),pe=l=>{v.value=l,E.value=!1,v.value.length>0&&v.value.length<o.data.length?S.value=!0:S.value=!1,v.value.length==o.data.length&&(E.value=!0)},ue=l=>{const a=U.resolve({path:"/preview/wap",query:{page:`/addon/shop/pages/goods/detail?goods_id=${l.goods_id}`}});window.open(a.href)},me=l=>{let a="";l.order=="ascending"?a="asc":l.order=="descending"&&(a="desc"),a&&(o.searchParam.order=l.prop,o.searchParam.sort=a),u()},Y=(l,a)=>{a?M({goods_ids:l.goods_id,status:a}).then(i=>{u()}):L.confirm(t("statusChangeTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{M({goods_ids:l.goods_id,status:a}).then(i=>{u()})})},Q=l=>{if(v.value.length==0){P({type:"warning",message:`${t("batchEmptySelectedGoodsTips")}`});return}const a=[];v.value.forEach(i=>{a.push(i.goods_id)}),M({goods_ids:a,status:l}).then(i=>{u()})},_e=()=>{if(v.value.length==0){P({type:"warning",message:`${t("batchEmptySelectedGoodsTips")}`});return}L.confirm(t("batchGoodsDeleteTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{if(_.value)return;_.value=!0;const l=[];v.value.forEach(a=>{l.push(a.goods_id)}),ne({goods_ids:l}).then(()=>{u(),_.value=!1}).catch(()=>{_.value=!1})})},ge=Ie((l,a)=>{if(isNaN(l)||!C.number.test(l)){P({type:"warning",message:`${t("sortTips")}`});return}l>99999999&&(a.sort=99999999),ua({goods_id:a.goods_id,sort:l}).then(i=>{})}),u=(l=1)=>{if(o.searchParam.start_sale_num&&!C.digit.test(o.searchParam.start_sale_num)){P({type:"warning",message:`${t("startSaleNumTips")}`});return}if(o.searchParam.end_sale_num&&!C.digit.test(o.searchParam.end_sale_num)){P({type:"warning",message:`${t("endSaleNumTips")}`});return}if(Number(o.searchParam.start_sale_num)>Number(o.searchParam.end_sale_num)){P({type:"warning",message:`${t("shopSaleNumTips")}`});return}if(o.searchParam.start_price&&!C.digit.test(o.searchParam.start_price)){P({type:"warning",message:`${t("startPriceTips")}`});return}if(o.searchParam.end_price&&!C.digit.test(o.searchParam.end_price)){P({type:"warning",message:`${t("endPriceTips")}`});return}if(Number(o.searchParam.start_price)>Number(o.searchParam.end_price)){P({type:"warning",message:`${t("shopPriceTips")}`});return}o.loading=!0,o.page=l;const a=De(o.searchParam);ma({page:o.page,limit:o.limit,...a}).then(i=>{o.loading=!1,o.data=i.data.data,o.total=i.data.total,v.value=[],E.value=!1}).catch(()=>{o.loading=!1})};u();const he=()=>{U.push("/shop/goods/real_edit")},fe=l=>{U.push(l.goods_edit_path+"?goods_id="+l.goods_id)},X=f(null),be=l=>{X.value.show(l)},Z=f(null),ve=l=>{Z.value.show(l)},ee=f(null),ye=l=>{ee.value.show(l)},ae=f([]);(()=>{ga().then(l=>{ae.value=l.data?l.data:[]})})();const te=f(null),Pe=l=>{te.value.show(l,ae.value)},ke=l=>{L.confirm(t("goodsCopyTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{_.value||(_.value=!0,_a({goods_id:l.goods_id}).then(a=>{a.code==1&&u(),_.value=!1}).catch(a=>{_.value=!1}))})},xe=l=>{L.confirm(t("goodsDeleteTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{_.value||(_.value=!0,ne({goods_ids:l}).then(()=>{u(),_.value=!1}).catch(()=>{_.value=!1}))})},Ce=l=>{l&&(l.resetFields(),o.searchParam.start_price="",o.searchParam.end_price="",o.searchParam.start_sale_num="",o.searchParam.end_sale_num="",u())};return(l,a)=>{const i=Oe,k=ze,g=Fe,N=Me,I=Ae,D=Ke,Ee=je,oe=qe,O=He,Te=Je,Ve=We,y=Ye,we=Qe,le=Ue("EditPen"),se=Xe,$e=Ze,Se=ea,Ne=aa;return p(),x("div",fa,[n(oe,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[d("div",ba,[d("span",va,c(s(ie)),1),n(i,{type:"primary",onClick:he},{default:r(()=>[m(c(s(t)("addGoods")),1)]),_:1})]),n(oe,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:r(()=>[n(Ee,{inline:!0,model:o.searchParam,ref_key:"searchFormRef",ref:j},{default:r(()=>[n(g,{label:s(t)("goodsName"),prop:"goods_name"},{default:r(()=>[n(k,{modelValue:o.searchParam.goods_name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.searchParam.goods_name=e),modelModifiers:{trim:!0},placeholder:s(t)("goodsNamePlaceholder"),maxlength:"60"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(g,{label:s(t)("goodsCategory"),prop:"goods_category"},{default:r(()=>[n(N,{modelValue:o.searchParam.goods_category,"onUpdate:modelValue":a[1]||(a[1]=e=>o.searchParam.goods_category=e),options:R,placeholder:s(t)("goodsCategoryPlaceholder"),clearable:"",props:{value:"value",label:"label",emitPath:!1}},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"]),n(g,{label:s(t)("goodsType"),prop:"goods_type"},{default:r(()=>[n(D,{modelValue:o.searchParam.goods_type,"onUpdate:modelValue":a[2]||(a[2]=e=>o.searchParam.goods_type=e),placeholder:s(t)("goodsTypePlaceholder"),clearable:""},{default:r(()=>[(p(!0),x(z,null,F(q,e=>(p(),b(I,{key:e.type,label:e.name,value:e.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(g,{label:s(t)("brand"),prop:"brand_id"},{default:r(()=>[n(D,{modelValue:o.searchParam.brand_id,"onUpdate:modelValue":a[3]||(a[3]=e=>o.searchParam.brand_id=e),placeholder:s(t)("brandPlaceholder"),clearable:""},{default:r(()=>[(p(!0),x(z,null,F(H,e=>(p(),b(I,{key:e.brand_id,label:e.brand_name,value:e.brand_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(g,{label:s(t)("labelIds"),prop:"label_ids"},{default:r(()=>[n(D,{modelValue:o.searchParam.label_ids,"onUpdate:modelValue":a[4]||(a[4]=e=>o.searchParam.label_ids=e),placeholder:s(t)("labelIdsPlaceholder"),clearable:""},{default:r(()=>[(p(!0),x(z,null,F(J,e=>(p(),b(I,{key:e.label_id,label:e.label_name,value:e.label_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(g,{label:s(t)("saleNum"),prop:"sale_num"},{default:r(()=>[d("div",ya,[V(d("input",{type:"text",placeholder:s(t)("startSaleNumPlaceholder"),maxlength:"10","onUpdate:modelValue":a[5]||(a[5]=e=>o.searchParam.start_sale_num=e),onKeyup:a[6]||(a[6]=e=>s(B)(e))},null,40,Pa),[[G,o.searchParam.start_sale_num,void 0,{trim:!0}]]),ka,V(d("input",{type:"text",placeholder:s(t)("endSaleNumPlaceholder"),maxlength:"10","onUpdate:modelValue":a[7]||(a[7]=e=>o.searchParam.end_sale_num=e),onKeyup:a[8]||(a[8]=e=>s(B)(e))},null,40,xa),[[G,o.searchParam.end_sale_num,void 0,{trim:!0}]])])]),_:1},8,["label"]),n(g,{label:s(t)("skuPrice"),prop:"sku_price"},{default:r(()=>[d("div",Ca,[V(d("input",{type:"text",placeholder:s(t)("startPricePlaceholder"),maxlength:"10","onUpdate:modelValue":a[9]||(a[9]=e=>o.searchParam.start_price=e),onKeyup:a[10]||(a[10]=e=>s(B)(e))},null,40,Ea),[[G,o.searchParam.start_price,void 0,{trim:!0}]]),Ta,V(d("input",{type:"text",placeholder:s(t)("endPricePlaceholder"),maxlength:"10","onUpdate:modelValue":a[11]||(a[11]=e=>o.searchParam.end_price=e),onKeyup:a[12]||(a[12]=e=>s(B)(e))},null,40,Va),[[G,o.searchParam.end_price,void 0,{trim:!0}]])])]),_:1},8,["label"]),n(g,null,{default:r(()=>[n(i,{type:"primary",onClick:a[13]||(a[13]=e=>u())},{default:r(()=>[m(c(s(t)("search")),1)]),_:1}),n(i,{onClick:a[14]||(a[14]=e=>Ce(j.value))},{default:r(()=>[m(c(s(t)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),d("div",wa,[n(Te,{modelValue:o.searchParam.status,"onUpdate:modelValue":a[15]||(a[15]=e=>o.searchParam.status=e),class:"goods-tabs",onTabClick:de},{default:r(()=>[n(O,{label:s(t)("statusOn"),name:"1"},null,8,["label"]),n(O,{label:s(t)("statusOff"),name:"0"},null,8,["label"]),n(O,{label:s(t)("statusAll"),name:""},null,8,["label"])]),_:1},8,["modelValue"]),d("div",$a,[n(Ve,{modelValue:E.value,"onUpdate:modelValue":a[16]||(a[16]=e=>E.value=e),size:"large",class:"px-[14px]",onChange:ce,indeterminate:S.value},null,8,["modelValue","indeterminate"]),o.searchParam.status!="1"?(p(),b(i,{key:0,onClick:a[17]||(a[17]=e=>Q(1)),size:"small"},{default:r(()=>[m(c(s(t)("batchOnGoods")),1)]),_:1})):w("",!0),o.searchParam.status!="0"?(p(),b(i,{key:1,onClick:a[18]||(a[18]=e=>Q(0)),size:"small"},{default:r(()=>[m(c(s(t)("batchOffGoods")),1)]),_:1})):w("",!0),n(i,{onClick:_e,size:"small"},{default:r(()=>[m(c(s(t)("batchDeleteGoods")),1)]),_:1})]),V((p(),b($e,{data:o.data,size:"large",ref_key:"goodsListTableRef",ref:W,onSortChange:me,onSelectionChange:pe},{empty:r(()=>[d("span",null,c(o.loading?"":s(t)("emptyData")),1)]),default:r(()=>[n(y,{type:"selection",width:"55"}),n(y,{prop:"goods_id",label:s(t)("goodsInfo"),"min-width":"300"},{default:r(({row:e})=>[d("div",{class:"flex items-center cursor-pointer",onClick:h=>ue(e)},[d("div",Na,[e.goods_cover_thumb_small?(p(),b(we,{key:0,class:"w-[70px] h-[70px]",src:s(Re)(e.goods_cover_thumb_small),fit:"contain"},{error:r(()=>[Ba]),_:2},1032,["src"])):(p(),x("img",Ga))]),d("div",La,[d("span",{title:e.goods_name,class:"multi-hidden"},c(e.goods_name),9,Ua),d("span",Ra,c(e.goods_type_name),1)])],8,Sa)]),_:1},8,["label"]),n(y,{prop:"price",label:s(t)("skuPrice"),"min-width":"120",align:"right",sortable:"custom"},{default:r(({row:e})=>[d("div",{class:"cursor-pointer price-wrap",onClick:h=>be(e)},[d("span",null,"￥"+c(e.goodsSku.price),1),n(se,{class:"icon-wrap ml-[5px] invisible"},{default:r(()=>[n(le)]),_:1})],8,Ia)]),_:1},8,["label"]),n(y,{prop:"stock",label:s(t)("stock"),"min-width":"120",sortable:"custom"},{default:r(({row:e})=>[d("div",{class:"cursor-pointer stock-wrap",onClick:h=>ve(e)},[d("span",null,c(e.stock),1),n(se,{class:"icon-wrap ml-[5px] invisible"},{default:r(()=>[n(le)]),_:1})],8,Da)]),_:1},8,["label"]),n(y,{prop:"sale_num",label:s(t)("saleNum"),"min-width":"100",sortable:"custom"},null,8,["label"]),n(y,{prop:"status",label:s(t)("status"),"min-width":"100"},{default:r(({row:e})=>[e.status==1?(p(),x("div",Oa,c(s(t)("statusOn")),1)):w("",!0),e.status==0?(p(),x("div",za,c(s(t)("statusOff")),1)):w("",!0)]),_:1},8,["label"]),n(y,{prop:"sort",label:s(t)("sort"),"min-width":"120",sortable:"custom"},{default:r(({row:e})=>[n(k,{modelValue:e.sort,"onUpdate:modelValue":h=>e.sort=h,modelModifiers:{trim:!0},class:"w-[70px]",maxlength:"8",onBlur:h=>s(ge)(e.sort,e)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1},8,["label"]),n(y,{prop:"create_time",label:s(t)("createTime"),"min-width":"150",sortable:"custom"},{default:r(({row:e})=>[d("div",null,c(e.create_time),1)]),_:1},8,["label"]),n(y,{label:s(t)("operation"),fixed:"right",align:"right","min-width":"120"},{default:r(({row:e})=>[n(i,{type:"primary",link:"",onClick:h=>fe(e)},{default:r(()=>[m(c(s(t)("edit")),1)]),_:2},1032,["onClick"]),n(i,{type:"primary",link:"",onClick:h=>ye(e)},{default:r(()=>[m(c(s(t)("spreadGoods")),1)]),_:2},1032,["onClick"]),n(i,{type:"primary",link:"",onClick:h=>Pe(e)},{default:r(()=>[m(c(s(t)("memberPrice")),1)]),_:2},1032,["onClick"]),e.status==1?(p(),b(i,{key:0,type:"primary",link:"",onClick:h=>Y(e,0)},{default:r(()=>[m(c(s(t)("statusActionOff")),1)]),_:2},1032,["onClick"])):(p(),b(i,{key:1,type:"primary",link:"",onClick:h=>Y(e,1)},{default:r(()=>[m(c(s(t)("statusActionOn")),1)]),_:2},1032,["onClick"])),n(i,{type:"primary",link:"",onClick:h=>ke(e)},{default:r(()=>[m(c(s(t)("copyGoods")),1)]),_:2},1032,["onClick"]),e.status!=1?(p(),b(i,{key:2,type:"primary",link:"",onClick:h=>xe(e.goods_id)},{default:r(()=>[m(c(s(t)("delete")),1)]),_:2},1032,["onClick"])):w("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[Ne,o.loading]]),d("div",Fa,[n(Se,{"current-page":o.page,"onUpdate:current-page":a[19]||(a[19]=e=>o.page=e),"page-size":o.limit,"onUpdate:page-size":a[20]||(a[20]=e=>o.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:o.total,onSizeChange:a[21]||(a[21]=e=>u()),onCurrentChange:u},null,8,["current-page","page-size","total"])])])]),_:1}),n(sa,{ref_key:"goodsStockEditPopupRef",ref:Z,onLoad:u},null,512),n(na,{ref_key:"goodsPriceEditPopupRef",ref:X,onLoad:u},null,512),n(ra,{ref_key:"goodsSpreadPopupRef",ref:ee},null,512),n(la,{ref_key:"memberPricePopupRef",ref:te,onLoad:u},null,512)])}}});const Et=ha(Ma,[["__scopeId","data-v-8f65ef83"]]);export{Et as default};
