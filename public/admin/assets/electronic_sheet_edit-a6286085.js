import{d as K,r as v,x as Q,f as Y,n as J,l as W,q as a,h as m,c as V,e as s,w as n,u as o,R as U,s as w,a as i,t as d,F as T,T as k,i as y,a0 as j,aQ as X,a7 as Z,K as ee,L as te,ab as le,aC as ae,at as oe,au as se,aS as ne,M as ie,E as de,Y as re}from"./index-5a756a51.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                  *//* empty css                       *//* empty css                 *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  */import"./el-form-item-4ed993c7.js";/* empty css                *//* empty css                   *//* empty css                       */import{c as ue,e as pe,f as me,h as ce}from"./electronic_sheet-cb2ca4d2.js";import{j as _e}from"./delivery-250bcac6.js";const fe={class:"main-container"},ve={class:"panel-title !text-sm"},xe={class:"text-[12px] text-[#999] mt-[3px] leading-[20px]"},he={class:"text-[12px] text-[#999] mt-[3px] leading-[20px]"},ye={class:"panel-title !text-sm"},be={class:"flex items-center mt-[5px] text-[12px] text-[#999] leading-[20px]"},ge={class:"ml-[3px] text-[var(--el-color-primary)]",target:"_blank",href:"https://www.yuque.com/kdnjishuzhichi/rg4owd"},Ve={class:"flex items-center mt-[3px] text-[12px] text-[#999] leading-[20px]"},we={class:"ml-[3px] text-[var(--el-color-primary)]",target:"_blank",href:"https://www.yuque.com/kdnjishuzhichi/dfcrg1/hrfw43"},Se={class:"mt-[5px] text-[12px] text-[#999] leading-[20px]"},Ee={class:"mt-[5px] text-[12px] text-[#999] leading-[20px]"},Te={class:"mt-[5px] text-[12px] text-[#999] leading-[20px]"},ke={class:"mt-[5px] text-[12px] text-[#999] leading-[20px]"},Ce={class:"mt-[5px] text-[12px] text-[#999] leading-[20px]"},Ue={class:"fixed-footer-wrap"},Ne={class:"fixed-footer"},Xe=K({__name:"electronic_sheet_edit",setup(Pe){const S=v(!1),N=Q(),P=Y(),b=v(!1),z=N.meta.title,O={id:N.query.id||0,template_name:"",express_company_id:"",customer_name:"",customer_pwd:"",send_site:"",send_staff:"",month_code:"",pay_type:1,is_notice:0,status:1,exp_type:1,print_style:"",is_default:""},e=J({...O}),L=v(),$=W(()=>({template_name:[{required:!0,message:a("templateNamePlaceholder"),trigger:"blur"}],express_company_id:[{required:!0,message:a("expressCompanyPlaceholder"),trigger:"blur"}]})),x=v([]),f=v([]),h=v([]),R=v([]);(async()=>{ue().then(r=>{R.value=r.data}),await _e({electronic_sheet_switch:1}).then(r=>{x.value=r.data}),e.id&&(S.value=!0,pe(e.id).then(r=>{let l=r.data;l&&Object.keys(e).forEach(u=>{l[u]!=null&&(e[u]=l[u])}),S.value=!1,M(e.express_company_id,!0)}))})();const M=(r,l=!1)=>{if(!r){f.value=[],h.value=[];return}for(let u=0;u<x.value.length;u++)if(x.value[u].company_id==r){f.value=x.value[u].exp_type,f.value.forEach(c=>{c.value&&(c.value=parseInt(c.value))}),h.value=x.value[u].print_style,l||(f.value.length?e.exp_type=f.value[0].value:e.exp_type=1,h.value.length?e.print_style=h.value[0].value:e.print_style="");break}},A=async r=>{if(S.value||!r)return;let l=e.id?me:ce;await r.validate(async u=>{if(u){if(b.value)return;b.value=!0,l(e).then(_=>{b.value=!1,e.id||P.push("/shop/delivery/electronic_sheet")}).catch(_=>{b.value=!1})}})},q=()=>{P.push("/shop/delivery/electronic_sheet")};return(r,l)=>{const u=X,c=Z,_=ee,p=te,B=le,D=ae,E=oe,C=se,F=ne,G=ie,I=de,H=re;return m(),V("div",fe,[s(c,{class:"card !border-none mb-[15px]",shadow:"never"},{default:n(()=>[s(u,{content:o(z),icon:r.ArrowLeft,onBack:q},null,8,["content","icon"])]),_:1}),U((m(),w(G,{class:"page-form",model:e,rules:o($),"label-width":"150px",ref_key:"formRef",ref:L},{default:n(()=>[s(c,{class:"box-card !border-none",shadow:"never"},{default:n(()=>[i("h3",ve,d(o(a)("basicSettings")),1),s(p,{label:o(a)("templateName"),prop:"template_name"},{default:n(()=>[s(_,{modelValue:e.template_name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.template_name=t),modelModifiers:{trim:!0},clearable:"",placeholder:o(a)("templateNamePlaceholder"),class:"input-width",maxlength:"30"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(p,{label:o(a)("expressCompany"),prop:"express_company_id"},{default:n(()=>[s(D,{modelValue:e.express_company_id,"onUpdate:modelValue":l[1]||(l[1]=t=>e.express_company_id=t),placeholder:o(a)("expressCompanyPlaceholder"),clearable:"",onChange:M},{default:n(()=>[(m(!0),V(T,null,k(x.value,t=>(m(),w(B,{key:t.company_id,label:t.company_name,value:t.company_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),U(s(p,{label:o(a)("expType"),prop:"exp_type"},{default:n(()=>[s(C,{modelValue:e.exp_type,"onUpdate:modelValue":l[2]||(l[2]=t=>e.exp_type=t)},{default:n(()=>[(m(!0),V(T,null,k(f.value,(t,g)=>(m(),w(E,{key:g,value:t.value},{default:n(()=>[y(d(t.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),[[j,f.value.length]]),U(s(p,{label:o(a)("printStyle")},{default:n(()=>[i("div",null,[s(D,{modelValue:e.print_style,"onUpdate:modelValue":l[3]||(l[3]=t=>e.print_style=t),placeholder:o(a)("printStylePlaceholder"),clearable:""},{default:n(()=>[(m(!0),V(T,null,k(h.value,(t,g)=>(m(),w(B,{key:g,label:t.template_name,value:t.template_size},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),i("div",xe,d(o(a)("printStyleTips1")),1),i("div",he,d(o(a)("printStyleTips2")),1)])]),_:1},8,["label"]),[[j,h.value.length]])]),_:1}),s(c,{class:"box-card !border-none",shadow:"never"},{default:n(()=>[i("h3",ye,d(o(a)("otherSettings")),1),s(p,{label:o(a)("customerName")},{default:n(()=>[i("div",null,[s(_,{modelValue:e.customer_name,"onUpdate:modelValue":l[4]||(l[4]=t=>e.customer_name=t),modelModifiers:{trim:!0},clearable:"",class:"input-width",maxlength:"50"},null,8,["modelValue"]),i("div",be,[i("span",null,d(o(a)("customerNameTips")),1),i("a",ge,d(o(a)("examine")),1)]),i("div",Ve,[i("span",null,d(o(a)("customerNameTips1")),1),i("a",we,d(o(a)("examine")),1)])])]),_:1},8,["label"]),s(p,{label:o(a)("customerPwd")},{default:n(()=>[i("div",null,[s(_,{modelValue:e.customer_pwd,"onUpdate:modelValue":l[5]||(l[5]=t=>e.customer_pwd=t),modelModifiers:{trim:!0},clearable:"",class:"input-width",maxlength:"50"},null,8,["modelValue"]),i("div",Se,d(o(a)("customerPwdTips")),1)])]),_:1},8,["label"]),s(p,{label:o(a)("sendSite")},{default:n(()=>[i("div",null,[s(_,{modelValue:e.send_site,"onUpdate:modelValue":l[6]||(l[6]=t=>e.send_site=t),modelModifiers:{trim:!0},clearable:"",class:"input-width",maxlength:"50"},null,8,["modelValue"]),i("div",Ee,d(o(a)("sendSiteTips")),1)])]),_:1},8,["label"]),s(p,{label:o(a)("sendStaff")},{default:n(()=>[i("div",null,[s(_,{modelValue:e.send_staff,"onUpdate:modelValue":l[7]||(l[7]=t=>e.send_staff=t),modelModifiers:{trim:!0},clearable:"",class:"input-width",maxlength:"50"},null,8,["modelValue"]),i("div",Te,d(o(a)("sendStaffTips")),1)])]),_:1},8,["label"]),s(p,{label:o(a)("monthCode")},{default:n(()=>[i("div",null,[s(_,{modelValue:e.month_code,"onUpdate:modelValue":l[8]||(l[8]=t=>e.month_code=t),modelModifiers:{trim:!0},clearable:"",class:"input-width",maxlength:"50"},null,8,["modelValue"]),i("div",ke,d(o(a)("monthCodeTips")),1)])]),_:1},8,["label"]),s(p,{label:o(a)("payType")},{default:n(()=>[s(C,{modelValue:e.pay_type,"onUpdate:modelValue":l[9]||(l[9]=t=>e.pay_type=t)},{default:n(()=>[(m(!0),V(T,null,k(R.value,(t,g)=>(m(),w(E,{value:parseInt(g)},{default:n(()=>[y(d(t),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label"]),s(p,{label:o(a)("isNotice")},{default:n(()=>[i("div",null,[s(C,{modelValue:e.is_notice,"onUpdate:modelValue":l[10]||(l[10]=t=>e.is_notice=t)},{default:n(()=>[s(E,{value:1},{default:n(()=>[y(d(o(a)("yes")),1)]),_:1}),s(E,{value:0},{default:n(()=>[y(d(o(a)("no")),1)]),_:1})]),_:1},8,["modelValue"]),i("div",Ce,d(o(a)("isNoticeTips")),1)])]),_:1},8,["label"]),s(p,{label:o(a)("status")},{default:n(()=>[s(F,{modelValue:e.status,"onUpdate:modelValue":l[11]||(l[11]=t=>e.status=t),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1},8,["label"]),s(p,{label:o(a)("isDefault")},{default:n(()=>[s(F,{modelValue:e.is_default,"onUpdate:modelValue":l[12]||(l[12]=t=>e.is_default=t),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model","rules"])),[[H,S.value]]),i("div",Ue,[i("div",Ne,[s(I,{type:"primary",loading:b.value,onClick:l[13]||(l[13]=t=>A(L.value))},{default:n(()=>[y(d(o(a)("save")),1)]),_:1},8,["loading"]),s(I,{onClick:l[14]||(l[14]=t=>q())},{default:n(()=>[y(d(o(a)("cancel")),1)]),_:1})])])])}}});export{Xe as default};
