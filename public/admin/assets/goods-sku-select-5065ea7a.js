import{d as N,r as m,h as _,c as b,e as s,w as a,a as i,i as S,t as f,u as l,q as c,s as G,A as I,a$ as $,ad as j,J as q,ae as z,E as A,X as J}from"./index-99f00cf3.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css                        *//* empty css               */import{_ as w}from"./goods_default-995568ac.js";import{B as L}from"./goods-4a8ebb3e.js";const P={class:"flex items-center cursor-pointer"},U={class:"min-w-[60px] h-[60px] flex items-center justify-center"},X=i("div",{class:"image-slot"},[i("img",{class:"w-[60px] h-[60px]",src:w})],-1),F={key:1,class:"w-[70px] h-[60px]",src:w,fit:"contain"},H={class:"ml-2"},K=["title"],M={class:"dialog-footer"},de=N({__name:"goods-sku-select",props:{id:{type:String,default:""}},emits:["skuSelect"],setup(y,{expose:E,emit:C}){const B=y,r=m(!1),g=m(!1),d=m(),k=m(),V=p=>{r.value=!0,g.value=!0;let n=p.map(t=>t.sku_id);L({goods_id:B.id}).then(t=>{k.value=t.data.map(e=>(e.goods_stock=e.stock+"",e.goods_price=e.price+"",e.limit_num="",e.stock="",e.point="",e.price="",e)),$(()=>{t.data.forEach(e=>{var u;(u=d.value)==null||u.toggleRowSelection(e,!1),n.includes(e.sku_id)&&d.value.toggleRowSelection(e,!0)}),g.value=!1})})},h=m([]),T=p=>{h.value=p},D=()=>{C("skuSelect",h.value),r.value=!1,d.value&&d.value.clearSelection()};return E({show:V}),(p,n)=>{const t=j,e=q,u=z,v=A,R=J;return _(),b("div",null,[s(R,{modelValue:r.value,"onUpdate:modelValue":n[1]||(n[1]=o=>r.value=o),title:l(c)("goodsSkuTitle"),width:"60%","destroy-on-close":!0},{footer:a(()=>[i("span",M,[s(v,{onClick:n[0]||(n[0]=o=>r.value=!1)},{default:a(()=>[S(f(l(c)("cancel")),1)]),_:1}),s(v,{type:"primary",onClick:D},{default:a(()=>[S(f(l(c)("confirm")),1)]),_:1})])]),default:a(()=>[s(u,{class:"!max-w-[100%]",data:k.value,size:"large",ref_key:"tableRef",ref:d,onSelectionChange:T},{default:a(()=>[s(t,{type:"selection",width:"55"}),s(t,{label:l(c)("goodsSelectPopupGoodsInfo"),"min-width":"300"},{default:a(({row:o})=>{var x;return[i("div",P,[i("div",U,[o.sku_image?(_(),G(e,{key:0,class:"w-[60px] h-[60px]",src:l(I)(o.sku_image),fit:"contain"},{error:a(()=>[X]),_:2},1032,["src"])):(_(),b("img",F))]),i("div",H,[i("span",{title:o.sku_name,class:"multi-hidden"},f(o.sku_name||((x=o.goods)==null?void 0:x.goods_name)),9,K)])])]}),_:1},8,["label"]),s(t,{prop:"goods_price",label:l(c)("price"),"min-width":"170"},null,8,["label"]),s(t,{prop:"goods_stock",label:l(c)("goodsStock"),"min-width":"170"},null,8,["label"])]),_:1},8,["data"])]),_:1},8,["modelValue","title"])])}}});export{de as default};
