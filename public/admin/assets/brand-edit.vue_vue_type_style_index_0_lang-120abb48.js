import{d as F,r as p,n as M,l as P,q as t,h as v,s as V,w as s,a as R,e as n,i as w,t as y,u as r,R as I,c1 as K,K as $,L as j,M as q,E as L,X as O,Y as S}from"./index-f7a01263.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                     */import z from"./index-e6c6f5a6.js";/* empty css                 */import{n as A,o as T,p as X}from"./goods-d18d2d10.js";const Y={class:"dialog-footer"},oe=F({__name:"brand-edit",emits:["complete"],setup(Z,{expose:x,emit:B}){const u=p(!1),i=p(!1),f=p(""),_={brand_id:"",brand_name:"",logo:"",desc:"",sort:""},l=M({..._}),g=p(),D=P(()=>({brand_name:[{required:!0,message:t("brandNamePlaceholder"),trigger:"blur"}]})),E=async o=>{if(i.value||!o)return;const e=l.brand_id?A:T;await o.validate(async d=>{d&&(i.value=!0,e(l).then(c=>{i.value=!1,u.value=!1,B("complete")}).catch(c=>{i.value=!1}))})},N=async(o=null)=>{if(Object.assign(l,_),i.value=!0,o){const e=await(await X(o.brand_id)).data;f.value=t("updateBrand"),e&&Object.keys(l).forEach(d=>{e[d]!=null&&(l[d]=e[d])})}else f.value=t("addBrand");i.value=!1},h=o=>{o.target.value=o.target.value.replace(/[^\u4e00-\u9fa5a-zA-Z0-9]/g,""),o.target.value=o.target.value.replace(/[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、]/g,"")};return x({showDialog:u,setFormData:N}),(o,e)=>{const d=$,m=j,c=z,U=q,b=L,k=O,C=S;return v(),V(k,{modelValue:u.value,"onUpdate:modelValue":e[10]||(e[10]=a=>u.value=a),title:f.value,width:"500px",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:s(()=>[R("span",Y,[n(b,{onClick:e[8]||(e[8]=a=>u.value=!1)},{default:s(()=>[w(y(r(t)("cancel")),1)]),_:1}),n(b,{type:"primary",loading:i.value,onClick:e[9]||(e[9]=a=>E(g.value))},{default:s(()=>[w(y(r(t)("confirm")),1)]),_:1},8,["loading"])])]),default:s(()=>[I((v(),V(U,{model:l,"label-width":"120px",ref_key:"formRef",ref:g,rules:r(D),class:"page-form"},{default:s(()=>[n(m,{label:r(t)("brandName"),prop:"brand_name"},{default:s(()=>[n(d,{modelValue:l.brand_name,"onUpdate:modelValue":e[0]||(e[0]=a=>l.brand_name=a),modelModifiers:{trim:!0},clearable:"",placeholder:r(t)("brandNamePlaceholder"),class:"input-width",onKeyup:e[1]||(e[1]=a=>h(a)),maxlength:"20",onBlur:e[2]||(e[2]=a=>l.brand_name=a.target.value)},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(m,{label:r(t)("logo")},{default:s(()=>[n(c,{modelValue:l.logo,"onUpdate:modelValue":e[3]||(e[3]=a=>l.logo=a)},null,8,["modelValue"])]),_:1},8,["label"]),n(m,{label:r(t)("desc")},{default:s(()=>[n(d,{modelValue:l.desc,"onUpdate:modelValue":e[4]||(e[4]=a=>l.desc=a),modelModifiers:{trim:!0},type:"textarea",clearable:"",placeholder:r(t)("descPlaceholder"),class:"input-width",maxlength:"200"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(m,{label:r(t)("sort")},{default:s(()=>[n(d,{modelValue:l.sort,"onUpdate:modelValue":e[5]||(e[5]=a=>l.sort=a),modelModifiers:{trim:!0},maxlength:"6","show-word-limit":"",clearable:"",placeholder:r(t)("sortPlaceholder"),class:"input-width",onKeyup:e[6]||(e[6]=a=>r(K)(a)),onBlur:e[7]||(e[7]=a=>l.sort=a.target.value)},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[C,i.value]])]),_:1},8,["modelValue","title"])}}});export{oe as _};
