import{d as S,r as y,n as q,h as i,c as C,R as M,s as _,w as t,e,i as r,a as d,B as f,t as T,u as B,q as P,aW as D,a7 as R,au as F,av as N,L as Q,ac as W,aD as I,K as L,M as A,E as G,Y as K}from"./index-99f00cf3.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  */import"./el-form-item-4ed993c7.js";/* empty css                       *//* empty css                 *//* empty css                *//* empty css                 */import{g as O,s as Y}from"./config-debe9ae0.js";const $={class:"main-container"},j=d("span",{class:"ml-4"},"是否开启通知",-1),z={class:"w-[400px]"},H=d("span",{class:"ml-4"}," 单位:分钟，默认30分内只通知一次,0不限制",-1),J=d("span",{class:"ml-4"},"是否开启邮箱通知",-1),X=d("span",{class:"ml-4"},"其他邮箱需要支持SMTP,465端口发送",-1),Z=d("span",{class:"ml-4"},"SMTP开通时候邮箱授权码或者密码，非登录密码",-1),ee=d("span",{class:"ml-4"},"这里需要SMTP邮箱保持一致",-1),le=d("span",{class:"ml-4"},"这里需要是接收具体业务通知的邮箱",-1),oe=d("span",{class:"ml-4"},"这里可以是你的公司或品牌名",-1),ae=d("span",{class:"ml-4"}," 单位:分钟，默认30分内只通知一次,0不限制",-1),te={class:"fixed-footer-wrap"},se={class:"fixed-footer"},ve=S({__name:"admin",setup(de){const b=y(!0),k=y(),l=q({is_webhook:"0",webhook_type:"0",qwurl:"",fsurl:"",ddurl:"",min:"30",is_email:"0",email_from:"",email_to:"",email_password:"",email_host:"smtp.qq.com",email_min:"",email_title:"",is_mobile:"",mobile:"",mobile_min:""}),x=async()=>{const p=await O();console.log(p),b.value=!1;for(const o in l)l[o]=p.data[o]};x();const v=async()=>{await Y(l),x()};return(p,o)=>{const V=D,c=R,u=F,w=N,s=Q,m=W,h=I,n=L,g=A,U=G,E=K;return i(),C("div",$,[M((i(),_(g,{model:l,"label-width":"150px",ref_key:"ruleFormRef",ref:k,rules:p.rules,class:"page-form"},{default:t(()=>[e(c,{class:"box-card !border-none",shadow:"never"},{default:t(()=>[e(c,{class:"!border-none",shadow:"never",style:{width:"640px"}},{default:t(()=>[e(V,{type:"info",title:"webhook通知,支持企业微信，飞书，钉钉机器人通知",closable:!1,"show-icon":""})]),_:1}),e(s,{label:""},{default:t(()=>[e(w,{modelValue:l.is_webhook,"onUpdate:modelValue":o[0]||(o[0]=a=>l.is_webhook=a)},{default:t(()=>[e(u,{label:"0"},{default:t(()=>[r("否")]),_:1}),e(u,{label:"1"},{default:t(()=>[r("是")]),_:1})]),_:1},8,["modelValue"]),j]),_:1}),e(s,{class:"font-bold text-xs",label:"通知类型",prop:"checktype"},{default:t(()=>[e(h,{modelValue:l.webhook_type,"onUpdate:modelValue":o[1]||(o[1]=a=>l.webhook_type=a),clearable:"",placeholder:"请选择"},{default:t(()=>[e(m,{key:"0",label:"企业微信",value:"0"}),e(m,{key:"1",label:"飞书",value:"1"}),e(m,{key:"2",label:"钉钉",value:"2"})]),_:1},8,["modelValue"])]),_:1}),d("div",z,[l.webhook_type==0?(i(),_(s,{key:0,class:"font-bold text-xs",label:"Webhook 地址",prop:"action"},{default:t(()=>[e(n,{clearable:"",type:"textarea",modelValue:l.qwurl,"onUpdate:modelValue":o[2]||(o[2]=a=>l.qwurl=a),class:"w-60",placeholder:"请输入webhook地址"},null,8,["modelValue"])]),_:1})):f("",!0),l.webhook_type==1?(i(),_(s,{key:1,class:"font-bold text-xs",label:"Webhook 地址",prop:"msg"},{default:t(()=>[e(n,{type:"textarea",clearable:"",modelValue:l.fsurl,"onUpdate:modelValue":o[3]||(o[3]=a=>l.fsurl=a),style:{width:"300px"},placeholder:"请输入webhook地址"},null,8,["modelValue"])]),_:1})):f("",!0),l.webhook_type==2?(i(),_(s,{key:2,class:"font-bold text-xs",label:"Webhook 地址",prop:"msg"},{default:t(()=>[e(n,{type:"textarea",clearable:"",modelValue:l.ddurl,"onUpdate:modelValue":o[4]||(o[4]=a=>l.ddurl=a),class:"w-60",placeholder:"请输入webhook地址"},null,8,["modelValue"])]),_:1})):f("",!0)]),e(s,{class:"font-bold text-xs",label:"通知频率",prop:"msg"},{default:t(()=>[e(n,{clearable:"",modelValue:l.min,"onUpdate:modelValue":o[5]||(o[5]=a=>l.min=a),style:{width:"200px"},placeholder:"以分钟计算，默认30分钟"},null,8,["modelValue"]),H]),_:1}),e(c,{class:"!border-none",shadow:"never",style:{width:"640px"}},{default:t(()=>[e(V,{type:"info",title:"邮箱通知,支持163邮箱和QQ邮箱",closable:!1,"show-icon":""})]),_:1}),e(s,{label:""},{default:t(()=>[e(w,{modelValue:l.is_email,"onUpdate:modelValue":o[6]||(o[6]=a=>l.is_email=a)},{default:t(()=>[e(u,{label:"0"},{default:t(()=>[r("否")]),_:1}),e(u,{label:"1"},{default:t(()=>[r("是")]),_:1})]),_:1},8,["modelValue"]),J]),_:1}),e(s,{class:"font-bold text-xs",label:"SMTP地址",prop:"action"},{default:t(()=>[e(n,{clearable:"",modelValue:l.email_host,"onUpdate:modelValue":o[7]||(o[7]=a=>l.email_host=a),style:{width:"300px"},placeholder:"请输入SMTP服务器地址"},null,8,["modelValue"]),e(h,{modelValue:l.email_host,"onUpdate:modelValue":o[8]||(o[8]=a=>l.email_host=a),clearable:"",class:"input-item ml-4"},{default:t(()=>[e(m,{label:"QQ邮箱",value:"smtp.qq.com"}),e(m,{label:"163邮箱",value:"smtp.163.com"})]),_:1},8,["modelValue"]),X]),_:1}),e(s,{class:"font-bold text-xs flex",label:"授权码",prop:"action"},{default:t(()=>[e(n,{clearable:"",modelValue:l.email_password,"onUpdate:modelValue":o[9]||(o[9]=a=>l.email_password=a),style:{width:"300px"},placeholder:"请输入SMTP授权码/密码"},null,8,["modelValue"]),Z]),_:1}),e(s,{class:"font-bold text-xs flex",label:"发件邮箱",prop:"action"},{default:t(()=>[e(n,{clearable:"",modelValue:l.email_from,"onUpdate:modelValue":o[10]||(o[10]=a=>l.email_from=a),style:{width:"300px"},placeholder:"请输入发送邮件的邮箱"},null,8,["modelValue"]),ee]),_:1}),e(s,{class:"font-bold text-xs flex",label:"收件邮箱",prop:"action"},{default:t(()=>[e(n,{clearable:"",modelValue:l.email_to,"onUpdate:modelValue":o[11]||(o[11]=a=>l.email_to=a),style:{width:"300px"},placeholder:"请输入接收邮件的邮箱"},null,8,["modelValue"]),le]),_:1}),e(s,{class:"font-bold text-xs flex",label:"邮箱标题",prop:"action"},{default:t(()=>[e(n,{clearable:"",modelValue:l.email_title,"onUpdate:modelValue":o[12]||(o[12]=a=>l.email_title=a),style:{width:"300px"},placeholder:"请输入发送邮件标题"},null,8,["modelValue"]),oe]),_:1}),e(s,{class:"font-bold text-xs",label:"通知频率",prop:"msg"},{default:t(()=>[e(n,{clearable:"",modelValue:l.email_min,"onUpdate:modelValue":o[13]||(o[13]=a=>l.email_min=a),style:{width:"300px"},placeholder:"以分钟计算，默认30分钟"},null,8,["modelValue"]),ae]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[E,b.value]]),d("div",te,[d("div",se,[e(U,{type:"primary",onClick:o[14]||(o[14]=a=>v())},{default:t(()=>[r(T(B(P)("save")),1)]),_:1})])])])}}});export{ve as default};
