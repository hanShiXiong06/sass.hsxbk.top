import{d as H,x as Q,f as W,r as u,n as T,Y as Z,h,c as V,e as n,w as i,a as r,t as m,u as t,q as a,i as f,P as ee,s as S,A as ae,cV as te,bp as B,bs as oe,_ as D,J as ne,K as le,E as ie,L as se,a0 as re,aa as me,I as pe,X as ce,ac as de,T as _e,bM as ue,a1 as fe,U as be}from"./index-17984968.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                          *//* empty css                 *//* empty css                  *//* empty css               *//* empty css                    *//* empty css                 *//* empty css                     *//* empty css                      *//* empty css                  *//* empty css                  *//* empty css                 */import"./el-tooltip-4ed993c7.js";/* empty css                *//* empty css                 *//* empty css                        *//* empty css                        *//* empty css                *//* empty css                *//* empty css                  */import"./el-form-item-4ed993c7.js";import{_ as R}from"./default_headimg-a897263d.js";import{l as xe,s as ge,e as he}from"./fenxiao-75a63893.js";import{_ as ve}from"./fenxiao-of-select-popup.vue_vue_type_script_setup_true_lang-91e983de.js";const ke={class:"main-container"},ye={class:"flex justify-between items-center"},Fe={class:"text-page-title"},Ce=["onClick"],Ee={class:"min-w-[50px] h-[50px] flex items-center justify-center"},Pe=r("div",{class:"image-slot"},[r("img",{class:"w-[50px] h-[50px]",src:R})],-1),Te={key:1,class:"w-[50px] h-[50px]",src:R,fit:"contain"},Ve={class:"ml-2"},Se=["title"],Be={class:"text-primary text-[12px]"},De=["onClick"],Re={class:"mt-[16px] flex justify-end"},ze={class:"dialog-footer"},ra=H({__name:"lists",setup(Ie){const z=Q(),I=W(),N=z.meta.title;let b=u({}),$=u(""),M=u([]),c=u(!1);const s=T({page:1,limit:10,total:0,loading:!1,data:[],searchParam:{search:""}}),d=(o=1)=>{s.loading=!0;const l=oe(s.searchParam);xe({page:s.page,limit:s.limit,...l}).then(g=>{s.data=g.data.data,s.total=g.data.total,s.loading=!1})};d();const k=u(),U=o=>{o&&(o.resetFields(),d())},y=o=>{let l=I.resolve(`/member/detail?id=${o}`);window.open(l.href," blank")};let p=T({});const F=u();let C=u(0);const L=o=>{var l;b.value={},p={},C=o.is_fenxiao,o.is_fenxiao?(b.value.not_in=o.child_ids?[o.member_id,o.parent_fenxiao.member_id,...o.child_ids]:[o.member_id,o.parent_fenxiao.member_id],b.value.is_agent="all",p.id=o.member_id):(b.value.not_in=o.member_id,p.member_id=o.member_id),(l=F.value)==null||l.show()},j=o=>{C?(p.parent=o.member.member_id,p.parent_name=o.member.nickname,D.confirm(a("editSupFenxiaoTip"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{he(p).then(()=>{d()})})):(p.fenxiao_member_id=o.member_id,D.confirm(a("editSupFenxiaoTip"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{ge(p).then(()=>{d()})}))};return(o,l)=>{const g=ne,v=le,x=ie,w=se,E=re,_=me,O=pe,q=Z("EditPen"),A=ce,J=de,K=_e,X=ue,Y=fe,G=be;return h(),V("div",ke,[n(E,{class:"card !border-none",shadow:"never"},{default:i(()=>[r("div",ye,[r("span",Fe,m(t(N)),1)]),n(E,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:i(()=>[n(w,{inline:!0,model:s.searchParam,ref_key:"searchFormRef",ref:k},{default:i(()=>[n(v,{label:t(a)("memberName"),prop:"search"},{default:i(()=>[n(g,{modelValue:s.searchParam.search,"onUpdate:modelValue":l[0]||(l[0]=e=>s.searchParam.search=e),placeholder:t(a)("memberNamePlaceholder"),maxlength:"60"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(v,null,{default:i(()=>[n(x,{type:"primary",onClick:l[1]||(l[1]=e=>d())},{default:i(()=>[f(m(t(a)("search")),1)]),_:1}),n(x,{onClick:l[2]||(l[2]=e=>U(k.value))},{default:i(()=>[f(m(t(a)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),ee((h(),S(J,{data:s.data,size:"large",ref:"goodsListTableRef"},{empty:i(()=>[r("span",null,m(s.loading?"":t(a)("emptyData")),1)]),default:i(()=>[n(_,{type:"selection",width:"55"}),n(_,{prop:"goods_id",label:t(a)("memberInfo"),"min-width":"200"},{default:i(({row:e})=>[r("div",{class:"flex items-center cursor-pointer",onClick:P=>y(e.member_id)},[r("div",Ee,[e.member.headimg?(h(),S(O,{key:0,class:"w-[50px] h-[50px]",src:t(ae)(e.member.headimg),fit:"contain"},{error:i(()=>[Pe]),_:2},1032,["src"])):(h(),V("img",Te))]),r("div",Ve,[r("span",{title:e.member.nickname||e.member.username,class:"multi-hidden"},m(e.member.nickname||e.member.username),9,Se),r("span",Be,m(e.member.mobile||"--"),1)])],8,Ce)]),_:1},8,["label"]),n(_,{label:t(a)("isFenxiao"),"min-width":"120"},{default:i(({row:e})=>[f(m(e.is_fenxiao?t(a)("are"):t(a)("no")),1)]),_:1},8,["label"]),n(_,{label:t(a)("bindingSupFenxiao"),"min-width":"120"},{default:i(({row:e})=>[r("div",{class:"cursor-pointer stock-wrap",onClick:P=>L(e)},[r("span",null,m(e.parent_fenxiao&&e.parent_fenxiao.nickname||e.parent_fenxiao&&e.parent_fenxiao.username||"--"),1),n(A,{class:"ml-[5px]",size:14},{default:i(()=>[n(q)]),_:1})],8,De)]),_:1},8,["label"]),n(_,{prop:"order_num",label:t(a)("consumptionNumber"),"min-width":"100",sortable:"custom"},null,8,["label"]),n(_,{label:t(a)("consumptionMoney"),"min-width":"100",sortable:"custom"},{default:i(({row:e})=>[f(m(t(te)(e.order_money_sum)),1)]),_:1},8,["label"]),n(_,{label:t(a)("operation"),fixed:"right",align:"right","min-width":"120"},{default:i(({row:e})=>[n(x,{type:"primary",link:"",onClick:P=>y(e.member_id)},{default:i(()=>[f(m(t(a)("detail")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[G,s.loading]]),r("div",Re,[n(K,{"current-page":s.page,"onUpdate:current-page":l[3]||(l[3]=e=>s.page=e),"page-size":s.limit,"onUpdate:page-size":l[4]||(l[4]=e=>s.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:s.total,onSizeChange:d,onCurrentChange:d},null,8,["current-page","page-size","total"])])]),_:1}),n(Y,{modelValue:t(c),"onUpdate:modelValue":l[7]||(l[7]=e=>B(c)?c.value=e:c=e),title:t(a)("editSupFenxiaoTitle"),width:"400px","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1},{footer:i(()=>[r("span",ze,[n(x,{onClick:l[6]||(l[6]=e=>B(c)?c.value=!1:c=!1)},{default:i(()=>[f(m(t(a)("cancel")),1)]),_:1}),n(x,{type:"primary",onClick:o.save},{default:i(()=>[f(m(t(a)("confirm")),1)]),_:1},8,["onClick"])])]),default:i(()=>[r("div",null,[n(v,{label:t(a)("supFenxiao"),prop:"sup_fenxiao"},{default:i(()=>[n(X,{props:t($),modelValue:o.fenxiaoTable.searchParam.sup_fenxiao,"onUpdate:modelValue":l[5]||(l[5]=e=>o.fenxiaoTable.searchParam.sup_fenxiao=e),options:t(M),placeholder:t(a)("supFenxiaoPlaceholder"),clearable:"",filterable:""},null,8,["props","modelValue","options","placeholder"])]),_:1},8,["label"])])]),_:1},8,["modelValue","title"]),n(ve,{title:t(a)("editSupFenxiaoTitle"),ref_key:"fenxiaoOfSelectPopupRef",ref:F,params:t(b),onLoad:j},null,8,["title","params"])])}}});export{ra as default};
