import{d as g,f as B,r as u,aS as $,h as D,c as q,e,w as a,i as n,u as b,a as N,R as f,_ as V,al as M,am as R,a0 as S,E as I,aa as j,ac as z}from"./index-17984968.js";/* empty css                 *//* empty css                    *//* empty css               */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                        *//* empty css                  *//* empty css                *//* empty css                             */import{b as A,e as F,a as G,d as H,c as J}from"./tkdevtool-868cee66.js";const K={class:"main-container p-4"},L={class:"mt-4"},se=g({__name:"database",setup(O){const p=B(),d=u();u(!1);const k=t=>{p.push("/tk_devtool_admin_database_edit?name="+t.name)},y=async t=>{const o=await F({name:t.name});E(o.data)},v=async t=>{const o=await G({name:t.name});window.open(o.data,"_blank")},{copy:C,isSupported:x,copied:P}=$(),E=t=>{x.value||f({message:"当前浏览器不支持一键复制",type:"warning"}),C(t),f({message:"复制sql成功",type:"success"})},w=async t=>{try{await V.confirm("确定删除数据表"+t.name+"吗?---请谨慎操作---","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await H({name:t.name}),m()}catch{}},m=async()=>{const t=await J();d.value=t.data};return m(),(t,o)=>{const i=M,h=R,_=S,l=I,c=j,T=z;return D(),q("div",K,[e(_,null,{default:a(()=>[e(h,{title:"数据库管理操作说明",column:"1"},{default:a(()=>[e(i,{label:"备份数据库"},{default:a(()=>[n("执行本操作会备份数据库到niucloud/backup/sql目录下")]),_:1}),e(i,{label:"新建表"},{default:a(()=>[n("执行本操作可以快速新建数据表")]),_:1}),e(i,{label:"复制语句/导出表"},{default:a(()=>[n("这里的操作是直接获取表结构和数据且已经替换好前缀,可以快速复制到插件inatll.sql")]),_:1})]),_:1})]),_:1}),e(_,{class:"box-card !border-none",shadow:"never"},{default:a(()=>[e(l,{type:"primary",plain:"",onClick:b(A)},{default:a(()=>[n("备份数据库")]),_:1},8,["onClick"]),e(l,{type:"primary",onClick:o[0]||(o[0]=s=>b(p).push({path:"/tk_devtool_admin_database_edit"}))},{default:a(()=>[n("新建表")]),_:1}),N("div",L,[e(T,{data:d.value,style:{width:"100%"}},{default:a(()=>[e(c,{prop:"name",label:"数据表",width:"240"}),e(c,{prop:"comment",label:"描述",width:"240"}),e(c,{label:"操作",width:"480"},{default:a(({row:s})=>[e(l,{type:"danger",link:"",onClick:r=>w(s)},{default:a(()=>[n("删除")]),_:2},1032,["onClick"]),e(l,{type:"primary",link:"",onClick:r=>k(s)},{default:a(()=>[n("编辑")]),_:2},1032,["onClick"]),e(l,{type:"primary",link:"",onClick:r=>v(s)},{default:a(()=>[n("导出表")]),_:2},1032,["onClick"]),e(l,{type:"primary",link:"",onClick:r=>y(s)},{default:a(()=>[n("复制语句")]),_:2},1032,["onClick"])]),_:1}),n("/> ")]),_:1},8,["data"])])]),_:1})])}}});export{se as default};
