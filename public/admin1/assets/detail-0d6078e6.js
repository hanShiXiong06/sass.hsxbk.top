import{d as fe,x as ve,f as be,r as F,n as C,Y as ge,P as S,h as c,c as v,e as a,w as e,u as n,cW as xe,s as g,a as t,t as d,q as s,A as Y,B as h,cV as x,v as J,i as Z,F as he,Q as ke,_ as ye,R as ee,cX as we,a0 as Fe,I as Ce,K as Ee,ag as Le,X as Te,ah as ze,L as Pe,aD as De,aE as Se,aa as Ve,ac as $e,T as Be,ak as je,aI as Ie,E as Ne,a1 as Re,U as Ue,bs as Oe}from"./index-17984968.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                      *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                    *//* empty css                *//* empty css               *//* empty css                *//* empty css               */import"./el-form-item-4ed993c7.js";/* empty css                 *//* empty css                        *//* empty css                *//* empty css                   *//* empty css                       */import{_ as z}from"./default_headimg-a897263d.js";import{a as Ae,b as Me,c as qe,e as Xe}from"./fenxiao-75a63893.js";import{g as Ge}from"./level-113119c0.js";import{_ as He}from"./fenxiao-of-select-popup.vue_vue_type_script_setup_true_lang-91e983de.js";const Ke={class:"main-container"},Qe={class:"text text-[14px] leading-[25px]"},We={class:"flex px-[30px] mt-[20px] mb-[20px]"},Ye={class:"input-width"},Je=t("div",{class:"image-slot"},[t("img",{class:"w-[70px] h-[70px]",src:z})],-1),Ze={key:1,class:"w-[70px] h-[70px]",src:z,fit:"contain"},ea={class:"input-width"},aa=["title"],ta=["title"],la={class:"input-width"},na={class:"input-width"},oa={class:"text text-[14px] leading-[25px]"},sa={class:"flex px-[30px] mt-[20px] mb-[20px]"},ia={class:"input-width"},da={class:"input-width"},ra={class:"input-width"},ma={class:"input-width"},ca={class:"input-width"},pa={class:"input-width"},ua={class:"input-width"},_a={class:"input-width"},fa={key:0},va={class:"mt-[16px] flex justify-end"},ba={key:1},ga={class:"flex mb-[10px] text-[14px]"},xa={class:"flex items-center"},ha={class:"min-w-[50px] h-[50px] flex items-center justify-center"},ka=t("div",{class:"image-slot"},[t("img",{class:"w-[50px] h-[50px]",src:z})],-1),ya={key:1,class:"w-[50px] h-[50px]",src:z,fit:"contain"},wa={class:"ml-2"},Fa=["title"],Ca=["title"],Ea={class:"text-[12px]"},La={class:"mt-[16px] flex justify-end"},Ta={class:"dialog-footer"},dt=fe({__name:"detail",setup(za){const V=ve(),ae=be(),te=V.meta.title,r=F({}),E=F(!1),p=C({page:1,limit:10,total:0,loading:!1,data:[]}),m=C({page:1,limit:10,total:0,loading:!1,data:[],searchParam:{type:"direct"}}),$=i=>{E.value=!0,Ae(i).then(o=>{r.value=o.data,E.value=!1}).catch(()=>{E.value=!1})},L=Number(V.query.id);$(L);const P=()=>{p.loading=!0,Me({page:p.page,limit:p.limit,id:L}).then(i=>{p.data=i.data.data,p.total=i.data.total,p.loading=!1}).catch(()=>{p.loading=!1})};P();const T=(i=1)=>{m.loading=!0,m.page=i,qe({page:m.page,limit:m.limit,...m.searchParam,id:L}).then(o=>{m.data=o.data.data,m.total=o.data.total,m.loading=!1}).catch(()=>{m.loading=!1})};T();const k=F("commission"),le=i=>{k.value=i},B=i=>{m.searchParam.type=i,T()},j=C({not_in:r.parent,is_agent:"all"}),I=()=>{const i=Oe(r.value);f.id=i.member_id,f.level_id=i.level_id,f.parent=i.parent,j.not_in=i.child_ids?[i.parent,i.member_id,...i.child_ids]:[i.parent,i.member_id],f.status=i.status},N=F(),ne=i=>{var o;I(),(o=N.value)==null||o.show()},oe=i=>{f.parent=i.member.member_id,f.parent_name=i.member.nickname,ye.confirm(s("editSupFenxiaoTip"),s("warning"),{confirmButtonText:s("confirm"),cancelButtonText:s("cancel"),type:"warning"}).then(()=>{O()})};let R=C([]);const f=C({id:0,level_id:null,parent:null,status:1}),U=(i=!1)=>{Ge({page:1,limit:11}).then(o=>{R=o.data.data,i&&ee({message:s("refreshSuccess"),type:"success"})})};U();const y=F(!1),se=i=>{I(),y.value=!0},ie=()=>{if(y.value=!1,!f.level_id){ee.error(s("fenxiaoLevelPlaceholder"));return}O()},O=()=>{Xe(f).then(()=>{$(L)})},de=()=>{const i=ae.resolve("/shop_fenxiao/management/level");window.open(i.href,"_blank")};return(i,o)=>{const re=we,w=Fe,A=Ce,u=Ee,_=Le,M=ge("EditPen"),q=Te,X=ze,me=Pe,G=De,ce=Se,b=Ve,H=$e,K=Be,pe=je,ue=Ie,Q=Ne,_e=Re,D=Ue;return S((c(),v("div",Ke,[a(w,{class:"card !border-none",shadow:"never"},{default:e(()=>[a(re,{content:n(te),icon:n(xe),onBack:o[0]||(o[0]=l=>i.$router.back())},null,8,["content","icon"])]),_:1}),a(w,{class:"card mt-[15px] !border-none",shadow:"never"},{default:e(()=>[Object.keys(r.value).length?(c(),g(me,{key:0,class:"page-form",model:r.value,"label-width":"100px",ref:"formRef","label-position":"left"},{default:e(()=>[r.value?(c(),g(w,{key:0,class:"card !border-none",shadow:"never"},{default:e(()=>[t("div",Qe,d(n(s)("baseInfo")),1),t("div",We,[a(X,null,{default:e(()=>[a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("logo")},{default:e(()=>[t("div",Ye,[r.value.member.headimg?(c(),g(A,{key:0,class:"w-[70px] h-[70px]",src:n(Y)(r.value.member.headimg),fit:"contain"},{error:e(()=>[Je]),_:1},8,["src"])):(c(),v("img",Ze))])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("nickname")},{default:e(()=>[t("div",ea,[r.value.member.nickname?(c(),v("span",{key:0,title:r.value.member.nickname,class:"multi-hidden"},d(r.value.member.nickname),9,aa)):(c(),v("span",{key:1,title:r.value.member.nickname,class:"multi-hidden"},d(r.value.member.username),9,ta))])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("mobile")},{default:e(()=>[t("div",la,[t("span",null,d(r.value.member.mobile),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("fenxiaoNo")},{default:e(()=>[t("div",na,[t("span",null,d(r.value.fenxiao_no),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("fenxiaoLevel")},{default:e(()=>[t("div",{class:"cursor-pointer price-wrap input-width",onClick:o[1]||(o[1]=l=>se(i.row))},[t("span",null,d(r.value.fenxiaoLevel.level_name||"--"),1),a(q,{class:"ml-[5px]",size:14},{default:e(()=>[a(M)]),_:1})])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("supFenxiao")},{default:e(()=>{var l,W;return[t("div",{class:"cursor-pointer price-wrap input-width",onClick:o[2]||(o[2]=Pa=>ne(i.row))},[t("span",null,d(((l=r.value.parentFenxiao)==null?void 0:l.nickname)||((W=r.value.parentFenxiao)==null?void 0:W.username)||"无"),1),a(q,{class:"ml-[5px]",size:14},{default:e(()=>[a(M)]),_:1})])]}),_:1},8,["label"])]),_:1})]),_:1})])]),_:1})):h("",!0),r.value?(c(),g(w,{key:1,class:"card !border-none",shadow:"never"},{default:e(()=>[t("div",oa,d(n(s)("accountStatistics")),1),t("div",sa,[a(X,null,{default:e(()=>[a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("commission")},{default:e(()=>[t("div",ia,[t("span",null,d(n(x)(r.value.member.commission)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("commissionGet")},{default:e(()=>[t("div",da,[t("span",null,d(n(x)(r.value.member.commission_get)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("taking")},{default:e(()=>[t("div",ra,[t("span",null,d(n(x)(r.value.member.commission_cash_outing)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("distributionCommission")},{default:e(()=>[t("div",ma,[t("span",null,d(n(x)(r.value.fenxiao_commission)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("agentCommission")},{default:e(()=>[t("div",ca,[t("span",null,d(n(x)(r.value.agent_commission)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("reward")},{default:e(()=>[t("div",pa,[t("span",null,d(n(x)(r.value.sale_commission)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("teamDividends")},{default:e(()=>[t("div",ua,[t("span",null,d(n(x)(r.value.team_commission)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("taskRewards")},{default:e(()=>[t("div",_a,[t("span",null,d(n(x)(r.value.task_commission)),1)])]),_:1},8,["label"])]),_:1})]),_:1})])]),_:1})):h("",!0)]),_:1},8,["model"])):h("",!0),Object.keys(r.value).length?(c(),g(w,{key:1,class:"card !border-none",shadow:"never"},{default:e(()=>[a(ce,{modelValue:k.value,"onUpdate:modelValue":o[3]||(o[3]=l=>k.value=l),onTabChange:le},{default:e(()=>[a(G,{label:"佣金账户",name:"commission"}),a(G,{label:"团队信息",name:"team"})]),_:1},8,["modelValue"]),k.value=="commission"?(c(),v("div",fa,[S((c(),g(H,{data:p.data,size:"large"},{empty:e(()=>[t("span",null,d(p.loading?"":n(s)("emptyData")),1)]),default:e(()=>[a(b,{label:n(s)("accountMoney"),"min-width":"120"},{default:e(({row:l})=>[t("div",null,d(l.account_data),1)]),_:1},8,["label"]),a(b,{label:n(s)("source"),"min-width":"120"},{default:e(({row:l})=>[t("div",null,d(l.from_type_name),1)]),_:1},8,["label"]),a(b,{label:n(s)("accountSum"),"min-width":"120"},{default:e(({row:l})=>[t("div",null,d(l.account_sum),1)]),_:1},8,["label"]),a(b,{prop:"create_time",label:n(s)("createTime"),"min-width":"120"},null,8,["label"]),a(b,{prop:"memo",label:n(s)("memo"),"min-width":"120"},null,8,["label"])]),_:1},8,["data"])),[[D,p.loading]]),t("div",va,[a(K,{"current-page":p.page,"onUpdate:current-page":o[4]||(o[4]=l=>p.page=l),"page-size":p.limit,"onUpdate:page-size":o[5]||(o[5]=l=>p.limit=l),layout:"total, sizes, prev, pager, next, jumper",total:p.total,onSizeChange:o[6]||(o[6]=l=>P()),onCurrentChange:P},null,8,["current-page","page-size","total"])])])):h("",!0),k.value=="team"?(c(),v("div",ba,[t("div",ga,[t("span",{class:J(["px-[30px] py-[10px] border-[1px] border-solid border-[#f1f1f1] cursor-pointer",{"bg-[#F2F3F5] text-primary":m.searchParam.type=="direct"}]),onClick:o[7]||(o[7]=l=>B("direct"))},"直推",2),t("span",{class:J(["px-[30px] py-[10px] border-[1px] border-solid border-[#f1f1f1] cursor-pointer",{"bg-[#F2F3F5] text-primary":m.searchParam.type=="indirect"}]),onClick:o[8]||(o[8]=l=>B("indirect"))},"间推",2)]),S((c(),g(H,{data:m.data,size:"large"},{empty:e(()=>[t("span",null,d(m.loading?"":n(s)("emptyData")),1)]),default:e(()=>[a(b,{label:n(s)("accountInfo"),"min-width":"120"},{default:e(({row:l})=>[t("div",xa,[t("div",ha,[l.headimg&&l.headimg?(c(),g(A,{key:0,class:"w-[50px] h-[50px]",src:n(Y)(l.headimg),fit:"contain"},{error:e(()=>[ka]),_:2},1032,["src"])):(c(),v("img",ya))]),t("div",wa,[l.nickname?(c(),v("span",{key:0,title:l.nickname,class:"multi-hidden"},d(l.nickname),9,Fa)):(c(),v("span",{key:1,title:l.nickname,class:"multi-hidden"},d(l.username),9,Ca)),t("span",Ea,d(l.mobile?l.mobile:"--"),1)])])]),_:1},8,["label"]),a(b,{label:n(s)("isFenxiao"),"min-width":"150"},{default:e(({row:l})=>[t("div",null,d(Object.keys(l.fenxiao).length?"是":"否"),1)]),_:1},8,["label"]),a(b,{label:n(s)("type"),"min-width":"150"},{default:e(({row:l})=>[t("div",null,d(l.is_direct?"直推":"间推"),1)]),_:1},8,["label"]),a(b,{label:n(s)("addTime"),"min-width":"150"},{default:e(({row:l})=>[t("div",null,d(l.fenxiao.create_time?l.fenxiao.create_time:"--"),1)]),_:1},8,["label"])]),_:1},8,["data"])),[[D,m.loading]]),t("div",La,[a(K,{"current-page":m.page,"onUpdate:current-page":o[9]||(o[9]=l=>m.page=l),"page-size":m.limit,"onUpdate:page-size":o[10]||(o[10]=l=>m.limit=l),layout:"total, sizes, prev, pager, next, jumper",total:m.total,onSizeChange:o[11]||(o[11]=l=>T()),onCurrentChange:T},null,8,["current-page","page-size","total"])])])):h("",!0)]),_:1})):h("",!0)]),_:1}),a(_e,{modelValue:y.value,"onUpdate:modelValue":o[15]||(o[15]=l=>y.value=l),title:n(s)("editFenxiaoLevelTitle"),width:"470px","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1},{footer:e(()=>[t("span",Ta,[a(Q,{onClick:o[14]||(o[14]=l=>y.value=!1)},{default:e(()=>[Z(d(n(s)("cancel")),1)]),_:1}),a(Q,{type:"primary",onClick:ie},{default:e(()=>[Z(d(n(s)("confirm")),1)]),_:1})])]),default:e(()=>[t("div",null,[a(u,{label:n(s)("fenxiaoLevel")},{default:e(()=>[a(ue,{modelValue:f.level_id,"onUpdate:modelValue":o[12]||(o[12]=l=>f.level_id=l),class:"input-width",clearable:"",placeholder:n(s)("fenxiaoLevelPlaceholder")},{default:e(()=>[(c(!0),v(he,null,ke(n(R),l=>(c(),g(pe,{key:l.value,label:l.level_name,value:l.level_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),t("span",{class:"text-[var(--el-color-primary)] ml-[10px] cursor-pointer",onClick:o[13]||(o[13]=l=>U(!0))},"刷新"),t("span",{class:"text-[var(--el-color-primary)] ml-[10px] cursor-pointer",onClick:de},"添加等级")]),_:1},8,["label"])])]),_:1},8,["modelValue","title"]),a(He,{title:n(s)("editSupFenxiaoTitle"),ref_key:"fenxiaoOfSelectPopupRef",ref:N,params:j,onLoad:oe},null,8,["title","params"])])),[[D,E.value]])}}});export{dt as default};
