import{d as O,x as J,f as K,n as A,r as u,h as y,c as G,e,w as i,a as _,t as m,u as a,q as t,i as p,P as Q,s as P,B as W,J as X,K as Z,bN as ee,E as ae,L as te,a0 as le,aD as oe,aE as ne,aa as ie,ac as re,T as me,U as se}from"./index-17984968.js";/* empty css                   */import{_ as pe}from"./index.vue_vue_type_script_setup_true_lang-2a93ed0d.js";/* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                    *//* empty css                *//* empty css                *//* empty css                  *//* empty css                       */import"./el-form-item-4ed993c7.js";import{n as de}from"./order-fc033573.js";import{_ as ce}from"./invoice-detail.vue_vue_type_script_setup_true_lang-d9762fba.js";import{_ as ue}from"./invoice-dialog.vue_vue_type_script_setup_true_lang-f6295511.js";/* empty css                  *//* empty css                   *//* empty css                        *//* empty css                             */import"./index-0ce1f7fc.js";import"./index.vue_vue_type_style_index_0_lang-c5bcb8a9.js";import"./attachment-a816d3ef.js";import"./index.vue_vue_type_script_setup_true_lang-8693344a.js";/* empty css                 *//* empty css                 *//* empty css               *//* empty css               *//* empty css                    *//* empty css                         */import"./index.vue_vue_type_script_setup_true_lang-5615c67a.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-8e50df98.js";/* empty css                */import"./_plugin-vue_export-helper-c27b6911.js";import"./sortable.esm-be94e56d.js";const _e={class:"main-container"},ve={class:"flex justify-between items-center"},fe={class:"text-page-title"},he={class:"mt-[16px] flex justify-end"},ma=O({__name:"invoice",setup(be){const E=J(),V=K(),T=E.meta.title,n=A({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{is_invoice:"",create_time:"",invoice_time:"",header_name:""}}),D=u(),N=r=>{r&&(r.resetFields(),d())},k=u(""),$=r=>{n.searchParam.is_invoice=r,d()},d=(r=1)=>{n.loading=!0,n.page=r,de({page:n.page,limit:n.limit,...n.searchParam}).then(l=>{n.loading=!1,n.data=l.data.data,n.total=l.data.total}).catch(()=>{n.loading=!1})};d();const f=u(null),I=r=>{f.value.setFormData(r),f.value.showDialog=!0},h=u(null),U=r=>{h.value.setInvoiceData(r),h.value.invoiceDialog=!0},Y=r=>{if(r.trade_type==="shop"){const l=V.resolve({path:"/shop/order/detail",query:{order_id:r.trade_id}});window.open(l.href,"_blank")}},F=u(null),b=u(!1),z=r=>{b.value=r},B=r=>{b.value=!0};return(r,l)=>{const L=X,v=Z,C=ee,c=ae,M=te,x=le,g=oe,H=ne,s=ie,R=re,S=me,j=pe,q=se;return y(),G("div",_e,[e(x,{class:"box-card !border-none",shadow:"never"},{default:i(()=>[_("div",ve,[_("span",fe,m(a(T)),1)]),e(x,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:i(()=>[e(M,{inline:!0,model:n.searchParam,ref_key:"searchFormRef",ref:D},{default:i(()=>[e(v,{label:a(t)("headerName"),prop:"header_name"},{default:i(()=>[e(L,{modelValue:n.searchParam.header_name,"onUpdate:modelValue":l[0]||(l[0]=o=>n.searchParam.header_name=o),modelModifiers:{trim:!0},placeholder:a(t)("headerNamePlaceholder"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(v,{label:a(t)("createTime"),prop:"create_time"},{default:i(()=>[e(C,{modelValue:n.searchParam.create_time,"onUpdate:modelValue":l[1]||(l[1]=o=>n.searchParam.create_time=o),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":a(t)("startDate"),"end-placeholder":a(t)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),e(v,{label:a(t)("invoiceTime"),prop:"invoice_time"},{default:i(()=>[e(C,{modelValue:n.searchParam.invoice_time,"onUpdate:modelValue":l[2]||(l[2]=o=>n.searchParam.invoice_time=o),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":a(t)("startDate"),"end-placeholder":a(t)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),e(v,null,{default:i(()=>[e(c,{type:"primary",onClick:l[3]||(l[3]=o=>d())},{default:i(()=>[p(m(a(t)("search")),1)]),_:1}),e(c,{onClick:l[4]||(l[4]=o=>N(D.value))},{default:i(()=>[p(m(a(t)("reset")),1)]),_:1}),e(c,{type:"primary",onClick:B},{default:i(()=>[p(m(a(t)("export")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(H,{modelValue:k.value,"onUpdate:modelValue":l[5]||(l[5]=o=>k.value=o),class:"demo-tabs",onTabChange:$},{default:i(()=>[e(g,{label:a(t)("all"),name:""},null,8,["label"]),e(g,{label:a(t)("已开票"),name:"1"},null,8,["label"]),e(g,{label:a(t)("未开票"),name:"0"},null,8,["label"])]),_:1},8,["modelValue"]),_("div",null,[Q((y(),P(R,{data:n.data,size:"large"},{empty:i(()=>[_("span",null,m(n.loading?"":a(t)("emptyData")),1)]),default:i(()=>[e(s,{prop:"header_name",label:a(t)("headerName"),"min-width":"100",align:"left"},null,8,["label"]),e(s,{prop:"header_type_name",label:a(t)("headerTypeName"),"min-width":"120"},null,8,["label"]),e(s,{prop:"tax_number",label:a(t)("taxNumber"),"min-width":"180"},null,8,["label"]),e(s,{prop:"name",label:a(t)("name"),"min-width":"120"},null,8,["label"]),e(s,{prop:"money",label:a(t)("money"),"min-width":"120",align:"right"},null,8,["label"]),e(s,{label:a(t)("createTime"),"min-width":"180",align:"center"},{default:i(({row:o})=>[p(m(o.create_time||""),1)]),_:1},8,["label"]),e(s,{label:a(t)("invoiceTime"),"min-width":"180",align:"center"},{default:i(({row:o})=>[p(m(o.invoice_time||""),1)]),_:1},8,["label"]),e(s,{label:a(t)("isInvoice"),"min-width":"120",align:"center"},{default:i(({row:o})=>[p(m(o.is_invoice===1?a(t)("hasInvoice"):a(t)("noInvoice")),1)]),_:1},8,["label"]),e(s,{label:a(t)("operation"),fixed:"right",align:"center",width:"130"},{default:i(({row:o})=>[e(c,{type:"primary",link:"",onClick:w=>I(o)},{default:i(()=>[p(m(a(t)("detail")),1)]),_:2},1032,["onClick"]),o.is_invoice===0?(y(),P(c,{key:0,type:"primary",link:"",onClick:w=>U(o)},{default:i(()=>[p(m(a(t)("invoice")),1)]),_:2},1032,["onClick"])):W("",!0),e(c,{type:"primary",link:"",onClick:w=>Y(o)},{default:i(()=>[p(m(a(t)("viewOrder")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[q,n.loading]]),_("div",he,[e(S,{"current-page":n.page,"onUpdate:current-page":l[6]||(l[6]=o=>n.page=o),"page-size":n.limit,"onUpdate:page-size":l[7]||(l[7]=o=>n.limit=o),layout:"total, sizes, prev, pager, next, jumper",total:n.total,onSizeChange:l[8]||(l[8]=o=>d()),onCurrentChange:d},null,8,["current-page","page-size","total"])]),e(ce,{ref_key:"invoiceDetailDialog",ref:f,onComplete:l[9]||(l[9]=o=>d())},null,512),e(ue,{ref_key:"invoiceListDialog",ref:h,onComplete:l[10]||(l[10]=o=>d())},null,512),e(j,{ref_key:"exportSureDialog",ref:F,show:b.value,type:"shop_invoice",searchParam:n.searchParam,onClose:z},null,8,["show","searchParam"])])]),_:1})])}}});export{ma as default};
