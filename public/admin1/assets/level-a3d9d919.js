import{d as L,f as S,r as E,h as V,c as U,P as N,s as k,w as l,e as t,a as u,t as d,u as a,q as o,i as f,c6 as w,R as T,az as I,aA as K,K as j,aa as z,J as $,ac as q,a0 as A,L as G,E as J,U as M}from"./index-17984968.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                *//* empty css                 *//* empty css                    *//* empty css               */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        */import"./el-form-item-4ed993c7.js";/* empty css                       *//* empty css                 */import{g as O,s as P}from"./team-9b9b64ab.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";const Q={class:"main-container"},W={class:"text text-[14px] leading-[25px]"},X={class:"fixed-footer-wrap"},Y={class:"fixed-footer"},Z=L({__name:"level",setup(ee){S();const v=E(!1);let i=E({is_open:"0",level:[],loading:!1});const b=()=>{v.value=!0,O().then(e=>{i.value.is_open=e.data.is_open.toString(),i.value.level=e.data.level,v.value=!1})};b();const h=(e,n,m)=>{const _=/^([1-9]\d*|0)(\.\d+)?$|^0\.(?!0+\b)\d+(\d*[1-9])?$/;if(!e)return!1;e=Number(e),_.test(e)||(T.error(o("teamTips")),e=0),parseFloat(e)>100&&(T.error(o("teamTipsNumericalRange")),e=100),i.value.level.forEach((p,c)=>{p.level_id==m.level_id&&(p[n]=parseFloat(e).toFixed(2))})};let g=!1;const y=()=>{let e={};if(e.is_open=i.value.is_open,e.level=[],i.value.level.forEach((n,m)=>{let _={};_.level_id=n.level_id,_.team_rate=n.team_rate,_.team_flat_rate=n.team_flat_rate,e.level.push(_)}),g)return!1;g=!0,P(e).then(n=>{b(),g=!1})};return(e,n)=>{const m=I,_=K,p=j,c=z,x=$,R=q,C=A,B=G,D=J,F=M;return V(),U("div",Q,[N((V(),k(C,{class:"card !border-none",shadow:"never"},{default:l(()=>[t(B,{class:"page-form",model:e.formData,"label-width":"180px",rules:e.formRules,ref:"formRef"},{default:l(()=>[u("div",W,d(a(o)("baseTitle")),1),t(C,{class:"card !border-none",shadow:"never"},{default:l(()=>[t(p,{label:a(o)("isEnable")},{default:l(()=>[t(_,{modelValue:a(i).is_open,"onUpdate:modelValue":n[0]||(n[0]=s=>a(i).is_open=s)},{default:l(()=>[t(m,{label:"1"},{default:l(()=>[f(d(a(o)("are")),1)]),_:1}),t(m,{label:"0"},{default:l(()=>[f(d(a(o)("no")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(p,{label:a(o)("teamLevel")},{default:l(()=>[t(R,{data:a(i).level,size:"large",ref:"goodsListTableRef",onSelectionChange:e.handleSelectionChange},{empty:l(()=>[u("span",null,d(a(o)("emptyData")),1)]),default:l(()=>[t(c,{prop:"level_name",label:a(o)("fenxiaoLevel"),"min-width":"200"},{default:l(({row:s})=>[u("div",null,d(s.level_name),1)]),_:1},8,["label"]),t(c,{prop:"team_rate",label:a(o)("bonus"),"min-width":"200"},{default:l(({row:s})=>[t(x,{modelValue:s.team_rate,"onUpdate:modelValue":r=>s.team_rate=r,maxlength:"6","show-word-limit":"",onChange:r=>h(r,"team_rate",s),clearable:"",class:"!w-[180px]",onKeyup:n[1]||(n[1]=r=>a(w)(r)),placeholder:a(o)("setBonus")},{append:l(()=>[f("%")]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","placeholder"])]),_:1},8,["label"]),t(c,{prop:"team_flat_rate",label:a(o)("bonus_flat"),"min-width":"300"},{default:l(({row:s})=>[t(x,{modelValue:s.team_flat_rate,"onUpdate:modelValue":r=>s.team_flat_rate=r,maxlength:"6","show-word-limit":"",onChange:r=>h(r,"team_flat_rate",s),clearable:"",class:"!w-[180px]",onKeyup:n[2]||(n[2]=r=>a(w)(r)),placeholder:a(o)("setBonus")},{append:l(()=>[f("%")]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","placeholder"])]),_:1},8,["label"])]),_:1},8,["data","onSelectionChange"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model","rules"])]),_:1})),[[F,v.value]]),u("div",X,[u("div",Y,[t(D,{type:"primary",onClick:y},{default:l(()=>[f(d(a(o)("save")),1)]),_:1})])])])}}});const he=H(Z,[["__scopeId","data-v-3f89e201"]]);export{he as default};
