import{d as U,x as Y,n as j,r as L,f as R,h as _,c as I,e as n,w as i,a as c,u as a,t as r,q as e,i as p,P as M,s as b,B as T,_ as q,E as H,J,K,bN as W,L as X,a0 as A,aa as G,ac as O,T as Q,U as Z}from"./index-17984968.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                *//* empty css                       *//* empty css                  */import"./el-form-item-4ed993c7.js";import{W as ee,X as te,Y as ae}from"./tourism-ed22e76b.js";const oe={class:"main-container"},ne={class:"flex justify-between items-center"},le={class:"detail-head"},ie=c("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1),se={class:"ml-[1px]"},re=c("span",{class:"adorn"},"|",-1),ce={class:"right"},de={class:"mt-[10px]"},me={class:"mt-[16px] flex justify-end"},$e=U({__name:"ticket",setup(pe){const v=Y(),E=v.meta.title,g=parseInt(v.query.id),t=j({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{goods_name:"",create_time:""}}),y=L(),d=(s=1)=>{t.loading=!0,t.page=s,ee({scenic_id:g,page:t.page,limit:t.limit,...t.searchParam}).then(o=>{t.loading=!1,t.data=o.data.data,t.total=o.data.total}).catch(()=>{t.loading=!1})};d();const f=R(),P=()=>{f.push("/tourism/product/scenic/edit_ticket?scenic_id="+g)},w=s=>{f.push("/tourism/product/scenic/edit_ticket?scenic_id="+g+"&id="+s.goods_id)},V=s=>{q.confirm(e("tourismScenicDeleteTips"),e("warning"),{confirmButtonText:e("confirm"),cancelButtonText:e("cancel"),type:"warning"}).then(()=>{te(s).then(()=>{d()}).catch(()=>{})})},B=s=>{s&&(s.resetFields(),d())},x=(s,o)=>{ae({status:s,goods_id:o}).then(()=>{d()})};return(s,o)=>{const m=H,D=J,h=K,N=W,$=X,C=A,u=G,z=O,S=Q,F=Z;return _(),I("div",oe,[n(C,{class:"box-card !border-none",shadow:"never"},{default:i(()=>[c("div",ne,[c("div",le,[c("div",{class:"left",onClick:o[0]||(o[0]=l=>a(f).push({path:"/tourism/product/scenic/scenic"}))},[ie,c("span",se,r(a(e)("returnToPreviousPage")),1),re,c("span",ce,r(a(E)),1)])]),n(m,{type:"primary",class:"w-[100px]",onClick:P},{default:i(()=>[p(r(a(e)("addTicket")),1)]),_:1})]),n(C,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:i(()=>[n($,{inline:!0,model:t.searchParam,ref_key:"searchFormRef",ref:y},{default:i(()=>[n(h,{label:a(e)("ticketName"),prop:"goods_name"},{default:i(()=>[n(D,{modelValue:t.searchParam.goods_name,"onUpdate:modelValue":o[1]||(o[1]=l=>t.searchParam.goods_name=l),placeholder:a(e)("scenicNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(h,{label:a(e)("createTime"),prop:"create_time"},{default:i(()=>[n(N,{modelValue:t.searchParam.create_time,"onUpdate:modelValue":o[2]||(o[2]=l=>t.searchParam.create_time=l),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":a(e)("startDate"),"end-placeholder":a(e)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),n(h,null,{default:i(()=>[n(m,{type:"primary",onClick:o[3]||(o[3]=l=>d())},{default:i(()=>[p(r(a(e)("search")),1)]),_:1}),n(m,{onClick:o[4]||(o[4]=l=>B(y.value))},{default:i(()=>[p(r(a(e)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),c("div",de,[M((_(),b(z,{data:t.data,size:"large"},{empty:i(()=>[c("span",null,r(t.loading?"":a(e)("emptyData")),1)]),default:i(()=>[n(u,{prop:"goods_name",label:a(e)("ticketName"),"min-width":"120"},null,8,["label"]),n(u,{prop:"price",label:a(e)("ticketPrice"),"min-width":"120"},null,8,["label"]),n(u,{prop:"stock",label:a(e)("ticketStock"),"min-width":"120"},null,8,["label"]),n(u,{prop:"status_name",label:a(e)("status"),"min-width":"120"},null,8,["label"]),n(u,{prop:"create_time",label:a(e)("createTime"),"min-width":"170"},null,8,["label"]),n(u,{label:a(e)("operation"),fixed:"right","min-width":"150",align:"right"},{default:i(({row:l})=>[l.status==1?(_(),b(m,{key:0,type:"primary",link:"",onClick:k=>x(0,l.goods_id)},{default:i(()=>[p(r(a(e)("down")),1)]),_:2},1032,["onClick"])):T("",!0),l.status==0?(_(),b(m,{key:1,type:"primary",link:"",onClick:k=>x(1,l.goods_id)},{default:i(()=>[p(r(a(e)("up")),1)]),_:2},1032,["onClick"])):T("",!0),n(m,{type:"primary",link:"",onClick:k=>w(l)},{default:i(()=>[p(r(a(e)("edit")),1)]),_:2},1032,["onClick"]),n(m,{type:"primary",link:"",onClick:k=>V(l.goods_id)},{default:i(()=>[p(r(a(e)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[F,t.loading]]),c("div",me,[n(S,{"current-page":t.page,"onUpdate:current-page":o[5]||(o[5]=l=>t.page=l),"page-size":t.limit,"onUpdate:page-size":o[6]||(o[6]=l=>t.limit=l),layout:"total, sizes, prev, pager, next, jumper",total:t.total,onSizeChange:o[7]||(o[7]=l=>d()),onCurrentChange:d},null,8,["current-page","page-size","total"])])])]),_:1})])}}});export{$e as default};
