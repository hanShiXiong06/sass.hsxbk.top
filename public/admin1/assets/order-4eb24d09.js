import{d as oe,x as re,f as ne,n as L,r as V,h as p,c as h,e as a,w as n,a as s,t as d,u as t,q as o,i as b,F as D,Q as z,s as y,P as N,B as P,A as B,J as se,K as ie,bN as de,E as me,L as ce,a0 as pe,aD as _e,aE as ue,aa as he,ac as fe,I as be,aq as ge,a4 as xe,T as ve,a1 as ye,U as ke,p as we,g as Ve}from"./index-17984968.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css                        *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                    *//* empty css                *//* empty css                *//* empty css                  *//* empty css                       */import"./el-form-item-4ed993c7.js";import{_ as Pe}from"./goods_default-995568ac.js";import{_ as Ce}from"./default_headimg-a897263d.js";import{a as Se,b as Ee,c as Te}from"./order-9cf50b74.js";import{g as De}from"./technician-4cd99a3c.js";import{_ as ze}from"./_plugin-vue_export-helper-c27b6911.js";const Ne=k=>(we("data-v-7d44d2c4"),k=k(),Ve(),k),Ue={class:"main-container"},Ie={class:"flex justify-between items-center"},Me={class:"text-page-title"},Fe={class:"mt-[10px]"},$e={class:"table-body min-h-[150px]"},je={key:0},Oe={class:"flex items-center justify-between bg-[#f7f8fa] mt-[10px] border-[#e4e7ed] border-solid border-b-[1px] px-3 h-[35px] text-[12px] text-[#666]"},Ye={class:"ml-5"},Le={key:0,class:"ml-5"},Be={class:"flex"},Re={class:"w-[80px] h-[80px] mr-[10px]"},He=Ne(()=>s("div",{class:"image-slot"},[s("img",{class:"w-[80px] h-[80px]",src:Pe})],-1)),qe={class:"flex-1 flex flex-col justify-between"},Ae=["title"],Ge={class:"flex items-center justify-between"},Je=["onClick"],Ke=["src"],Qe={key:1,class:"w-[50px] h-[50px] mr-[10px]",src:Ce,alt:""},We={class:"flex flex flex-col"},Xe=["onClick"],Ze={class:"mt-[16px] flex justify-end"},ea={class:"mt-[16px] flex justify-end"},aa=oe({__name:"order",setup(k){const R=re(),U=ne(),H=R.meta.title,r=L({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{order_no:"",order_name:"",member_search_text:"",technician_search_text:"",order_status:"",create_time:[],pay_time:[]}}),I=V(),g=(i=1)=>{r.loading=!0,r.page=i,Se({page:r.page,limit:r.limit,...r.searchParam}).then(l=>{r.loading=!1,r.total=l.data.total,r.data=l.data.data.map(f=>(f.item.forEach(u=>{u.rowNum=f.item.length}),f))}).catch(()=>{r.loading=!1})};g();const M=V([]);(()=>{Ee().then(i=>{M.value=i.data}).catch(()=>{})})();const q=i=>{r.searchParam.order_status=i,g()},A=i=>{U.push(`/o2o/order/detail?order_id=${i.order_id}`)},c=L({page:1,limit:10,total:0,id:0,loading:!1,data:[]}),C=(i=1)=>{c.loading=!0,c.page=i,De({page:c.page,limit:c.limit,id:c.id}).then(l=>{c.loading=!1,c.total=l.data.total,c.data=l.data.data})},S=V({order_id:"",technician_id:""}),w=V(!1),G=i=>{c.id=i.item[0].goods_id,C(),w.value=!0,S.value.order_id=i.order_id},J=i=>{S.value.technician_id=i.id,Te(S.value).then(l=>{w.value=!1,g()})},K=({row:i,column:l,rowIndex:f,columnIndex:u})=>f===0?u>0?[i.rowNum,1]:[1,1]:u>0?[0,0]:[1,1],Q=i=>{i&&(i.resetFields(),g())},W=i=>{U.push("/o2o/order/refund/detail?refund_no="+i.refund_no)};return(i,l)=>{const f=se,u=ie,F=de,x=me,X=ce,$=pe,j=_e,Z=ue,m=he,E=fe,ee=be,ae=ge,te=xe,O=ve,le=ye,T=ke;return p(),h("div",Ue,[a($,{class:"box-card !border-none",shadow:"never"},{default:n(()=>[s("div",Ie,[s("span",Me,d(t(H)),1)]),a($,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:n(()=>[a(X,{inline:!0,model:r.searchParam,ref_key:"searchFormRef",ref:I},{default:n(()=>[a(u,{label:t(o)("orderNo"),prop:"order_no"},{default:n(()=>[a(f,{modelValue:r.searchParam.order_no,"onUpdate:modelValue":l[0]||(l[0]=e=>r.searchParam.order_no=e),modelModifiers:{trim:!0},placeholder:t(o)("orderNoPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:t(o)("orderName"),prop:"order_name"},{default:n(()=>[a(f,{modelValue:r.searchParam.order_name,"onUpdate:modelValue":l[1]||(l[1]=e=>r.searchParam.order_name=e),modelModifiers:{trim:!0},placeholder:t(o)("orderNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:t(o)("technicianSearchText"),prop:"technician_search_text"},{default:n(()=>[a(f,{modelValue:r.searchParam.technician_search_text,"onUpdate:modelValue":l[2]||(l[2]=e=>r.searchParam.technician_search_text=e),modelModifiers:{trim:!0},placeholder:t(o)("technicianSearchTextPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:t(o)("memberSearchText"),prop:"member_search_text"},{default:n(()=>[a(f,{modelValue:r.searchParam.member_search_text,"onUpdate:modelValue":l[3]||(l[3]=e=>r.searchParam.member_search_text=e),modelModifiers:{trim:!0},placeholder:t(o)("memberSearchTextPlaceholder"),class:"!w-[210px]"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(u,{label:t(o)("createTime"),prop:"create_time"},{default:n(()=>[a(F,{modelValue:r.searchParam.create_time,"onUpdate:modelValue":l[4]||(l[4]=e=>r.searchParam.create_time=e),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":t(o)("startDate"),"end-placeholder":t(o)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),a(u,{label:t(o)("payTime"),prop:"pay_time"},{default:n(()=>[a(F,{modelValue:r.searchParam.pay_time,"onUpdate:modelValue":l[5]||(l[5]=e=>r.searchParam.pay_time=e),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":t(o)("startDate"),"end-placeholder":t(o)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),a(u,null,{default:n(()=>[a(x,{type:"primary",onClick:l[6]||(l[6]=e=>g())},{default:n(()=>[b(d(t(o)("search")),1)]),_:1}),a(x,{onClick:l[7]||(l[7]=e=>Q(I.value))},{default:n(()=>[b(d(t(o)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(Z,{modelValue:r.searchParam.order_status,"onUpdate:modelValue":l[8]||(l[8]=e=>r.searchParam.order_status=e),class:"demo-tabs",onTabChange:q},{default:n(()=>[a(j,{label:t(o)("all"),name:""},null,8,["label"]),(p(!0),h(D,null,z(M.value,(e,v)=>(p(),y(j,{label:e.name,name:v,key:v},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),s("div",Fe,[a(E,{size:"large",class:"table-top"},{default:n(()=>[a(m,{label:t(o)("goodsInfo"),"min-width":"300"},null,8,["label"]),a(m,{label:t(o)("technician"),"min-width":"200"},null,8,["label"]),a(m,{label:t(o)("orderSource"),"min-width":"150"},null,8,["label"]),a(m,{label:t(o)("memberInfo"),"min-width":"300"},null,8,["label"]),a(m,{label:t(o)("orderMoney"),"min-width":"130"},null,8,["label"]),a(m,{label:t(o)("orderStatus"),"min-width":"100"},null,8,["label"]),a(m,{label:t(o)("operation"),fixed:"right",align:"right","min-width":"120"},null,8,["label"])]),_:1}),N((p(),h("div",$e,[r.loading?P("",!0):(p(),h("div",je,[r.data.length?(p(!0),h(D,{key:0},z(r.data,(e,v)=>(p(),h("div",{key:v},[s("div",Oe,[s("div",null,[s("span",null,d(t(o)("orderNo"))+"："+d(e.order_no),1),s("span",Ye,d(t(o)("createTime"))+"："+d(e.create_time),1),e.pay_time?(p(),h("span",Le,d(t(o)("payType"))+"："+d(e.pay_type_name),1)):P("",!0)]),s("div",null,[a(x,{type:"primary",link:"",onClick:_=>A(e)},{default:n(()=>[b(d(t(o)("info")),1)]),_:2},1032,["onClick"])])]),N((p(),y(E,{data:e.item,size:"large","show-header":!1,"span-method":K},{default:n(()=>[a(m,{"show-overflow-tooltip":!0,label:t(o)("goodsInfo"),align:"left","min-width":"300"},{default:n(({row:_})=>[s("div",Be,[s("div",Re,[a(ee,{class:"w-[80px] h-[80px]",src:t(B)(_.item_image?_.item_image:""),fit:"cover"},{error:n(()=>[He]),_:2},1032,["src"])]),s("div",qe,[s("a",{href:"javascript:;",class:"multi-hidden",title:_.item_name},d(_.item_name),9,Ae),s("div",null,[a(ae,null,{default:n(()=>[b(d(_.item_type_name),1)]),_:2},1024)]),s("div",Ge,[s("span",null,"￥"+d(_.price),1),s("span",null,"×"+d(_.num),1)])])])]),_:1},8,["label"]),a(m,{label:t(o)("technician"),"min-width":"200","class-name":" border-solid border-[#ebeef5] border-l-[1px] "},{default:n(()=>[b(d(e.technician_info?e.technician_info.name:t(o)("defaultAllocation")),1)]),_:2},1032,["label"]),a(m,{label:t(o)("orderSource"),"min-width":"150"},{default:n(()=>[b(d(e.order_from_name),1)]),_:2},1032,["label"]),a(m,{"show-overflow-tooltip":!0,label:t(o)("memberInfo"),align:"left","min-width":"300"},{default:n(()=>[e.member?(p(),h("div",{key:0,class:"flex items-center cursor-pointer",onClick:_=>i.toMember(e.member.member_id)},[e.member.headimg?(p(),h("img",{key:0,class:"w-[50px] h-[50px] mr-[10px]",src:t(B)(e.member.headimg),alt:""},null,8,Ke)):(p(),h("img",Qe)),s("div",We,[s("span",null,d(e.member.nickname||""),1),s("span",null,d(e.member.mobile||""),1)])],8,Je)):P("",!0)]),_:2},1032,["label"]),a(m,{label:t(o)("orderMoney"),"min-width":"130"},{default:n(()=>[b(" ￥"+d(e.total_money),1)]),_:2},1032,["label"]),a(m,{label:t(o)("orderStatus"),"min-width":"100"},{default:n(({row:_})=>[b(d(e.order_status_info.name)+" ",1),_.refund_status_name&&_.refund_status?(p(),h("div",{key:0,class:"text-[var(--el-color-primary)] cursor-pointer",onClick:Y=>W(_)},d(_.refund_status_name.name),9,Xe)):P("",!0)]),_:2},1032,["label"]),a(m,{"min-width":"120",align:"right"},{default:n(()=>[(p(!0),h(D,null,z(e.order_status_info.action,(_,Y)=>(p(),y(x,{type:"primary",link:"",key:Y,onClick:la=>G(e)},{default:n(()=>[b(d(_.name),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1032,["data"])),[[T,r.loading]])]))),128)):(p(),y(te,{key:1,"image-size":1,description:t(o)("emptyData")},null,8,["description"]))]))])),[[T,r.loading]]),s("div",Ze,[a(O,{"current-page":r.page,"onUpdate:current-page":l[9]||(l[9]=e=>r.page=e),"page-size":r.limit,"onUpdate:page-size":l[10]||(l[10]=e=>r.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:r.total,onSizeChange:l[11]||(l[11]=e=>g()),onCurrentChange:g},null,8,["current-page","page-size","total"])])])]),_:1}),a(le,{modelValue:w.value,"onUpdate:modelValue":l[14]||(l[14]=e=>w.value=e),title:"请选择技师",width:"600px"},{default:n(()=>[N((p(),y(E,{data:c.data,class:"technician-table"},{empty:n(()=>[s("span",null,d(c.loading?"":t(o)("emptyData")),1)]),default:n(()=>[a(m,{prop:"name",label:"姓名",width:"180"}),a(m,{prop:"position_name",label:"职位"}),a(m,{prop:"mobile",label:"手机号",width:"180"}),a(m,{label:t(o)("operation"),fixed:"right","min-width":"50",align:"right"},{default:n(({row:e})=>[a(x,{type:"primary",link:"",onClick:v=>J(e)},{default:n(()=>[b("确定")]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[T,c.loading]]),s("div",ea,[a(O,{"current-page":c.page,"onUpdate:current-page":l[12]||(l[12]=e=>c.page=e),"page-size":c.limit,"onUpdate:page-size":l[13]||(l[13]=e=>c.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:c.total,onSizeChange:C,onCurrentChange:C},null,8,["current-page","page-size","total"])])]),_:1},8,["modelValue"])])}}});const Ua=ze(aa,[["__scopeId","data-v-7d44d2c4"]]);export{Ua as default};
