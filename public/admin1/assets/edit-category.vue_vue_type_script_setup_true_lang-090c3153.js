import{d as I,r as _,n as R,l as U,q as t,h,s as V,w as l,a as P,e as s,i as p,t as c,u as r,P as S,J as j,K as q,aK as K,az as L,aA as O,L as T,E as $,a1 as k,U as z}from"./index-17984968.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                       *//* empty css                 *//* empty css                        *//* empty css                 */import"./el-form-item-4ed993c7.js";import{e as G,b as J,c as M}from"./article-c8cc5b69.js";const H={class:"dialog-footer"},de=I({__name:"edit-category",emits:["complete"],setup(Q,{expose:E,emit:C}){let f="";const m=_(!1),i=_(!0),g={category_id:"",name:"",sort:"",is_show:1},o=R({...g}),v=_(),D=U(()=>({name:[{required:!0,message:t("namePlaceholder"),trigger:"blur"},{validator:(d,e,a)=>{e.length>20&&a(new Error(t("nameMax"))),a()},trigger:"blur"}],sort:[{validator:(d,e,a)=>{(e===""||isNaN(e))&&a(new Error(t("sortNumber"))),parseInt(e)>1e4&&a(new Error(t("sortBetween"))),a()},trigger:"blur"}]})),x=async d=>{if(i.value||!d)return;const e=o.category_id?G:J;await d.validate(async a=>{a&&(i.value=!0,e(o).then(w=>{i.value=!1,m.value=!1,C("complete")}).catch(()=>{i.value=!1}))})};return E({showDialog:m,setFormData:async(d=null)=>{if(i.value=!0,Object.assign(o,g),f=t("addArticleCategory"),d){f=t("updateArticleCategory");const e=await(await M(d.category_id)).data;Object.keys(o).forEach(a=>{e[a]!=null&&(o[a]=e[a])})}i.value=!1}}),(d,e)=>{const a=j,u=q,w=K,b=L,N=O,A=T,y=$,B=k,F=z;return h(),V(B,{modelValue:m.value,"onUpdate:modelValue":e[5]||(e[5]=n=>m.value=n),title:r(f),width:"500px","destroy-on-close":!0},{footer:l(()=>[P("span",H,[s(y,{onClick:e[3]||(e[3]=n=>m.value=!1)},{default:l(()=>[p(c(r(t)("cancel")),1)]),_:1}),s(y,{type:"primary",loading:i.value,onClick:e[4]||(e[4]=n=>x(v.value))},{default:l(()=>[p(c(r(t)("confirm")),1)]),_:1},8,["loading"])])]),default:l(()=>[S((h(),V(A,{model:o,"label-width":"90px",ref_key:"formRef",ref:v,rules:r(D),class:"page-form"},{default:l(()=>[s(u,{label:r(t)("name"),prop:"name"},{default:l(()=>[s(a,{modelValue:o.name,"onUpdate:modelValue":e[0]||(e[0]=n=>o.name=n),clearable:"",placeholder:r(t)("namePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(u,{label:r(t)("sort"),prop:"sort"},{default:l(()=>[s(w,{modelValue:o.sort,"onUpdate:modelValue":e[1]||(e[1]=n=>o.sort=n),min:0},null,8,["modelValue"])]),_:1},8,["label"]),s(u,{label:r(t)("isShow")},{default:l(()=>[s(N,{modelValue:o.is_show,"onUpdate:modelValue":e[2]||(e[2]=n=>o.is_show=n),placeholder:r(t)("isShowPlaceholder")},{default:l(()=>[s(b,{label:1},{default:l(()=>[p(c(r(t)("show")),1)]),_:1}),s(b,{label:0},{default:l(()=>[p(c(r(t)("hidden")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[F,i.value]])]),_:1},8,["modelValue","title"])}}});export{de as _};
