import{d as M,l as j,n as g,a5 as P,r as Q,aQ as R,R as Z,h as l,c as r,a as o,aX as v,u as n,e as i,A as w,s as E,w as $,t as B,q as N,F as y,Q as q,B as D,au as T,I as A,bi as X}from"./index-17984968.js";/* empty css                        */import{_ as G}from"./index.vue_vue_type_style_index_0_lang-c5bcb8a9.js";import{_ as H}from"./index.vue_vue_type_script_setup_true_lang-8e50df98.js";/* empty css                 */import{S as J}from"./sortable.esm-be94e56d.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                  *//* empty css                   *//* empty css                  */import"./attachment-a816d3ef.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-8693344a.js";/* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                      *//* empty css                    *//* empty css                 */import"./el-tooltip-4ed993c7.js";/* empty css               *//* empty css               *//* empty css                    *//* empty css                         */import"./index.vue_vue_type_script_setup_true_lang-5615c67a.js";/* empty css                   *//* empty css                */const O={class:"flex flex-wrap"},U={key:0,class:"w-full h-full relative"},W={class:"w-full h-full flex items-center justify-center"},Y={class:"absolute z-[1] flex items-center justify-center w-full h-full inset-0 bg-black bg-opacity-60 operation"},ee={class:"w-full h-full flex items-center justify-center flex-col content-wrap"},te={class:"leading-none text-xs mt-[10px] text-secondary"},oe={class:"w-full h-full relative"},le={class:"w-full h-full flex items-center justify-center"},ie={class:"absolute z-[1] flex items-center justify-center w-full h-full inset-0 bg-black bg-opacity-60 operation"},ae={class:"w-full h-full flex items-center justify-center flex-col content-wrap"},ne={class:"leading-none text-xs mt-[10px] text-secondary"},se=M({__name:"index",props:{modelValue:{type:String,default:""},width:{type:String,default:"100px"},height:{type:String,default:"100px"},imageText:{type:String},limit:{type:Number,default:1}},emits:["update:modelValue","change"],setup(s,{emit:f}){const m=s,d=j({get(){return m.modelValue},set(e){f("update:modelValue",e)}}),t=g({data:[]});let b=g([]);const p=()=>{d.value=T(t.data).toString(),b=T(t.data).map(e=>w(e))};P(()=>d.value,()=>{t.data=[...d.value.split(",").filter(e=>e)],p()},{immediate:!0});const _=j(()=>({width:m.width,height:m.height})),k=e=>{m.limit==1?(t.data.splice(0,1),e&&t.data.push(e.url)):e.forEach(a=>{t.data.length<m.limit&&t.data.push(a.url)}),p(),f("change",d.value)},C=(e=0)=>{t.data.splice(e,1),p()},u=g({show:!1,index:0}),I=(e=0)=>{u.show=!0,u.index=e},z=Q(null);return R(()=>{J.create(z.value,{animation:150,onEnd:e=>{const a=t.data.splice(e.oldIndex,1)[0];t.data.splice(e.newIndex,0,a),f("change",d.value),Z.success("移动成功"),p()}})}),(e,a)=>{const S=A,c=H,V=G,F=X;return l(),r(y,null,[o("div",O,[s.limit==1?(l(),r("div",{key:0,class:"rounded cursor-pointer overflow-hidden relative border border-solid border-color image-wrap mr-[10px]",style:v(n(_))},[t.data.length?(l(),r("div",U,[o("div",W,[i(S,{src:n(w)(t.data[0]),fit:"contain"},null,8,["src"])]),o("div",Y,[i(c,{name:"element-ZoomIn",color:"#fff",size:"18px",class:"mr-[10px]",onClick:a[0]||(a[0]=x=>I())}),i(c,{name:"element-Delete",color:"#fff",size:"18px",onClick:C})])])):(l(),E(V,{key:1,limit:s.limit,onConfirm:k},{default:$(()=>[o("div",ee,[i(c,{name:"element-Plus",size:"20px",color:"var(--el-text-color-secondary)"}),o("div",te,B(s.imageText||n(N)("upload.root")),1)])]),_:1},8,["limit"]))],4)):(l(),r(y,{key:1},[o("div",{ref_key:"imageContainer",ref:z,class:"image-container"},[(l(!0),r(y,null,q(t.data,(x,h)=>(l(),r("div",{class:"rounded cursor-pointer overflow-hidden relative border border-solid border-color image-wrap mr-[10px]",style:v(n(_)),key:h},[o("div",oe,[o("div",le,[i(S,{src:n(w)(x),fit:"contain"},null,8,["src"])]),o("div",ie,[i(c,{name:"element-ZoomIn",color:"#fff",size:"18px",class:"mr-[10px]",onClick:L=>I(h)},null,8,["onClick"]),i(c,{name:"element-Delete",color:"#fff",size:"18px",onClick:L=>C(h)},null,8,["onClick"])])])],4))),128))],512),t.data.length<s.limit?(l(),r("div",{key:0,class:"rounded cursor-pointer overflow-hidden relative border border-dashed border-color",style:v(n(_))},[i(V,{limit:s.limit,onConfirm:k},{default:$(()=>[o("div",ae,[i(c,{name:"element-Plus",size:"20px",color:"var(--el-text-color-secondary)"}),o("div",ne,B(s.imageText||n(N)("upload.root")),1)])]),_:1},8,["limit"])],4)):D("",!0)],64))]),u.show?(l(),E(F,{key:0,"url-list":n(b),onClose:a[1]||(a[1]=x=>u.show=!1),"initial-index":u.index,"zoom-rate":1},null,8,["url-list","initial-index"])):D("",!0)],64)}}});const Qe=K(se,[["__scopeId","data-v-fd599ec3"]]);export{Qe as default};
