import{d as ve,x as xe,f as he,r as v,n as G,l as A,q as e,h as i,c as m,a as l,u as a,t as r,P as H,s as x,w as t,e as s,B as p,F as q,Q as P,A as $,i as F,_ as ye,K as be,ag as ge,ah as we,I as ke,aa as Re,ac as Fe,a0 as Ve,a4 as Ee,L as De,J as Ce,E as Te,a1 as Be,ak as Ie,aI as Ne,U as Se,p as Ue,g as Ae}from"./index-17984968.js";/* empty css                   *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                 *//* empty css                *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                 *//* empty css                        *//* empty css               *//* empty css               */import"./el-form-item-4ed993c7.js";import{_ as qe}from"./goods_default-664bb559.js";import{r as Pe,t as W,u as X}from"./order-fc033573.js";import{f as $e}from"./shop_address-a51b7e52.js";import{_ as Le}from"./_plugin-vue_export-helper-c27b6911.js";const I=D=>(Ue("data-v-a33770cf"),D=D(),Ae(),D),Me={class:"main-container"},je={class:"detail-head"},ze=I(()=>l("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1)),Oe={class:"ml-[1px]"},Je=I(()=>l("span",{class:"adorn"},"|",-1)),Ke={class:"right"},Qe={class:"panel-title"},Ge={class:"input-width"},He={class:"input-width"},We={class:"input-width"},Xe={class:"input-width"},Ye={class:"input-width"},Ze={class:"input-width"},ea={class:"input-width"},aa={class:"input-width"},la={class:"input-width"},ta={class:"input-width line-feed"},sa={class:"panel-title"},oa={class:"input-width"},ra={class:"input-width"},na={class:"input-width"},da={class:"input-width"},ua={class:"input-width"},ia={key:0,class:"input-width flex"},_a=I(()=>l("div",{class:"image-slot"},[l("img",{class:"w-[70px] h-[70px]",src:qe})],-1)),pa={class:"max-w-[100%] break-all"},ca={key:0,class:"panel-title"},fa={class:"input-width"},ma={class:"input-width"},va={class:"input-width"},xa={class:"panel-title"},ha={class:"mb-[20px]"},ya={class:"ml-[30px] text-[14px] mr-[20px]"},ba={class:"text-[14px]"},ga={class:"flex mt-[10px]"},wa={class:"flex ml-[30px] mt-[15px]"},ka={class:"text-[14px] text-[#ff7f5b]"},Ra={class:"ml-[10px]"},Fa={class:"text-[14px] text-[#a4a4a4]"},Va={class:"text-[14px] text-[#a4a4a4]"},Ea={class:"text-[14px] text-[#a4a4a4]"},Da={class:"panel-title"},Ca={class:"flex"},Ta={class:"flex items-center w-[50px] h-[50px] mr-[10px]"},Ba=["src"],Ia={class:"flex flex-col flex-1"},Na={key:2,class:"mt-[50px] mb-[20px]"},Sa={class:"mb-[100px]",style:{"min-height":"100px"}},Ua={class:"mr-[20px]"},Aa={class:"leading-[1] w-full text-[14px] w-[100px] flex justify-end"},qa={class:"leading-[1] w-full text-[14px] w-[100px] flex justify-end mt-[15px]"},Pa=I(()=>l("div",{class:"w-[16px] h-[16px] flex items-center bg-[#D1EBFF] border-[1px] border-[#0091FF] rounded-[999px]"},[l("div",{class:"w-[8px] h-[8px] mx-auto bg-[#0091FF] rounded-[999px]"})],-1)),$a={key:0,class:"w-[2px] h-[50px] bg-[#D1EBFF] mx-auto"},La={class:"leading-[1] ml-[20px] text-[14px]"},Ma={class:"leading-[1] ml-[20px] text-[14px] mt-[15px]"},ja={class:"dialog-footer"},za={class:"dialog-footer"},Oa={class:"dialog-footer"},Ja=ve({__name:"refund_detail",setup(D){const L=xe(),M=he(),Y=L.meta.title,y=parseInt(L.query.refund_id),b=v(!0),f=v(!1),o=v(null),V=async(c=0)=>{b.value=!0,o.value=null,await Pe(c).then(({data:n})=>{o.value=n,o.value.order_goods=[n.order_goods]}).catch(()=>{}),b.value=!1};y?V(y):b.value=!1;const g=v(!1),_=G({...{shop_reason:"",refund_address_id:"",money:"",type:"",apply_money:0,refund_type:1}}),j=v(),z=v(),Z=A(()=>({money:[{required:!0,message:e("moneyPlaceholder"),trigger:"blur"}],refund_address_id:[{required:!0,message:e("refundaddressPlaceholder"),trigger:"blur"}]})),ee=A(()=>({shop_reason:[{required:!0,message:e("shopReasonPlaceholder"),trigger:"blur"}]})),E=v(!1),ae=()=>{_.type="agree",_.refund_type=o.value.refund_type,_.apply_money=o.value.apply_money,_.money=o.value.apply_money,E.value=!0,o.value.refund_type==2&&le()},O=v([]),le=()=>{$e().then(c=>{O.value=c.data,c.data.forEach(n=>{n.is_refund_address==1&&(_.refund_address_id=n.id)})})},te=async c=>{f.value||!c||await c.validate(async n=>{n&&(f.value=!0,W({order_refund_no:o.value.order_refund_no,money:_.money,is_agree:1,refund_address_id:_.refund_address_id}).then(()=>{E.value=!1,f.value=!1,V(y)}).catch(()=>{f.value=!1}))})},se=()=>{_.type="refuse",_.shop_reason="",g.value=!0},oe=async c=>{f.value||!c||await c.validate(async n=>{n&&(f.value=!0,W({order_refund_no:o.value.order_refund_no,is_agree:0,shop_reason:_.shop_reason}).then(u=>{V(y),f.value=!1,g.value=!1}).catch(()=>{f.value=!1,g.value=!1}))})},re=()=>{ye.confirm(e("orderDeliveryTips"),e("warning"),{confirmButtonText:e("confirm"),cancelButtonText:e("cancel"),type:"warning"}).then(()=>{X({order_refund_no:o.value.order_refund_no,is_agree:1}).then(()=>{V(y)})})},w=v(!1),C=G({shop_reason:""}),J=v(),ne=A(()=>({shop_reason:[{required:!0,message:e("shopReasonPlaceholder"),trigger:"blur"}]})),de=async c=>{f.value||!c||await c.validate(async n=>{n&&(f.value=!0,X({order_refund_no:o.value.order_refund_no,is_agree:0,shop_reason:C.shop_reason}).then(u=>{V(y),f.value=!1,w.value=!1}).catch(()=>{f.value=!1,w.value=!1}))})},ue=()=>{_.type="refuse",_.shop_reason="",w.value=!0},ie=()=>{const c=M.resolve({path:"/member/refund/detail",query:{refund_no:o.value.refund_no}});window.open(c.href,"_blank")};return(c,n)=>{const u=be,h=ge,T=we,_e=ke,N=Re,pe=Fe,K=Ve,ce=Ee,B=De,S=Ce,k=Te,U=Be,fe=Ie,me=Ne,Q=Se;return i(),m("div",Me,[l("div",je,[l("div",{class:"left",onClick:n[0]||(n[0]=d=>a(M).push({path:"/shop/order/refund"}))},[ze,l("span",Oe,r(a(e)("returnToPreviousPage")),1)]),Je,l("span",Ke,r(a(Y)),1)]),H((i(),x(B,{model:o.value,"label-width":"100px",class:"page-form","label-position":"left"},{default:t(()=>[o.value?(i(),x(K,{key:0,class:"box-card !border-none relative",shadow:"never"},{default:t(()=>[l("h3",Qe,r(a(e)("orderInfo")),1),s(T,{class:"row-bg px-[30px] mb-[20px]",gutter:20},{default:t(()=>[s(h,{span:8},{default:t(()=>[s(u,{label:a(e)("orderNo")},{default:t(()=>[l("div",Ge,r(o.value.order_main.order_no),1)]),_:1},8,["label"]),s(u,{label:a(e)("orderForm")},{default:t(()=>[l("div",He,r(o.value.order_main.order_from_name),1)]),_:1},8,["label"]),o.value.order_main.out_trade_no?(i(),x(u,{key:0,label:a(e)("outTradeNo")},{default:t(()=>[l("div",We,r(o.value.order_main.out_trade_no),1)]),_:1},8,["label"])):p("",!0),o.value.pay_refund?(i(),x(u,{key:1,label:a(e)("payType")},{default:t(()=>[l("div",Xe,r(o.value.pay_refund.type_name),1)]),_:1},8,["label"])):p("",!0)]),_:1}),s(h,{span:8},{default:t(()=>[s(u,{label:a(e)("deliveryType")},{default:t(()=>[l("div",Ye,r(o.value.order_main.delivery_type_name),1)]),_:1},8,["label"]),l("div",null,[s(u,{label:a(e)("takerName")},{default:t(()=>[l("div",Ze,r(o.value.order_main.taker_name),1)]),_:1},8,["label"]),s(u,{label:a(e)("takerMobile")},{default:t(()=>[l("div",ea,r(o.value.order_main.taker_mobile),1)]),_:1},8,["label"]),s(u,{label:a(e)("takerFullAddress")},{default:t(()=>[l("div",aa,r(o.value.order_main.taker_full_address),1)]),_:1},8,["label"])])]),_:1}),s(h,{span:8},{default:t(()=>[s(u,{label:a(e)("memberRemark")},{default:t(()=>[l("div",la,r(o.value.order_main.member_remark),1)]),_:1},8,["label"]),s(u,{label:a(e)("notes")},{default:t(()=>[l("div",ta,r(o.value.order_main.shop_remark),1)]),_:1},8,["label"])]),_:1})]),_:1}),l("h3",sa,r(a(e)("afterSales")),1),s(T,{class:"row-bg px-[30px] mb-[20px]",gutter:20},{default:t(()=>[s(h,{span:8},{default:t(()=>[s(u,{label:a(e)("orderRefundNo")},{default:t(()=>[l("div",oa,r(o.value.order_refund_no),1)]),_:1},8,["label"]),s(u,{label:a(e)("refundType")},{default:t(()=>[l("div",ra,r(o.value.refund_type_name),1)]),_:1},8,["label"]),s(u,{label:a(e)("createTime")},{default:t(()=>[l("div",na,r(o.value.create_time),1)]),_:1},8,["label"])]),_:1}),s(h,{span:8},{default:t(()=>[s(u,{label:a(e)("refundMoney")},{default:t(()=>[l("div",da,"￥"+r(o.value.apply_money),1)]),_:1},8,["label"]),s(u,{label:a(e)("refundReason")},{default:t(()=>[l("div",ua,r(o.value.reason),1)]),_:1},8,["label"])]),_:1})]),_:1}),s(T,{class:"row-bg px-[30px] mb-[20px]",gutter:20},{default:t(()=>[s(h,{span:8},{default:t(()=>[s(u,{label:a(e)("refundVoucher")},{default:t(()=>[o.value.voucher?(i(),m("div",ia,[(i(!0),m(q,null,P(o.value.voucher,(d,R)=>(i(),m("div",{class:"mr-3",key:R},[d?(i(),x(_e,{key:0,class:"w-[70px] h-[70px]",src:a($)(d),fit:"contain","preview-src-list":[a($)(d)]},{error:t(()=>[_a]),_:2},1032,["src","preview-src-list"])):p("",!0)]))),128))])):p("",!0)]),_:1},8,["label"]),s(u,{label:a(e)("refundRemark")},{default:t(()=>[l("div",pa,r(o.value.remark),1)]),_:1},8,["label"])]),_:1})]),_:1}),o.value.status==4?(i(),m("h3",ca,"买家退货信息")):p("",!0),o.value.status==4?(i(),x(T,{key:1,class:"row-bg px-[30px] mb-[20px]",gutter:20},{default:t(()=>[s(h,{span:8},{default:t(()=>[s(u,{label:a(e)("expressCompany")},{default:t(()=>[l("div",fa,r(o.value.delivery.express_company),1)]),_:1},8,["label"])]),_:1}),s(h,{span:8},{default:t(()=>[s(u,{label:a(e)("expressNumber")},{default:t(()=>[l("div",ma,r(o.value.delivery.express_number),1)]),_:1},8,["label"])]),_:1}),s(h,{span:8},{default:t(()=>[s(u,{label:a(e)("expressRemark")},{default:t(()=>[l("div",va,r(o.value.delivery.remark),1)]),_:1},8,["label"])]),_:1})]),_:1})):p("",!0),l("h3",xa,r(a(e)("refundStatus")),1),l("div",ha,[l("p",null,[l("span",ya,r(a(e)("refundStatus"))+"：",1),l("span",ba,r(o.value.status_name),1)]),l("div",ga,[o.value.status==1?(i(),m("span",{key:0,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:ae},r(a(e)("agree")),1)):p("",!0),o.value.status==1?(i(),m("span",{key:1,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:se},r(a(e)("refuse")),1)):p("",!0),o.value.status==4&&o.value.refund_type==2?(i(),m("span",{key:2,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:re},r(a(e)("confirmDelivery")),1)):p("",!0),o.value.status==4&&o.value.refund_type==2?(i(),m("span",{key:3,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:ue},r(a(e)("refuse")),1)):p("",!0),o.value.status==6?(i(),m("span",{key:4,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:ie},r(a(e)("transferAccounts")),1)):p("",!0)]),l("div",wa,[l("span",ka,r(a(e)("remind"))+"：",1),l("div",Ra,[l("p",Fa,r(a(e)("remindTips1")),1),l("p",Va,r(a(e)("remindTips2")),1),l("p",Ea,r(a(e)("remindTips3")),1)])])]),l("h3",Da,r(a(e)("goodsDetail")),1),s(pe,{data:o.value.order_goods,size:"large"},{default:t(()=>[s(N,{label:a(e)("goodsName"),align:"left",width:"300"},{default:t(({row:d})=>[l("div",Ca,[l("div",Ta,[l("img",{class:"w-[50px] h-[50px]",src:a($)(d.goods_image)},null,8,Ba)]),l("div",Ia,[l("span",null,r(d.goods_name),1)])])]),_:1},8,["label"]),s(N,{prop:"price",label:a(e)("price"),"min-width":"50",align:"left"},null,8,["label"]),s(N,{prop:"num",label:a(e)("num"),"min-width":"50",align:"right"},null,8,["label"])]),_:1},8,["data"]),o.value.refund_log.length>0?(i(),m("h3",Na,r(a(e)("operateLog")),1)):p("",!0),l("div",Sa,[o.value.refund_log.length>0?(i(!0),m(q,{key:0},P(o.value.refund_log,(d,R)=>(i(),m("div",{class:"flex",key:R},[l("div",Ua,[l("div",Aa,r(d.create_time.split(" ")[0]),1),l("div",qa,r(d.create_time.split(" ")[1]),1)]),l("div",null,[Pa,R+1!=o.value.refund_log.length?(i(),m("div",$a)):p("",!0)]),l("div",null,[l("div",La,r(d.main_type_name)+r(d.main_name),1),l("div",Ma,r(d.type_name),1)])]))),128)):p("",!0)])]),_:1})):p("",!0),!b.value&&!o.value?(i(),x(K,{key:1,class:"box-card !border-none relative",shadow:"never"},{default:t(()=>[s(ce,{description:a(e)("orderInfoEmpty")},null,8,["description"])]),_:1})):p("",!0)]),_:1},8,["model"])),[[Q,b.value]]),s(U,{modelValue:g.value,"onUpdate:modelValue":n[4]||(n[4]=d=>g.value=d),title:a(e)("orderRefundRefuse"),width:"460px",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:t(()=>[l("span",ja,[s(k,{onClick:n[2]||(n[2]=d=>g.value=!1)},{default:t(()=>[F(r(a(e)("cancel")),1)]),_:1}),s(k,{type:"primary",loading:f.value,onClick:n[3]||(n[3]=d=>oe(z.value))},{default:t(()=>[F(r(a(e)("confirm")),1)]),_:1},8,["loading"])])]),default:t(()=>[s(B,{model:_,"label-width":"90px",ref_key:"refuseFormRef",ref:z,rules:a(ee),class:"page-form"},{default:t(()=>[s(u,{label:a(e)("refuseReason"),prop:"shop_reason"},{default:t(()=>[s(S,{modelValue:_.shop_reason,"onUpdate:modelValue":n[1]||(n[1]=d=>_.shop_reason=d),type:"textarea",rows:"4",clearable:"",class:"input-width",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),s(U,{modelValue:E.value,"onUpdate:modelValue":n[9]||(n[9]=d=>E.value=d),title:a(e)("orderRefundAgree"),width:"460px",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:t(()=>[l("span",za,[s(k,{onClick:n[7]||(n[7]=d=>E.value=!1)},{default:t(()=>[F(r(a(e)("cancel")),1)]),_:1}),s(k,{type:"primary",loading:f.value,onClick:n[8]||(n[8]=d=>te(j.value))},{default:t(()=>[F(r(a(e)("confirm")),1)]),_:1},8,["loading"])])]),default:t(()=>[H((i(),x(B,{model:_,"label-width":"120px",ref_key:"formRef",ref:j,rules:a(Z),class:"page-form"},{default:t(()=>[s(u,{label:a(e)("applyMoney")},{default:t(()=>[l("span",null,"￥"+r(_.apply_money),1)]),_:1},8,["label"]),s(u,{label:a(e)("agreeMoney"),prop:"money"},{default:t(()=>[s(S,{modelValue:_.money,"onUpdate:modelValue":n[5]||(n[5]=d=>_.money=d),clearable:"",class:"input-width"},null,8,["modelValue"])]),_:1},8,["label"]),_.refund_type==2?(i(),x(u,{key:0,label:a(e)("refundDeliveryAddress"),prop:"refund_address_id"},{default:t(()=>[s(me,{modelValue:_.refund_address_id,"onUpdate:modelValue":n[6]||(n[6]=d=>_.refund_address_id=d),clearable:"",class:"input-item"},{default:t(()=>[(i(!0),m(q,null,P(O.value,(d,R)=>(i(),x(fe,{key:R,label:d.full_address,value:d.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])):p("",!0)]),_:1},8,["model","rules"])),[[Q,b.value]])]),_:1},8,["modelValue","title"]),s(U,{modelValue:w.value,"onUpdate:modelValue":n[13]||(n[13]=d=>w.value=d),title:a(e)("orderRefundRefuse"),width:"460px",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:t(()=>[l("span",Oa,[s(k,{onClick:n[11]||(n[11]=d=>w.value=!1)},{default:t(()=>[F(r(a(e)("cancel")),1)]),_:1}),s(k,{type:"primary",loading:f.value,onClick:n[12]||(n[12]=d=>de(J.value))},{default:t(()=>[F(r(a(e)("confirm")),1)]),_:1},8,["loading"])])]),default:t(()=>[s(B,{model:C,"label-width":"90px",ref_key:"deliveryRefuseFormRef",ref:J,rules:a(ne),class:"page-form"},{default:t(()=>[s(u,{label:a(e)("refuseReason"),prop:"shop_reason"},{default:t(()=>[s(S,{modelValue:C.shop_reason,"onUpdate:modelValue":n[10]||(n[10]=d=>C.shop_reason=d),type:"textarea",rows:"4",clearable:"",class:"input-width",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});const bl=Le(Ja,[["__scopeId","data-v-a33770cf"]]);export{bl as default};
