import{d as I,r as m,h as _,c as S,e as s,w as a,a as i,i as w,t as f,u as l,q as c,s as N,A as z,a$ as G,aa as $,I as j,ac as q,E as A,a1 as L}from"./index-17984968.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                 *//* empty css                    *//* empty css               */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css                        */import{_ as y}from"./goods_default-664bb559.js";import{z as P}from"./goods-e571a7e7.js";const U={class:"flex items-center cursor-pointer"},F={class:"min-w-[60px] h-[60px] flex items-center justify-center"},H=i("div",{class:"image-slot"},[i("img",{class:"w-[60px] h-[60px]",src:y})],-1),J={key:1,class:"w-[70px] h-[60px]",src:y,fit:"contain"},K={class:"ml-2"},M=["title"],O={class:"dialog-footer"},de=I({__name:"goods-sku-select",props:{id:{type:String,default:""}},emits:["skuSelect"],setup(E,{expose:C,emit:V}){const g=E,r=m(!1),k=m(!1),d=m(),h=m(),B=p=>{r.value=!0,k.value=!0;let n=p.map(t=>t.sku_id);console.log(g.id),P({goods_id:g.id}).then(t=>{h.value=t.data.map(e=>(e.goods_stock=e.stock+"",e.goods_price=e.price+"",e.limit_num="",e.stock="",e.point="",e.price="",e)),G(()=>{t.data.forEach(e=>{var u;(u=d.value)==null||u.toggleRowSelection(e,!1),n.includes(e.sku_id)&&d.value.toggleRowSelection(e,!0)}),k.value=!1})})},v=m([]),T=p=>{v.value=p},D=()=>{V("skuSelect",v.value),r.value=!1,d.value&&d.value.clearSelection()};return C({show:B}),(p,n)=>{const t=$,e=j,u=q,x=A,R=L;return _(),S("div",null,[s(R,{modelValue:r.value,"onUpdate:modelValue":n[1]||(n[1]=o=>r.value=o),title:l(c)("goodsSkuTitle"),width:"60%","destroy-on-close":!0},{footer:a(()=>[i("span",O,[s(x,{onClick:n[0]||(n[0]=o=>r.value=!1)},{default:a(()=>[w(f(l(c)("cancel")),1)]),_:1}),s(x,{type:"primary",onClick:D},{default:a(()=>[w(f(l(c)("confirm")),1)]),_:1})])]),default:a(()=>[s(u,{class:"!max-w-[100%]",data:h.value,size:"large",ref_key:"tableRef",ref:d,onSelectionChange:T},{default:a(()=>[s(t,{type:"selection",width:"55"}),s(t,{label:l(c)("goodsSelectPopupGoodsInfo"),"min-width":"300"},{default:a(({row:o})=>{var b;return[i("div",U,[i("div",F,[o.sku_image?(_(),N(e,{key:0,class:"w-[60px] h-[60px]",src:l(z)(o.sku_image),fit:"contain"},{error:a(()=>[H]),_:2},1032,["src"])):(_(),S("img",J))]),i("div",K,[i("span",{title:o.sku_name,class:"multi-hidden"},f(o.sku_name||((b=o.goods)==null?void 0:b.goods_name)),9,M)])])]}),_:1},8,["label"]),s(t,{prop:"goods_price",label:l(c)("price"),"min-width":"170"},null,8,["label"]),s(t,{prop:"goods_stock",label:l(c)("goodsStock"),"min-width":"170"},null,8,["label"])]),_:1},8,["data"])]),_:1},8,["modelValue","title"])])}}});export{de as default};
