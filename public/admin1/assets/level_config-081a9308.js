import{d as O,x as j,f as H,r as f,n as R,l as Q,q as l,h as L,c as W,P as T,s as B,w as t,e as o,u as e,a as g,t as r,i as d,cV as X,bp as P,c6 as U,_ as Y,az as Z,aA as ee,K as le,E as ae,aa as te,ac as oe,a0 as ne,L as se,J as ie,a1 as re,U as de}from"./index-17984968.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                 *//* empty css                *//* empty css                *//* empty css                 *//* empty css                    *//* empty css               */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                        *//* empty css                  */import"./el-form-item-4ed993c7.js";/* empty css                       *//* empty css                 */import{g as ue,e as me,a as pe,d as ce,b as fe,s as ge}from"./agent-d310b69a.js";const _e={class:"main-container"},ve={class:"text text-[14px] leading-[25px]"},be={class:"flex flex-col"},he=g("span",{class:"text-[#999] leading-[1.3] mt-[5px] text-[12px]"},"等级费用指代理商申请的费用，目前代理申请线下处理，系统只做记录",-1),xe={class:"flex flex-col"},ye=g("span",{class:"text-[#999] leading-[1.3] mt-[5px] text-[12px]"},"折扣数据0-10折",-1),we={class:"dialog-footer"},Je=O({__name:"level_config",setup(Ee){const I=j();H(),I.meta.title;let u=f(!1);const p=R({loading:!1,data:[]}),E=(s=1)=>{p.loading=!0,ue().then(a=>{p.data=a.data,p.loading=!1}).catch(()=>{p.loading=!1})};E();const k=f();let b=f(!1),i=R({name:"",money:"",discount:""});const q=()=>{b.value=!1,u.value=!0,i.discount="",i.money="",i.name=""},D=Q(()=>({name:[{required:!0,message:l("levelNamePlaceholder"),trigger:"blur"}],money:[{required:!0,message:l("moneyPlaceholder"),trigger:"blur"},{validator:(s,a,m)=>{parseFloat(a)<0?m(new Error(l("lessThan"))):m()},trigger:["blur","change"]}],discount:[{required:!0,message:l("discountPlaceholder"),trigger:"blur"},{validator:(s,a,m)=>{var c=parseFloat(a);isNaN(c)||c<0||c>10||c.toFixed(2)!=c?m(new Error(l("discountIntPlaceholder"))):m()},trigger:["blur","change"]}]}));let h=f(!1);const K=async s=>{h.value||!s||await s.validate(async a=>{if(a){h.value=!0;const m=i;(b.value?me:pe)(m).then(_=>{h.value=!1,u.value=!1,E()}).catch(()=>{h.value=!1})}})},$=s=>{i.level_id=s.level_id,i.discount=s.discount,i.money=parseFloat(s.money),i.name=s.name,b.value=!0,u.value=!0},x=f(!1),z=s=>{Y.confirm(l("levelDeleteTips"),l("warning"),{confirmButtonText:l("confirm"),cancelButtonText:l("cancel"),type:"warning"}).then(()=>{x.value||(x.value=!0,ce({level_id:s}).then(()=>{E(),x.value=!1}).catch(()=>{x.value=!1}))})};let y=f({is_open:0}),V=f(!1);((s=1)=>{fe().then(a=>{y.value.is_open=a.data.is_open})})();const S=()=>{if(V.value)return!1;V.value=!0,ge({is_open:y.value.is_open}).then(s=>{V.value=!1})};return(s,a)=>{const m=Z,c=ee,_=le,v=ae,w=te,G=oe,A=ne,F=se,C=ie,J=re,N=de;return L(),W("div",_e,[T((L(),B(A,{class:"card !border-none",shadow:"never"},{default:t(()=>[o(F,{class:"page-form",model:s.formData,"label-width":"180px",rules:e(D),ref:"formRef"},{default:t(()=>[g("div",ve,r(e(l)("baseTitle")),1),o(A,{class:"card !border-none",shadow:"never"},{default:t(()=>[o(_,{label:e(l)("isEnable")},{default:t(()=>[o(c,{modelValue:e(y).is_open,"onUpdate:modelValue":a[0]||(a[0]=n=>e(y).is_open=n),onChange:S},{default:t(()=>[o(m,{label:"1"},{default:t(()=>[d(r(e(l)("are")),1)]),_:1}),o(m,{label:"0"},{default:t(()=>[d(r(e(l)("no")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(_,{label:e(l)("teamLevel")},{default:t(()=>[o(v,{type:"primary",class:"mb-[15px]",onClick:q},{default:t(()=>[d(r(e(l)("addLevel")),1)]),_:1}),T((L(),B(G,{data:p.data,size:"large"},{empty:t(()=>[g("span",null,r(p.loading?"":e(l)("emptyData")),1)]),default:t(()=>[o(w,{prop:"name",label:e(l)("levelName"),"min-width":"120"},null,8,["label"]),o(w,{label:e(l)("money"),"min-width":"120"},{default:t(({row:n})=>[d(r(e(X)(n.money)||"0.00"),1)]),_:1},8,["label"]),o(w,{label:e(l)("discount"),"min-width":"120"},{default:t(({row:n})=>[d(r(n.discount||0),1)]),_:1},8,["label"]),o(w,{label:e(l)("operation"),fixed:"right",align:"right","min-width":"120"},{default:t(({row:n})=>[o(v,{type:"primary",link:"",onClick:M=>$(n)},{default:t(()=>[d(r(e(l)("edit")),1)]),_:2},1032,["onClick"]),o(v,{type:"primary",link:"",onClick:M=>z(n.level_id)},{default:t(()=>[d(r(e(l)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[N,p.loading]])]),_:1},8,["label"])]),_:1})]),_:1},8,["model","rules"])]),_:1})),[[N,p.loading]]),o(J,{modelValue:e(u),"onUpdate:modelValue":a[8]||(a[8]=n=>P(u)?u.value=n:u=n),title:e(b)?e(l)("editLevel"):e(l)("addLevel"),width:"450px","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1},{footer:t(()=>[g("span",we,[o(v,{onClick:a[6]||(a[6]=n=>P(u)?u.value=!1:u=!1)},{default:t(()=>[d(r(e(l)("cancel")),1)]),_:1}),o(v,{type:"primary",onClick:a[7]||(a[7]=n=>K(k.value))},{default:t(()=>[d(r(e(l)("confirm")),1)]),_:1})])]),default:t(()=>[o(F,{ref_key:"levelListInfoRef",ref:k,model:e(i),"label-width":"110px",rules:e(D)},{default:t(()=>[o(_,{label:e(l)("levelName"),prop:"name"},{default:t(()=>[o(C,{modelValue:e(i).name,"onUpdate:modelValue":a[1]||(a[1]=n=>e(i).name=n),placeholder:e(l)("levelNamePlaceholder"),maxlength:"25","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(_,{label:e(l)("money"),prop:"money"},{default:t(()=>[g("div",be,[o(C,{modelValue:e(i).money,"onUpdate:modelValue":a[2]||(a[2]=n=>e(i).money=n),maxlength:"7","show-word-limit":"",onKeyup:a[3]||(a[3]=n=>e(U)(n)),class:"!w-[300px]",placeholder:e(l)("moneyPlaceholder")},{append:t(()=>[d("元")]),_:1},8,["modelValue","placeholder"]),he])]),_:1},8,["label"]),o(_,{label:e(l)("discount"),prop:"discount"},{default:t(()=>[g("div",xe,[o(C,{modelValue:e(i).discount,"onUpdate:modelValue":a[4]||(a[4]=n=>e(i).discount=n),class:"!w-[300px]",onKeyup:a[5]||(a[5]=n=>e(U)(n)),placeholder:e(l)("discountPlaceholder"),maxlength:"60"},{append:t(()=>[d("折")]),_:1},8,["modelValue","placeholder"]),ye])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{Je as default};
