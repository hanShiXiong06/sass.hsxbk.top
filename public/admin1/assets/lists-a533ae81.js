import{d as se,x as le,r as x,f as ne,n as z,h as p,c as k,e as s,w as l,a as i,t as d,u as o,q as a,F as ie,Q as re,s as v,i as _,P as de,A as ce,cV as pe,B as C,_ as O,R as me,bs as _e,J as ue,K as ge,bM as fe,ak as he,aI as ye,E as xe,L as ve,a0 as be,aB as ke,aa as Ce,I as Te,aq as Pe,ab as Ee,ac as Ve,T as we,U as Se,p as Fe,g as ze}from"./index-17984968.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css                        *//* empty css                        *//* empty css                *//* empty css                *//* empty css                  *//* empty css                          *//* empty css                 */import"./el-form-item-4ed993c7.js";import{_ as M}from"./goods_default-665e448a.js";import{g as Be,b as Ie}from"./goods-e571a7e7.js";import{e as j,a as $e}from"./goods-10506042.js";import{_ as Le}from"./_plugin-vue_export-helper-c27b6911.js";const B=T=>(Fe("data-v-c045c629"),T=T(),ze(),T),Ne={class:"main-container"},Ue={class:"flex justify-between items-center"},De={class:"text-page-title"},Re={class:"mt-[10px]"},Ge={class:"mb-[10px] flex items-center"},Oe={class:"flex items-center"},je={class:"min-w-[70px] h-[70px] flex items-center justify-center"},Me=B(()=>i("div",{class:"image-slot"},[i("img",{class:"w-[70px] h-[70px]",src:M,fit:"contain"})],-1)),qe={key:1,class:"w-[70px] h-[70px]",src:M,fit:"contain"},Ae={class:"ml-2"},Je=["title"],Ke={class:"text-primary text-[12px]"},Qe={key:0},He={key:1},We=B(()=>i("div",{class:"max-w-[300px]"},[i("p",{class:"leading-[25px]"},"1. 分销规则可以是默认规则和单独设置"),i("p",{class:"leading-[25px]"}," 2. 商品可以设置分销计算价，设置之后按照计算价作为商品业绩计算比率，默认按照商品卖价作为商品业绩然后通过比率计算佣金"),i("p",{class:"leading-[25px]"},"3. 商品佣金比率也可以单独设置，设置之后按照商品佣金比率计算")],-1)),Xe=B(()=>i("span",{class:"iconfont iconwenhao ml-[5px]"},null,-1)),Ye={class:"mt-[16px] flex"},Ze={class:"flex items-center flex-1"},et=se({__name:"lists",setup(T){const q=le().meta.title,P=x(!1),I=ne(),n=z({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{goods_name:"",goods_category:[],goods_type:""}}),$=x(),S=z([]),A={checkStrictly:!0},L=z([]);(()=>{Be().then(r=>{const t=r.data;if(t){const c=[];t.forEach(u=>{const V=[];u.child_list&&u.child_list.forEach(w=>{V.push({value:w.category_id,label:w.category_name})}),c.push({value:u.category_id,label:u.category_name,children:V})}),S.splice(0,S.length,...c)}}),Ie().then(r=>{const t=r.data;if(t)for(const c in t)L.push(t[c])})})();const h=x(),b=x(!1),N=r=>{b.value=!1,U.value.toggleAllSelection()},U=x(),y=x([]),J=r=>{y.value=r,h.value=!1,y.value.length>0&&y.value.length<n.data.length?b.value=!0:b.value=!1,y.value.length==n.data.length&&(h.value=!0)},K=(r,t)=>{O.confirm(t?a("participateTip"):a("offParticipateTip"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{P.value||(P.value=!0,j({goods_ids:[r.goods_id],is_fenxiao:t}).then(c=>{P.value=!1,f()}).catch(()=>{P.value=!1}))}).catch(()=>{})},E=r=>{if(y.value.length==0){me({type:"warning",message:`${a("batchEmptySelectedGoodsTips")}`});return}const t=[];y.value.forEach(c=>{t.push(c.goods_id)}),O.confirm(r?a("participateTip"):a("offParticipateTip"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{j({goods_ids:t,is_fenxiao:r}).then(c=>{f()})}).catch(()=>{})},f=(r=1)=>{n.loading=!0,n.page=r;const t=_e(n.searchParam);$e({page:n.page,limit:n.limit,...t}).then(c=>{n.loading=!1,n.data=c.data.data,n.total=c.data.total}).catch(()=>{n.loading=!1})};f();const D=r=>{I.push("/shop_fenxiao/management/goods_config?goods_id="+r)},Q=r=>{I.push("/shop_fenxiao/management/goods_detail?goods_id="+r)},H=r=>{r&&(r.resetFields(),f())};return(r,t)=>{const c=ue,u=ge,V=fe,w=he,W=ye,g=xe,X=ve,R=be,G=ke,m=Ce,Y=Te,Z=Pe,ee=Ee,te=Ve,ae=we,oe=Se;return p(),k("div",Ne,[s(R,{class:"card !border-none",shadow:"never"},{default:l(()=>[i("div",Ue,[i("span",De,d(o(q)),1)]),s(R,{class:"card my-[10px] !border-none table-search-wrap",shadow:"never"},{default:l(()=>[s(X,{inline:!0,model:n.searchParam,ref_key:"searchFormRef",ref:$},{default:l(()=>[s(u,{label:o(a)("goodsName"),prop:"goods_name"},{default:l(()=>[s(c,{modelValue:n.searchParam.goods_name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchParam.goods_name=e),placeholder:o(a)("goodsNamePlaceholder"),maxlength:"60"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(u,{label:o(a)("goodsCategory"),prop:"goods_category"},{default:l(()=>[s(V,{props:A,modelValue:n.searchParam.goods_category,"onUpdate:modelValue":t[1]||(t[1]=e=>n.searchParam.goods_category=e),options:S,placeholder:o(a)("goodsCategoryPlaceholder"),clearable:"",filterable:""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"]),s(u,{label:o(a)("goodsType"),prop:"goods_type"},{default:l(()=>[s(W,{modelValue:n.searchParam.goods_type,"onUpdate:modelValue":t[2]||(t[2]=e=>n.searchParam.goods_type=e),placeholder:o(a)("goodsTypePlaceholder"),clearable:""},{default:l(()=>[(p(!0),k(ie,null,re(L,e=>(p(),v(w,{key:e.type,label:e.name,value:e.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),s(u,null,{default:l(()=>[s(g,{type:"primary",onClick:t[3]||(t[3]=e=>f())},{default:l(()=>[_(d(o(a)("search")),1)]),_:1}),s(g,{onClick:t[4]||(t[4]=e=>H($.value))},{default:l(()=>[_(d(o(a)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),i("div",Re,[i("div",Ge,[s(G,{modelValue:h.value,"onUpdate:modelValue":t[5]||(t[5]=e=>h.value=e),size:"large",class:"px-[14px]",onChange:N,indeterminate:b.value},null,8,["modelValue","indeterminate"]),s(g,{onClick:t[6]||(t[6]=e=>E(1)),size:"small"},{default:l(()=>[_(d(o(a)("participate")),1)]),_:1}),s(g,{onClick:t[7]||(t[7]=e=>E(0)),size:"small"},{default:l(()=>[_(d(o(a)("offParticipate")),1)]),_:1})]),de((p(),v(te,{data:n.data,size:"large",ref_key:"goodsListTableRef",ref:U,onSelectionChange:J},{empty:l(()=>[i("span",null,d(n.loading?"":o(a)("emptyData")),1)]),default:l(()=>[s(m,{type:"selection",width:"55"}),s(m,{prop:"goods_id",label:o(a)("goodsInfo"),"min-width":"300"},{default:l(({row:e})=>[i("div",Oe,[i("div",je,[e.goods_cover_thumb_small?(p(),v(Y,{key:0,class:"w-[70px] h-[70px]",src:o(ce)(e.goods_cover_thumb_small),fit:"contain"},{error:l(()=>[Me]),_:2},1032,["src"])):(p(),k("img",qe))]),i("div",Ae,[i("span",{title:e.goods_name,class:"multi-hidden"},d(e.goods_name),9,Je),i("span",Ke,d(e.goods_type_name),1)])])]),_:1},8,["label"]),s(m,{prop:"goods_type_name",label:o(a)("goodsTypeName"),"min-width":"120",align:"right"},null,8,["label"]),s(m,{prop:"price",label:o(a)("skuPrice"),"min-width":"120",align:"right"},{default:l(({row:e})=>[i("span",null,"￥"+d(o(pe)(e.goodsSku.price)),1)]),_:1},8,["label"]),s(m,{prop:"stock",label:o(a)("stock"),"min-width":"120"},null,8,["label"]),s(m,{prop:"sale_num",label:o(a)("saleNum"),"min-width":"100"},null,8,["label"]),s(m,{label:o(a)("status"),"min-width":"100"},{default:l(({row:e})=>[e.status==1?(p(),k("div",Qe,d(o(a)("statusOn")),1)):C("",!0),e.status==0?(p(),k("div",He,d(o(a)("statusOff")),1)):C("",!0)]),_:1},8,["label"]),s(m,{label:o(a)("isParticipate"),"min-width":"150"},{default:l(({row:e})=>[s(Z,{class:"cursor-pointer",type:e.is_set_fenxiao?"success":"info",onClick:F=>K(e,e.is_set_fenxiao?0:1)},{default:l(()=>[_(d(e.is_set_fenxiao?o(a)("yes"):o(a)("no")),1)]),_:2},1032,["type","onClick"])]),_:1},8,["label"]),s(m,{prop:"","min-width":"150"},{header:l(()=>[i("span",null,d(o(a)("ParticipateType")),1),s(ee,{class:"box-item",effect:"light",placement:"bottom-end"},{content:l(()=>[We]),default:l(()=>[Xe]),_:1})]),default:l(({row:e})=>[i("span",null,d(e.fenxiao_type==1?o(a)("typeLabelOne"):o(a)("typeLabelTwo")),1)]),_:1}),s(m,{label:o(a)("operation"),fixed:"right",align:"right","min-width":"120"},{default:l(({row:e})=>[e.is_set_fenxiao==0?(p(),v(g,{key:0,type:"primary",link:"",onClick:F=>D(e.goods_id)},{default:l(()=>[_(d(o(a)("commissionSettings")),1)]),_:2},1032,["onClick"])):C("",!0),e.is_set_fenxiao?(p(),v(g,{key:1,type:"primary",link:"",onClick:F=>Q(e.goods_id)},{default:l(()=>[_(d(o(a)("detail")),1)]),_:2},1032,["onClick"])):C("",!0),e.is_set_fenxiao?(p(),v(g,{key:2,type:"primary",link:"",onClick:F=>D(e.goods_id)},{default:l(()=>[_(d(o(a)("commissionSettings")),1)]),_:2},1032,["onClick"])):C("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[oe,n.loading]]),i("div",Ye,[i("div",Ze,[s(G,{modelValue:h.value,"onUpdate:modelValue":t[8]||(t[8]=e=>h.value=e),size:"large",class:"px-[14px]",onChange:N,indeterminate:b.value},null,8,["modelValue","indeterminate"]),s(g,{onClick:t[9]||(t[9]=e=>E(1)),size:"small"},{default:l(()=>[_(d(o(a)("participate")),1)]),_:1}),s(g,{onClick:t[10]||(t[10]=e=>E(0)),size:"small"},{default:l(()=>[_(d(o(a)("offParticipate")),1)]),_:1})]),s(ae,{"current-page":n.page,"onUpdate:current-page":t[11]||(t[11]=e=>n.page=e),"page-size":n.limit,"onUpdate:page-size":t[12]||(t[12]=e=>n.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:n.total,onSizeChange:t[13]||(t[13]=e=>f()),onCurrentChange:f},null,8,["current-page","page-size","total"])])])]),_:1})])}}});const wt=Le(et,[["__scopeId","data-v-c045c629"]]);export{wt as default};
