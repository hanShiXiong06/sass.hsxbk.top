import{d as q,j as B,r as b,n as V,q as l,h as N,c as R,e as s,w as t,a,u as n,d9 as F,t as m,i as P,a8 as H,aP as z,be as A,bf as L,bg as T,J as j,K as J,L as K,E as M,a1 as G,p as O,g as Q,f as W}from"./index-17984968.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 *//* empty css                         *//* empty css                  *//* empty css                     */import{_ as X}from"./index.vue_vue_type_script_setup_true_lang-8e50df98.js";/* empty css                  */import{s as Y}from"./personal-6c8df3b2.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                */const _=c=>(O("data-v-32659a64"),c=c(),Q(),c),ee={class:"userinfo flex h-full items-center"},oe={class:"user-name pl-[8px]"},se=_(()=>a("div",{class:"flex items-center leading-[1] py-[5px]"},[a("span",{class:"iconfont iconqiehuan ml-[4px] !text-[14px] mr-[10px]"}),a("span",{class:"text-[14px]"},"切换站点")],-1)),ae=_(()=>a("div",{class:"flex items-center leading-[1] py-[5px]"},[a("span",{class:"iconfont iconshezhi1 ml-[4px] !text-[14px] mr-[10px]"}),a("span",{class:"text-[14px]"},"账号设置")],-1)),le=_(()=>a("div",{class:"flex items-center leading-[1] py-[5px]"},[a("span",{class:"iconfont iconxiugai ml-[4px] !text-[14px] mr-[10px]"}),a("span",{class:"text-[14px]"},"修改密码")],-1)),te=_(()=>a("div",{class:"flex items-center leading-[1] py-[2px]"},[a("span",{class:"iconfont icontuichudenglu !text-[21px] mr-[8px]"}),a("span",{class:"text-[14px]"},"退出登录")],-1)),re={class:"form-tip"},ne={class:"dialog-footer"},pe=q({__name:"user-info",setup(c){const x=B(),E=W(),I=p=>{switch(p){case"logout":x.logout();break}},g=p=>{E.push(p)},i=b(!1),v=b(),o=V({original_password:"",password:"",password_copy:""}),k=V({original_password:[{required:!0,message:l("originalPasswordPlaceholder"),trigger:"blur"}],password:[{required:!0,message:l("passwordPlaceholder"),trigger:"blur"}],password_copy:[{required:!0,message:l("passwordPlaceholder"),trigger:"blur"}]}),C=p=>{p&&p.validate(e=>{if(e){let d="";if(o.password&&!o.original_password&&(d=l("originalPasswordHint")),o.password&&o.original_password&&!o.password_copy&&(d=l("newPasswordHint")),o.password&&o.original_password&&o.password_copy&&o.password!=o.password_copy&&(d=l("doubleCipherHint")),d){H({type:"error",message:d});return}Y(o).then(h=>{i.value=!1})}else return!1})};return(p,e)=>{const d=z,h=X,u=A,D=L,S=T,f=j,w=J,U=K,y=M,$=G;return N(),R("div",null,[s(S,{onCommand:I,tabindex:1},{dropdown:t(()=>[s(D,null,{default:t(()=>[s(u,{onClick:e[0]||(e[0]=r=>g("/home/index"))},{default:t(()=>[se]),_:1}),s(u,{onClick:e[1]||(e[1]=r=>g("/user/center"))},{default:t(()=>[ae]),_:1}),s(u,{onClick:e[2]||(e[2]=r=>i.value=!0)},{default:t(()=>[le]),_:1}),s(u,{command:"logout"},{default:t(()=>[te]),_:1})]),_:1})]),default:t(()=>[a("div",ee,[s(d,{size:25,icon:n(F)},null,8,["icon"]),a("div",oe,m(n(x).userInfo.username),1),s(h,{name:"element-ArrowDown",class:"ml-[5px]"})])]),_:1}),s($,{modelValue:i.value,"onUpdate:modelValue":e[8]||(e[8]=r=>i.value=r),width:"450px",title:"修改密码"},{footer:t(()=>[a("span",ne,[s(y,{onClick:e[6]||(e[6]=r=>i.value=!1)},{default:t(()=>[P(m(n(l)("cancel")),1)]),_:1}),s(y,{type:"primary",onClick:e[7]||(e[7]=r=>C(v.value))},{default:t(()=>[P(m(n(l)("save")),1)]),_:1})])]),default:t(()=>[a("div",null,[s(U,{model:o,"label-width":"90px",ref_key:"formRef",ref:v,rules:k,class:"page-form"},{default:t(()=>[s(w,{label:n(l)("originalPassword"),prop:"original_password"},{default:t(()=>[s(f,{modelValue:o.original_password,"onUpdate:modelValue":e[3]||(e[3]=r=>o.original_password=r),type:"password",placeholder:n(l)("originalPasswordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(w,{label:n(l)("newPassword"),prop:"password"},{default:t(()=>[s(f,{modelValue:o.password,"onUpdate:modelValue":e[4]||(e[4]=r=>o.password=r),type:"password",placeholder:n(l)("passwordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"]),a("div",re,m(n(l)("passwordTip")),1)]),_:1},8,["label"]),s(w,{label:n(l)("passwordCopy"),prop:"password_copy"},{default:t(()=>[s(f,{modelValue:o.password_copy,"onUpdate:modelValue":e[5]||(e[5]=r=>o.password_copy=r),type:"password",placeholder:n(l)("passwordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"])])}}});const Pe=Z(pe,[["__scopeId","data-v-32659a64"]]);export{Pe as default};
