import{d as I,x as M,f as H,r as y,n as A,h as _,c as p,e as t,w as i,a as r,t as a,u as o,q as s,i as C,P as G,F as K,Q,B as v,A as J,s as W,bs as X,bN as Z,K as ee,ak as te,aI as ae,E as oe,L as se,a0 as le,aa as ne,ac as re,a4 as ie,T as de,U as me}from"./index-17984968.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                *//* empty css                  */import"./el-form-item-4ed993c7.js";/* empty css                       */import{g as _e,a as ce,b as pe}from"./order-fc033573.js";import{a as ue}from"./team-9b9b64ab.js";import{_ as he}from"./_plugin-vue_export-helper-c27b6911.js";const be={class:"main-container"},fe={class:"flex justify-between items-center"},ge={class:"text-page-title"},xe={class:"table-body min-h-[150px]"},ye={key:0},ve={class:"flex items-center justify-between h-[35px] mt-[10px] px-3 text-[12px] text-[#666] border-solid border-b-[1px] border-[var(--el-border-color)] bg-[var(--el-color-info-light-9)]"},ke={class:"ml-5"},we={key:0,class:"ml-5"},Ce={class:"ml-5"},De={class:"flex cursor-pointer"},Ee={class:"flex items-center min-w-[50px] mr-[10px]"},Pe=["src"],Fe={key:1,class:"w-[50px] h-[50px]",src:"",alt:""},Te={class:"flex flex-col w-[308px]"},Ve={class:"multi-hidden text-[14px]"},Ne={class:"text-[12px] text-[#999]"},Se={class:"flex flex-col"},ze={class:"text-[13px]"},Re={class:"text-[13px] mt-[5px]"},Oe={class:"text-[13px]"},Ue={class:"flex flex-col"},$e=["onClick"],je=["title","onClick"],Be=["title","onClick"],Le={key:0},Ye={key:1},qe={key:0},Ie={key:1},Me={key:0},He={key:0,class:"text-[14px] h-[30px] leading-[30px] px-3 bg-[#fff0e5] text-[#ff7f5b]"},Ae={class:"mr-[5px]"},Ge={class:"mt-[16px] flex justify-end"},Ke=I({__name:"order",setup(Qe){const V=M(),k=H(),N=V.meta.title,S=y([]),z=y([]),R=y([]);(async()=>{S.value=await(await _e()).data,z.value=await(await ce()).data,R.value=await(await pe()).data})();const n=A({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{is_settlement:"",create_time:[]}}),D=y(),g=(c=1)=>{n.loading=!0,n.page=c,ue({page:n.page,limit:n.limit,...n.searchParam}).then(l=>{n.loading=!1,n.data=l.data.data.map(h=>{let u=0;return h.goods_list=[],h.shop_order.order_goods.forEach(b=>{u+=b.fenxiao_order_goods.length,b.fenxiao_order_goods.forEach((w,x)=>{let f=X(Object.assign(b,w));delete f.fenxiao_order_goods,f.goodsRowspan=x?0:b.fenxiao_order_goods.length,f.rowspan=0,h.goods_list.push(f)})}),h.goods_list[0].rowspan=u,h}),n.total=l.data.total}).catch(()=>{n.loading=!1})};g();const O=({row:c,column:l,rowIndex:h,columnIndex:u})=>u<2?[c.goodsRowspan,c.goodsRowspan?1:0]:u==2||u>6?[c.rowspan,c.rowspan?1:0]:[1,1],U=c=>{const l=k.resolve("/shop/order/detail?order_id="+c.order_id);window.open(l.href,"_blank")},$=c=>{const l=k.resolve({path:"/member/detail",query:{id:c}});window.open(l.href,"_blank")},j=c=>{c&&(c.resetFields(),g())},E=c=>{const l=k.resolve({path:"/shop_fenxiao/detail",query:{id:c.fenxiao_member_id}});window.open(l.href,"_blank")};return(c,l)=>{const h=Z,u=ee,b=te,w=ae,x=oe,f=se,P=le,m=ne,F=re,B=ie,L=de,Y=me;return _(),p("div",be,[t(P,{class:"card !border-none",shadow:"never"},{default:i(()=>[r("div",fe,[r("span",ge,a(o(N)),1)]),t(P,{class:"card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:i(()=>[t(f,{inline:!0,model:n.searchParam,ref_key:"searchFormRef",ref:D},{default:i(()=>[t(u,{label:o(s)("createTime"),prop:"create_time"},{default:i(()=>[t(h,{modelValue:n.searchParam.create_time,"onUpdate:modelValue":l[0]||(l[0]=d=>n.searchParam.create_time=d),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":o(s)("startDate"),"end-placeholder":o(s)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),t(u,{label:o(s)("orderStatus"),prop:"is_settlement"},{default:i(()=>[t(w,{modelValue:n.searchParam.is_settlement,"onUpdate:modelValue":l[1]||(l[1]=d=>n.searchParam.is_settlement=d),placeholder:o(s)("orderStatusPlaceholder"),clearable:""},{default:i(()=>[t(b,{label:"已结算",value:1}),t(b,{label:"待结算",value:0})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,null,{default:i(()=>[t(x,{type:"primary",onClick:l[2]||(l[2]=d=>g())},{default:i(()=>[C(a(o(s)("search")),1)]),_:1}),t(x,{onClick:l[3]||(l[3]=d=>j(D.value))},{default:i(()=>[C(a(o(s)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),r("div",null,[t(F,{size:"large",class:"table-top"},{default:i(()=>[t(m,{label:o(s)("orderGoods"),width:"350"},null,8,["label"]),t(m,{label:o(s)("goodsPriceNumber"),"min-width":"150"},null,8,["label"]),t(m,{label:o(s)("refundStatus"),"min-width":"100"},null,8,["label"]),t(m,{label:o(s)("buyInfo"),"min-width":"120"},null,8,["label"]),t(m,{label:o(s)("fenxiaoName"),"min-width":"120"},null,8,["label"]),t(m,{label:o(s)("fenxiaoLevel"),"min-width":"120"},null,8,["label"]),t(m,{label:o(s)("teamRate"),"min-width":"120"},null,8,["label"]),t(m,{label:o(s)("goodsFenxiaoPrice"),"min-width":"120",align:"right"},null,8,["label"]),t(m,{label:o(s)("orderStatus"),"min-width":"120"},null,8,["label"]),t(m,{label:o(s)("operation"),fixed:"right",align:"right","min-width":"120"},null,8,["label"])]),_:1}),G((_(),p("div",xe,[n.loading?v("",!0):(_(),p("div",ye,[n.data.length?(_(!0),p(K,{key:0},Q(n.data,(d,q)=>(_(),p("div",{key:q},[r("div",ve,[r("div",null,[r("span",null,a(o(s)("orderNo"))+"："+a(d.order_no),1),r("span",ke,a(o(s)("createTime"))+"："+a(d.create_time),1),d.pay?(_(),p("span",we,a(o(s)("payType"))+"："+a(d.pay.type_name),1)):v("",!0),r("span",Ce,a(o(s)("countPrice"))+"：￥"+a(d.commission_team),1)])]),t(F,{data:d.goods_list,size:"large","show-header":!1,"span-method":O,ref_for:!0,ref:"multipleTable"},{default:i(()=>[t(m,{align:"left",width:"350"},{default:i(({row:e})=>[r("div",De,[r("div",Ee,[e.goods_image_thumb_mid?(_(),p("img",{key:0,class:"w-[50px] h-[50px]",src:o(J)(e.goods_image_thumb_mid),alt:""},null,8,Pe)):(_(),p("img",Fe))]),r("div",Te,[r("p",Ve,a(e.goods_name),1),r("span",Ne,a(e.sku_name),1)])])]),_:1}),t(m,{"min-width":"150"},{default:i(({row:e})=>[r("div",Se,[r("span",ze,"￥"+a(e.goods_money),1),r("span",Re,a(e.num)+a(o(s)("price")),1)])]),_:1}),t(m,{"min-width":"100"},{default:i(({row:e})=>[r("span",Oe,a(e.status!=1&&e.status_name?e.status_name:"--"),1)]),_:1}),t(m,{"min-width":"120","class-name":"border-0 border-l-[1px] border-solid border-[var(--el-table-border-color)]"},{default:i(()=>[r("div",Ue,[r("span",{class:"text-[12px] text-primary cursor-pointer",onClick:e=>$(d.shop_order.member.member_id)},a(d.shop_order.member.nickname),9,$e)])]),_:2},1024),t(m,{"min-width":"120","class-name":"border-0 border-l-[1px] border-solid border-[var(--el-table-border-color)]"},{default:i(({row:e})=>[e.member.nickname?(_(),p("span",{key:0,title:e.member.nickname,class:"multi-hidden text-primary cursor-pointer",onClick:T=>E(e)},a(e.member.nickname),9,je)):(_(),p("span",{key:1,title:e.member.nickname,class:"multi-hidden text-primary cursor-pointer",onClick:T=>E(e)},a(e.member.username),9,Be))]),_:1}),t(m,{"min-width":"120"},{default:i(({row:e})=>[e.commission_level?(_(),p("span",Le,a(e.commission_level)+"级",1)):(_(),p("span",Ye,"--"))]),_:1}),t(m,{"min-width":"120"},{default:i(({row:e})=>[e.commission_rate||e.team_flat_rate?(_(),p("span",qe,a(e.team_flat_rate>0?e.team_flat_rate+"%(平级分红比率)":e.commission_rate+"%"),1)):(_(),p("span",Ie,"--"))]),_:1}),t(m,{"min-width":"120",align:"right"},{default:i(({row:e})=>[e.commission?(_(),p("span",Me,"￥"+a(e.commission||"0.00"),1)):v("",!0)]),_:1}),t(m,{"min-width":"120","class-name":"border-0 border-l-[1px] border-solid border-[var(--el-table-border-color)]"},{default:i(({row:e})=>[r("span",null,a(e.is_settlement?"已结算":"待结算"),1)]),_:1}),t(m,{align:"right","min-width":"120"},{default:i(({row:e})=>[t(x,{type:"primary",link:"",onClick:T=>U(e)},{default:i(()=>[C(a(o(s)("orderDetail")),1)]),_:2},1032,["onClick"])]),_:1})]),_:2},1032,["data"]),d.shop_remark?(_(),p("div",He,[r("span",Ae,a(o(s)("notes"))+"：",1),r("span",null,a(d.shop_remark),1)])):v("",!0)]))),128)):(_(),W(B,{key:1,"image-size":1,description:o(s)("emptyData")},null,8,["description"]))]))])),[[Y,n.loading]]),r("div",Ge,[t(L,{"current-page":n.page,"onUpdate:current-page":l[4]||(l[4]=d=>n.page=d),"page-size":n.limit,"onUpdate:page-size":l[5]||(l[5]=d=>n.limit=d),layout:"total, sizes, prev, pager, next, jumper",total:n.total,onSizeChange:l[6]||(l[6]=d=>g()),onCurrentChange:g},null,8,["current-page","page-size","total"])])])]),_:1})])}}});const xt=he(Ke,[["__scopeId","data-v-779779fe"]]);export{xt as default};
