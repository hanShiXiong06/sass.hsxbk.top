import{d as te,r as u,x as le,n as re,h as d,c,a as v,e as t,w as l,i as p,u as a,q as n,F as h,Q as w,s as m,t as y,P as oe,aq as x,B as D,_ as ne,E as se,ak as de,aI as ie,K as ue,J as me,bN as ce,L as pe,a0 as _e,aa as fe,ac as ve,T as be,a1 as he,U as ye}from"./index-17984968.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                *//* empty css                       *//* empty css                  */import"./el-form-item-4ed993c7.js";import{u as L}from"./dict-1b2c14ee.js";import{j as ke,s as ge,k as we,l as De,m as Ve,n as Pe,o as xe,c as Le}from"./order-3df1a971.js";import{_ as Ce}from"./order-edit.vue_vue_type_style_index_0_lang-c1fef246.js";import{_ as Ee}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                         *//* empty css                  *//* empty css                   *//* empty css                */const Fe={class:"main-container"},Te={class:"mt-[10px]"},Oe={class:"mt-[16px] flex justify-end"},Ue={class:"mt-2"},Be=["src"],Ie=te({__name:"order",setup(Se){const V=u(null),M=()=>{V.value.contentWindow&&V.value.contentWindow.history.back()},z=()=>{V.value.contentWindow&&V.value.contentWindow.location.reload()},C=u(!1),W=()=>{C.value=!0},U=u();(async()=>{U.value=await(await ke()).msg})(),le().meta.title;const N=u([]),B=u([]),R=async i=>{await ge(i),f()},Y=async i=>{await we({id:i}),f()};(async()=>{N.value=await(await De()).data,B.value=await(await Ve()).data})();let r=re({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{member_id:"",order_from:"",order_id:"",is_send:"",order_status:"",refund_status:"",remark:"",create_time:[]}});const I=u();u([]);const E=u([]);(async()=>{E.value=await(await L("jhkd_is_send")).data.dictionary})();const q=u([]);(async()=>{q.value=await(await L("jhkd_is_pick")).data.dictionary})();const F=u([]);(async()=>{F.value=await(await L("jhkd_order_status")).data.dictionary})();const T=u([]);(async()=>{T.value=await(await L("jhkd_refund_status")).data.dictionary})();const f=(i=1)=>{r.loading=!0,r.page=i,Pe({page:r.page,limit:r.limit,...r.searchParam}).then(o=>{r.loading=!1,r.data=o.data.data,r.total=o.data.total}).catch(()=>{r.loading=!1})};f();const O=u(null),J=i=>{O.value.setFormData(i),O.value.showDialog=!0},K=i=>{ne.confirm(n("orderDeleteTips"),n("warning"),{confirmButtonText:n("confirm"),cancelButtonText:n("cancel"),type:"warning"}).then(()=>{xe(i).then(()=>{f()}).catch(()=>{})})},Q=u([]);(async()=>{Q.value=await(await Le({})).data})();const A=i=>{i&&(i.resetFields(),f())};return(i,o)=>{const k=se,g=de,P=ie,b=ue,S=me,G=ce,H=pe,$=_e,_=fe,X=ve,Z=be,ee=he,ae=ye;return d(),c(h,null,[v("div",Fe,[t($,{class:"box-card !border-none",shadow:"never"},{default:l(()=>[t(k,{type:"primary",onClick:o[0]||(o[0]=e=>W())},{default:l(()=>[p("新增订单")]),_:1}),t($,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:l(()=>[t(H,{inline:!0,model:a(r).searchParam,ref_key:"searchFormRef",ref:I},{default:l(()=>[t(b,{label:a(n)("orderFrom"),prop:"order_from"},{default:l(()=>[t(P,{modelValue:a(r).searchParam.order_from,"onUpdate:modelValue":o[1]||(o[1]=e=>a(r).searchParam.order_from=e),clearable:"",class:"input-item"},{default:l(()=>[(d(!0),c(h,null,w(B.value,(e,s)=>(d(),m(g,{key:s,label:e,value:s},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(b,{label:"订单号",prop:"order_id"},{default:l(()=>[t(S,{modelValue:a(r).searchParam.order_id,"onUpdate:modelValue":o[2]||(o[2]=e=>a(r).searchParam.order_id=e),placeholder:"请输入订单号"},null,8,["modelValue"])]),_:1}),t(b,{label:"发单状态",prop:"is_send"},{default:l(()=>[t(P,{class:"w-[280px]",modelValue:a(r).searchParam.is_send,"onUpdate:modelValue":o[3]||(o[3]=e=>a(r).searchParam.is_send=e),clearable:"",placeholder:a(n)("isSendPlaceholder")},{default:l(()=>[t(g,{label:"全部",value:""}),(d(!0),c(h,null,w(E.value,(e,s)=>(d(),m(g,{key:s,label:e.name,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),t(b,{label:a(n)("orderStatus"),prop:"order_status"},{default:l(()=>[t(P,{class:"w-[280px]",modelValue:a(r).searchParam.order_status,"onUpdate:modelValue":o[4]||(o[4]=e=>a(r).searchParam.order_status=e),clearable:"",placeholder:a(n)("orderStatusPlaceholder")},{default:l(()=>[t(g,{label:"全部",value:""}),(d(!0),c(h,null,w(F.value,(e,s)=>(d(),m(g,{key:s,label:e.name,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(b,{label:a(n)("refundStatus"),prop:"refund_status"},{default:l(()=>[t(P,{class:"w-[280px]",modelValue:a(r).searchParam.refund_status,"onUpdate:modelValue":o[5]||(o[5]=e=>a(r).searchParam.refund_status=e),clearable:"",placeholder:a(n)("refundStatusPlaceholder")},{default:l(()=>[t(g,{label:"全部",value:""}),(d(!0),c(h,null,w(T.value,(e,s)=>(d(),m(g,{key:s,label:e.name,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(b,{label:a(n)("remark"),prop:"remark"},{default:l(()=>[t(S,{modelValue:a(r).searchParam.remark,"onUpdate:modelValue":o[6]||(o[6]=e=>a(r).searchParam.remark=e),placeholder:a(n)("remarkPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(b,{label:a(n)("createTime"),prop:"create_time"},{default:l(()=>[t(G,{modelValue:a(r).searchParam.create_time,"onUpdate:modelValue":o[7]||(o[7]=e=>a(r).searchParam.create_time=e),type:"datetimerange",format:"YYYY-MM-DD hh:mm:ss","start-placeholder":a(n)("startDate"),"end-placeholder":a(n)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),t(b,null,{default:l(()=>[t(k,{type:"primary",onClick:o[8]||(o[8]=e=>f())},{default:l(()=>[p(y(a(n)("search")),1)]),_:1}),t(k,{onClick:o[9]||(o[9]=e=>A(I.value))},{default:l(()=>[p(y(a(n)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),v("div",Te,[oe((d(),m(X,{data:a(r).data,size:"large"},{empty:l(()=>[v("span",null,y(a(r).loading?"":a(n)("emptyData")),1)]),default:l(()=>[t(_,{prop:"order_id",label:"订单号","min-width":"160","show-overflow-tooltip":!0}),t(_,{prop:"order_from",label:a(n)("orderFrom"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),t(_,{prop:"member_id_name",label:a(n)("memberId"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),t(_,{prop:"order_money",label:a(n)("orderMoney"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),t(_,{prop:"order_discount_money",label:"优惠金额","min-width":"120","show-overflow-tooltip":!0}),t(_,{label:"发单状态","min-width":"180",align:"center","show-overflow-tooltip":!0},{default:l(({row:e})=>[(d(!0),c(h,null,w(E.value,(s,j)=>(d(),c("div",null,[s.value==e.is_send?(d(),m(a(x),{key:0},{default:l(()=>[p(y(s.name),1)]),_:2},1024)):D("",!0)]))),256))]),_:1}),t(_,{label:a(n)("orderStatus"),"min-width":"180",align:"center","show-overflow-tooltip":!0},{default:l(({row:e})=>[(d(!0),c(h,null,w(F.value,(s,j)=>(d(),c("div",null,[s.value==e.order_status&&e.order_status!=-1?(d(),m(a(x),{key:0},{default:l(()=>[p(y(s.name),1)]),_:2},1024)):D("",!0),s.value==e.order_status&&e.order_status==-1?(d(),m(a(x),{key:1,type:"warning"},{default:l(()=>[p(y(s.name),1)]),_:2},1024)):D("",!0)]))),256))]),_:1},8,["label"]),t(_,{label:a(n)("refundStatus"),"min-width":"180",align:"center","show-overflow-tooltip":!0},{default:l(({row:e})=>[(d(!0),c(h,null,w(T.value,(s,j)=>(d(),c("div",null,[s.value==e.refund_status?(d(),m(a(x),{key:0},{default:l(()=>[p(y(s.name),1)]),_:2},1024)):D("",!0)]))),256))]),_:1},8,["label"]),t(_,{prop:"remark",label:a(n)("remark"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),t(_,{label:a(n)("operation"),fixed:"right","min-width":"220"},{default:l(({row:e})=>[t(k,{type:"primary",link:"",onClick:s=>J(e)},{default:l(()=>[p("详情")]),_:2},1032,["onClick"]),e.order_status==-1||e.order_status==0?(d(),m(k,{key:0,type:"primary",link:"",onClick:s=>K(e.id)},{default:l(()=>[p(y(a(n)("delete")),1)]),_:2},1032,["onClick"])):D("",!0),e.order_status==1&&e.is_send==0?(d(),m(k,{key:1,type:"primary",link:"",onClick:s=>R(e.order_id)},{default:l(()=>[p("发单")]),_:2},1032,["onClick"])):D("",!0),e.order_status==1?(d(),m(k,{key:2,type:"primary",link:"",onClick:s=>Y(e.id)},{default:l(()=>[p("取消")]),_:2},1032,["onClick"])):D("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[ae,a(r).loading]]),v("div",Oe,[t(Z,{"current-page":a(r).page,"onUpdate:current-page":o[10]||(o[10]=e=>a(r).page=e),"page-size":a(r).limit,"onUpdate:page-size":o[11]||(o[11]=e=>a(r).limit=e),layout:"total, sizes, prev, pager, next, jumper",total:a(r).total,onSizeChange:o[12]||(o[12]=e=>f()),onCurrentChange:f},null,8,["current-page","page-size","total"])])]),t(Ce,{ref_key:"editOrderDialog",ref:O,onComplete:f},null,512)]),_:1})]),t(ee,{modelValue:C.value,"onUpdate:modelValue":o[13]||(o[13]=e=>C.value=e),title:"使用移动端账号登录",width:"420",height:"740","align-center":""},{default:l(()=>[v("div",{class:"mt-[-24px]"},[v("button",{onClick:M,class:"mr-2"},"返回"),v("button",{onClick:z},"刷新")]),v("div",Ue,[v("iframe",{ref_key:"myIframeRef",ref:V,src:U.value,width:"375",height:"667"},null,8,Be)])]),_:1},8,["modelValue"])],64)}}});const ya=Ee(Ie,[["__scopeId","data-v-c783a821"]]);export{ya as default};
