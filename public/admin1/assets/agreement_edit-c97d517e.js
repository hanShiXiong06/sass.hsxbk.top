import{d as R,x as N,f as S,r as y,c3 as T,n as U,l as $,q as n,h as k,c as j,a as l,u as o,t as p,P as q,s as I,w as m,e as s,i as x,c4 as A,c5 as L,J as M,K as O,L as z,a0 as J,E as K,U as G}from"./index-17984968.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                */import{_ as H}from"./index.vue_vue_type_script_setup_true_lang-a8924ef7.js";import"./el-form-item-4ed993c7.js";/* empty css                 */import"./index.vue_vue_type_style_index_0_lang-c5bcb8a9.js";/* empty css                  *//* empty css                   */import"./attachment-a816d3ef.js";import"./index.vue_vue_type_script_setup_true_lang-8693344a.js";/* empty css                        *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                      *//* empty css                    *//* empty css                 */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css               *//* empty css               *//* empty css                    *//* empty css                         */import"./index.vue_vue_type_script_setup_true_lang-5615c67a.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-8e50df98.js";/* empty css                */import"./_plugin-vue_export-helper-c27b6911.js";const Q={class:"main-container"},W={class:"detail-head"},X=l("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1),Y={class:"ml-[1px]"},Z=l("span",{class:"adorn"},"|",-1),ee={class:"right"},te={class:"fixed-footer-wrap"},oe={class:"fixed-footer"},qe=R({__name:"agreement_edit",setup(ae){const u=N(),_=S(),f=u.query.key||"",i=y(!1),V=T(),w=u.meta.title,g={agreement_key:"",content:"",title:"",agreement_key_name:""},t=U({...g});i.value=!0,f&&(async(d="")=>{Object.assign(t,g);const e=await(await A(d)).data;Object.keys(t).forEach(a=>{e[a]!=null&&(t[a]=e[a])}),i.value=!1})(f);const v=y(),E=$(()=>({title:[{required:!0,message:n("titlePlaceholder"),trigger:"blur"}]})),C=async d=>{i.value||!d||await d.validate(async e=>{if(e){i.value=!0;const a=t;a.key=t.agreement_key,L(a).then(c=>{i.value=!1,b()}).catch(()=>{i.value=!1})}})},b=()=>{V.removeTab(u.path),_.push({path:"/setting/agreement"})};return(d,e)=>{const a=M,c=O,D=H,B=z,F=J,h=K,P=G;return k(),j("div",Q,[l("div",W,[l("div",{class:"left",onClick:e[0]||(e[0]=r=>o(_).push({path:"/setting/agreement"}))},[X,l("span",Y,p(o(n)("returnToPreviousPage")),1)]),Z,l("span",ee,p(o(w)),1)]),q((k(),I(F,{class:"box-card !border-none",shadow:"never"},{default:m(()=>[s(B,{model:t,"label-width":"90px",ref_key:"formRef",ref:v,rules:o(E),class:"page-form"},{default:m(()=>[s(c,{label:o(n)("type")},{default:m(()=>[s(a,{modelValue:t.agreement_key_name,"onUpdate:modelValue":e[1]||(e[1]=r=>t.agreement_key_name=r),modelModifiers:{trim:!0},readonly:"",class:"input-width"},null,8,["modelValue"])]),_:1},8,["label"]),s(c,{label:o(n)("title"),prop:"title"},{default:m(()=>[s(a,{modelValue:t.title,"onUpdate:modelValue":e[2]||(e[2]=r=>t.title=r),modelModifiers:{trim:!0},clearable:"",placeholder:o(n)("titlePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(c,{label:o(n)("content")},{default:m(()=>[s(D,{modelValue:t.content,"onUpdate:modelValue":e[3]||(e[3]=r=>t.content=r)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1})),[[P,i.value]]),l("div",te,[l("div",oe,[s(h,{type:"primary",onClick:e[4]||(e[4]=r=>C(v.value))},{default:m(()=>[x(p(o(n)("save")),1)]),_:1}),s(h,{onClick:e[5]||(e[5]=r=>b())},{default:m(()=>[x(p(o(n)("cancel")),1)]),_:1})])])])}}});export{qe as default};
