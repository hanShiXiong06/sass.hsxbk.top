import{d as Ie,f as Le,x as Ue,r as b,n as T,Y as Be,h as c,c as x,e as n,w as r,a as i,t as p,u as s,i as m,q as t,F as z,Q as F,s as v,P as V,c6 as I,b4 as L,B as C,A as Re,_ as U,R as P,av as De,bs as Oe,E as ze,J as Fe,K as Me,bM as Ae,ak as Ke,aI as je,L as qe,a0 as Xe,aD as Ye,aE as He,aB as Je,aa as Qe,I as We,aq as Ze,X as ea,ac as aa,T as ta,U as oa,p as la,g as sa}from"./index-17984968.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                *//* empty css                 *//* empty css                        *//* empty css                        *//* empty css                    *//* empty css                *//* empty css                *//* empty css                          *//* empty css                 */import"./el-form-item-4ed993c7.js";/* empty css                  */import{_ as ne}from"./goods_default-664bb559.js";import na from"./goods-member-price-popup-0bbf7941.js";import ra from"./goods-stock-edit-popup-b5e26498.js";import ia from"./goods-price-edit-popup-279190d4.js";import{_ as da}from"./goods-spread-popup.vue_vue_type_script_setup_true_lang-50dbd02e.js";import{g as pa,b as ca,S as ua,T as ma,U as M,V as se,W as _a,X as ga,Y as ha}from"./goods-e571a7e7.js";import{A as fa}from"./member-0ccc6229.js";import{_ as ba}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                  *//* empty css                   *//* empty css                       */import"./browser-a1ac24ac.js";const A=w=>(la("data-v-406bfbb3"),w=w(),sa(),w),va={class:"main-container"},ya={class:"flex justify-between items-center"},Pa={class:"text-page-title"},ka={class:"region-input"},xa=["placeholder"],Ca=A(()=>i("span",{class:"separator"},"-",-1)),Ea=["placeholder"],Ta={class:"region-input"},Va=["placeholder"],wa=A(()=>i("span",{class:"separator"},"-",-1)),Sa=["placeholder"],$a={class:"mt-[10px]"},Na={class:"mb-[10px] flex items-center"},Ga=["title"],Ia=["onClick"],La={class:"min-w-[70px] h-[70px] flex items-center justify-center"},Ua=A(()=>i("div",{class:"image-slot"},[i("img",{class:"w-[70px] h-[70px]",src:ne})],-1)),Ba={key:1,class:"w-[70px] h-[70px]",src:ne,fit:"contain"},Ra={class:"ml-2"},Da=["title"],Oa={class:"text-[12px] multi-hidden"},za={key:1,class:"tag text-[12px]"},Fa={class:"text-primary text-[12px]"},Ma=["title"],Aa=["onClick"],Ka=["onClick"],ja={key:0},qa={key:1},Xa={class:"mt-[16px] flex justify-end"},Ya=Ie({__name:"list",setup(w){const S=Le(),re=Ue().meta.title,h=b(!1),o=T({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{goods_name:"",goods_category:[],goods_type:"",brand_id:"",label_ids:"",start_sale_num:"",end_sale_num:"",start_price:"",end_price:"",status:"1",order:"",sort:"",sku_no:""}}),K=b(),E={number:/^\d{0,10}$/,digit:/^\d{0,10}(.?\d{0,2})$/},B=T([]),j=T([]),q=T([]),X=T([]);(()=>{pa().then(l=>{const a=l.data;if(a){const d=[];a.forEach(y=>{const g=[];y.child_list&&(g.push({value:y.category_id,label:"全部"}),y.child_list.forEach(G=>{g.push({value:G.category_id,label:G.category_name})})),d.push({value:y.category_id,label:y.category_name,children:g})}),B.splice(0,B.length,...d)}}),ca().then(l=>{const a=l.data;if(a)for(const d in a)j.push(a[d])}),ua({}).then(l=>{const a=l.data;a&&q.push(...a)}),ma({}).then(l=>{const a=l.data;a&&X.push(...a)})})();const ie=(l,a)=>{o.searchParam.status=l.props.name,u()},$=b(),N=b(!1),de=l=>{N.value=!1,Y.value.toggleAllSelection()},Y=b(),k=b([]),pe=l=>{k.value=l,$.value=!1,k.value.length>0&&k.value.length<o.data.length?N.value=!0:N.value=!1,k.value.length==o.data.length&&($.value=!0)},ce=l=>{const a=S.resolve({path:"/preview/wap",query:{page:`/addon/shop/pages/goods/detail?goods_id=${l.goods_id}`}});window.open(a.href)},ue=l=>{let a="";l.order=="ascending"?a="asc":l.order=="descending"&&(a="desc"),a&&(o.searchParam.order=l.prop,o.searchParam.sort=a),u()},H=(l,a)=>{a?M({goods_ids:l.goods_id,status:a}).then(d=>{u()}):U.confirm(t("statusChangeTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{M({goods_ids:l.goods_id,status:a}).then(d=>{u()})})},J=l=>{if(k.value.length==0){P({type:"warning",message:`${t("batchEmptySelectedGoodsTips")}`});return}const a=[];k.value.forEach(d=>{a.push(d.goods_id)}),M({goods_ids:a,status:l}).then(d=>{u()})},me=()=>{if(k.value.length==0){P({type:"warning",message:`${t("batchEmptySelectedGoodsTips")}`});return}U.confirm(t("batchGoodsDeleteTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{if(h.value)return;h.value=!0;const l=[];k.value.forEach(a=>{l.push(a.goods_id)}),se({goods_ids:l}).then(()=>{u(),h.value=!1}).catch(()=>{h.value=!1})})},_e=De((l,a)=>{if(isNaN(l)||!E.number.test(l)){P({type:"warning",message:`${t("sortTips")}`});return}_a({goods_id:a.goods_id,sort:l}).then(d=>{})}),u=(l=1)=>{if(o.searchParam.start_sale_num&&!E.digit.test(o.searchParam.start_sale_num)){P({type:"warning",message:`${t("startSaleNumTips")}`});return}if(o.searchParam.end_sale_num&&!E.digit.test(o.searchParam.end_sale_num)){P({type:"warning",message:`${t("endSaleNumTips")}`});return}if(Number(o.searchParam.start_sale_num)>Number(o.searchParam.end_sale_num)){P({type:"warning",message:`${t("shopSaleNumTips")}`});return}if(o.searchParam.start_price&&!E.digit.test(o.searchParam.start_price)){P({type:"warning",message:`${t("startPriceTips")}`});return}if(o.searchParam.end_price&&!E.digit.test(o.searchParam.end_price)){P({type:"warning",message:`${t("endPriceTips")}`});return}if(Number(o.searchParam.start_price)>Number(o.searchParam.end_price)){P({type:"warning",message:`${t("shopPriceTips")}`});return}o.loading=!0,o.page=l;const a=Oe(o.searchParam);ga({page:o.page,limit:o.limit,...a}).then(d=>{o.loading=!1,o.data=d.data.data,o.total=d.data.total}).catch(()=>{o.loading=!1})};u();const ge=()=>{S.push("/shop/goods/real_edit")},he=l=>{let a=S.resolve({path:l.goods_edit_path,query:{goods_id:l.goods_id}});window.open(a.href)},Q=b(null),fe=l=>{Q.value.show(l)},W=b(null),be=l=>{W.value.show(l)},Z=b(null),ve=l=>{Z.value.show(l)};let ee=b([]);(()=>{fa().then(l=>{ee.value=l.data?l.data:[]})})();const ae=b(null),ye=l=>{ae.value.show(l,ee.value)},Pe=l=>{S.push("/shop_fenxiao/management/goods_config?goods_id="+l.goods_id)},ke=l=>{U.confirm(t("goodsCopyTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{h.value||(h.value=!0,ha({goods_id:l.goods_id}).then(a=>{a.code==1&&u(),h.value=!1}).catch(a=>{h.value=!1}))})},xe=l=>{U.confirm(t("goodsDeleteTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{h.value||(h.value=!0,se({goods_ids:l}).then(()=>{u(),h.value=!1}).catch(()=>{h.value=!1}))})},Ce=l=>{l&&(l.resetFields(),o.searchParam.start_price="",o.searchParam.end_price="",o.searchParam.start_sale_num="",o.searchParam.end_sale_num="",o.searchParam.sku_no="",u())};return(l,a)=>{const d=ze,y=Fe,g=Me,G=Ae,R=Ke,D=je,Ee=qe,te=Xe,O=Ye,Te=He,Ve=Je,f=Qe,we=We,Se=Ze,oe=Be("EditPen"),le=ea,$e=aa,Ne=ta,Ge=oa;return c(),x("div",va,[n(te,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[i("div",ya,[i("span",Pa,p(s(re)),1),n(d,{type:"primary",onClick:ge},{default:r(()=>[m(p(s(t)("addGoods")),1)]),_:1})]),n(te,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:r(()=>[n(Ee,{inline:!0,model:o.searchParam,ref_key:"searchFormRef",ref:K},{default:r(()=>[n(g,{label:s(t)("商品串号"),prop:"goods_name"},{default:r(()=>[n(y,{modelValue:o.searchParam.sku_no,"onUpdate:modelValue":a[0]||(a[0]=e=>o.searchParam.sku_no=e),modelModifiers:{trim:!0},placeholder:s(t)("请输入商品串号_id"),maxlength:"60",clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(g,{label:s(t)("goodsName"),prop:"goods_name"},{default:r(()=>[n(y,{modelValue:o.searchParam.goods_name,"onUpdate:modelValue":a[1]||(a[1]=e=>o.searchParam.goods_name=e),modelModifiers:{trim:!0},placeholder:s(t)("goodsNamePlaceholder"),maxlength:"60"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(g,{label:s(t)("goodsCategory"),prop:"goods_category"},{default:r(()=>[n(G,{modelValue:o.searchParam.goods_category,"onUpdate:modelValue":a[2]||(a[2]=e=>o.searchParam.goods_category=e),options:B,placeholder:s(t)("goodsCategoryPlaceholder"),clearable:"",props:{value:"value",label:"label",emitPath:!1}},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"]),n(g,{label:s(t)("goodsType"),prop:"goods_type"},{default:r(()=>[n(D,{modelValue:o.searchParam.goods_type,"onUpdate:modelValue":a[3]||(a[3]=e=>o.searchParam.goods_type=e),placeholder:s(t)("goodsTypePlaceholder"),clearable:""},{default:r(()=>[(c(!0),x(z,null,F(j,e=>(c(),v(R,{key:e.type,label:e.name,value:e.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(g,{label:s(t)("brand"),prop:"brand_id"},{default:r(()=>[n(D,{modelValue:o.searchParam.brand_id,"onUpdate:modelValue":a[4]||(a[4]=e=>o.searchParam.brand_id=e),placeholder:s(t)("brandPlaceholder"),clearable:""},{default:r(()=>[(c(!0),x(z,null,F(q,e=>(c(),v(R,{key:e.brand_id,label:e.brand_name,value:e.brand_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(g,{label:s(t)("labelIds"),prop:"label_ids"},{default:r(()=>[n(D,{modelValue:o.searchParam.label_ids,"onUpdate:modelValue":a[5]||(a[5]=e=>o.searchParam.label_ids=e),placeholder:s(t)("labelIdsPlaceholder"),clearable:""},{default:r(()=>[(c(!0),x(z,null,F(X,e=>(c(),v(R,{key:e.label_id,label:e.label_name,value:e.label_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(g,{label:s(t)("saleNum"),prop:"sale_num"},{default:r(()=>[i("div",ka,[V(i("input",{type:"text",placeholder:s(t)("startSaleNumPlaceholder"),maxlength:"10","onUpdate:modelValue":a[6]||(a[6]=e=>o.searchParam.start_sale_num=e),onKeyup:a[7]||(a[7]=e=>s(I)(e))},null,40,xa),[[L,o.searchParam.start_sale_num,void 0,{trim:!0}]]),Ca,V(i("input",{type:"text",placeholder:s(t)("endSaleNumPlaceholder"),maxlength:"10","onUpdate:modelValue":a[8]||(a[8]=e=>o.searchParam.end_sale_num=e),onKeyup:a[9]||(a[9]=e=>s(I)(e))},null,40,Ea),[[L,o.searchParam.end_sale_num,void 0,{trim:!0}]])])]),_:1},8,["label"]),n(g,{label:s(t)("skuPrice"),prop:"sku_price"},{default:r(()=>[i("div",Ta,[V(i("input",{type:"text",placeholder:s(t)("startPricePlaceholder"),maxlength:"10","onUpdate:modelValue":a[10]||(a[10]=e=>o.searchParam.start_price=e),onKeyup:a[11]||(a[11]=e=>s(I)(e))},null,40,Va),[[L,o.searchParam.start_price,void 0,{trim:!0}]]),wa,V(i("input",{type:"text",placeholder:s(t)("endPricePlaceholder"),maxlength:"10","onUpdate:modelValue":a[12]||(a[12]=e=>o.searchParam.end_price=e),onKeyup:a[13]||(a[13]=e=>s(I)(e))},null,40,Sa),[[L,o.searchParam.end_price,void 0,{trim:!0}]])])]),_:1},8,["label"]),n(g,null,{default:r(()=>[n(d,{type:"primary",onClick:a[14]||(a[14]=e=>u())},{default:r(()=>[m(p(s(t)("search")),1)]),_:1}),n(d,{onClick:a[15]||(a[15]=e=>Ce(K.value))},{default:r(()=>[m(p(s(t)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),i("div",$a,[n(Te,{modelValue:o.searchParam.status,"onUpdate:modelValue":a[16]||(a[16]=e=>o.searchParam.status=e),class:"goods-tabs",onTabClick:ie},{default:r(()=>[n(O,{label:s(t)("statusOn"),name:"1"},null,8,["label"]),n(O,{label:s(t)("statusOff"),name:"0"},null,8,["label"]),n(O,{label:s(t)("statusAll"),name:""},null,8,["label"])]),_:1},8,["modelValue"]),i("div",Na,[n(Ve,{modelValue:$.value,"onUpdate:modelValue":a[17]||(a[17]=e=>$.value=e),size:"large",class:"px-[14px]",onChange:de,indeterminate:N.value},null,8,["modelValue","indeterminate"]),o.searchParam.status!="1"?(c(),v(d,{key:0,onClick:a[18]||(a[18]=e=>J(1)),size:"small"},{default:r(()=>[m(p(s(t)("batchOnGoods")),1)]),_:1})):C("",!0),o.searchParam.status!="0"?(c(),v(d,{key:1,onClick:a[19]||(a[19]=e=>J(0)),size:"small"},{default:r(()=>[m(p(s(t)("batchOffGoods")),1)]),_:1})):C("",!0),n(d,{onClick:me,size:"small"},{default:r(()=>[m(p(s(t)("batchDeleteGoods")),1)]),_:1})]),V((c(),v($e,{data:o.data,size:"large",ref_key:"goodsListTableRef",ref:Y,onSortChange:ue,onSelectionChange:pe},{empty:r(()=>[i("span",null,p(o.loading?"":s(t)("emptyData")),1)]),default:r(()=>[n(f,{type:"selection",width:"55"}),n(f,{prop:"sku_no",label:s(t)("id"),"min-width":"70",sortable:"custom"},{default:r(({row:e})=>[i("span",{title:e.goods_id},p(e.goods_id),9,Ga)]),_:1},8,["label"]),n(f,{prop:"goods_id",label:s(t)("goodsInfo"),"min-width":"300"},{default:r(({row:e})=>[i("div",{class:"flex items-center cursor-pointer",onClick:_=>ce(e)},[i("div",La,[e.goods_cover_thumb_small?(c(),v(we,{key:0,class:"w-[70px] h-[70px]",src:s(Re)(e.goods_cover_thumb_small),fit:"contain"},{error:r(()=>[Ua]),_:2},1032,["src"])):(c(),x("img",Ba))]),i("div",Ra,[i("span",{title:e.goods_name,class:"multi-hidden"},p(e.goods_name),9,Da),i("view",Oa,p(e.sub_title),1),i("view",null,[e.brand_name?(c(),v(Se,{key:0,type:"success",size:"small"},{default:r(()=>[m(p(e.brand_name),1)]),_:2},1024)):C("",!0),e.brand_name?(c(),x("span",za," | ")):C("",!0),i("span",Fa,p(e.goods_type_name),1)])])],8,Ia)]),_:1},8,["label"]),n(f,{prop:"sku_no",label:s(t)("串号"),"min-width":"130",sortable:"custom"},{default:r(({row:e})=>[i("span",{title:e.sku_no},p(e.goodsSku.sku_no),9,Ma)]),_:1},8,["label"]),n(f,{prop:"price",label:s(t)("skuPrice"),"min-width":"120",align:"right",sortable:"custom"},{default:r(({row:e})=>[i("div",{class:"cursor-pointer price-wrap",onClick:_=>fe(e)},[i("span",null,"￥"+p(e.goodsSku.price),1),n(le,{class:"icon-wrap ml-[5px] invisible"},{default:r(()=>[n(oe)]),_:1})],8,Aa)]),_:1},8,["label"]),n(f,{prop:"stock",label:s(t)("stock"),"min-width":"120",sortable:"custom"},{default:r(({row:e})=>[i("div",{class:"cursor-pointer stock-wrap",onClick:_=>be(e)},[i("span",null,p(e.stock),1),n(le,{class:"icon-wrap ml-[5px] invisible"},{default:r(()=>[n(oe)]),_:1})],8,Ka)]),_:1},8,["label"]),n(f,{prop:"sale_num",label:s(t)("saleNum"),"min-width":"100",sortable:"custom"},null,8,["label"]),n(f,{prop:"status",label:s(t)("status"),"min-width":"100"},{default:r(({row:e})=>[e.status==1?(c(),x("div",ja,p(s(t)("statusOn")),1)):C("",!0),e.status==0?(c(),x("div",qa,p(s(t)("statusOff")),1)):C("",!0)]),_:1},8,["label"]),n(f,{prop:"sort",label:s(t)("sort"),"min-width":"120",sortable:"custom"},{default:r(({row:e})=>[n(y,{modelValue:e.sort,"onUpdate:modelValue":_=>e.sort=_,class:"input-width-sort",maxlength:"10",onInput:_=>s(_e)(_,e)},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1},8,["label"]),n(f,{prop:"create_time",label:s(t)("createTime"),"min-width":"150",sortable:"custom"},{default:r(({row:e})=>[i("div",null,p(e.create_time),1)]),_:1},8,["label"]),n(f,{label:s(t)("operation"),fixed:"right",align:"right","min-width":"120"},{default:r(({row:e})=>[n(d,{type:"primary",link:"",onClick:_=>he(e)},{default:r(()=>[m(p(s(t)("edit")),1)]),_:2},1032,["onClick"]),n(d,{type:"primary",link:"",onClick:_=>ve(e)},{default:r(()=>[m(p(s(t)("spreadGoods")),1)]),_:2},1032,["onClick"]),n(d,{type:"primary",link:"",onClick:_=>ye(e)},{default:r(()=>[m(p(s(t)("memberPrice")),1)]),_:2},1032,["onClick"]),n(d,{type:"primary",link:"",onClick:_=>Pe(e)},{default:r(()=>[m(p(s(t)("分销价格")),1)]),_:2},1032,["onClick"]),e.status==1?(c(),v(d,{key:0,type:"primary",link:"",onClick:_=>H(e,0)},{default:r(()=>[m(p(s(t)("statusActionOff")),1)]),_:2},1032,["onClick"])):(c(),v(d,{key:1,type:"primary",link:"",onClick:_=>H(e,1)},{default:r(()=>[m(p(s(t)("statusActionOn")),1)]),_:2},1032,["onClick"])),n(d,{type:"primary",link:"",onClick:_=>ke(e)},{default:r(()=>[m(p(s(t)("copyGoods")),1)]),_:2},1032,["onClick"]),n(d,{type:"primary",link:"",onClick:_=>xe(e.goods_id)},{default:r(()=>[m(p(s(t)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[Ge,o.loading]]),i("div",Xa,[n(Ne,{"current-page":o.page,"onUpdate:current-page":a[20]||(a[20]=e=>o.page=e),"page-size":o.limit,"onUpdate:page-size":a[21]||(a[21]=e=>o.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:o.total,onSizeChange:a[22]||(a[22]=e=>u()),onCurrentChange:u},null,8,["current-page","page-size","total"])])])]),_:1}),n(ra,{ref_key:"goodsStockEditPopupRef",ref:W,onLoad:u},null,512),n(ia,{ref_key:"goodsPriceEditPopupRef",ref:Q,onLoad:u},null,512),n(da,{ref_key:"goodsSpreadPopupRef",ref:Z},null,512),n(na,{ref_key:"memberPricePopupRef",ref:ae,onLoad:u},null,512)])}}});const It=ba(Ya,[["__scopeId","data-v-406bfbb3"]]);export{It as default};
